var Vn=Object.defineProperty;var Un=(s,r,n)=>r in s?Vn(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var or=(s,r,n)=>(Un(s,typeof r!="symbol"?r+"":r,n),n);import{N as get_store_value,S as SvelteComponent,i as init,s as safe_not_equal,k as element,q as text,a as space,l as claim_element,m as children,r as claim_text,h as detach,c as claim_space,n as attr,b as insert_hydration,D as append_hydration,X as set_input_value,J as listen$1,u as set_data,E as noop,L as run_all,Y as to_number,Z as svg_element,_ as claim_svg_element,K as destroy_each,o as onMount,$ as onDestroy,a0 as null_to_empty,T as action_destroyer,U as is_function,v as group_outros,a1 as update_keyed_each,a2 as outro_and_destroy_block,f as check_outros,g as transition_in,d as transition_out,F as component_subscribe,t as tick,W as globals,e as empty,w as binding_callbacks,y as create_component,z as claim_component,A as mount_component,B as destroy_component,a3 as destroy_block,p as set_style,I as toggle_class,G as bind,H as add_flush_callback,a4 as set_store_value,M as createEventDispatcher,O as create_slot,P as update_slot_base,Q as get_all_dirty_from_scope,R as get_slot_changes,a5 as bubble,a6 as assign,a7 as set_svg_attributes,a8 as add_render_callback,a9 as add_iframe_resize_listener,aa as prevent_default,ab as compute_rest_props,ac as setContext$1,ad as exclude_internal_props,ae as set_dynamic_element_data,af as get_spread_update,ag as create_bidirectional_transition,ah as split_css_unit,ai as identity,aj as set_attributes,ak as getContext$1,al as get_spread_object,am as compute_slots,V as head_selector}from"../chunks/index.7d6fffdc.js";import{U as volume,V as samples$1,W as synthValues,X as throttle,Y as drone,Z as envelopeValues,_ as mapToStepRange,$ as mute,J as d,a0 as sockets,a1 as instrumentParameters,a2 as connections,a3 as connectSockets,a4 as activateSocket,a5 as deactivateSockets,a6 as disconnectSocket,a7 as keys,a8 as paramValues,a9 as globalParameters,aa as fxParameters,F as FontAwesomeIcon,ab as faLock,ac as randomise,S as Select,Q as clamp$1,ad as getDefaultExportFromCjs,u as inputs,ae as wm,H as Button,af as faSignal,ag as envelopes,m as library$1,ah as faCircle,ai as commonjsGlobal,aj as seconds,ak as bpm,al as beats,am as isMeasuring,i as isApp,an as source,ao as measure,ap as commonjsRequire,q as qubits,aq as debounce,ar as redrawCables,as as min,at as activeQubitCount,au as axes,p as getUserColour,av as getUserName,N as Slider,aw as instruments$1,ax as instrument,ay as faSmileWink,az as faNetworkWired,aA as faCompactDisc,aB as faBraille,aC as faTable,aD as cubicInOut,aE as cubicOut,aF as isChrome,a as id,n as name,l as location$1,aG as headers,aH as apiDomain,aI as isLoggedIn,aJ as pusherKey,aK as apiWsDomain,aL as users,aM as apiToken,aN as activePreset,aO as presets,aP as getAppState,aQ as updateSamples,aR as faBars,P as Presets,aS as savePreset,aT as deletePreset,aU as editPreset,g as getUsers,s as showSideMenu,aV as presetKeys,aW as fullscreen,aX as showKeyboard,aY as sineIn}from"../chunks/Slider.2e530a14.js";import{_ as __vitePreload}from"../chunks/preload-helper.a4192956.js";import{w as writable$1}from"../chunks/index.9e0356d6.js";function _mergeNamespaces(s,r){for(var n=0;n<r.length;n++){const t=r[n];if(typeof t!="string"&&!Array.isArray(t)){for(const a in t)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(t,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>t[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}const prerender=!0,_page=Object.freeze(Object.defineProperty({__proto__:null,prerender},Symbol.toStringTag,{value:"Module"})),version="14.7.77",createExtendedExponentialRampToValueAutomationEvent=(s,r,n)=>({endTime:r,insertTime:n,type:"exponentialRampToValue",value:s}),createExtendedLinearRampToValueAutomationEvent=(s,r,n)=>({endTime:r,insertTime:n,type:"linearRampToValue",value:s}),createSetValueAutomationEvent=(s,r)=>({startTime:r,type:"setValue",value:s}),createSetValueCurveAutomationEvent=(s,r,n)=>({duration:n,startTime:r,type:"setValueCurve",values:s}),getTargetValueAtTime=(s,r,{startTime:n,target:t,timeConstant:a})=>t+(r-t)*Math.exp((n-s)/a),isExponentialRampToValueAutomationEvent=s=>s.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=s=>s.type==="linearRampToValue",isAnyRampToValueAutomationEvent=s=>isExponentialRampToValueAutomationEvent(s)||isLinearRampToValueAutomationEvent(s),isSetValueAutomationEvent=s=>s.type==="setValue",isSetValueCurveAutomationEvent=s=>s.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(s,r,n,t)=>{const a=s[r];return a===void 0?t:isAnyRampToValueAutomationEvent(a)||isSetValueAutomationEvent(a)?a.value:isSetValueCurveAutomationEvent(a)?a.values[a.values.length-1]:getTargetValueAtTime(n,getValueOfAutomationEventAtIndexAtTime(s,r-1,a.startTime,t),a)},getEndTimeAndValueOfPreviousAutomationEvent=(s,r,n,t,a)=>n===void 0?[t.insertTime,a]:isAnyRampToValueAutomationEvent(n)?[n.endTime,n.value]:isSetValueAutomationEvent(n)?[n.startTime,n.value]:isSetValueCurveAutomationEvent(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,getValueOfAutomationEventAtIndexAtTime(s,r-1,n.startTime,a)],isCancelAndHoldAutomationEvent=s=>s.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=s=>s.type==="cancelScheduledValues",getEventTime=s=>isCancelAndHoldAutomationEvent(s)||isCancelScheduledValuesAutomationEvent(s)?s.cancelTime:isExponentialRampToValueAutomationEvent(s)||isLinearRampToValueAutomationEvent(s)?s.endTime:s.startTime,getExponentialRampValueAtTime=(s,r,n,{endTime:t,value:a})=>n===a?a:0<n&&0<a||n<0&&a<0?n*(a/n)**((s-r)/(t-r)):0,getLinearRampValueAtTime=(s,r,n,{endTime:t,value:a})=>n+(s-r)/(t-r)*(a-n),interpolateValue=(s,r)=>{const n=Math.floor(r),t=Math.ceil(r);return n===t?s[n]:(1-(r-n))*s[n]+(1-(t-r))*s[t]},getValueCurveValueAtTime=(s,{duration:r,startTime:n,values:t})=>{const a=(s-n)/r*(t.length-1);return interpolateValue(t,a)},isSetTargetAutomationEvent=s=>s.type==="setTarget";class AutomationEventList{constructor(r){this._automationEvents=[],this._currenTime=0,this._defaultValue=r}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(r){const n=getEventTime(r);if(isCancelAndHoldAutomationEvent(r)||isCancelScheduledValuesAutomationEvent(r)){const t=this._automationEvents.findIndex(l=>isCancelScheduledValuesAutomationEvent(r)&&isSetValueCurveAutomationEvent(l)?l.startTime+l.duration>=n:getEventTime(l)>=n),a=this._automationEvents[t];if(t!==-1&&(this._automationEvents=this._automationEvents.slice(0,t)),isCancelAndHoldAutomationEvent(r)){const l=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&isAnyRampToValueAutomationEvent(a)){if(l!==void 0&&isSetTargetAutomationEvent(l))throw new Error("The internal list is malformed.");const o=l===void 0?a.insertTime:isSetValueCurveAutomationEvent(l)?l.startTime+l.duration:getEventTime(l),c=l===void 0?this._defaultValue:isSetValueCurveAutomationEvent(l)?l.values[l.values.length-1]:l.value,i=isExponentialRampToValueAutomationEvent(a)?getExponentialRampValueAtTime(n,o,c,a):getLinearRampValueAtTime(n,o,c,a),f=isExponentialRampToValueAutomationEvent(a)?createExtendedExponentialRampToValueAutomationEvent(i,n,this._currenTime):createExtendedLinearRampToValueAutomationEvent(i,n,this._currenTime);this._automationEvents.push(f)}if(l!==void 0&&isSetTargetAutomationEvent(l)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(n),n)),l!==void 0&&isSetValueCurveAutomationEvent(l)&&l.startTime+l.duration>n){const o=n-l.startTime,c=(l.values.length-1)/l.duration,i=Math.max(2,1+Math.ceil(o*c)),f=o/(i-1)*c,y=l.values.slice(0,i);if(f<1)for(let _=1;_<i;_+=1){const u=f*_%1;y[_]=l.values[_-1]*(1-u)+l.values[_]*u}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(y,l.startTime,o)}}}else{const t=this._automationEvents.findIndex(o=>getEventTime(o)>n),a=t===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[t-1];if(a!==void 0&&isSetValueCurveAutomationEvent(a)&&getEventTime(a)+a.duration>n)return!1;const l=isExponentialRampToValueAutomationEvent(r)?createExtendedExponentialRampToValueAutomationEvent(r.value,r.endTime,this._currenTime):isLinearRampToValueAutomationEvent(r)?createExtendedLinearRampToValueAutomationEvent(r.value,n,this._currenTime):r;if(t===-1)this._automationEvents.push(l);else{if(isSetValueCurveAutomationEvent(r)&&n+r.duration>getEventTime(this._automationEvents[t]))return!1;this._automationEvents.splice(t,0,l)}}return!0}flush(r){const n=this._automationEvents.findIndex(t=>getEventTime(t)>r);if(n>1){const t=this._automationEvents.slice(n-1),a=t[0];isSetTargetAutomationEvent(a)&&t.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,n-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=t}}getValue(r){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>getEventTime(o)>r),t=this._automationEvents[n],a=(n===-1?this._automationEvents.length:n)-1,l=this._automationEvents[a];if(l!==void 0&&isSetTargetAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)||t.insertTime>r))return getTargetValueAtTime(r,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,a-1,l.startTime,this._defaultValue),l);if(l!==void 0&&isSetValueAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)))return l.value;if(l!==void 0&&isSetValueCurveAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)||l.startTime+l.duration>r))return r<l.startTime+l.duration?getValueCurveValueAtTime(r,l):l.values[l.values.length-1];if(l!==void 0&&isAnyRampToValueAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)))return l.value;if(t!==void 0&&isExponentialRampToValueAutomationEvent(t)){const[o,c]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,a,l,t,this._defaultValue);return getExponentialRampValueAtTime(r,o,c,t)}if(t!==void 0&&isLinearRampToValueAutomationEvent(t)){const[o,c]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,a,l,t,this._defaultValue);return getLinearRampValueAtTime(r,o,c,t)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=s=>({cancelTime:s,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=s=>({cancelTime:s,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(s,r)=>({endTime:r,type:"exponentialRampToValue",value:s}),createLinearRampToValueAutomationEvent=(s,r)=>({endTime:r,type:"linearRampToValue",value:s}),createSetTargetAutomationEvent=(s,r,n)=>({startTime:r,target:s,timeConstant:n,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=s=>(r,n,[t,a,l],o)=>{s(r[a],[n,t,l],c=>c[0]===n&&c[1]===t,o)},createAddAudioNodeConnections=s=>(r,n,t)=>{const a=[];for(let l=0;l<t.numberOfInputs;l+=1)a.push(new Set);s.set(r,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},createAddAudioParamConnections=s=>(r,n)=>{s.set(r,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=s=>{try{const r=new Proxy(s,handler);new r}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(s,r)=>{const n=[];let t=s.replace(/^[\s]+/,""),a=t.match(IMPORT_STATEMENT_REGEX);for(;a!==null;){const l=a[1].slice(1,-1),o=a[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,r).toString());n.push(o),t=t.slice(a[0].length).replace(/^[\s]+/,""),a=t.match(IMPORT_STATEMENT_REGEX)}return[n.join(";"),t]},verifyParameterDescriptors=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=s=>{if(!isConstructible(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(s,r,n,t,a,l,o,c,i,f,y,_,u)=>{let m=0;return(p,g,x={credentials:"omit"})=>{const b=y.get(p);if(b!==void 0&&b.has(g))return Promise.resolve();const E=f.get(p);if(E!==void 0){const T=E.get(g);if(T!==void 0)return T}const S=l(p),k=S.audioWorklet===void 0?a(g).then(([T,j])=>{const[A,C]=splitImportStatements(T,j),N=`${A};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return n(N)}).then(()=>{const T=u._AWGS.pop();if(T===void 0)throw new SyntaxError;t(S.currentTime,S.sampleRate,()=>T(class{},void 0,(j,A)=>{if(j.trim()==="")throw r();const C=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(S);if(C!==void 0){if(C.has(j))throw r();verifyProcessorCtor(A),verifyParameterDescriptors(A.parameterDescriptors),C.set(j,A)}else verifyProcessorCtor(A),verifyParameterDescriptors(A.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(S,new Map([[j,A]]))},S.sampleRate,void 0,void 0))}):Promise.all([a(g),Promise.resolve(s(_,_))]).then(([[T,j],A])=>{const C=m+1;m=C;const[N,V]=splitImportStatements(T,j),q=`${N};((AudioWorkletProcessor,registerProcessor)=>{${V}
})(${A?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${A?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${A?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,M=new Blob([q],{type:"application/javascript; charset=utf-8"}),L=URL.createObjectURL(M);return S.audioWorklet.addModule(L,x).then(()=>{if(c(S))return S;const H=o(S);return H.audioWorklet.addModule(L,x).then(()=>H)}).then(H=>{if(i===null)throw new SyntaxError;try{new i(H,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(L))});return E===void 0?f.set(p,new Map([[g,k]])):E.set(g,k),k.then(()=>{const T=y.get(p);T===void 0?y.set(p,new Set([g])):T.add(g)}).finally(()=>{const T=f.get(p);T!==void 0&&T.delete(g)}),k}},getValueForKey=(s,r)=>{const n=s.get(r);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},pickElementFromSet=(s,r)=>{const n=Array.from(s).filter(r);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[t]=n;return s.delete(t),t},deletePassiveInputConnectionToAudioNode=(s,r,n,t)=>{const a=getValueForKey(s,r),l=pickElementFromSet(a,o=>o[0]===n&&o[1]===t);return a.size===0&&s.delete(r),l},getEventListenersOfAudioNode=s=>getValueForKey(EVENT_LISTENERS,s),setInternalStateToActive=s=>{if(ACTIVE_AUDIO_NODE_STORE.has(s))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(s),getEventListenersOfAudioNode(s).forEach(r=>r(!0))},isAudioWorkletNode=s=>"port"in s,setInternalStateToPassive=s=>{if(!ACTIVE_AUDIO_NODE_STORE.has(s))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(s),getEventListenersOfAudioNode(s).forEach(r=>r(!1))},setInternalStateToPassiveWhenNecessary=(s,r)=>{!isAudioWorkletNode(s)&&r.every(n=>n.size===0)&&setInternalStateToPassive(s)},createAddConnectionToAudioNode=(s,r,n,t,a,l,o,c,i,f,y,_,u)=>{const m=new WeakMap;return(p,g,x,b,E)=>{const{activeInputs:S,passiveInputs:k}=l(g),{outputs:T}=l(p),j=c(p),A=C=>{const N=i(g),V=i(p);if(C){const I=deletePassiveInputConnectionToAudioNode(k,p,x,b);s(S,p,I,!1),!E&&!_(p)&&n(V,N,x,b),u(g)&&setInternalStateToActive(g)}else{const I=t(S,p,x,b);r(k,b,I,!1),!E&&!_(p)&&a(V,N,x,b);const G=o(g);if(G===0)y(g)&&setInternalStateToPassiveWhenNecessary(g,S);else{const R=m.get(g);R!==void 0&&clearTimeout(R),m.set(g,setTimeout(()=>{y(g)&&setInternalStateToPassiveWhenNecessary(g,S)},G*1e3))}}};return f(T,[g,x,b],C=>C[0]===g&&C[1]===x&&C[2]===b,!0)?(j.add(A),y(p)?s(S,p,[x,b,A],!0):r(k,b,[p,x,A],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=s=>(r,n,[t,a,l],o)=>{const c=r.get(t);c===void 0?r.set(t,new Set([[a,n,l]])):s(c,[a,n,l],i=>i[0]===a&&i[1]===n,o)},createAddSilentConnection=s=>(r,n)=>{const t=s(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(t).connect(r.destination);const a=()=>{n.removeEventListener("ended",a),n.disconnect(t),t.disconnect()};n.addEventListener("ended",a)},createAddUnrenderedAudioWorkletNode=s=>(r,n)=>{s(r).add(n)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=a(c),y={...DEFAULT_OPTIONS$j,...i},_=t(f,y),u=l(f)?r():null;super(c,!1,_,u),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const i=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=i,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const i=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=i,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},isOwnedByContext=(s,r)=>s.context===r,createAnalyserNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=s(o,f)}return t.set(o,c),await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=s=>{s.getChannelData=(r=>n=>{try{return r.call(s,n)}catch(t){throw t.code===12?createIndexSizeError():t}})(s.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(s,r,n,t,a,l,o,c)=>{let i=null;return class Fn{constructor(y){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:u,sampleRate:m}={...DEFAULT_OPTIONS$i,...y};i===null&&(i=new a(1,1,44100));const p=t!==null&&r(l,l)?new t({length:_,numberOfChannels:u,sampleRate:m}):i.createBuffer(u,_,m);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),wrapAudioBufferGetChannelDataMethod(p)):r(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(p))||c(p),s.add(p),p}static[Symbol.hasInstance](y){return y!==null&&typeof y=="object"&&Object.getPrototypeOf(y)===Fn.prototype||s.has(y)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=s=>ACTIVE_AUDIO_NODE_STORE.has(s),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,y){const _=l(f),u={...DEFAULT_OPTIONS$h,...y},m=a(_,u),p=o(_),g=p?r():null;super(f,!1,m,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=u.buffer!==null,this._nativeAudioBufferSourceNode=m,this._onended=null,this._playbackRate=n(this,p,m.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw t();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const y=typeof f=="function"?c(this,f):null;this._nativeAudioBufferSourceNode.onended=y;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===y?f:_}get playbackRate(){return this._playbackRate}start(f=0,y=0,_){if(this._nativeAudioBufferSourceNode.start(f,y,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[f,y]:[f,y,_]),this.context.state!=="closed"){setInternalStateToActive(this);const u=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",u),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",u)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},createAudioBufferSourceNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap;let o=null,c=null;const i=async(f,y)=>{let _=n(f);const u=isOwnedByContext(_,y);if(!u){const m={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=r(y,m),o!==null&&_.start(...o),c!==null&&_.stop(c)}return l.set(y,_),u?await s(y,f.playbackRate,_.playbackRate):await t(y,f.playbackRate,_.playbackRate),await a(f,y,_),_};return{set start(f){o=f},set stop(f){c=f},render(f,y){const _=l.get(y);return _!==void 0?Promise.resolve(_):i(f,y)}}},isAudioBufferSourceNode=s=>"playbackRate"in s,isBiquadFilterNode=s=>"frequency"in s&&"gain"in s,isConstantSourceNode=s=>"offset"in s,isGainNode=s=>!("frequency"in s)&&"gain"in s,isOscillatorNode=s=>"detune"in s&&"frequency"in s,isStereoPannerNode=s=>"pan"in s,getAudioNodeConnections=s=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,s),getAudioParamConnections=s=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,s),deactivateActiveAudioNodeInputConnections=(s,r)=>{const{activeInputs:n}=getAudioNodeConnections(s);n.forEach(a=>a.forEach(([l])=>{r.includes(s)||deactivateActiveAudioNodeInputConnections(l,[...r,s])}));const t=isAudioBufferSourceNode(s)?[s.playbackRate]:isAudioWorkletNode(s)?Array.from(s.parameters.values()):isBiquadFilterNode(s)?[s.Q,s.detune,s.frequency,s.gain]:isConstantSourceNode(s)?[s.offset]:isGainNode(s)?[s.gain]:isOscillatorNode(s)?[s.detune,s.frequency]:isStereoPannerNode(s)?[s.pan]:[];for(const a of t){const l=getAudioParamConnections(a);l!==void 0&&l.activeInputs.forEach(([o])=>deactivateActiveAudioNodeInputConnections(o,r))}isActiveAudioNode(s)&&setInternalStateToPassive(s)},deactivateAudioGraph=s=>{deactivateActiveAudioNodeInputConnections(s.destination,[])},isValidLatencyHint=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),createAudioContextConstructor=(s,r,n,t,a,l,o,c,i)=>class extends s{constructor(y={}){if(i===null)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new i(y)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(_===null)throw t();if(!isValidLatencyHint(y.latencyHint))throw new TypeError(`The provided value '${y.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(y.sampleRate!==void 0&&_.sampleRate!==y.sampleRate)throw n();super(_,2);const{latencyHint:u}=y,{sampleRate:m}=_;if(this._baseLatency=typeof _.baseLatency=="number"?_.baseLatency:u==="balanced"?512/m:u==="interactive"||u===void 0?256/m:u==="playback"?1024/m:Math.max(2,Math.min(128,Math.round(u*m/128)))*128/m,this._nativeAudioContext=_,i.name==="webkitAudioContext"?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,_.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),_.removeEventListener("statechange",p)};_.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw r()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(y){return new a(this,{mediaElement:y})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(y){return new o(this,{mediaStream:y})}createMediaStreamTrackSource(y){return new c(this,{mediaStreamTrack:y})}resume(){return this._state==="suspended"?new Promise((y,_)=>{const u=()=>{this._nativeAudioContext.removeEventListener("statechange",u),this._nativeAudioContext.state==="running"?y():this.resume().then(y,_)};this._nativeAudioContext.addEventListener("statechange",u)}):this._nativeAudioContext.resume().catch(y=>{throw y===void 0||y.code===15?r():y})}suspend(){return this._nativeAudioContext.suspend().catch(y=>{throw y===void 0?r():y})}},createAudioDestinationNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,y){const _=l(f),u=o(_),m=a(_,y,u),p=u?r(c):null;super(f,!1,m,p),this._isNodeOfNativeOfflineAudioContext=u,this._nativeAudioDestinationNode=m}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw t();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw t();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=s=>{const r=new WeakMap,n=async(t,a)=>{const l=a.destination;return r.set(a,l),await s(t,a,l),l};return{render(t,a){const l=r.get(a);return l!==void 0?Promise.resolve(l):n(t,a)}}},createAudioListenerFactory=(s,r,n,t,a,l,o,c)=>(i,f)=>{const y=f.listener,_=()=>{const T=new Float32Array(1),j=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=o(f);let C=!1,N=[0,0,-1,0,1,0],V=[0,0,0];const I=()=>{if(C)return;C=!0;const M=t(f,256,9,0);M.onaudioprocess=({inputBuffer:L})=>{const H=[l(L,T,0),l(L,T,1),l(L,T,2),l(L,T,3),l(L,T,4),l(L,T,5)];H.some((U,J)=>U!==N[J])&&(y.setOrientation(...H),N=H);const O=[l(L,T,6),l(L,T,7),l(L,T,8)];O.some((U,J)=>U!==V[J])&&(y.setPosition(...O),V=O)},j.connect(M)},G=M=>L=>{L!==N[M]&&(N[M]=L,y.setOrientation(...N))},R=M=>L=>{L!==V[M]&&(V[M]=L,y.setPosition(...V))},q=(M,L,H)=>{const O=n(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:L});O.connect(j,0,M),O.start(),Object.defineProperty(O.offset,"defaultValue",{get(){return L}});const U=s({context:i},A,O.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return c(U,"value",J=>()=>J.call(U),J=>Z=>{try{J.call(U,Z)}catch(z){if(z.code!==9)throw z}I(),A&&H(Z)}),U.cancelAndHoldAtTime=(J=>A?()=>{throw a()}:(...Z)=>{const z=J.apply(U,Z);return I(),z})(U.cancelAndHoldAtTime),U.cancelScheduledValues=(J=>A?()=>{throw a()}:(...Z)=>{const z=J.apply(U,Z);return I(),z})(U.cancelScheduledValues),U.exponentialRampToValueAtTime=(J=>A?()=>{throw a()}:(...Z)=>{const z=J.apply(U,Z);return I(),z})(U.exponentialRampToValueAtTime),U.linearRampToValueAtTime=(J=>A?()=>{throw a()}:(...Z)=>{const z=J.apply(U,Z);return I(),z})(U.linearRampToValueAtTime),U.setTargetAtTime=(J=>A?()=>{throw a()}:(...Z)=>{const z=J.apply(U,Z);return I(),z})(U.setTargetAtTime),U.setValueAtTime=(J=>A?()=>{throw a()}:(...Z)=>{const z=J.apply(U,Z);return I(),z})(U.setValueAtTime),U.setValueCurveAtTime=(J=>A?()=>{throw a()}:(...Z)=>{const z=J.apply(U,Z);return I(),z})(U.setValueCurveAtTime),U};return{forwardX:q(0,0,G(0)),forwardY:q(1,0,G(1)),forwardZ:q(2,-1,G(2)),positionX:q(6,0,R(0)),positionY:q(7,0,R(1)),positionZ:q(8,0,R(2)),upX:q(3,0,G(3)),upY:q(4,1,G(4)),upZ:q(5,0,G(5))}},{forwardX:u,forwardY:m,forwardZ:p,positionX:g,positionY:x,positionZ:b,upX:E,upY:S,upZ:k}=y.forwardX===void 0?_():y;return{get forwardX(){return u},get forwardY(){return m},get forwardZ(){return p},get positionX(){return g},get positionY(){return x},get positionZ(){return b},get upX(){return E},get upY(){return S},get upZ(){return k}}},isAudioNode$1=s=>"context"in s,isAudioNodeOutputConnection=s=>isAudioNode$1(s[0]),insertElementInSet=(s,r,n,t)=>{for(const a of s)if(n(a)){if(t)return!1;throw Error("The set contains at least one similar element.")}return s.add(r),!0},addActiveInputConnectionToAudioParam=(s,r,[n,t],a)=>{insertElementInSet(s,[r,n,t],l=>l[0]===r&&l[1]===n,a)},addPassiveInputConnectionToAudioParam=(s,[r,n,t],a)=>{const l=s.get(r);l===void 0?s.set(r,new Set([[n,t]])):insertElementInSet(l,[n,t],o=>o[0]===n,a)},isNativeAudioNodeFaker=s=>"inputs"in s,connectNativeAudioNodeToNativeAudioNode=(s,r,n,t)=>{if(isNativeAudioNodeFaker(r)){const a=r.inputs[t];return s.connect(a,n,0),[a,n,0]}return s.connect(r,n,t),[r,n,t]},deleteActiveInputConnection=(s,r,n)=>{for(const t of s)if(t[0]===r&&t[1]===n)return s.delete(t),t;return null},deleteActiveInputConnectionToAudioParam=(s,r,n)=>pickElementFromSet(s,t=>t[0]===r&&t[1]===n),deleteEventListenerOfAudioNode=(s,r)=>{if(!getEventListenersOfAudioNode(s).delete(r))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(s,r,n)=>{const t=getValueForKey(s,r),a=pickElementFromSet(t,l=>l[0]===n);return t.size===0&&s.delete(r),a},disconnectNativeAudioNodeFromNativeAudioNode=(s,r,n,t)=>{isNativeAudioNodeFaker(r)?s.disconnect(r.inputs[t],n,0):s.disconnect(r,n,t)},getNativeAudioNode=s=>getValueForKey(AUDIO_NODE_STORE,s),getNativeAudioParam=s=>getValueForKey(AUDIO_PARAM_STORE,s),isPartOfACycle=s=>CYCLE_COUNTERS.has(s),isPassiveAudioNode=s=>!ACTIVE_AUDIO_NODE_STORE.has(s),testAudioNodeDisconnectMethodSupport=(s,r)=>new Promise(n=>{if(r!==null)n(!0);else{const t=s.createScriptProcessor(256,1,1),a=s.createGain(),l=s.createBuffer(1,2,44100),o=l.getChannelData(0);o[0]=1,o[1]=1;const c=s.createBufferSource();c.buffer=l,c.loop=!0,c.connect(t).connect(s.destination),c.connect(a),c.disconnect(a),t.onaudioprocess=i=>{const f=i.inputBuffer.getChannelData(0);Array.prototype.some.call(f,y=>y===1)?n(!0):n(!1),c.stop(),t.onaudioprocess=null,c.disconnect(t),t.disconnect(s.destination)},c.start()}}),visitEachAudioNodeOnce=(s,r)=>{const n=new Map;for(const t of s)for(const a of t){const l=n.get(a);n.set(a,l===void 0?1:l+1)}n.forEach((t,a)=>r(a,t))},isNativeAudioNode$1=s=>"context"in s,wrapAudioNodeDisconnectMethod=s=>{const r=new Map;s.connect=(n=>(t,a=0,l=0)=>{const o=isNativeAudioNode$1(t)?n(t,a,l):n(t,a),c=r.get(t);return c===void 0?r.set(t,[{input:l,output:a}]):c.every(i=>i.input!==l||i.output!==a)&&c.push({input:l,output:a}),o})(s.connect.bind(s)),s.disconnect=(n=>(t,a,l)=>{if(n.apply(s),t===void 0)r.clear();else if(typeof t=="number")for(const[o,c]of r){const i=c.filter(f=>f.output!==t);i.length===0?r.delete(o):r.set(o,i)}else if(r.has(t))if(a===void 0)r.delete(t);else{const o=r.get(t);if(o!==void 0){const c=o.filter(i=>i.output!==a&&(i.input!==l||l===void 0));c.length===0?r.delete(t):r.set(t,c)}}for(const[o,c]of r)c.forEach(i=>{isNativeAudioNode$1(o)?s.connect(o,i.output,i.input):s.connect(o,i.output)})})(s.disconnect)},addConnectionToAudioParamOfAudioContext=(s,r,n,t)=>{const{activeInputs:a,passiveInputs:l}=getAudioParamConnections(r),{outputs:o}=getAudioNodeConnections(s),c=getEventListenersOfAudioNode(s),i=f=>{const y=getNativeAudioNode(s),_=getNativeAudioParam(r);if(f){const u=deletePassiveInputConnectionToAudioParam(l,s,n);addActiveInputConnectionToAudioParam(a,s,u,!1),!t&&!isPartOfACycle(s)&&y.connect(_,n)}else{const u=deleteActiveInputConnectionToAudioParam(a,s,n);addPassiveInputConnectionToAudioParam(l,u,!1),!t&&!isPartOfACycle(s)&&y.disconnect(_,n)}};return insertElementInSet(o,[r,n],f=>f[0]===r&&f[1]===n,!0)?(c.add(i),isActiveAudioNode(s)?addActiveInputConnectionToAudioParam(a,s,[n,i],!0):addPassiveInputConnectionToAudioParam(l,[s,n,i],!0),!0):!1},deleteInputConnectionOfAudioNode=(s,r,n,t)=>{const{activeInputs:a,passiveInputs:l}=getAudioNodeConnections(r),o=deleteActiveInputConnection(a[t],s,n);return o===null?[deletePassiveInputConnectionToAudioNode(l,s,n,t)[2],!1]:[o[2],!0]},deleteInputConnectionOfAudioParam=(s,r,n)=>{const{activeInputs:t,passiveInputs:a}=getAudioParamConnections(r),l=deleteActiveInputConnection(t,s,n);return l===null?[deletePassiveInputConnectionToAudioParam(a,s,n)[1],!1]:[l[2],!0]},deleteInputsOfAudioNode=(s,r,n,t,a)=>{const[l,o]=deleteInputConnectionOfAudioNode(s,n,t,a);if(l!==null&&(deleteEventListenerOfAudioNode(s,l),o&&!r&&!isPartOfACycle(s)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(s),getNativeAudioNode(n),t,a)),isActiveAudioNode(n)){const{activeInputs:c}=getAudioNodeConnections(n);setInternalStateToPassiveWhenNecessary(n,c)}},deleteInputsOfAudioParam=(s,r,n,t)=>{const[a,l]=deleteInputConnectionOfAudioParam(s,n,t);a!==null&&(deleteEventListenerOfAudioNode(s,a),l&&!r&&!isPartOfACycle(s)&&getNativeAudioNode(s).disconnect(getNativeAudioParam(n),t))},deleteAnyConnection=(s,r)=>{const n=getAudioNodeConnections(s),t=[];for(const a of n.outputs)isAudioNodeOutputConnection(a)?deleteInputsOfAudioNode(s,r,...a):deleteInputsOfAudioParam(s,r,...a),t.push(a[0]);return n.outputs.clear(),t},deleteConnectionAtOutput=(s,r,n)=>{const t=getAudioNodeConnections(s),a=[];for(const l of t.outputs)l[1]===n&&(isAudioNodeOutputConnection(l)?deleteInputsOfAudioNode(s,r,...l):deleteInputsOfAudioParam(s,r,...l),a.push(l[0]),t.outputs.delete(l));return a},deleteConnectionToDestination=(s,r,n,t,a)=>{const l=getAudioNodeConnections(s);return Array.from(l.outputs).filter(o=>o[0]===n&&(t===void 0||o[1]===t)&&(a===void 0||o[2]===a)).map(o=>(isAudioNodeOutputConnection(o)?deleteInputsOfAudioNode(s,r,...o):deleteInputsOfAudioParam(s,r,...o),l.outputs.delete(o),o[0]))},createAudioNodeConstructor=(s,r,n,t,a,l,o,c,i,f,y,_,u,m,p,g)=>class extends f{constructor(b,E,S,k){super(S),this._context=b,this._nativeAudioNode=S;const T=y(b);_(T)&&n(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(T,g))!==!0&&wrapAudioNodeDisconnectMethod(S),AUDIO_NODE_STORE.set(this,S),EVENT_LISTENERS.set(this,new Set),b.state!=="closed"&&E&&setInternalStateToActive(this),s(this,k,S)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(b){this._nativeAudioNode.channelCount=b}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(b){this._nativeAudioNode.channelCountMode=b}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(b){this._nativeAudioNode.channelInterpretation=b}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(b,E=0,S=0){if(E<0||E>=this._nativeAudioNode.numberOfOutputs)throw a();const k=y(this._context),T=p(k);if(u(b)||m(b))throw l();if(isAudioNode$1(b)){const C=getNativeAudioNode(b);try{const V=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,C,E,S),I=isPassiveAudioNode(this);(T||I)&&this._nativeAudioNode.disconnect(...V),this.context.state!=="closed"&&!I&&isPassiveAudioNode(b)&&setInternalStateToActive(b)}catch(V){throw V.code===12?l():V}if(r(this,b,E,S,T)){const V=i([this],b);visitEachAudioNodeOnce(V,t(T))}return b}const j=getNativeAudioParam(b);if(j.name==="playbackRate"&&j.maxValue===1024)throw o();try{this._nativeAudioNode.connect(j,E),(T||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(j,E)}catch(C){throw C.code===12?l():C}if(addConnectionToAudioParamOfAudioContext(this,b,E,T)){const C=i([this],b);visitEachAudioNodeOnce(C,t(T))}}disconnect(b,E,S){let k;const T=y(this._context),j=p(T);if(b===void 0)k=deleteAnyConnection(this,j);else if(typeof b=="number"){if(b<0||b>=this.numberOfOutputs)throw a();k=deleteConnectionAtOutput(this,j,b)}else{if(E!==void 0&&(E<0||E>=this.numberOfOutputs)||isAudioNode$1(b)&&S!==void 0&&(S<0||S>=b.numberOfInputs))throw a();if(k=deleteConnectionToDestination(this,j,b,E,S),k.length===0)throw l()}for(const A of k){const C=i([this],A);visitEachAudioNodeOnce(C,c)}}},createAudioParamFactory=(s,r,n,t,a,l,o,c,i,f,y,_,u)=>(m,p,g,x=null,b=null)=>{const E=g.value,S=new AutomationEventList(E),k=p?t(S):null,T={get defaultValue(){return E},get maxValue(){return x===null?g.maxValue:x},get minValue(){return b===null?g.minValue:b},get value(){return g.value},set value(j){g.value=j,T.setValueAtTime(j,m.context.currentTime)},cancelAndHoldAtTime(j){if(typeof g.cancelAndHoldAtTime=="function")k===null&&S.flush(m.context.currentTime),S.add(a(j)),g.cancelAndHoldAtTime(j);else{const A=Array.from(S).pop();k===null&&S.flush(m.context.currentTime),S.add(a(j));const C=Array.from(S).pop();g.cancelScheduledValues(j),A!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?g.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?g.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&g.setValueCurveAtTime(C.values,C.startTime,C.duration))}return T},cancelScheduledValues(j){return k===null&&S.flush(m.context.currentTime),S.add(l(j)),g.cancelScheduledValues(j),T},exponentialRampToValueAtTime(j,A){if(j===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;const C=m.context.currentTime;return k===null&&S.flush(C),Array.from(S).length===0&&(S.add(f(E,C)),g.setValueAtTime(E,C)),S.add(o(j,A)),g.exponentialRampToValueAtTime(j,A),T},linearRampToValueAtTime(j,A){const C=m.context.currentTime;return k===null&&S.flush(C),Array.from(S).length===0&&(S.add(f(E,C)),g.setValueAtTime(E,C)),S.add(c(j,A)),g.linearRampToValueAtTime(j,A),T},setTargetAtTime(j,A,C){return k===null&&S.flush(m.context.currentTime),S.add(i(j,A,C)),g.setTargetAtTime(j,A,C),T},setValueAtTime(j,A){return k===null&&S.flush(m.context.currentTime),S.add(f(j,A)),g.setValueAtTime(j,A),T},setValueCurveAtTime(j,A,C){const N=j instanceof Float32Array?j:new Float32Array(j);if(_!==null&&_.name==="webkitAudioContext"){const V=A+C,I=m.context.sampleRate,G=Math.ceil(A*I),R=Math.floor(V*I),q=R-G,M=new Float32Array(q);for(let H=0;H<q;H+=1){const O=(N.length-1)/C*((G+H)/I-A),U=Math.floor(O),J=Math.ceil(O);M[H]=U===J?N[U]:(1-(O-U))*N[U]+(1-(J-O))*N[J]}k===null&&S.flush(m.context.currentTime),S.add(y(M,A,C)),g.setValueCurveAtTime(M,A,C);const L=R/I;L<V&&u(T,M[M.length-1],L),u(T,N[N.length-1],V)}else k===null&&S.flush(m.context.currentTime),S.add(y(N,A,C)),g.setValueCurveAtTime(N,A,C);return T}};return n.set(T,g),r.set(T,m),s(T,k),T},createAudioParamRenderer=s=>({replay(r){for(const n of s)if(n.type==="exponentialRampToValue"){const{endTime:t,value:a}=n;r.exponentialRampToValueAtTime(a,t)}else if(n.type==="linearRampToValue"){const{endTime:t,value:a}=n;r.linearRampToValueAtTime(a,t)}else if(n.type==="setTarget"){const{startTime:t,target:a,timeConstant:l}=n;r.setTargetAtTime(a,t,l)}else if(n.type==="setValue"){const{startTime:t,value:a}=n;r.setValueAtTime(a,t)}else if(n.type==="setValueCurve"){const{duration:t,startTime:a,values:l}=n;r.setValueCurveAtTime(l,a,t)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(r){this._map=new Map(r)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(r,n=null){return this._map.forEach((t,a)=>r.call(n,t,a,this))}get(r){return this._map.get(r)}has(r){return this._map.has(r)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(s,r,n,t,a,l,o,c,i,f,y,_,u,m)=>class extends r{constructor(g,x,b){var E;const S=c(g),k=i(S),T=y({...DEFAULT_OPTIONS$g,...b});u(T);const j=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(S),A=j==null?void 0:j.get(x),C=k||S.state!=="closed"?S:(E=o(S))!==null&&E!==void 0?E:S,N=a(C,k?null:g.baseLatency,f,x,A,T),V=k?t(x,T,A):null;super(g,!0,N,V);const I=[];N.parameters.forEach((R,q)=>{const M=n(this,k,R);I.push([q,M])}),this._nativeAudioWorkletNode=N,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(I),k&&s(S,this);const{activeInputs:G}=l(this);_(N,G)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const x=typeof g=="function"?m(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=x;const b=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=b!==null&&b===x?g:b}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(s,r,n,t,a){if(typeof s.copyFromChannel=="function")r[n].byteLength===0&&(r[n]=new Float32Array(128)),s.copyFromChannel(r[n],t,a);else{const l=s.getChannelData(t);if(r[n].byteLength===0)r[n]=l.slice(a,a+128);else{const o=new Float32Array(l.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);r[n].set(o)}}}const copyToChannel=(s,r,n,t,a)=>{typeof s.copyToChannel=="function"?r[n].byteLength!==0&&s.copyToChannel(r[n],t,a):r[n].byteLength!==0&&s.getChannelData(t).set(r[n],a)},createNestedArrays=(s,r)=>{const n=[];for(let t=0;t<s;t+=1){const a=[],l=typeof r=="number"?r:r[t];for(let o=0;o<l;o+=1)a.push(new Float32Array(128));n.push(a)}return n},getAudioWorkletProcessor=(s,r)=>{const n=getValueForKey(NODE_TO_PROCESSOR_MAPS,s),t=getNativeAudioNode(r);return getValueForKey(n,t)},processBuffer=async(s,r,n,t,a,l,o)=>{const c=r===null?Math.ceil(s.context.length/128)*128:r.length,i=t.channelCount*t.numberOfInputs,f=a.reduce((x,b)=>x+b,0),y=f===0?null:n.createBuffer(f,c,n.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const _=getAudioNodeConnections(s),u=await getAudioWorkletProcessor(n,s),m=createNestedArrays(t.numberOfInputs,t.channelCount),p=createNestedArrays(t.numberOfOutputs,a),g=Array.from(s.parameters.keys()).reduce((x,b)=>({...x,[b]:new Float32Array(128)}),{});for(let x=0;x<c;x+=128){if(t.numberOfInputs>0&&r!==null)for(let b=0;b<t.numberOfInputs;b+=1)for(let E=0;E<t.channelCount;E+=1)copyFromChannel(r,m[b],E,E,x);l.parameterDescriptors!==void 0&&r!==null&&l.parameterDescriptors.forEach(({name:b},E)=>{copyFromChannel(r,g,b,i+E,x)});for(let b=0;b<t.numberOfInputs;b+=1)for(let E=0;E<a[b];E+=1)p[b][E].byteLength===0&&(p[b][E]=new Float32Array(128));try{const b=m.map((S,k)=>_.activeInputs[k].size===0?[]:S),E=o(x/n.sampleRate,n.sampleRate,()=>u.process(b,p,g));if(y!==null)for(let S=0,k=0;S<t.numberOfOutputs;S+=1){for(let T=0;T<a[S];T+=1)copyToChannel(y,p[S],T,k+T,x);k+=a[S]}if(!E)break}catch(b){s.dispatchEvent(new ErrorEvent("processorerror",{colno:b.colno,filename:b.filename,lineno:b.lineno,message:b.message}));break}}return y},createAudioWorkletNodeRendererFactory=(s,r,n,t,a,l,o,c,i,f,y,_,u,m,p,g)=>(x,b,E)=>{const S=new WeakMap;let k=null;const T=async(j,A)=>{let C=y(j),N=null;const V=isOwnedByContext(C,A),I=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(_===null){const G=I.reduce((L,H)=>L+H,0),R=a(A,{channelCount:Math.max(1,G),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,G)}),q=[];for(let L=0;L<j.numberOfOutputs;L+=1)q.push(t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:I[L]}));const M=o(A,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1});M.connect=r.bind(null,q),M.disconnect=i.bind(null,q),N=[R,q,M]}else V||(C=new _(A,x));if(S.set(A,N===null?C:N[2]),N!==null){if(k===null){if(E===void 0)throw new Error("Missing the processor constructor.");if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const H=j.channelCount*j.numberOfInputs,O=E.parameterDescriptors===void 0?0:E.parameterDescriptors.length,U=H+O;k=processBuffer(j,U===0?null:await(async()=>{const Z=new u(U,Math.ceil(j.context.length/128)*128,A.sampleRate),z=[],B=[];for(let K=0;K<b.numberOfInputs;K+=1)z.push(o(Z,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),B.push(a(Z,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const D=await Promise.all(Array.from(j.parameters.values()).map(async K=>{const re=l(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K.value});return await m(Z,K,re.offset),re})),X=t(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,H+O)});for(let K=0;K<b.numberOfInputs;K+=1){z[K].connect(B[K]);for(let re=0;re<b.channelCount;re+=1)B[K].connect(X,re,K*b.channelCount+re)}for(const[K,re]of D.entries())re.connect(X,0,H+K),re.start(0);return X.connect(Z.destination),await Promise.all(z.map(K=>p(j,Z,K))),g(Z)})(),A,b,I,E,f)}const G=await k,R=n(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[q,M,L]=N;G!==null&&(R.buffer=G,R.start(0)),R.connect(q);for(let H=0,O=0;H<j.numberOfOutputs;H+=1){const U=M[H];for(let J=0;J<I[H];J+=1)q.connect(U,O+J,J);O+=I[H]}return L}if(V)for(const[G,R]of j.parameters.entries())await s(A,R,C.parameters.get(G));else for(const[G,R]of j.parameters.entries())await m(A,R,C.parameters.get(G));return await p(j,A,C),C};return{render(j,A){c(A,j);const C=S.get(A);return C!==void 0?Promise.resolve(C):T(j,A)}}},createBaseAudioContextConstructor=(s,r,n,t,a,l,o,c,i,f,y,_,u,m,p,g,x,b,E,S)=>class extends p{constructor(T,j){super(T,j),this._nativeContext=T,this._audioWorklet=s===void 0?void 0:{addModule:(A,C)=>s(this,A,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new r(this)}createBiquadFilter(){return new a(this)}createBuffer(T,j,A){return new n({length:j,numberOfChannels:T,sampleRate:A})}createBufferSource(){return new t(this)}createChannelMerger(T=6){return new l(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new o(this,{numberOfOutputs:T})}createConstantSource(){return new c(this)}createConvolver(){return new i(this)}createDelay(T=1){return new y(this,{maxDelayTime:T})}createDynamicsCompressor(){return new _(this)}createGain(){return new u(this)}createIIRFilter(T,j){return new m(this,{feedback:j,feedforward:T})}createOscillator(){return new g(this)}createPanner(){return new x(this)}createPeriodicWave(T,j,A={disableNormalization:!1}){return new b(this,{...A,imag:j,real:T})}createStereoPanner(){return new E(this)}createWaveShaper(){return new S(this)}decodeAudioData(T,j,A){return f(this._nativeContext,T).then(C=>(typeof j=="function"&&j(C),C),C=>{throw typeof A=="function"&&A(C),C})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,y){const _=l(f),u={...DEFAULT_OPTIONS$f,...y},m=a(_,u),p=o(_),g=p?n():null;super(f,!1,m,g),this._Q=r(this,p,m.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=r(this,p,m.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=r(this,p,m.frequency,f.sampleRate/2,0),this._gain=r(this,p,m.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=m,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,y,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,y,_)}catch(u){throw u.code===11?t():u}if(f.length!==y.length||y.length!==_.length)throw t()}},createBiquadFilterNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const y=isOwnedByContext(f,i);if(!y){const _={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=r(i,_)}return l.set(i,f),y?(await s(i,c.Q,f.Q),await s(i,c.detune,f.detune),await s(i,c.frequency,f.frequency),await s(i,c.gain,f.gain)):(await t(i,c.Q,f.Q),await t(i,c.detune,f.detune),await t(i,c.frequency,f.frequency),await t(i,c.gain,f.gain)),await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createCacheTestResult=(s,r)=>(n,t)=>{const a=r.get(n);if(a!==void 0)return a;const l=s.get(n);if(l!==void 0)return l;try{const o=t();return o instanceof Promise?(s.set(n,o),o.catch(()=>!1).then(c=>(s.delete(n),r.set(n,c),c))):(r.set(n,o),o)}catch{return r.set(n,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(s,r,n,t,a)=>class extends s{constructor(o,c){const i=t(o),f={...DEFAULT_OPTIONS$e,...c},y=n(i,f),_=a(i)?r():null;super(o,!1,y,_)}},createChannelMergerNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=s(o,f)}return t.set(o,c),await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=t(c),y=l({...DEFAULT_OPTIONS$d,...i}),_=n(f,y),u=a(f)?r():null;super(c,!1,_,u)}},createChannelSplitterNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=s(o,f)}return t.set(o,c),await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},createConnectAudioParam=s=>(r,n,t)=>s(n,r,t),createConnectMultipleOutputs=s=>(r,n,t=0,a=0)=>{const l=r[t];if(l===void 0)throw s();return isNativeAudioNode$1(n)?l.connect(n,0,a):l.connect(n,0)},createConnectedNativeAudioBufferSourceNodeFactory=s=>(r,n)=>{const t=s(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=r.createBuffer(1,2,44100);return t.buffer=a,t.loop=!0,t.connect(n),t.start(),()=>{t.stop(),t.disconnect(n)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const y=a(i),_={...DEFAULT_OPTIONS$c,...f},u=t(y,_),m=l(y),p=m?n():null;super(i,!1,u,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=u,this._offset=r(this,m,u.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(i){const f=typeof i=="function"?o(this,i):null;this._nativeConstantSourceNode.onended=f;const y=this._nativeConstantSourceNode.onended;this._onended=y!==null&&y===f?i:y}start(i=0){if(this._nativeConstantSourceNode.start(i),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=i),this.context.state!=="closed"){setInternalStateToActive(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(i=0){this._nativeConstantSourceNode.stop(i),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=i)}},createConstantSourceNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap;let o=null,c=null;const i=async(f,y)=>{let _=n(f);const u=isOwnedByContext(_,y);if(!u){const m={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=r(y,m),o!==null&&_.start(o),c!==null&&_.stop(c)}return l.set(y,_),u?await s(y,f.offset,_.offset):await t(y,f.offset,_.offset),await a(f,y,_),_};return{set start(f){o=f},set stop(f){c=f},render(f,y){const _=l.get(y);return _!==void 0?Promise.resolve(_):i(f,y)}}},createConvertNumberToUnsignedLong=s=>r=>(s[0]=r,s[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=t(c),y={...DEFAULT_OPTIONS$b,...i},_=n(f,y),m=a(f)?r():null;super(c,!1,_,m),this._isBufferNullified=!1,this._nativeConvolverNode=_,y.buffer!==null&&l(this,y.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const i=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=i.createBuffer(1,1,i.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},createConvolverNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=s(o,f)}return t.set(o,c),isNativeAudioNodeFaker(c)?await n(l,o,c.inputs[0]):await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},createCreateNativeOfflineAudioContext=(s,r)=>(n,t,a)=>{if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new r(n,t,a)}catch(l){throw l.name==="SyntaxError"?s():l}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=s=>{const{port1:r,port2:n}=new MessageChannel;return new Promise(t=>{const a=()=>{n.onmessage=null,r.close(),n.close(),t()};n.onmessage=()=>a();try{r.postMessage(s,[s])}catch{}finally{a()}})},createDecodeAudioData=(s,r,n,t,a,l,o,c,i,f,y)=>(_,u)=>{const m=o(_)?_:l(_);if(a.has(u)){const p=n();return Promise.reject(p)}try{a.add(u)}catch{}return r(i,()=>i(m))?m.decodeAudioData(u).then(p=>(detachArrayBuffer(u).catch(()=>{}),r(c,()=>c(p))||y(p),s.add(p),p)):new Promise((p,g)=>{const x=async()=>{try{await detachArrayBuffer(u)}catch{}},b=E=>{g(E),x()};try{m.decodeAudioData(u,E=>{typeof E.copyFromChannel!="function"&&(f(E),wrapAudioBufferGetChannelDataMethod(E)),s.add(E),x().then(()=>p(E))},E=>{b(E===null?t():E)})}catch(E){b(E)}})},createDecrementCycleCounter=(s,r,n,t,a,l,o,c)=>(i,f)=>{const y=r.get(i);if(y===void 0)throw new Error("Missing the expected cycle count.");const _=l(i.context),u=c(_);if(y===f){if(r.delete(i),!u&&o(i)){const m=t(i),{outputs:p}=n(i);for(const g of p)if(isAudioNodeOutputConnection(g)){const x=t(g[0]);s(m,x,g[1],g[2])}else{const x=a(g[0]);m.connect(x,g[1])}}}else r.set(i,y-f)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const y=a(i),_={...DEFAULT_OPTIONS$a,...f},u=t(y,_),m=l(y),p=m?n(_.maxDelayTime):null;super(i,!1,u,p),this._delayTime=r(this,m,u.delayTime),o(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(s,r,n,t,a)=>l=>{const o=new WeakMap,c=async(i,f)=>{let y=n(i);const _=isOwnedByContext(y,f);if(!_){const u={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:l};y=r(f,u)}return o.set(f,y),_?await s(f,i.delayTime,y.delayTime):await t(f,i.delayTime,y.delayTime),await a(i,f,y),y};return{render(i,f){const y=o.get(f);return y!==void 0?Promise.resolve(y):c(i,f)}}},createDeleteActiveInputConnectionToAudioNode=s=>(r,n,t,a)=>s(r[a],l=>l[0]===n&&l[1]===t),createDeleteUnrenderedAudioWorkletNode=s=>(r,n)=>{s(r).delete(n)},isDelayNode=s=>"delayTime"in s,createDetectCycles=(s,r,n)=>function t(a,l){const o=isAudioNode$1(l)?l:n(s,l);if(isDelayNode(o))return[];if(a[0]===o)return[a];if(a.includes(o))return[];const{outputs:c}=r(o);return Array.from(c).map(i=>t([...a,o],i[0])).reduce((i,f)=>i.concat(f),[])},getOutputAudioNodeAtIndex=(s,r,n)=>{const t=r[n];if(t===void 0)throw s();return t},createDisconnectMultipleOutputs=s=>(r,n=void 0,t=void 0,a=0)=>n===void 0?r.forEach(l=>l.disconnect()):typeof n=="number"?getOutputAudioNodeAtIndex(s,r,n).disconnect():isNativeAudioNode$1(n)?t===void 0?r.forEach(l=>l.disconnect(n)):a===void 0?getOutputAudioNodeAtIndex(s,r,t).disconnect(n,0):getOutputAudioNodeAtIndex(s,r,t).disconnect(n,0,a):t===void 0?r.forEach(l=>l.disconnect(n)):getOutputAudioNodeAtIndex(s,r,t).disconnect(n,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,y){const _=l(f),u={...DEFAULT_OPTIONS$9,...y},m=t(_,u),p=o(_),g=p?n():null;super(f,!1,m,g),this._attack=r(this,p,m.attack),this._knee=r(this,p,m.knee),this._nativeDynamicsCompressorNode=m,this._ratio=r(this,p,m.ratio),this._release=r(this,p,m.release),this._threshold=r(this,p,m.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=y,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=y,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const y=isOwnedByContext(f,i);if(!y){const _={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=r(i,_)}return l.set(i,f),y?(await s(i,c.attack,f.attack),await s(i,c.knee,f.knee),await s(i,c.ratio,f.ratio),await s(i,c.release,f.release),await s(i,c.threshold,f.threshold)):(await t(i,c.attack,f.attack),await t(i,c.knee,f.knee),await t(i,c.ratio,f.ratio),await t(i,c.release,f.release),await t(i,c.threshold,f.threshold)),await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=s=>r=>new Promise((n,t)=>{if(s===null){t(new SyntaxError);return}const a=s.document.head;if(a===null)t(new SyntaxError);else{const l=s.document.createElement("script"),o=new Blob([r],{type:"application/javascript"}),c=URL.createObjectURL(o),i=s.onerror,f=()=>{s.onerror=i,URL.revokeObjectURL(c)};s.onerror=(y,_,u,m,p)=>{if(_===c||_===s.location.href&&u===1&&m===1)return f(),t(p),!1;if(i!==null)return i(y,_,u,m,p)},l.onerror=()=>{f(),t(new SyntaxError)},l.onload=()=>{f(),n()},l.src=c,l.type="module",a.appendChild(l)}}),createEventTargetConstructor=s=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,t,a){if(t!==null){let l=this._listeners.get(t);l===void 0&&(l=s(this,t),typeof t=="function"&&this._listeners.set(t,l)),this._nativeEventTarget.addEventListener(n,l,a)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,t,a){const l=t===null?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(n,l===void 0?null:l,a)}},createExposeCurrentFrameAndCurrentTime=s=>(r,n,t)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(r*n)}},currentTime:{configurable:!0,get(){return r}}});try{return t()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},createFetchSource=s=>async r=>{try{const n=await fetch(r);if(n.ok)return[await n.text(),n.url]}catch{}throw s()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=a(c),y={...DEFAULT_OPTIONS$8,...i},_=t(f,y),u=l(f),m=u?n():null;super(c,!1,_,m),this._gain=r(this,u,_.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const y=isOwnedByContext(f,i);if(!y){const _={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=r(i,_)}return l.set(i,f),y?await s(i,c.gain,f.gain):await t(i,c.gain,f.gain),await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createGetActiveAudioWorkletNodeInputs=(s,r)=>n=>r(s,n),createGetAudioNodeRenderer=s=>r=>{const n=s(r);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},createGetAudioNodeTailTime=s=>r=>{var n;return(n=s.get(r))!==null&&n!==void 0?n:0},createGetAudioParamRenderer=s=>r=>{const n=s(r);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},createGetBackupOfflineAudioContext=s=>r=>s.get(r),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=s=>r=>{const n=s.get(r);if(n===void 0)throw createInvalidStateError();return n},createGetOrCreateBackupOfflineAudioContext=(s,r)=>n=>{let t=s.get(n);if(t!==void 0)return t;if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");return t=new r(1,1,44100),s.set(n,t),t},createGetUnrenderedAudioWorkletNodes=s=>r=>{const n=s.get(r);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=s=>{s.getFrequencyResponse=(r=>(n,t,a)=>{if(n.length!==t.length||t.length!==a.length)throw createInvalidAccessError();return r.call(s,n,t,a)})(s.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=t(c),y=a(f),_={...DEFAULT_OPTIONS$7,...i},u=r(f,y?null:c.baseLatency,_),m=y?n(_.feedback,_.feedforward):null;super(c,!1,u,m),wrapIIRFilterNodeGetFrequencyResponseMethod(u),this._nativeIIRFilterNode=u,l(this,1)}getFrequencyResponse(c,i,f){return this._nativeIIRFilterNode.getFrequencyResponse(c,i,f)}},filterBuffer=(s,r,n,t,a,l,o,c,i,f,y)=>{const _=f.length;let u=c;for(let m=0;m<_;m+=1){let p=n[0]*f[m];for(let g=1;g<a;g+=1){const x=u-g&i-1;p+=n[g]*l[x],p-=s[g]*o[x]}for(let g=a;g<t;g+=1)p+=n[g]*l[u-g&i-1];for(let g=a;g<r;g+=1)p-=s[g]*o[u-g&i-1];l[u]=f[m],o[u]=p,u=u+1&i-1,y[m]=p}return u},filterFullBuffer=(s,r,n,t)=>{const a=n instanceof Float64Array?n:new Float64Array(n),l=t instanceof Float64Array?t:new Float64Array(t),o=a.length,c=l.length,i=Math.min(o,c);if(a[0]!==1){for(let p=0;p<o;p+=1)l[p]/=a[0];for(let p=1;p<c;p+=1)a[p]/=a[0]}const f=32,y=new Float32Array(f),_=new Float32Array(f),u=r.createBuffer(s.numberOfChannels,s.length,s.sampleRate),m=s.numberOfChannels;for(let p=0;p<m;p+=1){const g=s.getChannelData(p),x=u.getChannelData(p);y.fill(0),_.fill(0),filterBuffer(a,o,l,c,i,y,_,0,f,g,x)}return u},createIIRFilterNodeRendererFactory=(s,r,n,t,a)=>(l,o)=>{const c=new WeakMap;let i=null;const f=async(y,_)=>{let u=null,m=r(y);const p=isOwnedByContext(m,_);if(_.createIIRFilter===void 0?u=s(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(m=_.createIIRFilter(o,l)),c.set(_,u===null?m:u),u!==null){if(i===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new n(y.context.destination.channelCount,y.context.length,_.sampleRate);i=(async()=>{await t(y,x,x.destination);const b=await a(x);return filterFullBuffer(b,_,l,o)})()}const g=await i;return u.buffer=g,u.start(0),u}return await t(y,_,m),m};return{render(y,_){const u=c.get(_);return u!==void 0?Promise.resolve(u):f(y,_)}}},createIncrementCycleCounterFactory=(s,r,n,t,a,l)=>o=>(c,i)=>{const f=s.get(c);if(f===void 0){if(!o&&l(c)){const y=t(c),{outputs:_}=n(c);for(const u of _)if(isAudioNodeOutputConnection(u)){const m=t(u[0]);r(y,m,u[1],u[2])}else{const m=a(u[0]);y.disconnect(m,u[1])}}s.set(c,i)}else s.set(c,f+i)},createIsAnyAudioContext=(s,r)=>n=>{const t=s.get(n);return r(t)||r(n)},createIsAnyAudioNode=(s,r)=>n=>s.has(n)||r(n),createIsAnyAudioParam=(s,r)=>n=>s.has(n)||r(n),createIsAnyOfflineAudioContext=(s,r)=>n=>{const t=s.get(n);return r(t)||r(n)},createIsNativeAudioContext=s=>r=>s!==null&&r instanceof s,createIsNativeAudioNode=s=>r=>s!==null&&typeof s.AudioNode=="function"&&r instanceof s.AudioNode,createIsNativeAudioParam=s=>r=>s!==null&&typeof s.AudioParam=="function"&&r instanceof s.AudioParam,createIsNativeContext=(s,r)=>n=>s(n)||r(n),createIsNativeOfflineAudioContext=s=>r=>s!==null&&r instanceof s,createIsSecureContext=s=>s!==null&&s.isSecureContext,createMediaElementAudioSourceNodeConstructor=(s,r,n,t)=>class extends s{constructor(l,o){const c=n(l),i=r(c,o);if(t(c))throw TypeError();super(l,!0,i,null),this._nativeMediaElementAudioSourceNode=i}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(s,r,n,t)=>class extends s{constructor(l,o){const c=n(l);if(t(c))throw new TypeError;const i={...DEFAULT_OPTIONS$6,...o},f=r(c,i);super(l,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(s,r,n,t)=>class extends s{constructor(l,o){const c=n(l),i=r(c,o);if(t(c))throw new TypeError;super(l,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(s,r,n)=>class extends s{constructor(a,l){const o=n(a),c=r(o,l);super(a,!0,c,null)}},createMinimalBaseAudioContextConstructor=(s,r,n,t,a,l)=>class extends n{constructor(c,i){super(c),this._nativeContext=c,CONTEXT_STORE.set(this,c),t(c)&&a.set(c,new Set),this._destination=new s(this,i),this._listener=r(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const i=typeof c=="function"?l(this,c):null;this._nativeContext.onstatechange=i;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===i?c:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=s=>{const r=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=s.decodeAudioData(r.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(s,r)=>(n,t,a)=>{const l=new Set;return n.connect=(o=>(c,i=0,f=0)=>{const y=l.size===0;if(r(c))return o.call(n,c,i,f),s(l,[c,i,f],_=>_[0]===c&&_[1]===i&&_[2]===f,!0),y&&t(),c;o.call(n,c,i),s(l,[c,i],_=>_[0]===c&&_[1]===i,!0),y&&t()})(n.connect),n.disconnect=(o=>(c,i,f)=>{const y=l.size>0;if(c===void 0)o.apply(n),l.clear();else if(typeof c=="number"){o.call(n,c);for(const u of l)u[1]===c&&l.delete(u)}else{r(c)?o.call(n,c,i,f):o.call(n,c,i);for(const u of l)u[0]===c&&(i===void 0||u[1]===i)&&(f===void 0||u[2]===f)&&l.delete(u)}const _=l.size===0;y&&_&&a()})(n.disconnect),n},assignNativeAudioNodeOption=(s,r,n)=>{const t=r[n];t!==void 0&&t!==s[n]&&(s[n]=t)},assignNativeAudioNodeOptions=(s,r)=>{assignNativeAudioNodeOption(s,r,"channelCount"),assignNativeAudioNodeOption(s,r,"channelCountMode"),assignNativeAudioNodeOption(s,r,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=s=>typeof s.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=s=>{s.getFloatTimeDomainData=r=>{const n=new Uint8Array(r.length);s.getByteTimeDomainData(n);const t=Math.max(n.length,s.fftSize);for(let a=0;a<t;a+=1)r[a]=(n[a]-128)*.0078125;return r}},createNativeAnalyserNodeFactory=(s,r)=>(n,t)=>{const a=n.createAnalyser();if(assignNativeAudioNodeOptions(a,t),!(t.maxDecibels>t.minDecibels))throw r();return assignNativeAudioNodeOption(a,t,"fftSize"),assignNativeAudioNodeOption(a,t,"maxDecibels"),assignNativeAudioNodeOption(a,t,"minDecibels"),assignNativeAudioNodeOption(a,t,"smoothingTimeConstant"),s(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(a))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(a),a},createNativeAudioBufferConstructor=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(s,r,n)=>{const t=r[n];t!==void 0&&t!==s[n].value&&(s[n].value=t)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=s=>{s.start=(r=>{let n=!1;return(t=0,a=0,l)=>{if(n)throw createInvalidStateError();r.call(s,t,a,l),n=!0}})(s.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=s=>{s.start=(r=>(n=0,t=0,a)=>{if(typeof a=="number"&&a<0||t<0||n<0)throw new RangeError("The parameters can't be negative.");r.call(s,n,t,a)})(s.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=s=>{s.stop=(r=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");r.call(s,n)})(s.stop)},createNativeAudioBufferSourceNodeFactory=(s,r,n,t,a,l,o,c,i,f,y)=>(_,u)=>{const m=_.createBufferSource();return assignNativeAudioNodeOptions(m,u),assignNativeAudioNodeAudioParamValue(m,u,"playbackRate"),assignNativeAudioNodeOption(m,u,"buffer"),assignNativeAudioNodeOption(m,u,"loop"),assignNativeAudioNodeOption(m,u,"loopEnd"),assignNativeAudioNodeOption(m,u,"loopStart"),r(n,()=>n(_))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(m),r(t,()=>t(_))||i(m),r(a,()=>a(_))||f(m,_),r(l,()=>l(_))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(m),r(o,()=>o(_))||y(m,_),r(c,()=>c(_))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(m),s(_,m),m},createNativeAudioContextConstructor=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(s,r)=>(n,t,a)=>{const l=n.destination;if(l.channelCount!==t)try{l.channelCount=t}catch{}a&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:t});const o=s(n,{channelCount:t,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return r(o,"channelCount",c=>()=>c.call(o),c=>i=>{c.call(o,i);try{l.channelCount=i}catch(f){if(i>l.maxChannelCount)throw f}}),r(o,"channelCountMode",c=>()=>c.call(o),c=>i=>{c.call(o,i),l.channelCountMode=i}),r(o,"channelInterpretation",c=>()=>c.call(o),c=>i=>{c.call(o,i),l.channelInterpretation=i}),Object.defineProperty(o,"maxChannelCount",{get:()=>l.maxChannelCount}),o.connect(l),o},createNativeAudioWorkletNodeConstructor=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=s=>{const{port1:r}=new MessageChannel;try{r.postMessage(s)}finally{r.close()}},createNativeAudioWorkletNodeFactory=(s,r,n,t,a)=>(l,o,c,i,f,y)=>{if(c!==null)try{const _=new c(l,i,y),u=new Map;let m=null;if(Object.defineProperties(_,{channelCount:{get:()=>y.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>m,set:p=>{typeof m=="function"&&_.removeEventListener("processorerror",m),m=typeof p=="function"?p:null,typeof m=="function"&&_.addEventListener("processorerror",m)}}}),_.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const x=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(x!==null){const b=u.get(g[1]);b!==void 0?g[1]=b:(g[1]=E=>{E.type==="error"?(Object.defineProperties(E,{type:{value:"processorerror"}}),x(E)):x(new ErrorEvent(g[0],{...E}))},u.set(x,g[1]))}}return p.call(_,"error",g[1],g[2]),p.call(_,...g)})(_.addEventListener),_.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const x=u.get(g[1]);x!==void 0&&(u.delete(g[1]),g[1]=x)}return p.call(_,"error",g[1],g[2]),p.call(_,g[0],g[1],g[2])})(_.removeEventListener),y.numberOfOutputs!==0){const p=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(p).connect(l.destination),a(_,()=>p.disconnect(),()=>p.connect(l.destination))}return _}catch(_){throw _.code===11?t():_}if(f===void 0)throw t();return testClonabilityOfAudioWorkletNodeOptions(y),r(l,o,f,y)},computeBufferSize=(s,r)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*r))))),cloneAudioWorkletNodeOptions=s=>new Promise((r,n)=>{const{port1:t,port2:a}=new MessageChannel;t.onmessage=({data:l})=>{t.close(),a.close(),r(l)},t.onmessageerror=({data:l})=>{t.close(),a.close(),n(l)},a.postMessage(s)}),createAudioWorkletProcessorPromise=async(s,r)=>{const n=await cloneAudioWorkletNodeOptions(r);return new s(n)},createAudioWorkletProcessor=(s,r,n,t)=>{let a=NODE_TO_PROCESSOR_MAPS.get(s);a===void 0&&(a=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(s,a));const l=createAudioWorkletProcessorPromise(n,t);return a.set(r,l),l},createNativeAudioWorkletNodeFakerFactory=(s,r,n,t,a,l,o,c,i,f,y,_,u)=>(m,p,g,x)=>{if(x.numberOfInputs===0&&x.numberOfOutputs===0)throw i();const b=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(b.some(pe=>pe<1))throw i();if(b.length!==x.numberOfOutputs)throw r();if(x.channelCountMode!=="explicit")throw i();const E=x.channelCount*x.numberOfInputs,S=b.reduce((pe,ke)=>pe+ke,0),k=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(E+k>6||S>6)throw i();const T=new MessageChannel,j=[],A=[];for(let pe=0;pe<x.numberOfInputs;pe+=1)j.push(o(m,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),A.push(a(m,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const C=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:pe,maxValue:ke,minValue:Ie,name:$}of g.parameterDescriptors){const te=l(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:x.parameterData[$]!==void 0?x.parameterData[$]:pe===void 0?0:pe});Object.defineProperties(te.offset,{defaultValue:{get:()=>pe===void 0?0:pe},maxValue:{get:()=>ke===void 0?MOST_POSITIVE_SINGLE_FLOAT:ke},minValue:{get:()=>Ie===void 0?MOST_NEGATIVE_SINGLE_FLOAT:Ie}}),C.push(te)}const N=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,E+k)}),V=computeBufferSize(p,m.sampleRate),I=c(m,V,E+k,Math.max(1,S)),G=a(m,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),R=[];for(let pe=0;pe<x.numberOfOutputs;pe+=1)R.push(t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b[pe]}));for(let pe=0;pe<x.numberOfInputs;pe+=1){j[pe].connect(A[pe]);for(let ke=0;ke<x.channelCount;ke+=1)A[pe].connect(N,ke,pe*x.channelCount+ke)}const q=new ReadOnlyMap(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:pe},ke)=>{const Ie=C[ke];return Ie.connect(N,0,E+ke),Ie.start(0),[pe,Ie.offset]}));N.connect(I);let M=x.channelInterpretation,L=null;const H=x.numberOfOutputs===0?[I]:R,O={get bufferSize(){return V},get channelCount(){return x.channelCount},set channelCount(pe){throw n()},get channelCountMode(){return x.channelCountMode},set channelCountMode(pe){throw n()},get channelInterpretation(){return M},set channelInterpretation(pe){for(const ke of j)ke.channelInterpretation=pe;M=pe},get context(){return I.context},get inputs(){return j},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get onprocessorerror(){return L},set onprocessorerror(pe){typeof L=="function"&&O.removeEventListener("processorerror",L),L=typeof pe=="function"?pe:null,typeof L=="function"&&O.addEventListener("processorerror",L)},get parameters(){return q},get port(){return T.port2},addEventListener(...pe){return I.addEventListener(pe[0],pe[1],pe[2])},connect:s.bind(null,H),disconnect:f.bind(null,H),dispatchEvent(...pe){return I.dispatchEvent(pe[0])},removeEventListener(...pe){return I.removeEventListener(pe[0],pe[1],pe[2])}},U=new Map;T.port1.addEventListener=(pe=>(...ke)=>{if(ke[0]==="message"){const Ie=typeof ke[1]=="function"?ke[1]:typeof ke[1]=="object"&&ke[1]!==null&&typeof ke[1].handleEvent=="function"?ke[1].handleEvent:null;if(Ie!==null){const $=U.get(ke[1]);$!==void 0?ke[1]=$:(ke[1]=te=>{y(m.currentTime,m.sampleRate,()=>Ie(te))},U.set(Ie,ke[1]))}}return pe.call(T.port1,ke[0],ke[1],ke[2])})(T.port1.addEventListener),T.port1.removeEventListener=(pe=>(...ke)=>{if(ke[0]==="message"){const Ie=U.get(ke[1]);Ie!==void 0&&(U.delete(ke[1]),ke[1]=Ie)}return pe.call(T.port1,ke[0],ke[1],ke[2])})(T.port1.removeEventListener);let J=null;Object.defineProperty(T.port1,"onmessage",{get:()=>J,set:pe=>{typeof J=="function"&&T.port1.removeEventListener("message",J),J=typeof pe=="function"?pe:null,typeof J=="function"&&(T.port1.addEventListener("message",J),T.port1.start())}}),g.prototype.port=T.port1;let Z=null;createAudioWorkletProcessor(m,O,g,x).then(pe=>Z=pe);const B=createNestedArrays(x.numberOfInputs,x.channelCount),D=createNestedArrays(x.numberOfOutputs,b),X=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((pe,{name:ke})=>({...pe,[ke]:new Float32Array(128)}),{});let K=!0;const re=()=>{x.numberOfOutputs>0&&I.disconnect(G);for(let pe=0,ke=0;pe<x.numberOfOutputs;pe+=1){const Ie=R[pe];for(let $=0;$<b[pe];$+=1)G.disconnect(Ie,ke+$,$);ke+=b[pe]}},se=new Map;I.onaudioprocess=({inputBuffer:pe,outputBuffer:ke})=>{if(Z!==null){const Ie=_(O);for(let $=0;$<V;$+=128){for(let te=0;te<x.numberOfInputs;te+=1)for(let ne=0;ne<x.channelCount;ne+=1)copyFromChannel(pe,B[te],ne,ne,$);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:te},ne)=>{copyFromChannel(pe,X,te,E+ne,$)});for(let te=0;te<x.numberOfInputs;te+=1)for(let ne=0;ne<b[te];ne+=1)D[te][ne].byteLength===0&&(D[te][ne]=new Float32Array(128));try{const te=B.map((be,ve)=>{if(Ie[ve].size>0)return se.set(ve,V/128),be;const Re=se.get(ve);return Re===void 0?[]:(be.every(Ge=>Ge.every(Xe=>Xe===0))&&(Re===1?se.delete(ve):se.set(ve,Re-1)),be)});K=y(m.currentTime+$/m.sampleRate,m.sampleRate,()=>Z.process(te,D,X));for(let be=0,ve=0;be<x.numberOfOutputs;be+=1){for(let je=0;je<b[be];je+=1)copyToChannel(ke,D[be],je,ve+je,$);ve+=b[be]}}catch(te){K=!1,O.dispatchEvent(new ErrorEvent("processorerror",{colno:te.colno,filename:te.filename,lineno:te.lineno,message:te.message}))}if(!K){for(let te=0;te<x.numberOfInputs;te+=1){j[te].disconnect(A[te]);for(let ne=0;ne<x.channelCount;ne+=1)A[$].disconnect(N,ne,te*x.channelCount+ne)}if(g.parameterDescriptors!==void 0){const te=g.parameterDescriptors.length;for(let ne=0;ne<te;ne+=1){const be=C[ne];be.disconnect(N,0,E+ne),be.stop()}}N.disconnect(I),I.onaudioprocess=null,fe?re():_e();break}}}};let fe=!1;const xe=o(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),he=()=>I.connect(xe).connect(m.destination),_e=()=>{I.disconnect(xe),xe.disconnect()},ye=()=>{if(K){_e(),x.numberOfOutputs>0&&I.connect(G);for(let pe=0,ke=0;pe<x.numberOfOutputs;pe+=1){const Ie=R[pe];for(let $=0;$<b[pe];$+=1)G.connect(Ie,ke+$,$);ke+=b[pe]}}fe=!0},ue=()=>{K&&(he(),re()),fe=!1};return he(),u(O,ye,ue)},createNativeBiquadFilterNode=(s,r)=>{const n=s.createBiquadFilter();return assignNativeAudioNodeOptions(n,r),assignNativeAudioNodeAudioParamValue(n,r,"Q"),assignNativeAudioNodeAudioParamValue(n,r,"detune"),assignNativeAudioNodeAudioParamValue(n,r,"frequency"),assignNativeAudioNodeAudioParamValue(n,r,"gain"),assignNativeAudioNodeOption(n,r,"type"),n},createNativeChannelMergerNodeFactory=(s,r)=>(n,t)=>{const a=n.createChannelMerger(t.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&r(n,a),assignNativeAudioNodeOptions(a,t),a},wrapChannelSplitterNode=s=>{const r=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>r,set:n=>{if(n!==r)throw createInvalidStateError()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(s,r)=>{const n=s.createChannelSplitter(r.numberOfOutputs);return assignNativeAudioNodeOptions(n,r),wrapChannelSplitterNode(n),n},createNativeConstantSourceNodeFactory=(s,r,n,t,a)=>(l,o)=>{if(l.createConstantSource===void 0)return n(l,o);const c=l.createConstantSource();return assignNativeAudioNodeOptions(c,o),assignNativeAudioNodeAudioParamValue(c,o,"offset"),r(t,()=>t(l))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(c),r(a,()=>a(l))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(c),s(l,c),c},interceptConnections=(s,r)=>(s.connect=r.connect.bind(r),s.disconnect=r.disconnect.bind(r),s),createNativeConstantSourceNodeFakerFactory=(s,r,n,t)=>(a,{offset:l,...o})=>{const c=a.createBuffer(1,2,44100),i=r(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=n(a,{...o,gain:l}),y=c.getChannelData(0);y[0]=1,y[1]=1,i.buffer=c,i.loop=!0;const _={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(p){f.channelCount=p},get channelCountMode(){return f.channelCountMode},set channelCountMode(p){f.channelCountMode=p},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(p){f.channelInterpretation=p},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return i.onended},set onended(p){i.onended=p},addEventListener(...p){return i.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return i.dispatchEvent(p[0])},removeEventListener(...p){return i.removeEventListener(p[0],p[1],p[2])},start(p=0){i.start.call(i,p)},stop(p=0){i.stop.call(i,p)}},u=()=>i.connect(f),m=()=>i.disconnect(f);return s(a,i),t(interceptConnections(_,f),u,m)},createNativeConvolverNodeFactory=(s,r)=>(n,t)=>{const a=n.createConvolver();if(assignNativeAudioNodeOptions(a,t),t.disableNormalization===a.normalize&&(a.normalize=!t.disableNormalization),assignNativeAudioNodeOption(a,t,"buffer"),t.channelCount>2||(r(a,"channelCount",l=>()=>l.call(a),l=>o=>{if(o>2)throw s();return l.call(a,o)}),t.channelCountMode==="max"))throw s();return r(a,"channelCountMode",l=>()=>l.call(a),l=>o=>{if(o==="max")throw s();return l.call(a,o)}),a},createNativeDelayNode=(s,r)=>{const n=s.createDelay(r.maxDelayTime);return assignNativeAudioNodeOptions(n,r),assignNativeAudioNodeAudioParamValue(n,r,"delayTime"),n},createNativeDynamicsCompressorNodeFactory=s=>(r,n)=>{const t=r.createDynamicsCompressor();if(assignNativeAudioNodeOptions(t,n),n.channelCount>2||n.channelCountMode==="max")throw s();return assignNativeAudioNodeAudioParamValue(t,n,"attack"),assignNativeAudioNodeAudioParamValue(t,n,"knee"),assignNativeAudioNodeAudioParamValue(t,n,"ratio"),assignNativeAudioNodeAudioParamValue(t,n,"release"),assignNativeAudioNodeAudioParamValue(t,n,"threshold"),t},createNativeGainNode=(s,r)=>{const n=s.createGain();return assignNativeAudioNodeOptions(n,r),assignNativeAudioNodeAudioParamValue(n,r,"gain"),n},createNativeIIRFilterNodeFactory=s=>(r,n,t)=>{if(r.createIIRFilter===void 0)return s(r,n,t);const a=r.createIIRFilter(t.feedforward,t.feedback);return assignNativeAudioNodeOptions(a,t),a};function divide(s,r){const n=r[0]*r[0]+r[1]*r[1];return[(s[0]*r[0]+s[1]*r[1])/n,(s[1]*r[0]-s[0]*r[1])/n]}function multiply(s,r){return[s[0]*r[0]-s[1]*r[1],s[0]*r[1]+s[1]*r[0]]}function evaluatePolynomial(s,r){let n=[0,0];for(let t=s.length-1;t>=0;t-=1)n=multiply(n,r),n[0]+=s[t];return n}const createNativeIIRFilterNodeFakerFactory=(s,r,n,t)=>(a,l,{channelCount:o,channelCountMode:c,channelInterpretation:i,feedback:f,feedforward:y})=>{const _=computeBufferSize(l,a.sampleRate),u=f instanceof Float64Array?f:new Float64Array(f),m=y instanceof Float64Array?y:new Float64Array(y),p=u.length,g=m.length,x=Math.min(p,g);if(p===0||p>20)throw t();if(u[0]===0)throw r();if(g===0||g>20)throw t();if(m[0]===0)throw r();if(u[0]!==1){for(let C=0;C<g;C+=1)m[C]/=u[0];for(let C=1;C<p;C+=1)u[C]/=u[0]}const b=n(a,_,o,o);b.channelCount=o,b.channelCountMode=c,b.channelInterpretation=i;const E=32,S=[],k=[],T=[];for(let C=0;C<o;C+=1){S.push(0);const N=new Float32Array(E),V=new Float32Array(E);N.fill(0),V.fill(0),k.push(N),T.push(V)}b.onaudioprocess=C=>{const N=C.inputBuffer,V=C.outputBuffer,I=N.numberOfChannels;for(let G=0;G<I;G+=1){const R=N.getChannelData(G),q=V.getChannelData(G);S[G]=filterBuffer(u,p,m,g,x,k[G],T[G],S[G],E,R,q)}};const j=a.sampleRate/2;return interceptConnections({get bufferSize(){return _},get channelCount(){return b.channelCount},set channelCount(C){b.channelCount=C},get channelCountMode(){return b.channelCountMode},set channelCountMode(C){b.channelCountMode=C},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(C){b.channelInterpretation=C},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},addEventListener(...C){return b.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return b.dispatchEvent(C[0])},getFrequencyResponse(C,N,V){if(C.length!==N.length||N.length!==V.length)throw s();const I=C.length;for(let G=0;G<I;G+=1){const R=-Math.PI*(C[G]/j),q=[Math.cos(R),Math.sin(R)],M=evaluatePolynomial(m,q),L=evaluatePolynomial(u,q),H=divide(M,L);N[G]=Math.sqrt(H[0]*H[0]+H[1]*H[1]),V[G]=Math.atan2(H[1],H[0])}},removeEventListener(...C){return b.removeEventListener(C[0],C[1],C[2])}},b)},createNativeMediaElementAudioSourceNode=(s,r)=>s.createMediaElementSource(r.mediaElement),createNativeMediaStreamAudioDestinationNode=(s,r)=>{const n=s.createMediaStreamDestination();return assignNativeAudioNodeOptions(n,r),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},createNativeMediaStreamAudioSourceNode=(s,{mediaStream:r})=>{const n=r.getAudioTracks();n.sort((l,o)=>l.id<o.id?-1:l.id>o.id?1:0);const t=n.slice(0,1),a=s.createMediaStreamSource(new MediaStream(t));return Object.defineProperty(a,"mediaStream",{value:r}),a},createNativeMediaStreamTrackAudioSourceNodeFactory=(s,r)=>(n,{mediaStreamTrack:t})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(t);const a=new MediaStream([t]),l=n.createMediaStreamSource(a);if(t.kind!=="audio")throw s();if(r(n))throw new TypeError;return l},createNativeOfflineAudioContextConstructor=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(s,r,n,t,a,l)=>(o,c)=>{const i=o.createOscillator();return assignNativeAudioNodeOptions(i,c),assignNativeAudioNodeAudioParamValue(i,c,"detune"),assignNativeAudioNodeAudioParamValue(i,c,"frequency"),c.periodicWave!==void 0?i.setPeriodicWave(c.periodicWave):assignNativeAudioNodeOption(i,c,"type"),r(n,()=>n(o))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(i),r(t,()=>t(o))||l(i,o),r(a,()=>a(o))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(i),s(o,i),i},createNativePannerNodeFactory=s=>(r,n)=>{const t=r.createPanner();return t.orientationX===void 0?s(r,n):(assignNativeAudioNodeOptions(t,n),assignNativeAudioNodeAudioParamValue(t,n,"orientationX"),assignNativeAudioNodeAudioParamValue(t,n,"orientationY"),assignNativeAudioNodeAudioParamValue(t,n,"orientationZ"),assignNativeAudioNodeAudioParamValue(t,n,"positionX"),assignNativeAudioNodeAudioParamValue(t,n,"positionY"),assignNativeAudioNodeAudioParamValue(t,n,"positionZ"),assignNativeAudioNodeOption(t,n,"coneInnerAngle"),assignNativeAudioNodeOption(t,n,"coneOuterAngle"),assignNativeAudioNodeOption(t,n,"coneOuterGain"),assignNativeAudioNodeOption(t,n,"distanceModel"),assignNativeAudioNodeOption(t,n,"maxDistance"),assignNativeAudioNodeOption(t,n,"panningModel"),assignNativeAudioNodeOption(t,n,"refDistance"),assignNativeAudioNodeOption(t,n,"rolloffFactor"),t)},createNativePannerNodeFakerFactory=(s,r,n,t,a,l,o,c,i,f)=>(y,{coneInnerAngle:_,coneOuterAngle:u,coneOuterGain:m,distanceModel:p,maxDistance:g,orientationX:x,orientationY:b,orientationZ:E,panningModel:S,positionX:k,positionY:T,positionZ:j,refDistance:A,rolloffFactor:C,...N})=>{const V=y.createPanner();if(N.channelCount>2||N.channelCountMode==="max")throw o();assignNativeAudioNodeOptions(V,N);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},G=n(y,{...I,channelInterpretation:"speakers",numberOfInputs:6}),R=t(y,{...N,gain:1}),q=t(y,{...I,gain:1}),M=t(y,{...I,gain:0}),L=t(y,{...I,gain:0}),H=t(y,{...I,gain:0}),O=t(y,{...I,gain:0}),U=t(y,{...I,gain:0}),J=a(y,256,6,1),Z=l(y,{...I,curve:new Float32Array([1,1]),oversample:"none"});let z=[x,b,E],B=[k,T,j];const D=new Float32Array(1);J.onaudioprocess=({inputBuffer:se})=>{const fe=[i(se,D,0),i(se,D,1),i(se,D,2)];fe.some((he,_e)=>he!==z[_e])&&(V.setOrientation(...fe),z=fe);const xe=[i(se,D,3),i(se,D,4),i(se,D,5)];xe.some((he,_e)=>he!==B[_e])&&(V.setPosition(...xe),B=xe)},Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0});const X={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(se){if(se>2)throw o();R.channelCount=se,V.channelCount=se},get channelCountMode(){return V.channelCountMode},set channelCountMode(se){if(se==="max")throw o();R.channelCountMode=se,V.channelCountMode=se},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(se){R.channelInterpretation=se,V.channelInterpretation=se},get coneInnerAngle(){return V.coneInnerAngle},set coneInnerAngle(se){V.coneInnerAngle=se},get coneOuterAngle(){return V.coneOuterAngle},set coneOuterAngle(se){V.coneOuterAngle=se},get coneOuterGain(){return V.coneOuterGain},set coneOuterGain(se){if(se<0||se>1)throw r();V.coneOuterGain=se},get context(){return V.context},get distanceModel(){return V.distanceModel},set distanceModel(se){V.distanceModel=se},get inputs(){return[R]},get maxDistance(){return V.maxDistance},set maxDistance(se){if(se<0)throw new RangeError;V.maxDistance=se},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get orientationX(){return q.gain},get orientationY(){return M.gain},get orientationZ(){return L.gain},get panningModel(){return V.panningModel},set panningModel(se){V.panningModel=se},get positionX(){return H.gain},get positionY(){return O.gain},get positionZ(){return U.gain},get refDistance(){return V.refDistance},set refDistance(se){if(se<0)throw new RangeError;V.refDistance=se},get rolloffFactor(){return V.rolloffFactor},set rolloffFactor(se){if(se<0)throw new RangeError;V.rolloffFactor=se},addEventListener(...se){return R.addEventListener(se[0],se[1],se[2])},dispatchEvent(...se){return R.dispatchEvent(se[0])},removeEventListener(...se){return R.removeEventListener(se[0],se[1],se[2])}};_!==X.coneInnerAngle&&(X.coneInnerAngle=_),u!==X.coneOuterAngle&&(X.coneOuterAngle=u),m!==X.coneOuterGain&&(X.coneOuterGain=m),p!==X.distanceModel&&(X.distanceModel=p),g!==X.maxDistance&&(X.maxDistance=g),x!==X.orientationX.value&&(X.orientationX.value=x),b!==X.orientationY.value&&(X.orientationY.value=b),E!==X.orientationZ.value&&(X.orientationZ.value=E),S!==X.panningModel&&(X.panningModel=S),k!==X.positionX.value&&(X.positionX.value=k),T!==X.positionY.value&&(X.positionY.value=T),j!==X.positionZ.value&&(X.positionZ.value=j),A!==X.refDistance&&(X.refDistance=A),C!==X.rolloffFactor&&(X.rolloffFactor=C),(z[0]!==1||z[1]!==0||z[2]!==0)&&V.setOrientation(...z),(B[0]!==0||B[1]!==0||B[2]!==0)&&V.setPosition(...B);const K=()=>{R.connect(V),s(R,Z,0,0),Z.connect(q).connect(G,0,0),Z.connect(M).connect(G,0,1),Z.connect(L).connect(G,0,2),Z.connect(H).connect(G,0,3),Z.connect(O).connect(G,0,4),Z.connect(U).connect(G,0,5),G.connect(J).connect(y.destination)},re=()=>{R.disconnect(V),c(R,Z,0,0),Z.disconnect(q),q.disconnect(G),Z.disconnect(M),M.disconnect(G),Z.disconnect(L),L.disconnect(G),Z.disconnect(H),H.disconnect(G),Z.disconnect(O),O.disconnect(G),Z.disconnect(U),U.disconnect(G),G.disconnect(J),J.disconnect(y.destination)};return f(interceptConnections(X,V),K,re)},createNativePeriodicWaveFactory=s=>(r,{disableNormalization:n,imag:t,real:a})=>{const l=t instanceof Float32Array?t:new Float32Array(t),o=a instanceof Float32Array?a:new Float32Array(a),c=r.createPeriodicWave(o,l,{disableNormalization:n});if(Array.from(t).length<2)throw s();return c},createNativeScriptProcessorNode=(s,r,n,t)=>s.createScriptProcessor(r,n,t),createNativeStereoPannerNodeFactory=(s,r)=>(n,t)=>{const a=t.channelCountMode;if(a==="clamped-max")throw r();if(n.createStereoPanner===void 0)return s(n,t);const l=n.createStereoPanner();return assignNativeAudioNodeOptions(l,t),assignNativeAudioNodeAudioParamValue(l,t,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>a,set:o=>{if(o!==a)throw r()}}),l},createNativeStereoPannerNodeFakerFactory=(s,r,n,t,a,l)=>{const c=new Float32Array([1,1]),i=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},y={...f,oversample:"none"},_=(p,g,x,b)=>{const E=new Float32Array(16385),S=new Float32Array(16385);for(let N=0;N<16385;N+=1){const V=N/16384*i;E[N]=Math.cos(V),S[N]=Math.sin(V)}const k=n(p,{...f,gain:0}),T=t(p,{...y,curve:E}),j=t(p,{...y,curve:c}),A=n(p,{...f,gain:0}),C=t(p,{...y,curve:S});return{connectGraph(){g.connect(k),g.connect(j.inputs===void 0?j:j.inputs[0]),g.connect(A),j.connect(x),x.connect(T.inputs===void 0?T:T.inputs[0]),x.connect(C.inputs===void 0?C:C.inputs[0]),T.connect(k.gain),C.connect(A.gain),k.connect(b,0,0),A.connect(b,0,1)},disconnectGraph(){g.disconnect(k),g.disconnect(j.inputs===void 0?j:j.inputs[0]),g.disconnect(A),j.disconnect(x),x.disconnect(T.inputs===void 0?T:T.inputs[0]),x.disconnect(C.inputs===void 0?C:C.inputs[0]),T.disconnect(k.gain),C.disconnect(A.gain),k.disconnect(b,0,0),A.disconnect(b,0,1)}}},u=(p,g,x,b)=>{const E=new Float32Array(16385),S=new Float32Array(16385),k=new Float32Array(16385),T=new Float32Array(16385),j=Math.floor(16385/2);for(let H=0;H<16385;H+=1)if(H>j){const O=(H-j)/(16384-j)*i;E[H]=Math.cos(O),S[H]=Math.sin(O),k[H]=0,T[H]=1}else{const O=H/(16384-j)*i;E[H]=1,S[H]=0,k[H]=Math.cos(O),T[H]=Math.sin(O)}const A=r(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=n(p,{...f,gain:0}),N=t(p,{...y,curve:E}),V=n(p,{...f,gain:0}),I=t(p,{...y,curve:S}),G=t(p,{...y,curve:c}),R=n(p,{...f,gain:0}),q=t(p,{...y,curve:k}),M=n(p,{...f,gain:0}),L=t(p,{...y,curve:T});return{connectGraph(){g.connect(A),g.connect(G.inputs===void 0?G:G.inputs[0]),A.connect(C,0),A.connect(V,0),A.connect(R,1),A.connect(M,1),G.connect(x),x.connect(N.inputs===void 0?N:N.inputs[0]),x.connect(I.inputs===void 0?I:I.inputs[0]),x.connect(q.inputs===void 0?q:q.inputs[0]),x.connect(L.inputs===void 0?L:L.inputs[0]),N.connect(C.gain),I.connect(V.gain),q.connect(R.gain),L.connect(M.gain),C.connect(b,0,0),R.connect(b,0,0),V.connect(b,0,1),M.connect(b,0,1)},disconnectGraph(){g.disconnect(A),g.disconnect(G.inputs===void 0?G:G.inputs[0]),A.disconnect(C,0),A.disconnect(V,0),A.disconnect(R,1),A.disconnect(M,1),G.disconnect(x),x.disconnect(N.inputs===void 0?N:N.inputs[0]),x.disconnect(I.inputs===void 0?I:I.inputs[0]),x.disconnect(q.inputs===void 0?q:q.inputs[0]),x.disconnect(L.inputs===void 0?L:L.inputs[0]),N.disconnect(C.gain),I.disconnect(V.gain),q.disconnect(R.gain),L.disconnect(M.gain),C.disconnect(b,0,0),R.disconnect(b,0,0),V.disconnect(b,0,1),M.disconnect(b,0,1)}}},m=(p,g,x,b,E)=>{if(g===1)return _(p,x,b,E);if(g===2)return u(p,x,b,E);throw a()};return(p,{channelCount:g,channelCountMode:x,pan:b,...E})=>{if(x==="max")throw a();const S=s(p,{...E,channelCount:1,channelCountMode:x,numberOfInputs:2}),k=n(p,{...E,channelCount:g,channelCountMode:x,gain:1}),T=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:b});let{connectGraph:j,disconnectGraph:A}=m(p,g,k,T,S);Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"maxValue",{get:()=>1}),Object.defineProperty(T.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(G){k.channelCount!==G&&(N&&A(),{connectGraph:j,disconnectGraph:A}=m(p,G,k,T,S),N&&j()),k.channelCount=G},get channelCountMode(){return k.channelCountMode},set channelCountMode(G){if(G==="clamped-max"||G==="max")throw a();k.channelCountMode=G},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(G){k.channelInterpretation=G},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get pan(){return T.gain},addEventListener(...G){return k.addEventListener(G[0],G[1],G[2])},dispatchEvent(...G){return k.dispatchEvent(G[0])},removeEventListener(...G){return k.removeEventListener(G[0],G[1],G[2])}};let N=!1;const V=()=>{j(),N=!0},I=()=>{A(),N=!1};return l(interceptConnections(C,S),V,I)}},createNativeWaveShaperNodeFactory=(s,r,n,t,a,l,o)=>(c,i)=>{const f=c.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return n(c,i);assignNativeAudioNodeOptions(f,i);const y=i.curve===null||i.curve instanceof Float32Array?i.curve:new Float32Array(i.curve);if(y!==null&&y.length<2)throw r();assignNativeAudioNodeOption(f,{curve:y},"curve"),assignNativeAudioNodeOption(f,i,"oversample");let _=null,u=!1;return o(f,"curve",g=>()=>g.call(f),g=>x=>(g.call(f,x),u&&(t(x)&&_===null?_=s(c,f):!t(x)&&_!==null&&(_(),_=null)),x)),a(f,()=>{u=!0,t(f.curve)&&(_=s(c,f))},()=>{u=!1,_!==null&&(_(),_=null)})},createNativeWaveShaperNodeFakerFactory=(s,r,n,t,a)=>(l,{curve:o,oversample:c,...i})=>{const f=l.createWaveShaper(),y=l.createWaveShaper();assignNativeAudioNodeOptions(f,i),assignNativeAudioNodeOptions(y,i);const _=n(l,{...i,gain:1}),u=n(l,{...i,gain:-1}),m=n(l,{...i,gain:1}),p=n(l,{...i,gain:-1});let g=null,x=!1,b=null;const E={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(T){_.channelCount=T,u.channelCount=T,f.channelCount=T,m.channelCount=T,y.channelCount=T,p.channelCount=T},get channelCountMode(){return f.channelCountMode},set channelCountMode(T){_.channelCountMode=T,u.channelCountMode=T,f.channelCountMode=T,m.channelCountMode=T,y.channelCountMode=T,p.channelCountMode=T},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(T){_.channelInterpretation=T,u.channelInterpretation=T,f.channelInterpretation=T,m.channelInterpretation=T,y.channelInterpretation=T,p.channelInterpretation=T},get context(){return f.context},get curve(){return b},set curve(T){if(T!==null&&T.length<2)throw r();if(T===null)f.curve=T,y.curve=T;else{const j=T.length,A=new Float32Array(j+2-j%2),C=new Float32Array(j+2-j%2);A[0]=T[0],C[0]=-T[j-1];const N=Math.ceil((j+1)/2),V=(j+1)/2-1;for(let I=1;I<N;I+=1){const G=I/N*V,R=Math.floor(G),q=Math.ceil(G);A[I]=R===q?T[R]:(1-(G-R))*T[R]+(1-(q-G))*T[q],C[I]=R===q?-T[j-1-R]:-((1-(G-R))*T[j-1-R])-(1-(q-G))*T[j-1-q]}A[N]=j%2===1?T[N-1]:(T[N-2]+T[N-1])/2,f.curve=A,y.curve=C}b=T,x&&(t(b)&&g===null?g=s(l,_):g!==null&&(g(),g=null))},get inputs(){return[_]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(T){f.oversample=T,y.oversample=T},addEventListener(...T){return _.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return _.dispatchEvent(T[0])},removeEventListener(...T){return _.removeEventListener(T[0],T[1],T[2])}};o!==null&&(E.curve=o instanceof Float32Array?o:new Float32Array(o)),c!==E.oversample&&(E.oversample=c);const S=()=>{_.connect(f).connect(m),_.connect(u).connect(y).connect(p).connect(m),x=!0,t(b)&&(g=s(l,_))},k=()=>{_.disconnect(f),f.disconnect(m),_.disconnect(u),u.disconnect(y),y.disconnect(p),p.disconnect(m),x=!1,g!==null&&(g(),g=null)};return a(interceptConnections(E,m),S,k)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(s,r,n,t,a)=>class extends s{constructor(o,c,i){let f;if(typeof o=="number"&&c!==void 0&&i!==void 0)f={length:c,numberOfChannels:o,sampleRate:i};else if(typeof o=="object")f=o;else throw new Error("The given parameters are not valid.");const{length:y,numberOfChannels:_,sampleRate:u}={...DEFAULT_OPTIONS$5,...f},m=t(_,y,u);r(testPromiseSupport,()=>testPromiseSupport(m))||m.addEventListener("statechange",(()=>{let p=0;const g=x=>{this._state==="running"&&(p>0?(m.removeEventListener("statechange",g),x.stopImmediatePropagation(),this._waitForThePromiseToSettle(x)):p+=1)};return g})()),super(m,_),this._length=y,this._nativeOfflineAudioContext=m,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const y=a(i),_={...DEFAULT_OPTIONS$4,...f},u=n(y,_),m=l(y),p=m?t():null,g=i.sampleRate/2;super(i,!1,u,p),this._detune=r(this,m,u.detune,153600,-153600),this._frequency=r(this,m,u.frequency,g,-g),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(i){const f=typeof i=="function"?o(this,i):null;this._nativeOscillatorNode.onended=f;const y=this._nativeOscillatorNode.onended;this._onended=y!==null&&y===f?i:y}get type(){return this._nativeOscillatorNode.type}set type(i){this._nativeOscillatorNode.type=i,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(i){this._nativeOscillatorNode.setPeriodicWave(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=i)}start(i=0){if(this._nativeOscillatorNode.start(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=i),this.context.state!=="closed"){setInternalStateToActive(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(i=0){this._nativeOscillatorNode.stop(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=i)}},createOscillatorNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap;let o=null,c=null,i=null;const f=async(y,_)=>{let u=n(y);const m=isOwnedByContext(u,_);if(!m){const p={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,periodicWave:o===null?void 0:o,type:u.type};u=r(_,p),c!==null&&u.start(c),i!==null&&u.stop(i)}return l.set(_,u),m?(await s(_,y.detune,u.detune),await s(_,y.frequency,u.frequency)):(await t(_,y.detune,u.detune),await t(_,y.frequency,u.frequency)),await a(y,_,u),u};return{set periodicWave(y){o=y},set start(y){c=y},set stop(y){i=y},render(y,_){const u=l.get(_);return u!==void 0?Promise.resolve(u):f(y,_)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const y=a(i),_={...DEFAULT_OPTIONS$3,...f},u=n(y,_),m=l(y),p=m?t():null;super(i,!1,u,p),this._nativePannerNode=u,this._orientationX=r(this,m,u.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=r(this,m,u.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=r(this,m,u.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=r(this,m,u.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=r(this,m,u.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=r(this,m,u.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(i){this._nativePannerNode.coneInnerAngle=i}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(i){this._nativePannerNode.coneOuterAngle=i}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(i){this._nativePannerNode.coneOuterGain=i}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(i){this._nativePannerNode.distanceModel=i}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(i){this._nativePannerNode.maxDistance=i}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(i){this._nativePannerNode.panningModel=i}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(i){this._nativePannerNode.refDistance=i}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(i){this._nativePannerNode.rolloffFactor=i}},createPannerNodeRendererFactory=(s,r,n,t,a,l,o,c,i,f)=>()=>{const y=new WeakMap;let _=null;const u=async(m,p)=>{let g=null,x=l(m);const b={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation},E={...b,coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,panningModel:x.panningModel,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor},S=isOwnedByContext(x,p);if("bufferSize"in x)g=t(p,{...b,gain:1});else if(!S){const k={...E,orientationX:x.orientationX.value,orientationY:x.orientationY.value,orientationZ:x.orientationZ.value,positionX:x.positionX.value,positionY:x.positionY.value,positionZ:x.positionZ.value};x=a(p,k)}if(y.set(p,g===null?x:g),g!==null){if(_===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new o(6,m.context.length,p.sampleRate),G=r(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});G.connect(I.destination),_=(async()=>{const R=await Promise.all([m.orientationX,m.orientationY,m.orientationZ,m.positionX,m.positionY,m.positionZ].map(async(q,M)=>{const L=n(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:M===0?1:0});return await c(I,q,L.offset),L}));for(let q=0;q<6;q+=1)R[q].connect(G,0,q),R[q].start(0);return f(I)})()}const k=await _,T=t(p,{...b,gain:1});await i(m,p,T);const j=[];for(let I=0;I<k.numberOfChannels;I+=1)j.push(k.getChannelData(I));let A=[j[0][0],j[1][0],j[2][0]],C=[j[3][0],j[4][0],j[5][0]],N=t(p,{...b,gain:1}),V=a(p,{...E,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:C[0],positionY:C[1],positionZ:C[2]});T.connect(N).connect(V.inputs[0]),V.connect(g);for(let I=128;I<k.length;I+=128){const G=[j[0][I],j[1][I],j[2][I]],R=[j[3][I],j[4][I],j[5][I]];if(G.some((q,M)=>q!==A[M])||R.some((q,M)=>q!==C[M])){A=G,C=R;const q=I/p.sampleRate;N.gain.setValueAtTime(0,q),N=t(p,{...b,gain:0}),V=a(p,{...E,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),N.gain.setValueAtTime(1,q),T.connect(N).connect(V.inputs[0]),V.connect(g)}}return g}return S?(await s(p,m.orientationX,x.orientationX),await s(p,m.orientationY,x.orientationY),await s(p,m.orientationZ,x.orientationZ),await s(p,m.positionX,x.positionX),await s(p,m.positionY,x.positionY),await s(p,m.positionZ,x.positionZ)):(await c(p,m.orientationX,x.orientationX),await c(p,m.orientationY,x.orientationY),await c(p,m.orientationZ,x.orientationZ),await c(p,m.positionX,x.positionX),await c(p,m.positionY,x.positionY),await c(p,m.positionZ,x.positionZ)),isNativeAudioNodeFaker(x)?await i(m,p,x.inputs[0]):await i(m,p,x),x};return{render(m,p){const g=y.get(p);return g!==void 0?Promise.resolve(g):u(m,p)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(s,r,n,t)=>class Bn{constructor(l,o){const c=r(l),i=t({...DEFAULT_OPTIONS$2,...o}),f=s(c,i);return n.add(f),f}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===Bn.prototype||n.has(l)}},createRenderAutomation=(s,r)=>(n,t,a)=>(s(t).replay(a),r(t,n,a)),createRenderInputsOfAudioNode=(s,r,n)=>async(t,a,l)=>{const o=s(t);await Promise.all(o.activeInputs.map((c,i)=>Array.from(c).map(async([f,y])=>{const u=await r(f).render(f,a),m=t.context.destination;!n(f)&&(t!==m||!n(t))&&u.connect(l,y,i)})).reduce((c,i)=>[...c,...i],[]))},createRenderInputsOfAudioParam=(s,r,n)=>async(t,a,l)=>{const o=r(t);await Promise.all(Array.from(o.activeInputs).map(async([c,i])=>{const y=await s(c).render(c,a);n(c)||y.connect(l,i)}))},createRenderNativeOfflineAudioContext=(s,r,n,t)=>a=>s(testPromiseSupport,()=>testPromiseSupport(a))?Promise.resolve(s(t,t)).then(l=>{if(!l){const o=n(a,512,0,1);a.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>a.currentTime,o.connect(a.destination)}return a.startRendering()}):new Promise(l=>{const o=r(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{o.disconnect(),l(c.renderedBuffer)},o.connect(a.destination),a.startRendering()}),createSetActiveAudioWorkletNodeInputs=s=>(r,n)=>{s.set(r,n)},createSetAudioNodeTailTime=s=>(r,n)=>s.set(r,n),createStartRendering=(s,r,n,t,a,l,o,c)=>(i,f)=>n(i).render(i,f).then(()=>Promise.all(Array.from(t(f)).map(y=>n(y).render(y,f)))).then(()=>a(f)).then(y=>(typeof y.copyFromChannel!="function"?(o(y),wrapAudioBufferGetChannelDataMethod(y)):r(l,()=>l(y))||c(y),s.add(y),y)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=a(c),y={...DEFAULT_OPTIONS$1,...i},_=n(f,y),u=l(f),m=u?t():null;super(c,!1,_,m),this._pan=r(this,u,_.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const y=isOwnedByContext(f,i);if(!y){const _={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=r(i,_)}return l.set(i,f),y?await s(i,c.pan,f.pan):await t(i,c.pan,f.pan),isNativeAudioNodeFaker(f)?await a(c,i,f.inputs[0]):await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createTestAudioBufferConstructorSupport=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioWorkletProcessorPostMessageSupport=(s,r)=>async()=>{if(s===null)return!0;if(r===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),t=new r(1,128,44100),a=URL.createObjectURL(n);let l=!1,o=!1;try{await t.audioWorklet.addModule(a);const c=new s(t,"a",{numberOfOutputs:0}),i=t.createOscillator();c.port.onmessage=()=>l=!0,c.onprocessorerror=()=>o=!0,i.connect(c),i.start(0),await t.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(a)}return l&&!o},createTestOfflineAudioContextCurrentTimeSupport=(s,r)=>()=>{if(r===null)return Promise.resolve(!1);const n=new r(1,1,44100),t=s(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{n.oncomplete=()=>{t.disconnect(),a(n.currentTime!==0)},n.startRendering()})},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const y=a(i),_={...DEFAULT_OPTIONS,...f},u=n(y,_),p=l(y)?t():null;super(i,!0,u,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(i){if(i===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(i.length<2)throw r();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=i}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(i){this._nativeWaveShaperNode.oversample=i}},createWaveShaperNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=s(o,f)}return t.set(o,c),isNativeAudioNodeFaker(c)?await n(l,o,c.inputs[0]):await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(s,r)=>n=>{n.copyFromChannel=(t,a,l=0)=>{const o=s(l),c=s(a);if(c>=n.numberOfChannels)throw r();const i=n.length,f=n.getChannelData(c),y=t.length;for(let _=o<0?-o:0;_+o<i&&_<y;_+=1)t[_]=f[_+o]},n.copyToChannel=(t,a,l=0)=>{const o=s(l),c=s(a);if(c>=n.numberOfChannels)throw r();const i=n.length,f=n.getChannelData(c),y=t.length;for(let _=o<0?-o:0;_+o<i&&_<y;_+=1)f[_+o]=t[_]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=s=>r=>{r.copyFromChannel=(n=>(t,a,l=0)=>{const o=s(l),c=s(a);if(o<r.length)return n.call(r,t,c,o)})(r.copyFromChannel),r.copyToChannel=(n=>(t,a,l=0)=>{const o=s(l),c=s(a);if(o<r.length)return n.call(r,t,c,o)})(r.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=s=>(r,n)=>{const t=n.createBuffer(1,1,44100);r.buffer===null&&(r.buffer=t),s(r,"buffer",a=>()=>{const l=a.call(r);return l===t?null:l},a=>l=>a.call(r,l===null?t:l))},createWrapChannelMergerNode=(s,r)=>(n,t)=>{t.channelCount=1,t.channelCountMode="explicit",Object.defineProperty(t,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const a=n.createBufferSource();r(t,()=>{const c=t.numberOfInputs;for(let i=0;i<c;i+=1)a.connect(t,0,i)},()=>a.disconnect(t))},getFirstSample=(s,r,n)=>s.copyFromChannel===void 0?s.getChannelData(n)[0]:(s.copyFromChannel(r,n),r[0]),isDCCurve=s=>{if(s===null)return!1;const r=s.length;return r%2!==0?s[Math.floor(r/2)]!==0:s[r/2-1]+s[r/2]!==0},overwriteAccessors=(s,r,n,t)=>{let a=s;for(;!a.hasOwnProperty(r);)a=Object.getPrototypeOf(a);const{get:l,set:o}=Object.getOwnPropertyDescriptor(a,r);Object.defineProperty(s,r,{get:n(l),set:t(o)})},sanitizeAudioWorkletNodeOptions=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=s=>({...s,channelCount:s.numberOfOutputs}),sanitizePeriodicWaveOptions=s=>{const{imag:r,real:n}=s;return r===void 0?n===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(n,()=>0),real:n}:n===void 0?{...s,imag:r,real:Array.from(r,()=>0)}:{...s,imag:r,real:n}},setValueAtTimeUntilPossible=(s,r,n)=>{try{s.setValueAtTime(r,n)}catch(t){if(t.code!==9)throw t;setValueAtTimeUntilPossible(s,r,n+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=s=>{const r=s.createBufferSource();r.start();try{r.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=s=>{const r=s.createBufferSource(),n=s.createBuffer(1,1,44100);r.buffer=n;try{r.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=s=>{const r=s.createBufferSource();r.start();try{r.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=s=>{const r=s.createOscillator();try{r.start(-1)}catch(n){return n instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=s=>{const r=s.createBuffer(1,1,44100),n=s.createBufferSource();n.buffer=r,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=s=>{const r=s.createOscillator();try{r.stop(-1)}catch(n){return n instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=s=>{const{port1:r,port2:n}=new MessageChannel;try{r.postMessage(s)}finally{r.close(),n.close()}},wrapAudioBufferSourceNodeStartMethodOffsetClamping=s=>{s.start=(r=>(n=0,t=0,a)=>{const l=s.buffer,o=l===null?t:Math.min(l.duration,t);l!==null&&o>l.duration-.5/s.context.sampleRate?r.call(s,n,0,0):r.call(s,n,o,a)})(s.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(s,r)=>{const n=r.createGain();s.connect(n);const t=(a=>()=>{a.call(s,n),s.removeEventListener("ended",t)})(s.disconnect);s.addEventListener("ended",t),interceptConnections(s,n),s.stop=(a=>{let l=!1;return(o=0)=>{if(l)try{a.call(s,o)}catch{n.gain.setValueAtTime(0,o)}else a.call(s,o),l=!0}})(s.stop)},wrapEventListener=(s,r)=>n=>{const t={value:s};return Object.defineProperties(n,{currentTarget:t,target:t}),typeof r=="function"?r.call(s,n):r.handleEvent.call(s,n)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext$1=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext$1?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext$1?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext);function assert(s,r){if(!s)throw new Error(r)}function assertRange(s,r,n=1/0){if(!(r<=s&&s<=n))throw new RangeError(`Value must be within [${r}, ${n}], got: ${s}`)}function assertContextRunning(s){!s.isOffline&&s.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let defaultLogger=console;function log(...s){defaultLogger.log(...s)}function warn(...s){defaultLogger.warn(...s)}function isUndef(s){return typeof s>"u"}function isDefined(s){return!isUndef(s)}function isFunction(s){return typeof s=="function"}function isNumber(s){return typeof s=="number"}function isObject(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function isBoolean(s){return typeof s=="boolean"}function isArray(s){return Array.isArray(s)}function isString(s){return typeof s=="string"}function isNote(s){return isString(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function createAudioContext(s){return new audioContextConstructor(s)}function createOfflineAudioContext(s,r,n){return new offlineAudioContextConstructor(s,r,n)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(s,r,n){return assert(isDefined(audioWorkletNodeConstructor),"This node only works in a secure context (https or localhost)"),new audioWorkletNodeConstructor(s,r,n)}function __decorate(s,r,n,t){var a=arguments.length,l=a<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,n):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(s,r,n,t);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(l=(a<3?o(l):a>3?o(r,n,l):o(r,n))||l);return a>3&&l&&Object.defineProperty(r,n,l),l}function __awaiter(s,r,n,t){function a(l){return l instanceof n?l:new n(function(o){o(l)})}return new(n||(n=Promise))(function(l,o){function c(y){try{f(t.next(y))}catch(_){o(_)}}function i(y){try{f(t.throw(y))}catch(_){o(_)}}function f(y){y.done?l(y.value):a(y.value).then(c,i)}f((t=t.apply(s,r||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;class Ticker{constructor(r,n,t){this._callback=r,this._type=n,this._updateInterval=t,this._createClock()}_createWorker(){const r=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(r),t=new Worker(n);t.onmessage=this._callback.bind(this),this._worker=t}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(r){this._updateInterval=Math.max(r,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(r*1e3,1))}get type(){return this._type}set type(r){this._disposeClock(),this._type=r,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(s){return isAnyAudioParam(s)}function isAudioNode(s){return isAnyAudioNode(s)}function isOfflineAudioContext(s){return isAnyOfflineAudioContext(s)}function isAudioContext(s){return isAnyAudioContext(s)}function isAudioBuffer(s){return s instanceof AudioBuffer}function noCopy(s,r){return s==="value"||isAudioParam(r)||isAudioNode(r)||isAudioBuffer(r)}function deepMerge(s,...r){if(!r.length)return s;const n=r.shift();if(isObject(s)&&isObject(n))for(const t in n)noCopy(t,n[t])?s[t]=n[t]:isObject(n[t])?(s[t]||Object.assign(s,{[t]:{}}),deepMerge(s[t],n[t])):Object.assign(s,{[t]:n[t]});return deepMerge(s,...r)}function deepEquals(s,r){return s.length===r.length&&s.every((n,t)=>r[t]===n)}function optionsFromArguments(s,r,n=[],t){const a={},l=Array.from(r);if(isObject(l[0])&&t&&!Reflect.has(l[0],t)&&(Object.keys(l[0]).some(c=>Reflect.has(s,c))||(deepMerge(a,{[t]:l[0]}),n.splice(n.indexOf(t),1),l.shift())),l.length===1&&isObject(l[0]))deepMerge(a,l[0]);else for(let o=0;o<n.length;o++)isDefined(l[o])&&(a[n[o]]=l[o]);return deepMerge(s,a)}function getDefaultsFromInstance(s){return s.constructor.getDefaults()}function defaultArg(s,r){return isUndef(s)?r:s}function omitFromObject(s,r){return r.forEach(n=>{Reflect.has(s,n)&&delete s[n]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Tone{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...r){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...r)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Tone.version=version;const EPSILON=1e-6;function GT(s,r){return s>r+EPSILON}function GTE(s,r){return GT(s,r)||EQ(s,r)}function LT(s,r){return s+EPSILON<r}function EQ(s,r){return Math.abs(s-r)<EPSILON}function clamp(s,r,n){return Math.max(Math.min(s,n),r)}class Timeline extends Tone{constructor(){super(),this.name="Timeline",this._timeline=[];const r=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=r.memory,this.increasing=r.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(r){if(assert(Reflect.has(r,"time"),"Timeline: events must have a time attribute"),r.time=r.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];assert(GTE(r.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(r)}else{const n=this._search(r.time);this._timeline.splice(n+1,0,r)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(r){const n=this._timeline.indexOf(r);return n!==-1&&this._timeline.splice(n,1),this}get(r,n="time"){const t=this._search(r,n);return t!==-1?this._timeline[t]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(r,n="time"){const t=this._search(r,n);return t+1<this._timeline.length?this._timeline[t+1]:null}getBefore(r){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<r)return this._timeline[n-1];const t=this._search(r);return t-1>=0?this._timeline[t-1]:null}cancel(r){if(this._timeline.length>1){let n=this._search(r);if(n>=0)if(EQ(this._timeline[n].time,r)){for(let t=n;t>=0&&EQ(this._timeline[t].time,r);t--)n=t;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,r)&&(this._timeline=[]);return this}cancelBefore(r){const n=this._search(r);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(r){const n=this._timeline.indexOf(r);return n>0?this._timeline[n-1]:null}_search(r,n="time"){if(this._timeline.length===0)return-1;let t=0;const a=this._timeline.length;let l=a;if(a>0&&this._timeline[a-1][n]<=r)return a-1;for(;t<l;){let o=Math.floor(t+(l-t)/2);const c=this._timeline[o],i=this._timeline[o+1];if(EQ(c[n],r)){for(let f=o;f<this._timeline.length;f++){const y=this._timeline[f];if(EQ(y[n],r))o=f;else break}return o}else{if(LT(c[n],r)&&GT(i[n],r))return o;GT(c[n],r)?l=o:t=o+1}}return-1}_iterate(r,n=0,t=this._timeline.length-1){this._timeline.slice(n,t+1).forEach(r)}forEach(r){return this._iterate(r),this}forEachBefore(r,n){const t=this._search(r);return t!==-1&&this._iterate(n,0,t),this}forEachAfter(r,n){const t=this._search(r);return this._iterate(n,t+1),this}forEachBetween(r,n,t){let a=this._search(r),l=this._search(n);return a!==-1&&l!==-1?(this._timeline[a].time!==r&&(a+=1),this._timeline[l].time===n&&(l-=1),this._iterate(t,a,l)):a===-1&&this._iterate(t,0,l),this}forEachFrom(r,n){let t=this._search(r);for(;t>=0&&this._timeline[t].time>=r;)t--;return this._iterate(n,t+1),this}forEachAtTime(r,n){const t=this._search(r);if(t!==-1&&EQ(this._timeline[t].time,r)){let a=t;for(let l=t;l>=0&&EQ(this._timeline[l].time,r);l--)a=l;this._iterate(l=>{n(l)},a,t)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(s){notifyNewContext.push(s)}function initializeContext(s){notifyNewContext.forEach(r=>r(s))}const notifyCloseContext=[];function onContextClose(s){notifyCloseContext.push(s)}function closeContext(s){notifyCloseContext.forEach(r=>r(s))}class Emitter extends Tone{constructor(){super(...arguments),this.name="Emitter"}on(r,n){return r.split(/\W+/).forEach(a=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(n)}),this}once(r,n){const t=(...a)=>{n(...a),this.off(r,t)};return this.on(r,t),this}off(r,n){return r.split(/\W+/).forEach(a=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(isUndef(n))this._events[r]=[];else{const l=this._events[r];for(let o=l.length-1;o>=0;o--)l[o]===n&&l.splice(o,1)}}),this}emit(r,...n){if(this._events&&this._events.hasOwnProperty(r)){const t=this._events[r].slice(0);for(let a=0,l=t.length;a<l;a++)t[a].apply(this,n)}return this}static mixin(r){["on","once","off","emit"].forEach(n=>{const t=Object.getOwnPropertyDescriptor(Emitter.prototype,n);Object.defineProperty(r.prototype,n,t)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const r=optionsFromArguments(Context.getDefaults(),arguments,["context"]);r.context?this._context=r.context:this._context=createAudioContext({latencyHint:r.latencyHint}),this._ticker=new Ticker(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(r.latencyHint),this.lookAhead=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(r,n,t){return this._context.createBuffer(r,n,t)}createChannelMerger(r){return this._context.createChannelMerger(r)}createChannelSplitter(r){return this._context.createChannelSplitter(r)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(r){return this._context.createDelay(r)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(r,n){return this._context.createIIRFilter(r,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(r,n,t){return this._context.createPeriodicWave(r,n,t)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(r){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(r)}createMediaElementSource(r){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(r)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(r){return this._context.decodeAudioData(r)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(r){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=r}get transport(){return this.initialize(),this._transport}set transport(r){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=r}get draw(){return this.initialize(),this._draw}set draw(r){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=r}get destination(){return this.initialize(),this._destination}set destination(r){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=r}createAudioWorkletNode(r,n){return createAudioWorkletNode(this.rawContext,r,n)}addAudioWorkletModule(r,n){return __awaiter(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(r)),yield this._workletModules.get(n)})}workletsAreReady(){return __awaiter(this,void 0,void 0,function*(){const r=[];this._workletModules.forEach(n=>r.push(n)),yield Promise.all(r)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(r){this._ticker.updateInterval=r}get clockSource(){return this._ticker.type}set clockSource(r){this._ticker.type=r}get latencyHint(){return this._latencyHint}_setLatencyHint(r){let n=0;if(this._latencyHint=r,isString(r))switch(r){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter(this,void 0,void 0,function*(){isAudioContext(this._context)&&(yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(r){if(this._constants.has(r))return this._constants.get(r);{const n=this._context.createBuffer(1,128,this._context.sampleRate),t=n.getChannelData(0);for(let l=0;l<t.length;l++)t[l]=r;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=n,a.loop=!0,a.start(0),this._constants.set(r,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(r=>this._constants[r].disconnect()),this}_timeoutLoop(){const r=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=r;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(r,n){this._timeoutIds++;const t=this.now();return this._timeouts.add({callback:r,id:this._timeoutIds,time:t+n}),this._timeoutIds}clearTimeout(r){return this._timeouts.forEach(n=>{n.id===r&&this._timeouts.remove(n)}),this}clearInterval(r){return this.clearTimeout(r)}setInterval(r,n){const t=++this._timeoutIds,a=()=>{const l=this.now();this._timeouts.add({callback:()=>{r(),a()},id:t,time:l+n})};return a(),t}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(r,n,t){return{}}createChannelMerger(r){return{}}createChannelSplitter(r){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(r){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(r,n){return{}}createPanner(){return{}}createPeriodicWave(r,n,t){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(r){return{}}createMediaElementSource(r){return{}}createMediaStreamDestination(){return{}}decodeAudioData(r){return Promise.resolve({})}createAudioWorkletNode(r,n){return{}}get rawContext(){return{}}addAudioWorkletModule(r,n){return __awaiter(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(r,n){return 0}clearTimeout(r){return this}setInterval(r,n){return 0}clearInterval(r){return this}getConstant(r){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(r){}get destination(){return{}}set destination(r){}now(){return 0}immediate(){return 0}}function readOnly(s,r){isArray(r)?r.forEach(n=>readOnly(s,n)):Object.defineProperty(s,r,{enumerable:!0,writable:!1})}function writable(s,r){isArray(r)?r.forEach(n=>writable(s,n)):Object.defineProperty(s,r,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const r=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=r.reverse,this.onload=r.onload,r.url&&isAudioBuffer(r.url)||r.url instanceof ToneAudioBuffer?this.set(r.url):isString(r.url)&&this.load(r.url).catch(r.onerror)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(r){return r instanceof ToneAudioBuffer?r.loaded?this._buffer=r.get():r.onload=()=>{this.set(r),this.onload(this)}:this._buffer=r,this._reversed&&this._reverse(),this}get(){return this._buffer}load(r){return __awaiter(this,void 0,void 0,function*(){const n=ToneAudioBuffer.load(r).then(t=>{this.set(t),this.onload(this)});ToneAudioBuffer.downloads.push(n);try{yield n}finally{const t=ToneAudioBuffer.downloads.indexOf(n);ToneAudioBuffer.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(r){const n=isArray(r)&&r[0].length>0,t=n?r.length:1,a=n?r[0].length:r.length,l=getContext(),o=l.createBuffer(t,a,l.sampleRate),c=!n&&t===1?[r]:r;for(let i=0;i<t;i++)o.copyToChannel(c[i],i);return this._buffer=o,this}toMono(r){if(isNumber(r))this.fromArray(this.toArray(r));else{let n=new Float32Array(this.length);const t=this.numberOfChannels;for(let a=0;a<t;a++){const l=this.toArray(a);for(let o=0;o<l.length;o++)n[o]+=l[o]}n=n.map(a=>a/t),this.fromArray(n)}return this}toArray(r){if(isNumber(r))return this.getChannelData(r);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let t=0;t<this.numberOfChannels;t++)n[t]=this.getChannelData(t);return n}}getChannelData(r){return this._buffer?this._buffer.getChannelData(r):new Float32Array(0)}slice(r,n=this.duration){const t=Math.floor(r*this.sampleRate),a=Math.floor(n*this.sampleRate);assert(t<a,"The start time must be less than the end time");const l=a-t,o=getContext().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)o.copyToChannel(this.getChannelData(c).subarray(t,a),c);return new ToneAudioBuffer(o)}_reverse(){if(this.loaded)for(let r=0;r<this.numberOfChannels;r++)this.getChannelData(r).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(r){this._reversed!==r&&(this._reversed=r,this._reverse())}static fromArray(r){return new ToneAudioBuffer().fromArray(r)}static fromUrl(r){return __awaiter(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(r)})}static load(r){return __awaiter(this,void 0,void 0,function*(){const n=r.match(/\[([^\]\[]+\|.+)\]$/);if(n){const c=n[1].split("|");let i=c[0];for(const f of c)if(ToneAudioBuffer.supportsType(f)){i=f;break}r=r.replace(n[0],i)}const t=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",a=yield fetch(t+r);if(!a.ok)throw new Error(`could not load url: ${r}`);const l=yield a.arrayBuffer();return yield getContext().decodeAudioData(l)})}static supportsType(r){const n=r.split("."),t=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+t)!==""}static loaded(){return __awaiter(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(r){return __awaiter(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const t=Math.floor(this.sampleRate/128);r&&n%t===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(r=!0){return __awaiter(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(r);const n=yield this._context.startRendering();return new ToneAudioBuffer(n)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(s){isAudioContext(s)?globalContext=new Context(s):isOfflineAudioContext(s)?globalContext=new OfflineContext(s):globalContext=s}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const r=` * Tone.js v${version} * `;console.log(`%c${r}`,"background: #000; color: #fff")}function dbToGain(s){return Math.pow(10,s/20)}function gainToDb(s){return 20*(Math.log(s)/Math.LN10)}function intervalToFrequencyRatio(s){return Math.pow(2,s/12)}let A4=440;function getA4(){return A4}function setA4(s){A4=s}function ftom(s){return Math.round(ftomf(s))}function ftomf(s){return 69+12*Math.log2(s/A4)}function mtof(s){return A4*Math.pow(2,(s-69)/12)}class TimeBaseClass extends Tone{constructor(r,n,t){super(),this.defaultUnits="s",this._val=n,this._units=t,this.context=r,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:r=>this._frequencyToUnits(parseFloat(r)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:r=>this._ticksToUnits(parseInt(r,10)),regexp:/^(\d+)i$/i},m:{method:r=>this._beatsToUnits(parseInt(r,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(r,n)=>{const t=parseInt(r,10),a=n==="."?1.5:1;return t===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/t)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:r=>this._expressions[this.defaultUnits].method.call(this,r),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:r=>this._secondsToUnits(parseFloat(r)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:r=>parseInt(r,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:r=>{const n=parseInt(r,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(r,n,t)=>{let a=0;return r&&r!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(r))),n&&n!=="0"&&(a+=this._beatsToUnits(parseFloat(n))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString(this._val)&&isUndef(this._units)){for(const r in this._expressions)if(this._expressions[r].regexp.test(this._val.trim())){this._units=r;break}}else if(isObject(this._val)){let r=0;for(const n in this._val)if(isDefined(this._val[n])){const t=this._val[n],a=new this.constructor(this.context,n).valueOf()*t;r+=a}return r}if(isDefined(this._units)){const r=this._expressions[this._units],n=this._val.toString().trim().match(r.regexp);return n?r.method.apply(this,n.slice(1)):r.method.call(this,this._val)}else return isString(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(r){return 1/r}_beatsToUnits(r){return 60/this._getBpm()*r}_secondsToUnits(r){return r}_ticksToUnits(r){return r*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(r){switch(this._units=void 0,this.defaultUnits){case"s":this._val=r.toSeconds();break;case"i":this._val=r.toTicks();break;case"hz":this._val=r.toFrequency();break;case"midi":this._val=r.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:r=>this._now()+new this.constructor(this.context,r).valueOf(),regexp:/^\+(.+)/},quantize:{method:r=>{const n=new TimeClass(this.context,r).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(r,n=1){const t=new this.constructor(this.context,r).valueOf(),a=this.valueOf(),c=Math.round(a/t)*t-a;return a+c*n}toNotation(){const r=this.toSeconds(),n=["1m"];for(let l=1;l<9;l++){const o=Math.pow(2,l);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let t=n[0],a=new TimeClass(this.context,n[0]).toSeconds();return n.forEach(l=>{const o=new TimeClass(this.context,l).toSeconds();Math.abs(o-r)<Math.abs(a-r)&&(t=l,a=o)}),t}toBarsBeatsSixteenths(){const r=this._beatsToUnits(1);let n=this.valueOf()/r;n=parseFloat(n.toFixed(4));const t=Math.floor(n/this._getTimeSignature());let a=n%1*4;n=Math.floor(n)%this._getTimeSignature();const l=a.toString();return l.length>3&&(a=parseFloat(parseFloat(l).toFixed(3))),[t,n,a].join(":")}toTicks(){const r=this._beatsToUnits(1),n=this.valueOf()/r;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(r){setA4(r)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(r){return this.defaultUnits==="midi"?r:FrequencyClass.mtof(r)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(r,n){const a=noteToScaleIndex[r.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?a:FrequencyClass.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(r,n,t){let a=1;return r&&r!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(r))),n&&n!=="0"&&(a*=this._beatsToUnits(parseFloat(n))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t)/4)),a}}})}transpose(r){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(r))}harmonize(r){return r.map(n=>this.transpose(n))}toMidi(){return ftom(this.valueOf())}toNote(){const r=this.toFrequency(),n=Math.log2(r/FrequencyClass.A4);let t=Math.round(12*n)+57;const a=Math.floor(t/12);return a<0&&(t+=-12*a),scaleIndexToNote[t%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const r=this._beatsToUnits(1),n=this.valueOf()/r;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(r){return r}_ticksToUnits(r){return 1/(r*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(r){return 1/super._beatsToUnits(r)}_secondsToUnits(r){return 1/r}static mtof(r){return mtof(r)}static ftom(r){return ftom(r)}}const noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ToneWithContext extends Tone{constructor(){super();const r=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=r.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(r){return new TimeClass(this.context,r).toSeconds()}toFrequency(r){return new FrequencyClass(this.context,r).toFrequency()}toTicks(r){return new TransportTimeClass(this.context,r).toTicks()}_getPartialProperties(r){const n=this.get();return Object.keys(n).forEach(t=>{isUndef(r[t])&&delete n[t]}),n}get(){const r=getDefaultsFromInstance(this);return Object.keys(r).forEach(n=>{if(Reflect.has(this,n)){const t=this[n];isDefined(t)&&isDefined(t.value)&&isDefined(t.setValueAtTime)?r[n]=t.value:t instanceof ToneWithContext?r[n]=t._getPartialProperties(r[n]):isArray(t)||isNumber(t)||isString(t)||isBoolean(t)?r[n]=t:delete r[n]}}),r}set(r){return Object.keys(r).forEach(n=>{Reflect.has(this,n)&&isDefined(this[n])&&(this[n]&&isDefined(this[n].value)&&isDefined(this[n].setValueAtTime)?this[n].value!==r[n]&&(this[n].value=r[n]):this[n]instanceof ToneWithContext?this[n].set(r[n]):this[n]=r[n])}),this}}class StateTimeline extends Timeline{constructor(r="stopped"){super(),this.name="StateTimeline",this._initial=r,this.setStateAtTime(this._initial,0)}getValueAtTime(r){const n=this.get(r);return n!==null?n.state:this._initial}setStateAtTime(r,n,t){return assertRange(n,0),this.add(Object.assign({},t,{state:r,time:n})),this}getLastState(r,n){const t=this._search(n);for(let a=t;a>=0;a--){const l=this._timeline[a];if(l.state===r)return l}}getNextState(r,n){const t=this._search(n);if(t!==-1)for(let a=t;a<this._timeline.length;a++){const l=this._timeline[a];if(l.state===r)return l}}}class Param extends ToneWithContext{constructor(){super(optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const r=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(assert(isDefined(r.param)&&(isAudioParam(r.param)||r.param instanceof Param),"param must be an AudioParam");!isAudioParam(r.param);)r.param=r.param._param;this._swappable=isDefined(r.swappable)?r.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=r.param,this.input.connect(this._param)):this._param=this.input=r.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=r.units,this.convert=r.convert,this._minValue=r.minValue,this._maxValue=r.maxValue,isDefined(r.value)&&r.value!==this._toType(this._initialValue)&&this.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const r=this.now();return this.getValueAtTime(r)}set value(r){this.cancelScheduledValues(this.now()),this.setValueAtTime(r,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(r,n){return this.units===n}_assertRange(r){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(r,this._fromType(this.minValue),this._fromType(this.maxValue)),r}_fromType(r){return this.convert&&!this.overridden?this._is(r,"time")?this.toSeconds(r):this._is(r,"decibels")?dbToGain(r):this._is(r,"frequency")?this.toFrequency(r):r:this.overridden?0:r}_toType(r){return this.convert&&this.units==="decibels"?gainToDb(r):r}setValueAtTime(r,n){const t=this.toSeconds(n),a=this._fromType(r);return assert(isFinite(a)&&isFinite(t),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",r,t),this._events.add({time:t,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,t),this}getValueAtTime(r){const n=Math.max(this.toSeconds(r),0),t=this._events.getAfter(n),a=this._events.get(n);let l=this._initialValue;if(a===null)l=this._initialValue;else if(a.type==="setTargetAtTime"&&(t===null||t.type==="setValueAtTime")){const o=this._events.getBefore(a.time);let c;o===null?c=this._initialValue:c=o.value,a.type==="setTargetAtTime"&&(l=this._exponentialApproach(a.time,c,a.value,a.constant,n))}else if(t===null)l=a.value;else if(t.type==="linearRampToValueAtTime"||t.type==="exponentialRampToValueAtTime"){let o=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?o=this._initialValue:o=c.value}t.type==="linearRampToValueAtTime"?l=this._linearInterpolate(a.time,o,t.time,t.value,n):l=this._exponentialInterpolate(a.time,o,t.time,t.value,n)}else l=a.value;return this._toType(l)}setRampPoint(r){r=this.toSeconds(r);let n=this.getValueAtTime(r);return this.cancelAndHoldAtTime(r),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,r),this}linearRampToValueAtTime(r,n){const t=this._fromType(r),a=this.toSeconds(n);return assert(isFinite(t)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._assertRange(t),this._events.add({time:a,type:"linearRampToValueAtTime",value:t}),this.log(this.units,"linearRampToValueAtTime",r,a),this._param.linearRampToValueAtTime(t,a),this}exponentialRampToValueAtTime(r,n){let t=this._fromType(r);t=EQ(t,0)?this._minOutput:t,this._assertRange(t);const a=this.toSeconds(n);return assert(isFinite(t)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:t}),this.log(this.units,"exponentialRampToValueAtTime",r,a),this._param.exponentialRampToValueAtTime(t,a),this}exponentialRampTo(r,n,t){return t=this.toSeconds(t),this.setRampPoint(t),this.exponentialRampToValueAtTime(r,t+this.toSeconds(n)),this}linearRampTo(r,n,t){return t=this.toSeconds(t),this.setRampPoint(t),this.linearRampToValueAtTime(r,t+this.toSeconds(n)),this}targetRampTo(r,n,t){return t=this.toSeconds(t),this.setRampPoint(t),this.exponentialApproachValueAtTime(r,t,n),this}exponentialApproachValueAtTime(r,n,t){n=this.toSeconds(n),t=this.toSeconds(t);const a=Math.log(t+1)/Math.log(200);return this.setTargetAtTime(r,n,a),this.cancelAndHoldAtTime(n+t*.9),this.linearRampToValueAtTime(r,n+t),this}setTargetAtTime(r,n,t){const a=this._fromType(r);assert(isFinite(t)&&t>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(n);return this._assertRange(a),assert(isFinite(a)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._events.add({constant:t,time:l,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",r,l,t),this._param.setTargetAtTime(a,l,t),this}setValueCurveAtTime(r,n,t,a=1){t=this.toSeconds(t),n=this.toSeconds(n);const l=this._fromType(r[0])*a;this.setValueAtTime(this._toType(l),n);const o=t/(r.length-1);for(let c=1;c<r.length;c++){const i=this._fromType(r[c])*a;this.linearRampToValueAtTime(this._toType(i),n+c*o)}return this}cancelScheduledValues(r){const n=this.toSeconds(r);return assert(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(r)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(r){const n=this.toSeconds(r),t=this._fromType(this.getValueAtTime(n));assert(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(r)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+t);const a=this._events.get(n),l=this._events.getAfter(n);return a&&EQ(a.time,n)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(t),n):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(t),n)),this._events.add({time:n,type:"setValueAtTime",value:t}),this._param.setValueAtTime(t,n),this}rampTo(r,n=.1,t){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(r,n,t):this.linearRampTo(r,n,t),this}apply(r){const n=this.context.currentTime;r.setValueAtTime(this.getValueAtTime(n),n);const t=this._events.get(n);if(t&&t.type==="setTargetAtTime"){const a=this._events.getAfter(t.time),l=a?a.time:n+2,o=(l-n)/10;for(let c=n;c<l;c+=o)r.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?r.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?r.setTargetAtTime(a.value,a.time,a.constant):r[a.type](a.value,a.time)}),this}setParam(r){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(r),this._param=r,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(r,n,t,a,l){return t+(n-t)*Math.exp(-(l-r)/a)}_linearInterpolate(r,n,t,a,l){return n+(a-n)*((l-r)/(t-r))}_exponentialInterpolate(r,n,t,a,l){return n*Math.pow(a/n,(l-r)/(t-r))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(r){return isDefined(r)&&(r instanceof ToneAudioNode||isAudioNode(r))}_getInternalNodes(){const r=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&r.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&r.push(this.output),r}_setChannelProperties(r){this._getInternalNodes().forEach(t=>{t.channelCount=r.channelCount,t.channelCountMode=r.channelCountMode,t.channelInterpretation=r.channelInterpretation})}_getChannelProperties(){const r=this._getInternalNodes();assert(r.length>0,"ToneAudioNode does not have any internal nodes");const n=r[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(r){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:r}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(r){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:r}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(r){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:r}))}connect(r,n=0,t=0){return connect(this,r,n,t),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(r,n=0,t=0){return disconnect(this,r,n,t),this}chain(...r){return connectSeries(this,...r),this}fan(...r){return r.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...s){const r=s.shift();s.reduce((n,t)=>(n instanceof ToneAudioNode?n.connect(t):isAudioNode(n)&&connect(n,t),t),r)}function connect(s,r,n=0,t=0){for(assert(isDefined(s),"Cannot connect from undefined node"),assert(isDefined(r),"Cannot connect to undefined node"),(r instanceof ToneAudioNode||isAudioNode(r))&&assert(r.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(s.numberOfOutputs>0,"Cannot connect from node with no outputs");r instanceof ToneAudioNode||r instanceof Param;)isDefined(r.input)&&(r=r.input);for(;s instanceof ToneAudioNode;)isDefined(s.output)&&(s=s.output);isAudioParam(r)?s.connect(r,n):s.connect(r,n,t)}function disconnect(s,r,n=0,t=0){if(isDefined(r))for(;r instanceof ToneAudioNode;)r=r.input;for(;!isAudioNode(s);)isDefined(s.output)&&(s=s.output);isAudioParam(r)?s.disconnect(r,n):isAudioNode(r)?s.disconnect(r,n,t):s.disconnect()}class Gain extends ToneAudioNode{constructor(){super(optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const r=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);this.gain=new Param({context:this.context,convert:r.convert,param:this._gainNode.gain,units:r.units,value:r.gain,minValue:r.minValue,maxValue:r.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(r){super(r),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const t=this.toSeconds(n);return this._startTime!==-1&&t>=this._startTime&&(this._stopTime===-1||t<=this._stopTime)?"started":"stopped"},this._fadeIn=r.fadeIn,this._fadeOut=r.fadeOut,this._curve=r.curve,this.onended=r.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(r,n=1){assert(this._startTime===-1,"Source cannot be started more than once");const t=this.toSeconds(this._fadeIn);return this._startTime=r+t,this._startTime=Math.max(this._startTime,this.context.currentTime),t>0?(this._gainNode.gain.setValueAtTime(0,r),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,r+t):this._gainNode.gain.exponentialApproachValueAtTime(n,r,t)):this._gainNode.gain.setValueAtTime(n,r),this}stop(r){return this.log("stop",r),this._stopGain(this.toSeconds(r)),this}_stopGain(r){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(r)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,r):this._gainNode.gain.targetRampTo(0,n,r):(this._gainNode.gain.cancelAndHoldAtTime(r),this._gainNode.gain.setValueAtTime(0,r)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const t=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const r=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(r):setTimeout(r,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ToneConstantSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const r=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:r.convert,param:this._source.offset,units:r.units,value:r.offset,minValue:r.minValue,maxValue:r.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(r){const n=this.toSeconds(r);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(r){this._source.stop(r)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const r=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:r.convert,offset:r.value,units:r.units,minValue:r.minValue,maxValue:r.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(r,n=0,t=0){return connectSignal(this,r,n,t),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(r,n){return this._param.setValueAtTime(r,n),this}getValueAtTime(r){return this._param.getValueAtTime(r)}setRampPoint(r){return this._param.setRampPoint(r),this}linearRampToValueAtTime(r,n){return this._param.linearRampToValueAtTime(r,n),this}exponentialRampToValueAtTime(r,n){return this._param.exponentialRampToValueAtTime(r,n),this}exponentialRampTo(r,n,t){return this._param.exponentialRampTo(r,n,t),this}linearRampTo(r,n,t){return this._param.linearRampTo(r,n,t),this}targetRampTo(r,n,t){return this._param.targetRampTo(r,n,t),this}exponentialApproachValueAtTime(r,n,t){return this._param.exponentialApproachValueAtTime(r,n,t),this}setTargetAtTime(r,n,t){return this._param.setTargetAtTime(r,n,t),this}setValueCurveAtTime(r,n,t,a){return this._param.setValueCurveAtTime(r,n,t,a),this}cancelScheduledValues(r){return this._param.cancelScheduledValues(r),this}cancelAndHoldAtTime(r){return this._param.cancelAndHoldAtTime(r),this}rampTo(r,n,t){return this._param.rampTo(r,n,t),this}get value(){return this._param.value}set value(r){this._param.value=r}get convert(){return this._param.convert}set convert(r){this._param.convert=r}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(r){this._param.overridden=r}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(r){return this._param.apply(r),this}}function connectSignal(s,r,n,t){(r instanceof Param||isAudioParam(r)||r instanceof Signal&&r.override)&&(r.cancelScheduledValues(0),r.setValueAtTime(0,0),r instanceof Signal&&(r.overridden=!0)),connect(s,r,n,t)}class TickParam extends Param{constructor(){super(optionsFromArguments(TickParam.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1;const r=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);this._multiplier=r.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(r.value)}),this.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(r,n,t){n=this.toSeconds(n),this.setRampPoint(n);const a=this._fromType(r),l=this._events.get(n),o=Math.round(Math.max(1/t,1));for(let c=0;c<=o;c++){const i=t*c+n,f=this._exponentialApproach(l.time,l.value,a,t,i);this.linearRampToValueAtTime(this._toType(f),i)}return this}setValueAtTime(r,n){const t=this.toSeconds(n);super.setValueAtTime(r,n);const a=this._events.get(t),l=this._events.previousEvent(a),o=this._getTicksUntilEvent(l,t);return a.ticks=Math.max(o,0),this}linearRampToValueAtTime(r,n){const t=this.toSeconds(n);super.linearRampToValueAtTime(r,n);const a=this._events.get(t),l=this._events.previousEvent(a),o=this._getTicksUntilEvent(l,t);return a.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(r,n){n=this.toSeconds(n);const t=this._fromType(r),a=this._events.get(n),l=Math.round(Math.max((n-a.time)*10,1)),o=(n-a.time)/l;for(let c=0;c<=l;c++){const i=o*c+a.time,f=this._exponentialInterpolate(a.time,a.value,n,t,i);this.linearRampToValueAtTime(this._toType(f),i)}return this}_getTicksUntilEvent(r,n){if(r===null)r={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(r.ticks)){const o=this._events.previousEvent(r);r.ticks=this._getTicksUntilEvent(o,r.time)}const t=this._fromType(this.getValueAtTime(r.time));let a=this._fromType(this.getValueAtTime(n));const l=this._events.get(n);return l&&l.time===n&&l.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-r.time)*(t+a)+r.ticks}getTicksAtTime(r){const n=this.toSeconds(r),t=this._events.get(n);return Math.max(this._getTicksUntilEvent(t,n),0)}getDurationOfTicks(r,n){const t=this.toSeconds(n),a=this.getTicksAtTime(n);return this.getTimeOfTick(a+r)-t}getTimeOfTick(r){const n=this._events.get(r,"ticks"),t=this._events.getAfter(r,"ticks");if(n&&n.ticks===r)return n.time;if(n&&t&&t.type==="linearRampToValueAtTime"&&n.value!==t.value){const a=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(t.time))-a)/(t.time-n.time),c=Math.sqrt(Math.pow(a,2)-2*o*(n.ticks-r)),i=(-a+c)/o,f=(-a-c)/o;return(i>0?i:f)+n.time}else return n?n.value===0?1/0:n.time+(r-n.ticks)/n.value:r/this._initialValue}ticksToTime(r,n){return this.getDurationOfTicks(r,n)}timeToTicks(r,n){const t=this.toSeconds(n),a=this.toSeconds(r),l=this.getTicksAtTime(t);return this.getTicksAtTime(t+a)-l}_fromType(r){return this.units==="bpm"&&this.multiplier?1/(60/r/this.multiplier):super._fromType(r)}_toType(r){return this.units==="bpm"&&this.multiplier?r/this.multiplier*60:super._toType(r)}get multiplier(){return this._multiplier}set multiplier(r){const n=this.value;this._multiplier=r,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class TickSignal extends Signal{constructor(){super(optionsFromArguments(TickSignal.getDefaults(),arguments,["value"])),this.name="TickSignal";const r=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);this.input=this._param=new TickParam({context:this.context,convert:r.convert,multiplier:r.multiplier,param:this._constantSource.offset,units:r.units,value:r.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(r,n){return this._param.ticksToTime(r,n)}timeToTicks(r,n){return this._param.timeToTicks(r,n)}getTimeOfTick(r){return this._param.getTimeOfTick(r)}getDurationOfTicks(r,n){return this._param.getDurationOfTicks(r,n)}getTicksAtTime(r){return this._param.getTicksAtTime(r)}get multiplier(){return this._param.multiplier}set multiplier(r){this._param.multiplier=r}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){super(optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline;const r=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);this.frequency=new TickSignal({context:this.context,units:r.units,value:r.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(r,n){const t=this.toSeconds(r);return this._state.getValueAtTime(t)!=="started"&&(this._state.setStateAtTime("started",t),isDefined(n)&&this.setTicksAtTime(n,t)),this}stop(r){const n=this.toSeconds(r);if(this._state.getValueAtTime(n)==="stopped"){const t=this._state.get(n);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(r){const n=this.toSeconds(r);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(r){return r=this.toSeconds(r),this._state.cancel(r),this._tickOffset.cancel(r),this}getTicksAtTime(r){const n=this.toSeconds(r),t=this._state.getLastState("stopped",n),a={state:"paused",time:n};this._state.add(a);let l=t,o=0;return this._state.forEachBetween(t.time,n+this.sampleTime,c=>{let i=l.time;const f=this._tickOffset.get(c.time);f&&f.time>=l.time&&(o=f.ticks,i=f.time),l.state==="started"&&c.state!=="started"&&(o+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(i)),l=c}),this._state.remove(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(r){this.setTicksAtTime(r,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(r){const n=this.now(),t=this.frequency.timeToTicks(r,n);this.setTicksAtTime(t,n)}getSecondsAtTime(r){r=this.toSeconds(r);const n=this._state.getLastState("stopped",r),t={state:"paused",time:r};this._state.add(t);let a=n,l=0;return this._state.forEachBetween(n.time,r+this.sampleTime,o=>{let c=a.time;const i=this._tickOffset.get(o.time);i&&i.time>=a.time&&(l=i.seconds,c=i.time),a.state==="started"&&o.state!=="started"&&(l+=o.time-c),a=o}),this._state.remove(t),l}setTicksAtTime(r,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(r,n),ticks:r,time:n}),this}getStateAtTime(r){return r=this.toSeconds(r),this._state.getValueAtTime(r)}getTimeOfTick(r,n=this.now()){const t=this._tickOffset.get(n),a=this._state.get(n),l=Math.max(t.time,a.time),o=this.frequency.getTicksAtTime(l)+r-t.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(r,n,t){let a=this._state.get(r);this._state.forEachBetween(r,n,o=>{a&&a.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(a.time,r),o.time-this.sampleTime,t),a=o});let l=null;if(a&&a.state==="started"){const o=Math.max(a.time,r),c=this.frequency.getTicksAtTime(o),i=this.frequency.getTicksAtTime(a.time),f=c-i;let y=Math.ceil(f)-f;y=EQ(y,1)?0:y;let _=this.frequency.getTimeOfTick(c+y);for(;_<n;){try{t(_,Math.round(this.getTicksAtTime(_)))}catch(u){l=u;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){super(optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this);const r=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);this.callback=r.callback,this._tickSource=new TickSource({context:this.context,frequency:r.frequency,units:r.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(r,n){assertContextRunning(this.context);const t=this.toSeconds(r);return this.log("start",t),this._state.getValueAtTime(t)!=="started"&&(this._state.setStateAtTime("started",t),this._tickSource.start(t,n),t<this._lastUpdate&&this.emit("start",t,n)),this}stop(r){const n=this.toSeconds(r);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(r){const n=this.toSeconds(r);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(r){this._tickSource.ticks=r}get seconds(){return this._tickSource.seconds}set seconds(r){this._tickSource.seconds=r}getSecondsAtTime(r){return this._tickSource.getSecondsAtTime(r)}setTicksAtTime(r,n){return this._tickSource.setTicksAtTime(r,n),this}getTimeOfTick(r,n=this.now()){return this._tickSource.getTimeOfTick(r,n)}getTicksAtTime(r){return this._tickSource.getTicksAtTime(r)}nextTickTime(r,n){const t=this.toSeconds(n),a=this.getTicksAtTime(t);return this._tickSource.getTimeOfTick(a+r,t)}_loop(){const r=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",r,n),r!==n&&(this._state.forEachBetween(r,n,t=>{switch(t.state){case"started":const a=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,a);break;case"stopped":t.time!==0&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time);break}}),this._tickSource.forEachTickBetween(r,n,(t,a)=>{this.callback(t,a)}))}getStateAtTime(r){const n=this.toSeconds(r);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class ToneAudioBuffers extends Tone{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const r=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=r.baseUrl,Object.keys(r.urls).forEach(n=>{this._loadingCount++;const t=r.urls[n];this.add(n,t,this._bufferLoaded.bind(this,r.onload),r.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(r){return this._buffers.has(r.toString())}get(r){return assert(this.has(r),`ToneAudioBuffers has no buffer named: ${r}`),this._buffers.get(r.toString())}_bufferLoaded(r){this._loadingCount--,this._loadingCount===0&&r&&r()}get loaded(){return Array.from(this._buffers).every(([r,n])=>n.loaded)}add(r,n,t=noOp,a=noOp){return isString(n)?this._buffers.set(r.toString(),new ToneAudioBuffer(this.baseUrl+n,t,a)):this._buffers.set(r.toString(),new ToneAudioBuffer(n,t,a)),this}dispose(){return super.dispose(),this._buffers.forEach(r=>r.dispose()),this._buffers.clear(),this}}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(r){return this._getPPQ()*r}_secondsToUnits(r){return Math.floor(r/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(r){return r}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Draw extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(r,n){return this._events.add({callback:r,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(r){return this._events.cancel(this.toSeconds(r)),this}_drawLoop(){const r=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=r;){const n=this._events.shift();n&&r-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}onContextInit(s=>{s.draw=new Draw({context:s})});onContextClose(s=>{s.draw.dispose()});class IntervalTimeline extends Tone{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(r){assert(isDefined(r.time),"Events must have a time property"),assert(isDefined(r.duration),"Events must have a duration parameter"),r.time=r.time.valueOf();let n=new IntervalNode(r.time,r.time+r.duration,r);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(r){if(this._root!==null){const n=[];this._root.search(r.time,n);for(const t of n)if(t.event===r){this._removeNode(t),this._length--;break}}return this}get length(){return this._length}cancel(r){return this.forEachFrom(r,n=>this.remove(n)),this}_setRoot(r){this._root=r,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(r,n){r.parent!==null?(r.isLeftChild()?r.parent.left=n:r.parent.right=n,this._rebalance(r.parent)):this._setRoot(n)}_removeNode(r){if(r.left===null&&r.right===null)this._replaceNodeInParent(r,null);else if(r.right===null)this._replaceNodeInParent(r,r.left);else if(r.left===null)this._replaceNodeInParent(r,r.right);else{const n=r.getBalance();let t,a=null;if(n>0)if(r.left.right===null)t=r.left,t.right=r.right,a=t;else{for(t=r.left.right;t.right!==null;)t=t.right;t.parent&&(t.parent.right=t.left,a=t.parent,t.left=r.left,t.right=r.right)}else if(r.right.left===null)t=r.right,t.left=r.left,a=t;else{for(t=r.right.left;t.left!==null;)t=t.left;t.parent&&(t.parent.left=t.right,a=t.parent,t.left=r.left,t.right=r.right)}r.parent!==null?r.isLeftChild()?r.parent.left=t:r.parent.right=t:this._setRoot(t),a&&this._rebalance(a)}r.dispose()}_rotateLeft(r){const n=r.parent,t=r.isLeftChild(),a=r.right;a&&(r.right=a.left,a.left=r),n!==null?t?n.left=a:n.right=a:this._setRoot(a)}_rotateRight(r){const n=r.parent,t=r.isLeftChild(),a=r.left;a&&(r.left=a.right,a.right=r),n!==null?t?n.left=a:n.right=a:this._setRoot(a)}_rebalance(r){const n=r.getBalance();n>1&&r.left?r.left.getBalance()<0?this._rotateLeft(r.left):this._rotateRight(r):n<-1&&r.right&&(r.right.getBalance()>0?this._rotateRight(r.right):this._rotateLeft(r))}get(r){if(this._root!==null){const n=[];if(this._root.search(r,n),n.length>0){let t=n[0];for(let a=1;a<n.length;a++)n[a].low>t.low&&(t=n[a]);return t.event}}return null}forEach(r){if(this._root!==null){const n=[];this._root.traverse(t=>n.push(t)),n.forEach(t=>{t.event&&r(t.event)})}return this}forEachAtTime(r,n){if(this._root!==null){const t=[];this._root.search(r,t),t.forEach(a=>{a.event&&n(a.event)})}return this}forEachFrom(r,n){if(this._root!==null){const t=[];this._root.searchAfter(r,t),t.forEach(a=>{a.event&&n(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(r=>r.dispose()),this._root=null,this}}class IntervalNode{constructor(r,n,t){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=t,this.low=r,this.high=n,this.max=this.high}insert(r){r.low<=this.low?this.left===null?this.left=r:this.left.insert(r):this.right===null?this.right=r:this.right.insert(r)}search(r,n){r>this.max||(this.left!==null&&this.left.search(r,n),this.low<=r&&this.high>r&&n.push(this),!(this.low>r)&&this.right!==null&&this.right.search(r,n))}searchAfter(r,n){this.low>=r&&(n.push(this),this.left!==null&&this.left.searchAfter(r,n)),this.right!==null&&this.right.searchAfter(r,n)}traverse(r){r(this),this.left!==null&&this.left.traverse(r),this.right!==null&&this.right.traverse(r)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let r=0;return this.left!==null&&this.right!==null?r=this.left.height-this.right.height:this.left!==null?r=this.left.height+1:this.right!==null&&(r=-(this.right.height+1)),r}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(r){this._left=r,r!==null&&(r.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(r){this._right=r,r!==null&&(r.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Volume extends ToneAudioNode{constructor(){super(optionsFromArguments(Volume.getDefaults(),arguments,["volume"])),this.name="Volume";const r=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);this.input=this.output=new Gain({context:this.context,gain:r.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=r.volume,this.mute=r.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(r){!this.mute&&r?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!r&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Destination extends ToneAudioNode{constructor(){super(optionsFromArguments(Destination.getDefaults(),arguments)),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume;const r=optionsFromArguments(Destination.getDefaults(),arguments);connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=r.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(r){this.input.mute=r}chain(...r){return this.input.disconnect(),r.unshift(this.input),r.push(this.output),connectSeries(...r),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}onContextInit(s=>{s.destination=new Destination({context:s})});onContextClose(s=>{s.destination.dispose()});class TimelineValue extends Tone{constructor(r){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=r}set(r,n){return this._timeline.add({value:r,time:n}),this}get(r){const n=this._timeline.get(r);return n?n.value:this._initialValue}}class TransportEvent{constructor(r,n){this.id=TransportEvent._eventId++;const t=Object.assign(TransportEvent.getDefaults(),n);this.transport=r,this.callback=t.callback,this._once=t.once,this.time=t.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}invoke(r){this.callback&&(this.callback(r),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(r,n){super(r,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const t=Object.assign(TransportRepeatEvent.getDefaults(),n);this.duration=new TicksClass(r.context,t.duration).valueOf(),this._interval=new TicksClass(r.context,t.interval).valueOf(),this._nextTick=t.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(r){this._createEvents(r),super.invoke(r)}_createEvents(r){const n=this.transport.getTicksAtTime(r);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(r){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(r);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Transport extends ToneWithContext{constructor(){super(optionsFromArguments(Transport.getDefaults(),arguments)),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0;const r=optionsFromArguments(Transport.getDefaults(),arguments);this._ppq=r.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=r.ppq,this.bpm.setValueAtTime(r.bpm,0),readOnly(this,"bpm"),this._timeSignature=r.timeSignature,this._swingTicks=r.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(r,n){if(this._loop.get(r)&&n>=this._loopEnd&&(this.emit("loopEnd",r),this._clock.setTicksAtTime(this._loopStart,r),n=this._loopStart,this.emit("loopStart",r,this._clock.getSecondsAtTime(r)),this.emit("loop",r)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const t=n%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(t*Math.PI)*this._swingAmount;r+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*a}this._timeline.forEachAtTime(n,t=>t.invoke(r))}schedule(r,n){const t=new TransportEvent(this,{callback:r,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(t,this._timeline)}scheduleRepeat(r,n,t,a=1/0){const l=new TransportRepeatEvent(this,{callback:r,duration:new TimeClass(this.context,a).toTicks(),interval:new TimeClass(this.context,n).toTicks(),time:new TransportTimeClass(this.context,t).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(r,n){const t=new TransportEvent(this,{callback:r,once:!0,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(t,this._timeline)}clear(r){if(this._scheduledEvents.hasOwnProperty(r)){const n=this._scheduledEvents[r.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[r.toString()]}return this}_addEvent(r,n){return this._scheduledEvents[r.id.toString()]={event:r,timeline:n},n.add(r),r.id}cancel(r=0){const n=this.toTicks(r);return this._timeline.forEachFrom(n,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(n,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(r,n)=>{n=new TicksClass(this.context,n).toSeconds(),this.emit("start",r,n)}),this._clock.on("stop",r=>{this.emit("stop",r)}),this._clock.on("pause",r=>{this.emit("pause",r)})}get state(){return this._clock.getStateAtTime(this.now())}start(r,n){let t;return isDefined(n)&&(t=this.toTicks(n)),this._clock.start(r,t),this}stop(r){return this._clock.stop(r),this}pause(r){return this._clock.pause(r),this}toggle(r){return r=this.toSeconds(r),this._clock.getStateAtTime(r)!=="started"?this.start(r):this.stop(r),this}get timeSignature(){return this._timeSignature}set timeSignature(r){isArray(r)&&(r=r[0]/r[1]*4),this._timeSignature=r}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(r){this._loopStart=this.toTicks(r)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(r){this._loopEnd=this.toTicks(r)}get loop(){return this._loop.get(this.now())}set loop(r){this._loop.set(r,this.now())}setLoopPoints(r,n){return this.loopStart=r,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(r){this._swingAmount=r}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(r){this._swingTicks=this.toTicks(r)}get position(){const r=this.now(),n=this._clock.getTicksAtTime(r);return new TicksClass(this.context,n).toBarsBeatsSixteenths()}set position(r){const n=this.toTicks(r);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(r){const n=this.now(),t=this._clock.frequency.timeToTicks(r,n);this.ticks=t}get progress(){if(this.loop){const r=this.now();return(this._clock.getTicksAtTime(r)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(r){if(this._clock.ticks!==r){const n=this.now();if(this.state==="started"){const t=this._clock.getTicksAtTime(n),a=this._clock.frequency.getDurationOfTicks(Math.ceil(t)-t,n),l=n+a;this.emit("stop",l),this._clock.setTicksAtTime(r,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this._clock.setTicksAtTime(r,n)}}getTicksAtTime(r){return Math.round(this._clock.getTicksAtTime(r))}getSecondsAtTime(r){return this._clock.getSecondsAtTime(r)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(r){this._clock.frequency.multiplier=r}nextSubdivision(r){if(r=this.toTicks(r),this.state!=="started")return 0;{const n=this.now(),t=this.getTicksAtTime(n),a=r-t%r;return this._clock.nextTickTime(a,n)}}syncSignal(r,n){if(!n){const a=this.now();if(r.getValueAtTime(a)!==0){const o=1/(60/this.bpm.getValueAtTime(a)/this.PPQ);n=r.getValueAtTime(a)/o}else n=0}const t=new Gain(n);return this.bpm.connect(t),t.connect(r._param),this._syncedSignals.push({initial:r.value,ratio:t,signal:r}),r.value=0,this}unsyncSignal(r){for(let n=this._syncedSignals.length-1;n>=0;n--){const t=this._syncedSignals[n];t.signal===r&&(t.ratio.dispose(),t.signal.value=t.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Emitter.mixin(Transport);onContextInit(s=>{s.transport=new Transport({context:s})});onContextClose(s=>{s.transport.dispose()});class Source extends ToneAudioNode{constructor(r){super(r),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:r.mute,volume:r.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=r.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}_clampToCurrentTime(r){return this._synced?r:Math.max(r,this.context.currentTime)}start(r,n,t){let a=isUndef(r)&&this._synced?this.context.transport.seconds:this.toSeconds(r);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")assert(GT(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,n,t);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const l=this._state.get(a);l&&(l.offset=this.toSeconds(defaultArg(n,0)),l.duration=t?this.toSeconds(t):void 0);const o=this.context.transport.schedule(c=>{this._start(c,n,t)},a);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(a,n,t);return this}stop(r){let n=isUndef(r)&&this._synced?this.context.transport.seconds:this.toSeconds(r);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||isDefined(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const t=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(t)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(r,n,t){return r=this.toSeconds(r),this._state.getValueAtTime(r)==="started"&&(this._state.cancel(r),this._restart(r,n,t)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(r,n)=>{if(n>0){const t=this._state.get(n);if(t&&t.state==="started"&&t.time!==n){const a=n-this.toSeconds(t.time);let l;t.duration&&(l=this.toSeconds(t.duration)-a),this._start(r,this.toSeconds(t.offset)+a,l)}}},this._syncedStop=r=>{const n=this.context.transport.getSecondsAtTime(Math.max(r-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(r)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(r=>this.context.transport.clear(r)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const r=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:r.playbackRate}),this.loop=r.loop,this.loopStart=r.loopStart,this.loopEnd=r.loopEnd,this._buffer=new ToneAudioBuffer(r.url,r.onload,r.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(r){this._fadeIn=r}get fadeOut(){return this._fadeOut}set fadeOut(r){this._fadeOut=r}get curve(){return this._curve}set curve(r){this._curve=r}start(r,n,t,a=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(r);this._startGain(l,a),this.loop?n=defaultArg(n,this.loopStart):n=defaultArg(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,i=this.toSeconds(this.loopStart),f=c-i;GTE(o,c)&&(o=(o-i)%f+i),EQ(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,o)),isDefined(t)){let c=this.toSeconds(t);c=Math.max(c,0),this.stop(l+c)}return this}_stopSource(r){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(r)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(r){this._source.loopStart=this.toSeconds(r)}get loopEnd(){return this._source.loopEnd}set loopEnd(r){this._source.loopEnd=this.toSeconds(r)}get buffer(){return this._buffer}set buffer(r){this._buffer.set(r)}get loop(){return this._source.loop}set loop(r){this._source.loop=r,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function generateWaveform(s,r){return __awaiter(this,void 0,void 0,function*(){const n=r/s.context.sampleRate,t=new OfflineContext(1,n,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/n,detune:0,context:t})).toDestination().start(0),(yield t.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){super(optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const r=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);connect(this._oscillator,this._gainNode),this.type=r.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:r.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:r.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(r){const n=this.toSeconds(r);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(r){this._oscillator.stop(r)}setPeriodicWave(r){return this._oscillator.setPeriodicWave(r),this}get type(){return this._oscillator.type}set type(r){this._oscillator.type=r}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){super(optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const r=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:r.detune}),readOnly(this,"detune"),this._partials=r.partials,this._partialCount=r.partialCount,this._type=r.type,r.partialCount&&r.type!=="custom"&&(this._type=this.baseType+r.partialCount.toString()),this.phase=r.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(r){const n=this.toSeconds(r),t=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=t,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(r){const n=this.toSeconds(r);this._oscillator&&this._oscillator.stop(n)}_restart(r){const n=this.toSeconds(r);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(n=>n.phase===this._phase&&deepEquals(n.partials,this._partials));{const r=Oscillator._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=r?r.partialCount:this._partialCount,r}}get type(){return this._type}set type(r){this._type=r;const n=["sine","square","sawtooth","triangle"].indexOf(r)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=r);else{const t=this._getCachedPeriodicWave();if(isDefined(t)){const{partials:a,wave:l}=t;this._wave=l,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,l]=this._getRealImaginary(r,this._phase),o=this.context.createPeriodicWave(a,l);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(r){this.partialCount&&this._type!=="custom"&&r!=="custom"?this.type=r+this.partialCount:this.type=r}get partialCount(){return this._partialCount}set partialCount(r){assertRange(r,0);let n=this._type;const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(t&&(n=t[1]),this._type!=="custom")r===0?this.type=n:this.type=n+r.toString();else{const a=new Float32Array(r);this._partials.forEach((l,o)=>a[o]=l),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(r,n){let a=2048;const l=new Float32Array(a),o=new Float32Array(a);let c=1;if(r==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[l,o]}else{const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(r);i?(c=parseInt(i[2],10)+1,this._partialCount=parseInt(i[2],10),r=i[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let i=1;i<a;++i){const f=2/(i*Math.PI);let y;switch(r){case"sine":y=i<=c?1:0,this._partials[i-1]=y;break;case"square":y=i&1?2*f:0,this._partials[i-1]=y;break;case"sawtooth":y=f*(i&1?1:-1),this._partials[i-1]=y;break;case"triangle":i&1?y=2*(f*f)*(i-1>>1&1?-1:1):y=0,this._partials[i-1]=y;break;case"custom":y=this._partials[i-1];break;default:throw new TypeError("Oscillator: invalid type: "+r)}y!==0?(l[i]=-y*Math.sin(n*i),o[i]=y*Math.cos(n*i)):(l[i]=0,o[i]=0)}return[l,o]}_inverseFFT(r,n,t){let a=0;const l=r.length;for(let o=0;o<l;o++)a+=r[o]*Math.cos(o*t)+n[o]*Math.sin(o*t);return a}getInitialValue(){const[r,n]=this._getRealImaginary(this._type,0);let t=0;const a=Math.PI*2,l=32;for(let o=0;o<l;o++)t=Math.max(this._inverseFFT(r,n,o/l*a),t);return clamp(-this._inverseFFT(r,n,this._phase)/t,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(r){this._partials=r,this._partialCount=this._partials.length,r.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(r){this._phase=r*Math.PI/180,this.type=this._type}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class SignalOperator extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"])))}connect(r,n=0,t=0){return connectSignal(this,r,n,t),this}}class WaveShaper extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const r=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);isArray(r.mapping)||r.mapping instanceof Float32Array?this.curve=Float32Array.from(r.mapping):isFunction(r.mapping)&&this.setMap(r.mapping,r.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(r,n=1024){const t=new Float32Array(n);for(let a=0,l=n;a<l;a++){const o=a/(l-1)*2-1;t[a]=r(o,a)}return this.curve=t,this}get curve(){return this._shaper.curve}set curve(r){this._shaper.curve=r}get oversample(){return this._shaper.oversample}set oversample(r){const n=["none","2x","4x"].some(t=>t.includes(r));assert(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=r}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:r=>(r+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){super(Object.assign(optionsFromArguments(Multiply.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const r=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Gain({context:this.context,minValue:r.minValue,maxValue:r.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){super(optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context});const r=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase,type:r.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:r.phase,type:r.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:r.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(r){this._modulator.start(r),this._carrier.start(r)}_stop(r){this._modulator.stop(r),this._carrier.stop(r)}_restart(r){this._modulator.restart(r),this._carrier.restart(r)}get type(){return this._carrier.type}set type(r){this._carrier.type=r}get baseType(){return this._carrier.baseType}set baseType(r){this._carrier.baseType=r}get partialCount(){return this._carrier.partialCount}set partialCount(r){this._carrier.partialCount=r}get modulationType(){return this._modulator.type}set modulationType(r){this._modulator.type=r}get phase(){return this._carrier.phase}set phase(r){this._carrier.phase=r,this._modulator.phase=r}get partials(){return this._carrier.partials}set partials(r){this._carrier.partials=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){super(optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0});const r=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:r.detune,frequency:0,onstop:()=>this.onstop(this),phase:r.phase,type:r.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),this._modulator=new Oscillator({context:this.context,phase:r.phase,type:r.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:r.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:r.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(r){this._modulator.start(r),this._carrier.start(r)}_stop(r){this._modulator.stop(r),this._carrier.stop(r)}_restart(r){return this._modulator.restart(r),this._carrier.restart(r),this}get type(){return this._carrier.type}set type(r){this._carrier.type=r}get baseType(){return this._carrier.baseType}set baseType(r){this._carrier.baseType=r}get partialCount(){return this._carrier.partialCount}set partialCount(r){this._carrier.partialCount=r}get modulationType(){return this._modulator.type}set modulationType(r){this._modulator.type=r}get phase(){return this._carrier.phase}set phase(r){this._carrier.phase=r,this._modulator.phase=r}get partials(){return this._carrier.partials}set partials(r){this._carrier.partials=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){super(optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:n=>n<=0?-1:1});const r=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);this.width=new Signal({context:this.context,units:"audioRange",value:r.width}),this._triangle=new Oscillator({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(r){r=this.toSeconds(r),this._triangle.start(r),this._widthGate.gain.setValueAtTime(1,r)}_stop(r){r=this.toSeconds(r),this._triangle.stop(r),this._widthGate.gain.cancelScheduledValues(r),this._widthGate.gain.setValueAtTime(0,r)}_restart(r){this._triangle.restart(r),this._widthGate.gain.cancelScheduledValues(r),this._widthGate.gain.setValueAtTime(1,r)}get phase(){return this._triangle.phase}set phase(r){this._triangle.phase=r}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(r){this._triangle.type=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){super(optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const r=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:r.detune}),this._spread=r.spread,this._type=r.type,this._phase=r.phase,this._partials=r.partials,this._partialCount=r.partialCount,this.count=r.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(r){r=this.toSeconds(r),this._forEach(n=>n.start(r))}_stop(r){r=this.toSeconds(r),this._forEach(n=>n.stop(r))}_restart(r){this._forEach(n=>n.restart(r))}_forEach(r){for(let n=0;n<this._oscillators.length;n++)r(this._oscillators[n],n)}get type(){return this._type}set type(r){this._type=r,this._forEach(n=>n.type=r)}get spread(){return this._spread}set spread(r){if(this._spread=r,this._oscillators.length>1){const n=-r/2,t=r/(this._oscillators.length-1);this._forEach((a,l)=>a.detune.value=n+t*l)}}get count(){return this._oscillators.length}set count(r){if(assertRange(r,1),this._oscillators.length!==r){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<r;n++){const t=new Oscillator({context:this.context,volume:-6-r*1.1,type:this._type,phase:this._phase+n/r*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):noOp});this.type==="custom"&&(t.partials=this._partials),this.frequency.connect(t.frequency),this.detune.connect(t.detune),t.detune.overridden=!1,t.connect(this.output),this._oscillators[n]=t}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(r){this._phase=r,this._forEach((n,t)=>n.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(r){this._forEach(n=>n.baseType=r),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(r){this._partials=r,this._partialCount=this._partials.length,r.length&&(this._type="custom",this._forEach(n=>n.partials=r))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(r){this._partialCount=r,this._forEach(n=>n.partialCount=r),this._type=this._oscillators[0].type}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(r=>r.dispose()),this}}class PWMOscillator extends Source{constructor(){super(optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2});const r=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new PulseOscillator({context:this.context,frequency:r.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(r){r=this.toSeconds(r),this._modulator.start(r),this._pulse.start(r)}_stop(r){r=this.toSeconds(r),this._modulator.stop(r),this._pulse.stop(r)}_restart(r){this._modulator.restart(r),this._pulse.restart(r)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(r){this._modulator.phase=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){super(optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const r=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:r.detune}),readOnly(this,["frequency","detune"]),this.set(r)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(r){this._oscillator.start(r)}_stop(r){this._oscillator.stop(r)}_restart(r){return this._oscillator.restart(r),this}get type(){let r="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(r=this._sourceType),r+this._oscillator.type}set type(r){r.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(2)):r.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(2)):r.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(3)):r==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):r==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=r)}get partials(){return this._oscillator.partials}set partials(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=r)}get partialCount(){return this._oscillator.partialCount}set partialCount(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=r)}set(r){return Reflect.has(r,"type")&&r.type&&(this.type=r.type),super.set(r),this}_createNewOscillator(r){if(r!==this._sourceType){this._sourceType=r;const n=OmniOscillatorSourceMap[r],t=this.now();if(this._oscillator){const a=this._oscillator;a.stop(t),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(t)}}get phase(){return this._oscillator.phase}set phase(r){this._oscillator.phase=r}get sourceType(){return this._sourceType}set sourceType(r){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),r==="fm"?this.type="fm"+n:r==="am"?this.type="am"+n:r==="fat"?this.type="fat"+n:r==="oscillator"?this.type=n:r==="pulse"?this.type="pulse":r==="pwm"&&(this.type="pwm")}_getOscType(r,n){return r instanceof OmniOscillatorSourceMap[n]}get baseType(){return this._oscillator.baseType}set baseType(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&r!=="pulse"&&r!=="pwm"&&(this._oscillator.baseType=r)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(r){this._getOscType(this._oscillator,"fat")&&isNumber(r)&&(this._oscillator.count=r)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(r){this._getOscType(this._oscillator,"fat")&&isNumber(r)&&(this._oscillator.spread=r)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(r){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString(r)&&(this._oscillator.modulationType=r)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function range(s,r=1/0){const n=new WeakMap;return function(t,a){Reflect.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(l){assertRange(l,s,r),n.set(this,l)}})}}function timeRange(s,r=1/0){const n=new WeakMap;return function(t,a){Reflect.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(l){assertRange(this.toSeconds(l),s,r),n.set(this,l)}})}}class Player extends Source{constructor(){super(optionsFromArguments(Player.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const r=optionsFromArguments(Player.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,r.onload),onerror:r.onerror,reverse:r.reverse,url:r.url}),this.autostart=r.autostart,this._loop=r.loop,this._loopStart=r.loopStart,this._loopEnd=r.loopEnd,this._playbackRate=r.playbackRate,this.fadeIn=r.fadeIn,this.fadeOut=r.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(r){return __awaiter(this,void 0,void 0,function*(){return yield this._buffer.load(r),this._onload(),this})}_onload(r=noOp){r(),this.autostart&&this.start()}_onSourceEnd(r){this.onstop(this),this._activeSources.delete(r),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(r,n,t){return super.start(r,n,t),this}_start(r,n,t){this._loop?n=defaultArg(n,this._loopStart):n=defaultArg(n,0);const a=this.toSeconds(n),l=t;t=defaultArg(t,Math.max(this._buffer.duration-a,0));let o=this.toSeconds(t);o=o/this._playbackRate,r=this.toSeconds(r);const c=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(r+o),this._state.setStateAtTime("stopped",r+o,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&isUndef(l)?c.start(r,a):c.start(r,a,o-this.toSeconds(this.fadeOut))}_stop(r){const n=this.toSeconds(r);this._activeSources.forEach(t=>t.stop(n))}restart(r,n,t){return super.restart(r,n,t),this}_restart(r,n,t){this._stop(r),this._start(r,n,t)}seek(r,n){const t=this.toSeconds(n);if(this._state.getValueAtTime(t)==="started"){const a=this.toSeconds(r);this._stop(t),this._start(t,a)}return this}setLoopPoints(r,n){return this.loopStart=r,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(r){this._loopStart=r,this.buffer.loaded&&assertRange(this.toSeconds(r),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=r})}get loopEnd(){return this._loopEnd}set loopEnd(r){this._loopEnd=r,this.buffer.loaded&&assertRange(this.toSeconds(r),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=r})}get buffer(){return this._buffer}set buffer(r){this._buffer.set(r)}get loop(){return this._loop}set loop(r){if(this._loop!==r&&(this._loop=r,this._activeSources.forEach(n=>{n.loop=r}),r)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(r){this._playbackRate=r;const n=this.now(),t=this._state.getNextState("stopped",n);t&&t.implicitEnd&&(this._state.cancel(t.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(r,n)})}get reverse(){return this._buffer.reverse}set reverse(r){this._buffer.reverse=r}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(r=>r.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}__decorate([timeRange(0)],Player.prototype,"fadeIn",void 0);__decorate([timeRange(0)],Player.prototype,"fadeOut",void 0);class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:r=>Math.abs(r)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){super(optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const r=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=r.attack,this.decay=r.decay,this.sustain=r.sustain,this.release=r.release,this.attackCurve=r.attackCurve,this.releaseCurve=r.releaseCurve,this.decayCurve=r.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(r,n){if(isString(r))return r;{let t;for(t in EnvelopeCurves)if(EnvelopeCurves[t][n]===r)return t;return r}}_setCurve(r,n,t){if(isString(t)&&Reflect.has(EnvelopeCurves,t)){const a=EnvelopeCurves[t];isObject(a)?r!=="_decayCurve"&&(this[r]=a[n]):this[r]=a}else if(isArray(t)&&r!=="_decayCurve")this[r]=t;else throw new Error("Envelope: invalid curve: "+t)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(r){this._setCurve("_attackCurve","In",r)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(r){this._setCurve("_releaseCurve","Out",r)}get decayCurve(){return this._decayCurve}set decayCurve(r){assert(["linear","exponential"].some(n=>n===r),`Invalid envelope curve: ${r}`),this._decayCurve=r}triggerAttack(r,n=1){this.log("triggerAttack",r,n),r=this.toSeconds(r);let a=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),o=this.getValueAtTime(r);if(o>0){const c=1/a;a=(1-o)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(r),this._sig.setValueAtTime(n,r);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,a,r);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,a,r);else{this._sig.cancelAndHoldAtTime(r);let c=this._attackCurve;for(let i=1;i<c.length;i++)if(c[i-1]<=o&&o<=c[i]){c=this._attackCurve.slice(i),c[0]=o;break}this._sig.setValueCurveAtTime(c,r,a,n)}if(l&&this.sustain<1){const c=n*this.sustain,i=r+a;this.log("decay",i),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,l+i):this._sig.exponentialApproachValueAtTime(c,i,l)}return this}triggerRelease(r){this.log("triggerRelease",r),r=this.toSeconds(r);const n=this.getValueAtTime(r);if(n>0){const t=this.toSeconds(this.release);t<this.sampleTime?this._sig.setValueAtTime(0,r):this._releaseCurve==="linear"?this._sig.linearRampTo(0,t,r):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,t,r):(assert(isArray(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(r),this._sig.setValueCurveAtTime(this._releaseCurve,r,t,n))}return this}getValueAtTime(r){return this._sig.getValueAtTime(r)}triggerAttackRelease(r,n,t=1){return n=this.toSeconds(n),this.triggerAttack(n,t),this.triggerRelease(n+this.toSeconds(r)),this}cancel(r){return this._sig.cancelScheduledValues(this.toSeconds(r)),this}connect(r,n=0,t=0){return connectSignal(this,r,n,t),this}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){const n=r/this.context.sampleRate,t=new OfflineContext(1,n,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=a+this.toSeconds(this.release),o=l*.1,c=l+o,i=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/c,decay:n*this.toSeconds(this.decay)/c,release:n*this.toSeconds(this.release)/c,context:t}));return i._sig.toDestination(),i.triggerAttackRelease(n*(a+o)/c,0),(yield t.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let r,n;const t=[];for(r=0;r<128;r++)t[r]=Math.sin(r/(128-1)*(Math.PI/2));const a=[],l=6.4;for(r=0;r<128-1;r++){n=r/(128-1);const u=Math.sin(n*(Math.PI*2)*l-Math.PI/2)+1;a[r]=u/10+n*.83}a[128-1]=1;const o=[],c=5;for(r=0;r<128;r++)o[r]=Math.ceil(r/(128-1)*c)/c;const i=[];for(r=0;r<128;r++)n=r/(128-1),i[r]=.5*(1-Math.cos(Math.PI*n));const f=[];for(r=0;r<128;r++){n=r/(128-1);const u=Math.pow(n,3)*4+.2,m=Math.cos(u*Math.PI*2*n);f[r]=Math.abs(m*(1-n))}function y(u){const m=new Array(u.length);for(let p=0;p<u.length;p++)m[p]=1-u[p];return m}function _(u){return u.slice(0).reverse()}return{bounce:{In:y(f),Out:f},cosine:{In:t,Out:_(t)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:y(a)},sine:{In:i,Out:y(i)},step:{In:o,Out:y(o)}}})();class Instrument extends ToneAudioNode{constructor(){super(optionsFromArguments(Instrument.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const r=optionsFromArguments(Instrument.getDefaults(),arguments);this._volume=this.output=new Volume({context:this.context,volume:r.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let r=!1;return this._synced||(this._synced=!0,r=!0),r}_syncMethod(r,n){const t=this["_original_"+r]=this[r];this[r]=(...a)=>{const l=a[n],o=this.context.transport.schedule(c=>{a[n]=c,t.apply(this,a)},l);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(r=>this.context.transport.clear(r)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(r,n,t,a){const l=this.toSeconds(t),o=this.toSeconds(n);return this.triggerAttack(r,l,a),this.triggerRelease(l+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Monophonic extends Instrument{constructor(){super(optionsFromArguments(Monophonic.getDefaults(),arguments));const r=optionsFromArguments(Monophonic.getDefaults(),arguments);this.portamento=r.portamento,this.onsilence=r.onsilence}static getDefaults(){return Object.assign(Instrument.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(r,n,t=1){this.log("triggerAttack",r,n,t);const a=this.toSeconds(n);return this._triggerEnvelopeAttack(a,t),this.setNote(r,a),this}triggerRelease(r){this.log("triggerRelease",r);const n=this.toSeconds(r);return this._triggerEnvelopeRelease(n),this}setNote(r,n){const t=this.toSeconds(n),a=r instanceof FrequencyClass?r.toFrequency():r;if(this.portamento>0&&this.getLevelAtTime(t)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,l,t)}else this.frequency.setValueAtTime(a,t);return this}}__decorate([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}let Synth$1=class Rn extends Monophonic{constructor(){super(optionsFromArguments(Rn.getDefaults(),arguments)),this.name="Synth";const r=optionsFromArguments(Rn.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:r.detune,onstop:()=>this.onsilence(this)},r.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},r.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(r,n){if(this.envelope.triggerAttack(r,n),this.oscillator.start(r),this.envelope.sustain===0){const t=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(r+t+a)}}_triggerEnvelopeRelease(r){this.envelope.triggerRelease(r),this.oscillator.stop(r+this.toSeconds(this.envelope.release))}getLevelAtTime(r){return r=this.toSeconds(r),this.envelope.getValueAtTime(r)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};class MembraneSynth extends Synth$1{constructor(){super(optionsFromArguments(MembraneSynth.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const r=optionsFromArguments(MembraneSynth.getDefaults(),arguments);this.pitchDecay=r.pitchDecay,this.octaves=r.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth$1.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(r,n){const t=this.toSeconds(n),a=this.toFrequency(r instanceof FrequencyClass?r.toFrequency():r),l=a*this.octaves;return this.oscillator.frequency.setValueAtTime(l,t),this.oscillator.frequency.exponentialRampToValueAtTime(a,t+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);const workletContext=new Set;function addToWorklet(s){workletContext.add(s)}function registerProcessor(s,r){const n=`registerProcessor("${s}", ${r})`;workletContext.add(n)}function getWorkletGlobalScope(){return Array.from(workletContext).join(`
`)}class ToneAudioWorklet extends ToneAudioNode{constructor(r){super(r),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=noOp;const n=URL.createObjectURL(new Blob([getWorkletGlobalScope()],{type:"text/javascript"})),t=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(n,t).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(t,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);let Sampler$1=class Dn extends Instrument{constructor(){super(optionsFromArguments(Dn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const r=optionsFromArguments(Dn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(r.urls).forEach(t=>{const a=parseInt(t,10);if(assert(isNote(t)||isNumber(a)&&isFinite(a),`url key is neither a note or midi pitch: ${t}`),isNote(t)){const l=new FrequencyClass(this.context,t).toMidi();n[l]=r.urls[t]}else isNumber(a)&&isFinite(a)&&(n[a]=r.urls[a])}),this._buffers=new ToneAudioBuffers({urls:n,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),this.attack=r.attack,this.release=r.release,this.curve=r.curve,this._buffers.loaded&&Promise.resolve().then(r.onload)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(r){let t=0;for(;t<96;){if(this._buffers.has(r+t))return-t;if(this._buffers.has(r-t))return t;t++}throw new Error(`No available buffers for note: ${r}`)}triggerAttack(r,n,t=1){return this.log("triggerAttack",r,n,t),Array.isArray(r)||(r=[r]),r.forEach(a=>{const l=ftomf(new FrequencyClass(this.context,a).toFrequency()),o=Math.round(l),c=l-o,i=this._findClosest(o),f=o-i,y=this._buffers.get(f),_=intervalToFrequencyRatio(i+c),u=new ToneBufferSource({url:y,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);u.start(n,0,y.duration/_,t),isArray(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const m=this._activeSources.get(o),p=m.indexOf(u);p!==-1&&m.splice(p,1)}}}),this}triggerRelease(r,n){return this.log("triggerRelease",r,n),Array.isArray(r)||(r=[r]),r.forEach(t=>{const a=new FrequencyClass(this.context,t).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const l=this._activeSources.get(a);n=this.toSeconds(n),l.forEach(o=>{o.stop(n)}),this._activeSources.set(a,[])}}),this}releaseAll(r){const n=this.toSeconds(r);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(r,n,t,a=1){const l=this.toSeconds(t);return this.triggerAttack(r,l,a),isArray(n)?(assert(isArray(r),"notes must be an array when duration is array"),r.forEach((o,c)=>{const i=n[Math.min(c,n.length-1)];this.triggerRelease(o,l+this.toSeconds(i))})):this.triggerRelease(r,l+this.toSeconds(n)),this}add(r,n,t){if(assert(isNote(r)||isFinite(r),`note must be a pitch or midi: ${r}`),isNote(r)){const a=new FrequencyClass(this.context,r).toMidi();this._buffers.add(a,n,t)}else this._buffers.add(r,n,t);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(r=>{r.forEach(n=>n.dispose())}),this._activeSources.clear(),this}};__decorate([timeRange(0)],Sampler$1.prototype,"attack",void 0);__decorate([timeRange(0)],Sampler$1.prototype,"release",void 0);class CrossFade extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b];const r=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);this.fade=new Signal({context:this.context,units:"normalRange",value:r.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(r){super(r),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(r.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(r){return this._internalChannels.push(r),this.effectSend.chain(r,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Panner extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Panner.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const r=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);this.pan=new Param({context:this.context,param:this._panner.pan,value:r.pan,minValue:-1,maxValue:1}),this._panner.channelCount=r.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class BitCrusher extends Effect{constructor(){super(optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const r=optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new BitCrusherWorklet({context:this.context,bits:r.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class BitCrusherWorklet extends ToneAudioWorklet{constructor(){super(optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments)),this.name="BitCrusherWorklet";const r=optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.bits=new Param({context:this.context,value:r.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return workletName}onReady(r){connectSeries(this.input,r,this.output);const n=r.parameters.get("bits");this.bits.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Solo extends ToneAudioNode{constructor(){super(optionsFromArguments(Solo.getDefaults(),arguments,["solo"])),this.name="Solo";const r=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=r.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(r){r?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){super(optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const r=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Panner({context:this.context,pan:r.pan,channelCount:r.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:r.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=r.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}let Channel$1=class Vr extends ToneAudioNode{constructor(){super(optionsFromArguments(Vr.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const r=optionsFromArguments(Vr.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Solo({solo:r.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:r.pan,volume:r.volume,mute:r.mute,channelCount:r.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(r){this._solo.solo=r}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(r){this._panVol.mute=r}_getBus(r){return Vr.buses.has(r)||Vr.buses.set(r,new Gain({context:this.context})),Vr.buses.get(r)}send(r,n=0){const t=this._getBus(r),a=new Gain({context:this.context,units:"decibels",gain:n});return this.connect(a),a.connect(t),a}receive(r){return this._getBus(r).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};Channel$1.buses=new Map;class Listener extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}onContextInit(s=>{s.listener=new Listener({context:s})});onContextClose(s=>{s.listener.dispose()});class Compressor extends ToneAudioNode{constructor(){super(optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const r=optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:r.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:r.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:r.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:r.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:r.ratio}),readOnly(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const r=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Compressor({context:this.context,ratio:20,attack:.003,release:.01,threshold:r.threshold}),this.threshold=this._compressor.threshold,readOnly(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}function immediate(){return getContext().immediate()}getContext().transport;getContext().destination;getContext().destination;getContext().listener;getContext().draw;const context=getContext();var rnbo_webaudio={exports:{}};/*!
 * 
 * Copyright (c) 2022 Cycling '74
 *
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * v1.2.5
 *
 */(function(module,exports){var factory;factory=function(){return(()=>{var __webpack_modules__={133:(module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__(852).Float32Buffer,__webpack_require__(852).Float64Buffer,__webpack_require__(852).Float32MultiBuffer,__webpack_require__(852).Float64MultiBuffer,__webpack_require__(852).IntBuffer,__webpack_require__(852).UInt8Buffer,__webpack_require__(126).ExternalLoaderFactory;let Xoshiro=__webpack_require__(925);var ParameterTypeNumber=0,ParameterTypeBang=1,ParameterTypeList=2,ParameterTypeSignal=3,ParameterTypeCount=4,IOTypeInput=0,IOTypeOutput=1,IOTypeUndefined=2;function nextpoweroftwo(s){return s===0?1:(s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,1+(s|=s>>16))}function TAG(s){let r=0;for(let n=0;n<s.length;n++)r=s.charCodeAt(n)+(r<<6)+(r<<16)-r;return 0|r}function _evalSrc(src){var rnboObj;return eval(src),rnboObj}Xoshiro.reset,Xoshiro.next,module.exports={deserializeSrc:function(s){return _evalSrc(s)},deserializeJSON:function(s){var r=s;return typeof r=="string"&&(r={src:s}),_evalSrc(r.src)},extractOptionsFromJSON:function(s){var r=s;return typeof r=="string"&&(r=JSON.parse(s)),r.options?r.options:{}},evalFunction(functionAsString){var tmpFunction,functionAsString="tmpFunction = "+functionAsString;return eval(functionAsString),tmpFunction},nextpoweroftwo,ParameterTypeNumber,ParameterTypeBang,ParameterTypeList,ParameterTypeSignal,ParameterTypeCount,IOTypeInput,IOTypeOutput,IOTypeUndefined:IOTypeUndefined.length,TAG}},852:s=>{function r(){let q=this.dataRef.getSizeInBytes()/this.BASEARRAYVIEW.BYTES_PER_ELEMENT,M=this.getChannels();return M?q/M:0}function n(q,M){let L=q*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*M;this.requestedChannels=M,this.dataRef.requestSizeInBytes(L,!1)}function t(q,M){return this[this.getChannels()*Math.floor(M)+q]}function a(q,M){const L=this.getChannels();return q<0||q>=L||M<0||M>=this.getSize()?0:this[L*Math.floor(M)+q]}function l(q,M,L){this[this.getChannels()*Math.floor(M)+q]=L}function o(q,M,L){const H=this.getChannels();q<0||q>=H||M<0||M>=this.getSize()||(this[H*Math.floor(M)+q]=L)}function c(){return this.dataRef.channels}function i(){return this.dataRef.sampleRate}function f(q){this.dataRef.sampleRate=q}function y(){this.dataRef.clear()}function _(q){if(q!==this.dataRef.channels){let M=this.getSize();return this.clear(),this.dataRef.channels=q,this.setSize(M)}return this}function u(){if(this.isAudioBuffer&&this.requestedChannels!==this.getChannels()&&this.requestedChannels!==0&&(this.getChannels()>0&&this.setZero(),this.dataRef.channels=this.requestedChannels,this.requestedChannels=0),this.dataRef.bytesToAllocate>0&&(this.dataRef.bytesToAllocate!==this.dataRef.getSizeInBytes()||!this.dataRef.isInternallyAllocated)){let q;if(this.dataRef.isInternallyAllocated){let L=Math.min(this.dataRef.arrayBuffer.byteLength,this.dataRef.bytesToAllocate);L/=this.BASEARRAYVIEW.BYTES_PER_ELEMENT,q=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer,0,L)}this.dataRef.arrayBuffer=new ArrayBuffer(this.dataRef.bytesToAllocate),this.dataRef.isInternallyAllocated=!0;let M=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer);return q?M.set(q):this.dataRef.wantsFillFlag=!0,S(M,this.dataRef,this.BASEARRAYVIEW),this.isAudioBuffer&&k(M),M}return this}function m(q){let M=this.getChannels();return this.requestedChannels=M,this.dataRef.requestSizeInBytes(q*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*M,!0),this.allocateIfNeeded()}function p(){this.fill&&this.fill(0)}function g(){return this.touched}function x(q){this.touched=q}function b(q){this.dataRef.setWantsFill(q)}function E(){return this.dataRef.getIndex()}function S(q,M,L){q.dataRef=M,q.BASEARRAYVIEW=L,q.getSize=r,q.requestSize=n,q.setSize=m,q.allocateIfNeeded=u,q.setZero=p,q.clear=y,q.getChannels=c,q.getSampleRate=i,q.setWantsFill=b,q.getIndex=E,M.setZero=function(){q.setZero()},q.touched=!1,q.getTouched=g,q.setTouched=x}function k(q){q.getSample=t,q.getSampleSafe=a,q.setSample=l,q.setSampleSafe=o,q.setChannels=_,q.setSampleRate=f,q.isAudioBuffer=!0,q.requestedChannels=0}let T=function(q,M){let L;return L=q.arrayBuffer?new M(q.arrayBuffer):{},S(L,q,M),L};(T.prototype=Object.create(null)).constructor=T;let j=function(q,M){let L=T.call(this,q,M);return k(L),L};(j.prototype=Object.create(T)).constructor=j;let A=function(q){return j.call(this,q,Float32Array)};(A.prototype=Object.create(j.prototype)).constructor=A;let C=function(q){return j.call(this,q,Float64Array)};(C.prototype=Object.create(j.prototype)).constructor=C;let N=function(q,M){let L=new M(q.dataRefs[q.current]);return L.multiRef=q,L.setCurrent=function(H){this.multiRef.setCurrent(Math.round(H))},L.getIndex=function(){return this.multiRef.getIndex()},L};N.prototype=Object.create(null),N.constructor=N;let V=function(q){return N.call(this,q,A)};(V.prototype=Object.create(N.prototype)).constructor=V;let I=function(q){return N.call(this,q,C)};(I.prototype=Object.create(N.prototype)).constructor=I;let G=function(q){return T.call(this,q,Int32Array)};(G.prototype=Object.create(T.prototype)).constructor=G;let R=function(q){return T.call(this,q,Uint8Array)};(R.prototype=Object.create(T.prototype)).constructor=R,s.exports={Float32Buffer:A,Float64Buffer:C,Float32MultiBuffer:V,Float64MultiBuffer:I,IntBuffer:G,UInt8Buffer:R}},126:s=>{var r=function(){};(r.prototype=Object.create(null)).constructor=r,r.prototype.setEngineAndPatcher=function(){},r.prototype.initialize=function(){},r.prototype.getNumParameters=function(){return 0},r.prototype.setParameterValue=function(){},r.prototype.prepareToProcess=function(){},r.prototype.process=function(){},s.exports={ExternalLoaderFactory:function(){return console.log("WARNING: Externals are not yet supported in Javascript"),new r}}},925:s=>{function r(n,t,a,l){a[l]=n[t]+0x9e3779b97f4a7c15n,a[l]=0xbf58476d1ce4e5b9n*(a[l]^a[l]>>30n),a[l]=0x94d049bb133111ebn*(a[l]^a[l]>>27n),a[l]=a[l]^a[l]>>31n}s.exports={reset:function(n,t){let a=new BigUint64Array(1);a[0]=BigInt(Math.trunc(1e6*n)),r(a,0,t,0),r(t,0,t,1),r(t,1,t,2),r(t,2,t,3)},next:function(n){let t=new BigUint64Array(1),a=new BigUint64Array(1);return a[0]=n[0]+n[3],t[0]=n[1]<<17n,n[2]^=n[0],n[3]^=n[1],n[1]^=n[2],n[0]^=n[3],n[2]^=t[0],n[3]=n[3]<<45n|n[3]>>19n,a[0]=a[0]>>11n,2220446049250313e-31*Number(a[0])-1}}},766:(s,r)=>{r.byteLength=function(y){var _=i(y),u=_[0],m=_[1];return 3*(u+m)/4-m},r.toByteArray=function(y){var _,u,m=i(y),p=m[0],g=m[1],x=new a(function(S,k,T){return 3*(k+T)/4-T}(0,p,g)),b=0,E=g>0?p-4:p;for(u=0;u<E;u+=4)_=t[y.charCodeAt(u)]<<18|t[y.charCodeAt(u+1)]<<12|t[y.charCodeAt(u+2)]<<6|t[y.charCodeAt(u+3)],x[b++]=_>>16&255,x[b++]=_>>8&255,x[b++]=255&_;return g===2&&(_=t[y.charCodeAt(u)]<<2|t[y.charCodeAt(u+1)]>>4,x[b++]=255&_),g===1&&(_=t[y.charCodeAt(u)]<<10|t[y.charCodeAt(u+1)]<<4|t[y.charCodeAt(u+2)]>>2,x[b++]=_>>8&255,x[b++]=255&_),x},r.fromByteArray=function(y){for(var _,u=y.length,m=u%3,p=[],g=16383,x=0,b=u-m;x<b;x+=g)p.push(f(y,x,x+g>b?b:x+g));return m===1?(_=y[u-1],p.push(n[_>>2]+n[_<<4&63]+"==")):m===2&&(_=(y[u-2]<<8)+y[u-1],p.push(n[_>>10]+n[_>>4&63]+n[_<<2&63]+"=")),p.join("")};for(var n=[],t=[],a=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=l.length;o<c;++o)n[o]=l[o],t[l.charCodeAt(o)]=o;function i(y){var _=y.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=y.indexOf("=");return u===-1&&(u=_),[u,u===_?0:4-u%4]}function f(y,_,u){for(var m,p,g=[],x=_;x<u;x+=3)m=(y[x]<<16&16711680)+(y[x+1]<<8&65280)+(255&y[x+2]),g.push(n[(p=m)>>18&63]+n[p>>12&63]+n[p>>6&63]+n[63&p]);return g.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63},834:(s,r,n)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const t=n(766),a=n(181),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=i,r.SlowBuffer=function($){return+$!=$&&($=0),i.alloc(+$)},r.INSPECT_MAX_BYTES=50;const o=2147483647;function c($){if($>o)throw new RangeError('The value "'+$+'" is invalid for option "size"');const te=new Uint8Array($);return Object.setPrototypeOf(te,i.prototype),te}function i($,te,ne){if(typeof $=="number"){if(typeof te=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _($)}return f($,te,ne)}function f($,te,ne){if(typeof $=="string")return function(je,Re){if(typeof Re=="string"&&Re!==""||(Re="utf8"),!i.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);const Ge=0|g(je,Re);let Xe=c(Ge);const Ke=Xe.write(je,Re);return Ke!==Ge&&(Xe=Xe.slice(0,Ke)),Xe}($,te);if(ArrayBuffer.isView($))return function(je){if(ye(je,Uint8Array)){const Re=new Uint8Array(je);return m(Re.buffer,Re.byteOffset,Re.byteLength)}return u(je)}($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(ye($,ArrayBuffer)||$&&ye($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye($,SharedArrayBuffer)||$&&ye($.buffer,SharedArrayBuffer)))return m($,te,ne);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const be=$.valueOf&&$.valueOf();if(be!=null&&be!==$)return i.from(be,te,ne);const ve=function(je){if(i.isBuffer(je)){const Re=0|p(je.length),Ge=c(Re);return Ge.length===0||je.copy(Ge,0,0,Re),Ge}return je.length!==void 0?typeof je.length!="number"||ue(je.length)?c(0):u(je):je.type==="Buffer"&&Array.isArray(je.data)?u(je.data):void 0}($);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return i.from($[Symbol.toPrimitive]("string"),te,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function y($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function _($){return y($),c($<0?0:0|p($))}function u($){const te=$.length<0?0:0|p($.length),ne=c(te);for(let be=0;be<te;be+=1)ne[be]=255&$[be];return ne}function m($,te,ne){if(te<0||$.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<te+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let be;return be=te===void 0&&ne===void 0?new Uint8Array($):ne===void 0?new Uint8Array($,te):new Uint8Array($,te,ne),Object.setPrototypeOf(be,i.prototype),be}function p($){if($>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|$}function g($,te){if(i.isBuffer($))return $.length;if(ArrayBuffer.isView($)||ye($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const ne=$.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&ne===0)return 0;let ve=!1;for(;;)switch(te){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return xe($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return he($).length;default:if(ve)return be?-1:xe($).length;te=(""+te).toLowerCase(),ve=!0}}function x($,te,ne){let be=!1;if((te===void 0||te<0)&&(te=0),te>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(te>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return q(this,te,ne);case"utf8":case"utf-8":return V(this,te,ne);case"ascii":return G(this,te,ne);case"latin1":case"binary":return R(this,te,ne);case"base64":return N(this,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,te,ne);default:if(be)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),be=!0}}function b($,te,ne){const be=$[te];$[te]=$[ne],$[ne]=be}function E($,te,ne,be,ve){if($.length===0)return-1;if(typeof ne=="string"?(be=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),ue(ne=+ne)&&(ne=ve?0:$.length-1),ne<0&&(ne=$.length+ne),ne>=$.length){if(ve)return-1;ne=$.length-1}else if(ne<0){if(!ve)return-1;ne=0}if(typeof te=="string"&&(te=i.from(te,be)),i.isBuffer(te))return te.length===0?-1:S($,te,ne,be,ve);if(typeof te=="number")return te&=255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call($,te,ne):Uint8Array.prototype.lastIndexOf.call($,te,ne):S($,[te],ne,be,ve);throw new TypeError("val must be string, number or Buffer")}function S($,te,ne,be,ve){let je,Re=1,Ge=$.length,Xe=te.length;if(be!==void 0&&((be=String(be).toLowerCase())==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if($.length<2||te.length<2)return-1;Re=2,Ge/=2,Xe/=2,ne/=2}function Ke(Pe,We){return Re===1?Pe[We]:Pe.readUInt16BE(We*Re)}if(ve){let Pe=-1;for(je=ne;je<Ge;je++)if(Ke($,je)===Ke(te,Pe===-1?0:je-Pe)){if(Pe===-1&&(Pe=je),je-Pe+1===Xe)return Pe*Re}else Pe!==-1&&(je-=je-Pe),Pe=-1}else for(ne+Xe>Ge&&(ne=Ge-Xe),je=ne;je>=0;je--){let Pe=!0;for(let We=0;We<Xe;We++)if(Ke($,je+We)!==Ke(te,We)){Pe=!1;break}if(Pe)return je}return-1}function k($,te,ne,be){ne=Number(ne)||0;const ve=$.length-ne;be?(be=Number(be))>ve&&(be=ve):be=ve;const je=te.length;let Re;for(be>je/2&&(be=je/2),Re=0;Re<be;++Re){const Ge=parseInt(te.substr(2*Re,2),16);if(ue(Ge))return Re;$[ne+Re]=Ge}return Re}function T($,te,ne,be){return _e(xe(te,$.length-ne),$,ne,be)}function j($,te,ne,be){return _e(function(ve){const je=[];for(let Re=0;Re<ve.length;++Re)je.push(255&ve.charCodeAt(Re));return je}(te),$,ne,be)}function A($,te,ne,be){return _e(he(te),$,ne,be)}function C($,te,ne,be){return _e(function(ve,je){let Re,Ge,Xe;const Ke=[];for(let Pe=0;Pe<ve.length&&!((je-=2)<0);++Pe)Re=ve.charCodeAt(Pe),Ge=Re>>8,Xe=Re%256,Ke.push(Xe),Ke.push(Ge);return Ke}(te,$.length-ne),$,ne,be)}function N($,te,ne){return te===0&&ne===$.length?t.fromByteArray($):t.fromByteArray($.slice(te,ne))}function V($,te,ne){ne=Math.min($.length,ne);const be=[];let ve=te;for(;ve<ne;){const je=$[ve];let Re=null,Ge=je>239?4:je>223?3:je>191?2:1;if(ve+Ge<=ne){let Xe,Ke,Pe,We;switch(Ge){case 1:je<128&&(Re=je);break;case 2:Xe=$[ve+1],(192&Xe)==128&&(We=(31&je)<<6|63&Xe,We>127&&(Re=We));break;case 3:Xe=$[ve+1],Ke=$[ve+2],(192&Xe)==128&&(192&Ke)==128&&(We=(15&je)<<12|(63&Xe)<<6|63&Ke,We>2047&&(We<55296||We>57343)&&(Re=We));break;case 4:Xe=$[ve+1],Ke=$[ve+2],Pe=$[ve+3],(192&Xe)==128&&(192&Ke)==128&&(192&Pe)==128&&(We=(15&je)<<18|(63&Xe)<<12|(63&Ke)<<6|63&Pe,We>65535&&We<1114112&&(Re=We))}}Re===null?(Re=65533,Ge=1):Re>65535&&(Re-=65536,be.push(Re>>>10&1023|55296),Re=56320|1023&Re),be.push(Re),ve+=Ge}return function(je){const Re=je.length;if(Re<=I)return String.fromCharCode.apply(String,je);let Ge="",Xe=0;for(;Xe<Re;)Ge+=String.fromCharCode.apply(String,je.slice(Xe,Xe+=I));return Ge}(be)}r.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=function(){try{const $=new Uint8Array(1),te={foo:function(){return 42}};return Object.setPrototypeOf(te,Uint8Array.prototype),Object.setPrototypeOf($,te),$.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function($,te,ne){return f($,te,ne)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function($,te,ne){return function(be,ve,je){return y(be),be<=0?c(be):ve!==void 0?typeof je=="string"?c(be).fill(ve,je):c(be).fill(ve):c(be)}($,te,ne)},i.allocUnsafe=function($){return _($)},i.allocUnsafeSlow=function($){return _($)},i.isBuffer=function($){return $!=null&&$.t===!0&&$!==i.prototype},i.compare=function($,te){if(ye($,Uint8Array)&&($=i.from($,$.offset,$.byteLength)),ye(te,Uint8Array)&&(te=i.from(te,te.offset,te.byteLength)),!i.isBuffer($)||!i.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===te)return 0;let ne=$.length,be=te.length;for(let ve=0,je=Math.min(ne,be);ve<je;++ve)if($[ve]!==te[ve]){ne=$[ve],be=te[ve];break}return ne<be?-1:be<ne?1:0},i.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function($,te){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return i.alloc(0);let ne;if(te===void 0)for(te=0,ne=0;ne<$.length;++ne)te+=$[ne].length;const be=i.allocUnsafe(te);let ve=0;for(ne=0;ne<$.length;++ne){let je=$[ne];if(ye(je,Uint8Array))ve+je.length>be.length?(i.isBuffer(je)||(je=i.from(je)),je.copy(be,ve)):Uint8Array.prototype.set.call(be,je,ve);else{if(!i.isBuffer(je))throw new TypeError('"list" argument must be an Array of Buffers');je.copy(be,ve)}ve+=je.length}return be},i.byteLength=g,i.prototype.t=!0,i.prototype.swap16=function(){const $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let te=0;te<$;te+=2)b(this,te,te+1);return this},i.prototype.swap32=function(){const $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let te=0;te<$;te+=4)b(this,te,te+3),b(this,te+1,te+2);return this},i.prototype.swap64=function(){const $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let te=0;te<$;te+=8)b(this,te,te+7),b(this,te+1,te+6),b(this,te+2,te+5),b(this,te+3,te+4);return this},i.prototype.toString=function(){const $=this.length;return $===0?"":arguments.length===0?V(this,0,$):x.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function($){if(!i.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||i.compare(this,$)===0},i.prototype.inspect=function(){let $="";const te=r.INSPECT_MAX_BYTES;return $=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&($+=" ... "),"<Buffer "+$+">"},l&&(i.prototype[l]=i.prototype.inspect),i.prototype.compare=function($,te,ne,be,ve){if(ye($,Uint8Array)&&($=i.from($,$.offset,$.byteLength)),!i.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(te===void 0&&(te=0),ne===void 0&&(ne=$?$.length:0),be===void 0&&(be=0),ve===void 0&&(ve=this.length),te<0||ne>$.length||be<0||ve>this.length)throw new RangeError("out of range index");if(be>=ve&&te>=ne)return 0;if(be>=ve)return-1;if(te>=ne)return 1;if(this===$)return 0;let je=(ve>>>=0)-(be>>>=0),Re=(ne>>>=0)-(te>>>=0);const Ge=Math.min(je,Re),Xe=this.slice(be,ve),Ke=$.slice(te,ne);for(let Pe=0;Pe<Ge;++Pe)if(Xe[Pe]!==Ke[Pe]){je=Xe[Pe],Re=Ke[Pe];break}return je<Re?-1:Re<je?1:0},i.prototype.includes=function($,te,ne){return this.indexOf($,te,ne)!==-1},i.prototype.indexOf=function($,te,ne){return E(this,$,te,ne,!0)},i.prototype.lastIndexOf=function($,te,ne){return E(this,$,te,ne,!1)},i.prototype.write=function($,te,ne,be){if(te===void 0)be="utf8",ne=this.length,te=0;else if(ne===void 0&&typeof te=="string")be=te,ne=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(ne)?(ne>>>=0,be===void 0&&(be="utf8")):(be=ne,ne=void 0)}const ve=this.length-te;if((ne===void 0||ne>ve)&&(ne=ve),$.length>0&&(ne<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");let je=!1;for(;;)switch(be){case"hex":return k(this,$,te,ne);case"utf8":case"utf-8":return T(this,$,te,ne);case"ascii":case"latin1":case"binary":return j(this,$,te,ne);case"base64":return A(this,$,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,$,te,ne);default:if(je)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),je=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.i||this,0)}};const I=4096;function G($,te,ne){let be="";ne=Math.min($.length,ne);for(let ve=te;ve<ne;++ve)be+=String.fromCharCode(127&$[ve]);return be}function R($,te,ne){let be="";ne=Math.min($.length,ne);for(let ve=te;ve<ne;++ve)be+=String.fromCharCode($[ve]);return be}function q($,te,ne){const be=$.length;(!te||te<0)&&(te=0),(!ne||ne<0||ne>be)&&(ne=be);let ve="";for(let je=te;je<ne;++je)ve+=pe[$[je]];return ve}function M($,te,ne){const be=$.slice(te,ne);let ve="";for(let je=0;je<be.length-1;je+=2)ve+=String.fromCharCode(be[je]+256*be[je+1]);return ve}function L($,te,ne){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+te>ne)throw new RangeError("Trying to access beyond buffer length")}function H($,te,ne,be,ve,je){if(!i.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ve||te<je)throw new RangeError('"value" argument is out of bounds');if(ne+be>$.length)throw new RangeError("Index out of range")}function O($,te,ne,be,ve){K(te,be,ve,$,ne,7);let je=Number(te&BigInt(4294967295));$[ne++]=je,je>>=8,$[ne++]=je,je>>=8,$[ne++]=je,je>>=8,$[ne++]=je;let Re=Number(te>>BigInt(32)&BigInt(4294967295));return $[ne++]=Re,Re>>=8,$[ne++]=Re,Re>>=8,$[ne++]=Re,Re>>=8,$[ne++]=Re,ne}function U($,te,ne,be,ve){K(te,be,ve,$,ne,7);let je=Number(te&BigInt(4294967295));$[ne+7]=je,je>>=8,$[ne+6]=je,je>>=8,$[ne+5]=je,je>>=8,$[ne+4]=je;let Re=Number(te>>BigInt(32)&BigInt(4294967295));return $[ne+3]=Re,Re>>=8,$[ne+2]=Re,Re>>=8,$[ne+1]=Re,Re>>=8,$[ne]=Re,ne+8}function J($,te,ne,be,ve,je){if(ne+be>$.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function Z($,te,ne,be,ve){return te=+te,ne>>>=0,ve||J($,0,ne,4),a.write($,te,ne,be,23,4),ne+4}function z($,te,ne,be,ve){return te=+te,ne>>>=0,ve||J($,0,ne,8),a.write($,te,ne,be,52,8),ne+8}i.prototype.slice=function($,te){const ne=this.length;($=~~$)<0?($+=ne)<0&&($=0):$>ne&&($=ne),(te=te===void 0?ne:~~te)<0?(te+=ne)<0&&(te=0):te>ne&&(te=ne),te<$&&(te=$);const be=this.subarray($,te);return Object.setPrototypeOf(be,i.prototype),be},i.prototype.readUintLE=i.prototype.readUIntLE=function($,te,ne){$>>>=0,te>>>=0,ne||L($,te,this.length);let be=this[$],ve=1,je=0;for(;++je<te&&(ve*=256);)be+=this[$+je]*ve;return be},i.prototype.readUintBE=i.prototype.readUIntBE=function($,te,ne){$>>>=0,te>>>=0,ne||L($,te,this.length);let be=this[$+--te],ve=1;for(;te>0&&(ve*=256);)be+=this[$+--te]*ve;return be},i.prototype.readUint8=i.prototype.readUInt8=function($,te){return $>>>=0,te||L($,1,this.length),this[$]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function($,te){return $>>>=0,te||L($,2,this.length),this[$]|this[$+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function($,te){return $>>>=0,te||L($,2,this.length),this[$]<<8|this[$+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function($,te){return $>>>=0,te||L($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function($,te){return $>>>=0,te||L($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},i.prototype.readBigUInt64LE=ke(function($){re($>>>=0,"offset");const te=this[$],ne=this[$+7];te!==void 0&&ne!==void 0||se($,this.length-8);const be=te+256*this[++$]+65536*this[++$]+this[++$]*2**24,ve=this[++$]+256*this[++$]+65536*this[++$]+ne*2**24;return BigInt(be)+(BigInt(ve)<<BigInt(32))}),i.prototype.readBigUInt64BE=ke(function($){re($>>>=0,"offset");const te=this[$],ne=this[$+7];te!==void 0&&ne!==void 0||se($,this.length-8);const be=te*2**24+65536*this[++$]+256*this[++$]+this[++$],ve=this[++$]*2**24+65536*this[++$]+256*this[++$]+ne;return(BigInt(be)<<BigInt(32))+BigInt(ve)}),i.prototype.readIntLE=function($,te,ne){$>>>=0,te>>>=0,ne||L($,te,this.length);let be=this[$],ve=1,je=0;for(;++je<te&&(ve*=256);)be+=this[$+je]*ve;return ve*=128,be>=ve&&(be-=Math.pow(2,8*te)),be},i.prototype.readIntBE=function($,te,ne){$>>>=0,te>>>=0,ne||L($,te,this.length);let be=te,ve=1,je=this[$+--be];for(;be>0&&(ve*=256);)je+=this[$+--be]*ve;return ve*=128,je>=ve&&(je-=Math.pow(2,8*te)),je},i.prototype.readInt8=function($,te){return $>>>=0,te||L($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},i.prototype.readInt16LE=function($,te){$>>>=0,te||L($,2,this.length);const ne=this[$]|this[$+1]<<8;return 32768&ne?4294901760|ne:ne},i.prototype.readInt16BE=function($,te){$>>>=0,te||L($,2,this.length);const ne=this[$+1]|this[$]<<8;return 32768&ne?4294901760|ne:ne},i.prototype.readInt32LE=function($,te){return $>>>=0,te||L($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},i.prototype.readInt32BE=function($,te){return $>>>=0,te||L($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},i.prototype.readBigInt64LE=ke(function($){re($>>>=0,"offset");const te=this[$],ne=this[$+7];te!==void 0&&ne!==void 0||se($,this.length-8);const be=this[$+4]+256*this[$+5]+65536*this[$+6]+(ne<<24);return(BigInt(be)<<BigInt(32))+BigInt(te+256*this[++$]+65536*this[++$]+this[++$]*16777216)}),i.prototype.readBigInt64BE=ke(function($){re($>>>=0,"offset");const te=this[$],ne=this[$+7];te!==void 0&&ne!==void 0||se($,this.length-8);const be=(te<<24)+65536*this[++$]+256*this[++$]+this[++$];return(BigInt(be)<<BigInt(32))+BigInt(this[++$]*16777216+65536*this[++$]+256*this[++$]+ne)}),i.prototype.readFloatLE=function($,te){return $>>>=0,te||L($,4,this.length),a.read(this,$,!0,23,4)},i.prototype.readFloatBE=function($,te){return $>>>=0,te||L($,4,this.length),a.read(this,$,!1,23,4)},i.prototype.readDoubleLE=function($,te){return $>>>=0,te||L($,8,this.length),a.read(this,$,!0,52,8)},i.prototype.readDoubleBE=function($,te){return $>>>=0,te||L($,8,this.length),a.read(this,$,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function($,te,ne,be){$=+$,te>>>=0,ne>>>=0,be||H(this,$,te,ne,Math.pow(2,8*ne)-1,0);let ve=1,je=0;for(this[te]=255&$;++je<ne&&(ve*=256);)this[te+je]=$/ve&255;return te+ne},i.prototype.writeUintBE=i.prototype.writeUIntBE=function($,te,ne,be){$=+$,te>>>=0,ne>>>=0,be||H(this,$,te,ne,Math.pow(2,8*ne)-1,0);let ve=ne-1,je=1;for(this[te+ve]=255&$;--ve>=0&&(je*=256);)this[te+ve]=$/je&255;return te+ne},i.prototype.writeUint8=i.prototype.writeUInt8=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,1,255,0),this[te]=255&$,te+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,2,65535,0),this[te]=255&$,this[te+1]=$>>>8,te+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,2,65535,0),this[te]=$>>>8,this[te+1]=255&$,te+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,4,4294967295,0),this[te+3]=$>>>24,this[te+2]=$>>>16,this[te+1]=$>>>8,this[te]=255&$,te+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,4,4294967295,0),this[te]=$>>>24,this[te+1]=$>>>16,this[te+2]=$>>>8,this[te+3]=255&$,te+4},i.prototype.writeBigUInt64LE=ke(function($,te=0){return O(this,$,te,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=ke(function($,te=0){return U(this,$,te,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function($,te,ne,be){if($=+$,te>>>=0,!be){const Ge=Math.pow(2,8*ne-1);H(this,$,te,ne,Ge-1,-Ge)}let ve=0,je=1,Re=0;for(this[te]=255&$;++ve<ne&&(je*=256);)$<0&&Re===0&&this[te+ve-1]!==0&&(Re=1),this[te+ve]=($/je>>0)-Re&255;return te+ne},i.prototype.writeIntBE=function($,te,ne,be){if($=+$,te>>>=0,!be){const Ge=Math.pow(2,8*ne-1);H(this,$,te,ne,Ge-1,-Ge)}let ve=ne-1,je=1,Re=0;for(this[te+ve]=255&$;--ve>=0&&(je*=256);)$<0&&Re===0&&this[te+ve+1]!==0&&(Re=1),this[te+ve]=($/je>>0)-Re&255;return te+ne},i.prototype.writeInt8=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,1,127,-128),$<0&&($=255+$+1),this[te]=255&$,te+1},i.prototype.writeInt16LE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,2,32767,-32768),this[te]=255&$,this[te+1]=$>>>8,te+2},i.prototype.writeInt16BE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,2,32767,-32768),this[te]=$>>>8,this[te+1]=255&$,te+2},i.prototype.writeInt32LE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,4,2147483647,-2147483648),this[te]=255&$,this[te+1]=$>>>8,this[te+2]=$>>>16,this[te+3]=$>>>24,te+4},i.prototype.writeInt32BE=function($,te,ne){return $=+$,te>>>=0,ne||H(this,$,te,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[te]=$>>>24,this[te+1]=$>>>16,this[te+2]=$>>>8,this[te+3]=255&$,te+4},i.prototype.writeBigInt64LE=ke(function($,te=0){return O(this,$,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=ke(function($,te=0){return U(this,$,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function($,te,ne){return Z(this,$,te,!0,ne)},i.prototype.writeFloatBE=function($,te,ne){return Z(this,$,te,!1,ne)},i.prototype.writeDoubleLE=function($,te,ne){return z(this,$,te,!0,ne)},i.prototype.writeDoubleBE=function($,te,ne){return z(this,$,te,!1,ne)},i.prototype.copy=function($,te,ne,be){if(!i.isBuffer($))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),be||be===0||(be=this.length),te>=$.length&&(te=$.length),te||(te=0),be>0&&be<ne&&(be=ne),be===ne||$.length===0||this.length===0)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),$.length-te<be-ne&&(be=$.length-te+ne);const ve=be-ne;return this===$&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(te,ne,be):Uint8Array.prototype.set.call($,this.subarray(ne,be),te),ve},i.prototype.fill=function($,te,ne,be){if(typeof $=="string"){if(typeof te=="string"?(be=te,te=0,ne=this.length):typeof ne=="string"&&(be=ne,ne=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!i.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if($.length===1){const je=$.charCodeAt(0);(be==="utf8"&&je<128||be==="latin1")&&($=je)}}else typeof $=="number"?$&=255:typeof $=="boolean"&&($=Number($));if(te<0||this.length<te||this.length<ne)throw new RangeError("Out of range index");if(ne<=te)return this;let ve;if(te>>>=0,ne=ne===void 0?this.length:ne>>>0,$||($=0),typeof $=="number")for(ve=te;ve<ne;++ve)this[ve]=$;else{const je=i.isBuffer($)?$:i.from($,be),Re=je.length;if(Re===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(ve=0;ve<ne-te;++ve)this[ve+te]=je[ve%Re]}return this};const B={};function D($,te,ne){B[$]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:te.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:be,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}function X($){let te="",ne=$.length;const be=$[0]==="-"?1:0;for(;ne>=be+4;ne-=3)te=`_${$.slice(ne-3,ne)}${te}`;return`${$.slice(0,ne)}${te}`}function K($,te,ne,be,ve,je){if($>ne||$<te){const Re=typeof te=="bigint"?"n":"";let Ge;throw Ge=je>3?te===0||te===BigInt(0)?`>= 0${Re} and < 2${Re} ** ${8*(je+1)}${Re}`:`>= -(2${Re} ** ${8*(je+1)-1}${Re}) and < 2 ** ${8*(je+1)-1}${Re}`:`>= ${te}${Re} and <= ${ne}${Re}`,new B.ERR_OUT_OF_RANGE("value",Ge,$)}(function(Re,Ge,Xe){re(Ge,"offset"),Re[Ge]!==void 0&&Re[Ge+Xe]!==void 0||se(Ge,Re.length-(Xe+1))})(be,ve,je)}function re($,te){if(typeof $!="number")throw new B.ERR_INVALID_ARG_TYPE(te,"number",$)}function se($,te,ne){throw Math.floor($)!==$?(re($,ne),new B.ERR_OUT_OF_RANGE(ne||"offset","an integer",$)):te<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(ne||"offset",`>= ${ne?1:0} and <= ${te}`,$)}D("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?`${$} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function($,te){return`The "${$}" argument must be of type number. Received type ${typeof te}`},TypeError),D("ERR_OUT_OF_RANGE",function($,te,ne){let be=`The value of "${$}" is out of range.`,ve=ne;return Number.isInteger(ne)&&Math.abs(ne)>4294967296?ve=X(String(ne)):typeof ne=="bigint"&&(ve=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(ve=X(ve)),ve+="n"),be+=` It must be ${te}. Received ${ve}`,be},RangeError);const fe=/[^+/0-9A-Za-z-_]/g;function xe($,te){let ne;te=te||1/0;const be=$.length;let ve=null;const je=[];for(let Re=0;Re<be;++Re){if(ne=$.charCodeAt(Re),ne>55295&&ne<57344){if(!ve){if(ne>56319){(te-=3)>-1&&je.push(239,191,189);continue}if(Re+1===be){(te-=3)>-1&&je.push(239,191,189);continue}ve=ne;continue}if(ne<56320){(te-=3)>-1&&je.push(239,191,189),ve=ne;continue}ne=65536+(ve-55296<<10|ne-56320)}else ve&&(te-=3)>-1&&je.push(239,191,189);if(ve=null,ne<128){if((te-=1)<0)break;je.push(ne)}else if(ne<2048){if((te-=2)<0)break;je.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((te-=3)<0)break;je.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;je.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return je}function he($){return t.toByteArray(function(te){if((te=(te=te.split("=")[0]).trim().replace(fe,"")).length<2)return"";for(;te.length%4!=0;)te+="=";return te}($))}function _e($,te,ne,be){let ve;for(ve=0;ve<be&&!(ve+ne>=te.length||ve>=$.length);++ve)te[ve+ne]=$[ve];return ve}function ye($,te){return $ instanceof te||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===te.name}function ue($){return $!=$}const pe=function(){const $="0123456789abcdef",te=new Array(256);for(let ne=0;ne<16;++ne){const be=16*ne;for(let ve=0;ve<16;++ve)te[be+ve]=$[ne]+$[ve]}return te}();function ke($){return typeof BigInt>"u"?Ie:$}function Ie(){throw new Error("BigInt not supported")}},181:(s,r)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */r.read=function(n,t,a,l,o){var c,i,f=8*o-l-1,y=(1<<f)-1,_=y>>1,u=-7,m=a?o-1:0,p=a?-1:1,g=n[t+m];for(m+=p,c=g&(1<<-u)-1,g>>=-u,u+=f;u>0;c=256*c+n[t+m],m+=p,u-=8);for(i=c&(1<<-u)-1,c>>=-u,u+=l;u>0;i=256*i+n[t+m],m+=p,u-=8);if(c===0)c=1-_;else{if(c===y)return i?NaN:1/0*(g?-1:1);i+=Math.pow(2,l),c-=_}return(g?-1:1)*i*Math.pow(2,c-l)},r.write=function(n,t,a,l,o,c){var i,f,y,_=8*c-o-1,u=(1<<_)-1,m=u>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=l?0:c-1,x=l?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(y=Math.pow(2,-i))<1&&(i--,y*=2),(t+=i+m>=1?p/y:p*Math.pow(2,1-m))*y>=2&&(i++,y/=2),i+m>=u?(f=0,i=u):i+m>=1?(f=(t*y-1)*Math.pow(2,o),i+=m):(f=t*Math.pow(2,m-1)*Math.pow(2,o),i=0));o>=8;n[a+g]=255&f,g+=x,f/=256,o-=8);for(i=i<<o|f,_+=o;_>0;n[a+g]=255&i,g+=x,i/=256,_-=8);n[a+g-x]|=128*b}},845:(s,r,n)=>{var t={};(0,n(761).assign)(t,n(880),n(380),n(271)),s.exports=t},880:(s,r,n)=>{var t=n(789),a=n(761),l=n(944),o=n(950),c=n(744),i=Object.prototype.toString;function f(_){if(!(this instanceof f))return new f(_);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},_||{});var u=this.options;u.raw&&u.windowBits>0?u.windowBits=-u.windowBits:u.gzip&&u.windowBits>0&&u.windowBits<16&&(u.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var m=t.deflateInit2(this.strm,u.level,u.method,u.windowBits,u.memLevel,u.strategy);if(m!==0)throw new Error(o[m]);if(u.header&&t.deflateSetHeader(this.strm,u.header),u.dictionary){var p;if(p=typeof u.dictionary=="string"?l.string2buf(u.dictionary):i.call(u.dictionary)==="[object ArrayBuffer]"?new Uint8Array(u.dictionary):u.dictionary,(m=t.deflateSetDictionary(this.strm,p))!==0)throw new Error(o[m]);this.u=!0}}function y(_,u){var m=new f(u);if(m.push(_,!0),m.err)throw m.msg||o[m.err];return m.result}f.prototype.push=function(_,u){var m,p,g=this.strm,x=this.options.chunkSize;if(this.ended)return!1;p=u===~~u?u:u===!0?4:0,typeof _=="string"?g.input=l.string2buf(_):i.call(_)==="[object ArrayBuffer]"?g.input=new Uint8Array(_):g.input=_,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new a.Buf8(x),g.next_out=0,g.avail_out=x),(m=t.deflate(g,p))!==1&&m!==0)return this.onEnd(m),this.ended=!0,!1;g.avail_out!==0&&(g.avail_in!==0||p!==4&&p!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(a.shrinkBuf(g.output,g.next_out))):this.onData(a.shrinkBuf(g.output,g.next_out)))}while((g.avail_in>0||g.avail_out===0)&&m!==1);return p===4?(m=t.deflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===0):p!==2||(this.onEnd(0),g.avail_out=0,!0)},f.prototype.onData=function(_){this.chunks.push(_)},f.prototype.onEnd=function(_){_===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},r.Deflate=f,r.deflate=y,r.deflateRaw=function(_,u){return(u=u||{}).raw=!0,y(_,u)},r.gzip=function(_,u){return(u=u||{}).gzip=!0,y(_,u)}},380:(s,r,n)=>{var t=n(20),a=n(761),l=n(944),o=n(271),c=n(950),i=n(744),f=n(357),y=Object.prototype.toString;function _(m){if(!(this instanceof _))return new _(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(p.windowBits>=0&&p.windowBits<16)||m&&m.windowBits||(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=t.inflateInit2(this.strm,p.windowBits);if(g!==o.Z_OK)throw new Error(c[g]);if(this.header=new f,t.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=l.string2buf(p.dictionary):y.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=t.inflateSetDictionary(this.strm,p.dictionary))!==o.Z_OK))throw new Error(c[g])}function u(m,p){var g=new _(p);if(g.push(m,!0),g.err)throw g.msg||c[g.err];return g.result}_.prototype.push=function(m,p){var g,x,b,E,S,k=this.strm,T=this.options.chunkSize,j=this.options.dictionary,A=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof m=="string"?k.input=l.binstring2buf(m):y.call(m)==="[object ArrayBuffer]"?k.input=new Uint8Array(m):k.input=m,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(T),k.next_out=0,k.avail_out=T),(g=t.inflate(k,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&j&&(g=t.inflateSetDictionary(this.strm,j)),g===o.Z_BUF_ERROR&&A===!0&&(g=o.Z_OK,A=!1),g!==o.Z_STREAM_END&&g!==o.Z_OK)return this.onEnd(g),this.ended=!0,!1;k.next_out&&(k.avail_out!==0&&g!==o.Z_STREAM_END&&(k.avail_in!==0||x!==o.Z_FINISH&&x!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=l.utf8border(k.output,k.next_out),E=k.next_out-b,S=l.buf2string(k.output,b),k.next_out=E,k.avail_out=T-E,E&&a.arraySet(k.output,k.output,b,E,0),this.onData(S)):this.onData(a.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(A=!0)}while((k.avail_in>0||k.avail_out===0)&&g!==o.Z_STREAM_END);return g===o.Z_STREAM_END&&(x=o.Z_FINISH),x===o.Z_FINISH?(g=t.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===o.Z_OK):x!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),k.avail_out=0,!0)},_.prototype.onData=function(m){this.chunks.push(m)},_.prototype.onEnd=function(m){m===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Inflate=_,r.inflate=u,r.inflateRaw=function(m,p){return(p=p||{}).raw=!0,u(m,p)},r.ungzip=u},761:(s,r)=>{var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(o,c){return Object.prototype.hasOwnProperty.call(o,c)}r.assign=function(o){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var i=c.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(var f in i)t(i,f)&&(o[f]=i[f])}}return o},r.shrinkBuf=function(o,c){return o.length===c?o:o.subarray?o.subarray(0,c):(o.length=c,o)};var a={arraySet:function(o,c,i,f,y){if(c.subarray&&o.subarray)o.set(c.subarray(i,i+f),y);else for(var _=0;_<f;_++)o[y+_]=c[i+_]},flattenChunks:function(o){var c,i,f,y,_,u;for(f=0,c=0,i=o.length;c<i;c++)f+=o[c].length;for(u=new Uint8Array(f),y=0,c=0,i=o.length;c<i;c++)_=o[c],u.set(_,y),y+=_.length;return u}},l={arraySet:function(o,c,i,f,y){for(var _=0;_<f;_++)o[y+_]=c[i+_]},flattenChunks:function(o){return[].concat.apply([],o)}};r.setTyped=function(o){o?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,l))},r.setTyped(n)},944:(s,r,n)=>{var t=n(761),a=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var o=new t.Buf8(256),c=0;c<256;c++)o[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;function i(f,y){if(y<65534&&(f.subarray&&l||!f.subarray&&a))return String.fromCharCode.apply(null,t.shrinkBuf(f,y));for(var _="",u=0;u<y;u++)_+=String.fromCharCode(f[u]);return _}o[254]=o[254]=1,r.string2buf=function(f){var y,_,u,m,p,g=f.length,x=0;for(m=0;m<g;m++)(64512&(_=f.charCodeAt(m)))==55296&&m+1<g&&(64512&(u=f.charCodeAt(m+1)))==56320&&(_=65536+(_-55296<<10)+(u-56320),m++),x+=_<128?1:_<2048?2:_<65536?3:4;for(y=new t.Buf8(x),p=0,m=0;p<x;m++)(64512&(_=f.charCodeAt(m)))==55296&&m+1<g&&(64512&(u=f.charCodeAt(m+1)))==56320&&(_=65536+(_-55296<<10)+(u-56320),m++),_<128?y[p++]=_:_<2048?(y[p++]=192|_>>>6,y[p++]=128|63&_):_<65536?(y[p++]=224|_>>>12,y[p++]=128|_>>>6&63,y[p++]=128|63&_):(y[p++]=240|_>>>18,y[p++]=128|_>>>12&63,y[p++]=128|_>>>6&63,y[p++]=128|63&_);return y},r.buf2binstring=function(f){return i(f,f.length)},r.binstring2buf=function(f){for(var y=new t.Buf8(f.length),_=0,u=y.length;_<u;_++)y[_]=f.charCodeAt(_);return y},r.buf2string=function(f,y){var _,u,m,p,g=y||f.length,x=new Array(2*g);for(u=0,_=0;_<g;)if((m=f[_++])<128)x[u++]=m;else if((p=o[m])>4)x[u++]=65533,_+=p-1;else{for(m&=p===2?31:p===3?15:7;p>1&&_<g;)m=m<<6|63&f[_++],p--;p>1?x[u++]=65533:m<65536?x[u++]=m:(m-=65536,x[u++]=55296|m>>10&1023,x[u++]=56320|1023&m)}return i(x,u)},r.utf8border=function(f,y){var _;for((y=y||f.length)>f.length&&(y=f.length),_=y-1;_>=0&&(192&f[_])==128;)_--;return _<0||_===0?y:_+o[f[_]]>y?_:y}},562:s=>{s.exports=function(r,n,t,a){for(var l=65535&r|0,o=r>>>16&65535|0,c=0;t!==0;){t-=c=t>2e3?2e3:t;do o=o+(l=l+n[a++]|0)|0;while(--c);l%=65521,o%=65521}return l|o<<16|0}},271:s=>{s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},299:s=>{var r=function(){for(var n,t=[],a=0;a<256;a++){n=a;for(var l=0;l<8;l++)n=1&n?3988292384^n>>>1:n>>>1;t[a]=n}return t}();s.exports=function(n,t,a,l){var o=r,c=l+a;n^=-1;for(var i=l;i<c;i++)n=n>>>8^o[255&(n^t[i])];return-1^n}},789:(s,r,n)=>{var t,a=n(761),l=n(564),o=n(562),c=n(299),i=n(950),f=-2,y=258,_=262,u=103,m=113,p=666;function g(M,L){return M.msg=i[L],L}function x(M){return(M<<1)-(M>4?9:0)}function b(M){for(var L=M.length;--L>=0;)M[L]=0}function E(M){var L=M.state,H=L.pending;H>M.avail_out&&(H=M.avail_out),H!==0&&(a.arraySet(M.output,L.pending_buf,L.pending_out,H,M.next_out),M.next_out+=H,L.pending_out+=H,M.total_out+=H,M.avail_out-=H,L.pending-=H,L.pending===0&&(L.pending_out=0))}function S(M,L){l.h(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,L),M.block_start=M.strstart,E(M.strm)}function k(M,L){M.pending_buf[M.pending++]=L}function T(M,L){M.pending_buf[M.pending++]=L>>>8&255,M.pending_buf[M.pending++]=255&L}function j(M,L){var H,O,U=M.max_chain_length,J=M.strstart,Z=M.prev_length,z=M.nice_match,B=M.strstart>M.w_size-_?M.strstart-(M.w_size-_):0,D=M.window,X=M.w_mask,K=M.prev,re=M.strstart+y,se=D[J+Z-1],fe=D[J+Z];M.prev_length>=M.good_match&&(U>>=2),z>M.lookahead&&(z=M.lookahead);do if(D[(H=L)+Z]===fe&&D[H+Z-1]===se&&D[H]===D[J]&&D[++H]===D[J+1]){J+=2,H++;do;while(D[++J]===D[++H]&&D[++J]===D[++H]&&D[++J]===D[++H]&&D[++J]===D[++H]&&D[++J]===D[++H]&&D[++J]===D[++H]&&D[++J]===D[++H]&&D[++J]===D[++H]&&J<re);if(O=y-(re-J),J=re-y,O>Z){if(M.match_start=L,Z=O,O>=z)break;se=D[J+Z-1],fe=D[J+Z]}}while((L=K[L&X])>B&&--U!=0);return Z<=M.lookahead?Z:M.lookahead}function A(M){var L,H,O,U,J,Z,z,B,D,X,K=M.w_size;do{if(U=M.window_size-M.lookahead-M.strstart,M.strstart>=K+(K-_)){a.arraySet(M.window,M.window,K,K,0),M.match_start-=K,M.strstart-=K,M.block_start-=K,L=H=M.hash_size;do O=M.head[--L],M.head[L]=O>=K?O-K:0;while(--H);L=H=K;do O=M.prev[--L],M.prev[L]=O>=K?O-K:0;while(--H);U+=K}if(M.strm.avail_in===0)break;if(Z=M.strm,z=M.window,B=M.strstart+M.lookahead,D=U,X=void 0,(X=Z.avail_in)>D&&(X=D),H=X===0?0:(Z.avail_in-=X,a.arraySet(z,Z.input,Z.next_in,X,B),Z.state.wrap===1?Z.adler=o(Z.adler,z,X,B):Z.state.wrap===2&&(Z.adler=c(Z.adler,z,X,B)),Z.next_in+=X,Z.total_in+=X,X),M.lookahead+=H,M.lookahead+M.insert>=3)for(J=M.strstart-M.insert,M.ins_h=M.window[J],M.ins_h=(M.ins_h<<M.hash_shift^M.window[J+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[J+3-1])&M.hash_mask,M.prev[J&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=J,J++,M.insert--,!(M.lookahead+M.insert<3)););}while(M.lookahead<_&&M.strm.avail_in!==0)}function C(M,L){for(var H,O;;){if(M.lookahead<_){if(A(M),M.lookahead<_&&L===0)return 1;if(M.lookahead===0)break}if(H=0,M.lookahead>=3&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,H=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),H!==0&&M.strstart-H<=M.w_size-_&&(M.match_length=j(M,H)),M.match_length>=3)if(O=l.l(M,M.strstart-M.match_start,M.match_length-3),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=3){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,H=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!=0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else O=l.l(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(O&&(S(M,!1),M.strm.avail_out===0))return 1}return M.insert=M.strstart<2?M.strstart:2,L===4?(S(M,!0),M.strm.avail_out===0?3:4):M.last_lit&&(S(M,!1),M.strm.avail_out===0)?1:2}function N(M,L){for(var H,O,U;;){if(M.lookahead<_){if(A(M),M.lookahead<_&&L===0)return 1;if(M.lookahead===0)break}if(H=0,M.lookahead>=3&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,H=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=2,H!==0&&M.prev_length<M.max_lazy_match&&M.strstart-H<=M.w_size-_&&(M.match_length=j(M,H),M.match_length<=5&&(M.strategy===1||M.match_length===3&&M.strstart-M.match_start>4096)&&(M.match_length=2)),M.prev_length>=3&&M.match_length<=M.prev_length){U=M.strstart+M.lookahead-3,O=l.l(M,M.strstart-1-M.prev_match,M.prev_length-3),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=U&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,H=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!=0);if(M.match_available=0,M.match_length=2,M.strstart++,O&&(S(M,!1),M.strm.avail_out===0))return 1}else if(M.match_available){if((O=l.l(M,0,M.window[M.strstart-1]))&&S(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return 1}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(O=l.l(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<2?M.strstart:2,L===4?(S(M,!0),M.strm.avail_out===0?3:4):M.last_lit&&(S(M,!1),M.strm.avail_out===0)?1:2}function V(M,L,H,O,U){this.good_length=M,this.max_lazy=L,this.nice_length=H,this.max_chain=O,this.func=U}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),b(this.dyn_ltree),b(this.dyn_dtree),b(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),b(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),b(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(M){var L;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=2,(L=M.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?42:m,M.adler=L.wrap===2?0:1,L.last_flush=0,l.p(L),0):g(M,f)}function R(M){var L,H=G(M);return H===0&&((L=M.state).window_size=2*L.w_size,b(L.head),L.max_lazy_match=t[L.level].max_lazy,L.good_match=t[L.level].good_length,L.nice_match=t[L.level].nice_length,L.max_chain_length=t[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=2,L.match_available=0,L.ins_h=0),H}function q(M,L,H,O,U,J){if(!M)return f;var Z=1;if(L===-1&&(L=6),O<0?(Z=0,O=-O):O>15&&(Z=2,O-=16),U<1||U>9||H!==8||O<8||O>15||L<0||L>9||J<0||J>4)return g(M,f);O===8&&(O=9);var z=new I;return M.state=z,z.strm=M,z.wrap=Z,z.gzhead=null,z.w_bits=O,z.w_size=1<<z.w_bits,z.w_mask=z.w_size-1,z.hash_bits=U+7,z.hash_size=1<<z.hash_bits,z.hash_mask=z.hash_size-1,z.hash_shift=~~((z.hash_bits+3-1)/3),z.window=new a.Buf8(2*z.w_size),z.head=new a.Buf16(z.hash_size),z.prev=new a.Buf16(z.w_size),z.lit_bufsize=1<<U+6,z.pending_buf_size=4*z.lit_bufsize,z.pending_buf=new a.Buf8(z.pending_buf_size),z.d_buf=1*z.lit_bufsize,z.l_buf=3*z.lit_bufsize,z.level=L,z.strategy=J,z.method=H,R(M)}t=[new V(0,0,0,0,function(M,L){var H=65535;for(H>M.pending_buf_size-5&&(H=M.pending_buf_size-5);;){if(M.lookahead<=1){if(A(M),M.lookahead===0&&L===0)return 1;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var O=M.block_start+H;if((M.strstart===0||M.strstart>=O)&&(M.lookahead=M.strstart-O,M.strstart=O,S(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-_&&(S(M,!1),M.strm.avail_out===0))return 1}return M.insert=0,L===4?(S(M,!0),M.strm.avail_out===0?3:4):(M.strstart>M.block_start&&(S(M,!1),M.strm.avail_out),1)}),new V(4,4,8,4,C),new V(4,5,16,8,C),new V(4,6,32,32,C),new V(4,4,16,16,N),new V(8,16,32,32,N),new V(8,16,128,128,N),new V(8,32,128,256,N),new V(32,128,258,1024,N),new V(32,258,258,4096,N)],r.deflateInit=function(M,L){return q(M,L,8,15,8,0)},r.deflateInit2=q,r.deflateReset=R,r.deflateResetKeep=G,r.deflateSetHeader=function(M,L){return M&&M.state?M.state.wrap!==2?f:(M.state.gzhead=L,0):f},r.deflate=function(M,L){var H,O,U,J;if(!M||!M.state||L>5||L<0)return M?g(M,f):f;if(O=M.state,!M.output||!M.input&&M.avail_in!==0||O.status===p&&L!==4)return g(M,M.avail_out===0?-5:f);if(O.strm=M,H=O.last_flush,O.last_flush=L,O.status===42)if(O.wrap===2)M.adler=0,k(O,31),k(O,139),k(O,8),O.gzhead?(k(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),k(O,255&O.gzhead.time),k(O,O.gzhead.time>>8&255),k(O,O.gzhead.time>>16&255),k(O,O.gzhead.time>>24&255),k(O,O.level===9?2:O.strategy>=2||O.level<2?4:0),k(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(k(O,255&O.gzhead.extra.length),k(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(M.adler=c(M.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(k(O,0),k(O,0),k(O,0),k(O,0),k(O,0),k(O,O.level===9?2:O.strategy>=2||O.level<2?4:0),k(O,3),O.status=m);else{var Z=8+(O.w_bits-8<<4)<<8;Z|=(O.strategy>=2||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(Z|=32),Z+=31-Z%31,O.status=m,T(O,Z),O.strstart!==0&&(T(O,M.adler>>>16),T(O,65535&M.adler)),M.adler=1}if(O.status===69)if(O.gzhead.extra){for(U=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>U&&(M.adler=c(M.adler,O.pending_buf,O.pending-U,U)),E(M),U=O.pending,O.pending!==O.pending_buf_size));)k(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>U&&(M.adler=c(M.adler,O.pending_buf,O.pending-U,U)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){U=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>U&&(M.adler=c(M.adler,O.pending_buf,O.pending-U,U)),E(M),U=O.pending,O.pending===O.pending_buf_size)){J=1;break}J=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,k(O,J)}while(J!==0);O.gzhead.hcrc&&O.pending>U&&(M.adler=c(M.adler,O.pending_buf,O.pending-U,U)),J===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){U=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>U&&(M.adler=c(M.adler,O.pending_buf,O.pending-U,U)),E(M),U=O.pending,O.pending===O.pending_buf_size)){J=1;break}J=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,k(O,J)}while(J!==0);O.gzhead.hcrc&&O.pending>U&&(M.adler=c(M.adler,O.pending_buf,O.pending-U,U)),J===0&&(O.status=u)}else O.status=u;if(O.status===u&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&E(M),O.pending+2<=O.pending_buf_size&&(k(O,255&M.adler),k(O,M.adler>>8&255),M.adler=0,O.status=m)):O.status=m),O.pending!==0){if(E(M),M.avail_out===0)return O.last_flush=-1,0}else if(M.avail_in===0&&x(L)<=x(H)&&L!==4)return g(M,-5);if(O.status===p&&M.avail_in!==0)return g(M,-5);if(M.avail_in!==0||O.lookahead!==0||L!==0&&O.status!==p){var z=O.strategy===2?function(B,D){for(var X;;){if(B.lookahead===0&&(A(B),B.lookahead===0)){if(D===0)return 1;break}if(B.match_length=0,X=l.l(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++,X&&(S(B,!1),B.strm.avail_out===0))return 1}return B.insert=0,D===4?(S(B,!0),B.strm.avail_out===0?3:4):B.last_lit&&(S(B,!1),B.strm.avail_out===0)?1:2}(O,L):O.strategy===3?function(B,D){for(var X,K,re,se,fe=B.window;;){if(B.lookahead<=y){if(A(B),B.lookahead<=y&&D===0)return 1;if(B.lookahead===0)break}if(B.match_length=0,B.lookahead>=3&&B.strstart>0&&(K=fe[re=B.strstart-1])===fe[++re]&&K===fe[++re]&&K===fe[++re]){se=B.strstart+y;do;while(K===fe[++re]&&K===fe[++re]&&K===fe[++re]&&K===fe[++re]&&K===fe[++re]&&K===fe[++re]&&K===fe[++re]&&K===fe[++re]&&re<se);B.match_length=y-(se-re),B.match_length>B.lookahead&&(B.match_length=B.lookahead)}if(B.match_length>=3?(X=l.l(B,1,B.match_length-3),B.lookahead-=B.match_length,B.strstart+=B.match_length,B.match_length=0):(X=l.l(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++),X&&(S(B,!1),B.strm.avail_out===0))return 1}return B.insert=0,D===4?(S(B,!0),B.strm.avail_out===0?3:4):B.last_lit&&(S(B,!1),B.strm.avail_out===0)?1:2}(O,L):t[O.level].func(O,L);if(z!==3&&z!==4||(O.status=p),z===1||z===3)return M.avail_out===0&&(O.last_flush=-1),0;if(z===2&&(L===1?l.g(O):L!==5&&(l.m(O,0,0,!1),L===3&&(b(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),E(M),M.avail_out===0))return O.last_flush=-1,0}return L!==4?0:O.wrap<=0?1:(O.wrap===2?(k(O,255&M.adler),k(O,M.adler>>8&255),k(O,M.adler>>16&255),k(O,M.adler>>24&255),k(O,255&M.total_in),k(O,M.total_in>>8&255),k(O,M.total_in>>16&255),k(O,M.total_in>>24&255)):(T(O,M.adler>>>16),T(O,65535&M.adler)),E(M),O.wrap>0&&(O.wrap=-O.wrap),O.pending!==0?0:1)},r.deflateEnd=function(M){var L;return M&&M.state?(L=M.state.status)!==42&&L!==69&&L!==73&&L!==91&&L!==u&&L!==m&&L!==p?g(M,f):(M.state=null,L===m?g(M,-3):0):f},r.deflateSetDictionary=function(M,L){var H,O,U,J,Z,z,B,D,X=L.length;if(!M||!M.state||(J=(H=M.state).wrap)===2||J===1&&H.status!==42||H.lookahead)return f;for(J===1&&(M.adler=o(M.adler,L,X,0)),H.wrap=0,X>=H.w_size&&(J===0&&(b(H.head),H.strstart=0,H.block_start=0,H.insert=0),D=new a.Buf8(H.w_size),a.arraySet(D,L,X-H.w_size,H.w_size,0),L=D,X=H.w_size),Z=M.avail_in,z=M.next_in,B=M.input,M.avail_in=X,M.next_in=0,M.input=L,A(H);H.lookahead>=3;){O=H.strstart,U=H.lookahead-2;do H.ins_h=(H.ins_h<<H.hash_shift^H.window[O+3-1])&H.hash_mask,H.prev[O&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=O,O++;while(--U);H.strstart=O,H.lookahead=2,A(H)}return H.strstart+=H.lookahead,H.block_start=H.strstart,H.insert=H.lookahead,H.lookahead=0,H.match_length=H.prev_length=2,H.match_available=0,M.next_in=z,M.input=B,M.avail_in=Z,H.wrap=J,0},r.deflateInfo="pako deflate (from Nodeca project)"},357:s=>{s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},980:s=>{s.exports=function(r,n){var t,a,l,o,c,i,f,y,_,u,m,p,g,x,b,E,S,k,T,j,A,C,N,V,I;t=r.state,a=r.next_in,V=r.input,l=a+(r.avail_in-5),o=r.next_out,I=r.output,c=o-(n-r.avail_out),i=o+(r.avail_out-257),f=t.dmax,y=t.wsize,_=t.whave,u=t.wnext,m=t.window,p=t.hold,g=t.bits,x=t.lencode,b=t.distcode,E=(1<<t.lenbits)-1,S=(1<<t.distbits)-1;e:do{g<15&&(p+=V[a++]<<g,g+=8,p+=V[a++]<<g,g+=8),k=x[p&E];t:for(;;){if(p>>>=T=k>>>24,g-=T,(T=k>>>16&255)==0)I[o++]=65535&k;else{if(!(16&T)){if(!(64&T)){k=x[(65535&k)+(p&(1<<T)-1)];continue t}if(32&T){t.mode=12;break e}r.msg="invalid literal/length code",t.mode=30;break e}j=65535&k,(T&=15)&&(g<T&&(p+=V[a++]<<g,g+=8),j+=p&(1<<T)-1,p>>>=T,g-=T),g<15&&(p+=V[a++]<<g,g+=8,p+=V[a++]<<g,g+=8),k=b[p&S];r:for(;;){if(p>>>=T=k>>>24,g-=T,!(16&(T=k>>>16&255))){if(!(64&T)){k=b[(65535&k)+(p&(1<<T)-1)];continue r}r.msg="invalid distance code",t.mode=30;break e}if(A=65535&k,g<(T&=15)&&(p+=V[a++]<<g,(g+=8)<T&&(p+=V[a++]<<g,g+=8)),(A+=p&(1<<T)-1)>f){r.msg="invalid distance too far back",t.mode=30;break e}if(p>>>=T,g-=T,A>(T=o-c)){if((T=A-T)>_&&t.sane){r.msg="invalid distance too far back",t.mode=30;break e}if(C=0,N=m,u===0){if(C+=y-T,T<j){j-=T;do I[o++]=m[C++];while(--T);C=o-A,N=I}}else if(u<T){if(C+=y+u-T,(T-=u)<j){j-=T;do I[o++]=m[C++];while(--T);if(C=0,u<j){j-=T=u;do I[o++]=m[C++];while(--T);C=o-A,N=I}}}else if(C+=u-T,T<j){j-=T;do I[o++]=m[C++];while(--T);C=o-A,N=I}for(;j>2;)I[o++]=N[C++],I[o++]=N[C++],I[o++]=N[C++],j-=3;j&&(I[o++]=N[C++],j>1&&(I[o++]=N[C++]))}else{C=o-A;do I[o++]=I[C++],I[o++]=I[C++],I[o++]=I[C++],j-=3;while(j>2);j&&(I[o++]=I[C++],j>1&&(I[o++]=I[C++]))}break}}break}}while(a<l&&o<i);a-=j=g>>3,p&=(1<<(g-=j<<3))-1,r.next_in=a,r.next_out=o,r.avail_in=a<l?l-a+5:5-(a-l),r.avail_out=o<i?i-o+257:257-(o-i),t.hold=p,t.bits=g}},20:(s,r,n)=>{var t=n(761),a=n(562),l=n(299),o=n(980),c=n(881),i=-2,f=12,y=30;function _(j){return(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(j){var A;return j&&j.state?(A=j.state,j.total_in=j.total_out=A.total=0,j.msg="",A.wrap&&(j.adler=1&A.wrap),A.mode=1,A.last=0,A.havedict=0,A.dmax=32768,A.head=null,A.hold=0,A.bits=0,A.lencode=A.lendyn=new t.Buf32(852),A.distcode=A.distdyn=new t.Buf32(592),A.sane=1,A.back=-1,0):i}function p(j){var A;return j&&j.state?((A=j.state).wsize=0,A.whave=0,A.wnext=0,m(j)):i}function g(j,A){var C,N;return j&&j.state?(N=j.state,A<0?(C=0,A=-A):(C=1+(A>>4),A<48&&(A&=15)),A&&(A<8||A>15)?i:(N.window!==null&&N.wbits!==A&&(N.window=null),N.wrap=C,N.wbits=A,p(j))):i}function x(j,A){var C,N;return j?(N=new u,j.state=N,N.window=null,(C=g(j,A))!==0&&(j.state=null),C):i}var b,E,S=!0;function k(j){if(S){var A;for(b=new t.Buf32(512),E=new t.Buf32(32),A=0;A<144;)j.lens[A++]=8;for(;A<256;)j.lens[A++]=9;for(;A<280;)j.lens[A++]=7;for(;A<288;)j.lens[A++]=8;for(c(1,j.lens,0,288,b,0,j.work,{bits:9}),A=0;A<32;)j.lens[A++]=5;c(2,j.lens,0,32,E,0,j.work,{bits:5}),S=!1}j.lencode=b,j.lenbits=9,j.distcode=E,j.distbits=5}function T(j,A,C,N){var V,I=j.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new t.Buf8(I.wsize)),N>=I.wsize?(t.arraySet(I.window,A,C-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):((V=I.wsize-I.wnext)>N&&(V=N),t.arraySet(I.window,A,C-N,V,I.wnext),(N-=V)?(t.arraySet(I.window,A,C-N,N,0),I.wnext=N,I.whave=I.wsize):(I.wnext+=V,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=V))),0}r.inflateReset=p,r.inflateReset2=g,r.inflateResetKeep=m,r.inflateInit=function(j){return x(j,15)},r.inflateInit2=x,r.inflate=function(j,A){var C,N,V,I,G,R,q,M,L,H,O,U,J,Z,z,B,D,X,K,re,se,fe,xe,he,_e=0,ye=new t.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return i;(C=j.state).mode===f&&(C.mode=13),G=j.next_out,V=j.output,q=j.avail_out,I=j.next_in,N=j.input,R=j.avail_in,M=C.hold,L=C.bits,H=R,O=q,fe=0;e:for(;;)switch(C.mode){case 1:if(C.wrap===0){C.mode=13;break}for(;L<16;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(2&C.wrap&&M===35615){C.check=0,ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0),M=0,L=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&M)<<8)+(M>>8))%31){j.msg="incorrect header check",C.mode=y;break}if((15&M)!=8){j.msg="unknown compression method",C.mode=y;break}if(L-=4,se=8+(15&(M>>>=4)),C.wbits===0)C.wbits=se;else if(se>C.wbits){j.msg="invalid window size",C.mode=y;break}C.dmax=1<<se,j.adler=C.check=1,C.mode=512&M?10:f,M=0,L=0;break;case 2:for(;L<16;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(C.flags=M,(255&C.flags)!=8){j.msg="unknown compression method",C.mode=y;break}if(57344&C.flags){j.msg="unknown header flags set",C.mode=y;break}C.head&&(C.head.text=M>>8&1),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0)),M=0,L=0,C.mode=3;case 3:for(;L<32;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}C.head&&(C.head.time=M),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,ye[2]=M>>>16&255,ye[3]=M>>>24&255,C.check=l(C.check,ye,4,0)),M=0,L=0,C.mode=4;case 4:for(;L<16;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}C.head&&(C.head.xflags=255&M,C.head.os=M>>8),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0)),M=0,L=0,C.mode=5;case 5:if(1024&C.flags){for(;L<16;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}C.length=M,C.head&&(C.head.extra_len=M),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0)),M=0,L=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&((U=C.length)>R&&(U=R),U&&(C.head&&(se=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),t.arraySet(C.head.extra,N,I,U,se)),512&C.flags&&(C.check=l(C.check,N,U,I)),R-=U,I+=U,C.length-=U),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(R===0)break e;U=0;do se=N[I+U++],C.head&&se&&C.length<65536&&(C.head.name+=String.fromCharCode(se));while(se&&U<R);if(512&C.flags&&(C.check=l(C.check,N,U,I)),R-=U,I+=U,se)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(R===0)break e;U=0;do se=N[I+U++],C.head&&se&&C.length<65536&&(C.head.comment+=String.fromCharCode(se));while(se&&U<R);if(512&C.flags&&(C.check=l(C.check,N,U,I)),R-=U,I+=U,se)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;L<16;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(M!==(65535&C.check)){j.msg="header crc mismatch",C.mode=y;break}M=0,L=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),j.adler=C.check=0,C.mode=f;break;case 10:for(;L<32;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}j.adler=C.check=_(M),M=0,L=0,C.mode=11;case 11:if(C.havedict===0)return j.next_out=G,j.avail_out=q,j.next_in=I,j.avail_in=R,C.hold=M,C.bits=L,2;j.adler=C.check=1,C.mode=f;case f:if(A===5||A===6)break e;case 13:if(C.last){M>>>=7&L,L-=7&L,C.mode=27;break}for(;L<3;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}switch(C.last=1&M,L-=1,3&(M>>>=1)){case 0:C.mode=14;break;case 1:if(k(C),C.mode=20,A===6){M>>>=2,L-=2;break e}break;case 2:C.mode=17;break;case 3:j.msg="invalid block type",C.mode=y}M>>>=2,L-=2;break;case 14:for(M>>>=7&L,L-=7&L;L<32;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if((65535&M)!=(M>>>16^65535)){j.msg="invalid stored block lengths",C.mode=y;break}if(C.length=65535&M,M=0,L=0,C.mode=15,A===6)break e;case 15:C.mode=16;case 16:if(U=C.length){if(U>R&&(U=R),U>q&&(U=q),U===0)break e;t.arraySet(V,N,I,U,G),R-=U,I+=U,q-=U,G+=U,C.length-=U;break}C.mode=f;break;case 17:for(;L<14;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(C.nlen=257+(31&M),M>>>=5,L-=5,C.ndist=1+(31&M),M>>>=5,L-=5,C.ncode=4+(15&M),M>>>=4,L-=4,C.nlen>286||C.ndist>30){j.msg="too many length or distance symbols",C.mode=y;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;L<3;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}C.lens[ue[C.have++]]=7&M,M>>>=3,L-=3}for(;C.have<19;)C.lens[ue[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,xe={bits:C.lenbits},fe=c(0,C.lens,0,19,C.lencode,0,C.work,xe),C.lenbits=xe.bits,fe){j.msg="invalid code lengths set",C.mode=y;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;B=(_e=C.lencode[M&(1<<C.lenbits)-1])>>>16&255,D=65535&_e,!((z=_e>>>24)<=L);){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(D<16)M>>>=z,L-=z,C.lens[C.have++]=D;else{if(D===16){for(he=z+2;L<he;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(M>>>=z,L-=z,C.have===0){j.msg="invalid bit length repeat",C.mode=y;break}se=C.lens[C.have-1],U=3+(3&M),M>>>=2,L-=2}else if(D===17){for(he=z+3;L<he;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}L-=z,se=0,U=3+(7&(M>>>=z)),M>>>=3,L-=3}else{for(he=z+7;L<he;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}L-=z,se=0,U=11+(127&(M>>>=z)),M>>>=7,L-=7}if(C.have+U>C.nlen+C.ndist){j.msg="invalid bit length repeat",C.mode=y;break}for(;U--;)C.lens[C.have++]=se}}if(C.mode===y)break;if(C.lens[256]===0){j.msg="invalid code -- missing end-of-block",C.mode=y;break}if(C.lenbits=9,xe={bits:C.lenbits},fe=c(1,C.lens,0,C.nlen,C.lencode,0,C.work,xe),C.lenbits=xe.bits,fe){j.msg="invalid literal/lengths set",C.mode=y;break}if(C.distbits=6,C.distcode=C.distdyn,xe={bits:C.distbits},fe=c(2,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,xe),C.distbits=xe.bits,fe){j.msg="invalid distances set",C.mode=y;break}if(C.mode=20,A===6)break e;case 20:C.mode=21;case 21:if(R>=6&&q>=258){j.next_out=G,j.avail_out=q,j.next_in=I,j.avail_in=R,C.hold=M,C.bits=L,o(j,O),G=j.next_out,V=j.output,q=j.avail_out,I=j.next_in,N=j.input,R=j.avail_in,M=C.hold,L=C.bits,C.mode===f&&(C.back=-1);break}for(C.back=0;B=(_e=C.lencode[M&(1<<C.lenbits)-1])>>>16&255,D=65535&_e,!((z=_e>>>24)<=L);){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(B&&!(240&B)){for(X=z,K=B,re=D;B=(_e=C.lencode[re+((M&(1<<X+K)-1)>>X)])>>>16&255,D=65535&_e,!(X+(z=_e>>>24)<=L);){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}M>>>=X,L-=X,C.back+=X}if(M>>>=z,L-=z,C.back+=z,C.length=D,B===0){C.mode=26;break}if(32&B){C.back=-1,C.mode=f;break}if(64&B){j.msg="invalid literal/length code",C.mode=y;break}C.extra=15&B,C.mode=22;case 22:if(C.extra){for(he=C.extra;L<he;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}C.length+=M&(1<<C.extra)-1,M>>>=C.extra,L-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;B=(_e=C.distcode[M&(1<<C.distbits)-1])>>>16&255,D=65535&_e,!((z=_e>>>24)<=L);){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(!(240&B)){for(X=z,K=B,re=D;B=(_e=C.distcode[re+((M&(1<<X+K)-1)>>X)])>>>16&255,D=65535&_e,!(X+(z=_e>>>24)<=L);){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}M>>>=X,L-=X,C.back+=X}if(M>>>=z,L-=z,C.back+=z,64&B){j.msg="invalid distance code",C.mode=y;break}C.offset=D,C.extra=15&B,C.mode=24;case 24:if(C.extra){for(he=C.extra;L<he;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}C.offset+=M&(1<<C.extra)-1,M>>>=C.extra,L-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){j.msg="invalid distance too far back",C.mode=y;break}C.mode=25;case 25:if(q===0)break e;if(U=O-q,C.offset>U){if((U=C.offset-U)>C.whave&&C.sane){j.msg="invalid distance too far back",C.mode=y;break}U>C.wnext?(U-=C.wnext,J=C.wsize-U):J=C.wnext-U,U>C.length&&(U=C.length),Z=C.window}else Z=V,J=G-C.offset,U=C.length;U>q&&(U=q),q-=U,C.length-=U;do V[G++]=Z[J++];while(--U);C.length===0&&(C.mode=21);break;case 26:if(q===0)break e;V[G++]=C.length,q--,C.mode=21;break;case 27:if(C.wrap){for(;L<32;){if(R===0)break e;R--,M|=N[I++]<<L,L+=8}if(O-=q,j.total_out+=O,C.total+=O,O&&(j.adler=C.check=C.flags?l(C.check,V,O,G-O):a(C.check,V,O,G-O)),O=q,(C.flags?M:_(M))!==C.check){j.msg="incorrect data check",C.mode=y;break}M=0,L=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;L<32;){if(R===0)break e;R--,M+=N[I++]<<L,L+=8}if(M!==(4294967295&C.total)){j.msg="incorrect length check",C.mode=y;break}M=0,L=0}C.mode=29;case 29:fe=1;break e;case y:fe=-3;break e;case 31:return-4;default:return i}return j.next_out=G,j.avail_out=q,j.next_in=I,j.avail_in=R,C.hold=M,C.bits=L,(C.wsize||O!==j.avail_out&&C.mode<y&&(C.mode<27||A!==4))&&T(j,j.output,j.next_out,O-j.avail_out)?(C.mode=31,-4):(H-=j.avail_in,O-=j.avail_out,j.total_in+=H,j.total_out+=O,C.total+=O,C.wrap&&O&&(j.adler=C.check=C.flags?l(C.check,V,O,j.next_out-O):a(C.check,V,O,j.next_out-O)),j.data_type=C.bits+(C.last?64:0)+(C.mode===f?128:0)+(C.mode===20||C.mode===15?256:0),(H===0&&O===0||A===4)&&fe===0&&(fe=-5),fe)},r.inflateEnd=function(j){if(!j||!j.state)return i;var A=j.state;return A.window&&(A.window=null),j.state=null,0},r.inflateGetHeader=function(j,A){var C;return j&&j.state&&2&(C=j.state).wrap?(C.head=A,A.done=!1,0):i},r.inflateSetDictionary=function(j,A){var C,N=A.length;return j&&j.state?(C=j.state).wrap!==0&&C.mode!==11?i:C.mode===11&&a(1,A,N,0)!==C.check?-3:T(j,A,N,N)?(C.mode=31,-4):(C.havedict=1,0):i},r.inflateInfo="pako inflate (from Nodeca project)"},881:(s,r,n)=>{var t=n(761),a=15,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],i=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(f,y,_,u,m,p,g,x){var b,E,S,k,T,j,A,C,N,V=x.bits,I=0,G=0,R=0,q=0,M=0,L=0,H=0,O=0,U=0,J=0,Z=null,z=0,B=new t.Buf16(16),D=new t.Buf16(16),X=null,K=0;for(I=0;I<=a;I++)B[I]=0;for(G=0;G<u;G++)B[y[_+G]]++;for(M=V,q=a;q>=1&&B[q]===0;q--);if(M>q&&(M=q),q===0)return m[p++]=20971520,m[p++]=20971520,x.bits=1,0;for(R=1;R<q&&B[R]===0;R++);for(M<R&&(M=R),O=1,I=1;I<=a;I++)if(O<<=1,(O-=B[I])<0)return-1;if(O>0&&(f===0||q!==1))return-1;for(D[1]=0,I=1;I<a;I++)D[I+1]=D[I]+B[I];for(G=0;G<u;G++)y[_+G]!==0&&(g[D[y[_+G]]++]=G);if(f===0?(Z=X=g,j=19):f===1?(Z=l,z-=257,X=o,K-=257,j=256):(Z=c,X=i,j=-1),J=0,G=0,I=R,T=p,L=M,H=0,S=-1,k=(U=1<<M)-1,f===1&&U>852||f===2&&U>592)return 1;for(;;){A=I-H,g[G]<j?(C=0,N=g[G]):g[G]>j?(C=X[K+g[G]],N=Z[z+g[G]]):(C=96,N=0),b=1<<I-H,R=E=1<<L;do m[T+(J>>H)+(E-=b)]=A<<24|C<<16|N|0;while(E!==0);for(b=1<<I-1;J&b;)b>>=1;if(b!==0?(J&=b-1,J+=b):J=0,G++,--B[I]==0){if(I===q)break;I=y[_+g[G]]}if(I>M&&(J&k)!==S){for(H===0&&(H=M),T+=R,O=1<<(L=I-H);L+H<q&&!((O-=B[L+H])<=0);)L++,O<<=1;if(U+=1<<L,f===1&&U>852||f===2&&U>592)return 1;m[S=J&k]=M<<24|L<<16|T-p|0}}return J!==0&&(m[T+J]=I-H<<24|4194304|0),x.bits=M,0}},950:s=>{s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},564:(s,r,n)=>{var t=n(761);function a(D){for(var X=D.length;--X>=0;)D[X]=0}var l=256,o=286,c=30,i=15,f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m=new Array(576);a(m);var p=new Array(60);a(p);var g=new Array(512);a(g);var x=new Array(256);a(x);var b=new Array(29);a(b);var E,S,k,T=new Array(c);function j(D,X,K,re,se){this.static_tree=D,this.extra_bits=X,this.extra_base=K,this.elems=re,this.max_length=se,this.has_stree=D&&D.length}function A(D,X){this.dyn_tree=D,this.max_code=0,this.stat_desc=X}function C(D){return D<256?g[D]:g[256+(D>>>7)]}function N(D,X){D.pending_buf[D.pending++]=255&X,D.pending_buf[D.pending++]=X>>>8&255}function V(D,X,K){D.bi_valid>16-K?(D.bi_buf|=X<<D.bi_valid&65535,N(D,D.bi_buf),D.bi_buf=X>>16-D.bi_valid,D.bi_valid+=K-16):(D.bi_buf|=X<<D.bi_valid&65535,D.bi_valid+=K)}function I(D,X,K){V(D,K[2*X],K[2*X+1])}function G(D,X){var K=0;do K|=1&D,D>>>=1,K<<=1;while(--X>0);return K>>>1}function R(D,X,K){var re,se,fe=new Array(16),xe=0;for(re=1;re<=i;re++)fe[re]=xe=xe+K[re-1]<<1;for(se=0;se<=X;se++){var he=D[2*se+1];he!==0&&(D[2*se]=G(fe[he]++,he))}}function q(D){var X;for(X=0;X<o;X++)D.dyn_ltree[2*X]=0;for(X=0;X<c;X++)D.dyn_dtree[2*X]=0;for(X=0;X<19;X++)D.bl_tree[2*X]=0;D.dyn_ltree[512]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function M(D){D.bi_valid>8?N(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function L(D,X,K,re){var se=2*X,fe=2*K;return D[se]<D[fe]||D[se]===D[fe]&&re[X]<=re[K]}function H(D,X,K){for(var re=D.heap[K],se=K<<1;se<=D.heap_len&&(se<D.heap_len&&L(X,D.heap[se+1],D.heap[se],D.depth)&&se++,!L(X,re,D.heap[se],D.depth));)D.heap[K]=D.heap[se],K=se,se<<=1;D.heap[K]=re}function O(D,X,K){var re,se,fe,xe,he=0;if(D.last_lit!==0)do re=D.pending_buf[D.d_buf+2*he]<<8|D.pending_buf[D.d_buf+2*he+1],se=D.pending_buf[D.l_buf+he],he++,re===0?I(D,se,X):(I(D,(fe=x[se])+l+1,X),(xe=f[fe])!==0&&V(D,se-=b[fe],xe),I(D,fe=C(--re),K),(xe=y[fe])!==0&&V(D,re-=T[fe],xe));while(he<D.last_lit);I(D,256,X)}function U(D,X){var K,re,se,fe=X.dyn_tree,xe=X.stat_desc.static_tree,he=X.stat_desc.has_stree,_e=X.stat_desc.elems,ye=-1;for(D.heap_len=0,D.heap_max=573,K=0;K<_e;K++)fe[2*K]!==0?(D.heap[++D.heap_len]=ye=K,D.depth[K]=0):fe[2*K+1]=0;for(;D.heap_len<2;)fe[2*(se=D.heap[++D.heap_len]=ye<2?++ye:0)]=1,D.depth[se]=0,D.opt_len--,he&&(D.static_len-=xe[2*se+1]);for(X.max_code=ye,K=D.heap_len>>1;K>=1;K--)H(D,fe,K);se=_e;do K=D.heap[1],D.heap[1]=D.heap[D.heap_len--],H(D,fe,1),re=D.heap[1],D.heap[--D.heap_max]=K,D.heap[--D.heap_max]=re,fe[2*se]=fe[2*K]+fe[2*re],D.depth[se]=(D.depth[K]>=D.depth[re]?D.depth[K]:D.depth[re])+1,fe[2*K+1]=fe[2*re+1]=se,D.heap[1]=se++,H(D,fe,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],function(ue,pe){var ke,Ie,$,te,ne,be,ve=pe.dyn_tree,je=pe.max_code,Re=pe.stat_desc.static_tree,Ge=pe.stat_desc.has_stree,Xe=pe.stat_desc.extra_bits,Ke=pe.stat_desc.extra_base,Pe=pe.stat_desc.max_length,We=0;for(te=0;te<=i;te++)ue.bl_count[te]=0;for(ve[2*ue.heap[ue.heap_max]+1]=0,ke=ue.heap_max+1;ke<573;ke++)(te=ve[2*ve[2*(Ie=ue.heap[ke])+1]+1]+1)>Pe&&(te=Pe,We++),ve[2*Ie+1]=te,Ie>je||(ue.bl_count[te]++,ne=0,Ie>=Ke&&(ne=Xe[Ie-Ke]),be=ve[2*Ie],ue.opt_len+=be*(te+ne),Ge&&(ue.static_len+=be*(Re[2*Ie+1]+ne)));if(We!==0){do{for(te=Pe-1;ue.bl_count[te]===0;)te--;ue.bl_count[te]--,ue.bl_count[te+1]+=2,ue.bl_count[Pe]--,We-=2}while(We>0);for(te=Pe;te!==0;te--)for(Ie=ue.bl_count[te];Ie!==0;)($=ue.heap[--ke])>je||(ve[2*$+1]!==te&&(ue.opt_len+=(te-ve[2*$+1])*ve[2*$],ve[2*$+1]=te),Ie--)}}(D,X),R(fe,ye,D.bl_count)}function J(D,X,K){var re,se,fe=-1,xe=X[1],he=0,_e=7,ye=4;for(xe===0&&(_e=138,ye=3),X[2*(K+1)+1]=65535,re=0;re<=K;re++)se=xe,xe=X[2*(re+1)+1],++he<_e&&se===xe||(he<ye?D.bl_tree[2*se]+=he:se!==0?(se!==fe&&D.bl_tree[2*se]++,D.bl_tree[32]++):he<=10?D.bl_tree[34]++:D.bl_tree[36]++,he=0,fe=se,xe===0?(_e=138,ye=3):se===xe?(_e=6,ye=3):(_e=7,ye=4))}function Z(D,X,K){var re,se,fe=-1,xe=X[1],he=0,_e=7,ye=4;for(xe===0&&(_e=138,ye=3),re=0;re<=K;re++)if(se=xe,xe=X[2*(re+1)+1],!(++he<_e&&se===xe)){if(he<ye)do I(D,se,D.bl_tree);while(--he!=0);else se!==0?(se!==fe&&(I(D,se,D.bl_tree),he--),I(D,16,D.bl_tree),V(D,he-3,2)):he<=10?(I(D,17,D.bl_tree),V(D,he-3,3)):(I(D,18,D.bl_tree),V(D,he-11,7));he=0,fe=se,xe===0?(_e=138,ye=3):se===xe?(_e=6,ye=3):(_e=7,ye=4)}}a(T);var z=!1;function B(D,X,K,re){V(D,0+(re?1:0),3),function(se,fe,xe,he){M(se),he&&(N(se,xe),N(se,~xe)),t.arraySet(se.pending_buf,se.window,fe,xe,se.pending),se.pending+=xe}(D,X,K,!0)}r.p=function(D){z||(function(){var X,K,re,se,fe,xe=new Array(16);for(re=0,se=0;se<28;se++)for(b[se]=re,X=0;X<1<<f[se];X++)x[re++]=se;for(x[re-1]=se,fe=0,se=0;se<16;se++)for(T[se]=fe,X=0;X<1<<y[se];X++)g[fe++]=se;for(fe>>=7;se<c;se++)for(T[se]=fe<<7,X=0;X<1<<y[se]-7;X++)g[256+fe++]=se;for(K=0;K<=i;K++)xe[K]=0;for(X=0;X<=143;)m[2*X+1]=8,X++,xe[8]++;for(;X<=255;)m[2*X+1]=9,X++,xe[9]++;for(;X<=279;)m[2*X+1]=7,X++,xe[7]++;for(;X<=287;)m[2*X+1]=8,X++,xe[8]++;for(R(m,287,xe),X=0;X<c;X++)p[2*X+1]=5,p[2*X]=G(X,5);E=new j(m,f,257,o,i),S=new j(p,y,0,c,i),k=new j(new Array(0),_,0,19,7)}(),z=!0),D.l_desc=new A(D.dyn_ltree,E),D.d_desc=new A(D.dyn_dtree,S),D.bl_desc=new A(D.bl_tree,k),D.bi_buf=0,D.bi_valid=0,q(D)},r.m=B,r.h=function(D,X,K,re){var se,fe,xe=0;D.level>0?(D.strm.data_type===2&&(D.strm.data_type=function(he){var _e,ye=4093624447;for(_e=0;_e<=31;_e++,ye>>>=1)if(1&ye&&he.dyn_ltree[2*_e]!==0)return 0;if(he.dyn_ltree[18]!==0||he.dyn_ltree[20]!==0||he.dyn_ltree[26]!==0)return 1;for(_e=32;_e<l;_e++)if(he.dyn_ltree[2*_e]!==0)return 1;return 0}(D)),U(D,D.l_desc),U(D,D.d_desc),xe=function(he){var _e;for(J(he,he.dyn_ltree,he.l_desc.max_code),J(he,he.dyn_dtree,he.d_desc.max_code),U(he,he.bl_desc),_e=18;_e>=3&&he.bl_tree[2*u[_e]+1]===0;_e--);return he.opt_len+=3*(_e+1)+5+5+4,_e}(D),se=D.opt_len+3+7>>>3,(fe=D.static_len+3+7>>>3)<=se&&(se=fe)):se=fe=K+5,K+4<=se&&X!==-1?B(D,X,K,re):D.strategy===4||fe===se?(V(D,2+(re?1:0),3),O(D,m,p)):(V(D,4+(re?1:0),3),function(he,_e,ye,ue){var pe;for(V(he,_e-257,5),V(he,ye-1,5),V(he,ue-4,4),pe=0;pe<ue;pe++)V(he,he.bl_tree[2*u[pe]+1],3);Z(he,he.dyn_ltree,_e-1),Z(he,he.dyn_dtree,ye-1)}(D,D.l_desc.max_code+1,D.d_desc.max_code+1,xe+1),O(D,D.dyn_ltree,D.dyn_dtree)),q(D),re&&M(D)},r.l=function(D,X,K){return D.pending_buf[D.d_buf+2*D.last_lit]=X>>>8&255,D.pending_buf[D.d_buf+2*D.last_lit+1]=255&X,D.pending_buf[D.l_buf+D.last_lit]=255&K,D.last_lit++,X===0?D.dyn_ltree[2*K]++:(D.matches++,X--,D.dyn_ltree[2*(x[K]+l+1)]++,D.dyn_dtree[2*C(X)]++),D.last_lit===D.lit_bufsize-1},r.g=function(D){V(D,2,3),I(D,256,m),function(X){X.bi_valid===16?(N(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):X.bi_valid>=8&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)}(D)}},744:s=>{s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},347:(s,r,n)=>{var t,a;n.d(r,{s:()=>t,S:()=>a}),function(l){l[l.Inport=0]="Inport",l[l.Outport=1]="Outport",l[l.Undefined=2]="Undefined"}(t||(t={})),function(l){l[l.STOPPED=0]="STOPPED",l[l.RUNNING=1]="RUNNING"}(a||(a={}))},676:(s,r,n)=>{n.d(r,{D:()=>t});const t=0},641:(s,r,n)=>{var t;n.d(r,{OM:()=>o,Le:()=>l,nc:()=>a,n_:()=>c}),function(i){i[i.Float32Audio=0]="Float32Audio",i[i.TypedArray=1]="TypedArray"}(t||(t={}));class a{constructor(){this.type=t.TypedArray}serialize(){return{type:this.type}}}class l{constructor(f,y){this.channels=0,this.sampleRate=0,this.type=t.Float32Audio,this.channels=f,this.sampleRate=y}static fromAudioBuffer(f){return new l(f.numberOfChannels,f.sampleRate)}get isInterleaved(){return!0}serialize(){return{channels:this.channels,sampleRate:this.sampleRate,type:this.type}}}class o{constructor(f,y){this.buffer=f,this._=y}getAsAudioBuffer(f){if(this._ instanceof l&&this._.channels>0){const u=new Float32Array(this.buffer),m=u.length/this._.channels,p=f.createBuffer(this._.channels,m,this._.sampleRate);for(let g=0;g<this._.channels;g++){const x=p.getChannelData(g);for(let b=0,E=x.length;b<E;b++)x[b]=u[b*p.numberOfChannels+g]}return p}const y=new Float32Array(this.buffer),_=f.createBuffer(1,y.length,f.sampleRate);return _.copyToChannel(y,0),_}}const c=i=>{switch(i.type){case t.Float32Audio:return new l(i.channels,i.sampleRate);case t.TypedArray:return new a;default:throw new Error(`Unable to deserialize RNBODataDesc of type ${i.type}`)}}},191:(s,r,n)=>{n.d(r,{v:()=>c});var t=n(163),a=n(347),l=n(389),o=n(133);class c{constructor(){this.I=0,this.M=44100,this.A=64,this.outgoingEvent=new l.BM,this.parameterChangeEvent=new l.BM,this.B=this.sampsToMs(this.A)}static getNonConversionObject(){return{applyStepsToNormalizedParameterValue:function(f){return f},convertToNormalizedParameterValue:function(f){return f},convertFromNormalizedParameterValue:function(f){return f},getNumParameters:function(){return 0},constrainParameterValue:function(f){return f},isPolyphonic:!1,subpatches:[]}}static deserializeConversion(f){if(f){const y={},_=Object.keys(f);for(let u=0;u<_.length;u++){const m=_[u];if(m==="subpatches"){const p=Object.keys(f.subpatches);for(let g=0;g<p.length;g++){const x=p[g],b=f.subpatches[x],E=c.deserializeConversion(b);b.isPolyphonic?y[x]=[E]:y[x]=E}}else y[m]=o.evalFunction(f[m])}return y}return this.getNonConversionObject()}getSampleRate(){return this.M}getSamplesPerBlock(){return this.A}sampsToMs(f){return f/this.M*1e3}getNumInputChannels(){return this.T?this.T.numInputChannels:0}getNumOutputChannels(){return this.T?this.T.numOutputChannels:0}getNumMIDIInputPorts(){return this.T?this.T.numMidiInputPorts:0}getNumMIDIOutputPorts(){return this.T?this.T.numMidiOutputPorts:0}getNumParameters(){return this.T?this.T.numParameters:0}getNumSignalInParameters(){return this.T?this.T.numSignalInParameters:0}getNumSignalOutParameters(){return this.T?this.T.numSignalOutParameters:0}getPatcherSerial(){return this.T!==void 0?this.T.patcherSerial:0}getParameterName(f){if(!this.T||f>=this.T.parameters.length)throw new Error(`Parameter index ${f} out of bounds.`);return this.T.parameters[f].name}getParameterId(f){if(!this.T||f>=this.T.parameters.length)throw new Error(`Parameter index ${f} out of bounds.`);return this.T.parameters[f].paramId}getParameterToNormalizedFunction(f){return y=>this.P.convertToNormalizedParameterValue(f,y)}getParameterFromNormalizedFunction(f){return y=>this.P.convertFromNormalizedParameterValue(f,y)}constrainParameterValue(f){return y=>this.P.constrainParameterValue(f,y)}getParameterInfo(f){if(!this.T||f>=this.T.parameters.length)throw new Error(`Parameter index ${f} out of bounds.`);const y=this.T.parameters[f];let _,u;switch(y.type){case"ParameterTypeBang":u=o.ParameterTypeBang;break;case"ParameterTypeCount":u=o.ParameterTypeCount;break;case"ParameterTypeList":u=o.ParameterTypeList;break;case"ParameterTypeNumber":u=o.ParameterTypeNumber;break;case"ParameterTypeSignal":u=o.ParameterTypeSignal;break;default:throw new Error(`Unknown Parameter Type from patcher description ${y.type}`)}switch(y.ioType){case"IOTypeInput":_=o.IOTypeInput;break;case"IOTypeOutput":_=o.IOTypeOutput;break;case"IOTypeUndefined":_=o.IOTypeUndefined;break;default:throw new Error(`Unknown Parameter IOType from patcher description ${y.type}`)}return{displayName:y.displayName,enumValues:y.enumValues,exponent:y.exponent,id:y.paramId,index:f,initialValue:y.initialValue,ioType:_,isEnum:y.isEnum,max:y.maximum,min:y.minimum,name:y.name,signalIndex:y.signalIndex,steps:y.steps,type:u,unit:y.unit,visible:y.visible}}getNumExternalDataRefs(){return this.T!==void 0?this.T.externalDataRefs.length:0}getExternalDataId(f){return this.T!==void 0?this.T.externalDataRefs[f].id:""}getExternalDataRefIds(){let f;return this.T&&(f=[],Object.keys(this.T.externalDataRefs).forEach(y=>{let _=this.T.externalDataRefs[y];f.push(_.id)})),f}getExternalDataRefInfos(){return this.T!==void 0?this.T.externalDataRefs:[]}getNumMessages(){return this.T!==void 0?this.T.inports.length+this.T.outports.length:0}getMessageInfos(){let f=[];return this.T!==void 0&&(Object.keys(this.T.outports).forEach(y=>{f.push({tag:this.T.outports[y].tag,type:a.s.Outport,meta:this.T.outports[y].meta})}),Object.keys(this.T.inports).forEach(y=>{f.push({tag:this.T.inports[y].tag,type:a.s.Inport,meta:this.T.inports[y].meta})})),f}removeAllSubscriptions(){this.outgoingEvent.removeAllSubscriptions(),this.parameterChangeEvent.removeAllSubscriptions()}setPatcherDesc(f){return(0,t.mG)(this,void 0,void 0,function*(){this.T=f,this.P=c.deserializeConversion(this.T.paramConversion)})}}},916:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>WASMEngine});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(163),_baseEngine__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(191),_wasmHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(158),_event__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(555);class WASMEngine extends _baseEngine__WEBPACK_IMPORTED_MODULE_0__.v{getCurrentTime(){return this.R.getCurrentTime()}setCurrentTime(s){this.R.isReady()&&this.R.setCurrentTime(s)}prepareToProcess(s,r,n){(n||s!==this.M||r!==this.A)&&this.R.prepareToProcess(s,r)}process(s,r,n,t,a,l,o){this.R.process(s,r,n,t,a)}scheduleMidiEvent(s,r){this.scheduleEvent(new _event__WEBPACK_IMPORTED_MODULE_2__.Ym(this.I,s,r))}handleParameterEvent(s){this.parameterChangeEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.DB(s.time,s.index,s.value,s.source))}handleMidiEvent(s){this.outgoingEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.Ym(s.time,s.port,[s.b1,s.b2,s.b3],void 0))}handleMessageEvent(s){this.outgoingEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.f3(s.time,this.R.resolveTag(s.tag),s.type===0?s.numValue:s.type===1?this.R.retrieveArray(s.listValue):void 0,this.R.resolveTag(s.objectId)))}handlePresetEvent(s){this.outgoingEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.bt(s.time,_event__WEBPACK_IMPORTED_MODULE_2__.l0.Touched))}getParameterValue(s){return this.R.getParameterValue(s)}get isSync(){return!0}scheduleEvent(s){this.R.scheduleEvent(s)}setPatcherCode(code){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){return new Promise((resolve,reject)=>{let restoredRnboModule;const restoredWASM=code+"restoredRnboModule = rnbo_module;";eval(restoredWASM),restoredRnboModule().then(s=>(delete s.then,this.R=new _wasmHelper__WEBPACK_IMPORTED_MODULE_1__.z(this,s),resolve()))})})}setExternalData(s,r,n){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){this.R.setExternalData(s,r,n)})}releaseExternalData(s){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){const[r,n]=this.R.releaseExternalData(s);return{data:r,typeDesc:n}})}getPreset(){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){return JSON.parse(this.R.getPreset())})}setPreset(s){this.R.setPreset(JSON.stringify(s))}}},158:(s,r,n)=>{n.d(r,{z:()=>o});var t=n(641),a=n(555),l=n(856);class o{constructor(i,f){this.O=0,this.C=0,this.N=!1,this.k=new l.aO,this.U=f;let y=new this.U.CoreObject;this.j=y;let _={handleParameterEvent:i.handleParameterEvent.bind(i),handleMidiEvent:i.handleMidiEvent.bind(i),handleMessageEvent:i.handleMessageEvent.bind(i),handlePresetEvent:i.handlePresetEvent.bind(i)},u=this.U.EventHandler.implement(_);this.F=y.createParameterInterface(u);for(let m=0;m<y.getNumParameters();m++){let p=y.getParameterInfo(m);this.k.addParam(p,y.getParameterName(m))}this.O=y.getNumInputChannels()+y.getNumSignalInParameters(),this.C=y.getNumOutputChannels(),this.N=!0}isReady(){return this.N}pushArray(i){let f=this.j.getArrayPassingHEAP(i.length);return this.U.HEAPF64.set(i,f>>3),f}retrieveArray(i){let f=[];for(let y=0;y<i.size();y++)f.push(i.get(y));return f}setExternalData(i,f,y){const _=new Uint8Array(f),u=this.j.getNewMemoryBuffer(_.byteLength);this.U.HEAPU8.set(_,u),y instanceof t.Le?this.j.setExternalAudioBuffer(i,u,_.byteLength,y.channels,y.sampleRate):y instanceof t.nc&&this.j.setExternalUntypedBuffer(i,u,_.byteLength)}releaseExternalData(i){let f,y=this.j.getDataRefIndex(i),_=this.j.getDataRefType(y),u=this.j.getDataRefData(y),m=new Uint8Array(u.sizeInBytes);return m.set(this.U.HEAPU8.subarray(u.data,u.data+u.sizeInBytes)),f=_.type==1?new t.Le(_.channels,_.sampleRate):new t.nc,this.j.releaseDataRef(y),[m.buffer,f]}getCurrentTime(){return this.j.getCurrentTime()}setCurrentTime(i){this.j.setCurrentTime(i)}prepareToProcess(i,f){this.j.prepareToProcess(i,f)}process(i,f,y,_,u,m){let p=0,g=0;for(let x=0;x<f&&p<this.O;x++){let b=i[x],E=this.j.getInputChannel(p);this.U.HEAPF64.set(b,E>>3),p++}if(m)for(let x=p;x<this.O;x++){let b=this.k.getParamName(x);if(b!==void 0){let E=this.j.getInputChannel(x);this.U.HEAPF64.set(this.k.getParamArray(x,m[b],u),E>>3),p++}}this.j.process(p,this.C,u);for(let x=0;x<_&&g<this.C;x++){let b=y[x],E=this.j.getOutputChannel(g)>>3;b.set(this.U.HEAPF64.subarray(E,E+b.length)),g++}}resolveTag(i){return this.j.resolveTag(i)}scheduleEvent(i){i.type===a.m5.MIDIEvent?this.j.scheduleMidiEvent(i.time,i.port,i.data[0],i.data[1],i.data[2]):i.type===a.m5.ParameterEvent?this.j.scheduleParameterEvent(i.target,i.time,i.value,i.source):i.type===a.m5.MessageEvent?Array.isArray(i.payload)?this.j.sendListMessage(i.tag,i.objectId,this.pushArray(i.payload),i.payload.length,i.time):typeof i.payload=="number"?this.j.sendNumMessage(i.tag,i.objectId,i.payload,i.time):i.payload===void 0&&this.j.sendBangMessage(i.tag,i.objectId,i.time):i.type===a.m5.TransportEvent?this.j.scheduleTransportEvent(i.time,i.state):i.type===a.m5.TempoEvent?this.j.scheduleTempoEvent(i.time,i.tempo):i.type===a.m5.BeatTimeEvent?this.j.scheduleBeatTimeEvent(i.time,i.beattime):i.type===a.m5.TimeSignatureEvent&&this.j.scheduleTimeSignatureEvent(i.time,i.numerator,i.denominator)}getNumParameters(){return this.j.getNumParameters()}getParameterValue(i){return this.j.getParameterValue(i)}numIns(){return this.O}numOuts(){return this.C}getPreset(){return this.j.getPreset()}setPreset(i){this.j.setPreset(i)}}},555:(s,r,n)=>{n.d(r,{j4:()=>i,J0:()=>b,J9:()=>f,Lk:()=>y,VH:()=>a,m5:()=>t,Ym:()=>u,f3:()=>_,DB:()=>m,bt:()=>p,l0:()=>l,j6:()=>S,gs:()=>x,QU:()=>E,cr:()=>g,gA:()=>o,f4:()=>k});var t,a,l,o,c=n(676);(function(T){T[T.BufferTransfer=0]="BufferTransfer",T[T.ClockEvent=1]="ClockEvent",T[T.DataRefEvent=2]="DataRefEvent",T[T.MessageEvent=3]="MessageEvent",T[T.MIDIEvent=4]="MIDIEvent",T[T.ParameterEvent=5]="ParameterEvent",T[T.PresetEvent=6]="PresetEvent",T[T.StartupEvent=7]="StartupEvent",T[T.TransportEvent=8]="TransportEvent",T[T.TempoEvent=9]="TempoEvent",T[T.BeatTimeEvent=10]="BeatTimeEvent",T[T.TimeSignatureEvent=11]="TimeSignatureEvent"})(t||(t={}));class i{constructor(j=c.D,A){this.invalid=!1,this.time=j,this.eventTarget=A}serialize(){return{eventTarget:this.eventTarget,invalid:this.invalid,source:this.source,time:this.time}}}class f extends i{constructor(j,A,C,N){super(j,N),this.type=t.ClockEvent,this.clockIndex=A,this.value=C}get hasValue(){return this.value!==void 0}serialize(){return Object.assign(super.serialize(),{clockIndex:this.clockIndex,type:this.type,value:this.value})}}(function(T){T[T.Update=1]="Update"})(a||(a={}));class y extends i{constructor(j,A,C,N){super(j,N),this.type=t.DataRefEvent,this.dataRefIndex=A,this.action=C}serialize(){return Object.assign(super.serialize(),{action:this.action,dataRefIndex:this.dataRefIndex,type:this.type})}}class _ extends i{constructor(j,A,C,N="",V){super(j,V),this.type=t.MessageEvent,this.objectId=N,this.tag=A,this.payload=C}serialize(){return Object.assign(super.serialize(),{payload:this.payload,objectId:this.objectId,tag:this.tag,type:this.type})}}class u extends i{constructor(j,A,C,N){if(super(j,N),this.type=t.MIDIEvent,C.length>3)throw new Error(`MIDIData can only contain a maximum of 3 bytes. Received ${C.length}`);if(this.data=C,this.data.length<3){const I=C.length;this.data.length=3,this.data=this.data.fill(void 0,I,3)}let V=0;for(let I=0;I<3;I++)C[I]!==void 0&&V++;if(V<1)throw new Error("MIDIData must at least have the first byte set.");this.length=V,this.status=240&C[0],this.channel=15&C[0],this.port=A}serialize(){return Object.assign(super.serialize(),{channel:this.channel,data:this.data,port:this.port,type:this.type})}}class m extends i{constructor(j,A,C,N,V){super(j,V),this.type=t.ParameterEvent,this.target=A,this.value=C,this.source=N}serialize(){return Object.assign(super.serialize(),{target:this.target,type:this.type,value:this.value})}}(function(T){T[T.Set=1]="Set",T[T.Touched=2]="Touched"})(l||(l={}));class p extends i{constructor(j,A,C){super(j,void 0),this.type=t.PresetEvent,this.action=A,this.preset=C}serialize(){return Object.assign(super.serialize(),{action:this.action,type:this.type,preset:this.preset})}}class g extends i{constructor(j,A){super(j,void 0),this.type=t.TransportEvent,this.state=A}serialize(){return Object.assign(super.serialize(),{state:this.state,type:this.type})}}class x extends i{constructor(j,A){super(j,void 0),this.type=t.TempoEvent,this.tempo=A}serialize(){return Object.assign(super.serialize(),{tempo:this.tempo,type:this.type})}}class b extends i{constructor(j,A){super(j,void 0),this.type=t.BeatTimeEvent,this.beattime=A}serialize(){return Object.assign(super.serialize(),{beattime:this.beattime,type:this.type})}}class E extends i{constructor(j,A,C){super(j,void 0),this.type=t.TimeSignatureEvent,this.numerator=A,this.denominator=C}serialize(){return Object.assign(super.serialize(),{numerator:this.numerator,denominator:this.denominator,type:this.type})}}(function(T){T[T.BEGIN=0]="BEGIN",T[T.END=1]="END"})(o||(o={}));class S extends i{constructor(j,A){super(j,void 0),this.type=t.StartupEvent,this.phase=A}serialize(){return Object.assign(super.serialize(),{phase:this.phase,type:this.type})}}const k=T=>{switch(T.type){case t.ClockEvent:return new f(T.time,T.clockIndex,T.value,T.eventTarget);case t.DataRefEvent:return new y(T.time,T.dataRefIndex,T.action,T.eventTarget);case t.MessageEvent:return new _(T.time,T.tag,T.payload,T.objectId,T.eventTarget);case t.MIDIEvent:return new u(T.time,T.port,T.data,T.eventTarget);case t.ParameterEvent:return new m(T.time,T.target,T.value,T.source,T.eventTarget);case t.PresetEvent:return new p(T.time,T.action,T.preset);case t.TransportEvent:return new g(T.time,T.state);case t.TempoEvent:return new x(T.time,T.tempo);case t.BeatTimeEvent:return new b(T.time,T.beattime);case t.TimeSignatureEvent:return new E(T.time,T.numerator,T.denominator);case t.StartupEvent:return new S(T.time,T.phase);default:throw new Error(`Unable to deserialize RNBOEvent of type ${T.type}`)}}},400:(s,r,n)=>{var t,a;n.d(r,{r:()=>t,E:()=>a}),function(l){l[l.Number=0]="Number",l[l.Bang=1]="Bang",l[l.List=2]="List",l[l.Signal=3]="Signal",l[l.Count=4]="Count",l[l.Enum=5]="Enum"}(t||(t={})),function(l){l[l.All=0]="All",l[l.Internal=1]="Internal"}(a||(a={}))},856:(s,r,n)=>{n.d(r,{jN:()=>i,IR:()=>l,V2:()=>c,BX:()=>o,EX:()=>t.E,rH:()=>t.r,aO:()=>_,zT:()=>y});var t=n(400),a=n(389);function l(u){return class extends u{constructor(...m){super(),this.changeEvent=new a.BM,this.L=new a.BM;const p=m[0];this.X=p.notificationSetting,this.convertFromNormalizedValue=p.scaling.convertFromNormalized,this.convertToNormalizedValue=p.scaling.convertToNormalized,this.constrainParameterValue=p.scaling.constrainParameterValue,this.initialValue=p.initialValue,this.V=p.initialValue,this.displayName=p.displayName||p.name,this.exponent=p.exponent,this.id=p.id,this.index=p.index,this.min=p.min,this.max=p.max,this.name=p.name,this.steps=p.steps,this.unit=p.unit||""}get notificationSetting(){return this.X}get normalizedValue(){return this.convertToNormalizedValue(this.V)}set normalizedValue(m){this.q(this.convertFromNormalizedValue(m))}$(m){this.X=m}q(m){m=this.constrainParameterValue(m),this.V!==m&&(this.V=m,this.L.emit(this),this.notificationSetting===t.E.All&&this.changeEvent.emit(m))}W(m){this.V=m,this.changeEvent.emit(m)}}}class o extends l(Object){constructor(m){super(m),this.type=t.r.Number}get value(){return this.V}set value(m){this.q(m)}}class c extends l(Object){constructor(m){super(m),this.type=t.r.Enum,this.G=m.enumValues}get enumValues(){return this.G.slice()}get enumValue(){return this.G[this.value]}set enumValue(m){const p=this.G.indexOf(m);if(p<0)throw new Error(`Invalid EnumValue. ${m} is not an available value on the enum parameter ${this.name}`);this.value=p}get value(){return this.V}set value(m){this.q(m)}}class i extends l(Object){constructor(){super(...arguments),this.type=t.r.Bang}get isActive(){return this.V===1}bang(){this.q(1)}}var f=n(133);const y=(u,m,p,g)=>u.type===t.r.Number&&u.enumValues.length?new c(Object.assign(Object.assign({},u),{scaling:g,index:m,notificationSetting:p})):u.type===t.r.Bang?new i(Object.assign(Object.assign({},u),{scaling:g,index:m,notificationSetting:p})):(u.type,t.r.Number,new o(Object.assign(Object.assign({},u),{scaling:g,index:m,notificationSetting:p})));class _{constructor(){this.K={},this.Y=new Float32Array(128)}addParam(m,p){m.type==f.ParameterTypeSignal&&m.ioType===f.IOTypeInput&&(this.K[m.signalIndex]={name:p,param:new Float32Array(128)})}getParamName(m){let p=this.K[m];return p!==void 0?p.name:void 0}getParamArray(m,p,g){if(p.length==g)return p;{let x=this.K[m];return x.param.length!=g&&(x.param=new Float32Array(g)),x.param.fill(p[0])}}}},389:(s,r,n)=>{n.d(r,{f8:()=>t,e1:()=>a,I7:()=>l,EL:()=>c,BM:()=>f});const t=(()=>{try{if(typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"){const y=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(y instanceof WebAssembly.Module)return new WebAssembly.Instance(y)instanceof WebAssembly.Instance}}catch{}return!1})();class a{fromRNBOtime(_){return .001*_}toRNBOtime(_){return 1e3*_}}const l=typeof isSecureContext<"u"&&isSecureContext&&typeof AudioWorkletNode<"u";let o=Math.pow(10,4);const c=()=>(o>=Number.MAX_SAFE_INTEGER&&(o=Math.pow(10,4)),parseInt(`${Date.now().toString(10).slice(-3)}${(o++).toString(10).slice(-4)}`,10)),i=y=>y.slice();class f{constructor(){this.Z=[],this.H=[]}get listenerCount(){return this.Z.length+this.H.length}emit(_){if(this.Z.length){const u=i(this.Z);for(let m=0,p=u.length;m<p;m++)u[m](_)}if(this.H.length){const u=i(this.H);for(let m=0,p=u.length;m<p;m++)u[m](_);u.forEach(m=>this.unsubscribe(m))}}once(_){return this.H.push(_),{unsubscribe:()=>this.unsubscribe(_)}}subscribe(_){return this.Z.push(_),{unsubscribe:()=>this.unsubscribe(_)}}unsubscribe(_){const u=this.Z.indexOf(_);u>=0&&this.Z.splice(u,1);const m=this.H.indexOf(_);m>=0&&this.H.splice(m,1)}removeAllSubscriptions(){this.Z=[],this.H=[]}}},163:(s,r,n)=>{function t(a,l,o,c){return new(o||(o=Promise))(function(i,f){function y(m){try{u(c.next(m))}catch(p){f(p)}}function _(m){try{u(c.throw(m))}catch(p){f(p)}}function u(m){var p;m.done?i(m.value):(p=m.value,p instanceof o?p:new o(function(g){g(p)})).then(y,_)}u((c=c.apply(a,l||[])).next())})}n.d(r,{mG:()=>t})},264:s=>{s.exports={src:[{code:'class RNBOPatcher{constructor(){this._currentTime=0,this.audioProcessSampleCount=0,this.sampleOffsetIntoNextAudioBuffer=0,this.vs=0,this.maxvs=0,this.sr=44100,this.invsr=2267573696e-14,this.zeroBuffer=0,this.dummyBuffer=0,this.voiceIndex=0,this.noteNumber=0}getParameterIndexForID(e){return-1}getNumMidiInputPorts(){return 0}processMidiEvent(e,t,s,r){this.updateTime(e)}getNumMidiOutputPorts(){return 0}process(e,t,s,r,i){this.vs=i,this.updateTime(this.getEngine().getCurrentTime()),this.audioProcessSampleCount=this.msToSamps(this._currentTime,this.sr)}prepareToProcess(e,t){this.vs=t,this.maxvs=t,this.zeroBuffer=resizeSignal(this.zeroBuffer,0,t),this.dummyBuffer=resizeSignal(this.dummyBuffer,0,t),this.sr=e,this.invsr=1/e}msToSamps(e,t){return rnbo_floor(e*t*.001)}sampsToMs(e){return e*(1e3*this.invsr)}getNumInputChannels(){return 0}getNumOutputChannels(){return 0}getDataRef(e){return 0}getNumDataRefs(){return 0}fillDataRef(e,t){e}processDataViewUpdate(e,t){this.updateTime(t)}initialize(e){this.assign_defaults(),this.setState(e),this.initializeObjects(e),this.allocateDataRefs(),this.startup(e)}initializeObjects(e){}allocateDataRefs(){}startup(e){}setIsMuted(e){}getPatcherSerial(){return 7}getState(e){e[eventTargetKey]=this,e[patcherSerialKey]=this.getPatcherSerial(),e.p7=1,e.p7_noteNumber=this.noteNumber}setState(e){e[patcherSerialKey]==this.getPatcherSerial()&&(containsValue(e[eventTargetKey])&&this.getEngine().updatePatcherEventTarget(e[eventTargetKey],this),containsValue(e.p7_noteNumber)&&(this.noteNumber=e.p7_noteNumber))}setParameterValue(e,t,s){this.updateTime(s)}processParameterEvent(e,t,s){this.setParameterValue(e,t,s)}processNormalizedParameterEvent(e,t,s){this.setParameterValueNormalized(e,t,s)}getParameterValue(e){return 0}getNumSignalInParameters(){return 0}getNumParameters(){return 0}getParameterName(e){return"bogus"}getParameterId(e){return"bogus"}getParameterInfo(e,t){e}sendParameter(e){this.getEngine().notifyParameterValueChanged(e,this.getParameterValue(e))}processClockEvent(e,t,s,r){this.updateTime(e)}processOutletAtCurrentTime(e,t,s){}processOutletEvent(e,t,s,r){this.updateTime(r),this.processOutletAtCurrentTime(e,t,s)}sendOutlet(e,t){this.getEngine().sendOutlet(this,e,t)}schedule(e,t){this.getEngine().scheduleClockEvent(this,e,t+this._currentTime)}scheduleValue(e,t,s){this.getEngine().scheduleClockEventWithValue(this,e,t+this._currentTime,s)}stop(e){this.getEngine().flushClockEvents(this,e,!1)}stopWithValue(e,v){this.getEngine().flushClockEventsWithValue(this,e,v,!1)}processNumMessage(e,o,t,s){this.updateTime(t)}processListMessage(e,o,t,s){this.updateTime(t)}resolveTag(e){return""}sendMidiEvent(e,t,s,r){this.getEngine().sendMidiEvent(e,t,s,r)}sendMidiEventList(e,t){this.getEngine().sendMidiEventList(e,t)}updateTime(e){this._currentTime=e,this.sampleOffsetIntoNextAudioBuffer=this.msToSamps(e,this.sr)-this.vs-this.audioProcessSampleCount}assign_defaults(){}setEngineAndPatcher(e,t){this._engineInterface=e,this._parentPatcher=t}getEngine(){return this._engineInterface}getPatcher(){return this._parentPatcher}}rnboObj=new RNBOPatcher;',encoding:"utf-8",type:"js"}],options:{classname:"rnbomatic",minifyOutput:!0},desc:{parameters:[],numParameters:0,numSignalInParameters:0,layouts:[{name:"layout",boxes:[]}],numInputChannels:0,numOutputChannels:0,patcherSerial:0,externalDataRefs:[]}}}},__webpack_module_cache__={};function __webpack_require__(s){var r=__webpack_module_cache__[s];if(r!==void 0)return r.exports;var n=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=s=>{var r=s&&s.J?()=>s.default:()=>s;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(s,r)=>{for(var n in r)__webpack_require__.o(r,n)&&!__webpack_require__.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:r[n]})},__webpack_require__.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r),__webpack_require__.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"J",{value:!0})};var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BangParameter:()=>o.jN,BaseDevice:()=>x,BaseEvent:()=>i.j4,BeatTimeEvent:()=>i.J0,CommonParameterMixin:()=>o.IR,DataBuffer:()=>a.OM,DeviceType:()=>p,EnumParameter:()=>o.V2,EventSubject:()=>l.BM,EventType:()=>i.m5,MIDIEvent:()=>i.Ym,MessageEvent:()=>i.f3,MessagePortType:()=>t.s,NumberParameter:()=>o.BX,ParameterNotificationSetting:()=>o.EX,ParameterType:()=>o.rH,PresetEvent:()=>i.bt,RNBOPresetEventAction:()=>i.l0,ScriptDevice:()=>V,TempoEvent:()=>i.gs,TimeNow:()=>H.D,TimeSignatureEvent:()=>i.QU,TransportEvent:()=>i.cr,TransportState:()=>t.S,WorkletDevice:()=>L,createDevice:()=>J,version:()=>O});var s=__webpack_require__(163),r=__webpack_require__(845),n=__webpack_require__.n(r),t=__webpack_require__(347),a=__webpack_require__(641),l=__webpack_require__(389),o=__webpack_require__(856),c=__webpack_require__(400),i=__webpack_require__(555);const f={notificationSetting:c.E.All};class y{constructor(z){this.tt=new Map,this.et=new Map,this.id=(0,l.EL)(),this.parameterChangeEvent=new l.BM,this.rt=D=>{const X=this.tt.get(D.target);if(!X)return;const K=D.value;X.type!==c.r.Bang&&K===X.value||(X.W(K),this.parameterChangeEvent.emit(X))},this.nt=D=>{const X=D.index,K=D.type===c.r.Bang?1:D.value,re=new i.DB(0,X,K,this.id,void 0);this.it&&this.it.scheduleEvent(re),this.notificationSetting===c.E.All&&this.parameterChangeEvent.emit(D)};const B=Object.assign({},f,z);this.X=B.notificationSetting}st(z){return this.tt.get(z)||void 0}ot(){for(const z of this.tt.values())z.L.removeAllSubscriptions(),z.changeEvent.removeAllSubscriptions();this.tt.clear(),this.et.clear()}ut(){if(!this.it)throw new Error("Cannot populate ParameterInterface without setting engine first.");this.ot();for(let z=0,B=this.it.getNumParameters();z<B;z++){const D=this.it.getParameterInfo(z);if(!D||!D.visible)continue;const X=(0,o.zT)(D,z,this.notificationSetting,{convertFromNormalized:this.it.getParameterFromNormalizedFunction(z),convertToNormalized:this.it.getParameterToNormalizedFunction(z),constrainParameterValue:this.it.constrainParameterValue(z)});X.L.subscribe(this.nt),this.tt.set(z,X),this.et.set(D.id,X)}}setEngine(z){if(this.it)throw new Error("ParamInterface already has an engine, which can't be overridden.");this.it=z,this.it.parameterChangeEvent.subscribe(this.rt),this.ut()}get notificationSetting(){return this.X}set notificationSetting(z){for(const B of this.tt.values())B.$(z);this.X=z}get numParameters(){return this.tt.size}get parameters(){return Array.from(this.tt.values())}get parametersById(){return this.et}getParameterName(z){const B=this.st(z);return B?B.name:void 0}destroy(){this.it.parameterChangeEvent.unsubscribe(this.rt),this.it=void 0,this.ot(),this.parameterChangeEvent.removeAllSubscriptions()}}var _;function u(Z){return Z.file!==void 0}function m(Z){return Z.url!==void 0}(function(Z){Z[Z.AudioBuffer=1]="AudioBuffer",Z[Z.DataBuffer=2]="DataBuffer",Z[Z.ReferenceBuffer=3]="ReferenceBuffer"})(_||(_={}));var p,g=__webpack_require__(834).Buffer;(function(Z){Z.Script="script",Z.Worklet="worklet",Z.Invalid="invalid"})(p||(p={}));class x{constructor({context:z,parameterNotificationSetting:B,type:D}){this.ht=!1,this.ft="wasm",this.ct=new l.e1,this.lt=!0,this.midiEvent=new l.BM,this.messageEvent=new l.BM,this.parameterChangeEvent=new l.BM,this.invalidateEvent=new l.BM,this.presetTouchedEvent=new l.BM,this.dt=X=>{switch(X.type){case i.m5.ClockEvent:case i.m5.DataRefEvent:case i.m5.StartupEvent:break;case i.m5.MIDIEvent:return void this.midiEvent.emit(X);case i.m5.MessageEvent:return void this.messageEvent.emit(X);case i.m5.PresetEvent:if(X.action==i.l0.Touched)return void this.presetTouchedEvent.emit();default:throw console.error(X),new Error(`Unknown or unsupported RNBOEvent type "${X.type}"`)}},this.gt=X=>{this.parameterChangeEvent.emit(X)},this._t=z,this.yt=D,this.F=new y({notificationSetting:B})}vt(){if(this.ht)throw new Error("Error while trying to overwrite immutable patcher of an existing device. Please create a new Device using RNBO.createDevice instead.")}It(z,B,D){this.it&&this.it.prepareToProcess(z,B,D)}wt(){if(this.isInvalid)throw new Error("Error: This device has become invalid due to creating a new device from it and is therefore unusable.")}Et(z){const B=g.from(z.code,z.encoding);return z.compression==="zlib"?n().inflate(B.toString("binary"),{to:"string"}):B.toString("utf-8")}get context(){return this.wt(),this._t}get inports(){return this.wt(),this.it.getMessageInfos().filter(z=>z.type===t.s.Inport)}get isValid(){return this.lt}get isInvalid(){return!this.lt}get numInputChannels(){return this.wt(),this.it?this.it.getNumInputChannels():0}get numOutputChannels(){return this.wt(),this.it?this.it.getNumOutputChannels():0}get numMIDIInputPorts(){return this.wt(),this.it?this.it.getNumMIDIInputPorts():0}get numMIDIOutputPorts(){return this.wt(),this.it?this.it.getNumMIDIOutputPorts():0}get numParameters(){return this.wt(),this.F.numParameters}get outports(){return this.wt(),this.it.getMessageInfos().filter(z=>z.type===t.s.Outport)}get parameters(){return this.wt(),this.F.parameters}get messages(){return this.wt(),this.it.getMessageInfos()}get parametersById(){return this.wt(),this.F.parametersById}get parameterNotificationSetting(){return this.wt(),this.F.notificationSetting}set parameterNotificationSetting(z){this.wt(),this.F.notificationSetting=z}get sourceType(){return this.ft}get type(){return this.isInvalid?p.Invalid:this.yt}get dataBufferIds(){return this.it.getExternalDataRefIds()}get dataBufferDescriptions(){return this.it.getExternalDataRefInfos()}setDataBuffer(z,B,D,X){return(0,s.mG)(this,void 0,void 0,function*(){if(!this.dataBufferDescriptions.find(se=>se.id===z))throw new Error(`Unknown DataBuffer id. A DataBuffer with the id "${z}" does not exist within the device.`);let K,re;if(B instanceof AudioBuffer){re=a.Le.fromAudioBuffer(B);const se=B.numberOfChannels,fe=new Float32Array(B.length*B.numberOfChannels),xe=[];for(let he=0;he<se;he++){const _e=new Float32Array(B.length);B.copyFromChannel(_e,he,0),xe.push(_e)}for(let he=0;he<se;he++)for(let _e=0,ye=B.length;_e<ye;_e++)fe[_e*se+he]=xe[he][_e];K=fe.buffer}else{if(!D||D<0||isNaN(D))throw new Error("Invalid channel count. Expecting a numeric value >= 1");if(!X||X<0||isNaN(X))throw new Error("Invalid sample rate. Expecting a numeric value >= 1");K=ArrayBuffer.isView(B)?B.buffer.slice(0):B.slice(0),re=new a.Le(D,X)}yield this.it.setExternalData(z,K,re)})}releaseDataBuffer(z){return(0,s.mG)(this,void 0,void 0,function*(){if(!this.dataBufferDescriptions.find(X=>X.id===z))throw new Error(`Unknown DataBuffer id. A DataBuffer with the id "${z}" does not exist within the device.`);const{data:B,typeDesc:D}=yield this.it.releaseExternalData(z);return new a.OM(B,D)})}static fetchAudioData(z,B){return(0,s.mG)(this,void 0,void 0,function*(){let D=yield fetch(z),X=yield D.arrayBuffer();return new Promise((K,re)=>{B.decodeAudioData(X,K,re)})})}static bufferDescriptionHasRemoteURL(z){return!!m(z)||!(!u(z)||!z.file.startsWith("http:")&&!z.file.startsWith("https:"))}loadDataBufferDependencies(z){return(0,s.mG)(this,void 0,void 0,function*(){return Promise.all(z.map(B=>(0,s.mG)(this,void 0,void 0,function*(){try{let D;if(m(B)?D=B.url:u(B)&&(D=B.file),D){const X=yield x.fetchAudioData(D,this.context);return this.setDataBuffer(B.id,X),{type:"success",id:B.id}}throw new Error(`Skipping invalid buffer info id: ${B.id}, type: ${B.type}`)}catch(D){return{type:"fail",error:D,id:B.id}}})))})}scheduleEvent(z){this.wt(),this.it&&this.it.scheduleEvent(z)}destroy(){this.wt(),this.F.destroy(),this.it&&this.it.removeAllSubscriptions(),this.it=void 0,this.Mt&&this.Mt.disconnect(),this.Mt=void 0,delete this.F,delete this.ct,delete this._t,this.lt=!1,this.invalidateEvent.emit(),this.invalidateEvent.removeAllSubscriptions(),this.messageEvent.removeAllSubscriptions(),this.midiEvent.removeAllSubscriptions(),this.parameterChangeEvent.removeAllSubscriptions()}getPreset(){return(0,s.mG)(this,void 0,void 0,function*(){return this.it.getPreset()})}setPreset(z){return this.it.setPreset(z)}}var b=__webpack_require__(191),E=__webpack_require__(133);const S=__webpack_require__(264);function k(Z,z){return Z.time-z.time}function T(Z){Z.sort(k)}class j extends b.v{constructor(){super(),this.At=!1,this.Bt=!1,this.Tt=void 0,this.St=-1,this.Pt=[],this.At=!1,this.setPatcherDesc(S.desc),this.setPatcherCode(S.src[0].code)}Rt(z){const B=z.eventTarget||this.Dt;if(z.time=Math.max(z.time,this.I),this.Tt=z,z.type===i.m5.ParameterEvent){const D=z;B.setParameterValue(D.target,D.value,z.time)}else if(z.type===i.m5.MIDIEvent){const D=z;B.processMidiEvent(D.time,D.port,D.data,D.length)}else if(z.type===i.m5.ClockEvent){const D=z;B.processClockEvent(D.time,D.clockIndex,D.hasValue,D.value)}else if(z.type===i.m5.DataRefEvent){const D=z;D.action===i.VH.Update&&B.processDataViewUpdate(D.dataRefIndex,D.time)}else if(z.type===i.m5.MessageEvent){const D=z;Array.isArray(D.payload)?B.processListMessage(E.TAG(D.tag),E.TAG(D.objectId),D.time,D.payload):D.payload===void 0?B.processBangMessage(E.TAG(D.tag),E.TAG(D.objectId),D.time):B.processNumMessage(E.TAG(D.tag),E.TAG(D.objectId),D.time,D.payload)}else if(z.type===i.m5.PresetEvent){const D=z;D.action===i.l0.Set&&(this.Bt=!0,this.Dt.setPreset(D.time,D.preset),this.Bt=!1)}else if(z.type===i.m5.TransportEvent){const D=z;this.Dt.processTransportEvent(D.time,D.state)}else if(z.type===i.m5.TempoEvent){const D=z;this.Dt.processTempoEvent(D.time,D.tempo)}else if(z.type===i.m5.BeatTimeEvent){const D=z;this.Dt.processBeatTimeEvent(D.time,D.beattime)}else if(z.type===i.m5.TimeSignatureEvent){const D=z;this.Dt.processTimeSignatureEvent(D.time,D.numerator,D.denominator)}else if(z.type===i.m5.StartupEvent){const D=z;this.Bt=D.phase===i.gA.BEGIN}this.Tt=void 0}getCurrentTime(){return this.I}setCurrentTime(z){this.I=z}prepareToProcess(z,B,D){(D||z!==this.M||B!==this.A)&&(this.M=z,this.A=B,this.B=this.sampsToMs(this.A),this.isSync&&this.Dt.prepareToProcess(this.M,this.A))}process(z,B,D,X,K,re,se){const fe=Math.min(B,this.getNumInputChannels()+this.getNumSignalInParameters()),xe=Math.min(X,this.getNumOutputChannels()),he=Math.min(K,this.A);for(this.St=this.I+this.B,this.midiInput!==void 0&&(this.Pt.push.apply(this.Pt,re),this.At=!0),this.At&&(T(this.Pt),this.At=!1);this.Pt.length>0&&this.Pt[0].time<this.St;)this.Rt(this.Pt.shift());this.Dt.process(z,fe,D,xe,he),this.I=this.St,this.St=-1}scheduleMidiEvent(z,B){this.scheduleEvent(new i.Ym(this.I,z,B,this.Dt))}notifyParameterValueChanged(z,B){let D=this.Tt?this.Tt.source:void 0;this.parameterChangeEvent.emit(new i.DB(this.getCurrentTime(),z,B,D))}scheduleParameterChange(z,B,D){this.scheduleEvent(new i.DB(this.getCurrentTime(),z,B,void 0))}sendNumMessage(z,B,D){const X=new i.f3(this.I,this.Dt.resolveTag(z),D,this.Dt.resolveTag(B));this.outgoingEvent.emit(X)}sendBangMessage(z,B){const D=new i.f3(this.I,this.Dt.resolveTag(z),void 0,this.Dt.resolveTag(B));this.outgoingEvent.emit(D)}sendListMessage(z,B,D){const X=new i.f3(this.I,this.Dt.resolveTag(z),D,this.Dt.resolveTag(B));this.outgoingEvent.emit(X)}getParameterValue(z){return this.Dt.getParameterValue(z)}flushClockEvents(z,B,D){this.flushClockEventsWithValue(z,B,void 0,D)}flushClockEventsWithValue(z,B,D,X){for(let K=0;K<this.Pt.length;K++)if(this.Pt[K]instanceof i.J9){const re=this.Pt[K];re.eventTarget!==z||re.clockIndex!==B&&re.clockIndex!==void 0||D!==void 0&&re.value!==D||(this.Pt.splice(K,1),X&&this.Rt(re),K--)}}deleteClockEvents(z){this.flushClockEvents(z,void 0,!1)}scheduleClockEvent(z,B,D){this.scheduleClockEventWithValue(z,B,D,void 0)}scheduleClockEventWithValue(z,B,D,X){this.scheduleEvent(new i.J9(D,B,X,z))}sendMidiEvent(z,B,D,X){const K=new i.Ym(this.getCurrentTime(),z,[B,D,X],void 0);this.outgoingEvent.emit(K)}sendMidiEventList(z,B){let D;for(D=2;D<B.length;D+=3)this.sendMidiEvent(z,B[D-2],B[D-1],B[D]);if(D-=3,D<B.length){var X=D-B.length;this.sendMidiEvent(z,B[D],X>1?B[D+1]:void 0,X>2?B[D+2]:void 0)}}sendOutlet(z,B,D){console.log("sendOutlet",z,B,D)}updatePatcherEventTarget(z,B){for(let D=0;D<this.Pt.length;D++)this.Pt[D].eventTarget===z&&(this.Pt[D].eventTarget=B,this.Pt[D].invalid=!1)}rescheduleEventTarget(z){for(let B=0;B<this.Pt.length;B++)this.Pt[B].eventTarget===z&&(this.Pt[B].invalid=!1)}isInProcess(){return this.St>-1}sendDataRefUpdated(z){this.scheduleEvent(new i.Lk(this.getCurrentTime(),z,i.VH.Update,this.Dt))}get isSync(){return!0}scheduleEvent(z){this.Pt.push(z),this.isInProcess()?T(this.Pt):this.At=!0}setPatcherCode(z){return(0,s.mG)(this,void 0,void 0,function*(){const B={};this.Dt&&this.Dt.getState(B),this.Dt=E.deserializeSrc(z);for(let D=0;D<this.Pt.length;D++)this.Pt[D].eventTarget&&(this.Pt[D].invalid=!0);this.Dt.setEngineAndPatcher(this,null),this.scheduleEvent(new i.j6(this.I,i.gA.BEGIN)),this.Dt.initialize(B),this.scheduleEvent(new i.j6(this.I,i.gA.END)),this.Dt.prepareToProcess(this.M,this.A,!0);for(let D=this.Pt.length-1;D>=0;D--)this.Pt[D].invalid&&this.Pt.splice(D,1)})}setExternalData(z,B,D){return(0,s.mG)(this,void 0,void 0,function*(){const X=this.Dt.getNumDataRefs();for(let K=0;K<X;K++){const re=this.Dt.getDataRef(K);if(re.name==z){re.arrayBuffer=B,D instanceof a.Le&&(re.channels=D.channels,re.sampleRate=D.sampleRate),this.sendDataRefUpdated(K);break}}})}releaseExternalData(z){return(0,s.mG)(this,void 0,void 0,function*(){const B=this.Dt.getNumDataRefs();let D,X;for(let K=0;K<B;K++){const re=this.Dt.getDataRef(K);if(re.name==z){D=re.arrayBuffer,re.arrayBuffer=new ArrayBuffer(0),re.channels?(X=new a.Le(re.channels,re.sampleRate),re.channels=0,re.sampleRate=0):X=new a.nc,this.sendDataRefUpdated(K);break}}if(!D)throw new Error(`Invalid DataBuffer. No DataBuffer with id ${z} found.`);return{data:D,typeDesc:X}})}getPreset(){return(0,s.mG)(this,void 0,void 0,function*(){let z={};return this.Dt.getPreset(z),z})}setPreset(z){this.scheduleEvent(new i.bt(this.I,i.l0.Set,z))}presetTouched(){this.Bt||this.outgoingEvent.emit(new i.bt(this.I,i.l0.Touched,void 0))}}var A,C,N=__webpack_require__(916);class V extends x{constructor({bufferSize:z=1024,context:B,parameterNotificationSetting:D},X){super({context:B,parameterNotificationSetting:D,type:p.Script}),this.bufferSize=z,this.it=X&&X.sourceType!=="wasm"?X.it:void 0}Ot(z){const B=[],D=[],X=z.inputBuffer,K=z.outputBuffer,re=X?X.numberOfChannels:0,se=K?K.numberOfChannels:0;for(let fe=0;fe<Math.max(re,se);fe++)fe<re&&(B[fe]=X.getChannelData(fe)),fe<se&&(D[fe]=K.getChannelData(fe));this.Ct(1e3*z.playbackTime),this.It(z.outputBuffer.sampleRate,this.bufferSize,!1),this.Nt(B,re,D,se,this.bufferSize,null,null)}Nt(z,B,D,X,K,re,se){this.it&&this.it.process(z,B,D,X,K,re||void 0,se||void 0)}Ct(z){this.it&&this.it.setCurrentTime(z)}get node(){return this.wt(),this.Mt}setPatcher(z,B){return(0,s.mG)(this,void 0,void 0,function*(){this.vt(),this.it||(this.it=B.type==="wasm"?new N.s:new j),this.ft=B.type,yield this.it.setPatcherDesc(z),yield this.it.setPatcherCode(this.Et(B)),this.F.setEngine(this.it),this.F.parameterChangeEvent.subscribe(this.gt),this.it.outgoingEvent.subscribe(this.dt),this.Mt=this.context.createScriptProcessor(this.bufferSize,this.numInputChannels,Math.max(this.numOutputChannels,1)),this.node.onaudioprocess=this.Ot.bind(this)})}}(function(Z){Z[Z.LoadPatcher=0]="LoadPatcher",Z[Z.ScheduleEvent=1]="ScheduleEvent",Z[Z.TransferBuffer=2]="TransferBuffer",Z[Z.ReleaseBuffer=3]="ReleaseBuffer",Z[Z.SetPreset=4]="SetPreset",Z[Z.GetPreset=5]="GetPreset"})(A||(A={})),function(Z){Z[Z.LoadPatcherFinished=1e3]="LoadPatcherFinished",Z[Z.OutgoingEvent=1002]="OutgoingEvent",Z[Z.ReleasedBuffer=1003]="ReleasedBuffer",Z[Z.TransferBufferFinished=1004]="TransferBufferFinished",Z[Z.GetPresetResponse=1005]="GetPresetResponse"}(C||(C={}));class I extends b.v{constructor(){super(),this.kt=new l.BM,this.xt=new l.BM,this.Ut=z=>{if(z.id!==C.OutgoingEvent||z.payload.type!==i.m5.ParameterEvent)if(z.id!==C.OutgoingEvent){if(z.id!==C.LoadPatcherFinished&&z.id!==C.TransferBufferFinished&&z.id!==C.ReleasedBuffer&&z.id!==C.GetPresetResponse)throw new Error(`Unhandled RNBOProcessor event with type ${z.id}`)}else this.outgoingEvent.emit(z.payload);else this.parameterChangeEvent.emit(z.payload)},this.kt.subscribe(this.Ut)}get eventSubjects(){return{fromProcessorEvent:this.kt,toProcessorEvent:this.xt}}notifyParameterValueChanged(z,B,D,X){this.parameterChangeEvent.emit(new i.DB(z,B,D,X,void 0))}prepareToProcess(z,B,D){}process(z,B,D,X,K,re,se){throw new Error}get isSync(){return!1}scheduleEvent(z){this.xt.emit({id:A.ScheduleEvent,payload:z})}setExternalData(z,B,D){return new Promise((X,K)=>{const re=this.kt.subscribe(se=>{se.id===C.TransferBufferFinished&&se.payload.memoryId===z&&(re.unsubscribe(),X())});this.xt.emit({id:A.TransferBuffer,payload:{memoryId:z,data:B,typeDesc:D}})})}releaseExternalData(z){return new Promise((B,D)=>{const X=this.kt.subscribe(K=>{K.id===C.ReleasedBuffer&&K.payload.memoryId===z&&(X.unsubscribe(),B({data:K.payload.data,typeDesc:(0,a.n_)(K.payload.typeDesc)}))});this.xt.emit({id:A.ReleaseBuffer,payload:{memoryId:z}})})}getPreset(){return(0,s.mG)(this,void 0,void 0,function*(){return new Promise((z,B)=>{const D=this.kt.subscribe(X=>{X.id===C.GetPresetResponse&&(D.unsubscribe(),z(X.payload.preset))});this.xt.emit({id:A.GetPreset})})})}setPreset(z){this.xt.emit({id:A.SetPreset,payload:{preset:z}})}setPatcherCode(z){return(0,s.mG)(this,void 0,void 0,function*(){})}}const G=()=>{if(!l.I7)throw new Error("Missing AudioWorklet Support");return class extends AudioWorkletNode{constructor(Z,z,B,D){super(Z,z,D),this.jt=X=>{const[K,re]=X.data;if(K!==C.OutgoingEvent)if(K!==C.LoadPatcherFinished)if(K!==C.TransferBufferFinished)if(K!==C.ReleasedBuffer){if(K!==C.GetPresetResponse)throw new Error(`Unable to handle received processor message of type ${K}`);this.zt.fromProcessorEvent.emit({id:K,payload:re})}else this.zt.fromProcessorEvent.emit({id:K,payload:re});else this.zt.fromProcessorEvent.emit({id:K,payload:re});else this.zt.fromProcessorEvent.emit({id:K,payload:re});else this.zt.fromProcessorEvent.emit({id:K,payload:(0,i.f4)(re)})},this.Ft=X=>{X.id!==A.ScheduleEvent?X.id!==A.TransferBuffer?X.id!==A.ReleaseBuffer?X.id!==A.GetPreset?X.id!==A.SetPreset||this.port.postMessage([X.id,{preset:X.payload.preset}]):this.port.postMessage([X.id]):this.port.postMessage([X.id,{memoryId:X.payload.memoryId}]):this.port.postMessage([X.id,{data:X.payload.data,memoryId:X.payload.memoryId,typeDesc:X.payload.typeDesc.serialize()}],[X.payload.data]):this.port.postMessage([X.id,X.payload.serialize()])},this.zt=B,this.zt.toProcessorEvent.subscribe(this.Ft),this.port.onmessage=this.jt,this.port.start()}loadPatcher(){return(0,s.mG)(this,void 0,void 0,function*(){return new Promise(Z=>{const z=this.zt.fromProcessorEvent.subscribe(B=>{B.id===C.LoadPatcherFinished&&(z.unsubscribe(),Z())});this.port.postMessage([A.LoadPatcher])})})}}};var R=__webpack_require__(834).Buffer;const q=__webpack_require__(264),M={js:'(()=>{var __webpack_modules__={133:(module,__unused_webpack_exports,__webpack_require__)=>{var Float32Buffer=__webpack_require__(852).Float32Buffer,Float64Buffer=__webpack_require__(852).Float64Buffer,Float32MultiBuffer=__webpack_require__(852).Float32MultiBuffer,Float64MultiBuffer=__webpack_require__(852).Float64MultiBuffer,IntBuffer=__webpack_require__(852).IntBuffer,UInt8Buffer=__webpack_require__(852).UInt8Buffer,ExternalLoaderFactory=__webpack_require__(126).ExternalLoaderFactory;let Xoshiro=__webpack_require__(925);var patcherSerialKey="XX__PatcherSerialKey__XX",eventTargetKey="XX__EventTargetKey__XX",ParameterTypeNumber=0,ParameterTypeBang=1,ParameterTypeList=2,ParameterTypeSignal=3,ParameterTypeCount=4,IOTypeInput=0,IOTypeOutput=1,IOTypeUndefined=2,INVALID_INDEX=Number.MAX_SAFE_INTEGER;function rand01(){return Math.random()}function pi01(){return Math.PI}var rnbo_abs=Math.abs,rnbo_fabs=Math.abs,rnbo_acos=Math.acos,rnbo_acosh=Math.acosh,rnbo_asin=Math.asin,rnbo_asinh=Math.asinh,rnbo_atan=Math.atan,rnbo_atan2=Math.atan2,rnbo_atanh=Math.atanh,rnbo_cbrt=Math.cbrt,rnbo_ceil=Math.ceil,rnbo_cos=Math.cos,rnbo_cosh=Math.cosh,rnbo_exp=Math.exp,rnbo_expm1=Math.expm1,rnbo_floor=Math.floor,rnbo_fround=Math.round,rnbo_imul=Math.imul,rnbo_log=Math.log,rnbo_log10=Math.log10,rnbo_log1p=Math.log1p,rnbo_log2=Math.log2,rnbo_pow=Math.pow,rnbo_round=rnbo_fround,rnbo_sign=Math.sign,rnbo_sin=Math.sin,rnbo_sinh=Math.sinh,rnbo_sqrt=Math.sqrt,rnbo_tan=Math.tan,rnbo_tanh=Math.tanh,trunc=Math.trunc,rnbo_trunc=Math.trunc,rnbo_number_max=()=>Math.MAX_VALUE,rnbo_isnan=isNaN;function fixnan(t){return isNaN(t)?0:t}function fract(t){return t%1}function fixdenorm(t){return t}function isdenorm(t){return!1}var fastsin=Math.sin,fastcos=Math.cos,fastexp=Math.exp,fastpow=Math.pow,fasttan=Math.tan;function nextpoweroftwo(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1)}var MAX_32BIT_INT=Math.pow(2,32);function uint32_add(t,e){var r=t+e;return r>=MAX_32BIT_INT&&(r-=MAX_32BIT_INT),Math.trunc(r)}function uint32_trunc(t){return t>>>0}function uint32_rshift(t,e){return t>>>e}function imod(t,e){return(0|t)%(0|e)}function imod_nocast(t,e){return t%e}function getArrayValueAtIndex(t,e){return t[e]}function allocateArray(t,e){return new Array(t)}function createListCopy(t){return t.slice(0)}function jsCreateListCopy(t){return createListCopy(t)}function list(){let t=[];for(let e=0;e<arguments.length;e++){let r=arguments[e];if(Array.isArray(r))for(let e=0;e<r.length;e++)t.push(r[e]);else t.push(r)}return t}function resizeSignal(t,e,r){for(var n=t||[],i=e;i<r;i++)n[i]=0;return n}function zeroSignal(t,e){t&&t.fill(0)}function fillSignal(t,e,r,n){t&&t.fill(r,n)}function copySignal(t,e,r){for(let n=0;n<r;n++)t[n]=e[n]}function containsValue(t){return void 0!==t}function addressOf(t){return t}function systemticks(){return Date.now()}function bitwiseFloat(t){var e=new Uint32Array(1);return e[0]=t,new DataView(e.buffer).getFloat32(0,!0)}function imul(t,e){return Math.imul(t,e)}var MIDI_StatusByteReceived=1,MIDI_SecondByteReceived=2,MIDI_NoteOff=3,MIDI_NoteOn=4,MIDI_Aftertouch=5,MIDI_CC=6,MIDI_ProgramChange=7,MIDI_ChannelPressure=8,MIDI_PitchBend=9,MIDI_Sysex_Started=10,MIDI_Sysex_Complete=11,MIDI_Generic=99,MIDI_InvalidByte=-1,MIDI_NoteOffMask=128,MIDI_NoteOnMask=144,MIDI_AfterTouchMask=160,MIDI_CCMask=176,MIDI_ProgramChangeMask=192,MIDI_ChannelPressureMask=208,MIDI_PitchBendMask=224,MIDI_QuarterFrame=241,MIDI_SongPos=242,MIDI_SongSel=243,MIDI_TuneRequest=246,MIDI_SysexStart=240,MIDI_SysexEnd=247,MIDI_Clock=248,MIDI_Start=250,MIDI_Continue=251,MIDI_Stop=252,MIDI_ActiveSense=254,MIDI_Reset=255,MIDI_CC_Sustain=64,MIDI_CC_Sostenuto=66,MIDI_CC_AllNotesOff=123,MIDI_CC_PressureMSB=70,MIDI_CC_PressureLSB=102,MIDI_CC_TimbreMSB=74,MIDI_CC_TimbreLSB=106,MIDI_NoteState_Off=0,MIDI_NoteState_On=1,MIDI_NoteState_Sustained=2,CLOCKS_PER_SEC=1;function parseMidi(t,e,r){if(240==e)return MIDI_Sysex_Started;if(t==MIDI_Sysex_Started)return 247==e?MIDI_Sysex_Complete:e<=127?t:MIDI_InvalidByte;if(e>127)return MIDI_StatusByteReceived;var n=240&r;return t==MIDI_StatusByteReceived?n==MIDI_ProgramChangeMask?MIDI_ProgramChange:n==MIDI_ChannelPressureMask?MIDI_ChannelPressure:MIDI_SecondByteReceived:t==MIDI_SecondByteReceived?n==MIDI_NoteOffMask||n==MIDI_NoteOnMask&&0==e?MIDI_NoteOff:n==MIDI_NoteOnMask?MIDI_NoteOn:n==MIDI_AfterTouchMask?MIDI_Aftertouch:n==MIDI_CCMask?MIDI_CC:n==MIDI_PitchBendMask?MIDI_PitchBend:MIDI_Generic:t}function getMIDIChannel(t){var e=240&t;return e>=128&&e<=224?15&t:0}function initDataRef(t,e){var r={};return r.name=t,r.isValid=!1,r.wantsFillFlag=!1,r.bytesToAllocate=0,r.channels=0,r.sampleRate=0,r.internal=e,r.index=-1,r.wantsFill=function(){return this.wantsFillFlag},r.setWantsFill=function(t){this.wantsFillFlag=t},r.requestSizeInBytes=function(t,e){(t>this.bytesToAllocate||e)&&(this.bytesToAllocate=t)},r.getRequestedSizeInBytes=function(){return this.bytesToAllocate},r.resetRequestedSizeInByte=function(){this.bytesToAllocate=0},r.getSizeInBytes=function(){return this.arrayBuffer.byteLength},r.hasRequestedSize=function(){return this.bytesToAllocate>0},r.isInternal=function(){return this.internal},r.getIndex=function(){return this.index},r.setIndex=function(t){this.index=t},r.clear=function(){r.arrayBuffer=new ArrayBuffer(0)},r.clear(),r}function initMultiRef(){var t={index:0,current:0,dataRefs:[],count:0};for(let e=0;e<arguments.length;e++)t.dataRefs.push(arguments[e]),t.count++;return t.setCurrent=function(t){t>=0&&t<this.count&&(this.current=t)},t.getIndex=function(){return this.index},t.setIndex=function(t){this.index=t},t}function updateMultiRef(t,e,r){e.setCurrent&&e.getIndex&&(e.setCurrent(r),t.getEngine().sendDataRefUpdated(e.getIndex()))}function updateDataRef(t,e){t.getEngine().sendDataRefUpdated(e.getIndex())}function FIXEDSIZEARRAYINIT(){let t=arguments[0];if(void 0!==t){let e=new Array(t);if(e.fill(0),void 0!==arguments[1]){let r=Array.from(arguments);r.splice(0,1);for(let n=0;n<t;n++)e[n]=FIXEDSIZEARRAYINIT.apply(null,r)}return e}return new Array}function TAG(t){let e=0;for(let r=0;r<t.length;r++){e=t.charCodeAt(r)+(e<<6)+(e<<16)-e}return 0|e}function serializeArrayToList(t,e){return t}function deserializeArrayFromList(t,e,r){t}function serializeDataRef(t){return t.resetRequestedSizeInByte(),t}function _evalSrc(src){var rnboObj;return eval(src),rnboObj}function getSubState(t,e){return void 0===t[e]&&(t[e]={}),t[e]}function getSubStateAt(t,e,r){return void 0===t[e]&&(t[e]=[]),void 0===t[e][r]&&(t[e][r]={}),t[e][r]}function stateIsEmpty(t){return 0===Object.keys(t).length}function TransportState(t){return t}function RNBO_UNUSED(){}let xoshiro_reset=Xoshiro.reset,xoshiro_next=Xoshiro.next;module.exports={deserializeSrc:function(t){return _evalSrc(t)},deserializeJSON:function(t){var e=t;return"string"==typeof e&&(e={src:t}),_evalSrc(e.src)},extractOptionsFromJSON:function(t){var e=t;return"string"==typeof e&&(e=JSON.parse(t)),e.options?e.options:{}},evalFunction(functionAsString){var tmpFunction,functionAsString="tmpFunction = "+functionAsString;return eval(functionAsString),tmpFunction},nextpoweroftwo,ParameterTypeNumber,ParameterTypeBang,ParameterTypeList,ParameterTypeSignal,ParameterTypeCount,IOTypeInput,IOTypeOutput,IOTypeUndefined:IOTypeUndefined.length,TAG}},852:t=>{function e(){let t=this.dataRef.getSizeInBytes()/this.BASEARRAYVIEW.BYTES_PER_ELEMENT,e=this.getChannels();return e?t/e:0}function r(t,e){let r=t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e;this.requestedChannels=e,this.dataRef.requestSizeInBytes(r,!1)}function n(t,e){return this[this.getChannels()*Math.floor(e)+t]}function i(t,e){const r=this.getChannels();return t<0||t>=r||e<0||e>=this.getSize()?0:this[r*Math.floor(e)+t]}function s(t,e,r){this[this.getChannels()*Math.floor(e)+t]=r}function o(t,e,r){const n=this.getChannels();t<0||t>=n||e<0||e>=this.getSize()||(this[n*Math.floor(e)+t]=r)}function u(){return this.dataRef.channels}function a(){return this.dataRef.sampleRate}function h(t){this.dataRef.sampleRate=t}function f(){this.dataRef.clear()}function c(t){if(t!==this.dataRef.channels){let e=this.getSize();return this.clear(),this.dataRef.channels=t,this.setSize(e)}return this}function l(){if(this.isAudioBuffer&&this.requestedChannels!==this.getChannels()&&0!==this.requestedChannels&&(this.getChannels()>0&&this.setZero(),this.dataRef.channels=this.requestedChannels,this.requestedChannels=0),this.dataRef.bytesToAllocate>0&&(this.dataRef.bytesToAllocate!==this.dataRef.getSizeInBytes()||!this.dataRef.isInternallyAllocated)){let t;if(this.dataRef.isInternallyAllocated){let e=Math.min(this.dataRef.arrayBuffer.byteLength,this.dataRef.bytesToAllocate);e/=this.BASEARRAYVIEW.BYTES_PER_ELEMENT,t=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer,0,e)}this.dataRef.arrayBuffer=new ArrayBuffer(this.dataRef.bytesToAllocate),this.dataRef.isInternallyAllocated=!0;let e=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer);return t?e.set(t):this.dataRef.wantsFillFlag=!0,b(e,this.dataRef,this.BASEARRAYVIEW),this.isAudioBuffer&&I(e),e}return this}function d(t){let e=this.getChannels();return this.requestedChannels=e,this.dataRef.requestSizeInBytes(t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e,!0),this.allocateIfNeeded()}function p(){this.fill&&this.fill(0)}function m(){return this.touched}function g(t){this.touched=t}function _(t){this.dataRef.setWantsFill(t)}function y(){return this.dataRef.getIndex()}function b(t,n,i){t.dataRef=n,t.BASEARRAYVIEW=i,t.getSize=e,t.requestSize=r,t.setSize=d,t.allocateIfNeeded=l,t.setZero=p,t.clear=f,t.getChannels=u,t.getSampleRate=a,t.setWantsFill=_,t.getIndex=y,n.setZero=function(){t.setZero()},t.touched=!1,t.getTouched=m,t.setTouched=g}function I(t){t.getSample=n,t.getSampleSafe=i,t.setSample=s,t.setSampleSafe=o,t.setChannels=c,t.setSampleRate=h,t.isAudioBuffer=!0,t.requestedChannels=0}let w=function(t,e){let r;return r=t.arrayBuffer?new e(t.arrayBuffer):{},b(r,t,e),r};(w.prototype=Object.create(null)).constructor=w;let v=function(t,e){let r=w.call(this,t,e);return I(r),r};(v.prototype=Object.create(w)).constructor=v;let M=function(t){return v.call(this,t,Float32Array)};(M.prototype=Object.create(v.prototype)).constructor=M;let E=function(t){return v.call(this,t,Float64Array)};(E.prototype=Object.create(v.prototype)).constructor=E;let T=function(t,e){let r=new e(t.dataRefs[t.current]);return r.multiRef=t,r.setCurrent=function(t){this.multiRef.setCurrent(Math.round(t))},r.getIndex=function(){return this.multiRef.getIndex()},r};T.prototype=Object.create(null),T.constructor=T;let B=function(t){return T.call(this,t,M)};(B.prototype=Object.create(T.prototype)).constructor=B;let S=function(t){return T.call(this,t,E)};(S.prototype=Object.create(T.prototype)).constructor=S;let A=function(t){return w.call(this,t,Int32Array)};(A.prototype=Object.create(w.prototype)).constructor=A;let P=function(t){return w.call(this,t,Uint8Array)};(P.prototype=Object.create(w.prototype)).constructor=P,t.exports={Float32Buffer:M,Float64Buffer:E,Float32MultiBuffer:B,Float64MultiBuffer:S,IntBuffer:A,UInt8Buffer:P}},126:t=>{var e=function(){};(e.prototype=Object.create(null)).constructor=e,e.prototype.setEngineAndPatcher=function(){},e.prototype.initialize=function(){},e.prototype.getNumParameters=function(){return 0},e.prototype.setParameterValue=function(){},e.prototype.prepareToProcess=function(){},e.prototype.process=function(){},t.exports={ExternalLoaderFactory:function(){return console.log("WARNING: Externals are not yet supported in Javascript"),new e}}},925:t=>{function e(t,e,r,n){r[n]=t[e]+0x9e3779b97f4a7c15n,r[n]=0xbf58476d1ce4e5b9n*(r[n]^r[n]>>30n),r[n]=0x94d049bb133111ebn*(r[n]^r[n]>>27n),r[n]=r[n]^r[n]>>31n}t.exports={reset:function(t,r){let n=new BigUint64Array(1);n[0]=BigInt(Math.trunc(1e6*t)),e(n,0,r,0),e(r,0,r,1),e(r,1,r,2),e(r,2,r,3)},next:function(t){let e=new BigUint64Array(1),r=new BigUint64Array(1);return r[0]=t[0]+t[3],e[0]=t[1]<<17n,t[2]^=t[0],t[3]^=t[1],t[1]^=t[2],t[0]^=t[3],t[2]^=e[0],t[3]=t[3]<<45n|t[3]>>19n,r[0]=r[0]>>11n,2220446049250313e-31*Number(r[0])-1}}},766:(t,e)=>{e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,s=a(t),o=s[0],u=s[1],h=new i(function(t,e,r){return 3*(e+r)/4-r}(0,o,u)),f=0,c=u>0?o-4:o;for(r=0;r<c;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],h[f++]=e>>16&255,h[f++]=e>>8&255,h[f++]=255&e;2===u&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,h[f++]=255&e);1===u&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,h[f++]=e>>8&255,h[f++]=255&e);return h},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,s=[],o=16383,u=0,a=n-i;u<a;u+=o)s.push(h(t,u,u+o>a?a:u+o));1===i?(e=t[n-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,n){for(var i,s,o=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},834:(t,e,r)=>{\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\nconst n=r(766),i=r(181),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function u(t){if(t>o)throw new RangeError(\'The value "\'+t+\'" is invalid for option "size"\');const e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError(\'The "string" argument must be of type string. Received type number\');return c(t)}return h(t,e,r)}function h(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|m(t,e);let n=u(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(J(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(J(t,ArrayBuffer)||t&&J(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(J(t,SharedArrayBuffer)||t&&J(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError(\'The "value" argument must not be of type number. Received type number\');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return a.from(n,e,r);const i=function(t){if(a.isBuffer(t)){const e=0|p(t.length),r=u(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?u(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError(\'"size" argument must be of type number\');if(t<0)throw new RangeError(\'The value "\'+t+\'" is invalid for option "size"\')}function c(t){return f(t),u(t<0?0:0|p(t))}function l(t){const e=t.length<0?0:0|p(t.length),r=u(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError(\'"offset" is outside of buffer bounds\');if(t.byteLength<e+(r||0))throw new RangeError(\'"length" is outside of buffer bounds\');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,a.prototype),n}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function m(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||J(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError(\'The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type \'+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(i)return n?-1:W(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){let s,o=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,a/=2,r/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<u;s++)if(h(t,s)===h(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===a)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+a>u&&(r=u-a),s=r;s>=0;s--){let r=!0;for(let n=0;n<a;n++)if(h(t,s+n)!==h(e,n)){r=!1;break}if(r)return s}return-1}function I(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Y(n))return o;t[r+o]=n}return o}function w(t,e,r,n){return K(W(e,t.length-r),t,r,n)}function v(t,e,r,n){return K(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function M(t,e,r,n){return K(G(e),t,r,n)}function E(t,e,r,n){return K(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,u,a;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(a=(31&e)<<6|63&r,a>127&&(s=a));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(a=(15&e)<<12|(63&r)<<6|63&n,a>2047&&(a<55296||a>57343)&&(s=a));break;case 4:r=t[i+1],n=t[i+2],u=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(a=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&u,a>65535&&a<1114112&&(s=a))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=S));return r}(n)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,r){return h(t,e,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,r){return function(t,e,r){return f(t),t<=0?u(t):void 0!==e?"string"==typeof r?u(t).fill(e,r):u(t).fill(e):u(t)}(t,e,r)},a.allocUnsafe=function(t){return c(t)},a.allocUnsafeSlow=function(t){return c(t)},a.isBuffer=function(t){return null!=t&&!0===t.t&&t!==a.prototype},a.compare=function(t,e){if(J(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),J(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError(\'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array\');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===t.length)return a.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=a.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(J(e,Uint8Array))i+e.length>n.length?(a.isBuffer(e)||(e=a.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!a.isBuffer(e))throw new TypeError(\'"list" argument must be an Array of Buffers\');e.copy(n,i)}i+=e.length}return n},a.byteLength=m,a.prototype.t=!0,a.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)_(this,e,e+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},a.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(t,e,r,n,i){if(J(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError(\'The "target" argument must be one of type Buffer or Uint8Array. Received type \'+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const u=Math.min(s,o),h=this.slice(n,i),f=t.slice(e,r);for(let t=0;t<u;++t)if(h[t]!==f[t]){s=h[t],o=f[t];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return I(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":case"latin1":case"binary":return v(this,t,e,r);case"base64":return M(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.i||this,0)}};const S=4096;function A(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function O(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=Z[t[n]];return i}function D(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function N(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,r,n,i,s){if(!a.isBuffer(t))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(e>i||e<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>t.length)throw new RangeError("Index out of range")}function x(t,e,r,n,i){$(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function C(t,e,r,n,i){$(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function k(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,s){return e=+e,r>>>=0,s||k(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function j(t,e,r,n,s){return e=+e,r>>>=0,s||k(t,0,r,8),i.write(t,e,r,n,52,8),r+8}a.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},a.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),a.prototype.readBigInt64BE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),a.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){R(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){R(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigUInt64LE=H((function(t,e=0){return x(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=H((function(t,e=0){return C(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigInt64LE=H((function(t,e=0){return x(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=H((function(t,e=0){return C(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=a.isBuffer(t)?t:a.from(t,n),o=s.length;if(0===o)throw new TypeError(\'The value "\'+t+\'" is invalid for argument "value"\');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const X={};function z(t,e,r){X[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function $(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new X.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){V(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||L(e,t.length-(r+1))}(n,i,s)}function V(t,e){if("number"!=typeof t)throw new X.ERR_INVALID_ARG_TYPE(e,"number",t)}function L(t,e,r){if(Math.floor(t)!==t)throw V(t,r),new X.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new X.ERR_BUFFER_OUT_OF_BOUNDS;throw new X.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=F(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function W(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function G(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function J(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const Z=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function H(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},181:(t,e)=>{\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\ne.read=function(t,e,r,n,i){var s,o,u=8*i-n-1,a=(1<<u)-1,h=a>>1,f=-7,c=r?i-1:0,l=r?-1:1,d=t[e+c];for(c+=l,s=d&(1<<-f)-1,d>>=-f,f+=u;f>0;s=256*s+t[e+c],c+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=256*o+t[e+c],c+=l,f-=8);if(0===s)s=1-h;else{if(s===a)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=h}return(d?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,u,a,h=8*s-i-1,f=(1<<h)-1,c=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),(e+=o+c>=1?l/a:l*Math.pow(2,1-c))*a>=2&&(o++,a/=2),o+c>=f?(u=0,o=f):o+c>=1?(u=(e*a-1)*Math.pow(2,i),o+=c):(u=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&u,d+=p,u/=256,i-=8);for(o=o<<i|u,h+=i;h>0;t[r+d]=255&o,d+=p,o/=256,h-=8);t[r+d-p]|=128*m}},264:t=>{t.exports={src:[{code:\'class RNBOPatcher{constructor(){this._currentTime=0,this.audioProcessSampleCount=0,this.sampleOffsetIntoNextAudioBuffer=0,this.vs=0,this.maxvs=0,this.sr=44100,this.invsr=2267573696e-14,this.zeroBuffer=0,this.dummyBuffer=0,this.voiceIndex=0,this.noteNumber=0}getParameterIndexForID(e){return-1}getNumMidiInputPorts(){return 0}processMidiEvent(e,t,s,r){this.updateTime(e)}getNumMidiOutputPorts(){return 0}process(e,t,s,r,i){this.vs=i,this.updateTime(this.getEngine().getCurrentTime()),this.audioProcessSampleCount=this.msToSamps(this._currentTime,this.sr)}prepareToProcess(e,t){this.vs=t,this.maxvs=t,this.zeroBuffer=resizeSignal(this.zeroBuffer,0,t),this.dummyBuffer=resizeSignal(this.dummyBuffer,0,t),this.sr=e,this.invsr=1/e}msToSamps(e,t){return rnbo_floor(e*t*.001)}sampsToMs(e){return e*(1e3*this.invsr)}getNumInputChannels(){return 0}getNumOutputChannels(){return 0}getDataRef(e){return 0}getNumDataRefs(){return 0}fillDataRef(e,t){e}processDataViewUpdate(e,t){this.updateTime(t)}initialize(e){this.assign_defaults(),this.setState(e),this.initializeObjects(e),this.allocateDataRefs(),this.startup(e)}initializeObjects(e){}allocateDataRefs(){}startup(e){}setIsMuted(e){}getPatcherSerial(){return 7}getState(e){e[eventTargetKey]=this,e[patcherSerialKey]=this.getPatcherSerial(),e.p7=1,e.p7_noteNumber=this.noteNumber}setState(e){e[patcherSerialKey]==this.getPatcherSerial()&&(containsValue(e[eventTargetKey])&&this.getEngine().updatePatcherEventTarget(e[eventTargetKey],this),containsValue(e.p7_noteNumber)&&(this.noteNumber=e.p7_noteNumber))}setParameterValue(e,t,s){this.updateTime(s)}processParameterEvent(e,t,s){this.setParameterValue(e,t,s)}processNormalizedParameterEvent(e,t,s){this.setParameterValueNormalized(e,t,s)}getParameterValue(e){return 0}getNumSignalInParameters(){return 0}getNumParameters(){return 0}getParameterName(e){return"bogus"}getParameterId(e){return"bogus"}getParameterInfo(e,t){e}sendParameter(e){this.getEngine().notifyParameterValueChanged(e,this.getParameterValue(e))}processClockEvent(e,t,s,r){this.updateTime(e)}processOutletAtCurrentTime(e,t,s){}processOutletEvent(e,t,s,r){this.updateTime(r),this.processOutletAtCurrentTime(e,t,s)}sendOutlet(e,t){this.getEngine().sendOutlet(this,e,t)}schedule(e,t){this.getEngine().scheduleClockEvent(this,e,t+this._currentTime)}scheduleValue(e,t,s){this.getEngine().scheduleClockEventWithValue(this,e,t+this._currentTime,s)}stop(e){this.getEngine().flushClockEvents(this,e,!1)}stopWithValue(e,v){this.getEngine().flushClockEventsWithValue(this,e,v,!1)}processNumMessage(e,o,t,s){this.updateTime(t)}processListMessage(e,o,t,s){this.updateTime(t)}resolveTag(e){return""}sendMidiEvent(e,t,s,r){this.getEngine().sendMidiEvent(e,t,s,r)}sendMidiEventList(e,t){this.getEngine().sendMidiEventList(e,t)}updateTime(e){this._currentTime=e,this.sampleOffsetIntoNextAudioBuffer=this.msToSamps(e,this.sr)-this.vs-this.audioProcessSampleCount}assign_defaults(){}setEngineAndPatcher(e,t){this._engineInterface=e,this._parentPatcher=t}getEngine(){return this._engineInterface}getPatcher(){return this._parentPatcher}}rnboObj=new RNBOPatcher;\',encoding:"utf-8",type:"js"}],options:{classname:"rnbomatic",minifyOutput:!0},desc:{parameters:[],numParameters:0,numSignalInParameters:0,layouts:[{name:"layout",boxes:[]}],numInputChannels:0,numOutputChannels:0,patcherSerial:0,externalDataRefs:[]}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{var t;function e(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{a(n.next(t))}catch(t){s(t)}}function u(t){try{a(n.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,u)}a((n=n.apply(t,e||[])).next())}))}!function(t){t[t.Float32Audio=0]="Float32Audio",t[t.TypedArray=1]="TypedArray"}(t||(t={}));class r{constructor(){this.type=t.TypedArray}serialize(){return{type:this.type}}}class n{constructor(e,r){this.channels=0,this.sampleRate=0,this.type=t.Float32Audio,this.channels=e,this.sampleRate=r}static fromAudioBuffer(t){return new n(t.numberOfChannels,t.sampleRate)}get isInterleaved(){return!0}serialize(){return{channels:this.channels,sampleRate:this.sampleRate,type:this.type}}}var i,s;!function(t){t[t.Inport=0]="Inport",t[t.Outport=1]="Outport",t[t.Undefined=2]="Undefined"}(i||(i={})),function(t){t[t.STOPPED=0]="STOPPED",t[t.RUNNING=1]="RUNNING"}(s||(s={}));(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}})();"undefined"!=typeof isSecureContext&&isSecureContext;Math.pow(10,4);const o=t=>t.slice();class u{constructor(){this.o=[],this.u=[]}get listenerCount(){return this.o.length+this.u.length}emit(t){if(this.o.length){const e=o(this.o);for(let r=0,n=e.length;r<n;r++)e[r](t)}if(this.u.length){const e=o(this.u);for(let r=0,n=e.length;r<n;r++)e[r](t);e.forEach((t=>this.unsubscribe(t)))}}once(t){return this.u.push(t),{unsubscribe:()=>this.unsubscribe(t)}}subscribe(t){return this.o.push(t),{unsubscribe:()=>this.unsubscribe(t)}}unsubscribe(t){const e=this.o.indexOf(t);e>=0&&this.o.splice(e,1);const r=this.u.indexOf(t);r>=0&&this.u.splice(r,1)}removeAllSubscriptions(){this.o=[],this.u=[]}}var a=__webpack_require__(133);class h{constructor(){this.h=0,this.l=44100,this.p=64,this.outgoingEvent=new u,this.parameterChangeEvent=new u,this.m=this.sampsToMs(this.p)}static getNonConversionObject(){return{applyStepsToNormalizedParameterValue:function(t){return t},convertToNormalizedParameterValue:function(t){return t},convertFromNormalizedParameterValue:function(t){return t},getNumParameters:function(){return 0},constrainParameterValue:function(t){return t},isPolyphonic:!1,subpatches:[]}}static deserializeConversion(t){if(t){const e={},r=Object.keys(t);for(let n=0;n<r.length;n++){const i=r[n];if("subpatches"===i){const r=Object.keys(t.subpatches);for(let n=0;n<r.length;n++){const i=r[n],s=t.subpatches[i],o=h.deserializeConversion(s);s.isPolyphonic?e[i]=[o]:e[i]=o}}else e[i]=a.evalFunction(t[i])}return e}return this.getNonConversionObject()}getSampleRate(){return this.l}getSamplesPerBlock(){return this.p}sampsToMs(t){return t/this.l*1e3}getNumInputChannels(){return this.g?this.g.numInputChannels:0}getNumOutputChannels(){return this.g?this.g.numOutputChannels:0}getNumMIDIInputPorts(){return this.g?this.g.numMidiInputPorts:0}getNumMIDIOutputPorts(){return this.g?this.g.numMidiOutputPorts:0}getNumParameters(){return this.g?this.g.numParameters:0}getNumSignalInParameters(){return this.g?this.g.numSignalInParameters:0}getNumSignalOutParameters(){return this.g?this.g.numSignalOutParameters:0}getPatcherSerial(){return void 0!==this.g?this.g.patcherSerial:0}getParameterName(t){if(!this.g||t>=this.g.parameters.length)throw new Error(`Parameter index ${t} out of bounds.`);return this.g.parameters[t].name}getParameterId(t){if(!this.g||t>=this.g.parameters.length)throw new Error(`Parameter index ${t} out of bounds.`);return this.g.parameters[t].paramId}getParameterToNormalizedFunction(t){return e=>this._.convertToNormalizedParameterValue(t,e)}getParameterFromNormalizedFunction(t){return e=>this._.convertFromNormalizedParameterValue(t,e)}constrainParameterValue(t){return e=>this._.constrainParameterValue(t,e)}getParameterInfo(t){if(!this.g||t>=this.g.parameters.length)throw new Error(`Parameter index ${t} out of bounds.`);const e=this.g.parameters[t];let r,n;switch(e.type){case"ParameterTypeBang":n=a.ParameterTypeBang;break;case"ParameterTypeCount":n=a.ParameterTypeCount;break;case"ParameterTypeList":n=a.ParameterTypeList;break;case"ParameterTypeNumber":n=a.ParameterTypeNumber;break;case"ParameterTypeSignal":n=a.ParameterTypeSignal;break;default:throw new Error(`Unknown Parameter Type from patcher description ${e.type}`)}switch(e.ioType){case"IOTypeInput":r=a.IOTypeInput;break;case"IOTypeOutput":r=a.IOTypeOutput;break;case"IOTypeUndefined":r=a.IOTypeUndefined;break;default:throw new Error(`Unknown Parameter IOType from patcher description ${e.type}`)}return{displayName:e.displayName,enumValues:e.enumValues,exponent:e.exponent,id:e.paramId,index:t,initialValue:e.initialValue,ioType:r,isEnum:e.isEnum,max:e.maximum,min:e.minimum,name:e.name,signalIndex:e.signalIndex,steps:e.steps,type:n,unit:e.unit,visible:e.visible}}getNumExternalDataRefs(){return void 0!==this.g?this.g.externalDataRefs.length:0}getExternalDataId(t){return void 0!==this.g?this.g.externalDataRefs[t].id:""}getExternalDataRefIds(){let t;return this.g&&(t=[],Object.keys(this.g.externalDataRefs).forEach((e=>{let r=this.g.externalDataRefs[e];t.push(r.id)}))),t}getExternalDataRefInfos(){return void 0!==this.g?this.g.externalDataRefs:[]}getNumMessages(){return void 0!==this.g?this.g.inports.length+this.g.outports.length:0}getMessageInfos(){let t=[];return void 0!==this.g&&(Object.keys(this.g.outports).forEach((e=>{t.push({tag:this.g.outports[e].tag,type:i.Outport,meta:this.g.outports[e].meta})})),Object.keys(this.g.inports).forEach((e=>{t.push({tag:this.g.inports[e].tag,type:i.Inport,meta:this.g.inports[e].meta})}))),t}removeAllSubscriptions(){this.outgoingEvent.removeAllSubscriptions(),this.parameterChangeEvent.removeAllSubscriptions()}setPatcherDesc(t){return e(this,void 0,void 0,(function*(){this.g=t,this._=h.deserializeConversion(this.g.paramConversion)}))}}var f,c,l,d;!function(t){t[t.BufferTransfer=0]="BufferTransfer",t[t.ClockEvent=1]="ClockEvent",t[t.DataRefEvent=2]="DataRefEvent",t[t.MessageEvent=3]="MessageEvent",t[t.MIDIEvent=4]="MIDIEvent",t[t.ParameterEvent=5]="ParameterEvent",t[t.PresetEvent=6]="PresetEvent",t[t.StartupEvent=7]="StartupEvent",t[t.TransportEvent=8]="TransportEvent",t[t.TempoEvent=9]="TempoEvent",t[t.BeatTimeEvent=10]="BeatTimeEvent",t[t.TimeSignatureEvent=11]="TimeSignatureEvent"}(f||(f={}));class p{constructor(t=0,e){this.invalid=!1,this.time=t,this.eventTarget=e}serialize(){return{eventTarget:this.eventTarget,invalid:this.invalid,source:this.source,time:this.time}}}class m extends p{constructor(t,e,r,n){super(t,n),this.type=f.ClockEvent,this.clockIndex=e,this.value=r}get hasValue(){return void 0!==this.value}serialize(){return Object.assign(super.serialize(),{clockIndex:this.clockIndex,type:this.type,value:this.value})}}!function(t){t[t.Update=1]="Update"}(c||(c={}));class g extends p{constructor(t,e,r,n){super(t,n),this.type=f.DataRefEvent,this.dataRefIndex=e,this.action=r}serialize(){return Object.assign(super.serialize(),{action:this.action,dataRefIndex:this.dataRefIndex,type:this.type})}}class _ extends p{constructor(t,e,r,n="",i){super(t,i),this.type=f.MessageEvent,this.objectId=n,this.tag=e,this.payload=r}serialize(){return Object.assign(super.serialize(),{payload:this.payload,objectId:this.objectId,tag:this.tag,type:this.type})}}class y extends p{constructor(t,e,r,n){if(super(t,n),this.type=f.MIDIEvent,r.length>3)throw new Error(`MIDIData can only contain a maximum of 3 bytes. Received ${r.length}`);if(this.data=r,this.data.length<3){const t=r.length;this.data.length=3,this.data=this.data.fill(void 0,t,3)}let i=0;for(let t=0;t<3;t++)void 0!==r[t]&&i++;if(i<1)throw new Error("MIDIData must at least have the first byte set.");this.length=i,this.status=240&r[0],this.channel=15&r[0],this.port=e}serialize(){return Object.assign(super.serialize(),{channel:this.channel,data:this.data,port:this.port,type:this.type})}}class b extends p{constructor(t,e,r,n,i){super(t,i),this.type=f.ParameterEvent,this.target=e,this.value=r,this.source=n}serialize(){return Object.assign(super.serialize(),{target:this.target,type:this.type,value:this.value})}}!function(t){t[t.Set=1]="Set",t[t.Touched=2]="Touched"}(l||(l={}));class I extends p{constructor(t,e,r){super(t,void 0),this.type=f.PresetEvent,this.action=e,this.preset=r}serialize(){return Object.assign(super.serialize(),{action:this.action,type:this.type,preset:this.preset})}}class w extends p{constructor(t,e){super(t,void 0),this.type=f.TransportEvent,this.state=e}serialize(){return Object.assign(super.serialize(),{state:this.state,type:this.type})}}class v extends p{constructor(t,e){super(t,void 0),this.type=f.TempoEvent,this.tempo=e}serialize(){return Object.assign(super.serialize(),{tempo:this.tempo,type:this.type})}}class M extends p{constructor(t,e){super(t,void 0),this.type=f.BeatTimeEvent,this.beattime=e}serialize(){return Object.assign(super.serialize(),{beattime:this.beattime,type:this.type})}}class E extends p{constructor(t,e,r){super(t,void 0),this.type=f.TimeSignatureEvent,this.numerator=e,this.denominator=r}serialize(){return Object.assign(super.serialize(),{numerator:this.numerator,denominator:this.denominator,type:this.type})}}!function(t){t[t.BEGIN=0]="BEGIN",t[t.END=1]="END"}(d||(d={}));class T extends p{constructor(t,e){super(t,void 0),this.type=f.StartupEvent,this.phase=e}serialize(){return Object.assign(super.serialize(),{phase:this.phase,type:this.type})}}const B=__webpack_require__(264);function S(t,e){return t.time-e.time}function A(t){t.sort(S)}class P extends h{constructor(){super(),this.I=!1,this.v=!1,this.M=void 0,this.T=-1,this.B=[],this.I=!1,this.setPatcherDesc(B.desc),this.setPatcherCode(B.src[0].code)}S(t){const e=t.eventTarget||this.A;if(t.time=Math.max(t.time,this.h),this.M=t,t.type===f.ParameterEvent){const r=t;e.setParameterValue(r.target,r.value,t.time)}else if(t.type===f.MIDIEvent){const r=t;e.processMidiEvent(r.time,r.port,r.data,r.length)}else if(t.type===f.ClockEvent){const r=t;e.processClockEvent(r.time,r.clockIndex,r.hasValue,r.value)}else if(t.type===f.DataRefEvent){const r=t;r.action===c.Update&&e.processDataViewUpdate(r.dataRefIndex,r.time)}else if(t.type===f.MessageEvent){const r=t;Array.isArray(r.payload)?e.processListMessage(a.TAG(r.tag),a.TAG(r.objectId),r.time,r.payload):void 0===r.payload?e.processBangMessage(a.TAG(r.tag),a.TAG(r.objectId),r.time):e.processNumMessage(a.TAG(r.tag),a.TAG(r.objectId),r.time,r.payload)}else if(t.type===f.PresetEvent){const e=t;e.action===l.Set&&(this.v=!0,this.A.setPreset(e.time,e.preset),this.v=!1)}else if(t.type===f.TransportEvent){const e=t;this.A.processTransportEvent(e.time,e.state)}else if(t.type===f.TempoEvent){const e=t;this.A.processTempoEvent(e.time,e.tempo)}else if(t.type===f.BeatTimeEvent){const e=t;this.A.processBeatTimeEvent(e.time,e.beattime)}else if(t.type===f.TimeSignatureEvent){const e=t;this.A.processTimeSignatureEvent(e.time,e.numerator,e.denominator)}else if(t.type===f.StartupEvent){const e=t;this.v=e.phase===d.BEGIN}this.M=void 0}getCurrentTime(){return this.h}setCurrentTime(t){this.h=t}prepareToProcess(t,e,r){(r||t!==this.l||e!==this.p)&&(this.l=t,this.p=e,this.m=this.sampsToMs(this.p),this.isSync&&this.A.prepareToProcess(this.l,this.p))}process(t,e,r,n,i,s,o){const u=Math.min(e,this.getNumInputChannels()+this.getNumSignalInParameters()),a=Math.min(n,this.getNumOutputChannels()),h=Math.min(i,this.p);for(this.T=this.h+this.m,void 0!==this.midiInput&&(this.B.push.apply(this.B,s),this.I=!0),this.I&&(A(this.B),this.I=!1);this.B.length>0&&this.B[0].time<this.T;)this.S(this.B.shift());this.A.process(t,u,r,a,h),this.h=this.T,this.T=-1}scheduleMidiEvent(t,e){this.scheduleEvent(new y(this.h,t,e,this.A))}notifyParameterValueChanged(t,e){let r=this.M?this.M.source:void 0;this.parameterChangeEvent.emit(new b(this.getCurrentTime(),t,e,r))}scheduleParameterChange(t,e,r){this.scheduleEvent(new b(this.getCurrentTime(),t,e,void 0))}sendNumMessage(t,e,r){const n=new _(this.h,this.A.resolveTag(t),r,this.A.resolveTag(e));this.outgoingEvent.emit(n)}sendBangMessage(t,e){const r=new _(this.h,this.A.resolveTag(t),void 0,this.A.resolveTag(e));this.outgoingEvent.emit(r)}sendListMessage(t,e,r){const n=new _(this.h,this.A.resolveTag(t),r,this.A.resolveTag(e));this.outgoingEvent.emit(n)}getParameterValue(t){return this.A.getParameterValue(t)}flushClockEvents(t,e,r){this.flushClockEventsWithValue(t,e,void 0,r)}flushClockEventsWithValue(t,e,r,n){for(let i=0;i<this.B.length;i++)if(this.B[i]instanceof m){const s=this.B[i];s.eventTarget!==t||s.clockIndex!==e&&void 0!==s.clockIndex||void 0!==r&&s.value!==r||(this.B.splice(i,1),n&&this.S(s),i--)}}deleteClockEvents(t){this.flushClockEvents(t,void 0,!1)}scheduleClockEvent(t,e,r){this.scheduleClockEventWithValue(t,e,r,void 0)}scheduleClockEventWithValue(t,e,r,n){this.scheduleEvent(new m(r,e,n,t))}sendMidiEvent(t,e,r,n){const i=new y(this.getCurrentTime(),t,[e,r,n],void 0);this.outgoingEvent.emit(i)}sendMidiEventList(t,e){let r;for(r=2;r<e.length;r+=3)this.sendMidiEvent(t,e[r-2],e[r-1],e[r]);if(r-=3,r<e.length){var n=r-e.length;this.sendMidiEvent(t,e[r],n>1?e[r+1]:void 0,n>2?e[r+2]:void 0)}}sendOutlet(t,e,r){console.log("sendOutlet",t,e,r)}updatePatcherEventTarget(t,e){for(let r=0;r<this.B.length;r++)this.B[r].eventTarget===t&&(this.B[r].eventTarget=e,this.B[r].invalid=!1)}rescheduleEventTarget(t){for(let e=0;e<this.B.length;e++)this.B[e].eventTarget===t&&(this.B[e].invalid=!1)}isInProcess(){return this.T>-1}sendDataRefUpdated(t){this.scheduleEvent(new g(this.getCurrentTime(),t,c.Update,this.A))}get isSync(){return!0}scheduleEvent(t){this.B.push(t),this.isInProcess()?A(this.B):this.I=!0}setPatcherCode(t){return e(this,void 0,void 0,(function*(){const e={};this.A&&this.A.getState(e),this.A=a.deserializeSrc(t);for(let t=0;t<this.B.length;t++)this.B[t].eventTarget&&(this.B[t].invalid=!0);this.A.setEngineAndPatcher(this,null),this.scheduleEvent(new T(this.h,d.BEGIN)),this.A.initialize(e),this.scheduleEvent(new T(this.h,d.END)),this.A.prepareToProcess(this.l,this.p,!0);for(let t=this.B.length-1;t>=0;t--)this.B[t].invalid&&this.B.splice(t,1)}))}setExternalData(t,r,i){return e(this,void 0,void 0,(function*(){const e=this.A.getNumDataRefs();for(let s=0;s<e;s++){const e=this.A.getDataRef(s);if(e.name==t){e.arrayBuffer=r,i instanceof n&&(e.channels=i.channels,e.sampleRate=i.sampleRate),this.sendDataRefUpdated(s);break}}}))}releaseExternalData(t){return e(this,void 0,void 0,(function*(){const e=this.A.getNumDataRefs();let i,s;for(let o=0;o<e;o++){const e=this.A.getDataRef(o);if(e.name==t){i=e.arrayBuffer,e.arrayBuffer=new ArrayBuffer(0),e.channels?(s=new n(e.channels,e.sampleRate),e.channels=0,e.sampleRate=0):s=new r,this.sendDataRefUpdated(o);break}}if(!i)throw new Error(`Invalid DataBuffer. No DataBuffer with id ${t} found.`);return{data:i,typeDesc:s}}))}getPreset(){return e(this,void 0,void 0,(function*(){let t={};return this.A.getPreset(t),t}))}setPreset(t){this.scheduleEvent(new I(this.h,l.Set,t))}presetTouched(){this.v||this.outgoingEvent.emit(new I(this.h,l.Touched,void 0))}}var O,D;function N(t){return class extends t{constructor(...t){super(),this.changeEvent=new u,this.P=new u;const e=t[0];this.O=e.notificationSetting,this.convertFromNormalizedValue=e.scaling.convertFromNormalized,this.convertToNormalizedValue=e.scaling.convertToNormalized,this.constrainParameterValue=e.scaling.constrainParameterValue,this.initialValue=e.initialValue,this.D=e.initialValue,this.displayName=e.displayName||e.name,this.exponent=e.exponent,this.id=e.id,this.index=e.index,this.min=e.min,this.max=e.max,this.name=e.name,this.steps=e.steps,this.unit=e.unit||""}get notificationSetting(){return this.O}get normalizedValue(){return this.convertToNormalizedValue(this.D)}set normalizedValue(t){this.N(this.convertFromNormalizedValue(t))}R(t){this.O=t}N(t){t=this.constrainParameterValue(t),this.D!==t&&(this.D=t,this.P.emit(this),this.notificationSetting===D.All&&this.changeEvent.emit(t))}C(t){this.D=t,this.changeEvent.emit(t)}}}!function(t){t[t.Number=0]="Number",t[t.Bang=1]="Bang",t[t.List=2]="List",t[t.Signal=3]="Signal",t[t.Count=4]="Count",t[t.Enum=5]="Enum"}(O||(O={})),function(t){t[t.All=0]="All",t[t.Internal=1]="Internal"}(D||(D={}));N(Object);N(Object);N(Object);class R{constructor(){this.k={},this.U=new Float32Array(128)}addParam(t,e){t.type==a.ParameterTypeSignal&&t.ioType===a.IOTypeInput&&(this.k[t.signalIndex]={name:e,param:new Float32Array(128)})}getParamName(t){let e=this.k[t];return void 0!==e?e.name:void 0}getParamArray(t,e,r){if(e.length==r)return e;{let n=this.k[t];return n.param.length!=r&&(n.param=new Float32Array(r)),n.param.fill(e[0])}}}var x,C;!function(t){t[t.LoadPatcher=0]="LoadPatcher",t[t.ScheduleEvent=1]="ScheduleEvent",t[t.TransferBuffer=2]="TransferBuffer",t[t.ReleaseBuffer=3]="ReleaseBuffer",t[t.SetPreset=4]="SetPreset",t[t.GetPreset=5]="GetPreset"}(x||(x={})),function(t){t[t.LoadPatcherFinished=1e3]="LoadPatcherFinished",t[t.OutgoingEvent=1002]="OutgoingEvent",t[t.ReleasedBuffer=1003]="ReleasedBuffer",t[t.TransferBufferFinished=1004]="TransferBufferFinished",t[t.GetPresetResponse=1005]="GetPresetResponse"}(C||(C={}));var k=__webpack_require__(834).Buffer;const U=JSON.parse(k.from("XXXX___RNBOPATCHERDESC_REPLACE___XXXX","base64").toString("utf-8")),j=k.from("XXXX___RNBOPATCHERSRC_REPLACE___XXXX","base64").toString("utf-8");class X extends AudioWorkletProcessor{constructor(i){super(i),this.j=new P,this.X=[],this.F=[],this.$=new R,this.V=i=>e(this,void 0,void 0,(function*(){switch(i.data[0]){case x.LoadPatcher:yield this.j.setPatcherDesc(U),yield this.j.setPatcherCode(j);for(let t=0;t<this.j.getNumParameters();t++){const e=this.j.getParameterInfo(t);this.$.addParam(e,this.j.getParameterName(t))}this.X=new Array(this.j.getNumInputChannels()+this.j.getNumSignalInParameters()),this.F=new Array(this.j.getNumOutputChannels()+this.j.getNumSignalOutParameters()),this.j.process([],0,[[]],1,0),this.port.postMessage([C.LoadPatcherFinished]);break;case x.ScheduleEvent:this.j.scheduleEvent((t=>{switch(t.type){case f.ClockEvent:return new m(t.time,t.clockIndex,t.value,t.eventTarget);case f.DataRefEvent:return new g(t.time,t.dataRefIndex,t.action,t.eventTarget);case f.MessageEvent:return new _(t.time,t.tag,t.payload,t.objectId,t.eventTarget);case f.MIDIEvent:return new y(t.time,t.port,t.data,t.eventTarget);case f.ParameterEvent:return new b(t.time,t.target,t.value,t.source,t.eventTarget);case f.PresetEvent:return new I(t.time,t.action,t.preset);case f.TransportEvent:return new w(t.time,t.state);case f.TempoEvent:return new v(t.time,t.tempo);case f.BeatTimeEvent:return new M(t.time,t.beattime);case f.TimeSignatureEvent:return new E(t.time,t.numerator,t.denominator);case f.StartupEvent:return new T(t.time,t.phase);default:throw new Error(`Unable to deserialize RNBOEvent of type ${t.type}`)}})(i.data[1]));break;case x.TransferBuffer:{const e=i.data[1];this.j.setExternalData(e.memoryId,e.data,(e=>{switch(e.type){case t.Float32Audio:return new n(e.channels,e.sampleRate);case t.TypedArray:return new r;default:throw new Error(`Unable to deserialize RNBODataDesc of type ${e.type}`)}})(e.typeDesc)),this.port.postMessage([C.TransferBufferFinished,{memoryId:e.memoryId}]);break}case x.ReleaseBuffer:{const t=i.data[1],{data:e,typeDesc:r}=yield this.j.releaseExternalData(t.memoryId);this.port.postMessage([C.ReleasedBuffer,{memoryId:t.memoryId,data:e,typeDesc:r.serialize()}],[e]);break}case x.GetPreset:{const t=yield this.j.getPreset();this.port.postMessage([C.GetPresetResponse,{preset:t}]);break}case x.SetPreset:{const t=i.data[1];this.j.setPreset(t.preset)}}})),this.L=t=>{this.port.postMessage([C.OutgoingEvent,t.serialize()])},this.q=t=>{this.port.postMessage([C.OutgoingEvent,t.serialize()])},this.j.outgoingEvent.subscribe(this.L),this.j.parameterChangeEvent.subscribe(this.q),this.port.onmessage=this.V,this.port.start()}static get parameterDescriptors(){return XXXX___RNBOPARAMDESCRIPTORS_REPLACE___XXXX}process(t,e,r){let n,i,s=0,o=0;for(n=0;n<t.length;n++){const e=t[n];for(i=0;i<e.length&&(s<this.X.length&&e[i].length);i++)this.X[s]=e[i],s++}for(n=0;n<e.length;n++){const t=e[n];for(i=0;i<t.length&&o<this.F.length;i++)this.F[o]=t[i],o++}let u=0;o>0&&this.F.length&&this.F[0]?u=this.F[0].length:e.length&&e[0]&&e[0].length&&e[0][0]?u=e[0][0].length:s>0&&this.X.length&&this.X[0]?u=this.X[0].length:t.length&&t[0]&&t[0].length&&t[0][0]&&(u=t[0][0].length),u||(u=128);for(let t=s;t<this.X.length;t++){const e=this.$.getParamName(t);void 0!==e&&(this.X[t]=this.$.getParamArray(t,r[e],u),s++)}return this.j.setCurrentTime(1e3*currentTime),this.j.prepareToProcess(sampleRate,u),this.j.process(this.X,s,this.F,o,u),!0}}let z="XXXX---RNBOPROCESSORNAME_REPLACE---XXXX";z.startsWith("XXXX---RNBOPROCESSORNAME_REPLACE---")&&(z="RNBOProcessor"),registerProcessor(z,X)})()})();',wasm:'(()=>{var __webpack_modules__={133:(module,__unused_webpack_exports,__webpack_require__)=>{var Float32Buffer=__webpack_require__(852).Float32Buffer,Float64Buffer=__webpack_require__(852).Float64Buffer,Float32MultiBuffer=__webpack_require__(852).Float32MultiBuffer,Float64MultiBuffer=__webpack_require__(852).Float64MultiBuffer,IntBuffer=__webpack_require__(852).IntBuffer,UInt8Buffer=__webpack_require__(852).UInt8Buffer,ExternalLoaderFactory=__webpack_require__(126).ExternalLoaderFactory;let Xoshiro=__webpack_require__(925);var patcherSerialKey="XX__PatcherSerialKey__XX",eventTargetKey="XX__EventTargetKey__XX",ParameterTypeNumber=0,ParameterTypeBang=1,ParameterTypeList=2,ParameterTypeSignal=3,ParameterTypeCount=4,IOTypeInput=0,IOTypeOutput=1,IOTypeUndefined=2,INVALID_INDEX=Number.MAX_SAFE_INTEGER;function rand01(){return Math.random()}function pi01(){return Math.PI}var rnbo_abs=Math.abs,rnbo_fabs=Math.abs,rnbo_acos=Math.acos,rnbo_acosh=Math.acosh,rnbo_asin=Math.asin,rnbo_asinh=Math.asinh,rnbo_atan=Math.atan,rnbo_atan2=Math.atan2,rnbo_atanh=Math.atanh,rnbo_cbrt=Math.cbrt,rnbo_ceil=Math.ceil,rnbo_cos=Math.cos,rnbo_cosh=Math.cosh,rnbo_exp=Math.exp,rnbo_expm1=Math.expm1,rnbo_floor=Math.floor,rnbo_fround=Math.round,rnbo_imul=Math.imul,rnbo_log=Math.log,rnbo_log10=Math.log10,rnbo_log1p=Math.log1p,rnbo_log2=Math.log2,rnbo_pow=Math.pow,rnbo_round=rnbo_fround,rnbo_sign=Math.sign,rnbo_sin=Math.sin,rnbo_sinh=Math.sinh,rnbo_sqrt=Math.sqrt,rnbo_tan=Math.tan,rnbo_tanh=Math.tanh,trunc=Math.trunc,rnbo_trunc=Math.trunc,rnbo_number_max=()=>Math.MAX_VALUE,rnbo_isnan=isNaN;function fixnan(t){return isNaN(t)?0:t}function fract(t){return t%1}function fixdenorm(t){return t}function isdenorm(t){return!1}var fastsin=Math.sin,fastcos=Math.cos,fastexp=Math.exp,fastpow=Math.pow,fasttan=Math.tan;function nextpoweroftwo(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1)}var MAX_32BIT_INT=Math.pow(2,32);function uint32_add(t,e){var n=t+e;return n>=MAX_32BIT_INT&&(n-=MAX_32BIT_INT),Math.trunc(n)}function uint32_trunc(t){return t>>>0}function uint32_rshift(t,e){return t>>>e}function imod(t,e){return(0|t)%(0|e)}function imod_nocast(t,e){return t%e}function getArrayValueAtIndex(t,e){return t[e]}function allocateArray(t,e){return new Array(t)}function createListCopy(t){return t.slice(0)}function jsCreateListCopy(t){return createListCopy(t)}function list(){let t=[];for(let e=0;e<arguments.length;e++){let n=arguments[e];if(Array.isArray(n))for(let e=0;e<n.length;e++)t.push(n[e]);else t.push(n)}return t}function resizeSignal(t,e,n){for(var r=t||[],i=e;i<n;i++)r[i]=0;return r}function zeroSignal(t,e){t&&t.fill(0)}function fillSignal(t,e,n,r){t&&t.fill(n,r)}function copySignal(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function containsValue(t){return void 0!==t}function addressOf(t){return t}function systemticks(){return Date.now()}function bitwiseFloat(t){var e=new Uint32Array(1);return e[0]=t,new DataView(e.buffer).getFloat32(0,!0)}function imul(t,e){return Math.imul(t,e)}var MIDI_StatusByteReceived=1,MIDI_SecondByteReceived=2,MIDI_NoteOff=3,MIDI_NoteOn=4,MIDI_Aftertouch=5,MIDI_CC=6,MIDI_ProgramChange=7,MIDI_ChannelPressure=8,MIDI_PitchBend=9,MIDI_Sysex_Started=10,MIDI_Sysex_Complete=11,MIDI_Generic=99,MIDI_InvalidByte=-1,MIDI_NoteOffMask=128,MIDI_NoteOnMask=144,MIDI_AfterTouchMask=160,MIDI_CCMask=176,MIDI_ProgramChangeMask=192,MIDI_ChannelPressureMask=208,MIDI_PitchBendMask=224,MIDI_QuarterFrame=241,MIDI_SongPos=242,MIDI_SongSel=243,MIDI_TuneRequest=246,MIDI_SysexStart=240,MIDI_SysexEnd=247,MIDI_Clock=248,MIDI_Start=250,MIDI_Continue=251,MIDI_Stop=252,MIDI_ActiveSense=254,MIDI_Reset=255,MIDI_CC_Sustain=64,MIDI_CC_Sostenuto=66,MIDI_CC_AllNotesOff=123,MIDI_CC_PressureMSB=70,MIDI_CC_PressureLSB=102,MIDI_CC_TimbreMSB=74,MIDI_CC_TimbreLSB=106,MIDI_NoteState_Off=0,MIDI_NoteState_On=1,MIDI_NoteState_Sustained=2,CLOCKS_PER_SEC=1;function parseMidi(t,e,n){if(240==e)return MIDI_Sysex_Started;if(t==MIDI_Sysex_Started)return 247==e?MIDI_Sysex_Complete:e<=127?t:MIDI_InvalidByte;if(e>127)return MIDI_StatusByteReceived;var r=240&n;return t==MIDI_StatusByteReceived?r==MIDI_ProgramChangeMask?MIDI_ProgramChange:r==MIDI_ChannelPressureMask?MIDI_ChannelPressure:MIDI_SecondByteReceived:t==MIDI_SecondByteReceived?r==MIDI_NoteOffMask||r==MIDI_NoteOnMask&&0==e?MIDI_NoteOff:r==MIDI_NoteOnMask?MIDI_NoteOn:r==MIDI_AfterTouchMask?MIDI_Aftertouch:r==MIDI_CCMask?MIDI_CC:r==MIDI_PitchBendMask?MIDI_PitchBend:MIDI_Generic:t}function getMIDIChannel(t){var e=240&t;return e>=128&&e<=224?15&t:0}function initDataRef(t,e){var n={};return n.name=t,n.isValid=!1,n.wantsFillFlag=!1,n.bytesToAllocate=0,n.channels=0,n.sampleRate=0,n.internal=e,n.index=-1,n.wantsFill=function(){return this.wantsFillFlag},n.setWantsFill=function(t){this.wantsFillFlag=t},n.requestSizeInBytes=function(t,e){(t>this.bytesToAllocate||e)&&(this.bytesToAllocate=t)},n.getRequestedSizeInBytes=function(){return this.bytesToAllocate},n.resetRequestedSizeInByte=function(){this.bytesToAllocate=0},n.getSizeInBytes=function(){return this.arrayBuffer.byteLength},n.hasRequestedSize=function(){return this.bytesToAllocate>0},n.isInternal=function(){return this.internal},n.getIndex=function(){return this.index},n.setIndex=function(t){this.index=t},n.clear=function(){n.arrayBuffer=new ArrayBuffer(0)},n.clear(),n}function initMultiRef(){var t={index:0,current:0,dataRefs:[],count:0};for(let e=0;e<arguments.length;e++)t.dataRefs.push(arguments[e]),t.count++;return t.setCurrent=function(t){t>=0&&t<this.count&&(this.current=t)},t.getIndex=function(){return this.index},t.setIndex=function(t){this.index=t},t}function updateMultiRef(t,e,n){e.setCurrent&&e.getIndex&&(e.setCurrent(n),t.getEngine().sendDataRefUpdated(e.getIndex()))}function updateDataRef(t,e){t.getEngine().sendDataRefUpdated(e.getIndex())}function FIXEDSIZEARRAYINIT(){let t=arguments[0];if(void 0!==t){let e=new Array(t);if(e.fill(0),void 0!==arguments[1]){let n=Array.from(arguments);n.splice(0,1);for(let r=0;r<t;r++)e[r]=FIXEDSIZEARRAYINIT.apply(null,n)}return e}return new Array}function TAG(t){let e=0;for(let n=0;n<t.length;n++){e=t.charCodeAt(n)+(e<<6)+(e<<16)-e}return 0|e}function serializeArrayToList(t,e){return t}function deserializeArrayFromList(t,e,n){t}function serializeDataRef(t){return t.resetRequestedSizeInByte(),t}function _evalSrc(src){var rnboObj;return eval(src),rnboObj}function getSubState(t,e){return void 0===t[e]&&(t[e]={}),t[e]}function getSubStateAt(t,e,n){return void 0===t[e]&&(t[e]=[]),void 0===t[e][n]&&(t[e][n]={}),t[e][n]}function stateIsEmpty(t){return 0===Object.keys(t).length}function TransportState(t){return t}function RNBO_UNUSED(){}let xoshiro_reset=Xoshiro.reset,xoshiro_next=Xoshiro.next;module.exports={deserializeSrc:function(t){return _evalSrc(t)},deserializeJSON:function(t){var e=t;return"string"==typeof e&&(e={src:t}),_evalSrc(e.src)},extractOptionsFromJSON:function(t){var e=t;return"string"==typeof e&&(e=JSON.parse(t)),e.options?e.options:{}},evalFunction(functionAsString){var tmpFunction,functionAsString="tmpFunction = "+functionAsString;return eval(functionAsString),tmpFunction},nextpoweroftwo,ParameterTypeNumber,ParameterTypeBang,ParameterTypeList,ParameterTypeSignal,ParameterTypeCount,IOTypeInput,IOTypeOutput,IOTypeUndefined:IOTypeUndefined.length,TAG}},852:t=>{function e(){let t=this.dataRef.getSizeInBytes()/this.BASEARRAYVIEW.BYTES_PER_ELEMENT,e=this.getChannels();return e?t/e:0}function n(t,e){let n=t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e;this.requestedChannels=e,this.dataRef.requestSizeInBytes(n,!1)}function r(t,e){return this[this.getChannels()*Math.floor(e)+t]}function i(t,e){const n=this.getChannels();return t<0||t>=n||e<0||e>=this.getSize()?0:this[n*Math.floor(e)+t]}function s(t,e,n){this[this.getChannels()*Math.floor(e)+t]=n}function a(t,e,n){const r=this.getChannels();t<0||t>=r||e<0||e>=this.getSize()||(this[r*Math.floor(e)+t]=n)}function o(){return this.dataRef.channels}function u(){return this.dataRef.sampleRate}function h(t){this.dataRef.sampleRate=t}function c(){this.dataRef.clear()}function f(t){if(t!==this.dataRef.channels){let e=this.getSize();return this.clear(),this.dataRef.channels=t,this.setSize(e)}return this}function _(){if(this.isAudioBuffer&&this.requestedChannels!==this.getChannels()&&0!==this.requestedChannels&&(this.getChannels()>0&&this.setZero(),this.dataRef.channels=this.requestedChannels,this.requestedChannels=0),this.dataRef.bytesToAllocate>0&&(this.dataRef.bytesToAllocate!==this.dataRef.getSizeInBytes()||!this.dataRef.isInternallyAllocated)){let t;if(this.dataRef.isInternallyAllocated){let e=Math.min(this.dataRef.arrayBuffer.byteLength,this.dataRef.bytesToAllocate);e/=this.BASEARRAYVIEW.BYTES_PER_ELEMENT,t=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer,0,e)}this.dataRef.arrayBuffer=new ArrayBuffer(this.dataRef.bytesToAllocate),this.dataRef.isInternallyAllocated=!0;let e=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer);return t?e.set(t):this.dataRef.wantsFillFlag=!0,y(e,this.dataRef,this.BASEARRAYVIEW),this.isAudioBuffer&&m(e),e}return this}function l(t){let e=this.getChannels();return this.requestedChannels=e,this.dataRef.requestSizeInBytes(t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e,!0),this.allocateIfNeeded()}function I(){this.fill&&this.fill(0)}function M(){return this.touched}function b(t){this.touched=t}function p(t){this.dataRef.setWantsFill(t)}function d(){return this.dataRef.getIndex()}function y(t,r,i){t.dataRef=r,t.BASEARRAYVIEW=i,t.getSize=e,t.requestSize=n,t.setSize=l,t.allocateIfNeeded=_,t.setZero=I,t.clear=c,t.getChannels=o,t.getSampleRate=u,t.setWantsFill=p,t.getIndex=d,r.setZero=function(){t.setZero()},t.touched=!1,t.getTouched=M,t.setTouched=b}function m(t){t.getSample=r,t.getSampleSafe=i,t.setSample=s,t.setSampleSafe=a,t.setChannels=f,t.setSampleRate=h,t.isAudioBuffer=!0,t.requestedChannels=0}let v=function(t,e){let n;return n=t.arrayBuffer?new e(t.arrayBuffer):{},y(n,t,e),n};(v.prototype=Object.create(null)).constructor=v;let D=function(t,e){let n=v.call(this,t,e);return m(n),n};(D.prototype=Object.create(v)).constructor=D;let S=function(t){return D.call(this,t,Float32Array)};(S.prototype=Object.create(D.prototype)).constructor=S;let w=function(t){return D.call(this,t,Float64Array)};(w.prototype=Object.create(D.prototype)).constructor=w;let A=function(t,e){let n=new e(t.dataRefs[t.current]);return n.multiRef=t,n.setCurrent=function(t){this.multiRef.setCurrent(Math.round(t))},n.getIndex=function(){return this.multiRef.getIndex()},n};A.prototype=Object.create(null),A.constructor=A;let g=function(t){return A.call(this,t,S)};(g.prototype=Object.create(A.prototype)).constructor=g;let O=function(t){return A.call(this,t,w)};(O.prototype=Object.create(A.prototype)).constructor=O;let P=function(t){return v.call(this,t,Int32Array)};(P.prototype=Object.create(v.prototype)).constructor=P;let T=function(t){return v.call(this,t,Uint8Array)};(T.prototype=Object.create(v.prototype)).constructor=T,t.exports={Float32Buffer:S,Float64Buffer:w,Float32MultiBuffer:g,Float64MultiBuffer:O,IntBuffer:P,UInt8Buffer:T}},126:t=>{var e=function(){};(e.prototype=Object.create(null)).constructor=e,e.prototype.setEngineAndPatcher=function(){},e.prototype.initialize=function(){},e.prototype.getNumParameters=function(){return 0},e.prototype.setParameterValue=function(){},e.prototype.prepareToProcess=function(){},e.prototype.process=function(){},t.exports={ExternalLoaderFactory:function(){return console.log("WARNING: Externals are not yet supported in Javascript"),new e}}},925:t=>{function e(t,e,n,r){n[r]=t[e]+0x9e3779b97f4a7c15n,n[r]=0xbf58476d1ce4e5b9n*(n[r]^n[r]>>30n),n[r]=0x94d049bb133111ebn*(n[r]^n[r]>>27n),n[r]=n[r]^n[r]>>31n}t.exports={reset:function(t,n){let r=new BigUint64Array(1);r[0]=BigInt(Math.trunc(1e6*t)),e(r,0,n,0),e(n,0,n,1),e(n,1,n,2),e(n,2,n,3)},next:function(t){let e=new BigUint64Array(1),n=new BigUint64Array(1);return n[0]=t[0]+t[3],e[0]=t[1]<<17n,t[2]^=t[0],t[3]^=t[1],t[1]^=t[2],t[0]^=t[3],t[2]^=e[0],t[3]=t[3]<<45n|t[3]>>19n,n[0]=n[0]>>11n,2220446049250313e-31*Number(n[0])-1}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};(()=>{var t;!function(t){t[t.Float32Audio=0]="Float32Audio",t[t.TypedArray=1]="TypedArray"}(t||(t={}));class e{constructor(){this.type=t.TypedArray}serialize(){return{type:this.type}}}class n{constructor(e,n){this.channels=0,this.sampleRate=0,this.type=t.Float32Audio,this.channels=e,this.sampleRate=n}static fromAudioBuffer(t){return new n(t.numberOfChannels,t.sampleRate)}get isInterleaved(){return!0}serialize(){return{channels:this.channels,sampleRate:this.sampleRate,type:this.type}}}var r,i,s,a;!function(t){t[t.BufferTransfer=0]="BufferTransfer",t[t.ClockEvent=1]="ClockEvent",t[t.DataRefEvent=2]="DataRefEvent",t[t.MessageEvent=3]="MessageEvent",t[t.MIDIEvent=4]="MIDIEvent",t[t.ParameterEvent=5]="ParameterEvent",t[t.PresetEvent=6]="PresetEvent",t[t.StartupEvent=7]="StartupEvent",t[t.TransportEvent=8]="TransportEvent",t[t.TempoEvent=9]="TempoEvent",t[t.BeatTimeEvent=10]="BeatTimeEvent",t[t.TimeSignatureEvent=11]="TimeSignatureEvent"}(r||(r={}));class o{constructor(t=0,e){this.invalid=!1,this.time=t,this.eventTarget=e}serialize(){return{eventTarget:this.eventTarget,invalid:this.invalid,source:this.source,time:this.time}}}!function(t){t[t.Update=1]="Update"}(i||(i={}));class u extends o{constructor(t,e,n,i="",s){super(t,s),this.type=r.MessageEvent,this.objectId=i,this.tag=e,this.payload=n}serialize(){return Object.assign(super.serialize(),{payload:this.payload,objectId:this.objectId,tag:this.tag,type:this.type})}}class h extends o{constructor(t,e,n,i){if(super(t,i),this.type=r.MIDIEvent,n.length>3)throw new Error(`MIDIData can only contain a maximum of 3 bytes. Received ${n.length}`);if(this.data=n,this.data.length<3){const t=n.length;this.data.length=3,this.data=this.data.fill(void 0,t,3)}let s=0;for(let t=0;t<3;t++)void 0!==n[t]&&s++;if(s<1)throw new Error("MIDIData must at least have the first byte set.");this.length=s,this.status=240&n[0],this.channel=15&n[0],this.port=e}serialize(){return Object.assign(super.serialize(),{channel:this.channel,data:this.data,port:this.port,type:this.type})}}class c extends o{constructor(t,e,n,i,s){super(t,s),this.type=r.ParameterEvent,this.target=e,this.value=n,this.source=i}serialize(){return Object.assign(super.serialize(),{target:this.target,type:this.type,value:this.value})}}!function(t){t[t.Set=1]="Set",t[t.Touched=2]="Touched"}(s||(s={}));class f extends o{constructor(t,e,n){super(t,void 0),this.type=r.PresetEvent,this.action=e,this.preset=n}serialize(){return Object.assign(super.serialize(),{action:this.action,type:this.type,preset:this.preset})}}!function(t){t[t.BEGIN=0]="BEGIN",t[t.END=1]="END"}(a||(a={}));var _,l;!function(t){t[t.Number=0]="Number",t[t.Bang=1]="Bang",t[t.List=2]="List",t[t.Signal=3]="Signal",t[t.Count=4]="Count",t[t.Enum=5]="Enum"}(_||(_={})),function(t){t[t.All=0]="All",t[t.Internal=1]="Internal"}(l||(l={}));(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}})();"undefined"!=typeof isSecureContext&&isSecureContext;Math.pow(10,4);const I=t=>t.slice();class M{constructor(){this.t=[],this.i=[]}get listenerCount(){return this.t.length+this.i.length}emit(t){if(this.t.length){const e=I(this.t);for(let n=0,r=e.length;n<r;n++)e[n](t)}if(this.i.length){const e=I(this.i);for(let n=0,r=e.length;n<r;n++)e[n](t);e.forEach((t=>this.unsubscribe(t)))}}once(t){return this.i.push(t),{unsubscribe:()=>this.unsubscribe(t)}}subscribe(t){return this.t.push(t),{unsubscribe:()=>this.unsubscribe(t)}}unsubscribe(t){const e=this.t.indexOf(t);e>=0&&this.t.splice(e,1);const n=this.i.indexOf(t);n>=0&&this.i.splice(n,1)}removeAllSubscriptions(){this.t=[],this.i=[]}}function b(t){return class extends t{constructor(...t){super(),this.changeEvent=new M,this.o=new M;const e=t[0];this.u=e.notificationSetting,this.convertFromNormalizedValue=e.scaling.convertFromNormalized,this.convertToNormalizedValue=e.scaling.convertToNormalized,this.constrainParameterValue=e.scaling.constrainParameterValue,this.initialValue=e.initialValue,this.h=e.initialValue,this.displayName=e.displayName||e.name,this.exponent=e.exponent,this.id=e.id,this.index=e.index,this.min=e.min,this.max=e.max,this.name=e.name,this.steps=e.steps,this.unit=e.unit||""}get notificationSetting(){return this.u}get normalizedValue(){return this.convertToNormalizedValue(this.h)}set normalizedValue(t){this._(this.convertFromNormalizedValue(t))}l(t){this.u=t}_(t){t=this.constrainParameterValue(t),this.h!==t&&(this.h=t,this.o.emit(this),this.notificationSetting===l.All&&this.changeEvent.emit(t))}I(t){this.h=t,this.changeEvent.emit(t)}}}b(Object);b(Object);b(Object);var p=__webpack_require__(133);class d{constructor(){this.M={},this.p=new Float32Array(128)}addParam(t,e){t.type==p.ParameterTypeSignal&&t.ioType===p.IOTypeInput&&(this.M[t.signalIndex]={name:e,param:new Float32Array(128)})}getParamName(t){let e=this.M[t];return void 0!==e?e.name:void 0}getParamArray(t,e,n){if(e.length==n)return e;{let r=this.M[t];return r.param.length!=n&&(r.param=new Float32Array(n)),r.param.fill(e[0])}}}class y{constructor(t,e){this.m=0,this.v=0,this.D=!1,this.S=new d,this.A=e;let n=new this.A.CoreObject;this.g=n;let r={handleParameterEvent:t.handleParameterEvent.bind(t),handleMidiEvent:t.handleMidiEvent.bind(t),handleMessageEvent:t.handleMessageEvent.bind(t),handlePresetEvent:t.handlePresetEvent.bind(t)},i=this.A.EventHandler.implement(r);this.O=n.createParameterInterface(i);for(let t=0;t<n.getNumParameters();t++){let e=n.getParameterInfo(t);this.S.addParam(e,n.getParameterName(t))}this.m=n.getNumInputChannels()+n.getNumSignalInParameters(),this.v=n.getNumOutputChannels(),this.D=!0}isReady(){return this.D}pushArray(t){let e=this.g.getArrayPassingHEAP(t.length);return this.A.HEAPF64.set(t,e>>3),e}retrieveArray(t){let e=[];for(let n=0;n<t.size();n++)e.push(t.get(n));return e}setExternalData(t,r,i){const s=new Uint8Array(r),a=this.g.getNewMemoryBuffer(s.byteLength);this.A.HEAPU8.set(s,a),i instanceof n?this.g.setExternalAudioBuffer(t,a,s.byteLength,i.channels,i.sampleRate):i instanceof e&&this.g.setExternalUntypedBuffer(t,a,s.byteLength)}releaseExternalData(t){let r,i=this.g.getDataRefIndex(t),s=this.g.getDataRefType(i),a=this.g.getDataRefData(i),o=new Uint8Array(a.sizeInBytes);return o.set(this.A.HEAPU8.subarray(a.data,a.data+a.sizeInBytes)),r=1==s.type?new n(s.channels,s.sampleRate):new e,this.g.releaseDataRef(i),[o.buffer,r]}getCurrentTime(){return this.g.getCurrentTime()}setCurrentTime(t){this.g.setCurrentTime(t)}prepareToProcess(t,e){this.g.prepareToProcess(t,e)}process(t,e,n,r,i,s){let a=0,o=0;for(let n=0;n<e&&a<this.m;n++){let e=t[n],r=this.g.getInputChannel(a);this.A.HEAPF64.set(e,r>>3),a++}if(s)for(let t=a;t<this.m;t++){let e=this.S.getParamName(t);if(void 0!==e){let n=this.g.getInputChannel(t);this.A.HEAPF64.set(this.S.getParamArray(t,s[e],i),n>>3),a++}}this.g.process(a,this.v,i);for(let t=0;t<r&&o<this.v;t++){let e=n[t],r=this.g.getOutputChannel(o)>>3;e.set(this.A.HEAPF64.subarray(r,r+e.length)),o++}}resolveTag(t){return this.g.resolveTag(t)}scheduleEvent(t){t.type===r.MIDIEvent?this.g.scheduleMidiEvent(t.time,t.port,t.data[0],t.data[1],t.data[2]):t.type===r.ParameterEvent?this.g.scheduleParameterEvent(t.target,t.time,t.value,t.source):t.type===r.MessageEvent?Array.isArray(t.payload)?this.g.sendListMessage(t.tag,t.objectId,this.pushArray(t.payload),t.payload.length,t.time):"number"==typeof t.payload?this.g.sendNumMessage(t.tag,t.objectId,t.payload,t.time):void 0===t.payload&&this.g.sendBangMessage(t.tag,t.objectId,t.time):t.type===r.TransportEvent?this.g.scheduleTransportEvent(t.time,t.state):t.type===r.TempoEvent?this.g.scheduleTempoEvent(t.time,t.tempo):t.type===r.BeatTimeEvent?this.g.scheduleBeatTimeEvent(t.time,t.beattime):t.type===r.TimeSignatureEvent&&this.g.scheduleTimeSignatureEvent(t.time,t.numerator,t.denominator)}getNumParameters(){return this.g.getNumParameters()}getParameterValue(t){return this.g.getParameterValue(t)}numIns(){return this.m}numOuts(){return this.v}getPreset(){return this.g.getPreset()}setPreset(t){this.g.setPreset(t)}}var m,v;!function(t){t[t.LoadPatcher=0]="LoadPatcher",t[t.ScheduleEvent=1]="ScheduleEvent",t[t.TransferBuffer=2]="TransferBuffer",t[t.ReleaseBuffer=3]="ReleaseBuffer",t[t.SetPreset=4]="SetPreset",t[t.GetPreset=5]="GetPreset"}(m||(m={})),function(t){t[t.LoadPatcherFinished=1e3]="LoadPatcherFinished",t[t.OutgoingEvent=1002]="OutgoingEvent",t[t.ReleasedBuffer=1003]="ReleasedBuffer",t[t.TransferBufferFinished=1004]="TransferBufferFinished",t[t.GetPresetResponse=1005]="GetPresetResponse"}(v||(v={}));class D extends AudioWorkletProcessor{constructor(r){super(r),this.P=128,this.T=r=>{switch(r.data[0]){case m.LoadPatcher:rnbo_module().then((t=>{this.C=new y(this,t),this.port.postMessage([v.LoadPatcherFinished])}));break;case m.ScheduleEvent:const i=r.data[1];this.C.scheduleEvent(i);break;case m.TransferBuffer:{const i=r.data[1],s=(r=>{switch(r.type){case t.Float32Audio:return new n(r.channels,r.sampleRate);case t.TypedArray:return new e;default:throw new Error(`Unable to deserialize RNBODataDesc of type ${r.type}`)}})(i.typeDesc);this.C.setExternalData(i.memoryId,i.data,s),this.port.postMessage([v.TransferBufferFinished,{memoryId:i.memoryId}]);break}case m.ReleaseBuffer:{const t=r.data[1],[e,n]=this.C.releaseExternalData(t.memoryId);this.port.postMessage([v.ReleasedBuffer,{memoryId:t.memoryId,data:e,typeDesc:n.serialize()}],[e]);break}case m.GetPreset:{const t=JSON.parse(this.C.getPreset());this.port.postMessage([v.GetPresetResponse,{preset:t}]);break}case m.SetPreset:{const t=r.data[1];this.C.setPreset(JSON.stringify(t.preset))}}},this.port.onmessage=this.T,this.port.start()}static get parameterDescriptors(){return XXXX___RNBOPARAMDESCRIPTORS_REPLACE___XXXX}handleParameterEvent(t){this.port.postMessage([v.OutgoingEvent,new c(t.time,t.index,t.value,t.source,void 0).serialize()])}handleMidiEvent(t){const e=new h(t.time,t.port,[t.b1,t.b2,t.b3],void 0);this.port.postMessage([v.OutgoingEvent,e.serialize()])}handleMessageEvent(t){const e=new u(t.time,this.C.resolveTag(t.tag),0==t.type?t.numValue:1===t.type?this.C.retrieveArray(t.listValue):void 0,this.C.resolveTag(t.objectId));this.port.postMessage([v.OutgoingEvent,e.serialize()])}handlePresetEvent(t){const e=new f(t.time,s.Touched);this.port.postMessage([v.OutgoingEvent,e.serialize()])}process(t,e,n){let r=0,i=0;if(!this.C||!this.C.isReady())return!0;let s=0;e.length&&e[0]&&e[0].length&&e[0][0]?s=e[0][0].length:t.length&&t[0]&&t[0].length&&t[0][0]&&(s=t[0][0].length),s||(s=this.P),this.P<s&&(this.P=s),this.C.setCurrentTime(1e3*currentTime),this.C.prepareToProcess(sampleRate,s);const a=[];for(let e=0;e<t.length&&r<this.C.numIns();e++){const n=t[e];for(let t=0;t<n.length&&r<this.C.numIns()&&n[t].length>0;t++)a.push(n[t]),r++}const o=[];for(let t=0;t<e.length&&i<this.C.numOuts();t++){const n=e[t];for(let t=0;t<n.length&&i<this.C.numOuts();t++)o.push(n[t]),i++}return this.C.process(a,r,o,i,s,n),!0}}let S="XXXX---RNBOPROCESSORNAME_REPLACE---XXXX";S.startsWith("XXXX---RNBOPROCESSORNAME_REPLACE---")&&(S="RNBOProcessor"),registerProcessor(S,D)})()})();'};class L extends x{constructor({context:z,parameterNotificationSetting:B},D){super({context:z,parameterNotificationSetting:B,type:p.Worklet}),D?this.it=D.it:(this.it=new I,this.it.setPatcherDesc(q.desc),this.it.setPatcherCode(q.src[0].code)),this.Mt=D?D.node:void 0}Lt(){let z="[";const B=this.it.getNumParameters();let D=!0;for(let X=0;X<B;X++){const K=this.it.getParameterInfo(X);if(K&&K.type!==void 0&&K.type===E.ParameterTypeSignal&&K.ioType!==void 0&&K.ioType===E.IOTypeInput){const re=K.min===void 0?0:K.min,se=K.max===void 0?1:K.max;D||(z+=", "),z+="{ name: '"+K.name+"', automationRate: 'a-rate', minValue: "+re+", maxValue: "+se+"}",D=!1}}return z+="]",z}get node(){return this.wt(),this.Mt}setPatcher(z,B){return(0,s.mG)(this,void 0,void 0,function*(){if(!this.it)throw new Error("Attempt to set patcher on a WorkletDevice without assigning engine first.");this.vt(),yield this.it.setPatcherDesc(z),this.F.setEngine(this.it),this.it.outgoingEvent.subscribe(this.dt),this.it.prepareToProcess(this.context.sampleRate,128,!1),this.ft=B.type;const D=M[B.type];let X=this.numInputChannels,K=this.numOutputChannels;X<1&&(X=1),K<1&&(K=1);const re=`RNBOProcessor-${(0,l.EL)()}`;let se=D.replace("XXXX---RNBOPROCESSORNAME_REPLACE---XXXX",re).replace("XXXX___RNBOPARAMDESCRIPTORS_REPLACE___XXXX",this.Lt());switch(B.type){case"js":se=se.replace("XXXX___RNBOPATCHERDESC_REPLACE___XXXX",R.from(JSON.stringify(z),"utf-8").toString("base64")).replace("XXXX___RNBOPATCHERSRC_REPLACE___XXXX",R.from(this.Et(B),"utf-8").toString("base64"));break;case"wasm":se=this.Et(B)+`

`+se}const fe=URL.createObjectURL(new Blob([se],{type:"text/javascript"}));yield this.context.audioWorklet.addModule(fe),this.Mt=new(G())(this.context,re,this.it.eventSubjects,{numberOfInputs:X,numberOfOutputs:1,outputChannelCount:[K]}),yield this.Mt.loadPatcher(),this.F.parameterChangeEvent.subscribe(this.gt)})}}var H=__webpack_require__(676);const O="1.2.5",U={bufferSize:1024,parameterNotificationSetting:o.EX.All};function J(Z,z){var B,D,X,K;return(0,s.mG)(this,void 0,void 0,function*(){const{context:re,patcher:se,type:fe="auto"}=Z,xe=((D=(B=se.desc)===null||B===void 0?void 0:B.meta)===null||D===void 0?void 0:D.rnboversion)||se.desc.rnboVersion;if(xe!==O&&(console.error||console.log)(`
Warning: The patcher was exported with a RNBO version does not match the version of @rnbo/js:
@rnbo/js	v${O}
patcher		v${xe}
In order to have full compatibility and avoid unexpected behavior please ensure that you use the version of @rnbo/js that matches the version of RNBO you used to export your patcher.`.trim()),!(!((X=se.src)===null||X===void 0)&&X.length)||!Array.isArray(se.src))throw new Error("Incompatible patcher. Please export you patch with a newer, matching version of RNBO or adjust the version of @rnbo/js you are using.");if(!new Set((K=se.src)===null||K===void 0?void 0:K.map(pe=>pe.type)).has("js")&&!l.f8)throw new Error("Incompatible browser. RNBO requires WASM support in order to run your exported patch as a Device.");const he=se.src.find(pe=>l.f8&&pe.type==="wasm")||se.src.find(pe=>pe.type==="js"),_e=Object.assign({},U,Z.options);if(!re)throw new Error("Missing argument context");if(fe===p.Worklet&&!l.I7)throw new Error("Failed to create WorkletDevice due to missing AudioWorklet support. Please use the Device.Script or 'auto' option instead");const ye=fe==="auto"?l.I7?p.Worklet:p.Script:fe;if(ye!==p.Script&&ye!==p.Worklet)throw new Error(`Unknown Device type ${ye}. Please make sure to use either 'auto' or a valid DeviceType`);let ue;if(ye===p.Script){if(z&&!(z instanceof V))throw new Error("Error: Creating a device from an existing device cannot alter the type of the device. Please make sure to use a consistent 'type' parameter.");ue=new V({bufferSize:_e.bufferSize,parameterNotificationSetting:_e.parameterNotificationSetting,context:re},(z==null?void 0:z.sourceType)===he.type?z:void 0)}else if(ye===p.Worklet){if(z&&!(z instanceof L))throw new Error("Error: Creating a device from an existing device cannot alter the type of the device. Please make sure to use a consistent 'type' parameter.");ue=new L({context:re,parameterNotificationSetting:_e.parameterNotificationSetting},z)}return z&&z.destroy(),ue=ue,yield ue.setPatcher(se.desc,he),ue})}})(),__webpack_exports__})()},module.exports=factory()})(rnbo_webaudio);var rnbo_webaudioExports=rnbo_webaudio.exports;const dummy=new Oscillator({volume:-1/0,frequency:0,type:"sine1"}).start();class RNBODevice{constructor(){or(this,"defaults",{});or(this,"input");or(this,"output");or(this,"device");or(this,"ready",!1);or(this,"context",context.rawContext._nativeAudioContext||context.rawContext._context);or(this,"params");or(this,"patcher",null);or(this,"state",{last:60});this.input=new Gain(1),this.output=new Gain(1),dummy.connect(this.output),dummy.connect(this.input)}async initDevice(){var r;return(r=this.patcher)==null?void 0:r.then(n=>rnbo_webaudioExports.createDevice({context:this.context,patcher:n}).then(t=>{this.device=t,t.node.connect(this.output._gainNode._nativeAudioNode),this.input._gainNode._nativeAudioNode.connect(t.node),this.ready=!0}))}messageDevice(r,n,t){const a=new rnbo_webaudioExports.MessageEvent(t*1e3-10,r,[n]);this.device.scheduleEvent(a)}connect(r){this.output.connect(r)}disconnect(){this.output.disconnect()}setParams(r,n){Object.entries(r).filter(([t,a])=>this.params.includes(t)).forEach(([t,a])=>{t!=="i"&&this.state[t]===a||(this.state[t]=a,this[t]&&this[t](a,n))})}mutate(r={},n,t=100){if(!this.ready)return;const{nudge:a}=r,l=Object.entries(r).reduce((o,[c,i])=>({...o,[`_${c}`]:i}),{});this.setParams(l,n),this.messageDevice("mutate",t,n+(a||0)/1e3)}}class BaseSynth extends RNBODevice{constructor(){super();or(this,"defaults",{dur:1e3,n:60,pan:.5,vol:1,amp:1,hold:0,a:10,d:100,s:.8,r:500,moda:10,modd:100,mods:.8,modr:500,fila:10,fild:100,fils:.8,filr:500,res:0,cutoff:2e4,detune:0});this.dur=this.dur.bind(this),this.n=this.n.bind(this),this._n=this._n.bind(this),this.pan=this.pan.bind(this),this._pan=this._pan.bind(this),this.vol=this.vol.bind(this),this._vol=this._vol.bind(this),this.amp=this.amp.bind(this),this._amp=this._amp.bind(this),this.hold=this.hold.bind(this),this.a=this.a.bind(this),this.acurve=this.acurve.bind(this),this.d=this.d.bind(this),this.dcurve=this.dcurve.bind(this),this.s=this.s.bind(this),this.r=this.r.bind(this),this.rcurve=this.rcurve.bind(this),this.moda=this.moda.bind(this),this.modacurve=this.modacurve.bind(this),this.modd=this.modd.bind(this),this.moddcurve=this.moddcurve.bind(this),this.mods=this.mods.bind(this),this.modr=this.modr.bind(this),this.modrcurve=this.modrcurve.bind(this),this.fila=this.fila.bind(this),this.filacurve=this.filacurve.bind(this),this.fild=this.fild.bind(this),this.fildcurve=this.fildcurve.bind(this),this.fils=this.fils.bind(this),this.filr=this.filr.bind(this),this.filrcurve=this.filrcurve.bind(this),this.res=this.res.bind(this),this._res=this._res.bind(this),this.cutoff=this.cutoff.bind(this),this._cutoff=this._cutoff.bind(this),this.detune=this.detune.bind(this),this._detune=this._detune.bind(this)}play(n={},t){if(!this.ready)return;const a={...this.defaults,...n},{n:l,amp:o,nudge:c}=a;this.setParams(a,t);const i=new rnbo_webaudioExports.MIDIEvent(t*1e3+(c||0),0,[144,l||60,o*127]);this.device.scheduleEvent(i)}release(n,t){if(!this.ready)return;const a=new rnbo_webaudioExports.MIDIEvent(t*1e3+10,0,[128,n,0]);this.device.scheduleEvent(a)}cut(n,t=5){this.ready&&this.messageDevice("cut",t,n)}dur(n=1e3,t){this.messageDevice("dur",n,t)}n(n=60,t){this.messageDevice("n",n,t)}_n(n=60,t){this.messageDevice("_n",n,t)}nudge(n=0,t){}pan(n=.5,t){this.messageDevice("pan",n,t)}_pan(n=.5,t){this.messageDevice("_pan",n,t)}amp(n=1,t){this.messageDevice("amp",n,t)}_amp(n=1,t){this.messageDevice("_amp",n,t)}vol(n=1,t){this.messageDevice("vol",n,t)}_vol(n=1,t){this.messageDevice("_vol",n,t)}hold(n,t){this.messageDevice("hold",n,t)}a(n=10,t){this.messageDevice("a",n,t)}d(n=100,t){this.messageDevice("d",n,t)}s(n=.5,t){this.messageDevice("s",n,t)}r(n=1e3,t){this.messageDevice("r",n,t)}acurve(n,t){this.messageDevice("acurve",n,t)}dcurve(n,t){this.messageDevice("dcurve",n,t)}rcurve(n,t){this.messageDevice("rcurve",n,t)}moda(n=10,t){this.messageDevice("moda",n,t)}modd(n=100,t){this.messageDevice("modd",n,t)}mods(n=.8,t){this.messageDevice("mods",n,t)}modr(n=1e3,t){this.messageDevice("modr",n,t)}modacurve(n,t){this.messageDevice("modacurve",n,t)}moddcurve(n,t){this.messageDevice("moddcurve",n,t)}modrcurve(n,t){this.messageDevice("modrcurve",n,t)}fila(n=10,t){this.messageDevice("fila",n,t)}fild(n=100,t){this.messageDevice("fild",n,t)}fils(n=.8,t){this.messageDevice("fils",n,t)}filr(n=1e3,t){this.messageDevice("filr",n,t)}filacurve(n,t){this.messageDevice("filacurve",n,t)}fildcurve(n,t){this.messageDevice("fildcurve",n,t)}filrcurve(n,t){this.messageDevice("filrcurve",n,t)}res(n=0,t){this.messageDevice("res",n,t)}_res(n=0,t){this.messageDevice("_res",n,t)}cutoff(n=2e4,t){this.messageDevice("cutoff",n,t)}_cutoff(n=2e4,t){this.messageDevice("_cutoff",n,t)}detune(n=0,t){this.messageDevice("detune",n,t)}_detune(n=0,t){this.messageDevice("_detune",n,t)}}fetch(new URL(""+new URL("../assets/synth.export.bf528032.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/synth-lite.export.29519492.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/synth-gen.export.562f0fb5.json",import.meta.url).href,self.location)).then(s=>s.json());const patcher$4=fetch(new URL(""+new URL("../assets/superfm.export.27e59195.json",import.meta.url).href,self.location)).then(s=>s.json());class Synth extends BaseSynth{constructor(){super(),this.defaults={...this.defaults,a:10,d:100,s:.8,r:125,op1ratio:1,op1gain:1,op1fb:0,op2a:10,op2d:100,op2s:.8,op2r:1e3,op2ratio:1,op2gain:1,op2fb:0,op3a:10,op3d:100,op3s:.8,op3r:1e3,op3ratio:1,op3gain:1,op3fb:0},this.patcher=patcher$4,this.initDevice(),this.op1ratio=this.op1ratio.bind(this),this._op1ratio=this._op1ratio.bind(this),this.op1gain=this.op1gain.bind(this),this._op1gain=this._op1gain.bind(this),this.op1fb=this.op1fb.bind(this),this._op1fb=this._op1fb.bind(this),this.op2a=this.op2a.bind(this),this.op2d=this.op2d.bind(this),this.op2s=this.op2s.bind(this),this.op2r=this.op2r.bind(this),this.op2ratio=this.op2ratio.bind(this),this._op2ratio=this._op2ratio.bind(this),this.op2gain=this.op2gain.bind(this),this._op2gain=this._op2gain.bind(this),this.op2fb=this.op2fb.bind(this),this._op2fb=this._op2fb.bind(this),this.op3a=this.op3a.bind(this),this.op3d=this.op3d.bind(this),this.op3s=this.op3s.bind(this),this.op3r=this.op3r.bind(this),this.op3ratio=this.op3ratio.bind(this),this._op3ratio=this._op3ratio.bind(this),this.op3gain=this.op3gain.bind(this),this._op3gain=this._op3gain.bind(this),this.op3fb=this.op3fb.bind(this),this._op3fb=this._op3fb.bind(this),this.params=Object.getOwnPropertyNames(this)}op1ratio(r=0,n){this.messageDevice("op1ratio",r,n)}_op1ratio(r=0,n){this.messageDevice("_op1ratio",r,n)}op1gain(r=0,n){this.messageDevice("op1gain",r,n)}_op1gain(r=0,n){this.messageDevice("_op1gain",r,n)}op1fb(r=0,n){this.messageDevice("op1fb",r,n)}_op1fb(r=0,n){this.messageDevice("_op1fb",r,n)}op2a(r=0,n){this.messageDevice("op2a",r,n)}op2d(r=0,n){this.messageDevice("op2d",r,n)}op2s(r=0,n){this.messageDevice("op2s",r,n)}op2r(r=0,n){this.messageDevice("op2r",r,n)}op2ratio(r=0,n){this.messageDevice("op2ratio",r,n)}_op2ratio(r=0,n){this.messageDevice("_op2ratio",r,n)}op2gain(r=0,n){this.messageDevice("op2gain",r,n)}_op2gain(r=0,n){this.messageDevice("_op2gain",r,n)}op2fb(r=0,n){this.messageDevice("op2fb",r,n)}_op2fb(r=0,n){this.messageDevice("_op2fb",r,n)}op3a(r=0,n){this.messageDevice("op3a",r,n)}op3d(r=0,n){this.messageDevice("op3d",r,n)}op3s(r=0,n){this.messageDevice("op3s",r,n)}op3r(r=0,n){this.messageDevice("op3r",r,n)}op3ratio(r=0,n){this.messageDevice("op3ratio",r,n)}_op3ratio(r=0,n){this.messageDevice("_op3ratio",r,n)}op3gain(r=0,n){this.messageDevice("op3gain",r,n)}_op3gain(r=0,n){this.messageDevice("_op3gain",r,n)}op3fb(r=0,n){this.messageDevice("op3fb",r,n)}_op3fb(r=0,n){this.messageDevice("_op3fb",r,n)}}const samples={};class BaseSamplingDevice extends BaseSynth{constructor(){super();or(this,"nextBuffer",0);or(this,"banks",{});or(this,"currentBank","");or(this,"buffers",{});this.bank=this.bank.bind(this),this.i=this.i.bind(this)}async bank(n){this.currentBank=n}async loadSample(n,t){const a=this.banks[n][t],l=Object.values(this.buffers).indexOf(a);if(l<0){const o=`${n}-${t}`,c=samples[o]||await fetch(a).then(f=>f.arrayBuffer()).then(f=>this.context.decodeAudioData(f)).catch(f=>console.log(f)),i=`b${this.nextBuffer}`;this.device.setDataBuffer(i,c),this.buffers[i]=a,samples[o]=c,this.nextBuffer=(this.nextBuffer+1)%32}return l}async i(n,t){if(!this.currentBank)return;const a=n%this.banks[this.currentBank].length,l=await this.loadSample(this.currentBank,a);this.messageDevice("i",l,t)}}const patcher$3=fetch(new URL(""+new URL("../assets/sampler.export.595d99a2.json",import.meta.url).href,self.location)).then(s=>s.json());class Sampler extends BaseSamplingDevice{constructor(){super(),this.defaults={...this.defaults,i:0,snap:0,rate:1,a:5,d:10,s:1,r:100,bpm:120,begin:0,end:1,loop:0,oneshot:0,loopsize:1},this.patcher=patcher$3,this.initDevice(),this.snap=this.snap.bind(this),this.rate=this.rate.bind(this),this._rate=this._rate.bind(this),this.begin=this.begin.bind(this),this.end=this.end.bind(this),this.loop=this.loop.bind(this),this.loopsize=this.loopsize.bind(this),this._loopsize=this._loopsize.bind(this),this.oneshot=this.oneshot.bind(this),this.bpm=this.bpm.bind(this),this.params=Object.getOwnPropertyNames(this)}snap(r=0,n){this.messageDevice("snap",r,n)}rate(r=1,n){this.messageDevice("rate",r,n)}_rate(r=1,n){this.messageDevice("_rate",r,n)}begin(r=0,n){this.messageDevice("begin",r,n)}end(r=1,n){this.messageDevice("end",r,n)}loop(r=0,n){this.messageDevice("loop",r,n)}loopsize(r=1,n){this.messageDevice("loopsize",r,n)}_loopsize(r=1,n){this.messageDevice("_loopsize",r,n)}oneshot(r=0,n){this.messageDevice("oneshot",r,n)}bpm(r=120,n){this.messageDevice("bpm",r,n)}}const patcher$2=fetch(new URL(""+new URL("../assets/granular.export.22794cb4.json",import.meta.url).href,self.location)).then(s=>s.json());class Granular extends BaseSamplingDevice{constructor(){super(),this.defaults={...this.defaults,i:0,snap:0,rate:1,a:0,d:10,s:1,r:100,bpm:60,grainrate:16,grainsize:.125,grainslope:.01,grainpan:.2,direction:1,begin:0,end:1},this.patcher=patcher$2,this.initDevice(),this.snap=this.snap.bind(this),this.rate=this.rate.bind(this),this._rate=this._rate.bind(this),this.grainrate=this.grainrate.bind(this),this._grainrate=this._grainrate.bind(this),this.grainsize=this.grainsize.bind(this),this._grainsize=this._grainsize.bind(this),this.grainslope=this.grainslope.bind(this),this._grainslope=this._grainslope.bind(this),this.grainpan=this.grainpan.bind(this),this._grainpan=this._grainpan.bind(this),this.direction=this.direction.bind(this),this._direction=this._direction.bind(this),this.begin=this.begin.bind(this),this.end=this.end.bind(this),this.loop=this.loop.bind(this),this.bpm=this.bpm.bind(this),this.params=Object.getOwnPropertyNames(this)}snap(r=0,n){this.messageDevice("snap",r,n)}rate(r=1,n){this.messageDevice("rate",r,n)}_rate(r=1,n){this.messageDevice("_rate",r,n)}grainrate(r=16,n){this.messageDevice("grainrate",r,n)}_grainrate(r=16,n){this.messageDevice("_grainrate",r,n)}grainsize(r=.125,n){this.messageDevice("grainsize",r,n)}_grainsize(r=.125,n){this.messageDevice("_grainsize",r,n)}grainslope(r=.01,n){this.messageDevice("grainslope",r,n)}_grainslope(r=.01,n){this.messageDevice("_grainslope",r,n)}grainpan(r=.2,n){this.messageDevice("grainpan",r,n)}_grainpan(r=.2,n){this.messageDevice("_grainpan",r,n)}direction(r=1,n){this.messageDevice("direction",r,n)}_direction(r=1,n){this.messageDevice("_direction",r,n)}begin(r=0,n){this.messageDevice("begin",r,n)}end(r=1,n){this.messageDevice("end",r,n)}loop(r=0,n){this.messageDevice("loop",r,n)}bpm(r=120,n){this.messageDevice("bpm",r,n)}}fetch(new URL(""+new URL("../assets/additive.export.a0581da3.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/acid.export.a0c8e199.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/drone.export.6a7fa125.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/sub.export.6fba58bd.json",import.meta.url).href,self.location)).then(s=>s.json());const patcher$1=fetch(new URL(""+new URL("../assets/wavetable.export.4e74a402.json",import.meta.url).href,self.location)).then(s=>s.json());class Wavetable extends BaseSamplingDevice{constructor(){super(),this.defaults={...this.defaults,dur:1e3,tablesize:256,rows:16,xlfo:.02,ylfo:.3},this.patcher=patcher$1,this.initDevice(),this.tablesize=this.tablesize.bind(this),this.rows=this.rows.bind(this),this.xlfo=this.xlfo.bind(this),this._xlfo=this._xlfo.bind(this),this.ylfo=this.ylfo.bind(this),this._ylfo=this._ylfo.bind(this),this.params=Object.getOwnPropertyNames(this)}tablesize(r=256,n){this.messageDevice("tablesize",r,n)}rows(r=16,n){this.messageDevice("rows",r,n)}xlfo(r=0,n){this.messageDevice("xlfo",r,n)}_xlfo(r=0,n){this.messageDevice("_xlfo",r,n)}ylfo(r=0,n){this.messageDevice("ylfo",r,n)}_ylfo(r=0,n){this.messageDevice("_ylfo",r,n)}}const patcher=fetch(new URL(""+new URL("../assets/fx.export.7977c06e.json",import.meta.url).href,self.location)).then(s=>s.json());class FXChain extends RNBODevice{constructor(){super(),this.defaults={dist:0,drive:.25,ring:0,ringf:.25,ringspread:0,ringmode:0,hicut:0,locut:0,chorus:0,chdepth:.25,chlfo:.25,chspread:.25,delay:0,dtime:500,dfb:.5,dspread:0,dcolour:.25,dfilter:0,reverb:0,rsize:.25,rdamp:.25,rdiff:.25,rjitter:0,rdecay:.25,gain:1,lthresh:1},this.patcher=patcher,this.initDevice(),this.dist=this.dist.bind(this),this._dist=this._dist.bind(this),this.drive=this.drive.bind(this),this._drive=this._drive.bind(this),this.ring=this.ring.bind(this),this._ring=this._ring.bind(this),this.ringf=this.ringf.bind(this),this._ringf=this._ringf.bind(this),this.ringspread=this.ringspread.bind(this),this._ringspread=this._ringspread.bind(this),this.ringmode=this.ringmode.bind(this),this._ringmode=this._ringmode.bind(this),this.hicut=this.hicut.bind(this),this._hicut=this._hicut.bind(this),this.locut=this.locut.bind(this),this._locut=this._locut.bind(this),this.chorus=this.chorus.bind(this),this._chorus=this._chorus.bind(this),this.chdepth=this.chdepth.bind(this),this._chdepth=this._chdepth.bind(this),this.chlfo=this.chlfo.bind(this),this._chlfo=this._chlfo.bind(this),this.chspread=this.chspread.bind(this),this._chspread=this._chspread.bind(this),this.delay=this.delay.bind(this),this._delay=this._delay.bind(this),this.dtime=this.dtime.bind(this),this._dtime=this._dtime.bind(this),this.dfb=this.dfb.bind(this),this._dfb=this._dfb.bind(this),this.dspread=this.dspread.bind(this),this._dspread=this._dspread.bind(this),this.dcolour=this.dcolour.bind(this),this._dcolour=this._dcolour.bind(this),this.dfilter=this.dfilter.bind(this),this._dfilter=this._dfilter.bind(this),this.reverb=this.reverb.bind(this),this._reverb=this._reverb.bind(this),this.rsize=this.rsize.bind(this),this._rsize=this._rsize.bind(this),this.rdamp=this.rdamp.bind(this),this._rdamp=this._rdamp.bind(this),this.rdiff=this.rdiff.bind(this),this._rdiff=this._rdiff.bind(this),this.rjitter=this.rjitter.bind(this),this._rjitter=this._rjitter.bind(this),this.rdecay=this.rdecay.bind(this),this._rdecay=this._rdecay.bind(this),this.gain=this.gain.bind(this),this._gain=this._gain.bind(this),this.lthresh=this.lthresh.bind(this),this._lthresh=this._lthresh.bind(this),this.params=Object.getOwnPropertyNames(this)}set(r={},n){if(!this.ready)return;const t={...this.defaults,...r};this.setParams(t,n);const a=new rnbo_webaudioExports.MIDIEvent(n*1e3,0,[144,60,127]);this.device.scheduleEvent(a)}dist(r=0,n){this.messageDevice("dist",r,n)}_dist(r=0,n){this.messageDevice("_dist",r,n)}drive(r=.5,n){this.messageDevice("drive",r,n)}_drive(r=.5,n){this.messageDevice("_drive",r,n)}ring(r=0,n){this.messageDevice("ring",r,n)}_ring(r=0,n){this.messageDevice("_ring",r,n)}ringf(r=.25,n){this.messageDevice("ringf",r,n)}_ringf(r=.25,n){this.messageDevice("_ringf",r,n)}ringspread(r=0,n){this.messageDevice("ringspread",r,n)}_ringspread(r=0,n){this.messageDevice("_ringspread",r,n)}ringmode(r=0,n){this.messageDevice("ringmode",r,n)}_ringmode(r=0,n){this.messageDevice("_ringmode",r,n)}chorus(r=0,n){this.messageDevice("chorus",r,n)}_chorus(r=0,n){this.messageDevice("_chorus",r,n)}chdepth(r=.25,n){this.messageDevice("chdepth",r,n)}_chdepth(r=.25,n){this.messageDevice("_chdepth",r,n)}chlfo(r=.25,n){this.messageDevice("chlfo",r,n)}_chlfo(r=.25,n){this.messageDevice("_chlfo",r,n)}chspread(r=.25,n){this.messageDevice("chspread",r,n)}_chspread(r=.25,n){this.messageDevice("_chspread",r,n)}hicut(r=0,n){this.messageDevice("hicut",r,n)}_hicut(r=0,n){this.messageDevice("_hicut",r,n)}locut(r=0,n){this.messageDevice("locut",r,n)}_locut(r=0,n){this.messageDevice("_locut",r,n)}delay(r=0,n){this.messageDevice("delay",r,n)}_delay(r=0,n){this.messageDevice("_delay",r,n)}dtime(r=500,n){this.messageDevice("dtime",r,n)}_dtime(r=500,n){this.messageDevice("_dtime",r,n)}dfb(r=.5,n){this.messageDevice("dfb",r,n)}_dfb(r=.5,n){this.messageDevice("_dfb",r,n)}dspread(r=0,n){this.messageDevice("dspread",r,n)}_dspread(r=0,n){this.messageDevice("_dspread",r,n)}dcolour(r=.25,n){this.messageDevice("dcolour",r,n)}_dcolour(r=.25,n){this.messageDevice("_dcolour",r,n)}dfilter(r=0,n){this.messageDevice("dfilter",r,n)}_dfilter(r=0,n){this.messageDevice("_dfilter",r,n)}reverb(r=0,n){this.messageDevice("reverb",r,n)}_reverb(r=0,n){this.messageDevice("_reverb",r,n)}rsize(r=.25,n){this.messageDevice("rsize",r,n)}_rsize(r=.25,n){this.messageDevice("_rsize",r,n)}rdamp(r=.25,n){this.messageDevice("rdamp",r,n)}_rdamp(r=.25,n){this.messageDevice("_rdamp",r,n)}rdiff(r=.25,n){this.messageDevice("rdiff",r,n)}_rdiff(r=.25,n){this.messageDevice("_rdiff",r,n)}rjitter(r=0,n){this.messageDevice("rjitter",r,n)}_rjitter(r=0,n){this.messageDevice("_rjitter",r,n)}rdecay(r=.25,n){this.messageDevice("rdecay",r,n)}_rdecay(r=.25,n){this.messageDevice("_rdecay",r,n)}gain(r=1,n){this.messageDevice("gain",r,n)}_gain(r=1,n){this.messageDevice("_gain",r,n)}lthresh(r=1,n){this.messageDevice("lthresh",r,n)}_lthresh(r=1,n){this.messageDevice("_lthresh",r,n)}}fetch(new URL(""+new URL("../assets/fx-channel.export.ba7289dd.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/fx-reverb.export.799a4f40.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/fx-delay.export.9ce6e69c.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/reverb-gen.export.83d0610a.json",import.meta.url).href,self.location)).then(s=>s.json());const CtSuperFM=Synth,CtSampler=Sampler,CtGranulator=Granular,CtFXChain=FXChain,CtWavetable=Wavetable;async function startAudio(){await start(),console.log("started audio"),window.removeEventListener("keydown",startAudio),window.removeEventListener("click",startAudio),window.removeEventListener("touchstart",startAudio)}const output=new Gain(1).toDestination();volume.subscribe(s=>{output.gain.value=s});const limiter=new Limiter(-10).connect(output),fx=new CtFXChain;fx.connect(limiter);const crush=new BitCrusher({bits:4,wet:0}).connect(fx.input),synth=new CtSuperFM;synth.connect(crush);const sampler=new CtSampler;sampler.banks={default:get_store_value(samples$1)};sampler.bank("default");sampler.connect(crush);const granular=new CtGranulator;granular.banks={default:get_store_value(samples$1)};granular.bank("default");granular.connect(crush);const wavetable=new CtWavetable;wavetable.banks={default:get_store_value(samples$1)};wavetable.bank("default");wavetable.connect(crush);samples$1.subscribe(s=>[sampler,granular,wavetable].forEach(r=>{r.banks={default:s}}));const instruments={synth,sampler,granular,wavetable},handleEvent=s=>{var o,c;if(get_store_value(mute))return;const{inst:r,n,semitone:t,octave:a}=s,l=t+a*12;get_store_value(drone)&&r==="synth"&&((o=instruments[r])==null||o.cut(immediate())),(c=instruments[r])==null||c.play({...s,n,detune:l},immediate()+.01),fx.set(s,immediate()),crush.wet.value=s.crush,crush.set({bits:mapToStepRange(s.crush,0,1,16,4,1)})},handleNoteOff=(s,r)=>{var n;!get_store_value(drone)&&((n=instruments[s])==null||n.release(r,immediate()))},cut=()=>{var r,n,t,a;const s=get_store_value(envelopeValues).r;(r=instruments.synth)==null||r.cut(immediate(),s),(n=instruments.sampler)==null||n.cut(immediate(),s),(t=instruments.granular)==null||t.cut(immediate(),s),(a=instruments.wavetable)==null||a.cut(immediate(),s)},handleMutation=s=>{var l;const{inst:r,semitone:n,octave:t}=s,a=n+t*12;(l=instruments[r])==null||l.mutate({...s,detune:a},immediate()),fx.mutate(s,immediate()),crush.wet.value=s.crush,crush.set({bits:mapToStepRange(s.crush,0,1,16,4,1)})},loadSample=s=>{Object.values(instruments).map(r=>r.loadSample&&r.loadSample("default",s))};synthValues.subscribe(throttle(s=>handleMutation(s),100));drone.subscribe(s=>(!s&&cut(),s));const RangeSlider_svelte_svelte_type_style_lang="";function create_fragment$s(s){let r,n,t=s[0].toLocaleString("fullwide",{maximumFractionDigits:2})+"",a,l,o,c,i,f,y,_,u,m,p,g=s[1].toLocaleString("fullwide",{maximumFractionDigits:2})+"",x,b,E,S;return{c(){r=element("div"),n=element("span"),a=text(t),l=text(s[5]),o=space(),c=element("div"),i=element("input"),f=space(),y=element("input"),_=space(),u=element("input"),m=space(),p=element("span"),x=text(g),b=text(s[5]),this.h()},l(k){r=claim_element(k,"DIV",{class:!0});var T=children(r);n=claim_element(T,"SPAN",{class:!0});var j=children(n);a=claim_text(j,t),l=claim_text(j,s[5]),j.forEach(detach),o=claim_space(T),c=claim_element(T,"DIV",{class:!0});var A=children(c);i=claim_element(A,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),f=claim_space(A),y=claim_element(A,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),_=claim_space(A),u=claim_element(A,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),A.forEach(detach),m=claim_space(T),p=claim_element(T,"SPAN",{class:!0});var C=children(p);x=claim_text(C,g),b=claim_text(C,s[5]),C.forEach(detach),T.forEach(detach),this.h()},h(){attr(n,"class"," svelte-par15d"),attr(i,"class","min svelte-par15d"),attr(i,"type","range"),attr(i,"min",s[2]),attr(i,"max",s[3]),attr(i,"step",s[4]),attr(y,"class","track svelte-par15d"),attr(y,"type","range"),attr(y,"min",s[2]),attr(y,"max",s[3]),attr(y,"step",s[4]),y.value=s[6],y.disabled=!0,attr(u,"class","max svelte-par15d"),attr(u,"type","range"),attr(u,"min",s[2]),attr(u,"max",s[3]),attr(u,"step",s[4]),attr(c,"class","slider svelte-par15d"),attr(p,"class"," svelte-par15d"),attr(r,"class","range-slider svelte-par15d")},m(k,T){insert_hydration(k,r,T),append_hydration(r,n),append_hydration(n,a),append_hydration(n,l),append_hydration(r,o),append_hydration(r,c),append_hydration(c,i),set_input_value(i,s[0]),append_hydration(c,f),append_hydration(c,y),append_hydration(c,_),append_hydration(c,u),set_input_value(u,s[1]),append_hydration(r,m),append_hydration(r,p),append_hydration(p,x),append_hydration(p,b),E||(S=[listen$1(i,"change",s[7]),listen$1(i,"input",s[7]),listen$1(u,"change",s[8]),listen$1(u,"input",s[8])],E=!0)},p(k,[T]){T&1&&t!==(t=k[0].toLocaleString("fullwide",{maximumFractionDigits:2})+"")&&set_data(a,t),T&32&&set_data(l,k[5]),T&4&&attr(i,"min",k[2]),T&8&&attr(i,"max",k[3]),T&16&&attr(i,"step",k[4]),T&1&&set_input_value(i,k[0]),T&4&&attr(y,"min",k[2]),T&8&&attr(y,"max",k[3]),T&16&&attr(y,"step",k[4]),T&64&&(y.value=k[6]),T&4&&attr(u,"min",k[2]),T&8&&attr(u,"max",k[3]),T&16&&attr(u,"step",k[4]),T&2&&set_input_value(u,k[1]),T&2&&g!==(g=k[1].toLocaleString("fullwide",{maximumFractionDigits:2})+"")&&set_data(x,g),T&32&&set_data(b,k[5])},i:noop,o:noop,d(k){k&&detach(r),E=!1,run_all(S)}}}function instance$q(s,r,n){let{min:t=0}=r,{max:a=1}=r,{step:l=.01}=r,{units:o="%"}=r,{rangeA:c=0}=r,{rangeB:i=1}=r,{value:f=.5}=r;function y(){c=to_number(this.value),n(0,c)}function _(){i=to_number(this.value),n(1,i)}return s.$$set=u=>{"min"in u&&n(2,t=u.min),"max"in u&&n(3,a=u.max),"step"in u&&n(4,l=u.step),"units"in u&&n(5,o=u.units),"rangeA"in u&&n(0,c=u.rangeA),"rangeB"in u&&n(1,i=u.rangeB),"value"in u&&n(6,f=u.value)},[c,i,t,a,l,o,f,y,_]}class RangeSlider extends SvelteComponent{constructor(r){super(),init(this,r,instance$q,create_fragment$s,safe_not_equal,{min:2,max:3,step:4,units:5,rangeA:0,rangeB:1,value:6})}}const Cable_svelte_svelte_type_style_lang="";function get_each_context$a(s,r,n){const t=s.slice();return t[12]=r[n].x1,t[13]=r[n].y1,t[14]=r[n].x2,t[15]=r[n].y2,t}function create_each_block$a(s){let r,n,t,a,l;return{c(){r=svg_element("line"),this.h()},l(o){r=claim_svg_element(o,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),children(r).forEach(detach),this.h()},h(){attr(r,"class","cable svelte-rvp61"),attr(r,"x1",n=s[12]),attr(r,"x2",t=s[14]),attr(r,"y1",a=s[13]),attr(r,"y2",l=s[15]),attr(r,"stroke",s[2]),attr(r,"stroke-width","2")},m(o,c){insert_hydration(o,r,c)},p(o,c){c&32&&n!==(n=o[12])&&attr(r,"x1",n),c&32&&t!==(t=o[14])&&attr(r,"x2",t),c&32&&a!==(a=o[13])&&attr(r,"y1",a),c&32&&l!==(l=o[15])&&attr(r,"y2",l),c&4&&attr(r,"stroke",o[2])},d(o){o&&detach(r)}}}function create_fragment$r(s){let r,n,t,a,l,o,c,i,f=s[5],y=[];for(let _=0;_<f.length;_+=1)y[_]=create_each_block$a(get_each_context$a(s,f,_));return{c(){r=svg_element("svg"),n=svg_element("circle");for(let _=0;_<y.length;_+=1)y[_].c();l=svg_element("circle"),this.h()},l(_){r=claim_svg_element(_,"svg",{viewBox:!0,xmlns:!0,class:!0});var u=children(r);n=claim_svg_element(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),children(n).forEach(detach);for(let m=0;m<y.length;m+=1)y[m].l(u);l=claim_svg_element(u,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),children(l).forEach(detach),u.forEach(detach),this.h()},h(){attr(n,"class","socket svelte-rvp61"),attr(n,"cx",t=s[0].x),attr(n,"cy",a=s[0].y),attr(n,"r","3"),attr(n,"stroke",s[2]),attr(n,"stroke-width","1.5"),attr(n,"fill","white"),attr(l,"class","socket svelte-rvp61"),attr(l,"cx",o=s[1].x),attr(l,"cy",c=s[1].y),attr(l,"r","3"),attr(l,"stroke",s[2]),attr(l,"stroke-width","1.5"),attr(l,"fill","white"),attr(r,"viewBox",i=`0 0 ${s[3]} ${s[4]}`),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(r,"class","svg svelte-rvp61")},m(_,u){insert_hydration(_,r,u),append_hydration(r,n);for(let m=0;m<y.length;m+=1)y[m]&&y[m].m(r,null);append_hydration(r,l)},p(_,[u]){if(u&1&&t!==(t=_[0].x)&&attr(n,"cx",t),u&1&&a!==(a=_[0].y)&&attr(n,"cy",a),u&4&&attr(n,"stroke",_[2]),u&36){f=_[5];let m;for(m=0;m<f.length;m+=1){const p=get_each_context$a(_,f,m);y[m]?y[m].p(p,u):(y[m]=create_each_block$a(p),y[m].c(),y[m].m(r,l))}for(;m<y.length;m+=1)y[m].d(1);y.length=f.length}u&2&&o!==(o=_[1].x)&&attr(l,"cx",o),u&2&&c!==(c=_[1].y)&&attr(l,"cy",c),u&4&&attr(l,"stroke",_[2]),u&24&&i!==(i=`0 0 ${_[3]} ${_[4]}`)&&attr(r,"viewBox",i)},i:noop,o:noop,d(_){_&&detach(r),destroy_each(y,_)}}}function instance$p(s,r,n){let t,a,l,o,c,{from:i={x:0,y:0}}=r,{to:f={x:0,y:0}}=r,{offset:y=2}=r,{colour:_="blue"}=r,u=0,m=0,p;return onMount(()=>{function g(){n(3,u=window.innerWidth),n(4,m=document.body.scrollHeight)}p=new ResizeObserver(g),p.observe(document.body),g()}),onDestroy(()=>p.disconnect()),s.$$set=g=>{"from"in g&&n(0,i=g.from),"to"in g&&n(1,f=g.to),"offset"in g&&n(6,y=g.offset),"colour"in g&&n(2,_=g.colour)},s.$$.update=()=>{s.$$.dirty&65&&n(10,t={x1:i.x+3,y1:i.y,x2:i.x+43+y,y2:i.y}),s.$$.dirty&1091&&n(9,a={x1:t.x2,y1:i.y,x2:t.x2,y2:f.y+23-y}),s.$$.dirty&514&&n(8,l={x1:a.x1,y1:a.y2,x2:f.x,y2:a.y2}),s.$$.dirty&258&&n(7,o={x1:l.x2,y1:l.y2,x2:f.x,y2:f.y}),s.$$.dirty&1920&&n(5,c=[t,a,l,o])},[i,f,_,u,m,c,y,o,l,a,t]}class Cable extends SvelteComponent{constructor(r){super(),init(this,r,instance$p,create_fragment$r,safe_not_equal,{from:0,to:1,offset:6,colour:2})}}const Socket_svelte_svelte_type_style_lang="",{window:window_1$3}=globals;function get_each_context$9(s,r,n){const t=s.slice();return t[17]=r[n],t}function create_if_block$c(s){let r,n;return r=new Cable({props:{colour:s[7][s[17]].colour,offset:s[7][s[17]].offset,from:{x:s[7][s[1]].x+s[7][s[1]].width/2,y:s[7][s[1]].y+s[7][s[1]].width/2},to:{x:s[7][s[17]].x+s[7][s[17]].width/2-.5,y:s[7][s[17]].y+s[7][s[17]].width/2}}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&160&&(l.colour=t[7][t[17]].colour),a&160&&(l.offset=t[7][t[17]].offset),a&130&&(l.from={x:t[7][t[1]].x+t[7][t[1]].width/2,y:t[7][t[1]].y+t[7][t[1]].width/2}),a&160&&(l.to={x:t[7][t[17]].x+t[7][t[17]].width/2-.5,y:t[7][t[17]].y+t[7][t[17]].width/2}),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block$9(s,r){let n,t,a,l=r[7][r[17]]&&create_if_block$c(r);return{key:s,first:null,c(){n=empty(),l&&l.c(),t=empty(),this.h()},l(o){n=empty(),l&&l.l(o),t=empty(),this.h()},h(){this.first=n},m(o,c){insert_hydration(o,n,c),l&&l.m(o,c),insert_hydration(o,t,c),a=!0},p(o,c){r=o,r[7][r[17]]?l?(l.p(r,c),c&160&&transition_in(l,1)):(l=create_if_block$c(r),l.c(),transition_in(l,1),l.m(t.parentNode,t)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(o){a||(transition_in(l),a=!0)},o(o){transition_out(l),a=!1},d(o){o&&detach(n),l&&l.d(o),o&&detach(t)}}}function create_fragment$q(s){let r,n,t,a,l,o=[],c=new Map,i,f,y,_,u=s[5];const m=p=>p[17];for(let p=0;p<u.length;p+=1){let g=get_each_context$9(s,u,p),x=m(g);c.set(x,o[p]=create_each_block$9(x,g))}return{c(){r=element("div"),n=element("div"),l=space();for(let p=0;p<o.length;p+=1)o[p].c();this.h()},l(p){r=claim_element(p,"DIV",{class:!0});var g=children(r);n=claim_element(g,"DIV",{class:!0}),children(n).forEach(detach),l=claim_space(g);for(let x=0;x<o.length;x+=1)o[x].l(g);g.forEach(detach),this.h()},h(){attr(n,"class",t=null_to_empty(`socket socket--${s[2]} socket--${s[1]} ${s[0]?" active":""}`)+" svelte-1qmt5cq"),attr(r,"class",i=null_to_empty(`socket__container socket__container--${s[3]}`)+" svelte-1qmt5cq")},m(p,g){insert_hydration(p,r,g),append_hydration(r,n),s[15](n),append_hydration(r,l);for(let x=0;x<o.length;x+=1)o[x]&&o[x].m(r,null);f=!0,y||(_=[listen$1(window_1$3,"resize",s[12]),listen$1(window_1$3,"keydown",s[11]),action_destroyer(a=d.call(null,n,{bounds:"body",position:s[6]})),listen$1(n,"neodrag",s[8]),listen$1(n,"neodrag:end",s[9]),listen$1(n,"click",s[10])],y=!0)},p(p,[g]){(!f||g&7&&t!==(t=null_to_empty(`socket socket--${p[2]} socket--${p[1]} ${p[0]?" active":""}`)+" svelte-1qmt5cq"))&&attr(n,"class",t),a&&is_function(a.update)&&g&64&&a.update.call(null,{bounds:"body",position:p[6]}),g&162&&(u=p[5],group_outros(),o=update_keyed_each(o,g,m,1,p,u,c,r,outro_and_destroy_block,create_each_block$9,null,get_each_context$9),check_outros()),(!f||g&8&&i!==(i=null_to_empty(`socket__container socket__container--${p[3]}`)+" svelte-1qmt5cq"))&&attr(r,"class",i)},i(p){if(!f){for(let g=0;g<u.length;g+=1)transition_in(o[g]);f=!0}},o(p){for(let g=0;g<o.length;g+=1)transition_out(o[g]);f=!1},d(p){p&&detach(r),s[15](null);for(let g=0;g<o.length;g+=1)o[g].d();y=!1,run_all(_)}}}function instance$o(s,r,n){let t;component_subscribe(s,sockets,k=>n(7,t=k));let{id:a}=r,{type:l}=r,{active:o=!1}=r,{align:c="center"}=r,{colour:i="blue"}=r,{offset:f=0}=r,y,_=[],u={x:0,y:0};function m({offsetX:k,offsetY:T}){n(6,u={x:k,y:T}),n(4,y.style.zIndex=1002,y)}function p(k){var N;const T=(N=k.target)==null?void 0:N.getBoundingClientRect(),j=T.x+window.scrollX,A=T.y+window.scrollY,C=Object.keys(t).find(V=>{const{x:I,y:G,width:R}=t[V];return j>I-R&&j<I+R&&A>G-R&&A<G+R});C&&connectSockets(t[a],t[C]),n(6,u={x:0,y:0}),n(4,y.style.zIndex=10,y)}function g(){activateSocket(a)}function x(k){k.key==="Escape"&&deactivateSockets(),k.key==="Backspace"&&o&&disconnectSocket(a)}function b(){const k=y.getBoundingClientRect(),T=k.x+window.scrollX,j=k.y+window.scrollY,A=k.width;sockets.update(C=>({...C,[a]:{...C[a],id:a,x:T,y:j,width:A,active:o,type:l,colour:i,offset:f}}))}const E=instrumentParameters.subscribe(async()=>{await tick(),y&&b()});onMount(()=>{b(),document.addEventListener("redrawCables",b);const k=sockets.subscribe(j=>{var A;n(0,o=(A=j[a])==null?void 0:A.active)}),T=connections.subscribe(j=>{var A;n(5,_=((A=j.filter(C=>C[0]===a))==null?void 0:A.map(C=>C[1]))||[])});return()=>{document.removeEventListener("redrawCables",b),k(),T(),E()}});function S(k){binding_callbacks[k?"unshift":"push"](()=>{y=k,n(4,y)})}return s.$$set=k=>{"id"in k&&n(1,a=k.id),"type"in k&&n(2,l=k.type),"active"in k&&n(0,o=k.active),"align"in k&&n(3,c=k.align),"colour"in k&&n(13,i=k.colour),"offset"in k&&n(14,f=k.offset)},[o,a,l,c,y,_,u,t,m,p,g,x,b,i,f,S]}class Socket extends SvelteComponent{constructor(r){super(),init(this,r,instance$o,create_fragment$q,safe_not_equal,{id:1,type:2,active:0,align:3,colour:13,offset:14})}}const Buttons_svelte_svelte_type_style_lang="";function get_each_context$8(s,r,n){const t=s.slice();return t[7]=r[n],t[9]=n,t}function create_each_block$8(s,r){let n,t=".",a,l,o;function c(){return r[5](r[7])}function i(...f){return r[6](r[7],...f)}return{key:s,first:null,c(){n=element("button"),a=text(t),this.h()},l(f){n=claim_element(f,"BUTTON",{style:!0,class:!0});var y=children(n);a=claim_text(y,t),y.forEach(detach),this.h()},h(){set_style(n,"background-color",r[4][r[9]%3]),attr(n,"class","svelte-12zydf2"),toggle_class(n,"active",r[3].some(i)),this.first=n},m(f,y){insert_hydration(f,n,y),append_hydration(n,a),l||(o=listen$1(n,"click",c),l=!0)},p(f,y){r=f,y&2&&set_style(n,"background-color",r[4][r[9]%3]),y&11&&toggle_class(n,"active",r[3].some(i))},d(f){f&&detach(n),l=!1,o()}}}function create_fragment$p(s){let r,n=[],t=new Map,a=s[1];const l=o=>o[7];for(let o=0;o<a.length;o+=1){let c=get_each_context$8(s,a,o),i=l(c);t.set(i,n[o]=create_each_block$8(i,c))}return{c(){r=element("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<n.length;i+=1)n[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","buttons svelte-12zydf2")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(r,null)},p(o,[c]){c&31&&(a=o[1],n=update_keyed_each(n,c,l,1,o,a,t,r,destroy_block,create_each_block$8,null,get_each_context$8))},i:noop,o:noop,d(o){o&&detach(r);for(let c=0;c<n.length;c+=1)n[c].d()}}}function instance$n(s,r,n){let t,a;component_subscribe(s,sockets,y=>n(2,t=y)),component_subscribe(s,connections,y=>n(3,a=y));let{id:l}=r,{options:o}=r;const c=["#00A399","#E5007F","#FF695A"],i=y=>connectSockets(t[y],t[l]),f=(y,_)=>_.includes(l)&&_.includes(y);return s.$$set=y=>{"id"in y&&n(0,l=y.id),"options"in y&&n(1,o=y.options)},[l,o,t,a,c,i,f]}class Buttons extends SvelteComponent{constructor(r){super(),init(this,r,instance$n,create_fragment$p,safe_not_equal,{id:0,options:1})}}const Parameters_svelte_svelte_type_style_lang="";function get_each_context$7(s,r,n){const t=s.slice();return t[22]=r[n].name,t[23]=r[n].min,t[24]=r[n].max,t[25]=r[n].step,t[26]=r[n].units,t[27]=r[n].key,t[28]=r[n].rangeA,t[29]=r[n].rangeB,t[30]=r[n].isLocked,t[31]=r,t[32]=n,t}function get_each_context_1$1(s,r,n){const t=s.slice();return t[22]=r[n].name,t[23]=r[n].min,t[24]=r[n].max,t[25]=r[n].step,t[26]=r[n].units,t[27]=r[n].key,t[28]=r[n].rangeA,t[29]=r[n].rangeB,t[30]=r[n].isLocked,t[33]=r,t[34]=n,t}function get_each_context_2(s,r,n){const t=s.slice();return t[35]=r[n].type,t[22]=r[n].name,t[23]=r[n].min,t[24]=r[n].max,t[25]=r[n].step,t[26]=r[n].units,t[27]=r[n].key,t[28]=r[n].rangeA,t[29]=r[n].rangeB,t[30]=r[n].isLocked,t[36]=r,t[37]=n,t}function create_if_block_4$2(s){let r,n,t;function a(...l){return s[10](s[28],s[29],s[36],s[37],...l)}return n=new Select({props:{id:s[27],options:s[1],selected:s[4][s[27]],onChange:a}}),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);claim_component(n.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(r,"class","samples svelte-u5ft1b")},m(l,o){insert_hydration(l,r,o),mount_component(n,r,null),t=!0},p(l,o){s=l;const c={};o[0]&12&&(c.id=s[27]),o[0]&2&&(c.options=s[1]),o[0]&28&&(c.selected=s[4][s[27]]),o[0]&12&&(c.onChange=a),n.$set(c)},i(l){t||(transition_in(n.$$.fragment,l),t=!0)},o(l){transition_out(n.$$.fragment,l),t=!1},d(l){l&&detach(r),destroy_component(n)}}}function create_if_block_2$5(s){let r,n=s[22]+"",t,a,l,o,c,i,f,y,_,u,m,p,g,x,b;function E(N){s[11](N,s[28],s[36],s[37])}function S(N){s[12](N,s[29],s[36],s[37])}let k={min:s[23],max:s[24],step:s[25],units:s[26],value:s[4][s[27]]};s[28]!==void 0&&(k.rangeA=s[28]),s[29]!==void 0&&(k.rangeB=s[29]),l=new RangeSlider({props:k}),binding_callbacks.push(()=>bind(l,"rangeA",E)),binding_callbacks.push(()=>bind(l,"rangeB",S)),y=new FontAwesomeIcon({props:{icon:faLock,class:"icon",style:`color: ${s[30]?"#FFF":"var(--color-grey-darker);"}`}});function T(){return s[13](s[30],s[36],s[37])}const j=[create_if_block_3$3,create_else_block_2],A=[];function C(N,V){return N[0]?0:1}return u=C(s),m=A[u]=j[u](s),{c(){r=element("h3"),t=text(n),a=space(),create_component(l.$$.fragment),i=space(),f=element("button"),create_component(y.$$.fragment),_=space(),m.c(),p=empty(),this.h()},l(N){r=claim_element(N,"H3",{class:!0});var V=children(r);t=claim_text(V,n),V.forEach(detach),a=claim_space(N),claim_component(l.$$.fragment,N),i=claim_space(N),f=claim_element(N,"BUTTON",{class:!0});var I=children(f);claim_component(y.$$.fragment,I),I.forEach(detach),_=claim_space(N),m.l(N),p=empty(),this.h()},h(){attr(r,"class","svelte-u5ft1b"),attr(f,"class","svelte-u5ft1b")},m(N,V){insert_hydration(N,r,V),append_hydration(r,t),insert_hydration(N,a,V),mount_component(l,N,V),insert_hydration(N,i,V),insert_hydration(N,f,V),mount_component(y,f,null),insert_hydration(N,_,V),A[u].m(N,V),insert_hydration(N,p,V),g=!0,x||(b=listen$1(f,"click",T),x=!0)},p(N,V){s=N,(!g||V[0]&12)&&n!==(n=s[22]+"")&&set_data(t,n);const I={};V[0]&12&&(I.min=s[23]),V[0]&12&&(I.max=s[24]),V[0]&12&&(I.step=s[25]),V[0]&12&&(I.units=s[26]),V[0]&28&&(I.value=s[4][s[27]]),!o&&V[0]&12&&(o=!0,I.rangeA=s[28],add_flush_callback(()=>o=!1)),!c&&V[0]&12&&(c=!0,I.rangeB=s[29],add_flush_callback(()=>c=!1)),l.$set(I);const G={};V[0]&12&&(G.style=`color: ${s[30]?"#FFF":"var(--color-grey-darker);"}`),y.$set(G);let R=u;u=C(s),u===R?A[u].p(s,V):(group_outros(),transition_out(A[R],1,1,()=>{A[R]=null}),check_outros(),m=A[u],m?m.p(s,V):(m=A[u]=j[u](s),m.c()),transition_in(m,1),m.m(p.parentNode,p))},i(N){g||(transition_in(l.$$.fragment,N),transition_in(y.$$.fragment,N),transition_in(m),g=!0)},o(N){transition_out(l.$$.fragment,N),transition_out(y.$$.fragment,N),transition_out(m),g=!1},d(N){N&&detach(r),N&&detach(a),destroy_component(l,N),N&&detach(i),N&&detach(f),destroy_component(y),N&&detach(_),A[u].d(N),N&&detach(p),x=!1,b()}}}function create_else_block_2(s){let r,n;return r=new Buttons({props:{id:s[27],options:s[7]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&12&&(l.id=t[27]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_if_block_3$3(s){let r,n;return r=new Socket({props:{id:s[27],type:"origin",align:"right"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&12&&(l.id=t[27]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block_2(s,r){let n,t,a,l,o,c=r[35]==="select"&&create_if_block_4$2(r),i=r[35]==="range"&&create_if_block_2$5(r);return{key:s,first:null,c(){n=element("div"),c&&c.c(),t=space(),i&&i.c(),a=space(),this.h()},l(f){n=claim_element(f,"DIV",{class:!0});var y=children(n);c&&c.l(y),t=claim_space(y),i&&i.l(y),a=claim_space(y),y.forEach(detach),this.h()},h(){attr(n,"class",l="parameter parameter--"+r[35]+" svelte-u5ft1b"),this.first=n},m(f,y){insert_hydration(f,n,y),c&&c.m(n,null),append_hydration(n,t),i&&i.m(n,null),append_hydration(n,a),o=!0},p(f,y){r=f,r[35]==="select"?c?(c.p(r,y),y[0]&12&&transition_in(c,1)):(c=create_if_block_4$2(r),c.c(),transition_in(c,1),c.m(n,t)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros()),r[35]==="range"?i?(i.p(r,y),y[0]&12&&transition_in(i,1)):(i=create_if_block_2$5(r),i.c(),transition_in(i,1),i.m(n,a)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros()),(!o||y[0]&12&&l!==(l="parameter parameter--"+r[35]+" svelte-u5ft1b"))&&attr(n,"class",l)},i(f){o||(transition_in(c),transition_in(i),o=!0)},o(f){transition_out(c),transition_out(i),o=!1},d(f){f&&detach(n),c&&c.d(),i&&i.d()}}}function create_else_block_1$1(s){let r,n;return r=new Buttons({props:{id:s[27],options:s[7]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&32&&(l.id=t[27]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_if_block_1$7(s){let r,n;return r=new Socket({props:{id:s[27],type:"origin",align:"right"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&32&&(l.id=t[27]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block_1$1(s,r){let n,t,a=r[22]+"",l,o,c,i,f,y,_,u,m,p,g,x,b,E,S;function k(I){r[15](I,r[28],r[33],r[34])}function T(I){r[16](I,r[29],r[33],r[34])}let j={min:r[23],max:r[24],step:r[25],units:r[26],value:r[4][r[27]]};r[28]!==void 0&&(j.rangeA=r[28]),r[29]!==void 0&&(j.rangeB=r[29]),c=new RangeSlider({props:j}),binding_callbacks.push(()=>bind(c,"rangeA",k)),binding_callbacks.push(()=>bind(c,"rangeB",T)),u=new FontAwesomeIcon({props:{icon:faLock,class:"icon",style:`color: ${r[30]?"#FFF":"var(--color-grey-darker);"}`}});function A(){return r[17](r[30],r[33],r[34])}const C=[create_if_block_1$7,create_else_block_1$1],N=[];function V(I,G){return I[0]?0:1}return p=V(r),g=N[p]=C[p](r),{key:s,first:null,c(){n=element("div"),t=element("h3"),l=text(a),o=space(),create_component(c.$$.fragment),y=space(),_=element("button"),create_component(u.$$.fragment),m=space(),g.c(),x=space(),this.h()},l(I){n=claim_element(I,"DIV",{class:!0});var G=children(n);t=claim_element(G,"H3",{class:!0});var R=children(t);l=claim_text(R,a),R.forEach(detach),o=claim_space(G),claim_component(c.$$.fragment,G),y=claim_space(G),_=claim_element(G,"BUTTON",{class:!0});var q=children(_);claim_component(u.$$.fragment,q),q.forEach(detach),m=claim_space(G),g.l(G),x=claim_space(G),G.forEach(detach),this.h()},h(){attr(t,"class","svelte-u5ft1b"),attr(_,"class","svelte-u5ft1b"),attr(n,"class","parameter svelte-u5ft1b"),this.first=n},m(I,G){insert_hydration(I,n,G),append_hydration(n,t),append_hydration(t,l),append_hydration(n,o),mount_component(c,n,null),append_hydration(n,y),append_hydration(n,_),mount_component(u,_,null),append_hydration(n,m),N[p].m(n,null),append_hydration(n,x),b=!0,E||(S=listen$1(_,"click",A),E=!0)},p(I,G){r=I,(!b||G[0]&32)&&a!==(a=r[22]+"")&&set_data(l,a);const R={};G[0]&32&&(R.min=r[23]),G[0]&32&&(R.max=r[24]),G[0]&32&&(R.step=r[25]),G[0]&32&&(R.units=r[26]),G[0]&48&&(R.value=r[4][r[27]]),!i&&G[0]&32&&(i=!0,R.rangeA=r[28],add_flush_callback(()=>i=!1)),!f&&G[0]&32&&(f=!0,R.rangeB=r[29],add_flush_callback(()=>f=!1)),c.$set(R);const q={};G[0]&32&&(q.style=`color: ${r[30]?"#FFF":"var(--color-grey-darker);"}`),u.$set(q);let M=p;p=V(r),p===M?N[p].p(r,G):(group_outros(),transition_out(N[M],1,1,()=>{N[M]=null}),check_outros(),g=N[p],g?g.p(r,G):(g=N[p]=C[p](r),g.c()),transition_in(g,1),g.m(n,x))},i(I){b||(transition_in(c.$$.fragment,I),transition_in(u.$$.fragment,I),transition_in(g),b=!0)},o(I){transition_out(c.$$.fragment,I),transition_out(u.$$.fragment,I),transition_out(g),b=!1},d(I){I&&detach(n),destroy_component(c),destroy_component(u),N[p].d(),E=!1,S()}}}function create_else_block$4(s){let r,n;return r=new Buttons({props:{id:s[27],options:s[7]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&64&&(l.id=t[27]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_if_block$b(s){let r,n;return r=new Socket({props:{id:s[27],type:"origin",align:"right"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&64&&(l.id=t[27]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block$7(s,r){let n,t,a=r[22]+"",l,o,c,i,f,y,_,u,m,p,g,x,b,E,S;function k(I){r[19](I,r[28],r[31],r[32])}function T(I){r[20](I,r[29],r[31],r[32])}let j={min:r[23],max:r[24],step:r[25],units:r[26],value:r[4][r[27]]};r[28]!==void 0&&(j.rangeA=r[28]),r[29]!==void 0&&(j.rangeB=r[29]),c=new RangeSlider({props:j}),binding_callbacks.push(()=>bind(c,"rangeA",k)),binding_callbacks.push(()=>bind(c,"rangeB",T)),u=new FontAwesomeIcon({props:{icon:faLock,class:"icon",style:`color: ${r[30]?"#FFF":"var(--color-grey-darker);"}`}});function A(){return r[21](r[30],r[31],r[32])}const C=[create_if_block$b,create_else_block$4],N=[];function V(I,G){return I[0]?0:1}return p=V(r),g=N[p]=C[p](r),{key:s,first:null,c(){n=element("div"),t=element("h3"),l=text(a),o=space(),create_component(c.$$.fragment),y=space(),_=element("button"),create_component(u.$$.fragment),m=space(),g.c(),x=space(),this.h()},l(I){n=claim_element(I,"DIV",{class:!0});var G=children(n);t=claim_element(G,"H3",{class:!0});var R=children(t);l=claim_text(R,a),R.forEach(detach),o=claim_space(G),claim_component(c.$$.fragment,G),y=claim_space(G),_=claim_element(G,"BUTTON",{class:!0});var q=children(_);claim_component(u.$$.fragment,q),q.forEach(detach),m=claim_space(G),g.l(G),x=claim_space(G),G.forEach(detach),this.h()},h(){attr(t,"class","svelte-u5ft1b"),attr(_,"class","svelte-u5ft1b"),attr(n,"class","parameter svelte-u5ft1b"),this.first=n},m(I,G){insert_hydration(I,n,G),append_hydration(n,t),append_hydration(t,l),append_hydration(n,o),mount_component(c,n,null),append_hydration(n,y),append_hydration(n,_),mount_component(u,_,null),append_hydration(n,m),N[p].m(n,null),append_hydration(n,x),b=!0,E||(S=listen$1(_,"click",A),E=!0)},p(I,G){r=I,(!b||G[0]&64)&&a!==(a=r[22]+"")&&set_data(l,a);const R={};G[0]&64&&(R.min=r[23]),G[0]&64&&(R.max=r[24]),G[0]&64&&(R.step=r[25]),G[0]&64&&(R.units=r[26]),G[0]&80&&(R.value=r[4][r[27]]),!i&&G[0]&64&&(i=!0,R.rangeA=r[28],add_flush_callback(()=>i=!1)),!f&&G[0]&64&&(f=!0,R.rangeB=r[29],add_flush_callback(()=>f=!1)),c.$set(R);const q={};G[0]&64&&(q.style=`color: ${r[30]?"#FFF":"var(--color-grey-darker);"}`),u.$set(q);let M=p;p=V(r),p===M?N[p].p(r,G):(group_outros(),transition_out(N[M],1,1,()=>{N[M]=null}),check_outros(),g=N[p],g?g.p(r,G):(g=N[p]=C[p](r),g.c()),transition_in(g,1),g.m(n,x))},i(I){b||(transition_in(c.$$.fragment,I),transition_in(u.$$.fragment,I),transition_in(g),b=!0)},o(I){transition_out(c.$$.fragment,I),transition_out(u.$$.fragment,I),transition_out(g),b=!1},d(I){I&&detach(n),destroy_component(c),destroy_component(u),N[p].d(),E=!1,S()}}}function create_fragment$o(s){let r,n,t,a,l,o=[],c=new Map,i,f,y,_,u,m,p=[],g=new Map,x,b,E,S,k,T,j=[],A=new Map,C,N,V,I=s[2].filter(s[9]);const G=H=>H[27];for(let H=0;H<I.length;H+=1){let O=get_each_context_2(s,I,H),U=G(O);c.set(U,o[H]=create_each_block_2(U,O))}let R=s[5];const q=H=>H[27];for(let H=0;H<R.length;H+=1){let O=get_each_context_1$1(s,R,H),U=q(O);g.set(U,p[H]=create_each_block_1$1(U,O))}let M=s[6];const L=H=>H[27];for(let H=0;H<M.length;H+=1){let O=get_each_context$7(s,M,H),U=L(O);A.set(U,j[H]=create_each_block$7(U,O))}return{c(){r=element("div"),n=element("button"),t=element("h2"),a=text("Instrument"),l=space();for(let H=0;H<o.length;H+=1)o[H].c();i=space(),f=element("div"),y=element("button"),_=element("h2"),u=text("Global"),m=space();for(let H=0;H<p.length;H+=1)p[H].c();x=space(),b=element("div"),E=element("button"),S=element("h2"),k=text("Effects"),T=space();for(let H=0;H<j.length;H+=1)j[H].c();this.h()},l(H){r=claim_element(H,"DIV",{class:!0});var O=children(r);n=claim_element(O,"BUTTON",{class:!0});var U=children(n);t=claim_element(U,"H2",{class:!0});var J=children(t);a=claim_text(J,"Instrument"),J.forEach(detach),U.forEach(detach),l=claim_space(O);for(let re=0;re<o.length;re+=1)o[re].l(O);O.forEach(detach),i=claim_space(H),f=claim_element(H,"DIV",{class:!0});var Z=children(f);y=claim_element(Z,"BUTTON",{class:!0});var z=children(y);_=claim_element(z,"H2",{class:!0});var B=children(_);u=claim_text(B,"Global"),B.forEach(detach),z.forEach(detach),m=claim_space(Z);for(let re=0;re<p.length;re+=1)p[re].l(Z);Z.forEach(detach),x=claim_space(H),b=claim_element(H,"DIV",{class:!0});var D=children(b);E=claim_element(D,"BUTTON",{class:!0});var X=children(E);S=claim_element(X,"H2",{class:!0});var K=children(S);k=claim_text(K,"Effects"),K.forEach(detach),X.forEach(detach),T=claim_space(D);for(let re=0;re<j.length;re+=1)j[re].l(D);D.forEach(detach),this.h()},h(){attr(t,"class","svelte-u5ft1b"),attr(n,"class","svelte-u5ft1b"),attr(r,"class","group svelte-u5ft1b"),attr(_,"class","svelte-u5ft1b"),attr(y,"class","svelte-u5ft1b"),attr(f,"class","group svelte-u5ft1b"),attr(S,"class","svelte-u5ft1b"),attr(E,"class","svelte-u5ft1b"),attr(b,"class","group svelte-u5ft1b")},m(H,O){insert_hydration(H,r,O),append_hydration(r,n),append_hydration(n,t),append_hydration(t,a),append_hydration(r,l);for(let U=0;U<o.length;U+=1)o[U]&&o[U].m(r,null);insert_hydration(H,i,O),insert_hydration(H,f,O),append_hydration(f,y),append_hydration(y,_),append_hydration(_,u),append_hydration(f,m);for(let U=0;U<p.length;U+=1)p[U]&&p[U].m(f,null);insert_hydration(H,x,O),insert_hydration(H,b,O),append_hydration(b,E),append_hydration(E,S),append_hydration(S,k),append_hydration(b,T);for(let U=0;U<j.length;U+=1)j[U]&&j[U].m(b,null);C=!0,N||(V=[listen$1(n,"click",s[8]),listen$1(y,"click",s[14]),listen$1(E,"click",s[18])],N=!0)},p(H,O){O[0]&159&&(I=H[2].filter(H[9]),group_outros(),o=update_keyed_each(o,O,G,1,H,I,c,r,outro_and_destroy_block,create_each_block_2,null,get_each_context_2),check_outros()),O[0]&177&&(R=H[5],group_outros(),p=update_keyed_each(p,O,q,1,H,R,g,f,outro_and_destroy_block,create_each_block_1$1,null,get_each_context_1$1),check_outros()),O[0]&209&&(M=H[6],group_outros(),j=update_keyed_each(j,O,L,1,H,M,A,b,outro_and_destroy_block,create_each_block$7,null,get_each_context$7),check_outros())},i(H){if(!C){for(let O=0;O<I.length;O+=1)transition_in(o[O]);for(let O=0;O<R.length;O+=1)transition_in(p[O]);for(let O=0;O<M.length;O+=1)transition_in(j[O]);C=!0}},o(H){for(let O=0;O<o.length;O+=1)transition_out(o[O]);for(let O=0;O<p.length;O+=1)transition_out(p[O]);for(let O=0;O<j.length;O+=1)transition_out(j[O]);C=!1},d(H){H&&detach(r);for(let O=0;O<o.length;O+=1)o[O].d();H&&detach(i),H&&detach(f);for(let O=0;O<p.length;O+=1)p[O].d();H&&detach(x),H&&detach(b);for(let O=0;O<j.length;O+=1)j[O].d();N=!1,run_all(V)}}}function instance$m(s,r,n){let t,a,l,o,c;component_subscribe(s,instrumentParameters,N=>n(2,t=N)),component_subscribe(s,keys,N=>n(3,a=N)),component_subscribe(s,paramValues,N=>n(4,l=N)),component_subscribe(s,globalParameters,N=>n(5,o=N)),component_subscribe(s,fxParameters,N=>n(6,c=N));let{showSockets:i=!0}=r,f=["x","y","z"],y=[];onMount(()=>{const N=samples$1.subscribe(V=>{n(1,y=V.map((I,G)=>({name:I.split("/").pop()||"",value:G,active:!0})))});return()=>{N()}});const _=()=>randomise("inst"),u=({key:N})=>a.includes(N),m=(N,V,I,G,R)=>{const q=+R.target.value;set_store_value(instrumentParameters,I[G].rangeA=set_store_value(instrumentParameters,I[G].rangeB=q||0,t,keys.set(a)),t,keys.set(a)),loadSample(q)};function p(N,V,I,G){I[G].rangeA=N,instrumentParameters.set(t)}function g(N,V,I,G){I[G].rangeB=N,instrumentParameters.set(t)}const x=(N,V,I)=>set_store_value(instrumentParameters,V[I].isLocked=!N,t,keys.set(a)),b=()=>randomise("global");function E(N,V,I,G){I[G].rangeA=N,globalParameters.set(o)}function S(N,V,I,G){I[G].rangeB=N,globalParameters.set(o)}const k=(N,V,I)=>set_store_value(globalParameters,V[I].isLocked=!N,o),T=()=>randomise("fx");function j(N,V,I,G){I[G].rangeA=N,fxParameters.set(c)}function A(N,V,I,G){I[G].rangeB=N,fxParameters.set(c)}const C=(N,V,I)=>set_store_value(fxParameters,V[I].isLocked=!N,c);return s.$$set=N=>{"showSockets"in N&&n(0,i=N.showSockets)},[i,y,t,a,l,o,c,f,_,u,m,p,g,x,b,E,S,k,T,j,A,C]}class Parameters extends SvelteComponent{constructor(r){super(),init(this,r,instance$m,create_fragment$o,safe_not_equal,{showSockets:0},null,[-1,-1])}}const Knob_svelte_svelte_type_style_lang="";function create_fragment$n(s){let r,n,t,a,l,o,c,i,f,y,_,u,m,p;return{c(){r=element("div"),n=element("div"),t=space(),a=svg_element("svg"),l=svg_element("circle"),o=space(),c=element("div"),i=element("div"),f=element("div"),y=space(),_=element("div"),u=text(s[0]),this.h()},l(g){r=claim_element(g,"DIV",{class:!0});var x=children(r);n=claim_element(x,"DIV",{class:!0,style:!0}),children(n).forEach(detach),t=claim_space(x),a=claim_svg_element(x,"svg",{viewBox:!0,class:!0});var b=children(a);l=claim_svg_element(b,"circle",{r:!0,stroke:!0,"stroke-width":!0,fill:!0}),children(l).forEach(detach),b.forEach(detach),o=claim_space(x),c=claim_element(x,"DIV",{class:!0});var E=children(c);i=claim_element(E,"DIV",{class:!0,style:!0});var S=children(i);f=claim_element(S,"DIV",{class:!0}),children(f).forEach(detach),S.forEach(detach),E.forEach(detach),y=claim_space(x),_=claim_element(x,"DIV",{class:!0});var k=children(_);u=claim_text(k,s[0]),k.forEach(detach),x.forEach(detach),this.h()},h(){attr(n,"class","knob__gradient svelte-14c90ps"),set_style(n,"--rotation",s[1]),attr(l,"r","9"),attr(l,"stroke","none"),attr(l,"stroke-width","0.5"),attr(l,"fill","var(--color-grey-dark)"),attr(a,"viewBox","-10 -10 20 20"),attr(a,"class","svelte-14c90ps"),attr(f,"class","knob__indicator svelte-14c90ps"),attr(i,"class","knob__inner svelte-14c90ps"),set_style(i,"--rotation",s[1]),attr(c,"class","knob svelte-14c90ps"),attr(_,"class","knob__label svelte-14c90ps"),attr(r,"class","knob__container svelte-14c90ps")},m(g,x){insert_hydration(g,r,x),append_hydration(r,n),append_hydration(r,t),append_hydration(r,a),append_hydration(a,l),append_hydration(r,o),append_hydration(r,c),append_hydration(c,i),append_hydration(i,f),append_hydration(r,y),append_hydration(r,_),append_hydration(_,u),m||(p=listen$1(i,"pointerdown",s[2]),m=!0)},p(g,[x]){x&2&&set_style(n,"--rotation",g[1]),x&2&&set_style(i,"--rotation",g[1]),x&1&&set_data(u,g[0])},i:noop,o:noop,d(g){g&&detach(r),m=!1,p()}}}function instance$l(s,r,n){let t,a,{name:l}=r,{value:o}=r,{min:c=0}=r,{max:i=1}=r,{rotRange:f=2*Math.PI*.8}=r,{pixelRange:y=200}=r,{startRotation:_=-Math.PI*.8}=r,u,m;function p({clientY:b}){const E=t*(b-u)/y;n(3,o=clamp$1(m-E,c,i))}function g({clientY:b}){u=b,m=o,window.addEventListener("pointermove",p),window.addEventListener("pointerup",x)}function x(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",x)}return s.$$set=b=>{"name"in b&&n(0,l=b.name),"value"in b&&n(3,o=b.value),"min"in b&&n(4,c=b.min),"max"in b&&n(5,i=b.max),"rotRange"in b&&n(6,f=b.rotRange),"pixelRange"in b&&n(7,y=b.pixelRange),"startRotation"in b&&n(8,_=b.startRotation)},s.$$.update=()=>{s.$$.dirty&48&&n(9,t=i-c),s.$$.dirty&856&&n(1,a=_+(o-c)/t*f)},[l,a,g,o,c,i,f,y,_,t]}class Knob extends SvelteComponent{constructor(r){super(),init(this,r,instance$l,create_fragment$n,safe_not_equal,{name:0,value:3,min:4,max:5,rotRange:6,pixelRange:7,startRotation:8})}}var AudioKeys_state={_setState:function(s){var r=this;s||(s={}),r._state={},r._extendState({polyphony:4,rows:1,priority:"last",rootNote:60,octaveControls:!0,octave:0,velocityControls:!0,velocity:127,keys:[],buffer:[]}),r._extendState(s)},_extendState:function(s){var r=this;for(var n in s)r._state[n]=s[n]},set:function(){var s=this;return arguments.length===1?s._extendState(arguments[0]):s._state[arguments[0]]=arguments[1],this},get:function(s){var r=this;return r._state[s]}},AudioKeys_events={down:function(s){var r=this;r._listeners.down=(r._listeners.down||[]).concat(s)},up:function(s){var r=this;r._listeners.up=(r._listeners.up||[]).concat(s)},_trigger:function(s){var r=this;if(r._listeners[s]&&r._listeners[s].length){var n=Array.prototype.slice.call(arguments);n.splice(0,1),r._listeners[s].forEach(function(t){t.apply(r,n)})}},_bind:function(){var s=this;if(typeof window<"u"&&window.document){window.document.addEventListener("keydown",function(n){s._addKey(n)}),window.document.addEventListener("keyup",function(n){s._removeKey(n)});var r=!0;setInterval(function(){window.document.hasFocus()!==r&&(r=!r,r||s.clear())},100)}}},AudioKeys_mapping={_map:function(s){return this._keyMap[this._state.rows][s]+this._offset()},_offset:function(){return this._state.rootNote-this._keyMap[this._state.rows].root+this._state.octave*12},_isNote:function(s){return!!this._keyMap[this._state.rows][s]},_toFrequency:function(s){return Math.pow(2,(s-69)/12)*440},_keyMap:{1:{root:60,65:60,87:61,83:62,69:63,68:64,70:65,84:66,71:67,89:68,72:69,85:70,74:71,75:72,79:73,76:74,80:75,186:76,222:77},2:{root:60,90:60,83:61,88:62,68:63,67:64,86:65,71:66,66:67,72:68,78:69,74:70,77:71,188:72,76:73,190:74,186:75,191:76,81:72,50:73,87:74,51:75,69:76,82:77,53:78,84:79,54:80,89:81,55:82,85:83,73:84,57:85,79:86,48:87,80:88,219:89,187:90,221:91}}},AudioKeys_buffer={_addKey:function(s){var r=this;if(r._isNote(s.keyCode)&&!r._isPressed(s.keyCode)){var n=r._makeNote(s.keyCode);r._state.keys=(r._state.keys||[]).concat(n),r._update()}else r._isSpecialKey(s.keyCode)&&r._specialKey(s.keyCode)},_removeKey:function(s){var r=this;if(r._isPressed(s.keyCode)){for(var n,t=0;t<r._state.keys.length;t++)if(r._state.keys[t].keyCode===s.keyCode){n=r._state.keys[t];break}r._state.keys.splice(r._state.keys.indexOf(n),1),r._update()}},_isPressed:function(s){var r=this;if(!r._state.keys||!r._state.keys.length)return!1;for(var n=0;n<r._state.keys.length;n++)if(r._state.keys[n].keyCode===s)return!0;return!1},_makeNote:function(s){var r=this;return{keyCode:s,note:r._map(s),frequency:r._toFrequency(r._map(s)),velocity:r._state.velocity}},clear:function(){var s=this;s._state.buffer.forEach(function(r){r.velocity=0,s._trigger("up",r)}),s._state.keys=[],s._state.buffer=[]},_update:function(){var s=this,r=s._state.buffer;s._prioritize(),s._diff(r)},_diff:function(s){var r=this,n=s.map(function(o){return o.keyCode}),t=r._state.buffer.map(function(o){return o.keyCode}),a=[];n.forEach(function(o){t.indexOf(o)===-1&&a.push(o)});var l=[];t.forEach(function(o){n.indexOf(o)===-1&&l.push(o)}),l.forEach(function(o){for(var c=0;c<r._state.buffer.length;c++)if(r._state.buffer[c].keyCode===o){r._trigger("down",r._state.buffer[c]);break}}),a.forEach(function(o){for(var c=0;c<s.length;c++)if(s[c].keyCode===o){s[c].velocity=0,r._trigger("up",s[c]);break}})}},AudioKeys_priority={_prioritize:function(){var s=this;if(!s._state.keys.length){s._state.buffer=[];return}s._state.polyphony>=s._state.keys.length?s._state.keys=s._state.keys.map(function(r){return r.isActive=!0,r}):(s._state.keys=s._state.keys.map(function(r){return r.isActive=!1,r}),s["_"+s._state.priority]()),s._state.buffer=[],s._state.keys.forEach(function(r){r.isActive&&s._state.buffer.push(r)})},_last:function(){for(var s=this,r=s._state.keys.length-s._state.polyphony;r<s._state.keys.length;r++)s._state.keys[r].isActive=!0},_first:function(){for(var s=this,r=0;r<s._state.polyphony;r++)s._state.keys[r].isActive=!0},_highest:function(){var s=this,r=s._state.keys.map(function(n){return n.note});r.sort(function(n,t){return t===n?0:t<n?-1:1}),r.splice(s._state.polyphony,Number.MAX_VALUE),s._state.keys.forEach(function(n){r.indexOf(n.note)!==-1&&(n.isActive=!0)})},_lowest:function(){var s=this,r=s._state.keys.map(function(n){return n.note});r.sort(function(n,t){return n===t?0:n<t?-1:1}),r.splice(s._state.polyphony,Number.MAX_VALUE),s._state.keys.forEach(function(n){r.indexOf(n.note)!==-1&&(n.isActive=!0)})}},AudioKeys_special={_isSpecialKey:function(s){return this._state.rows===1&&this._specialKeyMap[s]},_specialKey:function(s){var r=this;r._specialKeyMap[s].type==="octave"&&r._state.octaveControls?r._state.octave+=r._specialKeyMap[s].value:r._specialKeyMap[s].type==="velocity"&&r._state.velocityControls&&(r._state.velocity=r._specialKeyMap[s].value)},_specialKeyMap:{90:{type:"octave",value:-1},88:{type:"octave",value:1},49:{type:"velocity",value:1},50:{type:"velocity",value:14},51:{type:"velocity",value:28},52:{type:"velocity",value:42},53:{type:"velocity",value:56},54:{type:"velocity",value:70},55:{type:"velocity",value:84},56:{type:"velocity",value:98},57:{type:"velocity",value:112},48:{type:"velocity",value:127}}},state=AudioKeys_state,events=AudioKeys_events,mapping=AudioKeys_mapping,buffer=AudioKeys_buffer,priority=AudioKeys_priority,special=AudioKeys_special;function AudioKeys(s){var r=this;r._setState(s),r._listeners={},r._bind()}AudioKeys.prototype._setState=state._setState;AudioKeys.prototype._extendState=state._extendState;AudioKeys.prototype.set=state.set;AudioKeys.prototype.get=state.get;AudioKeys.prototype.down=events.down;AudioKeys.prototype.up=events.up;AudioKeys.prototype._trigger=events._trigger;AudioKeys.prototype._bind=events._bind;AudioKeys.prototype._map=mapping._map;AudioKeys.prototype._offset=mapping._offset;AudioKeys.prototype._isNote=mapping._isNote;AudioKeys.prototype._toFrequency=mapping._toFrequency;AudioKeys.prototype._keyMap=mapping._keyMap;AudioKeys.prototype._addKey=buffer._addKey;AudioKeys.prototype._removeKey=buffer._removeKey;AudioKeys.prototype._isPressed=buffer._isPressed;AudioKeys.prototype._makeNote=buffer._makeNote;AudioKeys.prototype.clear=buffer.clear;AudioKeys.prototype._update=buffer._update;AudioKeys.prototype._diff=buffer._diff;AudioKeys.prototype._prioritize=priority._prioritize;AudioKeys.prototype._last=priority._last;AudioKeys.prototype._first=priority._first;AudioKeys.prototype._highest=priority._highest;AudioKeys.prototype._lowest=priority._lowest;AudioKeys.prototype._isSpecialKey=special._isSpecialKey;AudioKeys.prototype._specialKey=special._specialKey;AudioKeys.prototype._specialKeyMap=special._specialKeyMap;var AudioKeys_1=AudioKeys;const AudioKeys$1=getDefaultExportFromCjs(AudioKeys_1),map={60:"Z",61:"S",62:"X",63:"D",64:"C",65:"V",66:"G",67:"B",68:"H",69:"N",70:"J",71:"M",72:"Q",73:"2",74:"W",75:"3",76:"E",77:"R",78:"5",79:"T",80:"6",81:"Y",82:"7",83:"U"},noteToKey=s=>map[s],Key_svelte_svelte_type_style_lang="";function create_fragment$m(s){let r,n,t,a=noteToKey(s[1])+"",l,o,c,i,f;return{c(){r=element("div"),n=element("div"),t=element("span"),l=text(a),this.h()},l(y){r=claim_element(y,"DIV",{class:!0});var _=children(r);n=claim_element(_,"DIV",{class:!0});var u=children(n);t=claim_element(u,"SPAN",{class:!0});var m=children(t);l=claim_text(m,a),m.forEach(detach),u.forEach(detach),_.forEach(detach),this.h()},h(){attr(t,"class","label svelte-s3txvo"),attr(n,"class",o="inner piano-"+s[2]+" note-"+s[1]+" "+(s[0]?"active":"")+" svelte-s3txvo"),attr(r,"class",c="key key--"+s[2]+" svelte-s3txvo")},m(y,_){insert_hydration(y,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(t,l),i||(f=[listen$1(n,"mousedown",s[4]),listen$1(n,"mouseup",s[5]),listen$1(n,"mouseleave",s[6]),listen$1(n,"mouseenter",s[7]),listen$1(n,"touchstart",s[8],{passive:!0}),listen$1(n,"touchend",s[9],{passive:!0})],i=!0)},p(y,[_]){_&2&&a!==(a=noteToKey(y[1])+"")&&set_data(l,a),_&7&&o!==(o="inner piano-"+y[2]+" note-"+y[1]+" "+(y[0]?"active":"")+" svelte-s3txvo")&&attr(n,"class",o),_&4&&c!==(c="key key--"+y[2]+" svelte-s3txvo")&&attr(r,"class",c)},i:noop,o:noop,d(y){y&&detach(r),i=!1,run_all(f)}}}function instance$k(s,r,n){const t=createEventDispatcher();let{isActive:a=!1}=r,{note:l}=r,{colour:o}=r;const c=()=>t("down",l),i=()=>t("up",l),f=()=>t("leave",l),y=()=>t("enter",l),_=()=>t("touchstart",l),u=()=>t("touchend",l);return s.$$set=m=>{"isActive"in m&&n(0,a=m.isActive),"note"in m&&n(1,l=m.note),"colour"in m&&n(2,o=m.colour)},[a,l,o,t,c,i,f,y,_,u]}class Key extends SvelteComponent{constructor(r){super(),init(this,r,instance$k,create_fragment$m,safe_not_equal,{isActive:0,note:1,colour:2})}}const Keyboard_svelte_svelte_type_style_lang="",{window:window_1$2}=globals;function get_each_context$6(s,r,n){const t=s.slice();return t[20]=r[n],t[22]=n,t}function create_each_block$6(s){let r,n;return r=new Key({props:{note:s[20],colour:[1,3,6,8,10].includes(s[22]%12)?"black":"white",isActive:s[2].includes(s[20])}}),r.$on("down",s[3]),r.$on("up",s[4]),r.$on("leave",s[5]),r.$on("enter",s[6]),r.$on("touchstart",s[7]),r.$on("touchend",s[8]),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&2&&(l.note=t[20]),a&6&&(l.isActive=t[2].includes(t[20])),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_fragment$l(s){let r,n,t,a,l,o=s[1],c=[];for(let f=0;f<o.length;f+=1)c[f]=create_each_block$6(get_each_context$6(s,o,f));const i=f=>transition_out(c[f],1,1,()=>{c[f]=null});return{c(){r=element("div"),n=element("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){r=claim_element(f,"DIV",{class:!0});var y=children(r);n=claim_element(y,"DIV",{class:!0});var _=children(n);for(let u=0;u<c.length;u+=1)c[u].l(_);_.forEach(detach),y.forEach(detach),this.h()},h(){attr(n,"class","piano-keys svelte-7fpxzh"),attr(r,"class","piano svelte-7fpxzh")},m(f,y){insert_hydration(f,r,y),append_hydration(r,n);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(n,null);t=!0,a||(l=listen$1(window_1$2,"resize",s[9]),a=!0)},p(f,[y]){if(y&510){o=f[1];let _;for(_=0;_<o.length;_+=1){const u=get_each_context$6(f,o,_);c[_]?(c[_].p(u,y),transition_in(c[_],1)):(c[_]=create_each_block$6(u),c[_].c(),transition_in(c[_],1),c[_].m(n,null))}for(group_outros(),_=o.length;_<c.length;_+=1)i(_);check_outros()}},i(f){if(!t){for(let y=0;y<o.length;y+=1)transition_in(c[y]);t=!0}},o(f){c=c.filter(Boolean);for(let y=0;y<c.length;y+=1)transition_out(c[y]);t=!1},d(f){f&&detach(r),destroy_each(c,f),a=!1,l()}}}function instance$j(s,r,n){const t=new AudioKeys$1({polyphony:6,rows:2,priority:"last"});let a=!1,l=[60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83],o=l,c=[],i=!1,f=!1;drone.subscribe(A=>!A&&n(2,c=[]));function y(A,C=.5){n(2,c=get_store_value(drone)?[A]:[...c,A]),handleEvent({...get_store_value(synthValues),n:A,amp:C})}function _(A){c.includes(A)&&(!get_store_value(drone)&&n(2,c=c.filter(C=>C!==A)),handleNoteOff(get_store_value(synthValues).inst,A))}t.down(({note:A})=>{y(A)}),t.up(({note:A})=>{_(A)});function u(A){f||(a=!0,y(A.detail))}function m(A){f||(a=!1,_(A.detail))}function p(A){f||_(A.detail)}function g(A){f||!a||y(A.detail)}function x(A){f=!0,y(A.detail)}function b(A){_(A.detail)}function E(A){y(A.note.number,A.velocity)}function S(A){_(A.note.number)}function k(A){const C=wm.getInputByName(A);C!=null&&C.hasListener("noteon",E)&&(C!=null&&C.hasListener("noteoff",S))||(C==null||C.addListener("noteon",E),C==null||C.addListener("noteoff",S))}function T(A){const C=wm.getInputByName(A);C==null||C.removeListener("noteon",E),C==null||C.removeListener("noteoff",S)}onMount(()=>{n(0,i=window.innerWidth<650);const A=inputs.subscribe(C=>{C.forEach(({name:N,active:V})=>V?k(N):T(N))});return()=>A()});const j=()=>n(0,i=window.innerWidth<650);return s.$$.update=()=>{s.$$.dirty&1&&n(1,o=i?l.slice(0,12):l)},[i,o,c,u,m,p,g,x,b,j]}class Keyboard extends SvelteComponent{constructor(r){super(),init(this,r,instance$j,create_fragment$l,safe_not_equal,{})}}const Controls_svelte_svelte_type_style_lang$1="";function get_each_context$5(s,r,n){const t=s.slice();return t[9]=r[n].name,t[10]=r[n].a,t[11]=r[n].d,t[12]=r[n].s,t[13]=r[n].r,t[14]=r,t[15]=n,t}function create_each_block$5(s,r){let n,t,a=r[9]+"",l,o,c,i,f,y,_,u,m,p,g,x,b,E,S,k,T,j,A,C,N,V,I,G;function R(Z){r[5](Z,r[10],r[14],r[15])}let q={pixelRange:200,min:.01,name:"a"};r[10]!==void 0&&(q.value=r[10]),f=new Knob({props:q}),binding_callbacks.push(()=>bind(f,"value",R));function M(Z){r[6](Z,r[11],r[14],r[15])}let L={pixelRange:200,min:.01,name:"d"};r[11]!==void 0&&(L.value=r[11]),p=new Knob({props:L}),binding_callbacks.push(()=>bind(p,"value",M));function H(Z){r[7](Z,r[12],r[14],r[15])}let O={pixelRange:200,min:.01,name:"s"};r[12]!==void 0&&(O.value=r[12]),S=new Knob({props:O}),binding_callbacks.push(()=>bind(S,"value",H));function U(Z){r[8](Z,r[13],r[14],r[15])}let J={pixelRange:200,min:.01,name:"r"};return r[13]!==void 0&&(J.value=r[13]),C=new Knob({props:J}),binding_callbacks.push(()=>bind(C,"value",U)),{key:s,first:null,c(){n=element("div"),t=element("h3"),l=text(a),c=space(),i=element("div"),create_component(f.$$.fragment),u=space(),m=element("div"),create_component(p.$$.fragment),b=space(),E=element("div"),create_component(S.$$.fragment),j=space(),A=element("div"),create_component(C.$$.fragment),V=space(),this.h()},l(Z){n=claim_element(Z,"DIV",{class:!0});var z=children(n);t=claim_element(z,"H3",{class:!0});var B=children(t);l=claim_text(B,a),B.forEach(detach),z.forEach(detach),c=claim_space(Z),i=claim_element(Z,"DIV",{class:!0});var D=children(i);claim_component(f.$$.fragment,D),D.forEach(detach),u=claim_space(Z),m=claim_element(Z,"DIV",{class:!0});var X=children(m);claim_component(p.$$.fragment,X),X.forEach(detach),b=claim_space(Z),E=claim_element(Z,"DIV",{class:!0});var K=children(E);claim_component(S.$$.fragment,K),K.forEach(detach),j=claim_space(Z),A=claim_element(Z,"DIV",{class:!0});var re=children(A);claim_component(C.$$.fragment,re),V=claim_space(re),re.forEach(detach),this.h()},h(){attr(t,"class","svelte-19swvpw"),attr(n,"class",o="knobs__title knobs__title--envelope__"+r[15]+" svelte-19swvpw"),attr(i,"class",_=`knobs__knob knobs__knob--${r[9]}_a svelte-19swvpw`),attr(m,"class",x=`knobs__knob knobs__knob--${r[9]}_d svelte-19swvpw`),attr(E,"class",T=`knobs__knob knobs__knob--${r[9]}_s svelte-19swvpw`),attr(A,"class",I=`knobs__knob knobs__knob--${r[9]}_r svelte-19swvpw`),this.first=n},m(Z,z){insert_hydration(Z,n,z),append_hydration(n,t),append_hydration(t,l),insert_hydration(Z,c,z),insert_hydration(Z,i,z),mount_component(f,i,null),insert_hydration(Z,u,z),insert_hydration(Z,m,z),mount_component(p,m,null),insert_hydration(Z,b,z),insert_hydration(Z,E,z),mount_component(S,E,null),insert_hydration(Z,j,z),insert_hydration(Z,A,z),mount_component(C,A,null),append_hydration(A,V),G=!0},p(Z,z){r=Z,(!G||z&4)&&a!==(a=r[9]+"")&&set_data(l,a),(!G||z&4&&o!==(o="knobs__title knobs__title--envelope__"+r[15]+" svelte-19swvpw"))&&attr(n,"class",o);const B={};!y&&z&4&&(y=!0,B.value=r[10],add_flush_callback(()=>y=!1)),f.$set(B),(!G||z&4&&_!==(_=`knobs__knob knobs__knob--${r[9]}_a svelte-19swvpw`))&&attr(i,"class",_);const D={};!g&&z&4&&(g=!0,D.value=r[11],add_flush_callback(()=>g=!1)),p.$set(D),(!G||z&4&&x!==(x=`knobs__knob knobs__knob--${r[9]}_d svelte-19swvpw`))&&attr(m,"class",x);const X={};!k&&z&4&&(k=!0,X.value=r[12],add_flush_callback(()=>k=!1)),S.$set(X),(!G||z&4&&T!==(T=`knobs__knob knobs__knob--${r[9]}_s svelte-19swvpw`))&&attr(E,"class",T);const K={};!N&&z&4&&(N=!0,K.value=r[13],add_flush_callback(()=>N=!1)),C.$set(K),(!G||z&4&&I!==(I=`knobs__knob knobs__knob--${r[9]}_r svelte-19swvpw`))&&attr(A,"class",I)},i(Z){G||(transition_in(f.$$.fragment,Z),transition_in(p.$$.fragment,Z),transition_in(S.$$.fragment,Z),transition_in(C.$$.fragment,Z),G=!0)},o(Z){transition_out(f.$$.fragment,Z),transition_out(p.$$.fragment,Z),transition_out(S.$$.fragment,Z),transition_out(C.$$.fragment,Z),G=!1},d(Z){Z&&detach(n),Z&&detach(c),Z&&detach(i),destroy_component(f),Z&&detach(u),Z&&detach(m),destroy_component(p),Z&&detach(b),Z&&detach(E),destroy_component(S),Z&&detach(j),Z&&detach(A),destroy_component(C)}}}function create_fragment$k(s){let r,n,t,a,l,o,c,i,f,y,_,u,m,p,g,x,b,E,S,k,T=[],j=new Map,A;o=new Button({props:{orientation:"vertical",text:"Drone",colour:"grey",active:s[0],onClick:s[3],icon:faSignal}}),y=new Keyboard({});function C(G){s[4](G)}let N={name:"Vol",pixelRange:200};s[1]!==void 0&&(N.value=s[1]),E=new Knob({props:N}),binding_callbacks.push(()=>bind(E,"value",C));let V=s[2];const I=G=>G[9];for(let G=0;G<V.length;G+=1){let R=get_each_context$5(s,V,G),q=I(R);j.set(q,T[G]=create_each_block$5(q,R))}return{c(){r=element("div"),n=element("h2"),t=text("Controls"),a=space(),l=element("div"),create_component(o.$$.fragment),c=space(),i=element("div"),f=element("div"),create_component(y.$$.fragment),_=space(),u=element("div"),m=element("div"),p=element("h3"),g=text("Vol"),x=space(),b=element("div"),create_component(E.$$.fragment),k=space();for(let G=0;G<T.length;G+=1)T[G].c();this.h()},l(G){r=claim_element(G,"DIV",{class:!0});var R=children(r);n=claim_element(R,"H2",{class:!0});var q=children(n);t=claim_text(q,"Controls"),q.forEach(detach),a=claim_space(R),l=claim_element(R,"DIV",{class:!0});var M=children(l);claim_component(o.$$.fragment,M),M.forEach(detach),c=claim_space(R),i=claim_element(R,"DIV",{class:!0});var L=children(i);f=claim_element(L,"DIV",{class:!0});var H=children(f);claim_component(y.$$.fragment,H),H.forEach(detach),_=claim_space(L),u=claim_element(L,"DIV",{class:!0});var O=children(u);m=claim_element(O,"DIV",{class:!0});var U=children(m);p=claim_element(U,"H3",{class:!0});var J=children(p);g=claim_text(J,"Vol"),J.forEach(detach),U.forEach(detach),x=claim_space(O),b=claim_element(O,"DIV",{class:!0});var Z=children(b);claim_component(E.$$.fragment,Z),Z.forEach(detach),k=claim_space(O);for(let z=0;z<T.length;z+=1)T[z].l(O);O.forEach(detach),L.forEach(detach),R.forEach(detach),this.h()},h(){attr(n,"class","visually-hidden"),attr(l,"class","buttons svelte-19swvpw"),attr(f,"class","keys svelte-19swvpw"),attr(p,"class","svelte-19swvpw"),attr(m,"class","knobs__title knobs__title--volume svelte-19swvpw"),attr(b,"class","knobs__knob knobs__knob--vol svelte-19swvpw"),attr(u,"class","knobs svelte-19swvpw"),attr(i,"class","controller svelte-19swvpw"),attr(r,"class","controls svelte-19swvpw")},m(G,R){insert_hydration(G,r,R),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),mount_component(o,l,null),append_hydration(r,c),append_hydration(r,i),append_hydration(i,f),mount_component(y,f,null),append_hydration(i,_),append_hydration(i,u),append_hydration(u,m),append_hydration(m,p),append_hydration(p,g),append_hydration(u,x),append_hydration(u,b),mount_component(E,b,null),append_hydration(u,k);for(let q=0;q<T.length;q+=1)T[q]&&T[q].m(u,null);A=!0},p(G,[R]){const q={};R&1&&(q.active=G[0]),o.$set(q);const M={};!S&&R&2&&(S=!0,M.value=G[1],add_flush_callback(()=>S=!1)),E.$set(M),R&4&&(V=G[2],group_outros(),T=update_keyed_each(T,R,I,1,G,V,j,u,outro_and_destroy_block,create_each_block$5,null,get_each_context$5),check_outros())},i(G){if(!A){transition_in(o.$$.fragment,G),transition_in(y.$$.fragment,G),transition_in(E.$$.fragment,G);for(let R=0;R<V.length;R+=1)transition_in(T[R]);A=!0}},o(G){transition_out(o.$$.fragment,G),transition_out(y.$$.fragment,G),transition_out(E.$$.fragment,G);for(let R=0;R<T.length;R+=1)transition_out(T[R]);A=!1},d(G){G&&detach(r),destroy_component(o),destroy_component(y),destroy_component(E);for(let R=0;R<T.length;R+=1)T[R].d()}}}function instance$i(s,r,n){let t,a,l;component_subscribe(s,drone,u=>n(0,t=u)),component_subscribe(s,volume,u=>n(1,a=u)),component_subscribe(s,envelopes,u=>n(2,l=u)),library$1.add(faSignal,faCircle);const o=()=>drone.update(u=>!u);function c(u){a=u,volume.set(a)}function i(u,m,p,g){p[g].a=u,envelopes.set(l)}function f(u,m,p,g){p[g].d=u,envelopes.set(l)}function y(u,m,p,g){p[g].s=u,envelopes.set(l)}function _(u,m,p,g){p[g].r=u,envelopes.set(l)}return[t,a,l,o,c,i,f,y,_]}let Controls$1=class extends SvelteComponent{constructor(r){super(),init(this,r,instance$i,create_fragment$k,safe_not_equal,{})}};var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(s,r){module.exports=r()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(r){_useWebWorker=!!r},getWebWorker=function(){return _useWebWorker},setLocationHref=function(r){locationHref=r},getLocationHref=function(){return locationHref};function createTag(s){return document.createElement(s)}function extendPrototype(s,r){var n,t=s.length,a;for(n=0;n<t;n+=1){a=s[n].prototype;for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r.prototype[l]=a[l])}}function getDescriptor(s,r){return Object.getOwnPropertyDescriptor(s,r)}function createProxyFunction(s){function r(){}return r.prototype=s,r}var audioControllerFactory=function(){function s(r){this.audios=[],this.audioFactory=r,this._volume=1,this._isMuted=!1}return s.prototype={addAudio:function(n){this.audios.push(n)},pause:function(){var n,t=this.audios.length;for(n=0;n<t;n+=1)this.audios[n].pause()},resume:function(){var n,t=this.audios.length;for(n=0;n<t;n+=1)this.audios[n].resume()},setRate:function(n){var t,a=this.audios.length;for(t=0;t<a;t+=1)this.audios[t].setRate(n)},createAudio:function(n){return this.audioFactory?this.audioFactory(n):window.Howl?new window.Howl({src:[n]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(n){this.audioFactory=n},setVolume:function(n){this._volume=n,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var n,t=this.audios.length;for(n=0;n<t;n+=1)this.audios[n].volume(this._volume*(this._isMuted?0:1))}},function(){return new s}}(),createTypedArray=function(){function s(n,t){var a=0,l=[],o;switch(n){case"int16":case"uint8c":o=1;break;default:o=1.1;break}for(a=0;a<t;a+=1)l.push(o);return l}function r(n,t){return n==="float32"?new Float32Array(t):n==="int16"?new Int16Array(t):n==="uint8c"?new Uint8ClampedArray(t):s(n,t)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?r:s}();function createSizedArray(s){return Array.apply(null,{length:s})}function _typeof$6(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(n){return typeof n}:_typeof$6=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$6(s)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var s=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],r,n=s.length;for(r=0;r<n;r+=1)BMMath[s[r]]=Math[s[r]]})(),BMMath.random=Math.random,BMMath.abs=function(s){var r=_typeof$6(s);if(r==="object"&&s.length){var n=createSizedArray(s.length),t,a=s.length;for(t=0;t<a;t+=1)n[t]=Math.abs(s[t]);return n}return Math.abs(s)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(s){s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.display="block",s.style.transformOrigin="0 0",s.style.webkitTransformOrigin="0 0",s.style.backfaceVisibility="visible",s.style.webkitBackfaceVisibility="visible",s.style.transformStyle="preserve-3d",s.style.webkitTransformStyle="preserve-3d",s.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(s,r,n,t){this.type=s,this.currentTime=r,this.totalTime=n,this.direction=t<0?-1:1}function BMCompleteEvent(s,r){this.type=s,this.direction=r<0?-1:1}function BMCompleteLoopEvent(s,r,n,t){this.type=s,this.currentLoop=n,this.totalLoops=r,this.direction=t<0?-1:1}function BMSegmentStartEvent(s,r,n){this.type=s,this.firstFrame=r,this.totalFrames=n}function BMDestroyEvent(s,r){this.type=s,this.target=r}function BMRenderFrameErrorEvent(s,r){this.type="renderFrameError",this.nativeError=s,this.currentTime=r}function BMConfigErrorEvent(s){this.type="configError",this.nativeError=s}var createElementID=function(){var s=0;return function(){return s+=1,idPrefix$1+"__lottie_element_"+s}}();function HSVtoRGB(s,r,n){var t,a,l,o,c,i,f,y;switch(o=Math.floor(s*6),c=s*6-o,i=n*(1-r),f=n*(1-c*r),y=n*(1-(1-c)*r),o%6){case 0:t=n,a=y,l=i;break;case 1:t=f,a=n,l=i;break;case 2:t=i,a=n,l=y;break;case 3:t=i,a=f,l=n;break;case 4:t=y,a=i,l=n;break;case 5:t=n,a=i,l=f;break}return[t,a,l]}function RGBtoHSV(s,r,n){var t=Math.max(s,r,n),a=Math.min(s,r,n),l=t-a,o,c=t===0?0:l/t,i=t/255;switch(t){case a:o=0;break;case s:o=r-n+l*(r<n?6:0),o/=6*l;break;case r:o=n-s+l*2,o/=6*l;break;case n:o=s-r+l*4,o/=6*l;break}return[o,c,i]}function addSaturationToRGB(s,r){var n=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return n[1]+=r,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(s,r){var n=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return n[2]+=r,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(s,r){var n=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return n[0]+=r/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var s=[],r,n;for(r=0;r<256;r+=1)n=r.toString(16),s[r]=n.length===1?"0"+n:n;return function(t,a,l){return t<0&&(t=0),a<0&&(a=0),l<0&&(l=0),"#"+s[t]+s[a]+s[l]}}(),setSubframeEnabled=function(r){subframeEnabled=!!r},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(r){expressionsPlugin=r},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(r){expressionsInterfaces=r},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(r){defaultCurveSegments=r},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(r){idPrefix$1=r};function createNS(s){return document.createElementNS(svgNS,s)}function _typeof$5(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(n){return typeof n}:_typeof$5=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(s)}var dataManager=function(){var s=1,r=[],n,t,a={onmessage:function(){},postMessage:function(m){n({data:m})}},l={postMessage:function(m){a.onmessage({data:m})}};function o(u){if(window.Worker&&window.Blob&&getWebWorker()){var m=new Blob(["var _workerSelf = self; self.onmessage = ",u.toString()],{type:"text/javascript"}),p=URL.createObjectURL(m);return new Worker(p)}return n=u,a}function c(){t||(t=o(function(m){function p(){function x(M,L){var H,O,U=M.length,J,Z,z,B;for(O=0;O<U;O+=1)if(H=M[O],"ks"in H&&!H.completed){if(H.completed=!0,H.hasMask){var D=H.masksProperties;for(Z=D.length,J=0;J<Z;J+=1)if(D[J].pt.k.i)T(D[J].pt.k);else for(B=D[J].pt.k.length,z=0;z<B;z+=1)D[J].pt.k[z].s&&T(D[J].pt.k[z].s[0]),D[J].pt.k[z].e&&T(D[J].pt.k[z].e[0])}H.ty===0?(H.layers=S(H.refId,L),x(H.layers,L)):H.ty===4?k(H.shapes):H.ty===5&&R(H)}}function b(M,L){if(M){var H=0,O=M.length;for(H=0;H<O;H+=1)M[H].t===1&&(M[H].data.layers=S(M[H].data.refId,L),x(M[H].data.layers,L))}}function E(M,L){for(var H=0,O=L.length;H<O;){if(L[H].id===M)return L[H];H+=1}return null}function S(M,L){var H=E(M,L);return H?H.layers.__used?JSON.parse(JSON.stringify(H.layers)):(H.layers.__used=!0,H.layers):null}function k(M){var L,H=M.length,O,U;for(L=H-1;L>=0;L-=1)if(M[L].ty==="sh")if(M[L].ks.k.i)T(M[L].ks.k);else for(U=M[L].ks.k.length,O=0;O<U;O+=1)M[L].ks.k[O].s&&T(M[L].ks.k[O].s[0]),M[L].ks.k[O].e&&T(M[L].ks.k[O].e[0]);else M[L].ty==="gr"&&k(M[L].it)}function T(M){var L,H=M.i.length;for(L=0;L<H;L+=1)M.i[L][0]+=M.v[L][0],M.i[L][1]+=M.v[L][1],M.o[L][0]+=M.v[L][0],M.o[L][1]+=M.v[L][1]}function j(M,L){var H=L?L.split("."):[100,100,100];return M[0]>H[0]?!0:H[0]>M[0]?!1:M[1]>H[1]?!0:H[1]>M[1]?!1:M[2]>H[2]?!0:H[2]>M[2]?!1:null}var A=function(){var M=[4,4,14];function L(O){var U=O.t.d;O.t.d={k:[{s:U,t:0}]}}function H(O){var U,J=O.length;for(U=0;U<J;U+=1)O[U].ty===5&&L(O[U])}return function(O){if(j(M,O.v)&&(H(O.layers),O.assets)){var U,J=O.assets.length;for(U=0;U<J;U+=1)O.assets[U].layers&&H(O.assets[U].layers)}}}(),C=function(){var M=[4,7,99];return function(L){if(L.chars&&!j(M,L.v)){var H,O=L.chars.length;for(H=0;H<O;H+=1){var U=L.chars[H];U.data&&U.data.shapes&&(k(U.data.shapes),U.data.ip=0,U.data.op=99999,U.data.st=0,U.data.sr=1,U.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},L.chars[H].t||(U.data.shapes.push({ty:"no"}),U.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),N=function(){var M=[5,7,15];function L(O){var U=O.t.p;typeof U.a=="number"&&(U.a={a:0,k:U.a}),typeof U.p=="number"&&(U.p={a:0,k:U.p}),typeof U.r=="number"&&(U.r={a:0,k:U.r})}function H(O){var U,J=O.length;for(U=0;U<J;U+=1)O[U].ty===5&&L(O[U])}return function(O){if(j(M,O.v)&&(H(O.layers),O.assets)){var U,J=O.assets.length;for(U=0;U<J;U+=1)O.assets[U].layers&&H(O.assets[U].layers)}}}(),V=function(){var M=[4,1,9];function L(O){var U,J=O.length,Z,z;for(U=0;U<J;U+=1)if(O[U].ty==="gr")L(O[U].it);else if(O[U].ty==="fl"||O[U].ty==="st")if(O[U].c.k&&O[U].c.k[0].i)for(z=O[U].c.k.length,Z=0;Z<z;Z+=1)O[U].c.k[Z].s&&(O[U].c.k[Z].s[0]/=255,O[U].c.k[Z].s[1]/=255,O[U].c.k[Z].s[2]/=255,O[U].c.k[Z].s[3]/=255),O[U].c.k[Z].e&&(O[U].c.k[Z].e[0]/=255,O[U].c.k[Z].e[1]/=255,O[U].c.k[Z].e[2]/=255,O[U].c.k[Z].e[3]/=255);else O[U].c.k[0]/=255,O[U].c.k[1]/=255,O[U].c.k[2]/=255,O[U].c.k[3]/=255}function H(O){var U,J=O.length;for(U=0;U<J;U+=1)O[U].ty===4&&L(O[U].shapes)}return function(O){if(j(M,O.v)&&(H(O.layers),O.assets)){var U,J=O.assets.length;for(U=0;U<J;U+=1)O.assets[U].layers&&H(O.assets[U].layers)}}}(),I=function(){var M=[4,4,18];function L(O){var U,J=O.length,Z,z;for(U=J-1;U>=0;U-=1)if(O[U].ty==="sh")if(O[U].ks.k.i)O[U].ks.k.c=O[U].closed;else for(z=O[U].ks.k.length,Z=0;Z<z;Z+=1)O[U].ks.k[Z].s&&(O[U].ks.k[Z].s[0].c=O[U].closed),O[U].ks.k[Z].e&&(O[U].ks.k[Z].e[0].c=O[U].closed);else O[U].ty==="gr"&&L(O[U].it)}function H(O){var U,J,Z=O.length,z,B,D,X;for(J=0;J<Z;J+=1){if(U=O[J],U.hasMask){var K=U.masksProperties;for(B=K.length,z=0;z<B;z+=1)if(K[z].pt.k.i)K[z].pt.k.c=K[z].cl;else for(X=K[z].pt.k.length,D=0;D<X;D+=1)K[z].pt.k[D].s&&(K[z].pt.k[D].s[0].c=K[z].cl),K[z].pt.k[D].e&&(K[z].pt.k[D].e[0].c=K[z].cl)}U.ty===4&&L(U.shapes)}}return function(O){if(j(M,O.v)&&(H(O.layers),O.assets)){var U,J=O.assets.length;for(U=0;U<J;U+=1)O.assets[U].layers&&H(O.assets[U].layers)}}}();function G(M){M.__complete||(V(M),A(M),C(M),N(M),I(M),x(M.layers,M.assets),b(M.chars,M.assets),M.__complete=!0)}function R(M){M.t.a.length===0&&"m"in M.t.p}var q={};return q.completeData=G,q.checkColors=V,q.checkChars=C,q.checkPathProperties=N,q.checkShapes=I,q.completeLayers=x,q}if(l.dataManager||(l.dataManager=p()),l.assetLoader||(l.assetLoader=function(){function x(E){var S=E.getResponseHeader("content-type");return S&&E.responseType==="json"&&S.indexOf("json")!==-1||E.response&&_typeof$5(E.response)==="object"?E.response:E.response&&typeof E.response=="string"?JSON.parse(E.response):E.responseText?JSON.parse(E.responseText):null}function b(E,S,k,T){var j,A=new XMLHttpRequest;try{A.responseType="json"}catch{}A.onreadystatechange=function(){if(A.readyState===4)if(A.status===200)j=x(A),k(j);else try{j=x(A),k(j)}catch(C){T&&T(C)}};try{A.open(["G","E","T"].join(""),E,!0)}catch{A.open(["G","E","T"].join(""),S+"/"+E,!0)}A.send()}return{load:b}}()),m.data.type==="loadAnimation")l.assetLoader.load(m.data.path,m.data.fullPath,function(x){l.dataManager.completeData(x),l.postMessage({id:m.data.id,payload:x,status:"success"})},function(){l.postMessage({id:m.data.id,status:"error"})});else if(m.data.type==="complete"){var g=m.data.animation;l.dataManager.completeData(g),l.postMessage({id:m.data.id,payload:g,status:"success"})}else m.data.type==="loadData"&&l.assetLoader.load(m.data.path,m.data.fullPath,function(x){l.postMessage({id:m.data.id,payload:x,status:"success"})},function(){l.postMessage({id:m.data.id,status:"error"})})}),t.onmessage=function(u){var m=u.data,p=m.id,g=r[p];r[p]=null,m.status==="success"?g.onComplete(m.payload):g.onError&&g.onError()})}function i(u,m){s+=1;var p="processId_"+s;return r[p]={onComplete:u,onError:m},p}function f(u,m,p){c();var g=i(m,p);t.postMessage({type:"loadAnimation",path:u,fullPath:window.location.origin+window.location.pathname,id:g})}function y(u,m,p){c();var g=i(m,p);t.postMessage({type:"loadData",path:u,fullPath:window.location.origin+window.location.pathname,id:g})}function _(u,m,p){c();var g=i(m,p);t.postMessage({type:"complete",animation:u,id:g})}return{loadAnimation:f,loadData:y,completeAnimation:_}}(),ImagePreloader=function(){var s=function(){var b=createTag("canvas");b.width=1,b.height=1;var E=b.getContext("2d");return E.fillStyle="rgba(0,0,0,0)",E.fillRect(0,0,1,1),b}();function r(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function t(b,E,S){var k="";if(b.e)k=b.p;else if(E){var T=b.p;T.indexOf("images/")!==-1&&(T=T.split("/")[1]),k=E+T}else k=S,k+=b.u?b.u:"",k+=b.p;return k}function a(b){var E=0,S=setInterval((function(){var k=b.getBBox();(k.width||E>500)&&(this._imageLoaded(),clearInterval(S)),E+=1}).bind(this),50)}function l(b){var E=t(b,this.assetsPath,this.path),S=createNS("image");isSafari?this.testImageLoaded(S):S.addEventListener("load",this._imageLoaded,!1),S.addEventListener("error",(function(){k.img=s,this._imageLoaded()}).bind(this),!1),S.setAttributeNS("http://www.w3.org/1999/xlink","href",E),this._elementHelper.append?this._elementHelper.append(S):this._elementHelper.appendChild(S);var k={img:S,assetData:b};return k}function o(b){var E=t(b,this.assetsPath,this.path),S=createTag("img");S.crossOrigin="anonymous",S.addEventListener("load",this._imageLoaded,!1),S.addEventListener("error",(function(){k.img=s,this._imageLoaded()}).bind(this),!1),S.src=E;var k={img:S,assetData:b};return k}function c(b){var E={assetData:b},S=t(b,this.assetsPath,this.path);return dataManager.loadData(S,(function(k){E.img=k,this._footageLoaded()}).bind(this),(function(){E.img={},this._footageLoaded()}).bind(this)),E}function i(b,E){this.imagesLoadedCb=E;var S,k=b.length;for(S=0;S<k;S+=1)b[S].layers||(!b[S].t||b[S].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(b[S]))):b[S].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(b[S]))))}function f(b){this.path=b||""}function y(b){this.assetsPath=b||""}function _(b){for(var E=0,S=this.images.length;E<S;){if(this.images[E].assetData===b)return this.images[E].img;E+=1}return null}function u(){this.imagesLoadedCb=null,this.images.length=0}function m(){return this.totalImages===this.loadedAssets}function p(){return this.totalFootages===this.loadedFootagesCount}function g(b,E){b==="svg"?(this._elementHelper=E,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function x(){this._imageLoaded=r.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=c.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return x.prototype={loadAssets:i,setAssetsPath:y,setPath:f,loadedImages:m,loadedFootages:p,destroy:u,getAsset:_,createImgData:o,createImageData:l,imageLoaded:r,footageLoaded:n,setCacheType:g},x}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(r,n){if(this._cbs[r])for(var t=this._cbs[r],a=0;a<t.length;a+=1)t[a](n)},addEventListener:function(r,n){return this._cbs[r]||(this._cbs[r]=[]),this._cbs[r].push(n),(function(){this.removeEventListener(r,n)}).bind(this)},removeEventListener:function(r,n){if(!n)this._cbs[r]=null;else if(this._cbs[r]){for(var t=0,a=this._cbs[r].length;t<a;)this._cbs[r][t]===n&&(this._cbs[r].splice(t,1),t-=1,a-=1),t+=1;this._cbs[r].length||(this._cbs[r]=null)}}};var markerParser=function(){function s(r){for(var n=r.split(`\r
`),t={},a,l=0,o=0;o<n.length;o+=1)a=n[o].split(":"),a.length===2&&(t[a[0]]=a[1].trim(),l+=1);if(l===0)throw new Error;return t}return function(r){for(var n=[],t=0;t<r.length;t+=1){var a=r[t],l={time:a.tm,duration:a.dr};try{l.payload=JSON.parse(r[t].cm)}catch{try{l.payload=s(r[t].cm)}catch{l.payload={name:r[t].cm}}}n.push(l)}return n}}(),ProjectInterface=function(){function s(r){this.compositions.push(r)}return function(){function r(n){for(var t=0,a=this.compositions.length;t<a;){if(this.compositions[t].data&&this.compositions[t].data.nm===n)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return r.compositions=[],r.currentFrame=0,r.registerComposition=s,r}}(),renderers={},registerRenderer=function(r,n){renderers[r]=n};function getRenderer(s){return renderers[s]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var s in renderers)if(renderers[s])return s;return""}function _typeof$4(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(n){return typeof n}:_typeof$4=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(s)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(s){(s.wrapper||s.container)&&(this.wrapper=s.wrapper||s.container);var r="svg";s.animType?r=s.animType:s.renderer&&(r=s.renderer);var n=getRenderer(r);this.renderer=new n(this,s.rendererSettings),this.imagePreloader.setCacheType(r,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=r,s.loop===""||s.loop===null||s.loop===void 0||s.loop===!0?this.loop=!0:s.loop===!1?this.loop=!1:this.loop=parseInt(s.loop,10),this.autoplay="autoplay"in s?s.autoplay:!0,this.name=s.name?s.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(s,"autoloadSegments")?s.autoloadSegments:!0,this.assetsPath=s.assetsPath,this.initialSegment=s.initialSegment,s.audioFactory&&this.audioController.setAudioFactory(s.audioFactory),s.animationData?this.setupAnimation(s.animationData):s.path&&(s.path.lastIndexOf("\\")!==-1?this.path=s.path.substr(0,s.path.lastIndexOf("\\")+1):this.path=s.path.substr(0,s.path.lastIndexOf("/")+1),this.fileName=s.path.substr(s.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(s.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(s){dataManager.completeAnimation(s,this.configAnimation)},AnimationItem.prototype.setData=function(s,r){r&&_typeof$4(r)!=="object"&&(r=JSON.parse(r));var n={wrapper:s,animationData:r},t=s.attributes;n.path=t.getNamedItem("data-animation-path")?t.getNamedItem("data-animation-path").value:t.getNamedItem("data-bm-path")?t.getNamedItem("data-bm-path").value:t.getNamedItem("bm-path")?t.getNamedItem("bm-path").value:"",n.animType=t.getNamedItem("data-anim-type")?t.getNamedItem("data-anim-type").value:t.getNamedItem("data-bm-type")?t.getNamedItem("data-bm-type").value:t.getNamedItem("bm-type")?t.getNamedItem("bm-type").value:t.getNamedItem("data-bm-renderer")?t.getNamedItem("data-bm-renderer").value:t.getNamedItem("bm-renderer")?t.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var a=t.getNamedItem("data-anim-loop")?t.getNamedItem("data-anim-loop").value:t.getNamedItem("data-bm-loop")?t.getNamedItem("data-bm-loop").value:t.getNamedItem("bm-loop")?t.getNamedItem("bm-loop").value:"";a==="false"?n.loop=!1:a==="true"?n.loop=!0:a!==""&&(n.loop=parseInt(a,10));var l=t.getNamedItem("data-anim-autoplay")?t.getNamedItem("data-anim-autoplay").value:t.getNamedItem("data-bm-autoplay")?t.getNamedItem("data-bm-autoplay").value:t.getNamedItem("bm-autoplay")?t.getNamedItem("bm-autoplay").value:!0;n.autoplay=l!=="false",n.name=t.getNamedItem("data-name")?t.getNamedItem("data-name").value:t.getNamedItem("data-bm-name")?t.getNamedItem("data-bm-name").value:t.getNamedItem("bm-name")?t.getNamedItem("bm-name").value:"";var o=t.getNamedItem("data-anim-prerender")?t.getNamedItem("data-anim-prerender").value:t.getNamedItem("data-bm-prerender")?t.getNamedItem("data-bm-prerender").value:t.getNamedItem("bm-prerender")?t.getNamedItem("bm-prerender").value:"";o==="false"&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(s){s.op>this.animationData.op&&(this.animationData.op=s.op,this.totalFrames=Math.floor(s.op-this.animationData.ip));var r=this.animationData.layers,n,t=r.length,a=s.layers,l,o=a.length;for(l=0;l<o;l+=1)for(n=0;n<t;){if(r[n].id===a[l].id){r[n]=a[l];break}n+=1}if((s.chars||s.fonts)&&(this.renderer.globalData.fontManager.addChars(s.chars),this.renderer.globalData.fontManager.addFonts(s.fonts,this.renderer.globalData.defs)),s.assets)for(t=s.assets.length,n=0;n<t;n+=1)this.animationData.assets.push(s.assets[n]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(s){this.animationData=s;var r=getExpressionsPlugin();r&&r.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var s=this.animationData.segments;if(!s||s.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var r=s.shift();this.timeCompleted=r.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var s=this.animationData.segments;s||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(s){if(this.renderer)try{this.animationData=s,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(s),s.assets||(s.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(s.assets),this.markers=markerParser(s.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(r){this.triggerConfigError(r)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var s=getExpressionsPlugin();s&&s.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(s,r){var n=typeof s=="number"?s:void 0,t=typeof r=="number"?r:void 0;this.renderer.updateContainerSize(n,t)},AnimationItem.prototype.setSubframe=function(s){this.isSubframeEnabled=!!s},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(s){this.triggerRenderFrameError(s)}},AnimationItem.prototype.play=function(s){s&&this.name!==s||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(s){s&&this.name!==s||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(s){s&&this.name!==s||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(s){s&&this.name!==s||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(s){for(var r,n=0;n<this.markers.length;n+=1)if(r=this.markers[n],r.payload&&r.payload.name===s)return r;return null},AnimationItem.prototype.goToAndStop=function(s,r,n){if(!(n&&this.name!==n)){var t=Number(s);if(isNaN(t)){var a=this.getMarkerData(s);a&&this.goToAndStop(a.time,!0)}else r?this.setCurrentRawFrameValue(s):this.setCurrentRawFrameValue(s*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(s,r,n){if(!(n&&this.name!==n)){var t=Number(s);if(isNaN(t)){var a=this.getMarkerData(s);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(t,r,n);this.play()}},AnimationItem.prototype.advanceTime=function(s){if(!(this.isPaused===!0||this.isLoaded===!1)){var r=this.currentRawFrame+s*this.frameModifier,n=!1;r>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(r>this.totalFrames?r%this.totalFrames:0)||(n=!0,r=this.totalFrames-1):r>=this.totalFrames?(this.playCount+=1,this.checkSegments(r%this.totalFrames)||(this.setCurrentRawFrameValue(r%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(r):r<0?this.checkSegments(r%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+r%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(n=!0,r=0)):this.setCurrentRawFrameValue(r),n&&(this.setCurrentRawFrameValue(r),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(s,r){this.playCount=0,s[1]<s[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=s[0]-s[1],this.timeCompleted=this.totalFrames,this.firstFrame=s[1],this.setCurrentRawFrameValue(this.totalFrames-.001-r)):s[1]>s[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=s[1]-s[0],this.timeCompleted=this.totalFrames,this.firstFrame=s[0],this.setCurrentRawFrameValue(.001+r)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(s,r){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<s?n=s:this.currentRawFrame+this.firstFrame>r&&(n=r-s)),this.firstFrame=s,this.totalFrames=r-s,this.timeCompleted=this.totalFrames,n!==-1&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(s,r){if(r&&(this.segments.length=0),_typeof$4(s[0])==="object"){var n,t=s.length;for(n=0;n<t;n+=1)this.segments.push(s[n])}else this.segments.push(s);this.segments.length&&r&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(s){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),s&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(s){return this.segments.length?(this.adjustSegment(this.segments.shift(),s),!0):!1},AnimationItem.prototype.destroy=function(s){s&&this.name!==s||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(s){this.currentRawFrame=s,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(s){this.playSpeed=s,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(s){this.playDirection=s<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(s){this.loop=s},AnimationItem.prototype.setVolume=function(s,r){r&&this.name!==r||this.audioController.setVolume(s)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(s){s&&this.name!==s||this.audioController.mute()},AnimationItem.prototype.unmute=function(s){s&&this.name!==s||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(s){var r="";if(s.e)r=s.p;else if(this.assetsPath){var n=s.p;n.indexOf("images/")!==-1&&(n=n.split("/")[1]),r=this.assetsPath+n}else r=this.path,r+=s.u?s.u:"",r+=s.p;return r},AnimationItem.prototype.getAssetData=function(s){for(var r=0,n=this.assets.length;r<n;){if(s===this.assets[r].id)return this.assets[r];r+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(s){return s?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(s,r,n){try{var t=this.renderer.getElementByPath(s);t.updateDocumentData(r,n)}catch{}},AnimationItem.prototype.trigger=function(s){if(this._cbs&&this._cbs[s])switch(s){case"enterFrame":this.triggerEvent(s,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(s,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(s,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(s,new BMCompleteEvent(s,this.frameMult));break;case"segmentStart":this.triggerEvent(s,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(s,new BMDestroyEvent(s,this));break;default:this.triggerEvent(s)}s==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameMult)),s==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult)),s==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(s,this.frameMult)),s==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames)),s==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(s,this))},AnimationItem.prototype.triggerRenderFrameError=function(s){var r=new BMRenderFrameErrorEvent(s,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)},AnimationItem.prototype.triggerConfigError=function(s){var r=new BMConfigErrorEvent(s,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)};var animationManager=function(){var s={},r=[],n=0,t=0,a=0,l=!0,o=!1;function c(L){for(var H=0,O=L.target;H<t;)r[H].animation===O&&(r.splice(H,1),H-=1,t-=1,O.isPaused||_()),H+=1}function i(L,H){if(!L)return null;for(var O=0;O<t;){if(r[O].elem===L&&r[O].elem!==null)return r[O].animation;O+=1}var U=new AnimationItem;return u(U,L),U.setData(L,H),U}function f(){var L,H=r.length,O=[];for(L=0;L<H;L+=1)O.push(r[L].animation);return O}function y(){a+=1,V()}function _(){a-=1}function u(L,H){L.addEventListener("destroy",c),L.addEventListener("_active",y),L.addEventListener("_idle",_),r.push({elem:H,animation:L}),t+=1}function m(L){var H=new AnimationItem;return u(H,null),H.setParams(L),H}function p(L,H){var O;for(O=0;O<t;O+=1)r[O].animation.setSpeed(L,H)}function g(L,H){var O;for(O=0;O<t;O+=1)r[O].animation.setDirection(L,H)}function x(L){var H;for(H=0;H<t;H+=1)r[H].animation.play(L)}function b(L){var H=L-n,O;for(O=0;O<t;O+=1)r[O].animation.advanceTime(H);n=L,a&&!o?window.requestAnimationFrame(b):l=!0}function E(L){n=L,window.requestAnimationFrame(b)}function S(L){var H;for(H=0;H<t;H+=1)r[H].animation.pause(L)}function k(L,H,O){var U;for(U=0;U<t;U+=1)r[U].animation.goToAndStop(L,H,O)}function T(L){var H;for(H=0;H<t;H+=1)r[H].animation.stop(L)}function j(L){var H;for(H=0;H<t;H+=1)r[H].animation.togglePause(L)}function A(L){var H;for(H=t-1;H>=0;H-=1)r[H].animation.destroy(L)}function C(L,H,O){var U=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),J,Z=U.length;for(J=0;J<Z;J+=1)O&&U[J].setAttribute("data-bm-type",O),i(U[J],L);if(H&&Z===0){O||(O="svg");var z=document.getElementsByTagName("body")[0];z.innerText="";var B=createTag("div");B.style.width="100%",B.style.height="100%",B.setAttribute("data-bm-type",O),z.appendChild(B),i(B,L)}}function N(){var L;for(L=0;L<t;L+=1)r[L].animation.resize()}function V(){!o&&a&&l&&(window.requestAnimationFrame(E),l=!1)}function I(){o=!0}function G(){o=!1,V()}function R(L,H){var O;for(O=0;O<t;O+=1)r[O].animation.setVolume(L,H)}function q(L){var H;for(H=0;H<t;H+=1)r[H].animation.mute(L)}function M(L){var H;for(H=0;H<t;H+=1)r[H].animation.unmute(L)}return s.registerAnimation=i,s.loadAnimation=m,s.setSpeed=p,s.setDirection=g,s.play=x,s.pause=S,s.stop=T,s.togglePause=j,s.searchAnimations=C,s.resize=N,s.goToAndStop=k,s.destroy=A,s.freeze=I,s.unfreeze=G,s.setVolume=R,s.mute=q,s.unmute=M,s.getRegisteredAnimations=f,s}(),BezierFactory=function(){var s={};s.getBezierEasing=n;var r={};function n(E,S,k,T,j){var A=j||("bez_"+E+"_"+S+"_"+k+"_"+T).replace(/\./g,"p");if(r[A])return r[A];var C=new b([E,S,k,T]);return r[A]=C,C}var t=4,a=.001,l=1e-7,o=10,c=11,i=1/(c-1),f=typeof Float32Array=="function";function y(E,S){return 1-3*S+3*E}function _(E,S){return 3*S-6*E}function u(E){return 3*E}function m(E,S,k){return((y(S,k)*E+_(S,k))*E+u(S))*E}function p(E,S,k){return 3*y(S,k)*E*E+2*_(S,k)*E+u(S)}function g(E,S,k,T,j){var A,C,N=0;do C=S+(k-S)/2,A=m(C,T,j)-E,A>0?k=C:S=C;while(Math.abs(A)>l&&++N<o);return C}function x(E,S,k,T){for(var j=0;j<t;++j){var A=p(S,k,T);if(A===0)return S;var C=m(S,k,T)-E;S-=C/A}return S}function b(E){this._p=E,this._mSampleValues=f?new Float32Array(c):new Array(c),this._precomputed=!1,this.get=this.get.bind(this)}return b.prototype={get:function(S){var k=this._p[0],T=this._p[1],j=this._p[2],A=this._p[3];return this._precomputed||this._precompute(),k===T&&j===A?S:S===0?0:S===1?1:m(this._getTForX(S),T,A)},_precompute:function(){var S=this._p[0],k=this._p[1],T=this._p[2],j=this._p[3];this._precomputed=!0,(S!==k||T!==j)&&this._calcSampleValues()},_calcSampleValues:function(){for(var S=this._p[0],k=this._p[2],T=0;T<c;++T)this._mSampleValues[T]=m(T*i,S,k)},_getTForX:function(S){for(var k=this._p[0],T=this._p[2],j=this._mSampleValues,A=0,C=1,N=c-1;C!==N&&j[C]<=S;++C)A+=i;--C;var V=(S-j[C])/(j[C+1]-j[C]),I=A+V*i,G=p(I,k,T);return G>=a?x(S,I,k,T):G===0?I:g(S,A,A+i,k,T)}},s}(),pooling=function(){function s(r){return r.concat(createSizedArray(r.length))}return{double:s}}(),poolFactory=function(){return function(s,r,n){var t=0,a=s,l=createSizedArray(a),o={newElement:c,release:i};function c(){var f;return t?(t-=1,f=l[t]):f=r(),f}function i(f){t===a&&(l=pooling.double(l),a*=2),n&&n(f),l[t]=f,t+=1}return o}}(),bezierLengthPool=function(){function s(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,s)}(),segmentsLengthPool=function(){function s(){return{lengths:[],totalLength:0}}function r(n){var t,a=n.lengths.length;for(t=0;t<a;t+=1)bezierLengthPool.release(n.lengths[t]);n.lengths.length=0}return poolFactory(8,s,r)}();function bezFunction(){var s=Math;function r(u,m,p,g,x,b){var E=u*g+m*x+p*b-x*g-b*u-p*m;return E>-.001&&E<.001}function n(u,m,p,g,x,b,E,S,k){if(p===0&&b===0&&k===0)return r(u,m,g,x,E,S);var T=s.sqrt(s.pow(g-u,2)+s.pow(x-m,2)+s.pow(b-p,2)),j=s.sqrt(s.pow(E-u,2)+s.pow(S-m,2)+s.pow(k-p,2)),A=s.sqrt(s.pow(E-g,2)+s.pow(S-x,2)+s.pow(k-b,2)),C;return T>j?T>A?C=T-j-A:C=A-j-T:A>j?C=A-j-T:C=j-T-A,C>-1e-4&&C<1e-4}var t=function(){return function(u,m,p,g){var x=getDefaultCurveSegments(),b,E,S,k,T,j=0,A,C=[],N=[],V=bezierLengthPool.newElement();for(S=p.length,b=0;b<x;b+=1){for(T=b/(x-1),A=0,E=0;E<S;E+=1)k=bmPow(1-T,3)*u[E]+3*bmPow(1-T,2)*T*p[E]+3*(1-T)*bmPow(T,2)*g[E]+bmPow(T,3)*m[E],C[E]=k,N[E]!==null&&(A+=bmPow(C[E]-N[E],2)),N[E]=C[E];A&&(A=bmSqrt(A),j+=A),V.percents[b]=T,V.lengths[b]=j}return V.addedLength=j,V}}();function a(u){var m=segmentsLengthPool.newElement(),p=u.c,g=u.v,x=u.o,b=u.i,E,S=u._length,k=m.lengths,T=0;for(E=0;E<S-1;E+=1)k[E]=t(g[E],g[E+1],x[E],b[E+1]),T+=k[E].addedLength;return p&&S&&(k[E]=t(g[E],g[0],x[E],b[0]),T+=k[E].addedLength),m.totalLength=T,m}function l(u){this.segmentLength=0,this.points=new Array(u)}function o(u,m){this.partialLength=u,this.point=m}var c=function(){var u={};return function(m,p,g,x){var b=(m[0]+"_"+m[1]+"_"+p[0]+"_"+p[1]+"_"+g[0]+"_"+g[1]+"_"+x[0]+"_"+x[1]).replace(/\./g,"p");if(!u[b]){var E=getDefaultCurveSegments(),S,k,T,j,A,C=0,N,V,I=null;m.length===2&&(m[0]!==p[0]||m[1]!==p[1])&&r(m[0],m[1],p[0],p[1],m[0]+g[0],m[1]+g[1])&&r(m[0],m[1],p[0],p[1],p[0]+x[0],p[1]+x[1])&&(E=2);var G=new l(E);for(T=g.length,S=0;S<E;S+=1){for(V=createSizedArray(T),A=S/(E-1),N=0,k=0;k<T;k+=1)j=bmPow(1-A,3)*m[k]+3*bmPow(1-A,2)*A*(m[k]+g[k])+3*(1-A)*bmPow(A,2)*(p[k]+x[k])+bmPow(A,3)*p[k],V[k]=j,I!==null&&(N+=bmPow(V[k]-I[k],2));N=bmSqrt(N),C+=N,G.points[S]=new o(N,V),I=V}G.segmentLength=C,u[b]=G}return u[b]}}();function i(u,m){var p=m.percents,g=m.lengths,x=p.length,b=bmFloor((x-1)*u),E=u*m.addedLength,S=0;if(b===x-1||b===0||E===g[b])return p[b];for(var k=g[b]>E?-1:1,T=!0;T;)if(g[b]<=E&&g[b+1]>E?(S=(E-g[b])/(g[b+1]-g[b]),T=!1):b+=k,b<0||b>=x-1){if(b===x-1)return p[b];T=!1}return p[b]+(p[b+1]-p[b])*S}function f(u,m,p,g,x,b){var E=i(x,b),S=1-E,k=s.round((S*S*S*u[0]+(E*S*S+S*E*S+S*S*E)*p[0]+(E*E*S+S*E*E+E*S*E)*g[0]+E*E*E*m[0])*1e3)/1e3,T=s.round((S*S*S*u[1]+(E*S*S+S*E*S+S*S*E)*p[1]+(E*E*S+S*E*E+E*S*E)*g[1]+E*E*E*m[1])*1e3)/1e3;return[k,T]}var y=createTypedArray("float32",8);function _(u,m,p,g,x,b,E){x<0?x=0:x>1&&(x=1);var S=i(x,E);b=b>1?1:b;var k=i(b,E),T,j=u.length,A=1-S,C=1-k,N=A*A*A,V=S*A*A*3,I=S*S*A*3,G=S*S*S,R=A*A*C,q=S*A*C+A*S*C+A*A*k,M=S*S*C+A*S*k+S*A*k,L=S*S*k,H=A*C*C,O=S*C*C+A*k*C+A*C*k,U=S*k*C+A*k*k+S*C*k,J=S*k*k,Z=C*C*C,z=k*C*C+C*k*C+C*C*k,B=k*k*C+C*k*k+k*C*k,D=k*k*k;for(T=0;T<j;T+=1)y[T*4]=s.round((N*u[T]+V*p[T]+I*g[T]+G*m[T])*1e3)/1e3,y[T*4+1]=s.round((R*u[T]+q*p[T]+M*g[T]+L*m[T])*1e3)/1e3,y[T*4+2]=s.round((H*u[T]+O*p[T]+U*g[T]+J*m[T])*1e3)/1e3,y[T*4+3]=s.round((Z*u[T]+z*p[T]+B*g[T]+D*m[T])*1e3)/1e3;return y}return{getSegmentsLength:a,getNewSegment:_,getPointInSegment:f,buildBezierData:c,pointOnLine2D:r,pointOnLine3D:n}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(s,r){var n=this.offsetTime,t;this.propType==="multidimensional"&&(t=createTypedArray("float32",this.pv.length));for(var a=r.lastIndex,l=a,o=this.keyframes.length-1,c=!0,i,f,y;c;){if(i=this.keyframes[l],f=this.keyframes[l+1],l===o-1&&s>=f.t-n){i.h&&(i=f),a=0;break}if(f.t-n>s){a=l;break}l<o-1?l+=1:(a=0,c=!1)}y=this.keyframesMetadata[l]||{};var _,u,m,p,g,x,b=f.t-n,E=i.t-n,S;if(i.to){y.bezierData||(y.bezierData=bez.buildBezierData(i.s,f.s||i.e,i.to,i.ti));var k=y.bezierData;if(s>=b||s<E){var T=s>=b?k.points.length-1:0;for(u=k.points[T].point.length,_=0;_<u;_+=1)t[_]=k.points[T].point[_]}else{y.__fnct?x=y.__fnct:(x=BezierFactory.getBezierEasing(i.o.x,i.o.y,i.i.x,i.i.y,i.n).get,y.__fnct=x),m=x((s-E)/(b-E));var j=k.segmentLength*m,A,C=r.lastFrame<s&&r._lastKeyframeIndex===l?r._lastAddedLength:0;for(g=r.lastFrame<s&&r._lastKeyframeIndex===l?r._lastPoint:0,c=!0,p=k.points.length;c;){if(C+=k.points[g].partialLength,j===0||m===0||g===k.points.length-1){for(u=k.points[g].point.length,_=0;_<u;_+=1)t[_]=k.points[g].point[_];break}else if(j>=C&&j<C+k.points[g+1].partialLength){for(A=(j-C)/k.points[g+1].partialLength,u=k.points[g].point.length,_=0;_<u;_+=1)t[_]=k.points[g].point[_]+(k.points[g+1].point[_]-k.points[g].point[_])*A;break}g<p-1?g+=1:c=!1}r._lastPoint=g,r._lastAddedLength=C-k.points[g].partialLength,r._lastKeyframeIndex=l}}else{var N,V,I,G,R;if(o=i.s.length,S=f.s||i.e,this.sh&&i.h!==1)if(s>=b)t[0]=S[0],t[1]=S[1],t[2]=S[2];else if(s<=E)t[0]=i.s[0],t[1]=i.s[1],t[2]=i.s[2];else{var q=createQuaternion(i.s),M=createQuaternion(S),L=(s-E)/(b-E);quaternionToEuler(t,slerp(q,M,L))}else for(l=0;l<o;l+=1)i.h!==1&&(s>=b?m=1:s<E?m=0:(i.o.x.constructor===Array?(y.__fnct||(y.__fnct=[]),y.__fnct[l]?x=y.__fnct[l]:(N=i.o.x[l]===void 0?i.o.x[0]:i.o.x[l],V=i.o.y[l]===void 0?i.o.y[0]:i.o.y[l],I=i.i.x[l]===void 0?i.i.x[0]:i.i.x[l],G=i.i.y[l]===void 0?i.i.y[0]:i.i.y[l],x=BezierFactory.getBezierEasing(N,V,I,G).get,y.__fnct[l]=x)):y.__fnct?x=y.__fnct:(N=i.o.x,V=i.o.y,I=i.i.x,G=i.i.y,x=BezierFactory.getBezierEasing(N,V,I,G).get,i.keyframeMetadata=x),m=x((s-E)/(b-E)))),S=f.s||i.e,R=i.h===1?i.s[l]:i.s[l]+(S[l]-i.s[l])*m,this.propType==="multidimensional"?t[l]=R:t=R}return r.lastIndex=a,t}function slerp(s,r,n){var t=[],a=s[0],l=s[1],o=s[2],c=s[3],i=r[0],f=r[1],y=r[2],_=r[3],u,m,p,g,x;return m=a*i+l*f+o*y+c*_,m<0&&(m=-m,i=-i,f=-f,y=-y,_=-_),1-m>1e-6?(u=Math.acos(m),p=Math.sin(u),g=Math.sin((1-n)*u)/p,x=Math.sin(n*u)/p):(g=1-n,x=n),t[0]=g*a+x*i,t[1]=g*l+x*f,t[2]=g*o+x*y,t[3]=g*c+x*_,t}function quaternionToEuler(s,r){var n=r[0],t=r[1],a=r[2],l=r[3],o=Math.atan2(2*t*l-2*n*a,1-2*t*t-2*a*a),c=Math.asin(2*n*t+2*a*l),i=Math.atan2(2*n*l-2*t*a,1-2*n*n-2*a*a);s[0]=o/degToRads,s[1]=c/degToRads,s[2]=i/degToRads}function createQuaternion(s){var r=s[0]*degToRads,n=s[1]*degToRads,t=s[2]*degToRads,a=Math.cos(r/2),l=Math.cos(n/2),o=Math.cos(t/2),c=Math.sin(r/2),i=Math.sin(n/2),f=Math.sin(t/2),y=a*l*o-c*i*f,_=c*i*o+a*l*f,u=c*l*o+a*i*f,m=a*i*o-c*l*f;return[_,u,m,y]}function getValueAtCurrentTime(){var s=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(s===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&s>=n||this._caching.lastFrame<r&&s<r))){this._caching.lastFrame>=s&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var t=this.interpolateValue(s,this._caching);this.pv=t}return this._caching.lastFrame=s,this.pv}function setVValue(s){var r;if(this.propType==="unidimensional")r=s*this.mult,mathAbs(this.v-r)>1e-5&&(this.v=r,this._mdf=!0);else for(var n=0,t=this.v.length;n<t;)r=s[n]*this.mult,mathAbs(this.v[n]-r)>1e-5&&(this.v[n]=r,this._mdf=!0),n+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var s,r=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(s=0;s<r;s+=1)n=this.effectsSequence[s](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(s){this.effectsSequence.push(s),this.container.addDynamicProperty(this)}function ValueProperty(s,r,n,t){this.propType="unidimensional",this.mult=n||1,this.data=r,this.v=n?r.k*n:r.k,this.pv=r.k,this._mdf=!1,this.elem=s,this.container=t,this.comp=s.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(s,r,n,t){this.propType="multidimensional",this.mult=n||1,this.data=r,this._mdf=!1,this.elem=s,this.container=t,this.comp=s.comp,this.k=!1,this.kf=!1,this.frameId=-1;var a,l=r.k.length;for(this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l),this.vel=createTypedArray("float32",l),a=0;a<l;a+=1)this.v[a]=r.k[a]*this.mult,this.pv[a]=r.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(s,r,n,t){this.propType="unidimensional",this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=s.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=n||1,this.elem=s,this.container=t,this.comp=s.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(s,r,n,t){this.propType="multidimensional";var a,l=r.k.length,o,c,i,f;for(a=0;a<l-1;a+=1)r.k[a].to&&r.k[a].s&&r.k[a+1]&&r.k[a+1].s&&(o=r.k[a].s,c=r.k[a+1].s,i=r.k[a].to,f=r.k[a].ti,(o.length===2&&!(o[0]===c[0]&&o[1]===c[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],o[0]+i[0],o[1]+i[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],c[0]+f[0],c[1]+f[1])||o.length===3&&!(o[0]===c[0]&&o[1]===c[1]&&o[2]===c[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],o[0]+i[0],o[1]+i[1],o[2]+i[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],c[0]+f[0],c[1]+f[1],c[2]+f[2]))&&(r.k[a].to=null,r.k[a].ti=null),o[0]===c[0]&&o[1]===c[1]&&i[0]===0&&i[1]===0&&f[0]===0&&f[1]===0&&(o.length===2||o[2]===c[2]&&i[2]===0&&f[2]===0)&&(r.k[a].to=null,r.k[a].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=r,this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=s.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=s,this.container=t,this.comp=s.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var y=r.k[0].s.length;for(this.v=createTypedArray("float32",y),this.pv=createTypedArray("float32",y),a=0;a<y;a+=1)this.v[a]=initFrame,this.pv[a]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",y)},this.addEffect=addEffect}var PropertyFactory=function(){function s(n,t,a,l,o){t.sid&&(t=n.globalData.slotManager.getProp(t));var c;if(!t.k.length)c=new ValueProperty(n,t,l,o);else if(typeof t.k[0]=="number")c=new MultiDimensionalProperty(n,t,l,o);else switch(a){case 0:c=new KeyframedValueProperty(n,t,l,o);break;case 1:c=new KeyframedMultidimensionalProperty(n,t,l,o);break}return c.effectsSequence.length&&o.addDynamicProperty(c),c}var r={getProp:s};return r}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&(this.dynamicProperties.push(r),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var r,n=this.dynamicProperties.length;for(r=0;r<n;r+=1)this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(r){this.container=r,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function s(){return createTypedArray("float32",2)}return poolFactory(8,s)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(s,r){this.c=s,this.setLength(r);for(var n=0;n<r;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(s){for(;this._maxLength<s;)this.doubleArrayLength();this._length=s},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(s,r,n,t,a){var l;switch(this._length=Math.max(this._length,t+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":l=this.v;break;case"i":l=this.i;break;case"o":l=this.o;break;default:l=[];break}(!l[t]||l[t]&&!a)&&(l[t]=pointPool.newElement()),l[t][0]=s,l[t][1]=r},ShapePath.prototype.setTripleAt=function(s,r,n,t,a,l,o,c){this.setXYAt(s,r,"v",o,c),this.setXYAt(n,t,"o",o,c),this.setXYAt(a,l,"i",o,c)},ShapePath.prototype.reverse=function(){var s=new ShapePath;s.setPathData(this.c,this._length);var r=this.v,n=this.o,t=this.i,a=0;this.c&&(s.setTripleAt(r[0][0],r[0][1],t[0][0],t[0][1],n[0][0],n[0][1],0,!1),a=1);var l=this._length-1,o=this._length,c;for(c=a;c<o;c+=1)s.setTripleAt(r[l][0],r[l][1],t[l][0],t[l][1],n[l][0],n[l][1],c,!1),l-=1;return s},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function s(){return new ShapePath}function r(a){var l=a._length,o;for(o=0;o<l;o+=1)pointPool.release(a.v[o]),pointPool.release(a.i[o]),pointPool.release(a.o[o]),a.v[o]=null,a.i[o]=null,a.o[o]=null;a._length=0,a.c=!1}function n(a){var l=t.newElement(),o,c=a._length===void 0?a.v.length:a._length;for(l.setLength(c),l.c=a.c,o=0;o<c;o+=1)l.setTripleAt(a.v[o][0],a.v[o][1],a.o[o][0],a.o[o][1],a.i[o][0],a.i[o][1],o);return l}var t=poolFactory(4,s,r);return t.clone=n,t}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(s){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=s,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var s;for(s=0;s<this._length;s+=1)shapePool.release(this.shapes[s]);this._length=0};var shapeCollectionPool=function(){var s={newShapeCollection:a,release:l},r=0,n=4,t=createSizedArray(n);function a(){var o;return r?(r-=1,o=t[r]):o=new ShapeCollection,o}function l(o){var c,i=o._length;for(c=0;c<i;c+=1)shapePool.release(o.shapes[c]);o._length=0,r===n&&(t=pooling.double(t),n*=2),t[r]=o,r+=1}return s}(),ShapePropertyFactory=function(){var s=-999999;function r(b,E,S){var k=S.lastIndex,T,j,A,C,N,V,I,G,R,q=this.keyframes;if(b<q[0].t-this.offsetTime)T=q[0].s[0],A=!0,k=0;else if(b>=q[q.length-1].t-this.offsetTime)T=q[q.length-1].s?q[q.length-1].s[0]:q[q.length-2].e[0],A=!0;else{for(var M=k,L=q.length-1,H=!0,O,U,J;H&&(O=q[M],U=q[M+1],!(U.t-this.offsetTime>b));)M<L-1?M+=1:H=!1;if(J=this.keyframesMetadata[M]||{},A=O.h===1,k=M,!A){if(b>=U.t-this.offsetTime)G=1;else if(b<O.t-this.offsetTime)G=0;else{var Z;J.__fnct?Z=J.__fnct:(Z=BezierFactory.getBezierEasing(O.o.x,O.o.y,O.i.x,O.i.y).get,J.__fnct=Z),G=Z((b-(O.t-this.offsetTime))/(U.t-this.offsetTime-(O.t-this.offsetTime)))}j=U.s?U.s[0]:O.e[0]}T=O.s[0]}for(V=E._length,I=T.i[0].length,S.lastIndex=k,C=0;C<V;C+=1)for(N=0;N<I;N+=1)R=A?T.i[C][N]:T.i[C][N]+(j.i[C][N]-T.i[C][N])*G,E.i[C][N]=R,R=A?T.o[C][N]:T.o[C][N]+(j.o[C][N]-T.o[C][N])*G,E.o[C][N]=R,R=A?T.v[C][N]:T.v[C][N]+(j.v[C][N]-T.v[C][N])*G,E.v[C][N]=R}function n(){var b=this.comp.renderedFrame-this.offsetTime,E=this.keyframes[0].t-this.offsetTime,S=this.keyframes[this.keyframes.length-1].t-this.offsetTime,k=this._caching.lastFrame;return k!==s&&(k<E&&b<E||k>S&&b>S)||(this._caching.lastIndex=k<b?this._caching.lastIndex:0,this.interpolateShape(b,this.pv,this._caching)),this._caching.lastFrame=b,this.pv}function t(){this.paths=this.localShapeCollection}function a(b,E){if(b._length!==E._length||b.c!==E.c)return!1;var S,k=b._length;for(S=0;S<k;S+=1)if(b.v[S][0]!==E.v[S][0]||b.v[S][1]!==E.v[S][1]||b.o[S][0]!==E.o[S][0]||b.o[S][1]!==E.o[S][1]||b.i[S][0]!==E.i[S][0]||b.i[S][1]!==E.i[S][1])return!1;return!0}function l(b){a(this.v,b)||(this.v=shapePool.clone(b),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var b;this.kf?b=this.pv:this.data.ks?b=this.data.ks.k:b=this.data.pt.k;var E,S=this.effectsSequence.length;for(E=0;E<S;E+=1)b=this.effectsSequence[E](b);this.setVValue(b),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function c(b,E,S){this.propType="shape",this.comp=b.comp,this.container=b,this.elem=b,this.data=E,this.k=!1,this.kf=!1,this._mdf=!1;var k=S===3?E.pt.k:E.ks.k;this.v=shapePool.clone(k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=t,this.effectsSequence=[]}function i(b){this.effectsSequence.push(b),this.container.addDynamicProperty(this)}c.prototype.interpolateShape=r,c.prototype.getValue=o,c.prototype.setVValue=l,c.prototype.addEffect=i;function f(b,E,S){this.propType="shape",this.comp=b.comp,this.elem=b,this.container=b,this.offsetTime=b.data.st,this.keyframes=S===3?E.pt.k:E.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var k=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=s,this.reset=t,this._caching={lastFrame:s,lastIndex:0},this.effectsSequence=[n.bind(this)]}f.prototype.getValue=o,f.prototype.interpolateShape=r,f.prototype.setVValue=l,f.prototype.addEffect=i;var y=function(){var b=roundCorner;function E(S,k){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=k.d,this.elem=S,this.comp=S.comp,this.frameId=-1,this.initDynamicPropertyContainer(S),this.p=PropertyFactory.getProp(S,k.p,1,0,this),this.s=PropertyFactory.getProp(S,k.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return E.prototype={reset:t,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var k=this.p.v[0],T=this.p.v[1],j=this.s.v[0]/2,A=this.s.v[1]/2,C=this.d!==3,N=this.v;N.v[0][0]=k,N.v[0][1]=T-A,N.v[1][0]=C?k+j:k-j,N.v[1][1]=T,N.v[2][0]=k,N.v[2][1]=T+A,N.v[3][0]=C?k-j:k+j,N.v[3][1]=T,N.i[0][0]=C?k-j*b:k+j*b,N.i[0][1]=T-A,N.i[1][0]=C?k+j:k-j,N.i[1][1]=T-A*b,N.i[2][0]=C?k+j*b:k-j*b,N.i[2][1]=T+A,N.i[3][0]=C?k-j:k+j,N.i[3][1]=T+A*b,N.o[0][0]=C?k+j*b:k-j*b,N.o[0][1]=T-A,N.o[1][0]=C?k+j:k-j,N.o[1][1]=T+A*b,N.o[2][0]=C?k-j*b:k+j*b,N.o[2][1]=T+A,N.o[3][0]=C?k-j:k+j,N.o[3][1]=T-A*b}},extendPrototype([DynamicPropertyContainer],E),E}(),_=function(){function b(E,S){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=E,this.comp=E.comp,this.data=S,this.frameId=-1,this.d=S.d,this.initDynamicPropertyContainer(E),S.sy===1?(this.ir=PropertyFactory.getProp(E,S.ir,0,0,this),this.is=PropertyFactory.getProp(E,S.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(E,S.pt,0,0,this),this.p=PropertyFactory.getProp(E,S.p,1,0,this),this.r=PropertyFactory.getProp(E,S.r,0,degToRads,this),this.or=PropertyFactory.getProp(E,S.or,0,0,this),this.os=PropertyFactory.getProp(E,S.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return b.prototype={reset:t,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var S=Math.floor(this.pt.v)*2,k=Math.PI*2/S,T=!0,j=this.or.v,A=this.ir.v,C=this.os.v,N=this.is.v,V=2*Math.PI*j/(S*2),I=2*Math.PI*A/(S*2),G,R,q,M,L=-Math.PI/2;L+=this.r.v;var H=this.data.d===3?-1:1;for(this.v._length=0,G=0;G<S;G+=1){R=T?j:A,q=T?C:N,M=T?V:I;var O=R*Math.cos(L),U=R*Math.sin(L),J=O===0&&U===0?0:U/Math.sqrt(O*O+U*U),Z=O===0&&U===0?0:-O/Math.sqrt(O*O+U*U);O+=+this.p.v[0],U+=+this.p.v[1],this.v.setTripleAt(O,U,O-J*M*q*H,U-Z*M*q*H,O+J*M*q*H,U+Z*M*q*H,G,!0),T=!T,L+=k*H}},convertPolygonToPath:function(){var S=Math.floor(this.pt.v),k=Math.PI*2/S,T=this.or.v,j=this.os.v,A=2*Math.PI*T/(S*4),C,N=-Math.PI*.5,V=this.data.d===3?-1:1;for(N+=this.r.v,this.v._length=0,C=0;C<S;C+=1){var I=T*Math.cos(N),G=T*Math.sin(N),R=I===0&&G===0?0:G/Math.sqrt(I*I+G*G),q=I===0&&G===0?0:-I/Math.sqrt(I*I+G*G);I+=+this.p.v[0],G+=+this.p.v[1],this.v.setTripleAt(I,G,I-R*A*j*V,G-q*A*j*V,I+R*A*j*V,G+q*A*j*V,C,!0),N+=k*V}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],b),b}(),u=function(){function b(E,S){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=E,this.comp=E.comp,this.frameId=-1,this.d=S.d,this.initDynamicPropertyContainer(E),this.p=PropertyFactory.getProp(E,S.p,1,0,this),this.s=PropertyFactory.getProp(E,S.s,1,0,this),this.r=PropertyFactory.getProp(E,S.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return b.prototype={convertRectToPath:function(){var S=this.p.v[0],k=this.p.v[1],T=this.s.v[0]/2,j=this.s.v[1]/2,A=bmMin(T,j,this.r.v),C=A*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(S+T,k-j+A,S+T,k-j+A,S+T,k-j+C,0,!0),this.v.setTripleAt(S+T,k+j-A,S+T,k+j-C,S+T,k+j-A,1,!0),A!==0?(this.v.setTripleAt(S+T-A,k+j,S+T-A,k+j,S+T-C,k+j,2,!0),this.v.setTripleAt(S-T+A,k+j,S-T+C,k+j,S-T+A,k+j,3,!0),this.v.setTripleAt(S-T,k+j-A,S-T,k+j-A,S-T,k+j-C,4,!0),this.v.setTripleAt(S-T,k-j+A,S-T,k-j+C,S-T,k-j+A,5,!0),this.v.setTripleAt(S-T+A,k-j,S-T+A,k-j,S-T+C,k-j,6,!0),this.v.setTripleAt(S+T-A,k-j,S+T-C,k-j,S+T-A,k-j,7,!0)):(this.v.setTripleAt(S-T,k+j,S-T+C,k+j,S-T,k+j,2),this.v.setTripleAt(S-T,k-j,S-T,k-j+C,S-T,k-j,3))):(this.v.setTripleAt(S+T,k-j+A,S+T,k-j+C,S+T,k-j+A,0,!0),A!==0?(this.v.setTripleAt(S+T-A,k-j,S+T-A,k-j,S+T-C,k-j,1,!0),this.v.setTripleAt(S-T+A,k-j,S-T+C,k-j,S-T+A,k-j,2,!0),this.v.setTripleAt(S-T,k-j+A,S-T,k-j+A,S-T,k-j+C,3,!0),this.v.setTripleAt(S-T,k+j-A,S-T,k+j-C,S-T,k+j-A,4,!0),this.v.setTripleAt(S-T+A,k+j,S-T+A,k+j,S-T+C,k+j,5,!0),this.v.setTripleAt(S+T-A,k+j,S+T-C,k+j,S+T-A,k+j,6,!0),this.v.setTripleAt(S+T,k+j-A,S+T,k+j-A,S+T,k+j-C,7,!0)):(this.v.setTripleAt(S-T,k-j,S-T+C,k-j,S-T,k-j,1,!0),this.v.setTripleAt(S-T,k+j,S-T,k+j-C,S-T,k+j,2,!0),this.v.setTripleAt(S+T,k+j,S+T-C,k+j,S+T,k+j,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:t},extendPrototype([DynamicPropertyContainer],b),b}();function m(b,E,S){var k;if(S===3||S===4){var T=S===3?E.pt:E.ks,j=T.k;j.length?k=new f(b,E,S):k=new c(b,E,S)}else S===5?k=new u(b,E):S===6?k=new y(b,E):S===7&&(k=new _(b,E));return k.k&&b.addDynamicProperty(k),k}function p(){return c}function g(){return f}var x={};return x.getShapeProp=m,x.getConstructorFunction=p,x.getKeyframedConstructorFunction=g,x}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var s=Math.cos,r=Math.sin,n=Math.tan,t=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function l(O){if(O===0)return this;var U=s(O),J=r(O);return this._t(U,-J,0,0,J,U,0,0,0,0,1,0,0,0,0,1)}function o(O){if(O===0)return this;var U=s(O),J=r(O);return this._t(1,0,0,0,0,U,-J,0,0,J,U,0,0,0,0,1)}function c(O){if(O===0)return this;var U=s(O),J=r(O);return this._t(U,0,J,0,0,1,0,0,-J,0,U,0,0,0,0,1)}function i(O){if(O===0)return this;var U=s(O),J=r(O);return this._t(U,-J,0,0,J,U,0,0,0,0,1,0,0,0,0,1)}function f(O,U){return this._t(1,U,O,1,0,0)}function y(O,U){return this.shear(n(O),n(U))}function _(O,U){var J=s(U),Z=r(U);return this._t(J,Z,0,0,-Z,J,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(O),1,0,0,0,0,1,0,0,0,0,1)._t(J,-Z,0,0,Z,J,0,0,0,0,1,0,0,0,0,1)}function u(O,U,J){return!J&&J!==0&&(J=1),O===1&&U===1&&J===1?this:this._t(O,0,0,0,0,U,0,0,0,0,J,0,0,0,0,1)}function m(O,U,J,Z,z,B,D,X,K,re,se,fe,xe,he,_e,ye){return this.props[0]=O,this.props[1]=U,this.props[2]=J,this.props[3]=Z,this.props[4]=z,this.props[5]=B,this.props[6]=D,this.props[7]=X,this.props[8]=K,this.props[9]=re,this.props[10]=se,this.props[11]=fe,this.props[12]=xe,this.props[13]=he,this.props[14]=_e,this.props[15]=ye,this}function p(O,U,J){return J=J||0,O!==0||U!==0||J!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,O,U,J,1):this}function g(O,U,J,Z,z,B,D,X,K,re,se,fe,xe,he,_e,ye){var ue=this.props;if(O===1&&U===0&&J===0&&Z===0&&z===0&&B===1&&D===0&&X===0&&K===0&&re===0&&se===1&&fe===0)return ue[12]=ue[12]*O+ue[15]*xe,ue[13]=ue[13]*B+ue[15]*he,ue[14]=ue[14]*se+ue[15]*_e,ue[15]*=ye,this._identityCalculated=!1,this;var pe=ue[0],ke=ue[1],Ie=ue[2],$=ue[3],te=ue[4],ne=ue[5],be=ue[6],ve=ue[7],je=ue[8],Re=ue[9],Ge=ue[10],Xe=ue[11],Ke=ue[12],Pe=ue[13],We=ue[14],Fe=ue[15];return ue[0]=pe*O+ke*z+Ie*K+$*xe,ue[1]=pe*U+ke*B+Ie*re+$*he,ue[2]=pe*J+ke*D+Ie*se+$*_e,ue[3]=pe*Z+ke*X+Ie*fe+$*ye,ue[4]=te*O+ne*z+be*K+ve*xe,ue[5]=te*U+ne*B+be*re+ve*he,ue[6]=te*J+ne*D+be*se+ve*_e,ue[7]=te*Z+ne*X+be*fe+ve*ye,ue[8]=je*O+Re*z+Ge*K+Xe*xe,ue[9]=je*U+Re*B+Ge*re+Xe*he,ue[10]=je*J+Re*D+Ge*se+Xe*_e,ue[11]=je*Z+Re*X+Ge*fe+Xe*ye,ue[12]=Ke*O+Pe*z+We*K+Fe*xe,ue[13]=Ke*U+Pe*B+We*re+Fe*he,ue[14]=Ke*J+Pe*D+We*se+Fe*_e,ue[15]=Ke*Z+Pe*X+We*fe+Fe*ye,this._identityCalculated=!1,this}function x(O){var U=O.props;return this.transform(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15])}function b(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function E(O){for(var U=0;U<16;){if(O.props[U]!==this.props[U])return!1;U+=1}return!0}function S(O){var U;for(U=0;U<16;U+=1)O.props[U]=this.props[U];return O}function k(O){var U;for(U=0;U<16;U+=1)this.props[U]=O[U]}function T(O,U,J){return{x:O*this.props[0]+U*this.props[4]+J*this.props[8]+this.props[12],y:O*this.props[1]+U*this.props[5]+J*this.props[9]+this.props[13],z:O*this.props[2]+U*this.props[6]+J*this.props[10]+this.props[14]}}function j(O,U,J){return O*this.props[0]+U*this.props[4]+J*this.props[8]+this.props[12]}function A(O,U,J){return O*this.props[1]+U*this.props[5]+J*this.props[9]+this.props[13]}function C(O,U,J){return O*this.props[2]+U*this.props[6]+J*this.props[10]+this.props[14]}function N(){var O=this.props[0]*this.props[5]-this.props[1]*this.props[4],U=this.props[5]/O,J=-this.props[1]/O,Z=-this.props[4]/O,z=this.props[0]/O,B=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/O,D=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/O,X=new Matrix;return X.props[0]=U,X.props[1]=J,X.props[4]=Z,X.props[5]=z,X.props[12]=B,X.props[13]=D,X}function V(O){var U=this.getInverseMatrix();return U.applyToPointArray(O[0],O[1],O[2]||0)}function I(O){var U,J=O.length,Z=[];for(U=0;U<J;U+=1)Z[U]=V(O[U]);return Z}function G(O,U,J){var Z=createTypedArray("float32",6);if(this.isIdentity())Z[0]=O[0],Z[1]=O[1],Z[2]=U[0],Z[3]=U[1],Z[4]=J[0],Z[5]=J[1];else{var z=this.props[0],B=this.props[1],D=this.props[4],X=this.props[5],K=this.props[12],re=this.props[13];Z[0]=O[0]*z+O[1]*D+K,Z[1]=O[0]*B+O[1]*X+re,Z[2]=U[0]*z+U[1]*D+K,Z[3]=U[0]*B+U[1]*X+re,Z[4]=J[0]*z+J[1]*D+K,Z[5]=J[0]*B+J[1]*X+re}return Z}function R(O,U,J){var Z;return this.isIdentity()?Z=[O,U,J]:Z=[O*this.props[0]+U*this.props[4]+J*this.props[8]+this.props[12],O*this.props[1]+U*this.props[5]+J*this.props[9]+this.props[13],O*this.props[2]+U*this.props[6]+J*this.props[10]+this.props[14]],Z}function q(O,U){if(this.isIdentity())return O+","+U;var J=this.props;return Math.round((O*J[0]+U*J[4]+J[12])*100)/100+","+Math.round((O*J[1]+U*J[5]+J[13])*100)/100}function M(){for(var O=0,U=this.props,J="matrix3d(",Z=1e4;O<16;)J+=t(U[O]*Z)/Z,J+=O===15?")":",",O+=1;return J}function L(O){var U=1e4;return O<1e-6&&O>0||O>-1e-6&&O<0?t(O*U)/U:O}function H(){var O=this.props,U=L(O[0]),J=L(O[1]),Z=L(O[4]),z=L(O[5]),B=L(O[12]),D=L(O[13]);return"matrix("+U+","+J+","+Z+","+z+","+B+","+D+")"}return function(){this.reset=a,this.rotate=l,this.rotateX=o,this.rotateY=c,this.rotateZ=i,this.skew=y,this.skewFromAxis=_,this.shear=f,this.scale=u,this.setTransform=m,this.translate=p,this.transform=g,this.multiply=x,this.applyToPoint=T,this.applyToX=j,this.applyToY=A,this.applyToZ=C,this.applyToPointArray=R,this.applyToTriplePoints=G,this.applyToPointStringified=q,this.toCSS=M,this.to2dCSS=H,this.clone=S,this.cloneFromProps=k,this.equals=E,this.inversePoints=I,this.inversePoint=V,this.getInverseMatrix=N,this._t=this.transform,this.isIdentity=b,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(s)}var lottie={};function setLocation(s){setLocationHref(s)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(s){setSubframeEnabled(s)}function setPrefix(s){setIdPrefix(s)}function loadAnimation(s){return animationManager.loadAnimation(s)}function setQuality(s){if(typeof s=="string")switch(s){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(s)&&s>1&&setDefaultCurveSegments(s)}function inBrowser(){return typeof navigator<"u"}function installPlugin(s,r){s==="expressions"&&setExpressionsPlugin(r)}function getFactory(s){switch(s){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(s){for(var r=queryString.split("&"),n=0;n<r.length;n+=1){var t=r[n].split("=");if(decodeURIComponent(t[0])==s)return decodeURIComponent(t[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(s){}var ShapeModifiers=function(){var s={},r={};s.registerModifier=n,s.getModifier=t;function n(a,l){r[a]||(r[a]=l)}function t(a,l,o){return new r[a](l,o)}return s}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(s){if(!this.closed){s.sh.container.addDynamicProperty(s.sh);var r={shape:s.sh,data:s,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(r),this.addShapeToModifier(r),this._isAnimated&&s.setAsAnimated()}},ShapeModifier.prototype.init=function(s,r){this.shapes=[],this.elem=s,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,r),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(s,r){this.s=PropertyFactory.getProp(s,r.s,0,.01,this),this.e=PropertyFactory.getProp(s,r.e,0,.01,this),this.o=PropertyFactory.getProp(s,r.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=r.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(s){s.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(s,r,n,t,a){var l=[];r<=1?l.push({s,e:r}):s>=1?l.push({s:s-1,e:r-1}):(l.push({s,e:1}),l.push({s:0,e:r-1}));var o=[],c,i=l.length,f;for(c=0;c<i;c+=1)if(f=l[c],!(f.e*a<t||f.s*a>t+n)){var y,_;f.s*a<=t?y=0:y=(f.s*a-t)/n,f.e*a>=t+n?_=1:_=(f.e*a-t)/n,o.push([y,_])}return o.length||o.push([0,0]),o},TrimModifier.prototype.releasePathsData=function(s){var r,n=s.length;for(r=0;r<n;r+=1)segmentsLengthPool.release(s[r]);return s.length=0,s},TrimModifier.prototype.processShapes=function(s){var r,n;if(this._mdf||s){var t=this.o.v%360/360;if(t<0&&(t+=1),this.s.v>1?r=1+t:this.s.v<0?r=0+t:r=this.s.v+t,this.e.v>1?n=1+t:this.e.v<0?n=0+t:n=this.e.v+t,r>n){var a=r;r=n,n=a}r=Math.round(r*1e4)*1e-4,n=Math.round(n*1e4)*1e-4,this.sValue=r,this.eValue=n}else r=this.sValue,n=this.eValue;var l,o,c=this.shapes.length,i,f,y,_,u,m=0;if(n===r)for(o=0;o<c;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(n===1&&r===0||n===0&&r===1){if(this._mdf)for(o=0;o<c;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var p=[],g,x;for(o=0;o<c;o+=1)if(g=this.shapes[o],!g.shape._mdf&&!this._mdf&&!s&&this.m!==2)g.shape.paths=g.localShapeCollection;else{if(l=g.shape.paths,f=l._length,u=0,!g.shape._mdf&&g.pathsData.length)u=g.totalShapeLength;else{for(y=this.releasePathsData(g.pathsData),i=0;i<f;i+=1)_=bez.getSegmentsLength(l.shapes[i]),y.push(_),u+=_.totalLength;g.totalShapeLength=u,g.pathsData=y}m+=u,g.shape._mdf=!0}var b=r,E=n,S=0,k;for(o=c-1;o>=0;o-=1)if(g=this.shapes[o],g.shape._mdf){for(x=g.localShapeCollection,x.releaseShapes(),this.m===2&&c>1?(k=this.calculateShapeEdges(r,n,g.totalShapeLength,S,m),S+=g.totalShapeLength):k=[[b,E]],f=k.length,i=0;i<f;i+=1){b=k[i][0],E=k[i][1],p.length=0,E<=1?p.push({s:g.totalShapeLength*b,e:g.totalShapeLength*E}):b>=1?p.push({s:g.totalShapeLength*(b-1),e:g.totalShapeLength*(E-1)}):(p.push({s:g.totalShapeLength*b,e:g.totalShapeLength}),p.push({s:0,e:g.totalShapeLength*(E-1)}));var T=this.addShapes(g,p[0]);if(p[0].s!==p[0].e){if(p.length>1){var j=g.shape.paths.shapes[g.shape.paths._length-1];if(j.c){var A=T.pop();this.addPaths(T,x),T=this.addShapes(g,p[1],A)}else this.addPaths(T,x),T=this.addShapes(g,p[1])}this.addPaths(T,x)}}g.shape.paths=x}}},TrimModifier.prototype.addPaths=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)r.addShape(s[n])},TrimModifier.prototype.addSegment=function(s,r,n,t,a,l,o){a.setXYAt(r[0],r[1],"o",l),a.setXYAt(n[0],n[1],"i",l+1),o&&a.setXYAt(s[0],s[1],"v",l),a.setXYAt(t[0],t[1],"v",l+1)},TrimModifier.prototype.addSegmentFromArray=function(s,r,n,t){r.setXYAt(s[1],s[5],"o",n),r.setXYAt(s[2],s[6],"i",n+1),t&&r.setXYAt(s[0],s[4],"v",n),r.setXYAt(s[3],s[7],"v",n+1)},TrimModifier.prototype.addShapes=function(s,r,n){var t=s.pathsData,a=s.shape.paths.shapes,l,o=s.shape.paths._length,c,i,f=0,y,_,u,m,p=[],g,x=!0;for(n?(_=n._length,g=n._length):(n=shapePool.newElement(),_=0,g=0),p.push(n),l=0;l<o;l+=1){for(u=t[l].lengths,n.c=a[l].c,i=a[l].c?u.length:u.length+1,c=1;c<i;c+=1)if(y=u[c-1],f+y.addedLength<r.s)f+=y.addedLength,n.c=!1;else if(f>r.e){n.c=!1;break}else r.s<=f&&r.e>=f+y.addedLength?(this.addSegment(a[l].v[c-1],a[l].o[c-1],a[l].i[c],a[l].v[c],n,_,x),x=!1):(m=bez.getNewSegment(a[l].v[c-1],a[l].v[c],a[l].o[c-1],a[l].i[c],(r.s-f)/y.addedLength,(r.e-f)/y.addedLength,u[c-1]),this.addSegmentFromArray(m,n,_,x),x=!1,n.c=!1),f+=y.addedLength,_+=1;if(a[l].c&&u.length){if(y=u[c-1],f<=r.e){var b=u[c-1].addedLength;r.s<=f&&r.e>=f+b?(this.addSegment(a[l].v[c-1],a[l].o[c-1],a[l].i[0],a[l].v[0],n,_,x),x=!1):(m=bez.getNewSegment(a[l].v[c-1],a[l].v[0],a[l].o[c-1],a[l].i[0],(r.s-f)/b,(r.e-f)/b,u[c-1]),this.addSegmentFromArray(m,n,_,x),x=!1,n.c=!1)}else n.c=!1;f+=y.addedLength,_+=1}if(n._length&&(n.setXYAt(n.v[g][0],n.v[g][1],"i",g),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),f>r.e)break;l<o-1&&(n=shapePool.newElement(),x=!0,p.push(n),_=0)}return p};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,r.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(s,r){var n=r/100,t=[0,0],a=s._length,l=0;for(l=0;l<a;l+=1)t[0]+=s.v[l][0],t[1]+=s.v[l][1];t[0]/=a,t[1]/=a;var o=shapePool.newElement();o.c=s.c;var c,i,f,y,_,u;for(l=0;l<a;l+=1)c=s.v[l][0]+(t[0]-s.v[l][0])*n,i=s.v[l][1]+(t[1]-s.v[l][1])*n,f=s.o[l][0]+(t[0]-s.o[l][0])*-n,y=s.o[l][1]+(t[1]-s.o[l][1])*-n,_=s.i[l][0]+(t[0]-s.i[l][0])*-n,u=s.i[l][1]+(t[1]-s.i[l][1])*-n,o.setTripleAt(c,i,f,y,_,u,l);return o},PuckerAndBloatModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.amount.v;if(o!==0){var c,i;for(n=0;n<t;n+=1){if(c=this.shapes[n],i=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!s))for(i.releaseShapes(),c.shape._mdf=!0,r=c.shape.paths.shapes,l=c.shape.paths._length,a=0;a<l;a+=1)i.addShape(this.processPath(r[a],o));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var s=[0,0];function r(i){var f=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||f,this.a&&i.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&i.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&i.skewFromAxis(-this.sk.v,this.sa.v),this.r?i.rotate(-this.r.v):i.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?i.translate(this.px.v,this.py.v,-this.pz.v):i.translate(this.px.v,this.py.v,0):i.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function n(i){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||i){var f;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var y,_;if(f=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(y=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/f,0),_=this.p.getValueAtTime(this.p.keyframes[0].t/f,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(y=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/f,0),_=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/f,0)):(y=this.p.pv,_=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/f,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){y=[],_=[];var u=this.px,m=this.py;u._caching.lastFrame+u.offsetTime<=u.keyframes[0].t?(y[0]=u.getValueAtTime((u.keyframes[0].t+.01)/f,0),y[1]=m.getValueAtTime((m.keyframes[0].t+.01)/f,0),_[0]=u.getValueAtTime(u.keyframes[0].t/f,0),_[1]=m.getValueAtTime(m.keyframes[0].t/f,0)):u._caching.lastFrame+u.offsetTime>=u.keyframes[u.keyframes.length-1].t?(y[0]=u.getValueAtTime(u.keyframes[u.keyframes.length-1].t/f,0),y[1]=m.getValueAtTime(m.keyframes[m.keyframes.length-1].t/f,0),_[0]=u.getValueAtTime((u.keyframes[u.keyframes.length-1].t-.01)/f,0),_[1]=m.getValueAtTime((m.keyframes[m.keyframes.length-1].t-.01)/f,0)):(y=[u.pv,m.pv],_[0]=u.getValueAtTime((u._caching.lastFrame+u.offsetTime-.01)/f,u.offsetTime),_[1]=m.getValueAtTime((m._caching.lastFrame+m.offsetTime-.01)/f,m.offsetTime))}else _=s,y=_;this.v.rotate(-Math.atan2(y[1]-_[1],y[0]-_[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function t(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function a(){}function l(i){this._addDynamicProperty(i),this.elem.addDynamicProperty(i),this._isDirty=!0}function o(i,f,y){if(this.elem=i,this.frameId=-1,this.propType="transform",this.data=f,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(y||i),f.p&&f.p.s?(this.px=PropertyFactory.getProp(i,f.p.x,0,0,this),this.py=PropertyFactory.getProp(i,f.p.y,0,0,this),f.p.z&&(this.pz=PropertyFactory.getProp(i,f.p.z,0,0,this))):this.p=PropertyFactory.getProp(i,f.p||{k:[0,0,0]},1,0,this),f.rx){if(this.rx=PropertyFactory.getProp(i,f.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(i,f.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(i,f.rz,0,degToRads,this),f.or.k[0].ti){var _,u=f.or.k.length;for(_=0;_<u;_+=1)f.or.k[_].to=null,f.or.k[_].ti=null}this.or=PropertyFactory.getProp(i,f.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(i,f.r||{k:0},0,degToRads,this);f.sk&&(this.sk=PropertyFactory.getProp(i,f.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(i,f.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(i,f.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(i,f.s||{k:[100,100,100]},1,.01,this),f.o?this.o=PropertyFactory.getProp(i,f.o,0,.01,i):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}o.prototype={applyToMatrix:r,getValue:n,precalculateMatrix:t,autoOrient:a},extendPrototype([DynamicPropertyContainer],o),o.prototype.addDynamicProperty=l,o.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function c(i,f,y){return new o(i,f,y)}return{getTransformProperty:c}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(s,r.c,0,null,this),this.o=PropertyFactory.getProp(s,r.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(s,r.tr,this),this.so=PropertyFactory.getProp(s,r.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(s,r.tr.eo,0,.01,this),this.data=r,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(s,r,n,t,a,l){var o=l?-1:1,c=t.s.v[0]+(1-t.s.v[0])*(1-a),i=t.s.v[1]+(1-t.s.v[1])*(1-a);s.translate(t.p.v[0]*o*a,t.p.v[1]*o*a,t.p.v[2]),r.translate(-t.a.v[0],-t.a.v[1],t.a.v[2]),r.rotate(-t.r.v*o*a),r.translate(t.a.v[0],t.a.v[1],t.a.v[2]),n.translate(-t.a.v[0],-t.a.v[1],t.a.v[2]),n.scale(l?1/c:c,l?1/i:i),n.translate(t.a.v[0],t.a.v[1],t.a.v[2])},RepeaterModifier.prototype.init=function(s,r,n,t){for(this.elem=s,this.arr=r,this.pos=n,this.elemsData=t,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,r[n]);n>0;)n-=1,this._elements.unshift(r[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(s){var r,n=s.length;for(r=0;r<n;r+=1)s[r]._processed=!1,s[r].ty==="gr"&&this.resetElements(s[r].it)},RepeaterModifier.prototype.cloneElements=function(s){var r=JSON.parse(JSON.stringify(s));return this.resetElements(r),r},RepeaterModifier.prototype.changeGroupRender=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)s[n]._render=r,s[n].ty==="gr"&&this.changeGroupRender(s[n].it,r)},RepeaterModifier.prototype.processShapes=function(s){var r,n,t,a,l,o=!1;if(this._mdf||s){var c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var i={it:this.cloneElements(this._elements),ty:"gr"};i.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,i),this._groups.splice(0,0,i),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}l=0;var f;for(t=0;t<=this._groups.length-1;t+=1){if(f=l<c,this._groups[t]._render=f,this.changeGroupRender(this._groups[t].it,f),!f){var y=this.elemsData[t].it,_=y[y.length-1];_.transform.op.v!==0?(_.transform.op._mdf=!0,_.transform.op.v=0):_.transform.op._mdf=!1}l+=1}this._currentCopies=c;var u=this.o.v,m=u%1,p=u>0?Math.floor(u):Math.ceil(u),g=this.pMatrix.props,x=this.rMatrix.props,b=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var E=0;if(u>0){for(;E<p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),E+=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,m,!1),E+=m)}else if(u<0){for(;E>p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),E-=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-m,!0),E-=m)}t=this.data.m===1?0:this._currentCopies-1,a=this.data.m===1?1:-1,l=this._currentCopies;for(var S,k;l;){if(r=this.elemsData[t].it,n=r[r.length-1].transform.mProps.v.props,k=n.length,r[r.length-1].transform.mProps._mdf=!0,r[r.length-1].transform.op._mdf=!0,r[r.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(t/(this._currentCopies-1)),E!==0){for((t!==0&&a===1||t!==this._currentCopies-1&&a===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),this.matrix.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),S=0;S<k;S+=1)n[S]=this.matrix.props[S];this.matrix.reset()}else for(this.matrix.reset(),S=0;S<k;S+=1)n[S]=this.matrix.props[S];E+=1,l-=1,t+=a}}else for(l=this._currentCopies,t=0,a=1;l;)r=this.elemsData[t].it,n=r[r.length-1].transform.mProps.v.props,r[r.length-1].transform.mProps._mdf=!1,r[r.length-1].transform.op._mdf=!1,l-=1,t+=a;return o},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(s,r.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(s,r){var n=shapePool.newElement();n.c=s.c;var t,a=s._length,l,o,c,i,f,y,_=0,u,m,p,g,x,b;for(t=0;t<a;t+=1)l=s.v[t],c=s.o[t],o=s.i[t],l[0]===c[0]&&l[1]===c[1]&&l[0]===o[0]&&l[1]===o[1]?(t===0||t===a-1)&&!s.c?(n.setTripleAt(l[0],l[1],c[0],c[1],o[0],o[1],_),_+=1):(t===0?i=s.v[a-1]:i=s.v[t-1],f=Math.sqrt(Math.pow(l[0]-i[0],2)+Math.pow(l[1]-i[1],2)),y=f?Math.min(f/2,r)/f:0,x=l[0]+(i[0]-l[0])*y,u=x,b=l[1]-(l[1]-i[1])*y,m=b,p=u-(u-l[0])*roundCorner,g=m-(m-l[1])*roundCorner,n.setTripleAt(u,m,p,g,x,b,_),_+=1,t===a-1?i=s.v[0]:i=s.v[t+1],f=Math.sqrt(Math.pow(l[0]-i[0],2)+Math.pow(l[1]-i[1],2)),y=f?Math.min(f/2,r)/f:0,p=l[0]+(i[0]-l[0])*y,u=p,g=l[1]+(i[1]-l[1])*y,m=g,x=u-(u-l[0])*roundCorner,b=m-(m-l[1])*roundCorner,n.setTripleAt(u,m,p,g,x,b,_),_+=1):(n.setTripleAt(s.v[t][0],s.v[t][1],s.o[t][0],s.o[t][1],s.i[t][0],s.i[t][1],_),_+=1);return n},RoundCornersModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.rd.v;if(o!==0){var c,i;for(n=0;n<t;n+=1){if(c=this.shapes[n],i=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!s))for(i.releaseShapes(),c.shape._mdf=!0,r=c.shape.paths.shapes,l=c.shape.paths._length,a=0;a<l;a+=1)i.addShape(this.processPath(r[a],o));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(s,r){return Math.abs(s-r)*1e5<=Math.min(Math.abs(s),Math.abs(r))}function floatZero(s){return Math.abs(s)<=1e-5}function lerp(s,r,n){return s*(1-n)+r*n}function lerpPoint(s,r,n){return[lerp(s[0],r[0],n),lerp(s[1],r[1],n)]}function quadRoots(s,r,n){if(s===0)return[];var t=r*r-4*s*n;if(t<0)return[];var a=-r/(2*s);if(t===0)return[a];var l=Math.sqrt(t)/(2*s);return[a-l,a+l]}function polynomialCoefficients(s,r,n,t){return[-s+3*r-3*n+t,3*s-6*r+3*n,-3*s+3*r,s]}function singlePoint(s){return new PolynomialBezier(s,s,s,s,!1)}function PolynomialBezier(s,r,n,t,a){a&&pointEqual(s,r)&&(r=lerpPoint(s,t,1/3)),a&&pointEqual(n,t)&&(n=lerpPoint(s,t,2/3));var l=polynomialCoefficients(s[0],r[0],n[0],t[0]),o=polynomialCoefficients(s[1],r[1],n[1],t[1]);this.a=[l[0],o[0]],this.b=[l[1],o[1]],this.c=[l[2],o[2]],this.d=[l[3],o[3]],this.points=[s,r,n,t]}PolynomialBezier.prototype.point=function(s){return[((this.a[0]*s+this.b[0])*s+this.c[0])*s+this.d[0],((this.a[1]*s+this.b[1])*s+this.c[1])*s+this.d[1]]},PolynomialBezier.prototype.derivative=function(s){return[(3*s*this.a[0]+2*this.b[0])*s+this.c[0],(3*s*this.a[1]+2*this.b[1])*s+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(s){var r=this.derivative(s);return Math.atan2(r[1],r[0])},PolynomialBezier.prototype.normalAngle=function(s){var r=this.derivative(s);return Math.atan2(r[0],r[1])},PolynomialBezier.prototype.inflectionPoints=function(){var s=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(s))return[];var r=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/s,n=r*r-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/s;if(n<0)return[];var t=Math.sqrt(n);return floatZero(t)?t>0&&t<1?[r]:[]:[r-t,r+t].filter(function(a){return a>0&&a<1})},PolynomialBezier.prototype.split=function(s){if(s<=0)return[singlePoint(this.points[0]),this];if(s>=1)return[this,singlePoint(this.points[this.points.length-1])];var r=lerpPoint(this.points[0],this.points[1],s),n=lerpPoint(this.points[1],this.points[2],s),t=lerpPoint(this.points[2],this.points[3],s),a=lerpPoint(r,n,s),l=lerpPoint(n,t,s),o=lerpPoint(a,l,s);return[new PolynomialBezier(this.points[0],r,a,o,!0),new PolynomialBezier(o,l,t,this.points[3],!0)]};function extrema(s,r){var n=s.points[0][r],t=s.points[s.points.length-1][r];if(n>t){var a=t;t=n,n=a}for(var l=quadRoots(3*s.a[r],2*s.b[r],s.c[r]),o=0;o<l.length;o+=1)if(l[o]>0&&l[o]<1){var c=s.point(l[o])[r];c<n?n=c:c>t&&(t=c)}return{min:n,max:t}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var s=this.bounds();return{left:s.x.min,right:s.x.max,top:s.y.min,bottom:s.y.max,width:s.x.max-s.x.min,height:s.y.max-s.y.min,cx:(s.x.max+s.x.min)/2,cy:(s.y.max+s.y.min)/2}};function intersectData(s,r,n){var t=s.boundingBox();return{cx:t.cx,cy:t.cy,width:t.width,height:t.height,bez:s,t:(r+n)/2,t1:r,t2:n}}function splitData(s){var r=s.bez.split(.5);return[intersectData(r[0],s.t1,s.t),intersectData(r[1],s.t,s.t2)]}function boxIntersect(s,r){return Math.abs(s.cx-r.cx)*2<s.width+r.width&&Math.abs(s.cy-r.cy)*2<s.height+r.height}function intersectsImpl(s,r,n,t,a,l){if(boxIntersect(s,r)){if(n>=l||s.width<=t&&s.height<=t&&r.width<=t&&r.height<=t){a.push([s.t,r.t]);return}var o=splitData(s),c=splitData(r);intersectsImpl(o[0],c[0],n+1,t,a,l),intersectsImpl(o[0],c[1],n+1,t,a,l),intersectsImpl(o[1],c[0],n+1,t,a,l),intersectsImpl(o[1],c[1],n+1,t,a,l)}}PolynomialBezier.prototype.intersections=function(s,r,n){r===void 0&&(r=2),n===void 0&&(n=7);var t=[];return intersectsImpl(intersectData(this,0,1),intersectData(s,0,1),0,r,t,n),t},PolynomialBezier.shapeSegment=function(s,r){var n=(r+1)%s.length();return new PolynomialBezier(s.v[r],s.o[r],s.i[n],s.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(s,r){var n=(r+1)%s.length();return new PolynomialBezier(s.v[n],s.i[n],s.o[r],s.v[r],!0)};function crossProduct(s,r){return[s[1]*r[2]-s[2]*r[1],s[2]*r[0]-s[0]*r[2],s[0]*r[1]-s[1]*r[0]]}function lineIntersection(s,r,n,t){var a=[s[0],s[1],1],l=[r[0],r[1],1],o=[n[0],n[1],1],c=[t[0],t[1],1],i=crossProduct(crossProduct(a,l),crossProduct(o,c));return floatZero(i[2])?null:[i[0]/i[2],i[1]/i[2]]}function polarOffset(s,r,n){return[s[0]+Math.cos(r)*n,s[1]-Math.sin(r)*n]}function pointDistance(s,r){return Math.hypot(s[0]-r[0],s[1]-r[1])}function pointEqual(s,r){return floatEqual(s[0],r[0])&&floatEqual(s[1],r[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(s,r.s,0,null,this),this.frequency=PropertyFactory.getProp(s,r.r,0,null,this),this.pointsType=PropertyFactory.getProp(s,r.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(s,r,n,t,a,l,o){var c=n-Math.PI/2,i=n+Math.PI/2,f=r[0]+Math.cos(n)*t*a,y=r[1]-Math.sin(n)*t*a;s.setTripleAt(f,y,f+Math.cos(c)*l,y-Math.sin(c)*l,f+Math.cos(i)*o,y-Math.sin(i)*o,s.length())}function getPerpendicularVector(s,r){var n=[r[0]-s[0],r[1]-s[1]],t=-Math.PI*.5,a=[Math.cos(t)*n[0]-Math.sin(t)*n[1],Math.sin(t)*n[0]+Math.cos(t)*n[1]];return a}function getProjectingAngle(s,r){var n=r===0?s.length()-1:r-1,t=(r+1)%s.length(),a=s.v[n],l=s.v[t],o=getPerpendicularVector(a,l);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function zigZagCorner(s,r,n,t,a,l,o){var c=getProjectingAngle(r,n),i=r.v[n%r._length],f=r.v[n===0?r._length-1:n-1],y=r.v[(n+1)%r._length],_=l===2?Math.sqrt(Math.pow(i[0]-f[0],2)+Math.pow(i[1]-f[1],2)):0,u=l===2?Math.sqrt(Math.pow(i[0]-y[0],2)+Math.pow(i[1]-y[1],2)):0;setPoint(s,r.v[n%r._length],c,o,t,u/((a+1)*2),_/((a+1)*2))}function zigZagSegment(s,r,n,t,a,l){for(var o=0;o<t;o+=1){var c=(o+1)/(t+1),i=a===2?Math.sqrt(Math.pow(r.points[3][0]-r.points[0][0],2)+Math.pow(r.points[3][1]-r.points[0][1],2)):0,f=r.normalAngle(c),y=r.point(c);setPoint(s,y,f,l,n,i/((t+1)*2),i/((t+1)*2)),l=-l}return l}ZigZagModifier.prototype.processPath=function(s,r,n,t){var a=s._length,l=shapePool.newElement();if(l.c=s.c,s.c||(a-=1),a===0)return l;var o=-1,c=PolynomialBezier.shapeSegment(s,0);zigZagCorner(l,s,0,r,n,t,o);for(var i=0;i<a;i+=1)o=zigZagSegment(l,c,r,n,t,-o),i===a-1&&!s.c?c=null:c=PolynomialBezier.shapeSegment(s,(i+1)%a),zigZagCorner(l,s,i+1,r,n,t,o);return l},ZigZagModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),i=this.pointsType.v;if(o!==0){var f,y;for(n=0;n<t;n+=1){if(f=this.shapes[n],y=f.localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!s))for(y.releaseShapes(),f.shape._mdf=!0,r=f.shape.paths.shapes,l=f.shape.paths._length,a=0;a<l;a+=1)y.addShape(this.processPath(r[a],o,c,i));f.shape.paths=f.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(s,r,n){var t=Math.atan2(r[0]-s[0],r[1]-s[1]);return[polarOffset(s,t,n),polarOffset(r,t,n)]}function offsetSegment(s,r){var n,t,a,l,o,c,i;i=linearOffset(s.points[0],s.points[1],r),n=i[0],t=i[1],i=linearOffset(s.points[1],s.points[2],r),a=i[0],l=i[1],i=linearOffset(s.points[2],s.points[3],r),o=i[0],c=i[1];var f=lineIntersection(n,t,a,l);f===null&&(f=t);var y=lineIntersection(o,c,a,l);return y===null&&(y=o),new PolynomialBezier(n,f,y,c)}function joinLines(s,r,n,t,a){var l=r.points[3],o=n.points[0];if(t===3||pointEqual(l,o))return l;if(t===2){var c=-r.tangentAngle(1),i=-n.tangentAngle(0)+Math.PI,f=lineIntersection(l,polarOffset(l,c+Math.PI/2,100),o,polarOffset(o,c+Math.PI/2,100)),y=f?pointDistance(f,l):pointDistance(l,o)/2,_=polarOffset(l,c,2*y*roundCorner);return s.setXYAt(_[0],_[1],"o",s.length()-1),_=polarOffset(o,i,2*y*roundCorner),s.setTripleAt(o[0],o[1],o[0],o[1],_[0],_[1],s.length()),o}var u=pointEqual(l,r.points[2])?r.points[0]:r.points[2],m=pointEqual(o,n.points[1])?n.points[3]:n.points[1],p=lineIntersection(u,l,o,m);return p&&pointDistance(p,l)<a?(s.setTripleAt(p[0],p[1],p[0],p[1],p[0],p[1],s.length()),p):l}function getIntersection(s,r){var n=s.intersections(r);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(s,r){var n=s.slice(),t=r.slice(),a=getIntersection(s[s.length-1],r[0]);return a&&(n[s.length-1]=s[s.length-1].split(a[0])[0],t[0]=r[0].split(a[1])[1]),s.length>1&&r.length>1&&(a=getIntersection(s[0],r[r.length-1]),a)?[[s[0].split(a[0])[0]],[r[r.length-1].split(a[1])[1]]]:[n,t]}function pruneIntersections(s){for(var r,n=1;n<s.length;n+=1)r=pruneSegmentIntersection(s[n-1],s[n]),s[n-1]=r[0],s[n]=r[1];return s.length>1&&(r=pruneSegmentIntersection(s[s.length-1],s[0]),s[s.length-1]=r[0],s[0]=r[1]),s}function offsetSegmentSplit(s,r){var n=s.inflectionPoints(),t,a,l,o;if(n.length===0)return[offsetSegment(s,r)];if(n.length===1||floatEqual(n[1],1))return l=s.split(n[0]),t=l[0],a=l[1],[offsetSegment(t,r),offsetSegment(a,r)];l=s.split(n[0]),t=l[0];var c=(n[1]-n[0])/(1-n[0]);return l=l[1].split(c),o=l[0],a=l[1],[offsetSegment(t,r),offsetSegment(o,r),offsetSegment(a,r)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,r.a,0,null,this),this.miterLimit=PropertyFactory.getProp(s,r.ml,0,null,this),this.lineJoin=r.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(s,r,n,t){var a=shapePool.newElement();a.c=s.c;var l=s.length();s.c||(l-=1);var o,c,i,f=[];for(o=0;o<l;o+=1)i=PolynomialBezier.shapeSegment(s,o),f.push(offsetSegmentSplit(i,r));if(!s.c)for(o=l-1;o>=0;o-=1)i=PolynomialBezier.shapeSegmentInverted(s,o),f.push(offsetSegmentSplit(i,r));f=pruneIntersections(f);var y=null,_=null;for(o=0;o<f.length;o+=1){var u=f[o];for(_&&(y=joinLines(a,_,u[0],n,t)),_=u[u.length-1],c=0;c<u.length;c+=1)i=u[c],y&&pointEqual(i.points[0],y)?a.setXYAt(i.points[1][0],i.points[1][1],"o",a.length()-1):a.setTripleAt(i.points[0][0],i.points[0][1],i.points[1][0],i.points[1][1],i.points[0][0],i.points[0][1],a.length()),a.setTripleAt(i.points[3][0],i.points[3][1],i.points[3][0],i.points[3][1],i.points[2][0],i.points[2][1],a.length()),y=i.points[3]}return f.length&&joinLines(a,_,f[0][0],n,t),a},OffsetPathModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.amount.v,c=this.miterLimit.v,i=this.lineJoin;if(o!==0){var f,y;for(n=0;n<t;n+=1){if(f=this.shapes[n],y=f.localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!s))for(y.releaseShapes(),f.shape._mdf=!0,r=f.shape.paths.shapes,l=f.shape.paths._length,a=0;a<l;a+=1)y.addShape(this.processPath(r[a],o,i,c));f.shape.paths=f.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(s){for(var r=s.fStyle?s.fStyle.split(" "):[],n="normal",t="normal",a=r.length,l,o=0;o<a;o+=1)switch(l=r[o].toLowerCase(),l){case"italic":t="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200";break}return{style:t,weight:s.fWeight||n}}var FontManager=function(){var s=5e3,r={w:0,size:0,shapes:[],data:{shapes:[]}},n=[];n=n.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var t=127988,a=917631,l=917601,o=917626,c=65039,i=8205,f=127462,y=127487,_=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function u(L){var H=L.split(","),O,U=H.length,J=[];for(O=0;O<U;O+=1)H[O]!=="sans-serif"&&H[O]!=="monospace"&&J.push(H[O]);return J.join(",")}function m(L,H){var O=createTag("span");O.setAttribute("aria-hidden",!0),O.style.fontFamily=H;var U=createTag("span");U.innerText="giItT1WQy@!-/#",O.style.position="absolute",O.style.left="-10000px",O.style.top="-10000px",O.style.fontSize="300px",O.style.fontVariant="normal",O.style.fontStyle="normal",O.style.fontWeight="normal",O.style.letterSpacing="0",O.appendChild(U),document.body.appendChild(O);var J=U.offsetWidth;return U.style.fontFamily=u(L)+", "+H,{node:U,w:J,parent:O}}function p(){var L,H=this.fonts.length,O,U,J=H;for(L=0;L<H;L+=1)this.fonts[L].loaded?J-=1:this.fonts[L].fOrigin==="n"||this.fonts[L].origin===0?this.fonts[L].loaded=!0:(O=this.fonts[L].monoCase.node,U=this.fonts[L].monoCase.w,O.offsetWidth!==U?(J-=1,this.fonts[L].loaded=!0):(O=this.fonts[L].sansCase.node,U=this.fonts[L].sansCase.w,O.offsetWidth!==U&&(J-=1,this.fonts[L].loaded=!0)),this.fonts[L].loaded&&(this.fonts[L].sansCase.parent.parentNode.removeChild(this.fonts[L].sansCase.parent),this.fonts[L].monoCase.parent.parentNode.removeChild(this.fonts[L].monoCase.parent)));J!==0&&Date.now()-this.initTime<s?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function g(L,H){var O=document.body&&H?"svg":"canvas",U,J=getFontProperties(L);if(O==="svg"){var Z=createNS("text");Z.style.fontSize="100px",Z.setAttribute("font-family",L.fFamily),Z.setAttribute("font-style",J.style),Z.setAttribute("font-weight",J.weight),Z.textContent="1",L.fClass?(Z.style.fontFamily="inherit",Z.setAttribute("class",L.fClass)):Z.style.fontFamily=L.fFamily,H.appendChild(Z),U=Z}else{var z=new OffscreenCanvas(500,500).getContext("2d");z.font=J.style+" "+J.weight+" 100px "+L.fFamily,U=z}function B(D){return O==="svg"?(U.textContent=D,U.getComputedTextLength()):U.measureText(D).width}return{measureText:B}}function x(L,H){if(!L){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=L.list;return}if(!document.body){this.isLoaded=!0,L.list.forEach(function(se){se.helper=g(se),se.cache={}}),this.fonts=L.list;return}var O=L.list,U,J=O.length,Z=J;for(U=0;U<J;U+=1){var z=!0,B,D;if(O[U].loaded=!1,O[U].monoCase=m(O[U].fFamily,"monospace"),O[U].sansCase=m(O[U].fFamily,"sans-serif"),!O[U].fPath)O[U].loaded=!0,Z-=1;else if(O[U].fOrigin==="p"||O[U].origin===3){if(B=document.querySelectorAll('style[f-forigin="p"][f-family="'+O[U].fFamily+'"], style[f-origin="3"][f-family="'+O[U].fFamily+'"]'),B.length>0&&(z=!1),z){var X=createTag("style");X.setAttribute("f-forigin",O[U].fOrigin),X.setAttribute("f-origin",O[U].origin),X.setAttribute("f-family",O[U].fFamily),X.type="text/css",X.innerText="@font-face {font-family: "+O[U].fFamily+"; font-style: normal; src: url('"+O[U].fPath+"');}",H.appendChild(X)}}else if(O[U].fOrigin==="g"||O[U].origin===1){for(B=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),D=0;D<B.length;D+=1)B[D].href.indexOf(O[U].fPath)!==-1&&(z=!1);if(z){var K=createTag("link");K.setAttribute("f-forigin",O[U].fOrigin),K.setAttribute("f-origin",O[U].origin),K.type="text/css",K.rel="stylesheet",K.href=O[U].fPath,document.body.appendChild(K)}}else if(O[U].fOrigin==="t"||O[U].origin===2){for(B=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),D=0;D<B.length;D+=1)O[U].fPath===B[D].src&&(z=!1);if(z){var re=createTag("link");re.setAttribute("f-forigin",O[U].fOrigin),re.setAttribute("f-origin",O[U].origin),re.setAttribute("rel","stylesheet"),re.setAttribute("href",O[U].fPath),H.appendChild(re)}}O[U].helper=g(O[U],H),O[U].cache={},this.fonts.push(O[U])}Z===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function b(L){if(L){this.chars||(this.chars=[]);var H,O=L.length,U,J=this.chars.length,Z;for(H=0;H<O;H+=1){for(U=0,Z=!1;U<J;)this.chars[U].style===L[H].style&&this.chars[U].fFamily===L[H].fFamily&&this.chars[U].ch===L[H].ch&&(Z=!0),U+=1;Z||(this.chars.push(L[H]),J+=1)}}}function E(L,H,O){for(var U=0,J=this.chars.length;U<J;){if(this.chars[U].ch===L&&this.chars[U].style===H&&this.chars[U].fFamily===O)return this.chars[U];U+=1}return(typeof L=="string"&&L.charCodeAt(0)!==13||!L)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",L,H,O)),r}function S(L,H,O){var U=this.getFontByName(H),J=L;if(!U.cache[J]){var Z=U.helper;if(L===" "){var z=Z.measureText("|"+L+"|"),B=Z.measureText("||");U.cache[J]=(z-B)/100}else U.cache[J]=Z.measureText(L)/100}return U.cache[J]*O}function k(L){for(var H=0,O=this.fonts.length;H<O;){if(this.fonts[H].fName===L)return this.fonts[H];H+=1}return this.fonts[0]}function T(L){var H=0,O=L.charCodeAt(0);if(O>=55296&&O<=56319){var U=L.charCodeAt(1);U>=56320&&U<=57343&&(H=(O-55296)*1024+U-56320+65536)}return H}function j(L,H){var O=L.toString(16)+H.toString(16);return _.indexOf(O)!==-1}function A(L){return L===i}function C(L){return L===c}function N(L){var H=T(L);return H>=f&&H<=y}function V(L){return N(L.substr(0,2))&&N(L.substr(2,2))}function I(L){return n.indexOf(L)!==-1}function G(L,H){var O=T(L.substr(H,2));if(O!==t)return!1;var U=0;for(H+=2;U<5;){if(O=T(L.substr(H,2)),O<l||O>o)return!1;U+=1,H+=2}return T(L.substr(H,2))===a}function R(){this.isLoaded=!0}var q=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};q.isModifier=j,q.isZeroWidthJoiner=A,q.isFlagEmoji=V,q.isRegionalCode=N,q.isCombinedCharacter=I,q.isRegionalFlag=G,q.isVariationSelector=C,q.BLACK_FLAG_CODE_POINT=t;var M={addChars:b,addFonts:x,getCharData:E,getFontByName:k,measureText:S,checkLoadedFonts:p,setIsLoaded:R};return q.prototype=M,q}();function SlotManager(s){this.animationData=s}SlotManager.prototype.getProp=function(s){return this.animationData.slots&&this.animationData.slots[s.sid]?Object.assign(s,this.animationData.slots[s.sid].p):s};function slotFactory(s){return new SlotManager(s)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(r){this.renderableComponents.indexOf(r)===-1&&this.renderableComponents.push(r)},removeRenderableComponent:function(r){this.renderableComponents.indexOf(r)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(r),1)},prepareRenderableFrame:function(r){this.checkLayerLimits(r)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(r){this.data.ip-this.data.st<=r&&this.data.op-this.data.st>r?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var r,n=this.renderableComponents.length;for(r=0;r<n;r+=1)this.renderableComponents[r].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var s={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(r){return s[r]||""}}();function SliderEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function AngleEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function ColorEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,1,0,n)}function PointEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,1,0,n)}function LayerIndexEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function MaskIndexEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function CheckboxEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(s,r){var n=s.ef||[];this.effectElements=[];var t,a=n.length,l;for(t=0;t<a;t+=1)l=new GroupEffect(n[t],r),this.effectElements.push(l)}function GroupEffect(s,r){this.init(s,r)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(s,r){this.data=s,this.effectElements=[],this.initDynamicPropertyContainer(r);var n,t=this.data.ef.length,a,l=this.data.ef;for(n=0;n<t;n+=1){switch(a=null,l[n].ty){case 0:a=new SliderEffect(l[n],r,this);break;case 1:a=new AngleEffect(l[n],r,this);break;case 2:a=new ColorEffect(l[n],r,this);break;case 3:a=new PointEffect(l[n],r,this);break;case 4:case 7:a=new CheckboxEffect(l[n],r,this);break;case 10:a=new LayerIndexEffect(l[n],r,this);break;case 11:a=new MaskIndexEffect(l[n],r,this);break;case 5:a=new EffectsManager(l[n],r);break;default:a=new NoValueEffect(l[n]);break}a&&this.effectElements.push(a)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var r=0,n=this.data.masksProperties.length;r<n;){if(this.data.masksProperties[r].mode!=="n"&&this.data.masksProperties[r].cl!==!1)return!0;r+=1}return!1},initExpressions:function(){var r=getExpressionInterfaces();if(r){var n=r("layer"),t=r("effects"),a=r("shape"),l=r("text"),o=r("comp");this.layerInterface=n(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var c=t.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(c),this.data.ty===0||this.data.xt?this.compInterface=o(this):this.data.ty===4?(this.layerInterface.shapeInterface=a(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=l(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var r=getBlendMode(this.data.bm),n=this.baseElement||this.layerElement;n.style["mix-blend-mode"]=r},initBaseData:function(r,n,t){this.globalData=n,this.comp=t,this.data=r,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(r,n){var t,a=this.dynamicProperties.length;for(t=0;t<a;t+=1)(n||this._isParent&&this.dynamicProperties[t].propType==="transform")&&(this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&this.dynamicProperties.push(r)}};function FootageElement(s,r,n){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(s.refId),this.footageData=r.imageLoader.getAsset(this.assetData),this.initBaseData(s,r,n)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var s=getExpressionInterfaces();if(s){var r=s("footage");this.layerInterface=r(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(s,r,n){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(s.refId),this.initBaseData(s,r,n),this._isPlaying=!1,this._canPlay=!1;var t=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(t),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,s.au&&s.au.lv?s.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(s){if(this.prepareRenderableFrame(s,!0),this.prepareProperties(s,!0),this.tm._placeholder)this._currentTime=s/this.data.sr;else{var r=this.tm.v;this._currentTime=r}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(s){this.audio.rate(s)},AudioElement.prototype.volume=function(s){this._volumeMultiplier=s,this._previousVolume=s*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(s){var r,n=this.layers.length,t;for(this.completeLayers=!0,r=n-1;r>=0;r-=1)this.elements[r]||(t=this.layers[r],t.ip-t.st<=s-this.layers[r].st&&t.op-t.st>s-this.layers[r].st&&this.buildItem(r)),this.completeLayers=this.elements[r]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(s){switch(s.ty){case 2:return this.createImage(s);case 0:return this.createComp(s);case 1:return this.createSolid(s);case 3:return this.createNull(s);case 4:return this.createShape(s);case 5:return this.createText(s);case 6:return this.createAudio(s);case 13:return this.createCamera(s);case 15:return this.createFootage(s);default:return this.createNull(s)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(s){return new AudioElement(s,this.globalData,this)},BaseRenderer.prototype.createFootage=function(s){return new FootageElement(s,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var s,r=this.layers.length;for(s=0;s<r;s+=1)this.buildItem(s);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(s){this.completeLayers=!1;var r,n=s.length,t,a=this.layers.length;for(r=0;r<n;r+=1)for(t=0;t<a;){if(this.layers[t].id===s[r].id){this.layers[t]=s[r];break}t+=1}},BaseRenderer.prototype.setProjectInterface=function(s){this.globalData.projectInterface=s},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(s,r,n){for(var t=this.elements,a=this.layers,l=0,o=a.length;l<o;)a[l].ind==r&&(!t[l]||t[l]===!0?(this.buildItem(l),this.addPendingElement(s)):(n.push(t[l]),t[l].setAsParent(),a[l].parent!==void 0?this.buildElementParenting(s,a[l].parent,n):s.setHierarchy(n))),l+=1},BaseRenderer.prototype.addPendingElement=function(s){this.pendingElements.push(s)},BaseRenderer.prototype.searchExtraCompositions=function(s){var r,n=s.length;for(r=0;r<n;r+=1)if(s[r].xt){var t=this.createComp(s[r]);t.initExpressions(),this.globalData.projectInterface.registerComposition(t)}},BaseRenderer.prototype.getElementById=function(s){var r,n=this.elements.length;for(r=0;r<n;r+=1)if(this.elements[r].data.ind===s)return this.elements[r];return null},BaseRenderer.prototype.getElementByPath=function(s){var r=s.shift(),n;if(typeof r=="number")n=this.elements[r];else{var t,a=this.elements.length;for(t=0;t<a;t+=1)if(this.elements[t].data.nm===r){n=this.elements[t];break}}return s.length===0?n:n.getElementByPath(s)},BaseRenderer.prototype.setupGlobalData=function(s,r){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(s),this.globalData.fontManager.addChars(s.chars),this.globalData.fontManager.addFonts(s.fonts,r),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=s.fr,this.globalData.nm=s.nm,this.globalData.compSize={w:s.w,h:s.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var r=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:r,localMat:r,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var r,n=this.finalTransform.mat,t=0,a=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;t<a;){if(this.hierarchy[t].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}t+=1}if(this.finalTransform._matMdf)for(r=this.finalTransform.mProp.v.props,n.cloneFromProps(r),t=0;t<a;t+=1)n.multiply(this.hierarchy[t].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var r=0,n=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;r<n;)this.localTransforms[r]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[r]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),r+=1;if(this.finalTransform._localMatMdf){var t=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(t),r=1;r<n;r+=1){var a=this.localTransforms[r].matrix;t.multiply(a)}t.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var l=this.finalTransform.localOpacity;for(r=0;r<n;r+=1)l*=this.localTransforms[r].opacity*.01;this.finalTransform.localOpacity=l}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var r=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(r.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var n=0,t=r.length;for(n=0;n<t;n+=1)this.localTransforms.push(r[n])}}},globalToLocal:function(r){var n=[];n.push(this.finalTransform);for(var t=!0,a=this.comp;t;)a.finalTransform?(a.data.hasMask&&n.splice(0,0,a.finalTransform),a=a.comp):t=!1;var l,o=n.length,c;for(l=0;l<o;l+=1)c=n[l].mat.applyToPointArray(0,0,0),r=[r[0]-c[0],r[1]-c[1],0];return r},mHelper:new Matrix};function MaskElement(s,r,n){this.data=s,this.element=r,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var t=this.globalData.defs,a,l=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(l),this.solidPath="";var o,c=this.masksProperties,i=0,f=[],y,_,u=createElementID(),m,p,g,x,b="clipPath",E="clip-path";for(a=0;a<l;a+=1)if((c[a].mode!=="a"&&c[a].mode!=="n"||c[a].inv||c[a].o.k!==100||c[a].o.x)&&(b="mask",E="mask"),(c[a].mode==="s"||c[a].mode==="i")&&i===0?(m=createNS("rect"),m.setAttribute("fill","#ffffff"),m.setAttribute("width",this.element.comp.data.w||0),m.setAttribute("height",this.element.comp.data.h||0),f.push(m)):m=null,o=createNS("path"),c[a].mode==="n")this.viewData[a]={op:PropertyFactory.getProp(this.element,c[a].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[a],3),elem:o,lastPath:""},t.appendChild(o);else{i+=1,o.setAttribute("fill",c[a].mode==="s"?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero");var S;if(c[a].x.k!==0?(b="mask",E="mask",x=PropertyFactory.getProp(this.element,c[a].x,0,null,this.element),S=createElementID(),p=createNS("filter"),p.setAttribute("id",S),g=createNS("feMorphology"),g.setAttribute("operator","erode"),g.setAttribute("in","SourceGraphic"),g.setAttribute("radius","0"),p.appendChild(g),t.appendChild(p),o.setAttribute("stroke",c[a].mode==="s"?"#000000":"#ffffff")):(g=null,x=null),this.storedData[a]={elem:o,x,expan:g,lastPath:"",lastOperator:"",filterId:S,lastRadius:0},c[a].mode==="i"){_=f.length;var k=createNS("g");for(y=0;y<_;y+=1)k.appendChild(f[y]);var T=createNS("mask");T.setAttribute("mask-type","alpha"),T.setAttribute("id",u+"_"+i),T.appendChild(o),t.appendChild(T),k.setAttribute("mask","url("+getLocationHref()+"#"+u+"_"+i+")"),f.length=0,f.push(k)}else f.push(o);c[a].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[a]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,c[a].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[a],3),invRect:m},this.viewData[a].prop.k||this.drawPath(c[a],this.viewData[a].prop.v,this.viewData[a])}for(this.maskElement=createNS(b),l=f.length,a=0;a<l;a+=1)this.maskElement.appendChild(f[a]);i>0&&(this.maskElement.setAttribute("id",u),this.element.maskedElement.setAttribute(E,"url("+getLocationHref()+"#"+u+")"),t.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(s){return this.viewData[s].prop},MaskElement.prototype.renderFrame=function(s){var r=this.element.finalTransform.mat,n,t=this.masksProperties.length;for(n=0;n<t;n+=1)if((this.viewData[n].prop._mdf||s)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||s)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),this.masksProperties[n].mode!=="n"&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||s)&&this.viewData[n].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||s))){var a=this.storedData[n].expan;this.storedData[n].x.v<0?(this.storedData[n].lastOperator!=="erode"&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[n].filterId+")")),a.setAttribute("radius",-this.storedData[n].x.v)):(this.storedData[n].lastOperator!=="dilate"&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",this.storedData[n].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var s="M0,0 ";return s+=" h"+this.globalData.compSize.w,s+=" v"+this.globalData.compSize.h,s+=" h-"+this.globalData.compSize.w,s+=" v-"+this.globalData.compSize.h+" ",s},MaskElement.prototype.drawPath=function(s,r,n){var t=" M"+r.v[0][0]+","+r.v[0][1],a,l;for(l=r._length,a=1;a<l;a+=1)t+=" C"+r.o[a-1][0]+","+r.o[a-1][1]+" "+r.i[a][0]+","+r.i[a][1]+" "+r.v[a][0]+","+r.v[a][1];if(r.c&&l>1&&(t+=" C"+r.o[a-1][0]+","+r.o[a-1][1]+" "+r.i[0][0]+","+r.i[0][1]+" "+r.v[0][0]+","+r.v[0][1]),n.lastPath!==t){var o="";n.elem&&(r.c&&(o=s.inv?this.solidPath+t:t),n.elem.setAttribute("d",o)),n.lastPath=t}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var s={};s.createFilter=r,s.createAlphaToLuminanceFilter=n;function r(t,a){var l=createNS("filter");return l.setAttribute("id",t),a!==!0&&(l.setAttribute("filterUnits","objectBoundingBox"),l.setAttribute("x","0%"),l.setAttribute("y","0%"),l.setAttribute("width","100%"),l.setAttribute("height","100%")),l}function n(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}return s}(),featureSupport=function(){var s={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(s.maskType=!1),/firefox/i.test(navigator.userAgent)&&(s.svgLumaHidden=!1),s}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(s){var r,n="SourceGraphic",t=s.data.ef?s.data.ef.length:0,a=createElementID(),l=filtersFactory.createFilter(a,!0),o=0;this.filters=[];var c;for(r=0;r<t;r+=1){c=null;var i=s.data.ef[r].ty;if(registeredEffects$1[i]){var f=registeredEffects$1[i].effect;c=new f(l,s.effectsManager.effectElements[r],s,idPrefix+o,n),n=idPrefix+o,registeredEffects$1[i].countsAsEffect&&(o+=1)}c&&this.filters.push(c)}o&&(s.globalData.defs.appendChild(l),s.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+a+")")),this.filters.length&&s.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(s){var r,n=this.filters.length;for(r=0;r<n;r+=1)this.filters[r].renderFrame(s)},SVGEffects.prototype.getEffects=function(s){var r,n=this.filters.length,t=[];for(r=0;r<n;r+=1)this.filters[r].type===s&&t.push(this.filters[r]);return t};function registerEffect$1(s,r,n){registeredEffects$1[s]={effect:r,countsAsEffect:n}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var r=null;if(this.data.td){this.matteMasks={};var n=createNS("g");n.setAttribute("id",this.layerId),n.appendChild(this.layerElement),r=n,this.globalData.defs.appendChild(n)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var t=createNS("clipPath"),a=createNS("path");a.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var l=createElementID();if(t.setAttribute("id",l),t.appendChild(a),this.globalData.defs.appendChild(t),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")"),o.appendChild(this.layerElement),this.transformedElement=o,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(r){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[r]){var n=this.layerId+"_"+r,t,a,l,o;if(r===1||r===3){var c=createNS("mask");c.setAttribute("id",n),c.setAttribute("mask-type",r===3?"luminance":"alpha"),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(l),this.globalData.defs.appendChild(c),!featureSupport.maskType&&r===1&&(c.setAttribute("mask-type","luminance"),t=createElementID(),a=filtersFactory.createFilter(t),this.globalData.defs.appendChild(a),a.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),o.appendChild(l),c.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(r===2){var i=createNS("mask");i.setAttribute("id",n),i.setAttribute("mask-type","alpha");var f=createNS("g");i.appendChild(f),t=createElementID(),a=filtersFactory.createFilter(t);var y=createNS("feComponentTransfer");y.setAttribute("in","SourceGraphic"),a.appendChild(y);var _=createNS("feFuncA");_.setAttribute("type","table"),_.setAttribute("tableValues","1.0 0.0"),y.appendChild(_),this.globalData.defs.appendChild(a);var u=createNS("rect");u.setAttribute("width",this.comp.data.w),u.setAttribute("height",this.comp.data.h),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("fill","#ffffff"),u.setAttribute("opacity","0"),f.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),f.appendChild(u),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),f.appendChild(l),featureSupport.maskType||(i.setAttribute("mask-type","luminance"),a.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),f.appendChild(u),o.appendChild(this.layerElement),f.appendChild(o)),this.globalData.defs.appendChild(i)}this.matteMasks[r]=n}return this.matteMasks[r]},setMatte:function(r){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+r+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(r){this.hierarchy=r},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var s={initElement:function(n,t,a){this.initFrame(),this.initBaseData(n,t,a),this.initTransform(n,t,a),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var n=this.baseElement||this.layerElement;n.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var n=this.baseElement||this.layerElement;n.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(n){this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(s)],RenderableDOMElement)})();function IImageElement(s,r,n){this.assetData=r.getAssetData(s.refId),this.assetData&&this.assetData.sid&&(this.assetData=r.slotManager.getProp(this.assetData)),this.initElement(s,r,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(s,r){this.elem=s,this.pos=r}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(r){var n,t=this.shapeModifiers.length;for(n=0;n<t;n+=1)this.shapeModifiers[n].addShape(r)},isShapeInAnimatedModifiers:function(r){for(var n=0,t=this.shapeModifiers.length;n<t;)if(this.shapeModifiers[n].isAnimatedWithShape(r))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var r,n=this.shapes.length;for(r=0;r<n;r+=1)this.shapes[r].sh.reset();n=this.shapeModifiers.length;var t;for(r=n-1;r>=0&&(t=this.shapeModifiers[r].processShapes(this._isFirstFrame),!t);r-=1);}},searchProcessedElement:function(r){for(var n=this.processedElements,t=0,a=n.length;t<a;){if(n[t].elem===r)return n[t].pos;t+=1}return 0},addProcessedElement:function(r,n){for(var t=this.processedElements,a=t.length;a;)if(a-=1,t[a].elem===r){t[a].pos=n;return}t.push(new ProcessedElement(r,n))},prepareFrame:function(r){this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(s,r,n){this.caches=[],this.styles=[],this.transformers=s,this.lStr="",this.sh=n,this.lvl=r,this._isAnimated=!!n.k;for(var t=0,a=s.length;t<a;){if(s[t].mProps.dynamicProperties.length){this._isAnimated=!0;break}t+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(s,r){this.data=s,this.type=s.ty,this.d="",this.lvl=r,this._mdf=!1,this.closed=s.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(s,r,n,t){this.elem=s,this.frameId=-1,this.dataProps=createSizedArray(r.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",r.length?r.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(t);var a,l=r.length||0,o;for(a=0;a<l;a+=1)o=PropertyFactory.getProp(s,r[a].v,0,0,this),this.k=o.k||this.k,this.dataProps[a]={n:r[a].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(s){if(!(this.elem.globalData.frameId===this.frameId&&!s)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||s,this._mdf)){var r=0,n=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),r=0;r<n;r+=1)this.dataProps[r].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[r].p.v:this.dashArray[r]=this.dataProps[r].p.v:this.dashoffset[0]=this.dataProps[r].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,r.o,0,.01,this),this.w=PropertyFactory.getProp(s,r.w,0,null,this),this.d=new DashProperty(s,r.d||{},"svg",this),this.c=PropertyFactory.getProp(s,r.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,r.o,0,.01,this),this.c=PropertyFactory.getProp(s,r.c,1,255,this),this.style=n}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.style=n}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(s,r,n){this.data=r,this.c=createTypedArray("uint8c",r.p*4);var t=r.k.k[0].s?r.k.k[0].s.length-r.p*4:r.k.k.length-r.p*4;this.o=createTypedArray("float32",t),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=t,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(s,r.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(s,r){for(var n=0,t=this.o.length/2,a;n<t;){if(a=Math.abs(s[n*4]-s[r*4+n*2]),a>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var s=0,r=this.data.k.k.length;s<r;){if(!this.comparePoints(this.data.k.k[s].s,this.data.p))return!1;s+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(s){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||s){var r,n=this.data.p*4,t,a;for(r=0;r<n;r+=1)t=r%4===0?100:255,a=Math.round(this.prop.v[r]*t),this.c[r]!==a&&(this.c[r]=a,this._cmdf=!s);if(this.o.length)for(n=this.prop.v.length,r=this.data.p*4;r<n;r+=1)t=r%2===0?100:1,a=r%2===0?Math.round(this.prop.v[r]*100):this.prop.v[r],this.o[r-this.data.p*4]!==a&&(this.o[r-this.data.p*4]=a,this._omdf=!s);this._mdf=!s}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.initGradientData(s,r,n)}SVGGradientFillStyleData.prototype.initGradientData=function(s,r,n){this.o=PropertyFactory.getProp(s,r.o,0,.01,this),this.s=PropertyFactory.getProp(s,r.s,1,null,this),this.e=PropertyFactory.getProp(s,r.e,1,null,this),this.h=PropertyFactory.getProp(s,r.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(s,r.a||{k:0},0,degToRads,this),this.g=new GradientProperty(s,r.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,r),this.setGradientOpacity(r,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(s,r){var n=createElementID(),t=createNS(r.t===1?"linearGradient":"radialGradient");t.setAttribute("id",n),t.setAttribute("spreadMethod","pad"),t.setAttribute("gradientUnits","userSpaceOnUse");var a=[],l,o,c;for(c=r.g.p*4,o=0;o<c;o+=4)l=createNS("stop"),t.appendChild(l),a.push(l);s.setAttribute(r.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=t,this.cst=a},SVGGradientFillStyleData.prototype.setGradientOpacity=function(s,r){if(this.g._hasOpacity&&!this.g._collapsable){var n,t,a,l=createNS("mask"),o=createNS("path");l.appendChild(o);var c=createElementID(),i=createElementID();l.setAttribute("id",i);var f=createNS(s.t===1?"linearGradient":"radialGradient");f.setAttribute("id",c),f.setAttribute("spreadMethod","pad"),f.setAttribute("gradientUnits","userSpaceOnUse"),a=s.g.k.k[0].s?s.g.k.k[0].s.length:s.g.k.k.length;var y=this.stops;for(t=s.g.p*4;t<a;t+=2)n=createNS("stop"),n.setAttribute("stop-color","rgb(255,255,255)"),f.appendChild(n),y.push(n);o.setAttribute(s.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+c+")"),s.ty==="gs"&&(o.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),s.lj===1&&o.setAttribute("stroke-miterlimit",s.ml)),this.of=f,this.ms=l,this.ost=y,this.maskId=i,r.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(s,r.w,0,null,this),this.d=new DashProperty(s,r.d||{},"svg",this),this.initGradientData(s,r,n),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(s,r,n){this.transform={mProps:s,op:r,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(r,n,t,a){if(n===0)return"";var l=r.o,o=r.i,c=r.v,i,f=" M"+a.applyToPointStringified(c[0][0],c[0][1]);for(i=1;i<n;i+=1)f+=" C"+a.applyToPointStringified(l[i-1][0],l[i-1][1])+" "+a.applyToPointStringified(o[i][0],o[i][1])+" "+a.applyToPointStringified(c[i][0],c[i][1]);return t&&n&&(f+=" C"+a.applyToPointStringified(l[i-1][0],l[i-1][1])+" "+a.applyToPointStringified(o[0][0],o[0][1])+" "+a.applyToPointStringified(c[0][0],c[0][1]),f+="z"),f},SVGElementsRenderer=function(){var s=new Matrix,r=new Matrix,n={createRenderFunction:t};function t(_){switch(_.ty){case"fl":return c;case"gf":return f;case"gs":return i;case"st":return y;case"sh":case"el":case"rc":case"sr":return o;case"tr":return a;case"no":return l;default:return null}}function a(_,u,m){(m||u.transform.op._mdf)&&u.transform.container.setAttribute("opacity",u.transform.op.v),(m||u.transform.mProps._mdf)&&u.transform.container.setAttribute("transform",u.transform.mProps.v.to2dCSS())}function l(){}function o(_,u,m){var p,g,x,b,E,S,k=u.styles.length,T=u.lvl,j,A,C,N;for(S=0;S<k;S+=1){if(b=u.sh._mdf||m,u.styles[S].lvl<T){for(A=r.reset(),C=T-u.styles[S].lvl,N=u.transformers.length-1;!b&&C>0;)b=u.transformers[N].mProps._mdf||b,C-=1,N-=1;if(b)for(C=T-u.styles[S].lvl,N=u.transformers.length-1;C>0;)A.multiply(u.transformers[N].mProps.v),C-=1,N-=1}else A=s;if(j=u.sh.paths,g=j._length,b){for(x="",p=0;p<g;p+=1)E=j.shapes[p],E&&E._length&&(x+=buildShapeString(E,E._length,E.c,A));u.caches[S]=x}else x=u.caches[S];u.styles[S].d+=_.hd===!0?"":x,u.styles[S]._mdf=b||u.styles[S]._mdf}}function c(_,u,m){var p=u.style;(u.c._mdf||m)&&p.pElem.setAttribute("fill","rgb("+bmFloor(u.c.v[0])+","+bmFloor(u.c.v[1])+","+bmFloor(u.c.v[2])+")"),(u.o._mdf||m)&&p.pElem.setAttribute("fill-opacity",u.o.v)}function i(_,u,m){f(_,u,m),y(_,u,m)}function f(_,u,m){var p=u.gf,g=u.g._hasOpacity,x=u.s.v,b=u.e.v;if(u.o._mdf||m){var E=_.ty==="gf"?"fill-opacity":"stroke-opacity";u.style.pElem.setAttribute(E,u.o.v)}if(u.s._mdf||m){var S=_.t===1?"x1":"cx",k=S==="x1"?"y1":"cy";p.setAttribute(S,x[0]),p.setAttribute(k,x[1]),g&&!u.g._collapsable&&(u.of.setAttribute(S,x[0]),u.of.setAttribute(k,x[1]))}var T,j,A,C;if(u.g._cmdf||m){T=u.cst;var N=u.g.c;for(A=T.length,j=0;j<A;j+=1)C=T[j],C.setAttribute("offset",N[j*4]+"%"),C.setAttribute("stop-color","rgb("+N[j*4+1]+","+N[j*4+2]+","+N[j*4+3]+")")}if(g&&(u.g._omdf||m)){var V=u.g.o;for(u.g._collapsable?T=u.cst:T=u.ost,A=T.length,j=0;j<A;j+=1)C=T[j],u.g._collapsable||C.setAttribute("offset",V[j*2]+"%"),C.setAttribute("stop-opacity",V[j*2+1])}if(_.t===1)(u.e._mdf||m)&&(p.setAttribute("x2",b[0]),p.setAttribute("y2",b[1]),g&&!u.g._collapsable&&(u.of.setAttribute("x2",b[0]),u.of.setAttribute("y2",b[1])));else{var I;if((u.s._mdf||u.e._mdf||m)&&(I=Math.sqrt(Math.pow(x[0]-b[0],2)+Math.pow(x[1]-b[1],2)),p.setAttribute("r",I),g&&!u.g._collapsable&&u.of.setAttribute("r",I)),u.e._mdf||u.h._mdf||u.a._mdf||m){I||(I=Math.sqrt(Math.pow(x[0]-b[0],2)+Math.pow(x[1]-b[1],2)));var G=Math.atan2(b[1]-x[1],b[0]-x[0]),R=u.h.v;R>=1?R=.99:R<=-1&&(R=-.99);var q=I*R,M=Math.cos(G+u.a.v)*q+x[0],L=Math.sin(G+u.a.v)*q+x[1];p.setAttribute("fx",M),p.setAttribute("fy",L),g&&!u.g._collapsable&&(u.of.setAttribute("fx",M),u.of.setAttribute("fy",L))}}}function y(_,u,m){var p=u.style,g=u.d;g&&(g._mdf||m)&&g.dashStr&&(p.pElem.setAttribute("stroke-dasharray",g.dashStr),p.pElem.setAttribute("stroke-dashoffset",g.dashoffset[0])),u.c&&(u.c._mdf||m)&&p.pElem.setAttribute("stroke","rgb("+bmFloor(u.c.v[0])+","+bmFloor(u.c.v[1])+","+bmFloor(u.c.v[2])+")"),(u.o._mdf||m)&&p.pElem.setAttribute("stroke-opacity",u.o.v),(u.w._mdf||m)&&(p.pElem.setAttribute("stroke-width",u.w.v),p.msElem&&p.msElem.setAttribute("stroke-width",u.w.v))}return n}();function SVGShapeElement(s,r,n){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(s,r,n),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var s,r=this.shapes.length,n,t,a=this.stylesList.length,l,o=[],c=!1;for(t=0;t<a;t+=1){for(l=this.stylesList[t],c=!1,o.length=0,s=0;s<r;s+=1)n=this.shapes[s],n.styles.indexOf(l)!==-1&&(o.push(n),c=n._isAnimated||c);o.length>1&&c&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(s){var r,n=s.length;for(r=0;r<n;r+=1)s[r].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(s,r){var n,t=new SVGStyleData(s,r),a=t.pElem;if(s.ty==="st")n=new SVGStrokeStyleData(this,s,t);else if(s.ty==="fl")n=new SVGFillStyleData(this,s,t);else if(s.ty==="gf"||s.ty==="gs"){var l=s.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;n=new l(this,s,t),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),a.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))}else s.ty==="no"&&(n=new SVGNoStyleData(this,s,t));return(s.ty==="st"||s.ty==="gs")&&(a.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),a.setAttribute("fill-opacity","0"),s.lj===1&&a.setAttribute("stroke-miterlimit",s.ml)),s.r===2&&a.setAttribute("fill-rule","evenodd"),s.ln&&a.setAttribute("id",s.ln),s.cl&&a.setAttribute("class",s.cl),s.bm&&(a.style["mix-blend-mode"]=getBlendMode(s.bm)),this.stylesList.push(t),this.addToAnimatedContents(s,n),n},SVGShapeElement.prototype.createGroupElement=function(s){var r=new ShapeGroupData;return s.ln&&r.gr.setAttribute("id",s.ln),s.cl&&r.gr.setAttribute("class",s.cl),s.bm&&(r.gr.style["mix-blend-mode"]=getBlendMode(s.bm)),r},SVGShapeElement.prototype.createTransformElement=function(s,r){var n=TransformPropertyFactory.getTransformProperty(this,s,this),t=new SVGTransformData(n,n.o,r);return this.addToAnimatedContents(s,t),t},SVGShapeElement.prototype.createShapeElement=function(s,r,n){var t=4;s.ty==="rc"?t=5:s.ty==="el"?t=6:s.ty==="sr"&&(t=7);var a=ShapePropertyFactory.getShapeProp(this,s,t,this),l=new SVGShapeData(r,n,a);return this.shapes.push(l),this.addShapeToModifiers(l),this.addToAnimatedContents(s,l),l},SVGShapeElement.prototype.addToAnimatedContents=function(s,r){for(var n=0,t=this.animatedContents.length;n<t;){if(this.animatedContents[n].element===r)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(s),element:r,data:s})},SVGShapeElement.prototype.setElementStyles=function(s){var r=s.styles,n,t=this.stylesList.length;for(n=0;n<t;n+=1)this.stylesList[n].closed||r.push(this.stylesList[n])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,r=this.itemsData.length;for(s=0;s<r;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),r=this.dynamicProperties.length,s=0;s<r;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(s,r,n,t,a,l,o){var c=[].concat(l),i,f=s.length-1,y,_,u=[],m=[],p,g,x;for(i=f;i>=0;i-=1){if(x=this.searchProcessedElement(s[i]),x?r[i]=n[x-1]:s[i]._render=o,s[i].ty==="fl"||s[i].ty==="st"||s[i].ty==="gf"||s[i].ty==="gs"||s[i].ty==="no")x?r[i].style.closed=!1:r[i]=this.createStyleElement(s[i],a),s[i]._render&&r[i].style.pElem.parentNode!==t&&t.appendChild(r[i].style.pElem),u.push(r[i].style);else if(s[i].ty==="gr"){if(!x)r[i]=this.createGroupElement(s[i]);else for(_=r[i].it.length,y=0;y<_;y+=1)r[i].prevViewData[y]=r[i].it[y];this.searchShapes(s[i].it,r[i].it,r[i].prevViewData,r[i].gr,a+1,c,o),s[i]._render&&r[i].gr.parentNode!==t&&t.appendChild(r[i].gr)}else s[i].ty==="tr"?(x||(r[i]=this.createTransformElement(s[i],t)),p=r[i].transform,c.push(p)):s[i].ty==="sh"||s[i].ty==="rc"||s[i].ty==="el"||s[i].ty==="sr"?(x||(r[i]=this.createShapeElement(s[i],c,a)),this.setElementStyles(r[i])):s[i].ty==="tm"||s[i].ty==="rd"||s[i].ty==="ms"||s[i].ty==="pb"||s[i].ty==="zz"||s[i].ty==="op"?(x?(g=r[i],g.closed=!1):(g=ShapeModifiers.getModifier(s[i].ty),g.init(this,s[i]),r[i]=g,this.shapeModifiers.push(g)),m.push(g)):s[i].ty==="rp"&&(x?(g=r[i],g.closed=!0):(g=ShapeModifiers.getModifier(s[i].ty),r[i]=g,g.init(this,s,i,r),this.shapeModifiers.push(g),o=!1),m.push(g));this.addProcessedElement(s[i],i+1)}for(f=u.length,i=0;i<f;i+=1)u[i].closed=!0;for(f=m.length,i=0;i<f;i+=1)m[i].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var s,r=this.stylesList.length;for(s=0;s<r;s+=1)this.stylesList[s].reset();for(this.renderShape(),s=0;s<r;s+=1)(this.stylesList[s]._mdf||this._isFirstFrame)&&(this.stylesList[s].msElem&&(this.stylesList[s].msElem.setAttribute("d",this.stylesList[s].d),this.stylesList[s].d="M0 0"+this.stylesList[s].d),this.stylesList[s].pElem.setAttribute("d",this.stylesList[s].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var s,r=this.animatedContents.length,n;for(s=0;s<r;s+=1)n=this.animatedContents[s],(this._isFirstFrame||n.element._isAnimated)&&n.data!==!0&&n.fn(n.data,n.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(s,r,n,t,a,l){this.o=s,this.sw=r,this.sc=n,this.fc=t,this.m=a,this.p=l,this._mdf={o:!0,sw:!!r,sc:!!n,fc:!!t,m:!0,p:!0}}LetterProps.prototype.update=function(s,r,n,t,a,l){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==s&&(this.o=s,this._mdf.o=!0,o=!0),this.sw!==r&&(this.sw=r,this._mdf.sw=!0,o=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,o=!0),this.fc!==t&&(this.fc=t,this._mdf.fc=!0,o=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,o=!0),l.length&&(this.p[0]!==l[0]||this.p[1]!==l[1]||this.p[4]!==l[4]||this.p[5]!==l[5]||this.p[12]!==l[12]||this.p[13]!==l[13])&&(this.p=l,this._mdf.p=!0,o=!0),o};function TextProperty(s,r){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,r.d&&r.d.sid&&(r.d=s.globalData.slotManager.getProp(r.d)),this.data=r,this.elem=s,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(s,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n]);return s},TextProperty.prototype.setCurrentData=function(s){s.__complete||this.completeTextData(s),this.currentData=s,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(s){this.effectsSequence.push(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(s){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!s)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var r=this.currentData,n=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var t,a=this.effectsSequence.length,l=s||this.data.d.k[this.keysIndex].s;for(t=0;t<a;t+=1)n!==this.keysIndex?l=this.effectsSequence[t](l,l.t):l=this.effectsSequence[t](this.currentData,l.t);r!==l&&this.setCurrentData(l),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var s=this.data.d.k,r=this.elem.comp.renderedFrame,n=0,t=s.length;n<=t-1&&!(n===t-1||s[n+1].t>r);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(s){for(var r=[],n=0,t=s.length,a,l,o=!1,c=!1,i="";n<t;)o=c,c=!1,a=s.charCodeAt(n),i=s.charAt(n),FontManager.isCombinedCharacter(a)?o=!0:a>=55296&&a<=56319?FontManager.isRegionalFlag(s,n)?i=s.substr(n,14):(l=s.charCodeAt(n+1),l>=56320&&l<=57343&&(FontManager.isModifier(a,l)?(i=s.substr(n,2),o=!0):FontManager.isFlagEmoji(s.substr(n,4))?i=s.substr(n,4):i=s.substr(n,2))):a>56319?(l=s.charCodeAt(n+1),FontManager.isVariationSelector(a)&&(o=!0)):FontManager.isZeroWidthJoiner(a)&&(o=!0,c=!0),o?(r[r.length-1]+=i,o=!1):r.push(i),n+=i.length;return r},TextProperty.prototype.completeTextData=function(s){s.__complete=!0;var r=this.elem.globalData.fontManager,n=this.data,t=[],a,l,o,c=0,i,f=n.m.g,y=0,_=0,u=0,m=[],p=0,g=0,x,b,E=r.getFontByName(s.f),S,k=0,T=getFontProperties(E);s.fWeight=T.weight,s.fStyle=T.style,s.finalSize=s.s,s.finalText=this.buildFinalText(s.t),l=s.finalText.length,s.finalLineHeight=s.lh;var j=s.tr/1e3*s.finalSize,A;if(s.sz)for(var C=!0,N=s.sz[0],V=s.sz[1],I,G;C;){G=this.buildFinalText(s.t),I=0,p=0,l=G.length,j=s.tr/1e3*s.finalSize;var R=-1;for(a=0;a<l;a+=1)A=G[a].charCodeAt(0),o=!1,G[a]===" "?R=a:(A===13||A===3)&&(p=0,o=!0,I+=s.finalLineHeight||s.finalSize*1.2),r.chars?(S=r.getCharData(G[a],E.fStyle,E.fFamily),k=o?0:S.w*s.finalSize/100):k=r.measureText(G[a],s.f,s.finalSize),p+k>N&&G[a]!==" "?(R===-1?l+=1:a=R,I+=s.finalLineHeight||s.finalSize*1.2,G.splice(a,R===a?1:0,"\r"),R=-1,p=0):(p+=k,p+=j);I+=E.ascent*s.finalSize/100,this.canResize&&s.finalSize>this.minimumFontSize&&V<I?(s.finalSize-=1,s.finalLineHeight=s.finalSize*s.lh/s.s):(s.finalText=G,l=s.finalText.length,C=!1)}p=-j,k=0;var q=0,M;for(a=0;a<l;a+=1)if(o=!1,M=s.finalText[a],A=M.charCodeAt(0),A===13||A===3?(q=0,m.push(p),g=p>g?p:g,p=-2*j,i="",o=!0,u+=1):i=M,r.chars?(S=r.getCharData(M,E.fStyle,r.getFontByName(s.f).fFamily),k=o?0:S.w*s.finalSize/100):k=r.measureText(i,s.f,s.finalSize),M===" "?q+=k+j:(p+=k+j+q,q=0),t.push({l:k,an:k,add:y,n:o,anIndexes:[],val:i,line:u,animatorJustifyOffset:0}),f==2){if(y+=k,i===""||i===" "||a===l-1){for((i===""||i===" ")&&(y-=k);_<=a;)t[_].an=y,t[_].ind=c,t[_].extra=k,_+=1;c+=1,y=0}}else if(f==3){if(y+=k,i===""||a===l-1){for(i===""&&(y-=k);_<=a;)t[_].an=y,t[_].ind=c,t[_].extra=k,_+=1;y=0,c+=1}}else t[c].ind=c,t[c].extra=0,c+=1;if(s.l=t,g=p>g?p:g,m.push(p),s.sz)s.boxWidth=s.sz[0],s.justifyOffset=0;else switch(s.boxWidth=g,s.j){case 1:s.justifyOffset=-s.boxWidth;break;case 2:s.justifyOffset=-s.boxWidth/2;break;default:s.justifyOffset=0}s.lineWidths=m;var L=n.a,H,O;b=L.length;var U,J,Z=[];for(x=0;x<b;x+=1){for(H=L[x],H.a.sc&&(s.strokeColorAnim=!0),H.a.sw&&(s.strokeWidthAnim=!0),(H.a.fc||H.a.fh||H.a.fs||H.a.fb)&&(s.fillColorAnim=!0),J=0,U=H.s.b,a=0;a<l;a+=1)O=t[a],O.anIndexes[x]=J,(U==1&&O.val!==""||U==2&&O.val!==""&&O.val!==" "||U==3&&(O.n||O.val==" "||a==l-1)||U==4&&(O.n||a==l-1))&&(H.s.rn===1&&Z.push(J),J+=1);n.a[x].s.totalChars=J;var z=-1,B;if(H.s.rn===1)for(a=0;a<l;a+=1)O=t[a],z!=O.anIndexes[x]&&(z=O.anIndexes[x],B=Z.splice(Math.floor(Math.random()*Z.length),1)[0]),O.anIndexes[x]=B}s.yOffset=s.finalLineHeight||s.finalSize*1.2,s.ls=s.ls||0,s.ascent=E.ascent*s.finalSize/100},TextProperty.prototype.updateDocumentData=function(s,r){r=r===void 0?this.keysIndex:r;var n=this.copyData({},this.data.d.k[r].s);n=this.copyData(n,s),this.data.d.k[r].s=n,this.recalculate(r),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(s){var r=this.data.d.k[s].s;r.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(r)},TextProperty.prototype.canResizeFont=function(s){this.canResize=s,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(s){this.minimumFontSize=Math.floor(s)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var s=Math.max,r=Math.min,n=Math.floor;function t(l,o){this._currentTextLength=-1,this.k=!1,this.data=o,this.elem=l,this.comp=l.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(l),this.s=PropertyFactory.getProp(l,o.s||{k:0},0,0,this),"e"in o?this.e=PropertyFactory.getProp(l,o.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(l,o.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(l,o.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(l,o.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(l,o.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(l,o.a,0,.01,this),this.dynamicProperties.length||this.getValue()}t.prototype={getMult:function(o){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var c=0,i=0,f=1,y=1;this.ne.v>0?c=this.ne.v/100:i=-this.ne.v/100,this.xe.v>0?f=1-this.xe.v/100:y=1+this.xe.v/100;var _=BezierFactory.getBezierEasing(c,i,f,y).get,u=0,m=this.finalS,p=this.finalE,g=this.data.sh;if(g===2)p===m?u=o>=p?1:0:u=s(0,r(.5/(p-m)+(o-m)/(p-m),1)),u=_(u);else if(g===3)p===m?u=o>=p?0:1:u=1-s(0,r(.5/(p-m)+(o-m)/(p-m),1)),u=_(u);else if(g===4)p===m?u=0:(u=s(0,r(.5/(p-m)+(o-m)/(p-m),1)),u<.5?u*=2:u=1-2*(u-.5)),u=_(u);else if(g===5){if(p===m)u=0;else{var x=p-m;o=r(s(0,o+.5-m),p-m);var b=-x/2+o,E=x/2;u=Math.sqrt(1-b*b/(E*E))}u=_(u)}else g===6?(p===m?u=0:(o=r(s(0,o+.5-m),p-m),u=(1+Math.cos(Math.PI+Math.PI*2*o/(p-m)))/2),u=_(u)):(o>=n(m)&&(o-m<0?u=s(0,r(r(p,1)-(m-o),1)):u=s(0,r(p-o,1))),u=_(u));if(this.sm.v!==100){var S=this.sm.v*.01;S===0&&(S=1e-8);var k=.5-S*.5;u<k?u=0:(u=(u-k)/S,u>1&&(u=1))}return u*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&this.data.r===2&&(this.e.v=this._currentTextLength);var c=this.data.r===2?1:100/this.data.totalChars,i=this.o.v/c,f=this.s.v/c+i,y=this.e.v/c+i;if(f>y){var _=f;f=y,y=_}this.finalS=f,this.finalE=y}},extendPrototype([DynamicPropertyContainer],t);function a(l,o,c){return new t(l,o)}return{getTextSelectorProp:a}}();function TextAnimatorDataProperty(s,r,n){var t={propType:!1},a=PropertyFactory.getProp,l=r.a;this.a={r:l.r?a(s,l.r,0,degToRads,n):t,rx:l.rx?a(s,l.rx,0,degToRads,n):t,ry:l.ry?a(s,l.ry,0,degToRads,n):t,sk:l.sk?a(s,l.sk,0,degToRads,n):t,sa:l.sa?a(s,l.sa,0,degToRads,n):t,s:l.s?a(s,l.s,1,.01,n):t,a:l.a?a(s,l.a,1,0,n):t,o:l.o?a(s,l.o,0,.01,n):t,p:l.p?a(s,l.p,1,0,n):t,sw:l.sw?a(s,l.sw,0,0,n):t,sc:l.sc?a(s,l.sc,1,0,n):t,fc:l.fc?a(s,l.fc,1,0,n):t,fh:l.fh?a(s,l.fh,0,0,n):t,fs:l.fs?a(s,l.fs,0,.01,n):t,fb:l.fb?a(s,l.fb,0,.01,n):t,t:l.t?a(s,l.t,0,0,n):t},this.s=TextSelectorProp.getTextSelectorProp(s,r.s,n),this.s.t=r.s.t}function TextAnimatorProperty(s,r,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=s,this._renderType=r,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}TextAnimatorProperty.prototype.searchProperties=function(){var s,r=this._textData.a.length,n,t=PropertyFactory.getProp;for(s=0;s<r;s+=1)n=this._textData.a[s],this._animatorsData[s]=new TextAnimatorDataProperty(this._elem,n,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:t(this._elem,this._textData.p.a,0,0,this),f:t(this._elem,this._textData.p.f,0,0,this),l:t(this._elem,this._textData.p.l,0,0,this),r:t(this._elem,this._textData.p.r,0,0,this),p:t(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=t(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(s,r){if(this.lettersChangedFlag=r,!(!this._mdf&&!this._isFirstFrame&&!r&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var n=this._moreOptions.alignment.v,t=this._animatorsData,a=this._textData,l=this.mHelper,o=this._renderType,c=this.renderedLetters.length,i,f,y,_,u=s.l,m,p,g,x,b,E,S,k,T,j,A,C,N,V,I;if(this._hasMaskedPath){if(I=this._pathData.m,!this._pathData.n||this._pathData._mdf){var G=I.v;this._pathData.r.v&&(G=G.reverse()),m={tLength:0,segments:[]},_=G._length-1;var R;for(C=0,y=0;y<_;y+=1)R=bez.buildBezierData(G.v[y],G.v[y+1],[G.o[y][0]-G.v[y][0],G.o[y][1]-G.v[y][1]],[G.i[y+1][0]-G.v[y+1][0],G.i[y+1][1]-G.v[y+1][1]]),m.tLength+=R.segmentLength,m.segments.push(R),C+=R.segmentLength;y=_,I.v.c&&(R=bez.buildBezierData(G.v[y],G.v[0],[G.o[y][0]-G.v[y][0],G.o[y][1]-G.v[y][1]],[G.i[0][0]-G.v[0][0],G.i[0][1]-G.v[0][1]]),m.tLength+=R.segmentLength,m.segments.push(R),C+=R.segmentLength),this._pathData.pi=m}if(m=this._pathData.pi,p=this._pathData.f.v,S=0,E=1,x=0,b=!0,j=m.segments,p<0&&I.v.c)for(m.tLength<Math.abs(p)&&(p=-Math.abs(p)%m.tLength),S=j.length-1,T=j[S].points,E=T.length-1;p<0;)p+=T[E].partialLength,E-=1,E<0&&(S-=1,T=j[S].points,E=T.length-1);T=j[S].points,k=T[E-1],g=T[E],A=g.partialLength}_=u.length,i=0,f=0;var q=s.finalSize*1.2*.714,M=!0,L,H,O,U,J;U=t.length;var Z,z=-1,B,D,X,K=p,re=S,se=E,fe=-1,xe,he,_e,ye,ue,pe,ke,Ie,$="",te=this.defaultPropsArray,ne;if(s.j===2||s.j===1){var be=0,ve=0,je=s.j===2?-.5:-1,Re=0,Ge=!0;for(y=0;y<_;y+=1)if(u[y].n){for(be&&(be+=ve);Re<y;)u[Re].animatorJustifyOffset=be,Re+=1;be=0,Ge=!0}else{for(O=0;O<U;O+=1)L=t[O].a,L.t.propType&&(Ge&&s.j===2&&(ve+=L.t.v*je),H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),Z.length?be+=L.t.v*Z[0]*je:be+=L.t.v*Z*je);Ge=!1}for(be&&(be+=ve);Re<y;)u[Re].animatorJustifyOffset=be,Re+=1}for(y=0;y<_;y+=1){if(l.reset(),xe=1,u[y].n)i=0,f+=s.yOffset,f+=M?1:0,p=K,M=!1,this._hasMaskedPath&&(S=re,E=se,T=j[S].points,k=T[E-1],g=T[E],A=g.partialLength,x=0),$="",Ie="",pe="",ne="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(fe!==u[y].line){switch(s.j){case 1:p+=C-s.lineWidths[u[y].line];break;case 2:p+=(C-s.lineWidths[u[y].line])/2;break}fe=u[y].line}z!==u[y].ind&&(u[z]&&(p+=u[z].extra),p+=u[y].an/2,z=u[y].ind),p+=n[0]*u[y].an*.005;var Xe=0;for(O=0;O<U;O+=1)L=t[O].a,L.p.propType&&(H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),Z.length?Xe+=L.p.v[0]*Z[0]:Xe+=L.p.v[0]*Z),L.a.propType&&(H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),Z.length?Xe+=L.a.v[0]*Z[0]:Xe+=L.a.v[0]*Z);for(b=!0,this._pathData.a.v&&(p=u[0].an*.5+(C-this._pathData.f.v-u[0].an*.5-u[u.length-1].an*.5)*z/(_-1),p+=this._pathData.f.v);b;)x+A>=p+Xe||!T?(N=(p+Xe-x)/g.partialLength,D=k.point[0]+(g.point[0]-k.point[0])*N,X=k.point[1]+(g.point[1]-k.point[1])*N,l.translate(-n[0]*u[y].an*.005,-(n[1]*q)*.01),b=!1):T&&(x+=g.partialLength,E+=1,E>=T.length&&(E=0,S+=1,j[S]?T=j[S].points:I.v.c?(E=0,S=0,T=j[S].points):(x-=g.partialLength,T=null)),T&&(k=g,g=T[E],A=g.partialLength));B=u[y].an/2-u[y].add,l.translate(-B,0,0)}else B=u[y].an/2-u[y].add,l.translate(-B,0,0),l.translate(-n[0]*u[y].an*.005,-n[1]*q*.01,0);for(O=0;O<U;O+=1)L=t[O].a,L.t.propType&&(H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),(i!==0||s.j!==0)&&(this._hasMaskedPath?Z.length?p+=L.t.v*Z[0]:p+=L.t.v*Z:Z.length?i+=L.t.v*Z[0]:i+=L.t.v*Z));for(s.strokeWidthAnim&&(_e=s.sw||0),s.strokeColorAnim&&(s.sc?he=[s.sc[0],s.sc[1],s.sc[2]]:he=[0,0,0]),s.fillColorAnim&&s.fc&&(ye=[s.fc[0],s.fc[1],s.fc[2]]),O=0;O<U;O+=1)L=t[O].a,L.a.propType&&(H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),Z.length?l.translate(-L.a.v[0]*Z[0],-L.a.v[1]*Z[1],L.a.v[2]*Z[2]):l.translate(-L.a.v[0]*Z,-L.a.v[1]*Z,L.a.v[2]*Z));for(O=0;O<U;O+=1)L=t[O].a,L.s.propType&&(H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),Z.length?l.scale(1+(L.s.v[0]-1)*Z[0],1+(L.s.v[1]-1)*Z[1],1):l.scale(1+(L.s.v[0]-1)*Z,1+(L.s.v[1]-1)*Z,1));for(O=0;O<U;O+=1){if(L=t[O].a,H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),L.sk.propType&&(Z.length?l.skewFromAxis(-L.sk.v*Z[0],L.sa.v*Z[1]):l.skewFromAxis(-L.sk.v*Z,L.sa.v*Z)),L.r.propType&&(Z.length?l.rotateZ(-L.r.v*Z[2]):l.rotateZ(-L.r.v*Z)),L.ry.propType&&(Z.length?l.rotateY(L.ry.v*Z[1]):l.rotateY(L.ry.v*Z)),L.rx.propType&&(Z.length?l.rotateX(L.rx.v*Z[0]):l.rotateX(L.rx.v*Z)),L.o.propType&&(Z.length?xe+=(L.o.v*Z[0]-xe)*Z[0]:xe+=(L.o.v*Z-xe)*Z),s.strokeWidthAnim&&L.sw.propType&&(Z.length?_e+=L.sw.v*Z[0]:_e+=L.sw.v*Z),s.strokeColorAnim&&L.sc.propType)for(ue=0;ue<3;ue+=1)Z.length?he[ue]+=(L.sc.v[ue]-he[ue])*Z[0]:he[ue]+=(L.sc.v[ue]-he[ue])*Z;if(s.fillColorAnim&&s.fc){if(L.fc.propType)for(ue=0;ue<3;ue+=1)Z.length?ye[ue]+=(L.fc.v[ue]-ye[ue])*Z[0]:ye[ue]+=(L.fc.v[ue]-ye[ue])*Z;L.fh.propType&&(Z.length?ye=addHueToRGB(ye,L.fh.v*Z[0]):ye=addHueToRGB(ye,L.fh.v*Z)),L.fs.propType&&(Z.length?ye=addSaturationToRGB(ye,L.fs.v*Z[0]):ye=addSaturationToRGB(ye,L.fs.v*Z)),L.fb.propType&&(Z.length?ye=addBrightnessToRGB(ye,L.fb.v*Z[0]):ye=addBrightnessToRGB(ye,L.fb.v*Z))}}for(O=0;O<U;O+=1)L=t[O].a,L.p.propType&&(H=t[O].s,Z=H.getMult(u[y].anIndexes[O],a.a[O].s.totalChars),this._hasMaskedPath?Z.length?l.translate(0,L.p.v[1]*Z[0],-L.p.v[2]*Z[1]):l.translate(0,L.p.v[1]*Z,-L.p.v[2]*Z):Z.length?l.translate(L.p.v[0]*Z[0],L.p.v[1]*Z[1],-L.p.v[2]*Z[2]):l.translate(L.p.v[0]*Z,L.p.v[1]*Z,-L.p.v[2]*Z));if(s.strokeWidthAnim&&(pe=_e<0?0:_e),s.strokeColorAnim&&(ke="rgb("+Math.round(he[0]*255)+","+Math.round(he[1]*255)+","+Math.round(he[2]*255)+")"),s.fillColorAnim&&s.fc&&(Ie="rgb("+Math.round(ye[0]*255)+","+Math.round(ye[1]*255)+","+Math.round(ye[2]*255)+")"),this._hasMaskedPath){if(l.translate(0,-s.ls),l.translate(0,n[1]*q*.01+f,0),this._pathData.p.v){V=(g.point[1]-k.point[1])/(g.point[0]-k.point[0]);var Ke=Math.atan(V)*180/Math.PI;g.point[0]<k.point[0]&&(Ke+=180),l.rotate(-Ke*Math.PI/180)}l.translate(D,X,0),p-=n[0]*u[y].an*.005,u[y+1]&&z!==u[y+1].ind&&(p+=u[y].an/2,p+=s.tr*.001*s.finalSize)}else{switch(l.translate(i,f,0),s.ps&&l.translate(s.ps[0],s.ps[1]+s.ascent,0),s.j){case 1:l.translate(u[y].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[u[y].line]),0,0);break;case 2:l.translate(u[y].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[u[y].line])/2,0,0);break}l.translate(0,-s.ls),l.translate(B,0,0),l.translate(n[0]*u[y].an*.005,n[1]*q*.01,0),i+=u[y].l+s.tr*.001*s.finalSize}o==="html"?$=l.toCSS():o==="svg"?$=l.to2dCSS():te=[l.props[0],l.props[1],l.props[2],l.props[3],l.props[4],l.props[5],l.props[6],l.props[7],l.props[8],l.props[9],l.props[10],l.props[11],l.props[12],l.props[13],l.props[14],l.props[15]],ne=xe}c<=y?(J=new LetterProps(ne,pe,ke,Ie,$,te),this.renderedLetters.push(J),c+=1,this.lettersChangedFlag=!0):(J=this.renderedLetters[y],this.lettersChangedFlag=J.update(ne,pe,ke,Ie,$,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(s,r,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(s,r,n),this.textProperty=new TextProperty(this,s.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(s.t,this.renderType,this),this.initTransform(s,r,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange)},ITextElement.prototype.createPathShape=function(s,r){var n,t=r.length,a,l="";for(n=0;n<t;n+=1)r[n].ty==="sh"&&(a=r[n].ks.k,l+=buildShapeString(a,a.i.length,!0,s));return l},ITextElement.prototype.updateDocumentData=function(s,r){this.textProperty.updateDocumentData(s,r)},ITextElement.prototype.canResizeFont=function(s){this.textProperty.canResizeFont(s)},ITextElement.prototype.setMinimumFontSize=function(s){this.textProperty.setMinimumFontSize(s)},ITextElement.prototype.applyTextPropertiesToMatrix=function(s,r,n,t,a){switch(s.ps&&r.translate(s.ps[0],s.ps[1]+s.ascent,0),r.translate(0,-s.ls,0),s.j){case 1:r.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[n]),0,0);break;case 2:r.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[n])/2,0,0);break}r.translate(t,a,0)},ITextElement.prototype.buildColor=function(s){return"rgb("+Math.round(s[0]*255)+","+Math.round(s[1]*255)+","+Math.round(s[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(s,r,n){this.textSpans=[],this.renderType="svg",this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(s){for(var r=0,n=s.length,t=[],a="";r<n;)s[r]===String.fromCharCode(13)||s[r]===String.fromCharCode(3)?(t.push(a),a=""):a+=s[r],r+=1;return t.push(a),t},SVGTextLottieElement.prototype.buildShapeData=function(s,r){if(s.shapes&&s.shapes.length){var n=s.shapes[0];if(n.it){var t=n.it[n.it.length-1];t.s&&(t.s.k[0]=r,t.s.k[1]=r)}}return s},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var s,r,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var t=this.globalData.fontManager.getFontByName(n.f);if(t.fClass)this.layerElement.setAttribute("class",t.fClass);else{this.layerElement.setAttribute("font-family",t.fFamily);var a=n.fWeight,l=n.fStyle;this.layerElement.setAttribute("font-style",l),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",n.t);var o=n.l||[],c=!!this.globalData.fontManager.chars;r=o.length;var i,f=this.mHelper,y="",_=this.data.singleShape,u=0,m=0,p=!0,g=n.tr*.001*n.finalSize;if(_&&!c&&!n.sz){var x=this.textContainer,b="start";switch(n.j){case 1:b="end";break;case 2:b="middle";break;default:b="start";break}x.setAttribute("text-anchor",b),x.setAttribute("letter-spacing",g);var E=this.buildTextContents(n.finalText);for(r=E.length,m=n.ps?n.ps[1]+n.ascent:0,s=0;s<r;s+=1)i=this.textSpans[s].span||createNS("tspan"),i.textContent=E[s],i.setAttribute("x",0),i.setAttribute("y",m),i.style.display="inherit",x.appendChild(i),this.textSpans[s]||(this.textSpans[s]={span:null,glyph:null}),this.textSpans[s].span=i,m+=n.finalLineHeight;this.layerElement.appendChild(x)}else{var S=this.textSpans.length,k;for(s=0;s<r;s+=1){if(this.textSpans[s]||(this.textSpans[s]={span:null,childSpan:null,glyph:null}),!c||!_||s===0){if(i=S>s?this.textSpans[s].span:createNS(c?"g":"text"),S<=s){if(i.setAttribute("stroke-linecap","butt"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("stroke-miterlimit","4"),this.textSpans[s].span=i,c){var T=createNS("g");i.appendChild(T),this.textSpans[s].childSpan=T}this.textSpans[s].span=i,this.layerElement.appendChild(i)}i.style.display="inherit"}if(f.reset(),_&&(o[s].n&&(u=-g,m+=n.yOffset,m+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(n,f,o[s].line,u,m),u+=o[s].l||0,u+=g),c){k=this.globalData.fontManager.getCharData(n.finalText[s],t.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily);var j;if(k.t===1)j=new SVGCompElement(k.data,this.globalData,this);else{var A=emptyShapeData;k.data&&k.data.shapes&&(A=this.buildShapeData(k.data,n.finalSize)),j=new SVGShapeElement(A,this.globalData,this)}if(this.textSpans[s].glyph){var C=this.textSpans[s].glyph;this.textSpans[s].childSpan.removeChild(C.layerElement),C.destroy()}this.textSpans[s].glyph=j,j._debug=!0,j.prepareFrame(0),j.renderFrame(),this.textSpans[s].childSpan.appendChild(j.layerElement),k.t===1&&this.textSpans[s].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else _&&i.setAttribute("transform","translate("+f.props[12]+","+f.props[13]+")"),i.textContent=o[s].val,i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}_&&i&&i.setAttribute("d",y)}for(;s<this.textSpans.length;)this.textSpans[s].span.style.display="none",s+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var s=this.layerElement.getBBox();this.bbox={top:s.y,left:s.x,width:s.width,height:s.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var s,r=this.textSpans.length,n;for(this.renderedFrame=this.comp.renderedFrame,s=0;s<r;s+=1)n=this.textSpans[s].glyph,n&&(n.prepareFrame(this.comp.renderedFrame-this.data.st),n._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var s,r,n=this.textAnimator.renderedLetters,t=this.textProperty.currentData.l;r=t.length;var a,l,o;for(s=0;s<r;s+=1)t[s].n||(a=n[s],l=this.textSpans[s].span,o=this.textSpans[s].glyph,o&&o.renderFrame(),a._mdf.m&&l.setAttribute("transform",a.m),a._mdf.o&&l.setAttribute("opacity",a.o),a._mdf.sw&&l.setAttribute("stroke-width",a.sw),a._mdf.sc&&l.setAttribute("stroke",a.sc),a._mdf.fc&&l.setAttribute("fill",a.fc))}};function ISolidElement(s,r,n){this.initElement(s,r,n)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var s=createNS("rect");s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.layerElement.appendChild(s)};function NullElement(s,r,n){this.initFrame(),this.initBaseData(s,r,n),this.initFrame(),this.initTransform(s,r,n),this.initHierarchy()}NullElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(s){return new NullElement(s,this.globalData,this)},SVGRendererBase.prototype.createShape=function(s){return new SVGShapeElement(s,this.globalData,this)},SVGRendererBase.prototype.createText=function(s){return new SVGTextLottieElement(s,this.globalData,this)},SVGRendererBase.prototype.createImage=function(s){return new IImageElement(s,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(s){return new ISolidElement(s,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(s){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+s.w+" "+s.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",s.w),this.svgElement.setAttribute("height",s.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var r=this.globalData.defs;this.setupGlobalData(s,r),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=s;var n=createNS("clipPath"),t=createNS("rect");t.setAttribute("width",s.w),t.setAttribute("height",s.h),t.setAttribute("x",0),t.setAttribute("y",0);var a=createElementID();n.setAttribute("id",a),n.appendChild(t),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),r.appendChild(n),this.layers=s.layers,this.elements=createSizedArray(s.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var s,r=this.layers?this.layers.length:0;for(s=0;s<r;s+=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(s){var r=0,n=this.layers.length;for(r=0;r<n;r+=1)if(this.layers[r].ind===s)return r;return-1},SVGRendererBase.prototype.buildItem=function(s){var r=this.elements;if(!(r[s]||this.layers[s].ty===99)){r[s]=!0;var n=this.createItem(this.layers[s]);if(r[s]=n,getExpressionsPlugin()&&(this.layers[s].ty===0&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,s),this.layers[s].tt){var t="tp"in this.layers[s]?this.findIndexByInd(this.layers[s].tp):s-1;if(t===-1)return;if(!this.elements[t]||this.elements[t]===!0)this.buildItem(t),this.addPendingElement(n);else{var a=r[t],l=a.getMatte(this.layers[s].tt);n.setMatte(l)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();if(s.checkParenting(),s.data.tt)for(var r=0,n=this.elements.length;r<n;){if(this.elements[r]===s){var t="tp"in s.data?this.findIndexByInd(s.data.tp):r-1,a=this.elements[t],l=a.getMatte(this.layers[r].tt);s.setMatte(l);break}r+=1}}},SVGRendererBase.prototype.renderFrame=function(s){if(!(this.renderedFrame===s||this.destroyed)){s===null?s=this.renderedFrame:this.renderedFrame=s,this.globalData.frameNum=s,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=s,this.globalData._mdf=!1;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(s),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(s-this.layers[r].st);if(this.globalData._mdf)for(r=0;r<n;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(s,r){var n=s.getBaseElement();if(n){for(var t=0,a;t<r;)this.elements[t]&&this.elements[t]!==!0&&this.elements[t].getBaseElement()&&(a=this.elements[t].getBaseElement()),t+=1;a?this.layerElement.insertBefore(n,a):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(s,r,n){this.initFrame(),this.initBaseData(s,r,n),this.initTransform(s,r,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!r.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(s){if(this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=s/this.data.sr;else{var r=this.tm.v;r===this.data.op&&(r=this.data.op-1),this.renderedFrame=r}var n,t=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=t-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var s,r=this.layers.length;for(s=0;s<r;s+=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()},ICompElement.prototype.setElements=function(s){this.elements=s},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var s,r=this.layers.length;for(s=0;s<r;s+=1)this.elements[s]&&this.elements[s].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(s,r,n){this.layers=s.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,r,n),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function SVGRenderer(s,r){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(r&&r.title){var t=createNS("title"),a=createElementID();t.setAttribute("id",a),t.textContent=r.title,this.svgElement.appendChild(t),n+=a}if(r&&r.description){var l=createNS("desc"),o=createElementID();l.setAttribute("id",o),l.textContent=r.description,this.svgElement.appendChild(l),n+=" "+o}n&&this.svgElement.setAttribute("aria-labelledby",n);var c=createNS("defs");this.svgElement.appendChild(c);var i=createNS("g");this.svgElement.appendChild(i),this.layerElement=i,this.renderConfig={preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",progressiveLoad:r&&r.progressiveLoad||!1,hideOnTransparent:!(r&&r.hideOnTransparent===!1),viewBoxOnly:r&&r.viewBoxOnly||!1,viewBoxSize:r&&r.viewBoxSize||!1,className:r&&r.className||"",id:r&&r.id||"",focusable:r&&r.focusable,filterSize:{width:r&&r.filterSize&&r.filterSize.width||"100%",height:r&&r.filterSize&&r.filterSize.height||"100%",x:r&&r.filterSize&&r.filterSize.x||"0%",y:r&&r.filterSize&&r.filterSize.y||"0%"},width:r&&r.width,height:r&&r.height,runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:c,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(r){var n,t=r.length,a="_";for(n=0;n<t;n+=1)a+=r[n].transform.key+"_";var l=this.sequences[a];return l||(l={transforms:[].concat(r),finalTransform:new Matrix,_mdf:!1},this.sequences[a]=l,this.sequenceList.push(l)),l},processSequence:function(r,n){for(var t=0,a=r.transforms.length,l=n;t<a&&!n;){if(r.transforms[t].transform.mProps._mdf){l=!0;break}t+=1}if(l)for(r.finalTransform.reset(),t=a-1;t>=0;t-=1)r.finalTransform.multiply(r.transforms[t].transform.mProps.v);r._mdf=l},processSequences:function(r){var n,t=this.sequenceList.length;for(n=0;n<t;n+=1)this.processSequence(this.sequenceList[n],r)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var r="__lottie_element_luma_buffer",n=null,t=null,a=null;function l(){var i=createNS("svg"),f=createNS("filter"),y=createNS("feColorMatrix");return f.setAttribute("id",r),y.setAttribute("type","matrix"),y.setAttribute("color-interpolation-filters","sRGB"),y.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),f.appendChild(y),i.appendChild(f),i.setAttribute("id",r+"_svg"),featureSupport.svgLumaHidden&&(i.style.display="none"),i}function o(){n||(a=l(),document.body.appendChild(a),n=createTag("canvas"),t=n.getContext("2d"),t.filter="url(#"+r+")",t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1))}function c(i){return n||o(),n.width=i.width,n.height=i.height,t.filter="url(#"+r+")",n}return{load:o,get:c}};function createCanvas(s,r){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(s,r);var n=createTag("canvas");return n.width=s,n.height=r,n}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(s){var r,n=s.data.ef?s.data.ef.length:0;this.filters=[];var t;for(r=0;r<n;r+=1){t=null;var a=s.data.ef[r].ty;if(registeredEffects[a]){var l=registeredEffects[a].effect;t=new l(s.effectsManager.effectElements[r],s)}t&&this.filters.push(t)}this.filters.length&&s.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(s){var r,n=this.filters.length;for(r=0;r<n;r+=1)this.filters[r].renderFrame(s)},CVEffects.prototype.getEffects=function(s){var r,n=this.filters.length,t=[];for(r=0;r<n;r+=1)this.filters[r].type===s&&t.push(this.filters[r]);return t};function registerEffect(s,r){registeredEffects[s]={effect:r}}function CVMaskElement(s,r){this.data=s,this.element=r,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,t=this.masksProperties.length,a=!1;for(n=0;n<t;n+=1)this.masksProperties[n].mode!=="n"&&(a=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var s=this.element.finalTransform.mat,r=this.element.canvasContext,n,t=this.masksProperties.length,a,l,o;for(r.beginPath(),n=0;n<t;n+=1)if(this.masksProperties[n].mode!=="n"){this.masksProperties[n].inv&&(r.moveTo(0,0),r.lineTo(this.element.globalData.compSize.w,0),r.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),r.lineTo(0,this.element.globalData.compSize.h),r.lineTo(0,0)),o=this.viewData[n].v,a=s.applyToPointArray(o.v[0][0],o.v[0][1],0),r.moveTo(a[0],a[1]);var c,i=o._length;for(c=1;c<i;c+=1)l=s.applyToTriplePoints(o.o[c-1],o.i[c],o.v[c]),r.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);l=s.applyToTriplePoints(o.o[c-1],o.i[0],o.v[0]),r.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5])}this.element.globalData.renderer.save(!0),r.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var r=this.globalData.canvasContext,n=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(n);var t=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(t),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var r=this.globalData;if(r.blendMode!==this.data.bm){r.blendMode=this.data.bm;var n=getBlendMode(this.data.bm);r.canvasContext.globalCompositeOperation=n}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(r){r.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var r=this.buffers[0],n=r.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var r=this.buffers[1],n=r.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var t=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(t.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var a=assetLoader.getLumaCanvas(this.canvasContext.canvas),l=a.getContext("2d");l.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(a,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(r,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(r){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!r)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var n=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(n),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(n),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(s,r,n,t){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a=4;r.ty==="rc"?a=5:r.ty==="el"?a=6:r.ty==="sr"&&(a=7),this.sh=ShapePropertyFactory.getShapeProp(s,r,a,s);var l,o=n.length,c;for(l=0;l<o;l+=1)n[l].closed||(c={transforms:t.addTransformSequence(n[l].transforms),trNodes:[]},this.styledShapes.push(c),n[l].elements.push(c))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(s,r,n){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(s,r){var n={data:s,type:s.ty,preTransforms:this.transformsManager.addTransformSequence(r),transforms:[],elements:[],closed:s.hd===!0},t={};if(s.ty==="fl"||s.ty==="st"?(t.c=PropertyFactory.getProp(this,s.c,1,255,this),t.c.k||(n.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")")):(s.ty==="gf"||s.ty==="gs")&&(t.s=PropertyFactory.getProp(this,s.s,1,null,this),t.e=PropertyFactory.getProp(this,s.e,1,null,this),t.h=PropertyFactory.getProp(this,s.h||{k:0},0,.01,this),t.a=PropertyFactory.getProp(this,s.a||{k:0},0,degToRads,this),t.g=new GradientProperty(this,s.g,this)),t.o=PropertyFactory.getProp(this,s.o,0,.01,this),s.ty==="st"||s.ty==="gs"){if(n.lc=lineCapEnum[s.lc||2],n.lj=lineJoinEnum[s.lj||2],s.lj==1&&(n.ml=s.ml),t.w=PropertyFactory.getProp(this,s.w,0,null,this),t.w.k||(n.wi=t.w.v),s.d){var a=new DashProperty(this,s.d,"canvas",this);t.d=a,t.d.k||(n.da=t.d.dashArray,n.do=t.d.dashoffset[0])}}else n.r=s.r===2?"evenodd":"nonzero";return this.stylesList.push(n),t.style=n,t},CVShapeElement.prototype.createGroupElement=function(){var s={it:[],prevViewData:[]};return s},CVShapeElement.prototype.createTransformElement=function(s){var r={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,s.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,s,this)}};return r},CVShapeElement.prototype.createShapeElement=function(s){var r=new CVShapeData(this,s,this.stylesList,this.transformsManager);return this.shapes.push(r),this.addShapeToModifiers(r),r},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,r=this.itemsData.length;for(s=0;s<r;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),r=this.dynamicProperties.length,s=0;s<r;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(s){var r,n=this.stylesList.length;for(r=0;r<n;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.push(s)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var s,r=this.stylesList.length;for(s=0;s<r;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.pop()},CVShapeElement.prototype.closeStyles=function(s){var r,n=s.length;for(r=0;r<n;r+=1)s[r].closed=!0},CVShapeElement.prototype.searchShapes=function(s,r,n,t,a){var l,o=s.length-1,c,i,f=[],y=[],_,u,m,p=[].concat(a);for(l=o;l>=0;l-=1){if(_=this.searchProcessedElement(s[l]),_?r[l]=n[_-1]:s[l]._shouldRender=t,s[l].ty==="fl"||s[l].ty==="st"||s[l].ty==="gf"||s[l].ty==="gs")_?r[l].style.closed=!1:r[l]=this.createStyleElement(s[l],p),f.push(r[l].style);else if(s[l].ty==="gr"){if(!_)r[l]=this.createGroupElement(s[l]);else for(i=r[l].it.length,c=0;c<i;c+=1)r[l].prevViewData[c]=r[l].it[c];this.searchShapes(s[l].it,r[l].it,r[l].prevViewData,t,p)}else s[l].ty==="tr"?(_||(m=this.createTransformElement(s[l]),r[l]=m),p.push(r[l]),this.addTransformToStyleList(r[l])):s[l].ty==="sh"||s[l].ty==="rc"||s[l].ty==="el"||s[l].ty==="sr"?_||(r[l]=this.createShapeElement(s[l])):s[l].ty==="tm"||s[l].ty==="rd"||s[l].ty==="pb"||s[l].ty==="zz"||s[l].ty==="op"?(_?(u=r[l],u.closed=!1):(u=ShapeModifiers.getModifier(s[l].ty),u.init(this,s[l]),r[l]=u,this.shapeModifiers.push(u)),y.push(u)):s[l].ty==="rp"&&(_?(u=r[l],u.closed=!0):(u=ShapeModifiers.getModifier(s[l].ty),r[l]=u,u.init(this,s,l,r),this.shapeModifiers.push(u),t=!1),y.push(u));this.addProcessedElement(s[l],l+1)}for(this.removeTransformFromStyleList(),this.closeStyles(f),o=y.length,l=0;l<o;l+=1)y[l].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(s,r){(s._opMdf||r.op._mdf||this._isFirstFrame)&&(r.opacity=s.opacity,r.opacity*=r.op.v,r._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var s,r=this.stylesList.length,n,t,a,l,o,c,i=this.globalData.renderer,f=this.globalData.canvasContext,y,_;for(s=0;s<r;s+=1)if(_=this.stylesList[s],y=_.type,!((y==="st"||y==="gs")&&_.wi===0||!_.data._shouldRender||_.coOp===0||this.globalData.currentGlobalAlpha===0)){for(i.save(),o=_.elements,y==="st"||y==="gs"?(i.ctxStrokeStyle(y==="st"?_.co:_.grd),i.ctxLineWidth(_.wi),i.ctxLineCap(_.lc),i.ctxLineJoin(_.lj),i.ctxMiterLimit(_.ml||0)):i.ctxFillStyle(y==="fl"?_.co:_.grd),i.ctxOpacity(_.coOp),y!=="st"&&y!=="gs"&&f.beginPath(),i.ctxTransform(_.preTransforms.finalTransform.props),t=o.length,n=0;n<t;n+=1){for((y==="st"||y==="gs")&&(f.beginPath(),_.da&&(f.setLineDash(_.da),f.lineDashOffset=_.do)),c=o[n].trNodes,l=c.length,a=0;a<l;a+=1)c[a].t==="m"?f.moveTo(c[a].p[0],c[a].p[1]):c[a].t==="c"?f.bezierCurveTo(c[a].pts[0],c[a].pts[1],c[a].pts[2],c[a].pts[3],c[a].pts[4],c[a].pts[5]):f.closePath();(y==="st"||y==="gs")&&(i.ctxStroke(),_.da&&f.setLineDash(this.dashResetter))}y!=="st"&&y!=="gs"&&this.globalData.renderer.ctxFill(_.r),i.restore()}},CVShapeElement.prototype.renderShape=function(s,r,n,t){var a,l=r.length-1,o;for(o=s,a=l;a>=0;a-=1)r[a].ty==="tr"?(o=n[a].transform,this.renderShapeTransform(s,o)):r[a].ty==="sh"||r[a].ty==="el"||r[a].ty==="rc"||r[a].ty==="sr"?this.renderPath(r[a],n[a]):r[a].ty==="fl"?this.renderFill(r[a],n[a],o):r[a].ty==="st"?this.renderStroke(r[a],n[a],o):r[a].ty==="gf"||r[a].ty==="gs"?this.renderGradientFill(r[a],n[a],o):r[a].ty==="gr"?this.renderShape(o,r[a].it,n[a].it):r[a].ty;t&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(s,r){if(this._isFirstFrame||r._mdf||s.transforms._mdf){var n=s.trNodes,t=r.paths,a,l,o,c=t._length;n.length=0;var i=s.transforms.finalTransform;for(o=0;o<c;o+=1){var f=t.shapes[o];if(f&&f.v){for(l=f._length,a=1;a<l;a+=1)a===1&&n.push({t:"m",p:i.applyToPointArray(f.v[0][0],f.v[0][1],0)}),n.push({t:"c",pts:i.applyToTriplePoints(f.o[a-1],f.i[a],f.v[a])});l===1&&n.push({t:"m",p:i.applyToPointArray(f.v[0][0],f.v[0][1],0)}),f.c&&l&&(n.push({t:"c",pts:i.applyToTriplePoints(f.o[a-1],f.i[0],f.v[0])}),n.push({t:"z"}))}}s.trNodes=n}},CVShapeElement.prototype.renderPath=function(s,r){if(s.hd!==!0&&s._shouldRender){var n,t=r.styledShapes.length;for(n=0;n<t;n+=1)this.renderStyledShape(r.styledShapes[n],r.sh)}},CVShapeElement.prototype.renderFill=function(s,r,n){var t=r.style;(r.c._mdf||this._isFirstFrame)&&(t.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||n._opMdf||this._isFirstFrame)&&(t.coOp=r.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(s,r,n){var t=r.style,a;if(!t.grd||r.g._mdf||r.s._mdf||r.e._mdf||s.t!==1&&(r.h._mdf||r.a._mdf)){var l=this.globalData.canvasContext,o=r.s.v,c=r.e.v;if(s.t===1)a=l.createLinearGradient(o[0],o[1],c[0],c[1]);else{var i=Math.sqrt(Math.pow(o[0]-c[0],2)+Math.pow(o[1]-c[1],2)),f=Math.atan2(c[1]-o[1],c[0]-o[0]),y=r.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var _=i*y,u=Math.cos(f+r.a.v)*_+o[0],m=Math.sin(f+r.a.v)*_+o[1];a=l.createRadialGradient(u,m,0,o[0],o[1],i)}var p,g=s.g.p,x=r.g.c,b=1;for(p=0;p<g;p+=1)r.g._hasOpacity&&r.g._collapsable&&(b=r.g.o[p*2+1]),a.addColorStop(x[p*4]/100,"rgba("+x[p*4+1]+","+x[p*4+2]+","+x[p*4+3]+","+b+")");t.grd=a}t.coOp=r.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(s,r,n){var t=r.style,a=r.d;a&&(a._mdf||this._isFirstFrame)&&(t.da=a.dashArray,t.do=a.dashoffset[0]),(r.c._mdf||this._isFirstFrame)&&(t.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||n._opMdf||this._isFirstFrame)&&(t.coOp=r.o.v*n.opacity),(r.w._mdf||this._isFirstFrame)&&(t.wi=r.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(s,r,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var r=!1;s.fc?(r=!0,this.values.fill=this.buildColor(s.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=r;var n=!1;s.sc&&(n=!0,this.values.stroke=this.buildColor(s.sc),this.values.sWidth=s.sw);var t=this.globalData.fontManager.getFontByName(s.f),a,l,o=s.l,c=this.mHelper;this.stroke=n,this.values.fValue=s.finalSize+"px "+this.globalData.fontManager.getFontByName(s.f).fFamily,l=s.finalText.length;var i,f,y,_,u,m,p,g,x,b,E=this.data.singleShape,S=s.tr*.001*s.finalSize,k=0,T=0,j=!0,A=0;for(a=0;a<l;a+=1){i=this.globalData.fontManager.getCharData(s.finalText[a],t.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),f=i&&i.data||{},c.reset(),E&&o[a].n&&(k=-S,T+=s.yOffset,T+=j?1:0,j=!1),u=f.shapes?f.shapes[0].it:[],p=u.length,c.scale(s.finalSize/100,s.finalSize/100),E&&this.applyTextPropertiesToMatrix(s,c,o[a].line,k,T),x=createSizedArray(p-1);var C=0;for(m=0;m<p;m+=1)if(u[m].ty==="sh"){for(_=u[m].ks.k.i.length,g=u[m].ks.k,b=[],y=1;y<_;y+=1)y===1&&b.push(c.applyToX(g.v[0][0],g.v[0][1],0),c.applyToY(g.v[0][0],g.v[0][1],0)),b.push(c.applyToX(g.o[y-1][0],g.o[y-1][1],0),c.applyToY(g.o[y-1][0],g.o[y-1][1],0),c.applyToX(g.i[y][0],g.i[y][1],0),c.applyToY(g.i[y][0],g.i[y][1],0),c.applyToX(g.v[y][0],g.v[y][1],0),c.applyToY(g.v[y][0],g.v[y][1],0));b.push(c.applyToX(g.o[y-1][0],g.o[y-1][1],0),c.applyToY(g.o[y-1][0],g.o[y-1][1],0),c.applyToX(g.i[0][0],g.i[0][1],0),c.applyToY(g.i[0][0],g.i[0][1],0),c.applyToX(g.v[0][0],g.v[0][1],0),c.applyToY(g.v[0][0],g.v[0][1],0)),x[C]=b,C+=1}E&&(k+=o[a].l,k+=S),this.textSpans[A]?this.textSpans[A].elem=x:this.textSpans[A]={elem:x},A+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var s=this.canvasContext;s.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var r,n,t,a,l,o,c=this.textAnimator.renderedLetters,i=this.textProperty.currentData.l;n=i.length;var f,y=null,_=null,u=null,m,p,g=this.globalData.renderer;for(r=0;r<n;r+=1)if(!i[r].n){if(f=c[r],f&&(g.save(),g.ctxTransform(f.p),g.ctxOpacity(f.o)),this.fill){for(f&&f.fc?y!==f.fc&&(g.ctxFillStyle(f.fc),y=f.fc):y!==this.values.fill&&(y=this.values.fill,g.ctxFillStyle(this.values.fill)),m=this.textSpans[r].elem,a=m.length,this.globalData.canvasContext.beginPath(),t=0;t<a;t+=1)for(p=m[t],o=p.length,this.globalData.canvasContext.moveTo(p[0],p[1]),l=2;l<o;l+=6)this.globalData.canvasContext.bezierCurveTo(p[l],p[l+1],p[l+2],p[l+3],p[l+4],p[l+5]);this.globalData.canvasContext.closePath(),g.ctxFill()}if(this.stroke){for(f&&f.sw?u!==f.sw&&(u=f.sw,g.ctxLineWidth(f.sw)):u!==this.values.sWidth&&(u=this.values.sWidth,g.ctxLineWidth(this.values.sWidth)),f&&f.sc?_!==f.sc&&(_=f.sc,g.ctxStrokeStyle(f.sc)):_!==this.values.stroke&&(_=this.values.stroke,g.ctxStrokeStyle(this.values.stroke)),m=this.textSpans[r].elem,a=m.length,this.globalData.canvasContext.beginPath(),t=0;t<a;t+=1)for(p=m[t],o=p.length,this.globalData.canvasContext.moveTo(p[0],p[1]),l=2;l<o;l+=6)this.globalData.canvasContext.bezierCurveTo(p[l],p[l+1],p[l+2],p[l+3],p[l+4],p[l+5]);this.globalData.canvasContext.closePath(),g.ctxStroke()}f&&this.globalData.renderer.restore()}};function CVImageElement(s,r,n){this.assetData=r.getAssetData(s.refId),this.img=r.imageLoader.getAsset(this.assetData),this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var s=createTag("canvas");s.width=this.assetData.w,s.height=this.assetData.h;var r=s.getContext("2d"),n=this.img.width,t=this.img.height,a=n/t,l=this.assetData.w/this.assetData.h,o,c,i=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>l&&i==="xMidYMid slice"||a<l&&i!=="xMidYMid slice"?(c=t,o=c*l):(o=n,c=o/l),r.drawImage(this.img,(n-o)/2,(t-c)/2,o,c,0,0,this.assetData.w,this.assetData.h),this.img=s}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(s,r,n){this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(s){return new CVShapeElement(s,this.globalData,this)},CanvasRendererBase.prototype.createText=function(s){return new CVTextElement(s,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(s){return new CVImageElement(s,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(s){return new CVSolidElement(s,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(s){s[0]===1&&s[1]===0&&s[4]===0&&s[5]===1&&s[12]===0&&s[13]===0||this.canvasContext.transform(s[0],s[1],s[4],s[5],s[12],s[13])},CanvasRendererBase.prototype.ctxOpacity=function(s){this.canvasContext.globalAlpha*=s<0?0:s},CanvasRendererBase.prototype.ctxFillStyle=function(s){this.canvasContext.fillStyle=s},CanvasRendererBase.prototype.ctxStrokeStyle=function(s){this.canvasContext.strokeStyle=s},CanvasRendererBase.prototype.ctxLineWidth=function(s){this.canvasContext.lineWidth=s},CanvasRendererBase.prototype.ctxLineCap=function(s){this.canvasContext.lineCap=s},CanvasRendererBase.prototype.ctxLineJoin=function(s){this.canvasContext.lineJoin=s},CanvasRendererBase.prototype.ctxMiterLimit=function(s){this.canvasContext.miterLimit=s},CanvasRendererBase.prototype.ctxFill=function(s){this.canvasContext.fill(s)},CanvasRendererBase.prototype.ctxFillRect=function(s,r,n,t){this.canvasContext.fillRect(s,r,n,t)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(s){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}s&&(this.globalData.blendMode="source-over"),this.contextData.restore(s)},CanvasRendererBase.prototype.configAnimation=function(s){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var r=this.animationItem.container.style;r.width="100%",r.height="100%";var n="0px 0px 0px";r.transformOrigin=n,r.mozTransformOrigin=n,r.webkitTransformOrigin=n,r["-webkit-transform"]=n,r.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=s,this.layers=s.layers,this.transformCanvas={w:s.w,h:s.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(s,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(s.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(s,r){this.reset();var n,t;s?(n=s,t=r,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=t):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,t=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=t*this.renderConfig.dpr);var a,l;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var o=this.renderConfig.preserveAspectRatio.split(" "),c=o[1]||"meet",i=o[0]||"xMidYMid",f=i.substr(0,4),y=i.substr(4);a=n/t,l=this.transformCanvas.w/this.transformCanvas.h,l>a&&c==="meet"||l<a&&c==="slice"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),f==="xMid"&&(l<a&&c==="meet"||l>a&&c==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:f==="xMax"&&(l<a&&c==="meet"||l>a&&c==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,y==="YMid"&&(l>a&&c==="meet"||l<a&&c==="slice")?this.transformCanvas.ty=(t-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:y==="YMax"&&(l>a&&c==="meet"||l<a&&c==="slice")?this.transformCanvas.ty=(t-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var s,r=this.layers?this.layers.length:0;for(s=r-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(s,r){if(!(this.renderedFrame===s&&this.renderConfig.clearCanvas===!0&&!r||this.destroyed||s===-1)){this.renderedFrame=s,this.globalData.frameNum=s-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||r,this.globalData.projectInterface.currentFrame=s;var n,t=this.layers.length;for(this.completeLayers||this.checkLayers(s),n=t-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(s-this.layers[n].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=t-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(s){var r=this.elements;if(!(r[s]||this.layers[s].ty===99)){var n=this.createItem(this.layers[s],this,this.globalData);r[s]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var s,r=15;for(s=0;s<r;s+=1){var n=new CanvasContext;this.stack[s]=n}this._length=r,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var s=this._length*2,r=0;for(r=this._length;r<s;r+=1)this.stack[r]=new CanvasContext;this._length=s},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(s){this.cArrPos-=1;var r=this.stack[this.cArrPos],n=r.transform,t,a=this.cTr.props;for(t=0;t<16;t+=1)a[t]=n[t];if(s){this.nativeContext.restore();var l=this.stack[this.cArrPos+1];this.appliedFillStyle=l.fillStyle,this.appliedStrokeStyle=l.strokeStyle,this.appliedLineWidth=l.lineWidth,this.appliedLineCap=l.lineCap,this.appliedLineJoin=l.lineJoin,this.appliedMiterLimit=l.miterLimit}this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),(s||r.opacity!==-1&&this.currentOpacity!==r.opacity)&&(this.nativeContext.globalAlpha=r.opacity,this.currentOpacity=r.opacity),this.currentFillStyle=r.fillStyle,this.currentStrokeStyle=r.strokeStyle,this.currentLineWidth=r.lineWidth,this.currentLineCap=r.lineCap,this.currentLineJoin=r.lineJoin,this.currentMiterLimit=r.miterLimit},CVContextData.prototype.save=function(s){s&&this.nativeContext.save();var r=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n=this.stack[this.cArrPos],t;for(t=0;t<16;t+=1)n.transform[t]=r[t];this.cArrPos+=1;var a=this.stack[this.cArrPos];a.opacity=n.opacity,a.fillStyle=n.fillStyle,a.strokeStyle=n.strokeStyle,a.lineWidth=n.lineWidth,a.lineCap=n.lineCap,a.lineJoin=n.lineJoin,a.miterLimit=n.miterLimit},CVContextData.prototype.setOpacity=function(s){this.stack[this.cArrPos].opacity=s},CVContextData.prototype.setContext=function(s){this.nativeContext=s},CVContextData.prototype.fillStyle=function(s){this.stack[this.cArrPos].fillStyle!==s&&(this.currentFillStyle=s,this.stack[this.cArrPos].fillStyle=s)},CVContextData.prototype.strokeStyle=function(s){this.stack[this.cArrPos].strokeStyle!==s&&(this.currentStrokeStyle=s,this.stack[this.cArrPos].strokeStyle=s)},CVContextData.prototype.lineWidth=function(s){this.stack[this.cArrPos].lineWidth!==s&&(this.currentLineWidth=s,this.stack[this.cArrPos].lineWidth=s)},CVContextData.prototype.lineCap=function(s){this.stack[this.cArrPos].lineCap!==s&&(this.currentLineCap=s,this.stack[this.cArrPos].lineCap=s)},CVContextData.prototype.lineJoin=function(s){this.stack[this.cArrPos].lineJoin!==s&&(this.currentLineJoin=s,this.stack[this.cArrPos].lineJoin=s)},CVContextData.prototype.miterLimit=function(s){this.stack[this.cArrPos].miterLimit!==s&&(this.currentMiterLimit=s,this.stack[this.cArrPos].miterLimit=s)},CVContextData.prototype.transform=function(s){this.transformMat.cloneFromProps(s);var r=this.cTr;this.transformMat.multiply(r),r.cloneFromProps(this.transformMat.props);var n=r.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(s){var r=this.stack[this.cArrPos].opacity;r*=s<0?0:s,this.stack[this.cArrPos].opacity!==r&&(this.currentOpacity!==s&&(this.nativeContext.globalAlpha=s,this.currentOpacity=s),this.stack[this.cArrPos].opacity=r)},CVContextData.prototype.fill=function(s){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(s)},CVContextData.prototype.fillRect=function(s,r,n,t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(s,r,n,t)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(s,r,n){this.completeLayers=!1,this.layers=s.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(s,r,n),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var s=this.canvasContext;s.beginPath(),s.moveTo(0,0),s.lineTo(this.data.w,0),s.lineTo(this.data.w,this.data.h),s.lineTo(0,this.data.h),s.lineTo(0,0),s.clip();var r,n=this.layers.length;for(r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},CVCompElement.prototype.destroy=function(){var s,r=this.layers.length;for(s=r-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function CanvasRenderer(s,r){this.animationItem=s,this.renderConfig={clearCanvas:r&&r.clearCanvas!==void 0?r.clearCanvas:!0,context:r&&r.context||null,progressiveLoad:r&&r.progressiveLoad||!1,preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",className:r&&r.className||"",id:r&&r.id||"",runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.renderConfig.dpr=r&&r.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=r&&r.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var r=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var n=this.finalTransform.mat.toCSS();r.transform=n,r.webkitTransform=n}this.finalTransform._opMdf&&(r.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(s,r,n){this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var s;this.data.hasMask?(s=createNS("rect"),s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(s=createTag("div"),s.style.width=this.data.sw+"px",s.style.height=this.data.sh+"px",s.style.backgroundColor=this.data.sc),this.layerElement.appendChild(s)};function HShapeElement(s,r,n){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(s,r,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var s;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),s=this.svgElement;else{s=createNS("svg");var r=this.comp.data?this.comp.data:this.globalData.compSize;s.setAttribute("width",r.w),s.setAttribute("height",r.h),s.appendChild(this.shapesContainer),this.layerElement.appendChild(s)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=s},HShapeElement.prototype.getTransformedPoint=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)r=s[n].mProps.v.applyToPointArray(r[0],r[1],0);return r},HShapeElement.prototype.calculateShapeBoundingBox=function(s,r){var n=s.sh.v,t=s.transformers,a,l=n._length,o,c,i,f;if(!(l<=1)){for(a=0;a<l-1;a+=1)o=this.getTransformedPoint(t,n.v[a]),c=this.getTransformedPoint(t,n.o[a]),i=this.getTransformedPoint(t,n.i[a+1]),f=this.getTransformedPoint(t,n.v[a+1]),this.checkBounds(o,c,i,f,r);n.c&&(o=this.getTransformedPoint(t,n.v[a]),c=this.getTransformedPoint(t,n.o[a]),i=this.getTransformedPoint(t,n.i[0]),f=this.getTransformedPoint(t,n.v[0]),this.checkBounds(o,c,i,f,r))}},HShapeElement.prototype.checkBounds=function(s,r,n,t,a){this.getBoundsOfCurve(s,r,n,t);var l=this.shapeBoundingBox;a.x=bmMin(l.left,a.x),a.xMax=bmMax(l.right,a.xMax),a.y=bmMin(l.top,a.y),a.yMax=bmMax(l.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(s,r,n,t){for(var a=[[s[0],t[0]],[s[1],t[1]]],l,o,c,i,f,y,_,u=0;u<2;++u)o=6*s[u]-12*r[u]+6*n[u],l=-3*s[u]+9*r[u]-9*n[u]+3*t[u],c=3*r[u]-3*s[u],o|=0,l|=0,c|=0,l===0&&o===0||(l===0?(i=-c/o,i>0&&i<1&&a[u].push(this.calculateF(i,s,r,n,t,u))):(f=o*o-4*c*l,f>=0&&(y=(-o+bmSqrt(f))/(2*l),y>0&&y<1&&a[u].push(this.calculateF(y,s,r,n,t,u)),_=(-o-bmSqrt(f))/(2*l),_>0&&_<1&&a[u].push(this.calculateF(_,s,r,n,t,u)))));this.shapeBoundingBox.left=bmMin.apply(null,a[0]),this.shapeBoundingBox.top=bmMin.apply(null,a[1]),this.shapeBoundingBox.right=bmMax.apply(null,a[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,a[1])},HShapeElement.prototype.calculateF=function(s,r,n,t,a,l){return bmPow(1-s,3)*r[l]+3*bmPow(1-s,2)*s*n[l]+3*(1-s)*bmPow(s,2)*t[l]+bmPow(s,3)*a[l]},HShapeElement.prototype.calculateBoundingBox=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)s[n]&&s[n].sh?this.calculateShapeBoundingBox(s[n],r):s[n]&&s[n].it?this.calculateBoundingBox(s[n].it,r):s[n]&&s[n].style&&s[n].w&&this.expandStrokeBoundingBox(s[n].w,r)},HShapeElement.prototype.expandStrokeBoundingBox=function(s,r){var n=0;if(s.keyframes){for(var t=0;t<s.keyframes.length;t+=1){var a=s.keyframes[t].s;a>n&&(n=a)}n*=s.mult}else n=s.v*s.mult;r.x-=n,r.xMax+=n,r.y-=n,r.yMax+=n},HShapeElement.prototype.currentBoxContains=function(s){return this.currentBBox.x<=s.x&&this.currentBBox.y<=s.y&&this.currentBBox.width+this.currentBBox.x>=s.x+s.width&&this.currentBBox.height+this.currentBBox.y>=s.y+s.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var s=this.tempBoundingBox,r=999999;if(s.x=r,s.xMax=-r,s.y=r,s.yMax=-r,this.calculateBoundingBox(this.itemsData,s),s.width=s.xMax<s.x?0:s.xMax-s.x,s.height=s.yMax<s.y?0:s.yMax-s.y,this.currentBoxContains(s))return;var n=!1;if(this.currentBBox.w!==s.width&&(this.currentBBox.w=s.width,this.shapeCont.setAttribute("width",s.width),n=!0),this.currentBBox.h!==s.height&&(this.currentBBox.h=s.height,this.shapeCont.setAttribute("height",s.height),n=!0),n||this.currentBBox.x!==s.x||this.currentBBox.y!==s.y){this.currentBBox.w=s.width,this.currentBBox.h=s.height,this.currentBBox.x=s.x,this.currentBBox.y=s.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var t=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=a,t.webkitTransform=a}}};function HTextElement(s,r,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var s=createNS("g");this.maskedElement.appendChild(s),this.innerElem=s}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var r=this.innerElem.style,n=s.fc?this.buildColor(s.fc):"rgba(0,0,0,0)";r.fill=n,r.color=n,s.sc&&(r.stroke=this.buildColor(s.sc),r.strokeWidth=s.sw+"px");var t=this.globalData.fontManager.getFontByName(s.f);if(!this.globalData.fontManager.chars)if(r.fontSize=s.finalSize+"px",r.lineHeight=s.finalSize+"px",t.fClass)this.innerElem.className=t.fClass;else{r.fontFamily=t.fFamily;var a=s.fWeight,l=s.fStyle;r.fontStyle=l,r.fontWeight=a}var o,c,i=s.l;c=i.length;var f,y,_,u=this.mHelper,m,p="",g=0;for(o=0;o<c;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[g]?f=this.textPaths[g]:(f=createNS("path"),f.setAttribute("stroke-linecap",lineCapEnum[1]),f.setAttribute("stroke-linejoin",lineJoinEnum[2]),f.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[g]?(y=this.textSpans[g],_=y.children[0]):(y=createTag("div"),y.style.lineHeight=0,_=createNS("svg"),_.appendChild(f),styleDiv(y)))):this.isMasked?f=this.textPaths[g]?this.textPaths[g]:createNS("text"):this.textSpans[g]?(y=this.textSpans[g],f=this.textPaths[g]):(y=createTag("span"),styleDiv(y),f=createTag("span"),styleDiv(f),y.appendChild(f)),this.globalData.fontManager.chars){var x=this.globalData.fontManager.getCharData(s.finalText[o],t.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),b;if(x?b=x.data:b=null,u.reset(),b&&b.shapes&&b.shapes.length&&(m=b.shapes[0].it,u.scale(s.finalSize/100,s.finalSize/100),p=this.createPathShape(u,m),f.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(f);else{if(this.innerElem.appendChild(y),b&&b.shapes){document.body.appendChild(_);var E=_.getBBox();_.setAttribute("width",E.width+2),_.setAttribute("height",E.height+2),_.setAttribute("viewBox",E.x-1+" "+(E.y-1)+" "+(E.width+2)+" "+(E.height+2));var S=_.style,k="translate("+(E.x-1)+"px,"+(E.y-1)+"px)";S.transform=k,S.webkitTransform=k,i[o].yOffset=E.y-1}else _.setAttribute("width",1),_.setAttribute("height",1);y.appendChild(_)}}else if(f.textContent=i[o].val,f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(f);else{this.innerElem.appendChild(y);var T=f.style,j="translate3d(0,"+-s.finalSize/1.2+"px,0)";T.transform=j,T.webkitTransform=j}this.isMasked?this.textSpans[g]=f:this.textSpans[g]=y,this.textSpans[g].style.display="block",this.textPaths[g]=f,g+=1}for(;g<this.textSpans.length;)this.textSpans[g].style.display="none",g+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var s;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),s=this.svgElement.style;var r="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";s.transform=r,s.webkitTransform=r}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var n,t,a=0,l=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;t=o.length;var c,i,f;for(n=0;n<t;n+=1)o[n].n?a+=1:(i=this.textSpans[n],f=this.textPaths[n],c=l[a],a+=1,c._mdf.m&&(this.isMasked?i.setAttribute("transform",c.m):(i.style.webkitTransform=c.m,i.style.transform=c.m)),i.style.opacity=c.o,c.sw&&c._mdf.sw&&f.setAttribute("stroke-width",c.sw),c.sc&&c._mdf.sc&&f.setAttribute("stroke",c.sc),c.fc&&c._mdf.fc&&(f.setAttribute("fill",c.fc),f.style.color=c.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var y=this.innerElem.getBBox();this.currentBBox.w!==y.width&&(this.currentBBox.w=y.width,this.svgElement.setAttribute("width",y.width)),this.currentBBox.h!==y.height&&(this.currentBBox.h=y.height,this.svgElement.setAttribute("height",y.height));var _=1;if(this.currentBBox.w!==y.width+_*2||this.currentBBox.h!==y.height+_*2||this.currentBBox.x!==y.x-_||this.currentBBox.y!==y.y-_){this.currentBBox.w=y.width+_*2,this.currentBBox.h=y.height+_*2,this.currentBBox.x=y.x-_,this.currentBBox.y=y.y-_,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),s=this.svgElement.style;var u="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=u,s.webkitTransform=u}}}};function HCameraElement(s,r,n){this.initFrame(),this.initBaseData(s,r,n),this.initHierarchy();var t=PropertyFactory.getProp;if(this.pe=t(this,s.pe,0,0,this),s.ks.p.s?(this.px=t(this,s.ks.p.x,1,0,this),this.py=t(this,s.ks.p.y,1,0,this),this.pz=t(this,s.ks.p.z,1,0,this)):this.p=t(this,s.ks.p,1,0,this),s.ks.a&&(this.a=t(this,s.ks.a,1,0,this)),s.ks.or.k.length&&s.ks.or.k[0].to){var a,l=s.ks.or.k.length;for(a=0;a<l;a+=1)s.ks.or.k[a].to=null,s.ks.or.k[a].ti=null}this.or=t(this,s.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=t(this,s.ks.rx,0,degToRads,this),this.ry=t(this,s.ks.ry,0,degToRads,this),this.rz=t(this,s.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var s,r=this.comp.threeDElements.length,n,t,a;for(s=0;s<r;s+=1)if(n=this.comp.threeDElements[s],n.type==="3d"){t=n.perspectiveElem.style,a=n.container.style;var l=this.pe.v+"px",o="0px 0px 0px",c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";t.perspective=l,t.webkitPerspective=l,a.transformOrigin=o,a.mozTransformOrigin=o,a.webkitTransformOrigin=o,t.transform=c,t.webkitTransform=c}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var s=this._isFirstFrame,r,n;if(this.hierarchy)for(n=this.hierarchy.length,r=0;r<n;r+=1)s=this.hierarchy[r].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(n=this.hierarchy.length-1,r=n;r>=0;r-=1){var t=this.hierarchy[r].finalTransform.mProp;this.mat.translate(-t.p.v[0],-t.p.v[1],t.p.v[2]),this.mat.rotateX(-t.or.v[0]).rotateY(-t.or.v[1]).rotateZ(t.or.v[2]),this.mat.rotateX(-t.rx.v).rotateY(-t.ry.v).rotateZ(t.rz.v),this.mat.scale(1/t.s.v[0],1/t.s.v[1],1/t.s.v[2]),this.mat.translate(t.a.v[0],t.a.v[1],t.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;this.p?a=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:a=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var l=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),o=[a[0]/l,a[1]/l,a[2]/l],c=Math.sqrt(o[2]*o[2]+o[0]*o[0]),i=Math.atan2(o[1],c),f=Math.atan2(o[0],-o[2]);this.mat.rotateY(f).rotateX(-i)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var y=!this._prevMat.equals(this.mat);if((y||this.pe._mdf)&&this.comp.threeDElements){n=this.comp.threeDElements.length;var _,u,m;for(r=0;r<n;r+=1)if(_=this.comp.threeDElements[r],_.type==="3d"){if(y){var p=this.mat.toCSS();m=_.container.style,m.transform=p,m.webkitTransform=p}this.pe._mdf&&(u=_.perspectiveElem.style,u.perspective=this.pe.v+"px",u.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(s,r,n){this.assetData=r.getAssetData(s.refId),this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData),r=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(r),r.crossOrigin="anonymous",r.src=s,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(s,r){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(s,r){var n=s.getBaseElement();if(n){var t=this.layers[r];if(!t.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(n,r);else{for(var a=0,l,o,c;a<r;)this.elements[a]&&this.elements[a]!==!0&&this.elements[a].getBaseElement&&(o=this.elements[a],c=this.layers[a].ddd?this.getThreeDContainerByPos(a):o.getBaseElement(),l=c||l),a+=1;l?(!t.ddd||!this.supports3d)&&this.layerElement.insertBefore(n,l):(!t.ddd||!this.supports3d)&&this.layerElement.appendChild(n)}else this.addTo3dContainer(n,r)}},HybridRendererBase.prototype.createShape=function(s){return this.supports3d?new HShapeElement(s,this.globalData,this):new SVGShapeElement(s,this.globalData,this)},HybridRendererBase.prototype.createText=function(s){return this.supports3d?new HTextElement(s,this.globalData,this):new SVGTextLottieElement(s,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(s){return this.camera=new HCameraElement(s,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(s){return this.supports3d?new HImageElement(s,this.globalData,this):new IImageElement(s,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(s){return this.supports3d?new HSolidElement(s,this.globalData,this):new ISolidElement(s,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(s){for(var r=0,n=this.threeDElements.length;r<n;){if(this.threeDElements[r].startPos<=s&&this.threeDElements[r].endPos>=s)return this.threeDElements[r].perspectiveElem;r+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(s,r){var n=createTag("div"),t,a;styleDiv(n);var l=createTag("div");if(styleDiv(l),r==="3d"){t=n.style,t.width=this.globalData.compSize.w+"px",t.height=this.globalData.compSize.h+"px";var o="50% 50%";t.webkitTransformOrigin=o,t.mozTransformOrigin=o,t.transformOrigin=o,a=l.style;var c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";a.transform=c,a.webkitTransform=c}n.appendChild(l);var i={container:l,perspectiveElem:n,startPos:s,endPos:s,type:r};return this.threeDElements.push(i),i},HybridRendererBase.prototype.build3dContainers=function(){var s,r=this.layers.length,n,t="";for(s=0;s<r;s+=1)this.layers[s].ddd&&this.layers[s].ty!==3?(t!=="3d"&&(t="3d",n=this.createThreeDContainer(s,"3d")),n.endPos=Math.max(n.endPos,s)):(t!=="2d"&&(t="2d",n=this.createThreeDContainer(s,"2d")),n.endPos=Math.max(n.endPos,s));for(r=this.threeDElements.length,s=r-1;s>=0;s-=1)this.resizerElem.appendChild(this.threeDElements[s].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(s,r){for(var n=0,t=this.threeDElements.length;n<t;){if(r<=this.threeDElements[n].endPos){for(var a=this.threeDElements[n].startPos,l;a<r;)this.elements[a]&&this.elements[a].getBaseElement&&(l=this.elements[a].getBaseElement()),a+=1;l?this.threeDElements[n].container.insertBefore(s,l):this.threeDElements[n].container.appendChild(s);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(s){var r=createTag("div"),n=this.animationItem.wrapper,t=r.style;t.width=s.w+"px",t.height=s.h+"px",this.resizerElem=r,styleDiv(r),t.transformStyle="flat",t.mozTransformStyle="flat",t.webkitTransformStyle="flat",this.renderConfig.className&&r.setAttribute("class",this.renderConfig.className),n.appendChild(r),t.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var l=createNS("defs");a.appendChild(l),this.data=s,this.setupGlobalData(s,a),this.globalData.defs=l,this.layers=s.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var s,r=this.layers?this.layers.length:0;for(s=0;s<r;s+=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var s=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight,n=s/r,t=this.globalData.compSize.w/this.globalData.compSize.h,a,l,o,c;t>n?(a=s/this.globalData.compSize.w,l=s/this.globalData.compSize.w,o=0,c=(r-this.globalData.compSize.h*(s/this.globalData.compSize.w))/2):(a=r/this.globalData.compSize.h,l=r/this.globalData.compSize.h,o=(s-this.globalData.compSize.w*(r/this.globalData.compSize.h))/2,c=0);var i=this.resizerElem.style;i.webkitTransform="matrix3d("+a+",0,0,0,0,"+l+",0,0,0,0,1,0,"+o+","+c+",0,1)",i.transform=i.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var s=this.globalData.compSize.w,r=this.globalData.compSize.h,n,t=this.threeDElements.length;for(n=0;n<t;n+=1){var a=this.threeDElements[n].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(s,2)+Math.pow(r,2))+"px",a.perspective=a.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(s){var r,n=s.length,t=createTag("div");for(r=0;r<n;r+=1)if(s[r].xt){var a=this.createComp(s[r],t,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}};function HCompElement(s,r,n){this.layers=s.layers,this.supports3d=!s.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,r,n),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(s,r){for(var n=0,t;n<r;)this.elements[n]&&this.elements[n].getBaseElement&&(t=this.elements[n].getBaseElement()),n+=1;t?this.layerElement.insertBefore(s,t):this.layerElement.appendChild(s)},HCompElement.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};function HybridRenderer(s,r){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"},runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};var CompExpressionInterface=function(){return function(s){function r(n){for(var t=0,a=s.layers.length;t<a;){if(s.layers[t].nm===n||s.layers[t].ind===n)return s.elements[t].layerInterface;t+=1}return null}return Object.defineProperty(r,"_name",{value:s.data.nm}),r.layer=r,r.pixelAspect=1,r.height=s.data.h||s.globalData.compSize.h,r.width=s.data.w||s.globalData.compSize.w,r.pixelAspect=1,r.frameDuration=1/s.globalData.frameRate,r.displayStartTime=0,r.numLayers=s.layers.length,r}}();function _typeof$2(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(s)}function seedRandom(s,r){var n=this,t=256,a=6,l=52,o="random",c=r.pow(t,a),i=r.pow(2,l),f=i*2,y=t-1,_;function u(S,k,T){var j=[];k=k===!0?{entropy:!0}:k||{};var A=x(g(k.entropy?[S,E(s)]:S===null?b():S,3),j),C=new m(j),N=function(){for(var I=C.g(a),G=c,R=0;I<i;)I=(I+R)*t,G*=t,R=C.g(1);for(;I>=f;)I/=2,G/=2,R>>>=1;return(I+R)/G};return N.int32=function(){return C.g(4)|0},N.quick=function(){return C.g(4)/4294967296},N.double=N,x(E(C.S),s),(k.pass||T||function(V,I,G,R){return R&&(R.S&&p(R,C),V.state=function(){return p(C,{})}),G?(r[o]=V,I):V})(N,A,"global"in k?k.global:this==r,k.state)}r["seed"+o]=u;function m(S){var k,T=S.length,j=this,A=0,C=j.i=j.j=0,N=j.S=[];for(T||(S=[T++]);A<t;)N[A]=A++;for(A=0;A<t;A++)N[A]=N[C=y&C+S[A%T]+(k=N[A])],N[C]=k;j.g=function(V){for(var I,G=0,R=j.i,q=j.j,M=j.S;V--;)I=M[R=y&R+1],G=G*t+M[y&(M[R]=M[q=y&q+I])+(M[q]=I)];return j.i=R,j.j=q,G}}function p(S,k){return k.i=S.i,k.j=S.j,k.S=S.S.slice(),k}function g(S,k){var T=[],j=_typeof$2(S),A;if(k&&j=="object")for(A in S)try{T.push(g(S[A],k-1))}catch{}return T.length?T:j=="string"?S:S+"\0"}function x(S,k){for(var T=S+"",j,A=0;A<T.length;)k[y&A]=y&(j^=k[y&A]*19)+T.charCodeAt(A++);return E(k)}function b(){try{var S=new Uint8Array(t);return(n.crypto||n.msCrypto).getRandomValues(S),E(S)}catch{var k=n.navigator,T=k&&k.plugins;return[+new Date,n,T,n.screen,E(s)]}}function E(S){return String.fromCharCode.apply(0,S)}x(r.random(),s)}function initialize$2(s){seedRandom([],s)}var propTypes={SHAPE:"shape"};function _typeof$1(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(s)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(s){return s.constructor===Array||s.constructor===Float32Array}function isNumerable(s,r){return s==="number"||r instanceof Number||s==="boolean"||s==="string"}function $bm_neg(s){var r=_typeof$1(s);if(r==="number"||s instanceof Number||r==="boolean")return-s;if($bm_isInstanceOfArray(s)){var n,t=s.length,a=[];for(n=0;n<t;n+=1)a[n]=-s[n];return a}return s.propType?s.v:-s}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(s,r){var n=_typeof$1(s),t=_typeof$1(r);if(isNumerable(n,s)&&isNumerable(t,r)||n==="string"||t==="string")return s+r;if($bm_isInstanceOfArray(s)&&isNumerable(t,r))return s=s.slice(0),s[0]+=r,s;if(isNumerable(n,s)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=s+r[0],r;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(r)){for(var a=0,l=s.length,o=r.length,c=[];a<l||a<o;)(typeof s[a]=="number"||s[a]instanceof Number)&&(typeof r[a]=="number"||r[a]instanceof Number)?c[a]=s[a]+r[a]:c[a]=r[a]===void 0?s[a]:s[a]||r[a],a+=1;return c}return 0}var add=sum;function sub(s,r){var n=_typeof$1(s),t=_typeof$1(r);if(isNumerable(n,s)&&isNumerable(t,r))return n==="string"&&(s=parseInt(s,10)),t==="string"&&(r=parseInt(r,10)),s-r;if($bm_isInstanceOfArray(s)&&isNumerable(t,r))return s=s.slice(0),s[0]-=r,s;if(isNumerable(n,s)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=s-r[0],r;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(r)){for(var a=0,l=s.length,o=r.length,c=[];a<l||a<o;)(typeof s[a]=="number"||s[a]instanceof Number)&&(typeof r[a]=="number"||r[a]instanceof Number)?c[a]=s[a]-r[a]:c[a]=r[a]===void 0?s[a]:s[a]||r[a],a+=1;return c}return 0}function mul(s,r){var n=_typeof$1(s),t=_typeof$1(r),a;if(isNumerable(n,s)&&isNumerable(t,r))return s*r;var l,o;if($bm_isInstanceOfArray(s)&&isNumerable(t,r)){for(o=s.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s[l]*r;return a}if(isNumerable(n,s)&&$bm_isInstanceOfArray(r)){for(o=r.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s*r[l];return a}return 0}function div(s,r){var n=_typeof$1(s),t=_typeof$1(r),a;if(isNumerable(n,s)&&isNumerable(t,r))return s/r;var l,o;if($bm_isInstanceOfArray(s)&&isNumerable(t,r)){for(o=s.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s[l]/r;return a}if(isNumerable(n,s)&&$bm_isInstanceOfArray(r)){for(o=r.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s/r[l];return a}return 0}function mod(s,r){return typeof s=="string"&&(s=parseInt(s,10)),typeof r=="string"&&(r=parseInt(r,10)),s%r}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(s,r,n){if(r>n){var t=n;n=r,r=t}return Math.min(Math.max(s,r),n)}function radiansToDegrees(s){return s/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(s){return s*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(s,r){if(typeof s=="number"||s instanceof Number)return r=r||0,Math.abs(s-r);r||(r=helperLengthArray);var n,t=Math.min(s.length,r.length),a=0;for(n=0;n<t;n+=1)a+=Math.pow(r[n]-s[n],2);return Math.sqrt(a)}function normalize(s){return div(s,length(s))}function rgbToHsl(s){var r=s[0],n=s[1],t=s[2],a=Math.max(r,n,t),l=Math.min(r,n,t),o,c,i=(a+l)/2;if(a===l)o=0,c=0;else{var f=a-l;switch(c=i>.5?f/(2-a-l):f/(a+l),a){case r:o=(n-t)/f+(n<t?6:0);break;case n:o=(t-r)/f+2;break;case t:o=(r-n)/f+4;break}o/=6}return[o,c,i,s[3]]}function hue2rgb(s,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(r-s)*6*n:n<1/2?r:n<2/3?s+(r-s)*(2/3-n)*6:s}function hslToRgb(s){var r=s[0],n=s[1],t=s[2],a,l,o;if(n===0)a=t,o=t,l=t;else{var c=t<.5?t*(1+n):t+n-t*n,i=2*t-c;a=hue2rgb(i,c,r+1/3),l=hue2rgb(i,c,r),o=hue2rgb(i,c,r-1/3)}return[a,l,o,s[3]]}function linear(s,r,n,t,a){if((t===void 0||a===void 0)&&(t=r,a=n,r=0,n=1),n<r){var l=n;n=r,r=l}if(s<=r)return t;if(s>=n)return a;var o=n===r?0:(s-r)/(n-r);if(!t.length)return t+(a-t)*o;var c,i=t.length,f=createTypedArray("float32",i);for(c=0;c<i;c+=1)f[c]=t[c]+(a[c]-t[c])*o;return f}function random(s,r){if(r===void 0&&(s===void 0?(s=0,r=1):(r=s,s=void 0)),r.length){var n,t=r.length;s||(s=createTypedArray("float32",t));var a=createTypedArray("float32",t),l=BMMath.random();for(n=0;n<t;n+=1)a[n]=s[n]+l*(r[n]-s[n]);return a}s===void 0&&(s=0);var o=BMMath.random();return s+o*(r-s)}function createPath(s,r,n,t){var a,l=s.length,o=shapePool.newElement();o.setPathData(!!t,l);var c=[0,0],i,f;for(a=0;a<l;a+=1)i=r&&r[a]?r[a]:c,f=n&&n[a]?n[a]:c,o.setTripleAt(s[a][0],s[a][1],f[0]+s[a][0],f[1]+s[a][1],i[0]+s[a][0],i[1]+s[a][1],a,!0);return o}function initiateExpression(elem,data,property){function noOp(s){return s}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function s(r,n){var t,a,l=this.pv.length?this.pv.length:1,o=createTypedArray("float32",l);r=5;var c=Math.floor(time*r);for(t=0,a=0;t<c;){for(a=0;a<l;a+=1)o[a]+=-n+n*2*BMMath.random();t+=1}var i=time*r,f=i-Math.floor(i),y=createTypedArray("float32",l);if(l>1){for(a=0;a<l;a+=1)y[a]=this.pv[a]+o[a]+(-n+n*2*BMMath.random())*f;return y}return this.pv+o[0]+(-n+n*2*BMMath.random())*f}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(s,r){return loopIn(s,r,!0)}function loopOutDuration(s,r){return loopOut(s,r,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(s,r){var n=[r[0]-s[0],r[1]-s[1],r[2]-s[2]],t=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads,a=-Math.atan2(n[1],n[2])/degToRads;return[a,t,0]}function easeOut(s,r,n,t,a){return applyEase(easeOutBez,s,r,n,t,a)}function easeIn(s,r,n,t,a){return applyEase(easeInBez,s,r,n,t,a)}function ease(s,r,n,t,a){return applyEase(easeInOutBez,s,r,n,t,a)}function applyEase(s,r,n,t,a,l){a===void 0?(a=n,l=t):r=(r-n)/(t-n),r>1?r=1:r<0&&(r=0);var o=s(r);if($bm_isInstanceOfArray(a)){var c,i=a.length,f=createTypedArray("float32",i);for(c=0;c<i;c+=1)f[c]=(l[c]-a[c])*o+a[c];return f}return(l-a)*o+a}function nearestKey(s){var r,n=data.k.length,t,a;if(!data.k.length||typeof data.k[0]=="number")t=0,a=0;else if(t=-1,s*=elem.comp.globalData.frameRate,s<data.k[0].t)t=1,a=data.k[0].t;else{for(r=0;r<n-1;r+=1)if(s===data.k[r].t){t=r+1,a=data.k[r].t;break}else if(s>data.k[r].t&&s<data.k[r+1].t){s-data.k[r].t>data.k[r+1].t-s?(t=r+2,a=data.k[r+1].t):(t=r+1,a=data.k[r].t);break}t===-1&&(t=r+1,a=data.k[r].t)}var l={};return l.index=t,l.time=a/elem.comp.globalData.frameRate,l}function key(s){var r,n,t;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+s);s-=1,r={time:data.k[s].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[s],"s")?data.k[s].s:data.k[s-1].e;for(t=a.length,n=0;n<t;n+=1)r[n]=a[n],r.value[n]=a[n];return r}function framesToTime(s,r){return r||(r=elem.comp.globalData.frameRate),s/r}function timeToFrames(s,r){return!s&&s!==0&&(s=time),r||(r=elem.comp.globalData.frameRate),s*r}function seedRandom(s){BMMath.seedrandom(randSeed+s)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(s,r){return typeof value=="string"?r===void 0?value.substring(s):value.substring(s,r):""}function substr(s,r){return typeof value=="string"?r===void 0?value.substr(s):value.substr(s,r):""}function posterizeTime(s){time=s===0?0:Math.floor(time*s)/s,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(s){return value=s,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var s={};s.initExpressions=r,s.resetFrame=ExpressionManager.resetFrame;function r(n){var t=0,a=[];function l(){t+=1}function o(){t-=1,t===0&&i()}function c(f){a.indexOf(f)===-1&&a.push(f)}function i(){var f,y=a.length;for(f=0;f<y;f+=1)a[f].release();a.length=0}n.renderer.compInterface=CompExpressionInterface(n.renderer),n.renderer.globalData.projectInterface.registerComposition(n.renderer),n.renderer.globalData.pushExpression=l,n.renderer.globalData.popExpression=o,n.renderer.globalData.registerExpressionProperty=c}return s}(),MaskManagerInterface=function(){function s(n,t){this._mask=n,this._data=t}Object.defineProperty(s.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(s.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var r=function(t){var a=createSizedArray(t.viewData.length),l,o=t.viewData.length;for(l=0;l<o;l+=1)a[l]=new s(t.viewData[l],t.masksProperties[l]);var c=function(f){for(l=0;l<o;){if(t.masksProperties[l].nm===f)return a[l];l+=1}return null};return c};return r}(),ExpressionPropertyInterface=function(){var s={pv:0,v:0,mult:1},r={pv:[0,0,0],v:[0,0,0],mult:1};function n(o,c,i){Object.defineProperty(o,"velocity",{get:function(){return c.getVelocityAtTime(c.comp.currentFrame)}}),o.numKeys=c.keyframes?c.keyframes.length:0,o.key=function(f){if(!o.numKeys)return 0;var y="";"s"in c.keyframes[f-1]?y=c.keyframes[f-1].s:"e"in c.keyframes[f-2]?y=c.keyframes[f-2].e:y=c.keyframes[f-2].s;var _=i==="unidimensional"?new Number(y):Object.assign({},y);return _.time=c.keyframes[f-1].t/c.elem.comp.globalData.frameRate,_.value=i==="unidimensional"?y[0]:y,_},o.valueAtTime=c.getValueAtTime,o.speedAtTime=c.getSpeedAtTime,o.velocityAtTime=c.getVelocityAtTime,o.propertyGroup=c.propertyGroup}function t(o){(!o||!("pv"in o))&&(o=s);var c=1/o.mult,i=o.pv*c,f=new Number(i);return f.value=i,n(f,o,"unidimensional"),function(){return o.k&&o.getValue(),i=o.v*c,f.value!==i&&(f=new Number(i),f.value=i,n(f,o,"unidimensional")),f}}function a(o){(!o||!("pv"in o))&&(o=r);var c=1/o.mult,i=o.data&&o.data.l||o.pv.length,f=createTypedArray("float32",i),y=createTypedArray("float32",i);return f.value=y,n(f,o,"multidimensional"),function(){o.k&&o.getValue();for(var _=0;_<i;_+=1)y[_]=o.v[_]*c,f[_]=y[_];return f}}function l(){return s}return function(o){return o?o.propType==="unidimensional"?t(o):a(o):l}}(),TransformExpressionInterface=function(){return function(s){function r(o){switch(o){case"scale":case"Scale":case"ADBE Scale":case 6:return r.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return r.rotation;case"ADBE Rotate X":return r.xRotation;case"ADBE Rotate Y":return r.yRotation;case"position":case"Position":case"ADBE Position":case 2:return r.position;case"ADBE Position_0":return r.xPosition;case"ADBE Position_1":return r.yPosition;case"ADBE Position_2":return r.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return r.anchorPoint;case"opacity":case"Opacity":case 11:return r.opacity;default:return null}}Object.defineProperty(r,"rotation",{get:ExpressionPropertyInterface(s.r||s.rz)}),Object.defineProperty(r,"zRotation",{get:ExpressionPropertyInterface(s.rz||s.r)}),Object.defineProperty(r,"xRotation",{get:ExpressionPropertyInterface(s.rx)}),Object.defineProperty(r,"yRotation",{get:ExpressionPropertyInterface(s.ry)}),Object.defineProperty(r,"scale",{get:ExpressionPropertyInterface(s.s)});var n,t,a,l;return s.p?l=ExpressionPropertyInterface(s.p):(n=ExpressionPropertyInterface(s.px),t=ExpressionPropertyInterface(s.py),s.pz&&(a=ExpressionPropertyInterface(s.pz))),Object.defineProperty(r,"position",{get:function(){return s.p?l():[n(),t(),a?a():0]}}),Object.defineProperty(r,"xPosition",{get:ExpressionPropertyInterface(s.px)}),Object.defineProperty(r,"yPosition",{get:ExpressionPropertyInterface(s.py)}),Object.defineProperty(r,"zPosition",{get:ExpressionPropertyInterface(s.pz)}),Object.defineProperty(r,"anchorPoint",{get:ExpressionPropertyInterface(s.a)}),Object.defineProperty(r,"opacity",{get:ExpressionPropertyInterface(s.o)}),Object.defineProperty(r,"skew",{get:ExpressionPropertyInterface(s.sk)}),Object.defineProperty(r,"skewAxis",{get:ExpressionPropertyInterface(s.sa)}),Object.defineProperty(r,"orientation",{get:ExpressionPropertyInterface(s.or)}),r}}(),LayerExpressionInterface=function(){function s(f){var y=new Matrix;if(f!==void 0){var _=this._elem.finalTransform.mProp.getValueAtTime(f);_.clone(y)}else{var u=this._elem.finalTransform.mProp;u.applyToMatrix(y)}return y}function r(f,y){var _=this.getMatrix(y);return _.props[12]=0,_.props[13]=0,_.props[14]=0,this.applyPoint(_,f)}function n(f,y){var _=this.getMatrix(y);return this.applyPoint(_,f)}function t(f,y){var _=this.getMatrix(y);return _.props[12]=0,_.props[13]=0,_.props[14]=0,this.invertPoint(_,f)}function a(f,y){var _=this.getMatrix(y);return this.invertPoint(_,f)}function l(f,y){if(this._elem.hierarchy&&this._elem.hierarchy.length){var _,u=this._elem.hierarchy.length;for(_=0;_<u;_+=1)this._elem.hierarchy[_].finalTransform.mProp.applyToMatrix(f)}return f.applyToPointArray(y[0],y[1],y[2]||0)}function o(f,y){if(this._elem.hierarchy&&this._elem.hierarchy.length){var _,u=this._elem.hierarchy.length;for(_=0;_<u;_+=1)this._elem.hierarchy[_].finalTransform.mProp.applyToMatrix(f)}return f.inversePoint(y)}function c(f){var y=new Matrix;if(y.reset(),this._elem.finalTransform.mProp.applyToMatrix(y),this._elem.hierarchy&&this._elem.hierarchy.length){var _,u=this._elem.hierarchy.length;for(_=0;_<u;_+=1)this._elem.hierarchy[_].finalTransform.mProp.applyToMatrix(y);return y.inversePoint(f)}return y.inversePoint(f)}function i(){return[1,1,1,1]}return function(f){var y;function _(g){m.mask=new MaskManagerInterface(g,f)}function u(g){m.effect=g}function m(g){switch(g){case"ADBE Root Vectors Group":case"Contents":case 2:return m.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return y;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return m.effect;case"ADBE Text Properties":return m.textInterface;default:return null}}m.getMatrix=s,m.invertPoint=o,m.applyPoint=l,m.toWorld=n,m.toWorldVec=r,m.fromWorld=a,m.fromWorldVec=t,m.toComp=n,m.fromComp=c,m.sampleImage=i,m.sourceRectAtTime=f.sourceRectAtTime.bind(f),m._elem=f,y=TransformExpressionInterface(f.finalTransform.mProp);var p=getDescriptor(y,"anchorPoint");return Object.defineProperties(m,{hasParent:{get:function(){return f.hierarchy.length}},parent:{get:function(){return f.hierarchy[0].layerInterface}},rotation:getDescriptor(y,"rotation"),scale:getDescriptor(y,"scale"),position:getDescriptor(y,"position"),opacity:getDescriptor(y,"opacity"),anchorPoint:p,anchor_point:p,transform:{get:function(){return y}},active:{get:function(){return f.isInRange}}}),m.startTime=f.data.st,m.index=f.data.ind,m.source=f.data.refId,m.height=f.data.ty===0?f.data.h:100,m.width=f.data.ty===0?f.data.w:100,m.inPoint=f.data.ip/f.comp.globalData.frameRate,m.outPoint=f.data.op/f.comp.globalData.frameRate,m._name=f.data.nm,m.registerMaskInterface=_,m.registerEffectsInterface=u,m}}(),propertyGroupFactory=function(){return function(s,r){return function(n){return n=n===void 0?1:n,n<=0?s:r(n-1)}}}(),PropertyInterface=function(){return function(s,r){var n={_name:s};function t(a){return a=a===void 0?1:a,a<=0?n:r(a-1)}return t}}(),EffectsExpressionInterface=function(){var s={createEffectsInterface:r};function r(a,l){if(a.effectsManager){var o=[],c=a.data.ef,i,f=a.effectsManager.effectElements.length;for(i=0;i<f;i+=1)o.push(n(c[i],a.effectsManager.effectElements[i],l,a));var y=a.data.ef||[],_=function(m){for(i=0,f=y.length;i<f;){if(m===y[i].nm||m===y[i].mn||m===y[i].ix)return o[i];i+=1}return null};return Object.defineProperty(_,"numProperties",{get:function(){return y.length}}),_}return null}function n(a,l,o,c){function i(m){for(var p=a.ef,g=0,x=p.length;g<x;){if(m===p[g].nm||m===p[g].mn||m===p[g].ix)return p[g].ty===5?y[g]:y[g]();g+=1}throw new Error}var f=propertyGroupFactory(i,o),y=[],_,u=a.ef.length;for(_=0;_<u;_+=1)a.ef[_].ty===5?y.push(n(a.ef[_],l.effectElements[_],l.effectElements[_].propertyGroup,c)):y.push(t(l.effectElements[_],a.ef[_].ty,c,f));return a.mn==="ADBE Color Control"&&Object.defineProperty(i,"color",{get:function(){return y[0]()}}),Object.defineProperties(i,{numProperties:{get:function(){return a.np}},_name:{value:a.nm},propertyGroup:{value:f}}),i.enabled=a.en!==0,i.active=i.enabled,i}function t(a,l,o,c){var i=ExpressionPropertyInterface(a.p);function f(){return l===10?o.comp.compInterface(a.p.v):i()}return a.p.setGroupProperty&&a.p.setGroupProperty(PropertyInterface("",c)),f}return s}(),ShapePathInterface=function(){return function(r,n,t){var a=n.sh;function l(c){return c==="Shape"||c==="shape"||c==="Path"||c==="path"||c==="ADBE Vector Shape"||c===2?l.path:null}var o=propertyGroupFactory(l,t);return a.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(l,{path:{get:function(){return a.k&&a.getValue(),a}},shape:{get:function(){return a.k&&a.getValue(),a}},_name:{value:r.nm},ix:{value:r.ix},propertyIndex:{value:r.ix},mn:{value:r.mn},propertyGroup:{value:t}}),l}}(),ShapeExpressionInterface=function(){function s(p,g,x){var b=[],E,S=p?p.length:0;for(E=0;E<S;E+=1)p[E].ty==="gr"?b.push(n(p[E],g[E],x)):p[E].ty==="fl"?b.push(t(p[E],g[E],x)):p[E].ty==="st"?b.push(o(p[E],g[E],x)):p[E].ty==="tm"?b.push(c(p[E],g[E],x)):p[E].ty==="tr"||(p[E].ty==="el"?b.push(f(p[E],g[E],x)):p[E].ty==="sr"?b.push(y(p[E],g[E],x)):p[E].ty==="sh"?b.push(ShapePathInterface(p[E],g[E],x)):p[E].ty==="rc"?b.push(_(p[E],g[E],x)):p[E].ty==="rd"?b.push(u(p[E],g[E],x)):p[E].ty==="rp"?b.push(m(p[E],g[E],x)):p[E].ty==="gf"?b.push(a(p[E],g[E],x)):b.push(l(p[E],g[E])));return b}function r(p,g,x){var b,E=function(T){for(var j=0,A=b.length;j<A;){if(b[j]._name===T||b[j].mn===T||b[j].propertyIndex===T||b[j].ix===T||b[j].ind===T)return b[j];j+=1}return typeof T=="number"?b[T-1]:null};E.propertyGroup=propertyGroupFactory(E,x),b=s(p.it,g.it,E.propertyGroup),E.numProperties=b.length;var S=i(p.it[p.it.length-1],g.it[g.it.length-1],E.propertyGroup);return E.transform=S,E.propertyIndex=p.cix,E._name=p.nm,E}function n(p,g,x){var b=function(T){switch(T){case"ADBE Vectors Group":case"Contents":case 2:return b.content;default:return b.transform}};b.propertyGroup=propertyGroupFactory(b,x);var E=r(p,g,b.propertyGroup),S=i(p.it[p.it.length-1],g.it[g.it.length-1],b.propertyGroup);return b.content=E,b.transform=S,Object.defineProperty(b,"_name",{get:function(){return p.nm}}),b.numProperties=p.np,b.propertyIndex=p.ix,b.nm=p.nm,b.mn=p.mn,b}function t(p,g,x){function b(E){return E==="Color"||E==="color"?b.color:E==="Opacity"||E==="opacity"?b.opacity:null}return Object.defineProperties(b,{color:{get:ExpressionPropertyInterface(g.c)},opacity:{get:ExpressionPropertyInterface(g.o)},_name:{value:p.nm},mn:{value:p.mn}}),g.c.setGroupProperty(PropertyInterface("Color",x)),g.o.setGroupProperty(PropertyInterface("Opacity",x)),b}function a(p,g,x){function b(E){return E==="Start Point"||E==="start point"?b.startPoint:E==="End Point"||E==="end point"?b.endPoint:E==="Opacity"||E==="opacity"?b.opacity:null}return Object.defineProperties(b,{startPoint:{get:ExpressionPropertyInterface(g.s)},endPoint:{get:ExpressionPropertyInterface(g.e)},opacity:{get:ExpressionPropertyInterface(g.o)},type:{get:function(){return"a"}},_name:{value:p.nm},mn:{value:p.mn}}),g.s.setGroupProperty(PropertyInterface("Start Point",x)),g.e.setGroupProperty(PropertyInterface("End Point",x)),g.o.setGroupProperty(PropertyInterface("Opacity",x)),b}function l(){function p(){return null}return p}function o(p,g,x){var b=propertyGroupFactory(A,x),E=propertyGroupFactory(j,b);function S(C){Object.defineProperty(j,p.d[C].nm,{get:ExpressionPropertyInterface(g.d.dataProps[C].p)})}var k,T=p.d?p.d.length:0,j={};for(k=0;k<T;k+=1)S(k),g.d.dataProps[k].p.setGroupProperty(E);function A(C){return C==="Color"||C==="color"?A.color:C==="Opacity"||C==="opacity"?A.opacity:C==="Stroke Width"||C==="stroke width"?A.strokeWidth:null}return Object.defineProperties(A,{color:{get:ExpressionPropertyInterface(g.c)},opacity:{get:ExpressionPropertyInterface(g.o)},strokeWidth:{get:ExpressionPropertyInterface(g.w)},dash:{get:function(){return j}},_name:{value:p.nm},mn:{value:p.mn}}),g.c.setGroupProperty(PropertyInterface("Color",b)),g.o.setGroupProperty(PropertyInterface("Opacity",b)),g.w.setGroupProperty(PropertyInterface("Stroke Width",b)),A}function c(p,g,x){function b(S){return S===p.e.ix||S==="End"||S==="end"?b.end:S===p.s.ix?b.start:S===p.o.ix?b.offset:null}var E=propertyGroupFactory(b,x);return b.propertyIndex=p.ix,g.s.setGroupProperty(PropertyInterface("Start",E)),g.e.setGroupProperty(PropertyInterface("End",E)),g.o.setGroupProperty(PropertyInterface("Offset",E)),b.propertyIndex=p.ix,b.propertyGroup=x,Object.defineProperties(b,{start:{get:ExpressionPropertyInterface(g.s)},end:{get:ExpressionPropertyInterface(g.e)},offset:{get:ExpressionPropertyInterface(g.o)},_name:{value:p.nm}}),b.mn=p.mn,b}function i(p,g,x){function b(S){return p.a.ix===S||S==="Anchor Point"?b.anchorPoint:p.o.ix===S||S==="Opacity"?b.opacity:p.p.ix===S||S==="Position"?b.position:p.r.ix===S||S==="Rotation"||S==="ADBE Vector Rotation"?b.rotation:p.s.ix===S||S==="Scale"?b.scale:p.sk&&p.sk.ix===S||S==="Skew"?b.skew:p.sa&&p.sa.ix===S||S==="Skew Axis"?b.skewAxis:null}var E=propertyGroupFactory(b,x);return g.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",E)),g.transform.mProps.p.setGroupProperty(PropertyInterface("Position",E)),g.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",E)),g.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",E)),g.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",E)),g.transform.mProps.sk&&(g.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",E)),g.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",E))),g.transform.op.setGroupProperty(PropertyInterface("Opacity",E)),Object.defineProperties(b,{opacity:{get:ExpressionPropertyInterface(g.transform.mProps.o)},position:{get:ExpressionPropertyInterface(g.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(g.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(g.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(g.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(g.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(g.transform.mProps.sa)},_name:{value:p.nm}}),b.ty="tr",b.mn=p.mn,b.propertyGroup=x,b}function f(p,g,x){function b(k){return p.p.ix===k?b.position:p.s.ix===k?b.size:null}var E=propertyGroupFactory(b,x);b.propertyIndex=p.ix;var S=g.sh.ty==="tm"?g.sh.prop:g.sh;return S.s.setGroupProperty(PropertyInterface("Size",E)),S.p.setGroupProperty(PropertyInterface("Position",E)),Object.defineProperties(b,{size:{get:ExpressionPropertyInterface(S.s)},position:{get:ExpressionPropertyInterface(S.p)},_name:{value:p.nm}}),b.mn=p.mn,b}function y(p,g,x){function b(k){return p.p.ix===k?b.position:p.r.ix===k?b.rotation:p.pt.ix===k?b.points:p.or.ix===k||k==="ADBE Vector Star Outer Radius"?b.outerRadius:p.os.ix===k?b.outerRoundness:p.ir&&(p.ir.ix===k||k==="ADBE Vector Star Inner Radius")?b.innerRadius:p.is&&p.is.ix===k?b.innerRoundness:null}var E=propertyGroupFactory(b,x),S=g.sh.ty==="tm"?g.sh.prop:g.sh;return b.propertyIndex=p.ix,S.or.setGroupProperty(PropertyInterface("Outer Radius",E)),S.os.setGroupProperty(PropertyInterface("Outer Roundness",E)),S.pt.setGroupProperty(PropertyInterface("Points",E)),S.p.setGroupProperty(PropertyInterface("Position",E)),S.r.setGroupProperty(PropertyInterface("Rotation",E)),p.ir&&(S.ir.setGroupProperty(PropertyInterface("Inner Radius",E)),S.is.setGroupProperty(PropertyInterface("Inner Roundness",E))),Object.defineProperties(b,{position:{get:ExpressionPropertyInterface(S.p)},rotation:{get:ExpressionPropertyInterface(S.r)},points:{get:ExpressionPropertyInterface(S.pt)},outerRadius:{get:ExpressionPropertyInterface(S.or)},outerRoundness:{get:ExpressionPropertyInterface(S.os)},innerRadius:{get:ExpressionPropertyInterface(S.ir)},innerRoundness:{get:ExpressionPropertyInterface(S.is)},_name:{value:p.nm}}),b.mn=p.mn,b}function _(p,g,x){function b(k){return p.p.ix===k?b.position:p.r.ix===k?b.roundness:p.s.ix===k||k==="Size"||k==="ADBE Vector Rect Size"?b.size:null}var E=propertyGroupFactory(b,x),S=g.sh.ty==="tm"?g.sh.prop:g.sh;return b.propertyIndex=p.ix,S.p.setGroupProperty(PropertyInterface("Position",E)),S.s.setGroupProperty(PropertyInterface("Size",E)),S.r.setGroupProperty(PropertyInterface("Rotation",E)),Object.defineProperties(b,{position:{get:ExpressionPropertyInterface(S.p)},roundness:{get:ExpressionPropertyInterface(S.r)},size:{get:ExpressionPropertyInterface(S.s)},_name:{value:p.nm}}),b.mn=p.mn,b}function u(p,g,x){function b(k){return p.r.ix===k||k==="Round Corners 1"?b.radius:null}var E=propertyGroupFactory(b,x),S=g;return b.propertyIndex=p.ix,S.rd.setGroupProperty(PropertyInterface("Radius",E)),Object.defineProperties(b,{radius:{get:ExpressionPropertyInterface(S.rd)},_name:{value:p.nm}}),b.mn=p.mn,b}function m(p,g,x){function b(k){return p.c.ix===k||k==="Copies"?b.copies:p.o.ix===k||k==="Offset"?b.offset:null}var E=propertyGroupFactory(b,x),S=g;return b.propertyIndex=p.ix,S.c.setGroupProperty(PropertyInterface("Copies",E)),S.o.setGroupProperty(PropertyInterface("Offset",E)),Object.defineProperties(b,{copies:{get:ExpressionPropertyInterface(S.c)},offset:{get:ExpressionPropertyInterface(S.o)},_name:{value:p.nm}}),b.mn=p.mn,b}return function(p,g,x){var b;function E(k){if(typeof k=="number")return k=k===void 0?1:k,k===0?x:b[k-1];for(var T=0,j=b.length;T<j;){if(b[T]._name===k)return b[T];T+=1}return null}function S(){return x}return E.propertyGroup=propertyGroupFactory(E,S),b=s(p,g,E.propertyGroup),E.numProperties=b.length,E._name="Contents",E}}(),TextExpressionInterface=function(){return function(s){var r;function n(t){switch(t){case"ADBE Text Document":return n.sourceText;default:return null}}return Object.defineProperty(n,"sourceText",{get:function(){s.textProperty.getValue();var a=s.textProperty.currentData.t;return(!r||a!==r.value)&&(r=new String(a),r.value=a||new String(a),Object.defineProperty(r,"style",{get:function(){return{fillColor:s.textProperty.currentData.fc}}})),r}}),n}}();function _typeof(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(s)}var FootageInterface=function(){var s=function(t){var a="",l=t.getFootageData();function o(){return a="",l=t.getFootageData(),c}function c(i){if(l[i])return a=i,l=l[i],_typeof(l)==="object"?c:l;var f=i.indexOf(a);if(f!==-1){var y=parseInt(i.substr(f+a.length),10);return l=l[y],_typeof(l)==="object"?c:l}return""}return o},r=function(t){function a(l){return l==="Outline"?a.outlineInterface():null}return a._name="Outline",a.outlineInterface=s(t),a};return function(n){function t(a){return a==="Data"?t.dataInterface:null}return t._name="Data",t.dataInterface=r(n),t}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(s){return interfaces[s]||null}var expressionHelpers=function(){function s(o,c,i){c.x&&(i.k=!0,i.x=!0,i.initiateExpression=ExpressionManager.initiateExpression,i.effectsSequence.push(i.initiateExpression(o,c,i).bind(i)))}function r(o){return o*=this.elem.globalData.frameRate,o-=this.offsetTime,o!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<o?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(o,this._cachingAtTime),this._cachingAtTime.lastFrame=o),this._cachingAtTime.value}function n(o){var c=-.01,i=this.getValueAtTime(o),f=this.getValueAtTime(o+c),y=0;if(i.length){var _;for(_=0;_<i.length;_+=1)y+=Math.pow(f[_]-i[_],2);y=Math.sqrt(y)*100}else y=0;return y}function t(o){if(this.vel!==void 0)return this.vel;var c=-.001,i=this.getValueAtTime(o),f=this.getValueAtTime(o+c),y;if(i.length){y=createTypedArray("float32",i.length);var _;for(_=0;_<i.length;_+=1)y[_]=(f[_]-i[_])/c}else y=(f-i)/c;return y}function a(){return this.pv}function l(o){this.propertyGroup=o}return{searchExpressions:s,getSpeedAtTime:n,getVelocityAtTime:t,getValueAtTime:r,getStaticValueAtTime:a,setGroupProperty:l}}();function addPropertyDecorator(){function s(u,m,p){if(!this.k||!this.keyframes)return this.pv;u=u?u.toLowerCase():"";var g=this.comp.renderedFrame,x=this.keyframes,b=x[x.length-1].t;if(g<=b)return this.pv;var E,S;p?(m?E=Math.abs(b-this.elem.comp.globalData.frameRate*m):E=Math.max(0,b-this.elem.data.ip),S=b-E):((!m||m>x.length-1)&&(m=x.length-1),S=x[x.length-1-m].t,E=b-S);var k,T,j;if(u==="pingpong"){var A=Math.floor((g-S)/E);if(A%2!==0)return this.getValueAtTime((E-(g-S)%E+S)/this.comp.globalData.frameRate,0)}else if(u==="offset"){var C=this.getValueAtTime(S/this.comp.globalData.frameRate,0),N=this.getValueAtTime(b/this.comp.globalData.frameRate,0),V=this.getValueAtTime(((g-S)%E+S)/this.comp.globalData.frameRate,0),I=Math.floor((g-S)/E);if(this.pv.length){for(j=new Array(C.length),T=j.length,k=0;k<T;k+=1)j[k]=(N[k]-C[k])*I+V[k];return j}return(N-C)*I+V}else if(u==="continue"){var G=this.getValueAtTime(b/this.comp.globalData.frameRate,0),R=this.getValueAtTime((b-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(j=new Array(G.length),T=j.length,k=0;k<T;k+=1)j[k]=G[k]+(G[k]-R[k])*((g-b)/this.comp.globalData.frameRate)/5e-4;return j}return G+(G-R)*((g-b)/.001)}return this.getValueAtTime(((g-S)%E+S)/this.comp.globalData.frameRate,0)}function r(u,m,p){if(!this.k)return this.pv;u=u?u.toLowerCase():"";var g=this.comp.renderedFrame,x=this.keyframes,b=x[0].t;if(g>=b)return this.pv;var E,S;p?(m?E=Math.abs(this.elem.comp.globalData.frameRate*m):E=Math.max(0,this.elem.data.op-b),S=b+E):((!m||m>x.length-1)&&(m=x.length-1),S=x[m].t,E=S-b);var k,T,j;if(u==="pingpong"){var A=Math.floor((b-g)/E);if(A%2===0)return this.getValueAtTime(((b-g)%E+b)/this.comp.globalData.frameRate,0)}else if(u==="offset"){var C=this.getValueAtTime(b/this.comp.globalData.frameRate,0),N=this.getValueAtTime(S/this.comp.globalData.frameRate,0),V=this.getValueAtTime((E-(b-g)%E+b)/this.comp.globalData.frameRate,0),I=Math.floor((b-g)/E)+1;if(this.pv.length){for(j=new Array(C.length),T=j.length,k=0;k<T;k+=1)j[k]=V[k]-(N[k]-C[k])*I;return j}return V-(N-C)*I}else if(u==="continue"){var G=this.getValueAtTime(b/this.comp.globalData.frameRate,0),R=this.getValueAtTime((b+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(j=new Array(G.length),T=j.length,k=0;k<T;k+=1)j[k]=G[k]+(G[k]-R[k])*(b-g)/.001;return j}return G+(G-R)*(b-g)/.001}return this.getValueAtTime((E-((b-g)%E+b))/this.comp.globalData.frameRate,0)}function n(u,m){if(!this.k)return this.pv;if(u=(u||.4)*.5,m=Math.floor(m||5),m<=1)return this.pv;var p=this.comp.renderedFrame/this.comp.globalData.frameRate,g=p-u,x=p+u,b=m>1?(x-g)/(m-1):1,E=0,S=0,k;this.pv.length?k=createTypedArray("float32",this.pv.length):k=0;for(var T;E<m;){if(T=this.getValueAtTime(g+E*b),this.pv.length)for(S=0;S<this.pv.length;S+=1)k[S]+=T[S];else k+=T;E+=1}if(this.pv.length)for(S=0;S<this.pv.length;S+=1)k[S]/=m;else k/=m;return k}function t(u){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var m=this._transformCachingAtTime.v;if(m.cloneFromProps(this.pre.props),this.appliedTransformations<1){var p=this.a.getValueAtTime(u);m.translate(-p[0]*this.a.mult,-p[1]*this.a.mult,p[2]*this.a.mult)}if(this.appliedTransformations<2){var g=this.s.getValueAtTime(u);m.scale(g[0]*this.s.mult,g[1]*this.s.mult,g[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var x=this.sk.getValueAtTime(u),b=this.sa.getValueAtTime(u);m.skewFromAxis(-x*this.sk.mult,b*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var E=this.r.getValueAtTime(u);m.rotate(-E*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var S=this.rz.getValueAtTime(u),k=this.ry.getValueAtTime(u),T=this.rx.getValueAtTime(u),j=this.or.getValueAtTime(u);m.rotateZ(-S*this.rz.mult).rotateY(k*this.ry.mult).rotateX(T*this.rx.mult).rotateZ(-j[2]*this.or.mult).rotateY(j[1]*this.or.mult).rotateX(j[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var A=this.px.getValueAtTime(u),C=this.py.getValueAtTime(u);if(this.data.p.z){var N=this.pz.getValueAtTime(u);m.translate(A*this.px.mult,C*this.py.mult,-N*this.pz.mult)}else m.translate(A*this.px.mult,C*this.py.mult,0)}else{var V=this.p.getValueAtTime(u);m.translate(V[0]*this.p.mult,V[1]*this.p.mult,-V[2]*this.p.mult)}return m}function a(){return this.v.clone(new Matrix)}var l=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(u,m,p){var g=l(u,m,p);return g.dynamicProperties.length?g.getValueAtTime=t.bind(g):g.getValueAtTime=a.bind(g),g.setGroupProperty=expressionHelpers.setGroupProperty,g};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(u,m,p,g,x){var b=o(u,m,p,g,x);b.kf?b.getValueAtTime=expressionHelpers.getValueAtTime.bind(b):b.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(b),b.setGroupProperty=expressionHelpers.setGroupProperty,b.loopOut=s,b.loopIn=r,b.smooth=n,b.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(b),b.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(b),b.numKeys=m.a===1?m.k.length:0,b.propertyIndex=m.ix;var E=0;return p!==0&&(E=createTypedArray("float32",m.a===1?m.k[0].s.length:m.k.length)),b._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:E},expressionHelpers.searchExpressions(u,m,b),b.k&&x.addDynamicProperty(b),b};function c(u){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),u*=this.elem.globalData.frameRate,u-=this.offsetTime,u!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<u?this._caching.lastIndex:0,this._cachingAtTime.lastTime=u,this.interpolateShape(u,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var i=ShapePropertyFactory.getConstructorFunction(),f=ShapePropertyFactory.getKeyframedConstructorFunction();function y(){}y.prototype={vertices:function(m,p){this.k&&this.getValue();var g=this.v;p!==void 0&&(g=this.getValueAtTime(p,0));var x,b=g._length,E=g[m],S=g.v,k=createSizedArray(b);for(x=0;x<b;x+=1)m==="i"||m==="o"?k[x]=[E[x][0]-S[x][0],E[x][1]-S[x][1]]:k[x]=[E[x][0],E[x][1]];return k},points:function(m){return this.vertices("v",m)},inTangents:function(m){return this.vertices("i",m)},outTangents:function(m){return this.vertices("o",m)},isClosed:function(){return this.v.c},pointOnPath:function(m,p){var g=this.v;p!==void 0&&(g=this.getValueAtTime(p,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(g));for(var x=this._segmentsLength,b=x.lengths,E=x.totalLength*m,S=0,k=b.length,T=0,j;S<k;){if(T+b[S].addedLength>E){var A=S,C=g.c&&S===k-1?0:S+1,N=(E-T)/b[S].addedLength;j=bez.getPointInSegment(g.v[A],g.v[C],g.o[A],g.i[C],N,b[S]);break}else T+=b[S].addedLength;S+=1}return j||(j=g.c?[g.v[0][0],g.v[0][1]]:[g.v[g._length-1][0],g.v[g._length-1][1]]),j},vectorOnPath:function(m,p,g){m==1?m=this.v.c:m==0&&(m=.999);var x=this.pointOnPath(m,p),b=this.pointOnPath(m+.001,p),E=b[0]-x[0],S=b[1]-x[1],k=Math.sqrt(Math.pow(E,2)+Math.pow(S,2));if(k===0)return[0,0];var T=g==="tangent"?[E/k,S/k]:[-S/k,E/k];return T},tangentOnPath:function(m,p){return this.vectorOnPath(m,p,"tangent")},normalOnPath:function(m,p){return this.vectorOnPath(m,p,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([y],i),extendPrototype([y],f),f.prototype.getValueAtTime=c,f.prototype.initiateExpression=ExpressionManager.initiateExpression;var _=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(u,m,p,g,x){var b=_(u,m,p,g,x);return b.propertyIndex=m.ix,b.lock=!1,p===3?expressionHelpers.searchExpressions(u,m.pt,b):p===4&&expressionHelpers.searchExpressions(u,m.ks,b),b.k&&u.addDynamicProperty(b),b}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function s(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(r,n){var t=this.calculateExpression(n);if(r.t!==t){var a={};return this.copyData(a,r),a.t=t.toString(),a.__complete=!1,a}return r},TextProperty.prototype.searchProperty=function(){var r=this.searchKeyframes(),n=this.searchExpressions();return this.kf=r||n,this.kf},TextProperty.prototype.searchExpressions=s}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function s(r,n){var t=createNS("feMerge");t.setAttribute("result",r);var a,l;for(l=0;l<n.length;l+=1)a=createNS("feMergeNode"),a.setAttribute("in",n[l]),t.appendChild(a),t.appendChild(a);return t}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(s,r,n,t,a){this.filterManager=r;var l=createNS("feColorMatrix");l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","linearRGB"),l.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=l,l.setAttribute("result",t+"_tint_1"),s.appendChild(l),l=createNS("feColorMatrix"),l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),l.setAttribute("result",t+"_tint_2"),s.appendChild(l),this.matrixFilter=l;var o=this.createMergeNode(t,[a,t+"_tint_1",t+"_tint_2"]);s.appendChild(o)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,t=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+t+" 0"),this.matrixFilter.setAttribute("values",n[0]-r[0]+" 0 0 0 "+r[0]+" "+(n[1]-r[1])+" 0 0 0 "+r[1]+" "+(n[2]-r[2])+" 0 0 0 "+r[2]+" 0 0 0 1 0")}};function SVGFillFilter(s,r,n,t){this.filterManager=r;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",t),s.appendChild(a),this.matrixFilter=a}SVGFillFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+r[0]+" 0 0 0 0 "+r[1]+" 0 0 0 0 "+r[2]+" 0 0 0 "+n+" 0")}};function SVGStrokeEffect(s,r,n){this.initialized=!1,this.filterManager=r,this.elem=n,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var s=this.elem.layerElement.children||this.elem.layerElement.childNodes,r,n,t,a;for(this.filterManager.effectElements[1].p.v===1?(a=this.elem.maskManager.masksProperties.length,t=0):(t=this.filterManager.effectElements[0].p.v-1,a=t+1),n=createNS("g"),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-dashoffset",1),t;t<a;t+=1)r=createNS("path"),n.appendChild(r),this.paths.push({p:r,m:t});if(this.filterManager.effectElements[10].p.v===3){var l=createNS("mask"),o=createElementID();l.setAttribute("id",o),l.setAttribute("mask-type","alpha"),l.appendChild(n),this.elem.globalData.defs.appendChild(l);var c=createNS("g");for(c.setAttribute("mask","url("+getLocationHref()+"#"+o+")");s[0];)c.appendChild(s[0]);this.elem.layerElement.appendChild(c),this.masker=l,n.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(s=this.elem.layerElement.children||this.elem.layerElement.childNodes;s.length;)this.elem.layerElement.removeChild(s[0]);this.elem.layerElement.appendChild(n),this.elem.layerElement.removeAttribute("mask"),n.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=n},SVGStrokeEffect.prototype.renderFrame=function(s){this.initialized||this.initialize();var r,n=this.paths.length,t,a;for(r=0;r<n;r+=1)if(this.paths[r].m!==-1&&(t=this.elem.maskManager.viewData[this.paths[r].m],a=this.paths[r].p,(s||this.filterManager._mdf||t.prop._mdf)&&a.setAttribute("d",t.lastPath),s||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||t.prop._mdf)){var l;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,c=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,i=a.getTotalLength();l="0 0 0 "+i*o+" ";var f=i*(c-o),y=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,_=Math.floor(f/y),u;for(u=0;u<_;u+=1)l+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";l+="0 "+i*10+" 0 0"}else l="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;a.setAttribute("stroke-dasharray",l)}if((s||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(s||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(s||this.filterManager.effectElements[3].p._mdf)){var m=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(m[0]*255)+","+bmFloor(m[1]*255)+","+bmFloor(m[2]*255)+")")}};function SVGTritoneFilter(s,r,n,t){this.filterManager=r;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),s.appendChild(a);var l=createNS("feComponentTransfer");l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",t),this.matrixFilter=l;var o=createNS("feFuncR");o.setAttribute("type","table"),l.appendChild(o),this.feFuncR=o;var c=createNS("feFuncG");c.setAttribute("type","table"),l.appendChild(c),this.feFuncG=c;var i=createNS("feFuncB");i.setAttribute("type","table"),l.appendChild(i),this.feFuncB=i,s.appendChild(l)}SVGTritoneFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,t=this.filterManager.effectElements[2].p.v,a=t[0]+" "+n[0]+" "+r[0],l=t[1]+" "+n[1]+" "+r[1],o=t[2]+" "+n[2]+" "+r[2];this.feFuncR.setAttribute("tableValues",a),this.feFuncG.setAttribute("tableValues",l),this.feFuncB.setAttribute("tableValues",o)}};function SVGProLevelsFilter(s,r,n,t){this.filterManager=r;var a=this.filterManager.effectElements,l=createNS("feComponentTransfer");(a[10].p.k||a[10].p.v!==0||a[11].p.k||a[11].p.v!==1||a[12].p.k||a[12].p.v!==1||a[13].p.k||a[13].p.v!==0||a[14].p.k||a[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",l)),(a[17].p.k||a[17].p.v!==0||a[18].p.k||a[18].p.v!==1||a[19].p.k||a[19].p.v!==1||a[20].p.k||a[20].p.v!==0||a[21].p.k||a[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",l)),(a[24].p.k||a[24].p.v!==0||a[25].p.k||a[25].p.v!==1||a[26].p.k||a[26].p.v!==1||a[27].p.k||a[27].p.v!==0||a[28].p.k||a[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",l)),(a[31].p.k||a[31].p.v!==0||a[32].p.k||a[32].p.v!==1||a[33].p.k||a[33].p.v!==1||a[34].p.k||a[34].p.v!==0||a[35].p.k||a[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",l)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(l.setAttribute("color-interpolation-filters","sRGB"),s.appendChild(l)),(a[3].p.k||a[3].p.v!==0||a[4].p.k||a[4].p.v!==1||a[5].p.k||a[5].p.v!==1||a[6].p.k||a[6].p.v!==0||a[7].p.k||a[7].p.v!==1)&&(l=createNS("feComponentTransfer"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",t),s.appendChild(l),this.feFuncRComposed=this.createFeFunc("feFuncR",l),this.feFuncGComposed=this.createFeFunc("feFuncG",l),this.feFuncBComposed=this.createFeFunc("feFuncB",l))}SVGProLevelsFilter.prototype.createFeFunc=function(s,r){var n=createNS(s);return n.setAttribute("type","table"),r.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(s,r,n,t,a){for(var l=0,o=256,c,i=Math.min(s,r),f=Math.max(s,r),y=Array.call(null,{length:o}),_,u=0,m=a-t,p=r-s;l<=256;)c=l/256,c<=i?_=p<0?a:t:c>=f?_=p<0?t:a:_=t+m*Math.pow((c-s)/p,1/n),y[u]=_,u+=1,l+=256/(o-1);return y.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r,n=this.filterManager.effectElements;this.feFuncRComposed&&(s||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(r=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",r),this.feFuncGComposed.setAttribute("tableValues",r),this.feFuncBComposed.setAttribute("tableValues",r)),this.feFuncR&&(s||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(r=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",r)),this.feFuncG&&(s||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(r=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",r)),this.feFuncB&&(s||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(r=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",r)),this.feFuncA&&(s||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(r=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",r))}};function SVGDropShadowEffect(s,r,n,t,a){var l=r.container.globalData.renderConfig.filterSize,o=r.data.fs||l;s.setAttribute("x",o.x||l.x),s.setAttribute("y",o.y||l.y),s.setAttribute("width",o.width||l.width),s.setAttribute("height",o.height||l.height),this.filterManager=r;var c=createNS("feGaussianBlur");c.setAttribute("in","SourceAlpha"),c.setAttribute("result",t+"_drop_shadow_1"),c.setAttribute("stdDeviation","0"),this.feGaussianBlur=c,s.appendChild(c);var i=createNS("feOffset");i.setAttribute("dx","25"),i.setAttribute("dy","0"),i.setAttribute("in",t+"_drop_shadow_1"),i.setAttribute("result",t+"_drop_shadow_2"),this.feOffset=i,s.appendChild(i);var f=createNS("feFlood");f.setAttribute("flood-color","#00ff00"),f.setAttribute("flood-opacity","1"),f.setAttribute("result",t+"_drop_shadow_3"),this.feFlood=f,s.appendChild(f);var y=createNS("feComposite");y.setAttribute("in",t+"_drop_shadow_3"),y.setAttribute("in2",t+"_drop_shadow_2"),y.setAttribute("operator","in"),y.setAttribute("result",t+"_drop_shadow_4"),s.appendChild(y);var _=this.createMergeNode(t,[t+"_drop_shadow_4",a]);s.appendChild(_)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){if((s||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),s||this.filterManager.effectElements[0].p._mdf){var r=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)))}if((s||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),s||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,t=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=n*Math.cos(t),l=n*Math.sin(t);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",l)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(s,r,n){this.initialized=!1,this.filterManager=r,this.filterElem=s,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}SVGMatte3Effect.prototype.findSymbol=function(s){for(var r=0,n=_svgMatteSymbols.length;r<n;){if(_svgMatteSymbols[r]===s)return _svgMatteSymbols[r];r+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(s,r){var n=s.layerElement.parentNode;if(n){for(var t=n.children,a=0,l=t.length;a<l&&t[a]!==s.layerElement;)a+=1;var o;a<=l-2&&(o=t[a+1]);var c=createNS("use");c.setAttribute("href","#"+r),o?n.insertBefore(c,o):n.appendChild(c)}},SVGMatte3Effect.prototype.setElementAsMask=function(s,r){if(!this.findSymbol(r)){var n=createElementID(),t=createNS("mask");t.setAttribute("id",r.layerId),t.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(r);var a=s.globalData.defs;a.appendChild(t);var l=createNS("symbol");l.setAttribute("id",n),this.replaceInParent(r,n),l.appendChild(r.layerElement),a.appendChild(l);var o=createNS("use");o.setAttribute("href","#"+n),t.appendChild(o),r.data.hd=!1,r.show()}s.setMatte(r.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var s=this.filterManager.effectElements[0].p.v,r=this.elem.comp.elements,n=0,t=r.length;n<t;)r[n]&&r[n].data.ind===s&&this.setElementAsMask(this.elem,r[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(s,r,n,t){s.setAttribute("x","-100%"),s.setAttribute("y","-100%"),s.setAttribute("width","300%"),s.setAttribute("height","300%"),this.filterManager=r;var a=createNS("feGaussianBlur");a.setAttribute("result",t),s.appendChild(a),this.feGaussianBlur=a}SVGGaussianBlurEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=.3,n=this.filterManager.effectElements[0].p.v*r,t=this.filterManager.effectElements[1].p.v,a=t==3?0:n,l=t==2?0:n;this.feGaussianBlur.setAttribute("stdDeviation",a+" "+l);var o=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}};function TransformEffect(){}TransformEffect.prototype.init=function(s){this.effectsManager=s,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(s){if(this._opMdf=!1,this._mdf=!1,s||this.effectsManager._mdf){var r=this.effectsManager.effectElements,n=r[0].p.v,t=r[1].p.v,a=r[2].p.v===1,l=r[3].p.v,o=a?l:r[4].p.v,c=r[5].p.v,i=r[6].p.v,f=r[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(o*.01,l*.01,1),this.matrix.rotate(-f*degToRads),this.matrix.skewFromAxis(-c*degToRads,(i+90)*degToRads),this.matrix.translate(t[0],t[1],0),this._mdf=!0,this.opacity!==r[8].p.v&&(this.opacity=r[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(s,r){this.init(r)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(s){this.init(s)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports),ColorPicker_svelte_svelte_type_style_lang="";function create_fragment$j(s){let r,n,t,a,l,o,c,i,f,y,_,u,m,p,g,x,b,E,S,k,T,j,A,C,N,V,I,G,R,q,M,L,H;return{c(){r=element("div"),n=element("div"),t=element("div"),a=element("strong"),l=text("Red"),o=space(),c=element("input"),i=space(),f=element("input"),y=space(),_=element("div"),u=element("strong"),m=text("Green"),p=space(),g=element("input"),x=space(),b=element("input"),E=space(),S=element("div"),k=element("strong"),T=text("Blue"),j=space(),A=element("input"),C=space(),N=element("input"),V=space(),I=element("div"),G=element("div"),R=space(),q=element("div"),M=element("input"),this.h()},l(O){r=claim_element(O,"DIV",{class:!0});var U=children(r);n=claim_element(U,"DIV",{class:!0});var J=children(n);t=claim_element(J,"DIV",{class:!0});var Z=children(t);a=claim_element(Z,"STRONG",{class:!0});var z=children(a);l=claim_text(z,"Red"),z.forEach(detach),o=claim_space(Z),c=claim_element(Z,"INPUT",{type:!0,min:!0,max:!0,class:!0}),i=claim_space(Z),f=claim_element(Z,"INPUT",{class:!0,type:!0}),Z.forEach(detach),y=claim_space(J),_=claim_element(J,"DIV",{class:!0});var B=children(_);u=claim_element(B,"STRONG",{class:!0});var D=children(u);m=claim_text(D,"Green"),D.forEach(detach),p=claim_space(B),g=claim_element(B,"INPUT",{type:!0,min:!0,max:!0,class:!0}),x=claim_space(B),b=claim_element(B,"INPUT",{class:!0,type:!0}),B.forEach(detach),E=claim_space(J),S=claim_element(J,"DIV",{class:!0});var X=children(S);k=claim_element(X,"STRONG",{class:!0});var K=children(k);T=claim_text(K,"Blue"),K.forEach(detach),j=claim_space(X),A=claim_element(X,"INPUT",{type:!0,min:!0,max:!0,class:!0}),C=claim_space(X),N=claim_element(X,"INPUT",{class:!0,type:!0}),X.forEach(detach),J.forEach(detach),V=claim_space(U),I=claim_element(U,"DIV",{class:!0});var re=children(I);G=claim_element(re,"DIV",{class:!0,style:!0}),children(G).forEach(detach),R=claim_space(re),q=claim_element(re,"DIV",{});var se=children(q);M=claim_element(se,"INPUT",{class:!0,type:!0}),se.forEach(detach),re.forEach(detach),U.forEach(detach),this.h()},h(){attr(a,"class","svelte-potnje"),attr(c,"type","range"),attr(c,"min","0"),attr(c,"max","255"),attr(c,"class","svelte-potnje"),attr(f,"class","text-input svelte-potnje"),attr(f,"type","number"),attr(t,"class","color-component svelte-potnje"),attr(u,"class","svelte-potnje"),attr(g,"type","range"),attr(g,"min","0"),attr(g,"max","255"),attr(g,"class","svelte-potnje"),attr(b,"class","text-input svelte-potnje"),attr(b,"type","number"),attr(_,"class","color-component svelte-potnje"),attr(k,"class","svelte-potnje"),attr(A,"type","range"),attr(A,"min","0"),attr(A,"max","255"),attr(A,"class","svelte-potnje"),attr(N,"class","text-input svelte-potnje"),attr(N,"type","number"),attr(S,"class","color-component svelte-potnje"),attr(n,"class","color-selectors svelte-potnje"),attr(G,"class","preview svelte-potnje"),set_style(G,"background",s[4]),attr(M,"class","text-input svelte-potnje"),attr(M,"type","text"),M.value=s[3],attr(I,"class","color-preview svelte-potnje"),attr(r,"class","color-picker svelte-potnje")},m(O,U){insert_hydration(O,r,U),append_hydration(r,n),append_hydration(n,t),append_hydration(t,a),append_hydration(a,l),append_hydration(t,o),append_hydration(t,c),set_input_value(c,s[0]),append_hydration(t,i),append_hydration(t,f),set_input_value(f,s[0]),append_hydration(n,y),append_hydration(n,_),append_hydration(_,u),append_hydration(u,m),append_hydration(_,p),append_hydration(_,g),set_input_value(g,s[1]),append_hydration(_,x),append_hydration(_,b),set_input_value(b,s[1]),append_hydration(n,E),append_hydration(n,S),append_hydration(S,k),append_hydration(k,T),append_hydration(S,j),append_hydration(S,A),set_input_value(A,s[2]),append_hydration(S,C),append_hydration(S,N),set_input_value(N,s[2]),append_hydration(r,V),append_hydration(r,I),append_hydration(I,G),append_hydration(I,R),append_hydration(I,q),append_hydration(q,M),L||(H=[listen$1(c,"change",s[7]),listen$1(c,"input",s[7]),listen$1(f,"input",s[8]),listen$1(g,"change",s[9]),listen$1(g,"input",s[9]),listen$1(b,"input",s[10]),listen$1(A,"change",s[11]),listen$1(A,"input",s[11]),listen$1(N,"input",s[12]),listen$1(M,"change",s[13])],L=!0)},p(O,[U]){U&1&&set_input_value(c,O[0]),U&1&&to_number(f.value)!==O[0]&&set_input_value(f,O[0]),U&2&&set_input_value(g,O[1]),U&2&&to_number(b.value)!==O[1]&&set_input_value(b,O[1]),U&4&&set_input_value(A,O[2]),U&4&&to_number(N.value)!==O[2]&&set_input_value(N,O[2]),U&16&&set_style(G,"background",O[4]),U&8&&M.value!==O[3]&&(M.value=O[3])},i:noop,o:noop,d(O){O&&detach(r),L=!1,run_all(H)}}}function instance$h(s,r,n){let t;const a=createEventDispatcher();let{color:l}=r,o=0,c=0,i=0,f=null;const y=E=>{if(typeof E!="string")return;let S=[];E[0]==="#"?S=E.length===4?[E.slice(1,2),E.slice(2,3),E.slice(3,4)].map(k=>parseInt(`${k}${k}`,16)):[E.slice(1,3),E.slice(3,5),E.slice(5,7)].map(k=>parseInt(k,16)):E.startsWith("rgb")&&(S=E.match(/\d+/g).map(k=>parseInt(k))),S.length&&(n(0,o=S[0]),n(1,c=S[1]),n(2,i=S[2]))};function _(){o=to_number(this.value),n(0,o)}function u(){o=to_number(this.value),n(0,o)}function m(){c=to_number(this.value),n(1,c)}function p(){c=to_number(this.value),n(1,c)}function g(){i=to_number(this.value),n(2,i)}function x(){i=to_number(this.value),n(2,i)}const b=E=>y(E.target.value);return s.$$set=E=>{"color"in E&&n(6,l=E.color)},s.$$.update=()=>{s.$$.dirty&64&&y(l),s.$$.dirty&7&&n(3,f="#"+(o|256).toString(16).slice(1)+(c|256).toString(16).slice(1)+(i|256).toString(16).slice(1)),s.$$.dirty&7&&n(4,t=`rgb(${o}, ${c}, ${i})`),s.$$.dirty&24&&a("color",{hex:f,rgb:t})},[o,c,i,f,t,y,l,_,u,m,p,g,x,b]}class ColorPicker extends SvelteComponent{constructor(r){super(),init(this,r,instance$h,create_fragment$j,safe_not_equal,{color:6})}}const Info_svelte_svelte_type_style_lang="";function create_if_block_10$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Lottie Version"),a=space(),l=element("span"),o=text(s[9]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Lottie Version"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[9]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&512&&set_data(o,c[9])},d(c){c&&detach(r)}}}function create_if_block_9$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Frames"),a=space(),l=element("span"),o=text(s[6]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Frames"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[6]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&64&&set_data(o,c[6])},d(c){c&&detach(r)}}}function create_if_block_8$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Frame Rate"),a=space(),l=element("span"),o=text(s[1]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Frame Rate"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[1]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&2&&set_data(o,c[1])},d(c){c&&detach(r)}}}function create_if_block_7$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Layers"),a=space(),l=element("span"),o=text(s[7]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Layers"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[7]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&128&&set_data(o,c[7])},d(c){c&&detach(r)}}}function create_if_block_6$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Assets"),a=space(),l=element("span"),o=text(s[4]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Assets"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[4]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&16&&set_data(o,c[4])},d(c){c&&detach(r)}}}function create_if_block_5$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Fonts"),a=space(),l=element("span"),o=text(s[5]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Fonts"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[5]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&32&&set_data(o,c[5])},d(c){c&&detach(r)}}}function create_if_block$a(s){let r,n,t,a,l,o,c=s[2]&&create_if_block_4$1(s),i=s[0]&&create_if_block_3$2(s),f=s[3]&&create_if_block_2$4(s),y=s[8]&&create_if_block_1$6(s);return{c(){r=element("hr"),n=space(),c&&c.c(),t=space(),i&&i.c(),a=space(),f&&f.c(),l=space(),y&&y.c(),o=empty()},l(_){r=claim_element(_,"HR",{}),n=claim_space(_),c&&c.l(_),t=claim_space(_),i&&i.l(_),a=claim_space(_),f&&f.l(_),l=claim_space(_),y&&y.l(_),o=empty()},m(_,u){insert_hydration(_,r,u),insert_hydration(_,n,u),c&&c.m(_,u),insert_hydration(_,t,u),i&&i.m(_,u),insert_hydration(_,a,u),f&&f.m(_,u),insert_hydration(_,l,u),y&&y.m(_,u),insert_hydration(_,o,u)},p(_,u){_[2]?c?c.p(_,u):(c=create_if_block_4$1(_),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),_[0]?i?i.p(_,u):(i=create_if_block_3$2(_),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null),_[3]?f?f.p(_,u):(f=create_if_block_2$4(_),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),_[8]?y?y.p(_,u):(y=create_if_block_1$6(_),y.c(),y.m(o.parentNode,o)):y&&(y.d(1),y=null)},d(_){_&&detach(r),_&&detach(n),c&&c.d(_),_&&detach(t),i&&i.d(_),_&&detach(a),f&&f.d(_),_&&detach(l),y&&y.d(_),_&&detach(o)}}}function create_if_block_4$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Generator"),a=space(),l=element("span"),o=text(s[2]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Generator"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[2]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&4&&set_data(o,c[2])},d(c){c&&detach(r)}}}function create_if_block_3$2(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Author"),a=space(),l=element("span"),o=text(s[0]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Author"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[0]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&1&&set_data(o,c[0])},d(c){c&&detach(r)}}}function create_if_block_2$4(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Keywords"),a=space(),l=element("span"),o=text(s[3]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Keywords"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[3]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&8&&set_data(o,c[3])},d(c){c&&detach(r)}}}function create_if_block_1$6(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Theme Color"),a=space(),l=element("span"),o=text(s[8]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Theme Color"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var y=children(l);o=claim_text(y,s[8]),y.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&256&&set_data(o,c[8])},d(c){c&&detach(r)}}}function create_fragment$i(s){let r,n,t,a,l,o,c,i,f,y,_=s[9]&&create_if_block_10$1(s),u=s[6]&&create_if_block_9$1(s),m=s[1]&&create_if_block_8$1(s),p=s[7]&&create_if_block_7$1(s),g=s[4]&&create_if_block_6$1(s),x=s[5]&&create_if_block_5$1(s),b=s[10]&&create_if_block$a(s);return{c(){r=element("h4"),n=text("Info"),t=space(),_&&_.c(),a=space(),u&&u.c(),l=space(),m&&m.c(),o=space(),p&&p.c(),c=space(),g&&g.c(),i=space(),x&&x.c(),f=space(),b&&b.c(),y=empty(),this.h()},l(E){r=claim_element(E,"H4",{class:!0});var S=children(r);n=claim_text(S,"Info"),S.forEach(detach),t=claim_space(E),_&&_.l(E),a=claim_space(E),u&&u.l(E),l=claim_space(E),m&&m.l(E),o=claim_space(E),p&&p.l(E),c=claim_space(E),g&&g.l(E),i=claim_space(E),x&&x.l(E),f=claim_space(E),b&&b.l(E),y=empty(),this.h()},h(){attr(r,"class","svelte-54ndm9")},m(E,S){insert_hydration(E,r,S),append_hydration(r,n),insert_hydration(E,t,S),_&&_.m(E,S),insert_hydration(E,a,S),u&&u.m(E,S),insert_hydration(E,l,S),m&&m.m(E,S),insert_hydration(E,o,S),p&&p.m(E,S),insert_hydration(E,c,S),g&&g.m(E,S),insert_hydration(E,i,S),x&&x.m(E,S),insert_hydration(E,f,S),b&&b.m(E,S),insert_hydration(E,y,S)},p(E,[S]){E[9]?_?_.p(E,S):(_=create_if_block_10$1(E),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null),E[6]?u?u.p(E,S):(u=create_if_block_9$1(E),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),E[1]?m?m.p(E,S):(m=create_if_block_8$1(E),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null),E[7]?p?p.p(E,S):(p=create_if_block_7$1(E),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null),E[4]?g?g.p(E,S):(g=create_if_block_6$1(E),g.c(),g.m(i.parentNode,i)):g&&(g.d(1),g=null),E[5]?x?x.p(E,S):(x=create_if_block_5$1(E),x.c(),x.m(f.parentNode,f)):x&&(x.d(1),x=null),E[10]?b?b.p(E,S):(b=create_if_block$a(E),b.c(),b.m(y.parentNode,y)):b&&(b.d(1),b=null)},i:noop,o:noop,d(E){E&&detach(r),E&&detach(t),_&&_.d(E),E&&detach(a),u&&u.d(E),E&&detach(l),m&&m.d(E),E&&detach(o),p&&p.d(E),E&&detach(c),g&&g.d(E),E&&detach(i),x&&x.d(E),E&&detach(f),b&&b.d(E),E&&detach(y)}}}function instance$g(s,r,n){let{animationData:t}=r,a,l,o,c,i,f,y,_,u,m,p=!1;return s.$$set=g=>{"animationData"in g&&n(11,t=g.animationData)},s.$$.update=()=>{s.$$.dirty&2048&&t&&(n(1,l=t.fr),n(4,i=t.assets?t.assets.length:0),n(5,f=t.fonts?t.fonts.length:0),n(6,y=t.op-t.ip),n(7,_=t.layers?t.layers.length:0),n(9,m=t.v),t.meta&&(n(10,p=!0),n(0,a=t.meta.a),n(2,o=t.meta.g),n(3,c=t.meta.k),n(8,u=t.meta.tc)))},[a,l,o,c,i,f,y,_,u,m,p,t]}class Info extends SvelteComponent{constructor(r){super(),init(this,r,instance$g,create_fragment$i,safe_not_equal,{animationData:11})}}const Popover_svelte_svelte_type_style_lang="",get_content_slot_changes=s=>({}),get_content_slot_context=s=>({}),get_target_slot_changes=s=>({}),get_target_slot_context=s=>({});function create_fragment$h(s){let r,n,t,a,l,o,c,i,f;const y=s[8].target,_=create_slot(y,s,s[7],get_target_slot_context),u=s[8].content,m=create_slot(u,s,s[7],get_content_slot_context);return{c(){r=element("div"),n=element("div"),_&&_.c(),t=space(),a=element("div"),m&&m.c(),l=space(),o=element("div"),this.h()},l(p){r=claim_element(p,"DIV",{class:!0});var g=children(r);n=claim_element(g,"DIV",{});var x=children(n);_&&_.l(x),x.forEach(detach),t=claim_space(g),a=claim_element(g,"DIV",{class:!0});var b=children(a);m&&m.l(b),l=claim_space(b),o=claim_element(b,"DIV",{class:!0,style:!0}),children(o).forEach(detach),b.forEach(detach),g.forEach(detach),this.h()},h(){attr(o,"class","arrow svelte-1i83hqr"),set_style(o,"border-color",s[0]+" transparent transparent transparent"),attr(a,"class","popover-content svelte-1i83hqr"),toggle_class(a,"hidden",!s[4]),toggle_class(a,"left-align",s[3]!==-1),toggle_class(a,"right-align",s[3]===-1),attr(r,"class","popover svelte-1i83hqr")},m(p,g){insert_hydration(p,r,g),append_hydration(r,n),_&&_.m(n,null),s[12](n),append_hydration(r,t),append_hydration(r,a),m&&m.m(a,null),append_hydration(a,l),append_hydration(a,o),s[13](a),c=!0,i||(f=[listen$1(r,"mousedown",s[9]),listen$1(r,"mouseover",s[5]),listen$1(r,"mouseout",s[6]),listen$1(r,"mouseup",s[10]),listen$1(r,"mousewheel",s[11])],i=!0)},p(p,[g]){_&&_.p&&(!c||g&128)&&update_slot_base(_,y,p,p[7],c?get_slot_changes(y,p[7],g,get_target_slot_changes):get_all_dirty_from_scope(p[7]),get_target_slot_context),m&&m.p&&(!c||g&128)&&update_slot_base(m,u,p,p[7],c?get_slot_changes(u,p[7],g,get_content_slot_changes):get_all_dirty_from_scope(p[7]),get_content_slot_context),(!c||g&1)&&set_style(o,"border-color",p[0]+" transparent transparent transparent"),(!c||g&16)&&toggle_class(a,"hidden",!p[4]),(!c||g&8)&&toggle_class(a,"left-align",p[3]!==-1),(!c||g&8)&&toggle_class(a,"right-align",p[3]===-1)},i(p){c||(transition_in(_,p),transition_in(m,p),c=!0)},o(p){transition_out(_,p),transition_out(m,p),c=!1},d(p){p&&detach(r),_&&_.d(p),s[12](null),m&&m.d(p),s[13](null),i=!1,run_all(f)}}}function instance$f(s,r,n){let{$$slots:t={},$$scope:a}=r,{color:l="transparent"}=r,o,c,i,f=!0;onMount(()=>{const b=o.getBoundingClientRect(),E=c.getBoundingClientRect();n(3,i=b.left+E.width>window.innerWidth?-1:0),n(2,c.style.bottom=b.height+"px",c),_()});const y=()=>{n(4,f=!0)},_=()=>{n(4,f=!1)};function u(b){bubble.call(this,s,b)}function m(b){bubble.call(this,s,b)}function p(b){bubble.call(this,s,b)}function g(b){binding_callbacks[b?"unshift":"push"](()=>{o=b,n(1,o)})}function x(b){binding_callbacks[b?"unshift":"push"](()=>{c=b,n(2,c)})}return s.$$set=b=>{"color"in b&&n(0,l=b.color),"$$scope"in b&&n(7,a=b.$$scope)},[l,o,c,i,f,y,_,a,t,u,m,p,g,x]}class Popover extends SvelteComponent{constructor(r){super(),init(this,r,instance$f,create_fragment$h,safe_not_equal,{color:0})}}const PlayerRender={SVG:"svg",Canvas:"canvas"},PlayerState={Loading:"loading",Playing:"playing",Paused:"paused",Stopped:"stopped",Frozen:"frozen",Error:"error"},PlayMode={Normal:"normal",Bounce:"bounce"},PlayerEvents={Load:"load",Error:"error",Ready:"ready",Play:"play",Pause:"pause",Stop:"stop",Freeze:"freeze",Loop:"loop",Complete:"complete",Frame:"frame"},ControlsLayoutOptions=["previousFrame","playpause","stop","nextFrame","progress","frame","loop","spacer","background","snapshot","info","zoom"],parseSrc=s=>{if(typeof s=="object")return s;try{return JSON.parse(s)}catch{return new URL(s,window.location.href).toString()}},triggerDownload=(s,r)=>{const n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n)},Controls_svelte_svelte_type_style_lang="";function get_each_context$4(s,r,n){const t=s.slice();return t[40]=r[n],t}function create_if_block_13(s){let r;return{c(){r=element("div"),this.h()},l(n){r=claim_element(n,"DIV",{class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"class","spacer svelte-y4y35s")},m(n,t){insert_hydration(n,r,t)},p:noop,i:noop,o:noop,d(n){n&&detach(r)}}}function create_if_block_12(s){let r,n,t,a,l,o,c,i=[s[19]],f={};for(let y=0;y<i.length;y+=1)f=assign(f,i[y]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("rect"),l=space(),this.h()},l(y){r=claim_element(y,"DIV",{class:!0});var _=children(r);n=claim_svg_element(_,"svg",{});var u=children(n);t=claim_svg_element(u,"path",{d:!0}),children(t).forEach(detach),a=claim_svg_element(u,"rect",{height:!0,rx:!0,transform:!0,width:!0}),children(a).forEach(detach),u.forEach(detach),l=claim_space(_),_.forEach(detach),this.h()},h(){attr(t,"d","M22 4.5a1.4 1.4 0 00-2.1-1.2l-13 7.5a1.4 1.4 0 000 2.4l13 7.5a1.4 1.4 0 002.1-1.2z"),attr(a,"height","17.1"),attr(a,"rx","1.4"),attr(a,"transform","matrix(-1 0 0 1 7.7 3.4)"),attr(a,"width","5.7"),set_svg_attributes(n,f),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s")},m(y,_){insert_hydration(y,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),o||(c=listen$1(r,"click",s[24]),o=!0)},p(y,_){toggle_class(n,"svelte-y4y35s",!0)},i:noop,o:noop,d(y){y&&detach(r),o=!1,c()}}}function create_if_block_11(s){let r,n,t,a,l,o,c,i=[s[19]],f={};for(let y=0;y<i.length;y+=1)f=assign(f,i[y]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("rect"),l=space(),this.h()},l(y){r=claim_element(y,"DIV",{class:!0});var _=children(r);n=claim_svg_element(_,"svg",{});var u=children(n);t=claim_svg_element(u,"path",{d:!0}),children(t).forEach(detach),a=claim_svg_element(u,"rect",{height:!0,rx:!0,transform:!0,width:!0}),children(a).forEach(detach),u.forEach(detach),l=claim_space(_),_.forEach(detach),this.h()},h(){attr(t,"d",`M2 19.513a1.429 1.429 0 0 0 2.148 1.234l12.88-7.513a1.429 1.429 0 0 0 0-2.468L4.147 3.253A1.429 1.429 0 0
            0 2 4.487z`),attr(a,"height","17.143"),attr(a,"rx","1.429"),attr(a,"transform","matrix(1 0 0 -1 16.286 20.571)"),attr(a,"width","5.714"),set_svg_attributes(n,f),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s")},m(y,_){insert_hydration(y,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),o||(c=listen$1(r,"click",s[23]),o=!0)},p(y,_){toggle_class(n,"svelte-y4y35s",!0)},i:noop,o:noop,d(y){y&&detach(r),o=!1,c()}}}function create_if_block_10(s){let r,n,t,a,l;return{c(){r=element("div"),n=element("input"),t=space(),this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);n=claim_element(c,"INPUT",{class:!0,type:!0}),t=claim_space(c),c.forEach(detach),this.h()},h(){attr(n,"class","frame-number svelte-y4y35s"),attr(n,"type","text"),attr(r,"class"," svelte-y4y35s")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),set_input_value(n,s[15]),append_hydration(r,t),a||(l=[listen$1(n,"input",s[34]),listen$1(n,"mouseout",s[35]),listen$1(n,"mouseover",s[36]),listen$1(n,"input",s[37]),listen$1(n,"mousewheel",s[38])],a=!0)},p(o,c){c[0]&32768&&n.value!==o[15]&&set_input_value(n,o[15])},i:noop,o:noop,d(o){o&&detach(r),a=!1,run_all(l)}}}function create_if_block_9(s){let r,n,t,a;return n=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot_2],target:[create_target_slot_2]},$$scope:{ctx:s}}}),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);claim_component(n.$$.fragment,o),t=claim_space(o),o.forEach(detach),this.h()},h(){attr(r,"class"," svelte-y4y35s")},m(l,o){insert_hydration(l,r,o),mount_component(n,r,null),append_hydration(r,t),a=!0},p(l,o){const c={};o[0]&2|o[1]&4096&&(c.$$scope={dirty:o,ctx:l}),n.$set(c)},i(l){a||(transition_in(n.$$.fragment,l),a=!0)},o(l){transition_out(n.$$.fragment,l),a=!1},d(l){l&&detach(r),destroy_component(n)}}}function create_if_block_7(s){let r,n,t,a;function l(i,f){return i[14]?create_if_block_8:create_else_block_1}let o=l(s),c=o(s);return{c(){r=element("div"),c.c(),n=space(),this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);c.l(f),n=claim_space(f),f.forEach(detach),this.h()},h(){attr(r,"class","btn svelte-y4y35s")},m(i,f){insert_hydration(i,r,f),c.m(r,null),append_hydration(r,n),t||(a=listen$1(r,"click",s[22]),t=!0)},p(i,f){o===(o=l(i))&&c?c.p(i,f):(c.d(1),c=o(i),c&&(c.c(),c.m(r,n)))},i:noop,o:noop,d(i){i&&detach(r),c.d(),t=!1,a()}}}function create_if_block_6(s){let r,n,t,a,l,o;return n=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot_1],target:[create_target_slot_1]},$$scope:{ctx:s}}}),n.$on("mousewheel",s[31]),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);claim_component(n.$$.fragment,i),t=claim_space(i),i.forEach(detach),this.h()},h(){attr(r,"class"," svelte-y4y35s")},m(c,i){insert_hydration(c,r,i),mount_component(n,r,null),append_hydration(r,t),a=!0,l||(o=[listen$1(r,"mouseout",s[32]),listen$1(r,"mouseover",s[33])],l=!0)},p(c,i){const f={};i[0]&33792|i[1]&4096&&(f.$$scope={dirty:i,ctx:c}),n.$set(f)},i(c){a||(transition_in(n.$$.fragment,c),a=!0)},o(c){transition_out(n.$$.fragment,c),a=!1},d(c){c&&detach(r),destroy_component(n),l=!1,run_all(o)}}}function create_if_block_5(s){let r,n,t,a;return n=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot],target:[create_target_slot]},$$scope:{ctx:s}}}),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);claim_component(n.$$.fragment,o),t=claim_space(o),o.forEach(detach),this.h()},h(){attr(r,"class"," svelte-y4y35s")},m(l,o){insert_hydration(l,r,o),mount_component(n,r,null),append_hydration(r,t),a=!0},p(l,o){const c={};o[0]&4|o[1]&4096&&(c.$$scope={dirty:o,ctx:l}),n.$set(c)},i(l){a||(transition_in(n.$$.fragment,l),a=!0)},o(l){transition_out(n.$$.fragment,l),a=!1},d(l){l&&detach(r),destroy_component(n)}}}function create_if_block_4(s){let r,n,t,a,l,o,c,i=[s[19]],f={};for(let y=0;y<i.length;y+=1)f=assign(f,i[y]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("path"),l=space(),this.h()},l(y){r=claim_element(y,"DIV",{class:!0});var _=children(r);n=claim_svg_element(_,"svg",{});var u=children(n);t=claim_svg_element(u,"path",{d:!0,stroke:!0,"stroke-width":!0}),children(t).forEach(detach),a=claim_svg_element(u,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),children(a).forEach(detach),u.forEach(detach),l=claim_space(_),_.forEach(detach),this.h()},h(){attr(t,"d",`M12.5 16.8137h-.13v1.8939h4.9696c3.6455 0 6.6113-2.9658 6.6113-6.6116
            0-3.64549-2.9658-6.61131-6.6113-6.61131-.5231 0-.947.42391-.947.94696 0 .52304.4239.94696.947.94696 2.6011 0
            4.7174 2.11634 4.7174 4.71739 0 2.6014-2.1166 4.7177-4.7174 4.7177H12.5zM13.6025
            5.61469v-.13H7.48137C3.83582 5.48469.87 8.45051.87 12.096c0 3.6509 3.17269 6.6117 6.81304 6.6117.52304 0
            .94696-.424.94696-.947 0-.5231-.42392-.947-.94696-.947-2.60804 0-4.91907-2.1231-4.91907-4.7176 0-2.60115
            2.11634-4.71744 4.7174-4.71744h6.12113V5.61469z`),attr(t,"stroke","#8795A1"),attr(t,"stroke-width",".26"),attr(a,"d",`M11.1482
            2.20355h0l-.001-.00116c-.3412-.40061-.9405-.44558-1.33668-.0996h-.00001c-.39526.34519-.43936.94795-.09898
            1.34767l2.51487 3.03683-2.51894 3.06468c-.33872.40088-.29282 1.00363.10347
            1.34723l.08517-.0982-.08517.0982c.17853.1549.39807.2308.61647.2308.2671 0 .5328-.114.72-.3347h0l.0011-.0014
            3.0435-3.68655.0006-.00068c.3035-.35872.3025-.88754-.0019-1.24526l-3.0425-3.65786zM13.9453
            21.7965h0l.001.0011c.3413.4006.9407.4456 1.337.0996h0c.3953-.3452.4395-.9479.099-1.3477l-2.5154-3.0368
            2.5195-3.0647c.3388-.4008.2929-1.0036-.1035-1.3472l-.0852.0982.0852-.0982c-.1786-.1549-.3981-.2308-.6166-.2308-.2671
            0-.5329.114-.7202.3347h0l-.0011.0014-3.0442
            3.6865c-.0001.0003-.0003.0005-.0005.0007-.3036.3587-.3027.8876.0019 1.2453l3.0431 3.6579z`),attr(a,"fill","#8795A1"),attr(a,"stroke","#8795A1"),attr(a,"stroke-width",".26"),set_svg_attributes(n,f),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),toggle_class(r,"active",s[7])},m(y,_){insert_hydration(y,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),o||(c=listen$1(r,"click",function(){is_function(s[12])&&s[12].apply(this,arguments)}),o=!0)},p(y,_){s=y,toggle_class(n,"svelte-y4y35s",!0),_[0]&128&&toggle_class(r,"active",s[7])},i:noop,o:noop,d(y){y&&detach(r),o=!1,c()}}}function create_if_block_3$1(s){let r,n,t,a;return{c(){r=element("input"),this.h()},l(l){r=claim_element(l,"INPUT",{class:!0,type:!0,min:!0,step:!0,max:!0,style:!0}),this.h()},h(){attr(r,"class","progress svelte-y4y35s"),attr(r,"type","range"),attr(r,"min","0"),attr(r,"step","1"),attr(r,"max","100"),attr(r,"style",n=`
          background-image: -webkit-gradient(linear, left top, right top, color-stop(${s[0]}%, rgba(15, 204, 206, 0.4)), color-stop(${s[0]}%, #DAE1E7));
          background-image: -moz-linear-gradient(left center, rgba(15, 204, 206, 0.4) 0%, rgba(15, 204, 206, 0.4) ${s[0]}%, #DAE1E7 ${s[0]}%, #DAE1E7 100%);
        `)},m(l,o){insert_hydration(l,r,o),set_input_value(r,s[0]),t||(a=[listen$1(r,"change",s[28]),listen$1(r,"input",s[28]),listen$1(r,"input",s[20]),listen$1(r,"mousedown",function(){is_function(s[5])&&s[5].apply(this,arguments)}),listen$1(r,"mouseup",function(){is_function(s[8])&&s[8].apply(this,arguments)})],t=!0)},p(l,o){s=l,o[0]&1&&n!==(n=`
          background-image: -webkit-gradient(linear, left top, right top, color-stop(${s[0]}%, rgba(15, 204, 206, 0.4)), color-stop(${s[0]}%, #DAE1E7));
          background-image: -moz-linear-gradient(left center, rgba(15, 204, 206, 0.4) 0%, rgba(15, 204, 206, 0.4) ${s[0]}%, #DAE1E7 ${s[0]}%, #DAE1E7 100%);
        `)&&attr(r,"style",n),o[0]&1&&set_input_value(r,s[0])},i:noop,o:noop,d(l){l&&detach(r),t=!1,run_all(a)}}}function create_if_block_2$3(s){let r,n,t,a,l,o,c=[s[19]],i={};for(let f=0;f<c.length;f+=1)i=assign(i,c[f]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=space(),this.h()},l(f){r=claim_element(f,"DIV",{class:!0});var y=children(r);n=claim_svg_element(y,"svg",{});var _=children(n);t=claim_svg_element(_,"path",{d:!0}),children(t).forEach(detach),_.forEach(detach),a=claim_space(y),y.forEach(detach),this.h()},h(){attr(t,"d",`M2 3.667A1.67 1.67 0 0 1 3.667 2h16.666A1.67 1.67 0 0 1 22 3.667v16.666A1.67 1.67 0 0 1 20.333
            22H3.667A1.67 1.67 0 0 1 2 20.333z`),set_svg_attributes(n,i),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),toggle_class(r,"active",s[16])},m(f,y){insert_hydration(f,r,y),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),l||(o=listen$1(r,"click",function(){is_function(s[11])&&s[11].apply(this,arguments)}),l=!0)},p(f,y){s=f,toggle_class(n,"svelte-y4y35s",!0),y[0]&65536&&toggle_class(r,"active",s[16])},i:noop,o:noop,d(f){f&&detach(r),l=!1,o()}}}function create_if_block$9(s){let r,n,t,a;function l(i,f){return i[18]?create_if_block_1$5:create_else_block$3}let o=l(s),c=o(s);return{c(){r=element("div"),c.c(),n=space(),this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);c.l(f),n=claim_space(f),f.forEach(detach),this.h()},h(){attr(r,"class","btn svelte-y4y35s"),toggle_class(r,"active",s[18]||s[17])},m(i,f){insert_hydration(i,r,f),c.m(r,null),append_hydration(r,n),t||(a=listen$1(r,"click",function(){is_function(s[13])&&s[13].apply(this,arguments)}),t=!0)},p(i,f){s=i,o===(o=l(s))&&c?c.p(s,f):(c.d(1),c=o(s),c&&(c.c(),c.m(r,n))),f[0]&393216&&toggle_class(r,"active",s[18]||s[17])},i:noop,o:noop,d(i){i&&detach(r),c.d(),t=!1,a()}}}function create_target_slot_2(s){let r,n,t,a,l=[s[19]],o={};for(let c=0;c<l.length;c+=1)o=assign(o,l[c]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("path"),this.h()},l(c){r=claim_element(c,"DIV",{class:!0,slot:!0});var i=children(r);n=claim_svg_element(i,"svg",{});var f=children(n);t=claim_svg_element(f,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children(t).forEach(detach),a=claim_svg_element(f,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children(a).forEach(detach),f.forEach(detach),i.forEach(detach),this.h()},h(){attr(t,"fill-rule","evenodd"),attr(t,"clip-rule","evenodd"),attr(t,"d",`M3.15 0h17.7A3.12 3.12 0 0124 3.1v17.8c0 1.71-1.4 3.1-3.15 3.1H3.15A3.12 3.12 0 010 20.9V3.1C0 1.39
                1.4 0 3.15 0zm0 2.05c-.6 0-1.07.47-1.07 1.05v17.8c0 .58.48 1.05 1.07 1.05h17.7c.6 0 1.07-.47
                1.07-1.05V3.1c0-.58-.48-1.05-1.07-1.05H3.15z`),attr(a,"fill-rule","evenodd"),attr(a,"clip-rule","evenodd"),attr(a,"d",`M12 10c.55 0 1 .42 1 .94v6.12c0 .52-.45.94-1 .94s-1-.42-1-.94v-6.12c0-.52.45-.94 1-.94zM12 6a1 1 0
                011 1v.42a1 1 0 11-2 0V7a1 1 0 011-1z`),set_svg_attributes(n,o),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),attr(r,"slot","target")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a)},p(c,i){toggle_class(n,"svelte-y4y35s",!0)},d(c){c&&detach(r)}}}function create_content_slot_2(s){let r,n,t;return n=new Info({props:{animationData:s[1]}}),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(a){r=claim_element(a,"DIV",{slot:!0,class:!0});var l=children(r);claim_component(n.$$.fragment,l),l.forEach(detach),this.h()},h(){attr(r,"slot","content"),attr(r,"class","popover popover-info svelte-y4y35s")},m(a,l){insert_hydration(a,r,l),mount_component(n,r,null),t=!0},p(a,l){const o={};l[0]&2&&(o.animationData=a[1]),n.$set(o)},i(a){t||(transition_in(n.$$.fragment,a),t=!0)},o(a){transition_out(n.$$.fragment,a),t=!1},d(a){a&&detach(r),destroy_component(n)}}}function create_else_block_1(s){let r,n,t=[s[19]],a={};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(l){r=claim_svg_element(l,"svg",{});var o=children(r);n=claim_svg_element(o,"path",{d:!0,"stroke-width":!0}),children(n).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"d",`M21 8a1 1 0 102 0V4a3 3 0 00-3-3h-4a1 1 0 100 2h4a1 1 0 011 1v4zM1 8a1 1 0 102 0V4a1 1 0 011-1h4a1 1 0
              100-2H4a3 3 0 00-3 3v4zm15 15h4a3 3 0 003-3v-4a1 1 0 10-2 0v4a1 1 0 01-1 1h-4a1 1 0 100 2zM4 23h4a1 1 0
              100-2H4a1 1 0 01-1-1v-4a1 1 0 10-2 0v4a3 3 0 003 3z`),attr(n,"stroke-width",".2"),set_svg_attributes(r,a),toggle_class(r,"svelte-y4y35s",!0)},m(l,o){insert_hydration(l,r,o),append_hydration(r,n)},p(l,o){toggle_class(r,"svelte-y4y35s",!0)},d(l){l&&detach(r)}}}function create_if_block_8(s){let r,n,t=[s[19]],a={};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(l){r=claim_svg_element(l,"svg",{});var o=children(r);n=claim_svg_element(o,"path",{d:!0,"stroke-width":!0}),children(n).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"d",`M7 22a1 1 0 102 0v-4a3 3 0 00-3-3H2a1 1 0 100 2h4a1 1 0 011 1v4zm8 0a1 1 0 102 0v-4a1 1 0 011-1h4a1 1 0
              100-2h-4a3 3 0 00-3 3v4zM2 9h4a3 3 0 003-3V2a1 1 0 10-2 0v4a1 1 0 01-1 1H2a1 1 0 100 2zm16 0h4a1 1 0
              100-2h-4a1 1 0 01-1-1V2a1 1 0 10-2 0v4a3 3 0 003 3z`),attr(n,"stroke-width",".2"),set_svg_attributes(r,a),toggle_class(r,"svelte-y4y35s",!0)},m(l,o){insert_hydration(l,r,o),append_hydration(r,n)},p(l,o){toggle_class(r,"svelte-y4y35s",!0)},d(l){l&&detach(r)}}}function create_target_slot_1(s){let r,n,t,a,l,o,c=[s[19]],i={};for(let f=0;f<c.length;f+=1)i=assign(i,c[f]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("path"),l=svg_element("circle"),o=svg_element("path"),this.h()},l(f){r=claim_element(f,"DIV",{class:!0,slot:!0});var y=children(r);n=claim_svg_element(y,"svg",{});var _=children(n);t=claim_svg_element(_,"path",{"clip-rule":!0,d:!0,"fill-rule":!0}),children(t).forEach(detach),a=claim_svg_element(_,"path",{d:!0}),children(a).forEach(detach),l=claim_svg_element(_,"circle",{cx:!0,cy:!0,r:!0}),children(l).forEach(detach),o=claim_svg_element(_,"path",{d:!0,stroke:!0,"stroke-width":!0}),children(o).forEach(detach),_.forEach(detach),y.forEach(detach),this.h()},h(){attr(t,"clip-rule","evenodd"),attr(t,"d",`M0 3.01A2.983 2.983 0 012.983.027H16.99a2.983 2.983 0 012.983 2.983v14.008a2.982 2.982 0 01-2.983
                2.983H2.983A2.983 2.983 0 010 17.018zm2.983-.941a.941.941 0 00-.942.94v14.01c0
                .52.422.94.942.94H16.99a.94.94 0 00.941-.94V3.008a.941.941 0 00-.94-.94H2.981z`),attr(t,"fill-rule","evenodd"),attr(a,"d","M12.229 7.945l-2.07 4.598-2.586-2.605-2.414 2.758v2.146h9.656V11.93z"),attr(l,"cx","7.444"),attr(l,"cy","6.513"),attr(l,"r","2.032"),attr(o,"d",`M9.561 23.916h11.25a2.929 2.929 0 002.926-2.927V9.954a1.06 1.06 0 10-2.122 0v11.035a.805.805 0
                01-.803.804H9.562a1.061 1.061 0 100 2.123z`),attr(o,"stroke","#8795a1"),attr(o,"stroke-width",".215"),set_svg_attributes(n,i),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),attr(r,"slot","target")},m(f,y){insert_hydration(f,r,y),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(n,l),append_hydration(n,o)},p(f,y){toggle_class(n,"svelte-y4y35s",!0)},d(f){f&&detach(r)}}}function create_content_slot_1(s){let r,n,t,a,l,o,c,i,f,y,_,u,m,p,g;return{c(){r=element("div"),n=element("h5"),t=text("Frame "),a=text(s[15]),l=space(),o=element("a"),c=text("Download SVG"),i=space(),f=element("a"),y=text("Download PNG"),_=space(),u=element("i"),m=text("Scroll with mousewheel to find exact frame"),this.h()},l(x){r=claim_element(x,"DIV",{slot:!0,class:!0});var b=children(r);n=claim_element(b,"H5",{class:!0});var E=children(n);t=claim_text(E,"Frame "),a=claim_text(E,s[15]),E.forEach(detach),l=claim_space(b),o=claim_element(b,"A",{href:!0,class:!0});var S=children(o);c=claim_text(S,"Download SVG"),S.forEach(detach),i=claim_space(b),f=claim_element(b,"A",{href:!0,class:!0});var k=children(f);y=claim_text(k,"Download PNG"),k.forEach(detach),_=claim_space(b),u=claim_element(b,"I",{class:!0});var T=children(u);m=claim_text(T,"Scroll with mousewheel to find exact frame"),T.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"class","svelte-y4y35s"),attr(o,"href","#downloadsvg"),attr(o,"class","svelte-y4y35s"),attr(f,"href","#downloadsvg"),attr(f,"class","svelte-y4y35s"),attr(u,"class","note svelte-y4y35s"),attr(r,"slot","content"),attr(r,"class","popover popover-snapshot svelte-y4y35s")},m(x,b){insert_hydration(x,r,b),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),append_hydration(r,o),append_hydration(o,c),append_hydration(r,i),append_hydration(r,f),append_hydration(f,y),append_hydration(r,_),append_hydration(r,u),append_hydration(u,m),p||(g=[listen$1(o,"click",s[29]),listen$1(f,"click",s[30])],p=!0)},p(x,b){b[0]&32768&&set_data(a,x[15])},d(x){x&&detach(r),p=!1,run_all(g)}}}function create_target_slot(s){let r,n,t,a=[s[19]],l={};for(let o=0;o<a.length;o+=1)l=assign(l,a[o]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),this.h()},l(o){r=claim_element(o,"DIV",{class:!0,slot:!0});var c=children(r);n=claim_svg_element(c,"svg",{});var i=children(n);t=claim_svg_element(i,"path",{d:!0}),children(t).forEach(detach),i.forEach(detach),c.forEach(detach),this.h()},h(){attr(t,"d",`M12 3.1L6.1 8.6a7.6 7.6 0 00-2.2 4 7.2 7.2 0 00.4 4.4 7.9 7.9 0 003 3.5 8.7 8.7 0 004.7 1.3c1.6 0
                3.2-.5 4.6-1.3s2.4-2 3-3.5a7.2 7.2 0 00.5-4.5 7.6 7.6 0 00-2.2-4L12 3.2zM12 0l7.5 7a9.8 9.8 0 013 5.1
                9.3 9.3 0 01-.6 5.8c-.9 1.8-2.2 3.3-4 4.4A11.2 11.2 0 0112 24a11.2 11.2 0
                01-6-1.7c-1.7-1-3-2.6-3.9-4.4a9.3 9.3 0 01-.6-5.8c.4-2 1.5-3.7 3-5L12 0zM6 14h12c0 1.5-.7 3-1.8 4s-2.6
                1.6-4.2 1.6S9 19 7.8 18s-1.7-2.5-1.7-4z`),set_svg_attributes(n,l),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),attr(r,"slot","target")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),append_hydration(n,t)},p(o,c){toggle_class(n,"svelte-y4y35s",!0)},d(o){o&&detach(r)}}}function create_content_slot(s){let r,n,t;return n=new ColorPicker({props:{color:s[2]}}),n.$on("color",s[21]),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(a){r=claim_element(a,"DIV",{slot:!0,class:!0});var l=children(r);claim_component(n.$$.fragment,l),l.forEach(detach),this.h()},h(){attr(r,"slot","content"),attr(r,"class","popover popover-background svelte-y4y35s")},m(a,l){insert_hydration(a,r,l),mount_component(n,r,null),t=!0},p(a,l){const o={};l[0]&4&&(o.color=a[2]),n.$set(o)},i(a){t||(transition_in(n.$$.fragment,a),t=!0)},o(a){transition_out(n.$$.fragment,a),t=!1},d(a){a&&detach(r),destroy_component(n)}}}function create_else_block$3(s){let r,n,t=[s[19]],a={};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(l){r=claim_svg_element(l,"svg",{});var o=children(r);n=claim_svg_element(o,"path",{d:!0}),children(n).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"d","M2 3.4C2 1.9 3.5 1 4.8 1.8l16.5 9.6c1.2.7 1.2 2.5 0 3.2L4.8 24.2C3.5 25 2 24.1 2 22.6V3.4z"),set_svg_attributes(r,a),toggle_class(r,"svelte-y4y35s",!0)},m(l,o){insert_hydration(l,r,o),append_hydration(r,n)},p(l,o){toggle_class(r,"svelte-y4y35s",!0)},d(l){l&&detach(r)}}}function create_if_block_1$5(s){let r,n,t,a=[s[19]],l={};for(let o=0;o<a.length;o+=1)l=assign(l,a[o]);return{c(){r=svg_element("svg"),n=svg_element("rect"),t=svg_element("rect"),this.h()},l(o){r=claim_svg_element(o,"svg",{});var c=children(r);n=claim_svg_element(c,"rect",{height:!0,rx:!0,width:!0,x:!0,y:!0}),children(n).forEach(detach),t=claim_svg_element(c,"rect",{height:!0,rx:!0,width:!0,x:!0,y:!0}),children(t).forEach(detach),c.forEach(detach),this.h()},h(){attr(n,"height","22.9"),attr(n,"rx","1.9"),attr(n,"width","7.6"),attr(n,"x","14"),attr(n,"y",".5"),attr(t,"height","22.9"),attr(t,"rx","1.9"),attr(t,"width","7.6"),attr(t,"x","2"),attr(t,"y",".5"),set_svg_attributes(r,l),toggle_class(r,"svelte-y4y35s",!0)},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),append_hydration(r,t)},p(o,c){toggle_class(r,"svelte-y4y35s",!0)},d(o){o&&detach(r)}}}function create_each_block$4(s){let r,n,t,a;const l=[create_if_block$9,create_if_block_2$3,create_if_block_3$1,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_9,create_if_block_10,create_if_block_11,create_if_block_12,create_if_block_13],o=[];function c(i,f){return i[40]==="playpause"?0:i[40]==="stop"?1:i[40]==="progress"?2:i[40]==="loop"?3:i[40]==="background"?4:i[40]==="snapshot"?5:i[40]==="zoom"?6:i[40]==="info"?7:i[40]==="frame"?8:i[40]==="nextFrame"?9:i[40]==="previousFrame"?10:i[40]==="spacer"?11:-1}return~(r=c(s))&&(n=o[r]=l[r](s)),{c(){n&&n.c(),t=empty()},l(i){n&&n.l(i),t=empty()},m(i,f){~r&&o[r].m(i,f),insert_hydration(i,t,f),a=!0},p(i,f){let y=r;r=c(i),r===y?~r&&o[r].p(i,f):(n&&(group_outros(),transition_out(o[y],1,1,()=>{o[y]=null}),check_outros()),~r?(n=o[r],n?n.p(i,f):(n=o[r]=l[r](i),n.c()),transition_in(n,1),n.m(t.parentNode,t)):n=null)},i(i){a||(transition_in(n),a=!0)},o(i){transition_out(n),a=!1},d(i){~r&&o[r].d(i),i&&detach(t)}}}function create_fragment$g(s){let r,n,t=s[6],a=[];for(let o=0;o<t.length;o+=1)a[o]=create_each_block$4(get_each_context$4(s,t,o));const l=o=>transition_out(a[o],1,1,()=>{a[o]=null});return{c(){r=element("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<a.length;i+=1)a[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","lottie-player-controls svelte-y4y35s")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,null);n=!0},p(o,c){if(c[0]&33554431){t=o[6];let i;for(i=0;i<t.length;i+=1){const f=get_each_context$4(o,t,i);a[i]?(a[i].p(f,c),transition_in(a[i],1)):(a[i]=create_each_block$4(f),a[i].c(),transition_in(a[i],1),a[i].m(r,null))}for(group_outros(),i=t.length;i<a.length;i+=1)l(i);check_outros()}},i(o){if(!n){for(let c=0;c<t.length;c+=1)transition_in(a[c]);n=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);n=!1},d(o){o&&detach(r),destroy_each(a,o)}}}function instance_1$1(s,r,n){let t,a,l,o;const c={width:14,height:14,viewBox:"0 0 24 24"},i=createEventDispatcher();let{animationData:f}=r,{background:y}=r,{currentState:_}=r,{frame:u}=r,{freeze:m}=r,{instance:p}=r,{layout:g=ControlsLayoutOptions}=r,{loop:x}=r,{play:b}=r,{progress:E}=r,{seek:S}=r,{snapshot:k}=r,{stop:T}=r,{toggleZoom:j}=r,{toggleLooping:A}=r,{togglePlay:C}=r,{totalFrames:N=0}=r,V=!1;const I=re=>{if(!p||isNaN(re.target.value))return;const se=re.target.value/100*N;S(se)},G=re=>{i("background",{color:re.detail.hex})},R=()=>{n(14,V=!V),j()},q=()=>{const re=u+1;re<=N&&S(re)},M=()=>{const re=u-1;re>=0&&S(re)};function L(){E=to_number(this.value),n(0,E)}const H=()=>k(!0),O=()=>k(!0),U=re=>S(u+(re.deltaY>0?-1:1)),J=()=>_===PlayerState.Frozen&&b(),Z=()=>_!==PlayerState.Paused&&m();function z(){o=this.value,n(15,o),n(4,u)}const B=()=>_===PlayerState.Frozen&&b(),D=()=>_!==PlayerState.Paused&&m(),X=re=>S(re.target.value),K=re=>S(u+(re.deltaY>0?-1:1));return s.$$set=re=>{"animationData"in re&&n(1,f=re.animationData),"background"in re&&n(2,y=re.background),"currentState"in re&&n(3,_=re.currentState),"frame"in re&&n(4,u=re.frame),"freeze"in re&&n(5,m=re.freeze),"instance"in re&&n(25,p=re.instance),"layout"in re&&n(6,g=re.layout),"loop"in re&&n(7,x=re.loop),"play"in re&&n(8,b=re.play),"progress"in re&&n(0,E=re.progress),"seek"in re&&n(9,S=re.seek),"snapshot"in re&&n(10,k=re.snapshot),"stop"in re&&n(11,T=re.stop),"toggleZoom"in re&&n(26,j=re.toggleZoom),"toggleLooping"in re&&n(12,A=re.toggleLooping),"togglePlay"in re&&n(13,C=re.togglePlay),"totalFrames"in re&&n(27,N=re.totalFrames)},s.$$.update=()=>{s.$$.dirty[0]&8&&n(18,t=_===PlayerState.Playing),s.$$.dirty[0]&8&&n(17,a=_===PlayerState.Paused),s.$$.dirty[0]&8&&n(16,l=_===PlayerState.Stopped),s.$$.dirty[0]&16&&n(15,o=Math.round(u))},[E,f,y,_,u,m,g,x,b,S,k,T,A,C,V,o,l,a,t,c,I,G,R,q,M,p,j,N,L,H,O,U,J,Z,z,B,D,X,K]}class Controls extends SvelteComponent{constructor(r){super(),init(this,r,instance_1$1,create_fragment$g,safe_not_equal,{animationData:1,background:2,currentState:3,frame:4,freeze:5,instance:25,layout:6,loop:7,play:8,progress:0,seek:9,snapshot:10,stop:11,toggleZoom:26,toggleLooping:12,togglePlay:13,totalFrames:27},null,[-1,-1])}}const SVELTE_LOTTIE_PLAYER_VERSION="0.3.1",LOTTIE_WEB_VERSION="^5.10.0",LottiePlayer_svelte_svelte_type_style_lang="";function create_if_block_1$4(s){let r,n;return{c(){r=element("div"),n=text(""),this.h()},l(t){r=claim_element(t,"DIV",{class:!0});var a=children(r);n=claim_text(a,""),a.forEach(detach),this.h()},h(){attr(r,"class","lottie-player-error svelte-1n5qc19")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},d(t){t&&detach(r)}}}function create_if_block$8(s){let r,n;return r=new Controls({props:{layout:s[3],animationData:s[22],background:s[1],controls:s[2],currentState:s[28],frame:s[26],freeze:s[11],instance:s[21],loop:s[0],lottie,pause:s[9],play:s[8],progress:s[27],seek:s[12],setDirection:s[16],setSpeed:s[15],setLooping:s[14],snapshot:s[13],src:s[5],stop:s[10],toggleZoom:s[20],toggleLooping:s[18],togglePlay:s[17],totalFrames:s[32]}}),r.$on("background",s[47]),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&8&&(l.layout=t[3]),a[0]&4194304&&(l.animationData=t[22]),a[0]&2&&(l.background=t[1]),a[0]&4&&(l.controls=t[2]),a[0]&268435456&&(l.currentState=t[28]),a[0]&67108864&&(l.frame=t[26]),a[0]&2097152&&(l.instance=t[21]),a[0]&1&&(l.loop=t[0]),a[0]&134217728&&(l.progress=t[27]),a[0]&32&&(l.src=t[5]),a[1]&2&&(l.totalFrames=t[32]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_fragment$f(s){let r,n,t,a,l,o,c,i=s[28]===PlayerState.Error&&create_if_block_1$4(),f=s[2]&&create_if_block$8(s);return{c(){r=element("div"),n=element("div"),t=element("div"),i&&i.c(),a=space(),f&&f.c(),this.h()},l(y){r=claim_element(y,"DIV",{style:!0});var _=children(r);n=claim_element(_,"DIV",{class:!0});var u=children(n);t=claim_element(u,"DIV",{style:!0,class:!0});var m=children(t);i&&i.l(m),m.forEach(detach),a=claim_space(u),f&&f.l(u),u.forEach(detach),_.forEach(detach),this.h()},h(){set_style(t,"background",s[1]),attr(t,"class","svelte-1n5qc19"),toggle_class(t,"animation",!0),attr(n,"class","lottie-player svelte-1n5qc19"),toggle_class(n,"with-controls",s[2]),toggle_class(n,"is-zoomed",s[29]),attr(r,"style",l=(s[7]?`width:${s[7]}px;`:"")+(s[4]?`height:${s[4]}px;`:"")+s[6]),add_render_callback(()=>s[50].call(r))},m(y,_){insert_hydration(y,r,_),append_hydration(r,n),append_hydration(n,t),i&&i.m(t,null),s[46](t),append_hydration(n,a),f&&f.m(n,null),s[48](n),s[49](r),o=add_iframe_resize_listener(r,s[50].bind(r)),c=!0},p(y,_){y[28]===PlayerState.Error?i||(i=create_if_block_1$4(),i.c(),i.m(t,null)):i&&(i.d(1),i=null),(!c||_[0]&2)&&set_style(t,"background",y[1]),y[2]?f?(f.p(y,_),_[0]&4&&transition_in(f,1)):(f=create_if_block$8(y),f.c(),transition_in(f,1),f.m(n,null)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),(!c||_[0]&4)&&toggle_class(n,"with-controls",y[2]),(!c||_[0]&536870912)&&toggle_class(n,"is-zoomed",y[29]),(!c||_[0]&208&&l!==(l=(y[7]?`width:${y[7]}px;`:"")+(y[4]?`height:${y[4]}px;`:"")+y[6]))&&attr(r,"style",l)},i(y){c||(transition_in(f),c=!0)},o(y){transition_out(f),c=!1},d(y){y&&detach(r),i&&i.d(),s[46](null),f&&f.d(),s[48](null),s[49](null),o()}}}function instance_1(s,r,n){let{autoplay:t=!1}=r,{background:a}=r,{controls:l}=r,{controlsLayout:o}=r,{count:c=void 0}=r,{defaultFrame:i=0}=r,{direction:f=1}=r,{height:y}=r,{hover:_=!1}=r,{loop:u=!1}=r,{mode:m=PlayMode.Normal}=r,{onToggleZoom:p=void 0}=r,{renderer:g=PlayerRender.SVG}=r,{speed:x=1}=r,{src:b=""}=r,{style:E=""}=r,{width:S}=r,k,T,j,A,C,N=0,V=0,I,G=PlayerState.Loading,R=!1,q,M,L;const H=()=>{document.hidden===!0&&G===PlayerState.Playing?D():G===PlayerState.Frozen&&J()};onMount(()=>{"IntersectionObserver"in window&&(I=new IntersectionObserver(ne=>{ne[0].isIntersecting?G===PlayerState.Frozen&&J():G===PlayerState.Playing&&D()}),I.observe(T)),typeof document.hidden<"u"&&document.addEventListener("visibilitychange",H),b&&O(b)}),onDestroy(()=>{I&&(I.disconnect(),I=void 0),document.removeEventListener("visibilitychange",H)});const O=ne=>{if(!T)return;C&&C.destroy();const be={container:T,loop:u,autoplay:t,renderer:g,rendererSettings:{preserveAspectRatio:"xMidYMid meet",clearCanvas:!0,progressiveLoad:!0,hideOnTransparent:!0}};try{const ve=parseSrc(ne),je=typeof ve=="string"?"path":"animationData";n(21,C=lottie.loadAnimation({...be,[je]:ve}))}catch{n(28,G=PlayerState.Error),dispatchEvent(new CustomEvent(PlayerEvents.Error))}C&&(C.addEventListener("enterFrame",()=>{n(26,N=C.currentFrame),n(27,V=C.currentFrame/C.totalFrames*100),dispatchEvent(new CustomEvent(PlayerEvents.Frame,{detail:{frame:C.currentFrame,progress:V}}))}),C.addEventListener("complete",()=>{if(G!==PlayerState.Playing){dispatchEvent(new CustomEvent(PlayerEvents.Complete));return}if(!u||c&&_counter>=c){dispatchEvent(new CustomEvent(PlayerEvents.Complete));return}m===PlayMode.Bounce?(c&&(_counter+=.5),setTimeout(()=>{dispatchEvent(new CustomEvent(PlayerEvents.Loop)),G===PlayerState.Playing&&(C.setDirection(C.playDirection*-1),C.play())},intermission)):(c&&(_counter+=1),window.setTimeout(()=>{dispatchEvent(new CustomEvent(PlayerEvents.Loop)),G===PlayerState.Playing&&(C.stop(),C.play())},intermission))}),C.addEventListener("data_ready",()=>{n(22,k=C.animationData),n(32,L=C.totalFrames)}),C.addEventListener("data_failed",()=>{n(28,G=PlayerState.Error),dispatchEvent(new CustomEvent(PlayerEvents.Error))}),T.addEventListener("mouseenter",()=>{_&&G!==PlayerState.Playing&&J()}),T.addEventListener("mouseleave",()=>{_&&G===PlayerState.Playing&&B()}),fe(x),xe(f),t?J():isNaN(i)||C.goToAndStop(i,!0))},U=()=>C,J=()=>{C&&(n(28,G=PlayerState.Playing),C.play(),dispatchEvent(new CustomEvent(PlayerEvents.Play)))},Z=()=>({lottieWebVersion:LOTTIE_WEB_VERSION,svelteLottiePlayerVersion:SVELTE_LOTTIE_PLAYER_VERSION}),z=()=>{C&&(n(28,G=PlayerState.Paused),C.pause(),dispatchEvent(new CustomEvent(PlayerEvents.Pause)))},B=()=>{C&&(n(28,G=PlayerState.Stopped),C.stop(),dispatchEvent(new CustomEvent(PlayerEvents.Stop)))},D=()=>{C&&(C.pause(),n(28,G=PlayerState.Frozen),dispatchEvent(new CustomEvent(PlayerEvents.Freeze)))},X=()=>{C&&C.resize()},K=ne=>{if(!C)return;const be=ne.toString().match(/^([0-9\.]+)(%?)$/);if(!be)return;const ve=be[2]==="%"?C.totalFrames*Number(be[1])/100:Number(be[1]);G===PlayerState.Playing?C.goToAndPlay(ve,!0):(C.goToAndStop(ve,!0),C.pause())},re=(ne=!0)=>{let be;if(g===PlayerRender.SVG){const ve=T.querySelector("svg"),je=new XMLSerializer().serializeToString(ve);be="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(je),ne&&triggerDownload(be,`snapshot_${V}.svg`)}else g===PlayerRender.Canvas&&(be=T.querySelector("canvas").toDataURL("image/png"),ne&&triggerDownload(be,`snapshot_${V}.png`));return be},se=ne=>{C&&n(0,u=ne)},fe=ne=>{C&&n(34,x=ne)},xe=ne=>{C&&n(33,f=ne)},he=()=>G===PlayerState.Playing?z():J(),_e=()=>{se(!u)},ye=ne=>{n(1,a=ne)},ue=()=>{if(typeof p=="function"){n(29,R=!!p(R));return}R?(A.appendChild(j),n(25,A.style.height=void 0,A),n(25,A.style.width=void 0,A)):(n(25,A.style.height=q+"px",A),n(25,A.style.width=M+"px",A),document.body.appendChild(j)),n(29,R=!R),setTimeout(()=>X(),100)};function pe(ne){binding_callbacks[ne?"unshift":"push"](()=>{T=ne,n(23,T)})}const ke=ne=>ye(ne.detail.color);function Ie(ne){binding_callbacks[ne?"unshift":"push"](()=>{j=ne,n(24,j)})}function $(ne){binding_callbacks[ne?"unshift":"push"](()=>{A=ne,n(25,A)})}function te(){q=this.clientHeight,M=this.clientWidth,n(30,q),n(31,M)}return s.$$set=ne=>{"autoplay"in ne&&n(35,t=ne.autoplay),"background"in ne&&n(1,a=ne.background),"controls"in ne&&n(2,l=ne.controls),"controlsLayout"in ne&&n(3,o=ne.controlsLayout),"count"in ne&&n(36,c=ne.count),"defaultFrame"in ne&&n(37,i=ne.defaultFrame),"direction"in ne&&n(33,f=ne.direction),"height"in ne&&n(4,y=ne.height),"hover"in ne&&n(38,_=ne.hover),"loop"in ne&&n(0,u=ne.loop),"mode"in ne&&n(39,m=ne.mode),"onToggleZoom"in ne&&n(40,p=ne.onToggleZoom),"renderer"in ne&&n(41,g=ne.renderer),"speed"in ne&&n(34,x=ne.speed),"src"in ne&&n(5,b=ne.src),"style"in ne&&n(6,E=ne.style),"width"in ne&&n(7,S=ne.width)},s.$$.update=()=>{s.$$.dirty[0]&32&&O(b),s.$$.dirty[0]&2097153&&C&&n(21,C.loop=u,C),s.$$.dirty[0]&2097152|s.$$.dirty[1]&8&&C&&C.setSpeed(x),s.$$.dirty[0]&2097152|s.$$.dirty[1]&4&&C&&C.setDirection(f)},[u,a,l,o,y,b,E,S,J,z,B,D,K,re,se,fe,xe,he,_e,ye,ue,C,k,T,j,A,N,V,G,R,q,M,L,f,x,t,c,i,_,m,p,g,O,U,Z,X,pe,ke,Ie,$,te]}class LottiePlayer extends SvelteComponent{constructor(r){super(),init(this,r,instance_1,create_fragment$f,safe_not_equal,{autoplay:35,background:1,controls:2,controlsLayout:3,count:36,defaultFrame:37,direction:33,height:4,hover:38,loop:0,mode:39,onToggleZoom:40,renderer:41,speed:34,src:5,style:6,width:7,load:42,getLottie:43,play:8,getVersions:44,pause:9,stop:10,freeze:11,resize:45,seek:12,snapshot:13,setLooping:14,setSpeed:15,setDirection:16,togglePlay:17,toggleLooping:18,setBackground:19,toggleZoom:20},null,[-1,-1])}get load(){return this.$$.ctx[42]}get getLottie(){return this.$$.ctx[43]}get play(){return this.$$.ctx[8]}get getVersions(){return this.$$.ctx[44]}get pause(){return this.$$.ctx[9]}get stop(){return this.$$.ctx[10]}get freeze(){return this.$$.ctx[11]}get resize(){return this.$$.ctx[45]}get seek(){return this.$$.ctx[12]}get snapshot(){return this.$$.ctx[13]}get setLooping(){return this.$$.ctx[14]}get setSpeed(){return this.$$.ctx[15]}get setDirection(){return this.$$.ctx[16]}get togglePlay(){return this.$$.ctx[17]}get toggleLooping(){return this.$$.ctx[18]}get setBackground(){return this.$$.ctx[19]}get toggleZoom(){return this.$$.ctx[20]}}function create_fragment$e(s){let r,n;return r=new LottiePlayer({props:{src:s[0],autoplay:!0,loop:!0,controls:!1,renderer:"svg",background:"transparent",width:"100%",height:"100%"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,[a]){const l={};a&1&&(l.src=t[0]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function instance$e(s,r,n){let{src:t}=r;return s.$$set=a=>{"src"in a&&n(0,t=a.src)},[t]}class Lottie extends SvelteComponent{constructor(r){super(),init(this,r,instance$e,create_fragment$e,safe_not_equal,{src:0})}}const v="4.8.0",meta={g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr=30,ip=0,op=180,w=1600,h=1600,nm="Q1 Synth Waiting Icon",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:180,s:[360]}],ix:10},p:{a:0,k:[800,800,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:2400,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 9",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:90,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:90,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:180,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:181,st:90,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 8",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:90,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:180,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:181,st:90,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 7",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:360,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,.411764711142,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:181,st:90,bm:0},{ddd:0,ind:5,ty:4,nm:"Shape Layer 3",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:90,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:90,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:91,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"Shape Layer 2",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:90,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:91,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"Shape Layer 1",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:360,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,.411764711142,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:91,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"Shape Layer 21",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-30,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:150,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:240,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:150,op:241,st:150,bm:0},{ddd:0,ind:9,ty:4,nm:"Shape Layer 20",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:150,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:240,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:150,op:241,st:150,bm:0},{ddd:0,ind:10,ty:4,nm:"Shape Layer 19",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:240,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:150,op:241,st:150,bm:0},{ddd:0,ind:11,ty:4,nm:"Shape Layer 18",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-30,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:150,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:151,st:60,bm:0},{ddd:0,ind:12,ty:4,nm:"Shape Layer 17",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:150,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:151,st:60,bm:0},{ddd:0,ind:13,ty:4,nm:"Shape Layer 16",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:240,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:151,st:60,bm:0},{ddd:0,ind:14,ty:4,nm:"Shape Layer 24",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-30,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-29,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:61,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-29,op:62,st:-29,bm:0},{ddd:0,ind:15,ty:4,nm:"Shape Layer 23",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-29,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:61,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-29,op:62,st:-29,bm:0},{ddd:0,ind:16,ty:4,nm:"Shape Layer 22",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:240,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-29,op:62,st:-29,bm:0},{ddd:0,ind:17,ty:4,nm:"Shape Layer 15",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:210,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:120,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:210,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:120,op:211,st:120,bm:0},{ddd:0,ind:18,ty:4,nm:"Shape Layer 14",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:120,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:210,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:120,op:211,st:120,bm:0},{ddd:0,ind:19,ty:4,nm:"Shape Layer 13",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:120,op:211,st:120,bm:0},{ddd:0,ind:20,ty:4,nm:"Shape Layer 6",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:210,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:30,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:120,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:121,st:30,bm:0},{ddd:0,ind:21,ty:4,nm:"Shape Layer 5",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:30,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:120,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:121,st:30,bm:0},{ddd:0,ind:22,ty:4,nm:"Shape Layer 4",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:121,st:30,bm:0},{ddd:0,ind:23,ty:4,nm:"Shape Layer 12",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:210,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:30,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-60,op:31,st:-60,bm:0},{ddd:0,ind:24,ty:4,nm:"Shape Layer 11",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:30,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-60,op:31,st:-60,bm:0},{ddd:0,ind:25,ty:4,nm:"Shape Layer 10",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-60,op:31,st:-60,bm:0}],markers=[],lottieSrc={v,meta,fr,ip,op,w,h,nm,ddd,assets,layers,markers},Measure_svelte_svelte_type_style_lang="";function create_if_block_1$3(s){let r,n,t,a;return t=new Select({props:{id:"source",options:s[4],onChange:s[5]}}),{c(){r=element("div"),n=element("div"),create_component(t.$$.fragment),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);n=claim_element(o,"DIV",{class:!0});var c=children(n);claim_component(t.$$.fragment,c),c.forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"class","svelte-1ptipaw"),attr(r,"class","source svelte-1ptipaw")},m(l,o){insert_hydration(l,r,o),append_hydration(r,n),mount_component(t,n,null),a=!0},p:noop,i(l){a||(transition_in(t.$$.fragment,l),a=!0)},o(l){transition_out(t.$$.fragment,l),a=!1},d(l){l&&detach(r),destroy_component(t)}}}function create_else_block$2(s){let r,n;return{c(){r=element("span"),n=text("Measure"),this.h()},l(t){r=claim_element(t,"SPAN",{class:!0});var a=children(r);n=claim_text(a,"Measure"),a.forEach(detach),this.h()},h(){attr(r,"class","button__text svelte-1ptipaw")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},p:noop,i:noop,o:noop,d(t){t&&detach(r)}}}function create_if_block$7(s){let r,n;return r=new Lottie({props:{src:lottieSrc}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p:noop,i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_fragment$d(s){let r,n,t,a,l,o=isApp(),c,i,f,y,_,u,m,p,g,x,b,E,S,k,T=o&&create_if_block_1$3(s);const j=[create_if_block$7,create_else_block$2],A=[];function C(N,V){return N[3]?0:1}return x=C(s),b=A[x]=j[x](s),{c(){r=element("div"),n=element("h2"),t=text("Measure"),a=space(),l=element("form"),T&&T.c(),c=space(),i=element("input"),f=space(),y=element("input"),_=space(),u=element("input"),m=space(),p=element("div"),g=element("button"),b.c(),this.h()},l(N){r=claim_element(N,"DIV",{class:!0});var V=children(r);n=claim_element(V,"H2",{class:!0});var I=children(n);t=claim_text(I,"Measure"),I.forEach(detach),a=claim_space(V),l=claim_element(V,"FORM",{class:!0});var G=children(l);T&&T.l(G),c=claim_space(G),i=claim_element(G,"INPUT",{id:!0,placeholder:!0,type:!0,class:!0}),f=claim_space(G),y=claim_element(G,"INPUT",{id:!0,placeholder:!0,type:!0,class:!0}),_=claim_space(G),u=claim_element(G,"INPUT",{id:!0,placeholder:!0,type:!0,class:!0}),G.forEach(detach),m=claim_space(V),p=claim_element(V,"DIV",{class:!0});var R=children(p);g=claim_element(R,"BUTTON",{class:!0});var q=children(g);b.l(q),q.forEach(detach),R.forEach(detach),V.forEach(detach),this.h()},h(){attr(n,"class","title svelte-1ptipaw"),attr(i,"id","seconds"),attr(i,"placeholder","Seconds"),attr(i,"type","number"),attr(i,"class","svelte-1ptipaw"),attr(y,"id","bpm"),attr(y,"placeholder","BPM"),attr(y,"type","number"),attr(y,"class","svelte-1ptipaw"),attr(u,"id","beats"),attr(u,"placeholder","Beats"),attr(u,"type","number"),attr(u,"class","svelte-1ptipaw"),attr(l,"class","svelte-1ptipaw"),g.disabled=s[3],attr(g,"class","svelte-1ptipaw"),attr(p,"class","button svelte-1ptipaw"),attr(r,"class","measure svelte-1ptipaw")},m(N,V){insert_hydration(N,r,V),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),T&&T.m(l,null),append_hydration(l,c),append_hydration(l,i),set_input_value(i,s[0]),append_hydration(l,f),append_hydration(l,y),set_input_value(y,s[1]),append_hydration(l,_),append_hydration(l,u),set_input_value(u,s[2]),append_hydration(r,m),append_hydration(r,p),append_hydration(p,g),A[x].m(g,null),E=!0,S||(k=[listen$1(i,"input",s[6]),listen$1(y,"input",s[7]),listen$1(u,"input",s[8]),listen$1(g,"click",prevent_default(s[9]))],S=!0)},p(N,[V]){o&&T.p(N,V),V&1&&to_number(i.value)!==N[0]&&set_input_value(i,N[0]),V&2&&to_number(y.value)!==N[1]&&set_input_value(y,N[1]),V&4&&to_number(u.value)!==N[2]&&set_input_value(u,N[2]);let I=x;x=C(N),x===I?A[x].p(N,V):(group_outros(),transition_out(A[I],1,1,()=>{A[I]=null}),check_outros(),b=A[x],b?b.p(N,V):(b=A[x]=j[x](N),b.c()),transition_in(b,1),b.m(g,null)),(!E||V&8)&&(g.disabled=N[3])},i(N){E||(transition_in(T),transition_in(b),E=!0)},o(N){transition_out(T),transition_out(b),E=!1},d(N){N&&detach(r),T&&T.d(),A[x].d(),S=!1,run_all(k)}}}function instance$d(s,r,n){let t,a,l,o;component_subscribe(s,seconds,m=>n(0,t=m)),component_subscribe(s,bpm,m=>n(1,a=m)),component_subscribe(s,beats,m=>n(2,l=m)),component_subscribe(s,isMeasuring,m=>n(3,o=m));const c=[{name:"local",active:!0}],i=m=>source.update(()=>{var p;return((p=m.target)==null?void 0:p.value)||"local"});function f(){t=to_number(this.value),seconds.set(t)}function y(){a=to_number(this.value),bpm.set(a)}function _(){l=to_number(this.value),beats.set(l)}return[t,a,l,o,c,i,f,y,_,()=>measure()]}class Measure extends SvelteComponent{constructor(r){super(),init(this,r,instance$d,create_fragment$d,safe_not_equal,{})}}function create_fragment$c(s){let r,n,t;return{c(){r=element("div"),this.h()},l(a){r=claim_element(a,"DIV",{style:!0,class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"style",s[0]),attr(r,"class","m-0")},m(a,l){insert_hydration(a,r,l),n||(t=action_destroyer(s[1].call(null,r)),n=!0)},p(a,[l]){l&1&&attr(r,"style",a[0])},i:noop,o:noop,d(a){a&&detach(r),n=!1,t()}}}function augmentClasses(s,r){return r.forEach(([n,t])=>s[n]=t),s}function instance$c(s,r,n){let{target:t=void 0}=r,{sketch:a=void 0}=r,{parentDivStyle:l="display: block;"}=r,{debug:o=!1}=r,c;const i=createEventDispatcher(),f={ref(){i("ref",t)},instance(){i("instance",c)}};function y(_){return n(2,t=_),{destroy(){n(2,t=void 0)}}}return onMount(async()=>{const _=await __vitePreload(()=>Promise.resolve().then(()=>p5_min$1),void 0,import.meta.url),{default:u}=_,p=Object.entries(_).filter(([g,x])=>x instanceof Function&&g[0]!=="_"&&g!=="default");o&&console.log("available p5 native classes",p),c=new u(g=>(g=augmentClasses(g,p),o&&console.log("p5 instance",g),window._p5Instance=g,a(g)),t),f.ref(),f.instance()}),s.$$set=_=>{"target"in _&&n(2,t=_.target),"sketch"in _&&n(3,a=_.sketch),"parentDivStyle"in _&&n(0,l=_.parentDivStyle),"debug"in _&&n(4,o=_.debug)},[l,y,t,a,o]}class P5 extends SvelteComponent{constructor(r){super(),init(this,r,instance$c,create_fragment$c,safe_not_equal,{target:2,sketch:3,parentDivStyle:0,debug:4})}}var p5_min$2={exports:{}};/*! p5.js v1.9.0 November 28, 2023 */(function(s,r){(function(n){s.exports=n()})(function(){var n;return function t(a,l,o){function c(y,_){if(!l[y]){if(!a[y]){var u=typeof commonjsRequire=="function"&&commonjsRequire;if(!_&&u)return u(y,!0);if(i)return i(y,!0);throw(_=new Error("Cannot find module '"+y+"'")).code="MODULE_NOT_FOUND",_}u=l[y]={exports:{}},a[y][0].call(u.exports,function(m){return c(a[y][1][m]||m)},u,u.exports,t,a,l,o)}return l[y].exports}for(var i=typeof commonjsRequire=="function"&&commonjsRequire,f=0;f<o.length;f++)c(o[f]);return c}({1:[function(t,a,l){l.byteLength=function(g){var g=u(g),p=g[0],g=g[1];return 3*(p+g)/4-g},l.toByteArray=function(m){var p,g,b=u(m),x=b[0],b=b[1],E=new i(function(T,j){return 3*(T+j)/4-j}(x,b)),S=0,k=0<b?x-4:x;for(g=0;g<k;g+=4)p=c[m.charCodeAt(g)]<<18|c[m.charCodeAt(g+1)]<<12|c[m.charCodeAt(g+2)]<<6|c[m.charCodeAt(g+3)],E[S++]=p>>16&255,E[S++]=p>>8&255,E[S++]=255&p;return b===2&&(p=c[m.charCodeAt(g)]<<2|c[m.charCodeAt(g+1)]>>4,E[S++]=255&p),b===1&&(p=c[m.charCodeAt(g)]<<10|c[m.charCodeAt(g+1)]<<4|c[m.charCodeAt(g+2)]>>2,E[S++]=p>>8&255,E[S++]=255&p),E},l.fromByteArray=function(m){for(var p,g=m.length,x=g%3,b=[],E=0,S=g-x;E<S;E+=16383)b.push(function(k,T,j){for(var A,C=[],N=T;N<j;N+=3)A=(k[N]<<16&16711680)+(k[N+1]<<8&65280)+(255&k[N+2]),C.push(function(V){return o[V>>18&63]+o[V>>12&63]+o[V>>6&63]+o[63&V]}(A));return C.join("")}(m,E,S<E+16383?S:E+16383));return x==1?(p=m[g-1],b.push(o[p>>2]+o[p<<4&63]+"==")):x==2&&(p=(m[g-2]<<8)+m[g-1],b.push(o[p>>10]+o[p>>4&63]+o[p<<2&63]+"=")),b.join("")};for(var o=[],c=[],i=typeof Uint8Array<"u"?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,_=f.length;y<_;++y)o[y]=f[y],c[f.charCodeAt(y)]=y;function u(m){var p=m.length;if(0<p%4)throw new Error("Invalid string. Length must be a multiple of 4");return m=m.indexOf("="),p=(m=m===-1?p:m)===p?0:4-m%4,[m,p]}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],2:[function(t,a,l){},{}],3:[function(t,a,l){},{}],4:[function(t,a,l){(function(u){var c=t("base64-js"),i=t("ieee754"),f=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,y=(l.Buffer=u,l.SlowBuffer=function(B){return+B!=B&&(B=0),u.alloc(+B)},l.INSPECT_MAX_BYTES=50,2147483647);function _(B){if(y<B)throw new RangeError('The value "'+B+'" is invalid for option "size"');return B=new Uint8Array(B),Object.setPrototypeOf(B,u.prototype),B}function u(B,D,X){if(typeof B!="number")return m(B,D,X);if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(B)}function m(B,D,X){if(typeof B=="string"){var K=B,re=D;if(u.isEncoding(re=typeof re=="string"&&re!==""?re:"utf8"))return se=0|E(K,re),fe=_(se),fe=(K=fe.write(K,re))!==se?fe.slice(0,K):fe;throw new TypeError("Unknown encoding: "+re)}if(ArrayBuffer.isView(B))return x(B);if(B!=null){if(J(B,ArrayBuffer)||B&&J(B.buffer,ArrayBuffer)){var se=B,K=D,fe=X;if(K<0||se.byteLength<K)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<K+(fe||0))throw new RangeError('"length" is outside of buffer bounds');return se=K===void 0&&fe===void 0?new Uint8Array(se):fe===void 0?new Uint8Array(se,K):new Uint8Array(se,K,fe),Object.setPrototypeOf(se,u.prototype),se}if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(re=B.valueOf&&B.valueOf(),re!=null&&re!==B)return u.from(re,D,X);var xe=function(he){{var _e,ye;if(u.isBuffer(he))return _e=0|b(he.length),(ye=_(_e)).length!==0&&he.copy(ye,0,0,_e),ye}if(he.length!==void 0)return typeof he.length!="number"||Z(he.length)?_(0):x(he);if(he.type==="Buffer"&&Array.isArray(he.data))return x(he.data)}(B);if(xe)return xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return u.from(B[Symbol.toPrimitive]("string"),D,X)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}function p(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function g(B){return p(B),_(B<0?0:0|b(B))}function x(B){for(var D=B.length<0?0:0|b(B.length),X=_(D),K=0;K<D;K+=1)X[K]=255&B[K];return X}function b(B){if(y<=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|B}function E(B,D){if(u.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||J(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);var X=B.length,K=2<arguments.length&&arguments[2]===!0;if(!K&&X===0)return 0;for(var re=!1;;)switch(D){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return H(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*X;case"hex":return X>>>1;case"base64":return O(B).length;default:if(re)return K?-1:H(B).length;D=(""+D).toLowerCase(),re=!0}}function S(B,D,X){var K,re=!1;if((D=D===void 0||D<0?0:D)>this.length||(X=X===void 0||X>this.length?this.length:X)<=0||(X>>>=0)<=(D>>>=0))return"";for(B=B||"utf8";;)switch(B){case"hex":var se=this,$=D,fe=X,ye=se.length;(!fe||fe<0||ye<fe)&&(fe=ye);for(var xe="",he=$=!$||$<0?0:$;he<fe;++he)xe+=z[se[he]];return xe;case"utf8":case"utf-8":return N(this,D,X);case"ascii":var _e=this,ye=D,ue=X,pe="";ue=Math.min(_e.length,ue);for(var ke=ye;ke<ue;++ke)pe+=String.fromCharCode(127&_e[ke]);return pe;case"latin1":case"binary":var Ie=this,$=D,te=X,ne="";te=Math.min(Ie.length,te);for(var be=$;be<te;++be)ne+=String.fromCharCode(Ie[be]);return ne;case"base64":return ve=this,K=X,(je=D)===0&&K===ve.length?c.fromByteArray(ve):c.fromByteArray(ve.slice(je,K));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var ve=D,je=X,Re=this.slice(ve,je),Ge="",Xe=0;Xe<Re.length;Xe+=2)Ge+=String.fromCharCode(Re[Xe]+256*Re[Xe+1]);return Ge;default:if(re)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),re=!0}}function k(B,D,X){var K=B[D];B[D]=B[X],B[X]=K}function T(B,D,X,K,re){if(B.length===0)return-1;if(typeof X=="string"?(K=X,X=0):2147483647<X?X=2147483647:X<-2147483648&&(X=-2147483648),(X=(X=Z(X=+X)?re?0:B.length-1:X)<0?B.length+X:X)>=B.length){if(re)return-1;X=B.length-1}else if(X<0){if(!re)return-1;X=0}if(typeof D=="string"&&(D=u.from(D,K)),u.isBuffer(D))return D.length===0?-1:j(B,D,X,K,re);if(typeof D=="number")return D&=255,typeof Uint8Array.prototype.indexOf=="function"?(re?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(B,D,X):j(B,[D],X,K,re);throw new TypeError("val must be string, number or Buffer")}function j(B,D,X,K,re){var se=1,fe=B.length,xe=D.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(B.length<2||D.length<2)return-1;fe/=se=2,xe/=2,X/=2}function he(ke,Ie){return se===1?ke[Ie]:ke.readUInt16BE(Ie*se)}if(re)for(var _e=-1,ye=X;ye<fe;ye++)if(he(B,ye)===he(D,_e===-1?0:ye-_e)){if(ye-(_e=_e===-1?ye:_e)+1===xe)return _e*se}else _e!==-1&&(ye-=ye-_e),_e=-1;else for(ye=X=fe<X+xe?fe-xe:X;0<=ye;ye--){for(var ue=!0,pe=0;pe<xe;pe++)if(he(B,ye+pe)!==he(D,pe)){ue=!1;break}if(ue)return ye}return-1}function A(B,D,X,K){return U(function(re){for(var se=[],fe=0;fe<re.length;++fe)se.push(255&re.charCodeAt(fe));return se}(D),B,X,K)}function C(B,D,X,K){return U(function(re,se){for(var fe,xe,he=[],_e=0;_e<re.length&&!((se-=2)<0);++_e)xe=re.charCodeAt(_e),fe=xe>>8,xe=xe%256,he.push(xe),he.push(fe);return he}(D,B.length-X),B,X,K)}function N(B,D,X){X=Math.min(B.length,X);for(var K=[],re=D;re<X;){var se,fe,xe,he,_e=B[re],ye=null,ue=239<_e?4:223<_e?3:191<_e?2:1;if(re+ue<=X)switch(ue){case 1:_e<128&&(ye=_e);break;case 2:(192&(se=B[re+1]))==128&&127<(he=(31&_e)<<6|63&se)&&(ye=he);break;case 3:se=B[re+1],fe=B[re+2],(192&se)==128&&(192&fe)==128&&2047<(he=(15&_e)<<12|(63&se)<<6|63&fe)&&(he<55296||57343<he)&&(ye=he);break;case 4:se=B[re+1],fe=B[re+2],xe=B[re+3],(192&se)==128&&(192&fe)==128&&(192&xe)==128&&65535<(he=(15&_e)<<18|(63&se)<<12|(63&fe)<<6|63&xe)&&he<1114112&&(ye=he)}ye===null?(ye=65533,ue=1):65535<ye&&(ye-=65536,K.push(ye>>>10&1023|55296),ye=56320|1023&ye),K.push(ye),re+=ue}var pe=K,ke=pe.length;if(ke<=V)return String.fromCharCode.apply(String,pe);for(var Ie="",$=0;$<ke;)Ie+=String.fromCharCode.apply(String,pe.slice($,$+=V));return Ie}l.kMaxLength=y,(u.TYPED_ARRAY_SUPPORT=function(){try{var B=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(B,D),B.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=m,Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(B,D,X){return D=D,X=X,p(B=B),!(B<=0)&&D!==void 0?typeof X=="string"?_(B).fill(D,X):_(B).fill(D):_(B)},u.allocUnsafe=g,u.allocUnsafeSlow=g,u.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==u.prototype},u.compare=function(B,D){if(J(B,Uint8Array)&&(B=u.from(B,B.offset,B.byteLength)),J(D,Uint8Array)&&(D=u.from(D,D.offset,D.byteLength)),!u.isBuffer(B)||!u.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===D)return 0;for(var X=B.length,K=D.length,re=0,se=Math.min(X,K);re<se;++re)if(B[re]!==D[re]){X=B[re],K=D[re];break}return X<K?-1:K<X?1:0},u.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(B,D){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return u.alloc(0);if(D===void 0)for(re=D=0;re<B.length;++re)D+=B[re].length;for(var X=u.allocUnsafe(D),K=0,re=0;re<B.length;++re){var se=B[re];if(J(se,Uint8Array)&&(se=u.from(se)),!u.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(X,K),K+=se.length}return X},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<B;D+=2)k(this,D,D+1);return this},u.prototype.swap32=function(){var B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<B;D+=4)k(this,D,D+3),k(this,D+1,D+2);return this},u.prototype.swap64=function(){var B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<B;D+=8)k(this,D,D+7),k(this,D+1,D+6),k(this,D+2,D+5),k(this,D+3,D+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var B=this.length;return B===0?"":arguments.length===0?N(this,0,B):S.apply(this,arguments)},u.prototype.equals=function(B){if(u.isBuffer(B))return this===B||u.compare(this,B)===0;throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var D="",B=l.INSPECT_MAX_BYTES,D=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim();return this.length>B&&(D+=" ... "),"<Buffer "+D+">"},f&&(u.prototype[f]=u.prototype.inspect),u.prototype.compare=function(B,D,X,K,re){if(J(B,Uint8Array)&&(B=u.from(B,B.offset,B.byteLength)),!u.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(X===void 0&&(X=B?B.length:0),K===void 0&&(K=0),re===void 0&&(re=this.length),(D=D===void 0?0:D)<0||X>B.length||K<0||re>this.length)throw new RangeError("out of range index");if(re<=K&&X<=D)return 0;if(re<=K)return-1;if(X<=D)return 1;if(this===B)return 0;for(var se=(re>>>=0)-(K>>>=0),fe=(X>>>=0)-(D>>>=0),xe=Math.min(se,fe),he=this.slice(K,re),_e=B.slice(D,X),ye=0;ye<xe;++ye)if(he[ye]!==_e[ye]){se=he[ye],fe=_e[ye];break}return se<fe?-1:fe<se?1:0},u.prototype.includes=function(B,D,X){return this.indexOf(B,D,X)!==-1},u.prototype.indexOf=function(B,D,X){return T(this,B,D,X,!0)},u.prototype.lastIndexOf=function(B,D,X){return T(this,B,D,X,!1)},u.prototype.write=function(B,D,X,K){if(D===void 0)K="utf8",X=this.length,D=0;else if(X===void 0&&typeof D=="string")K=D,X=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D>>>=0,isFinite(X)?(X>>>=0,K===void 0&&(K="utf8")):(K=X,X=void 0)}var re=this.length-D;if((X===void 0||re<X)&&(X=re),0<B.length&&(X<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");K=K||"utf8";for(var se,fe,xe,he=!1;;)switch(K){case"hex":var _e=this,ye=B,ue=D,pe=X,ke=(ue=Number(ue)||0,_e.length-ue);(!pe||ke<(pe=Number(pe)))&&(pe=ke),(ke=ye.length)/2<pe&&(pe=ke/2);for(var Ie=0;Ie<pe;++Ie){var $=parseInt(ye.substr(2*Ie,2),16);if(Z($))return Ie;_e[ue+Ie]=$}return Ie;case"utf8":case"utf-8":return ke=D,xe=X,U(H(B,(fe=this).length-ke),fe,ke,xe);case"ascii":return A(this,B,D,X);case"latin1":case"binary":return A(this,B,D,X);case"base64":return fe=this,xe=D,se=X,U(O(B),fe,xe,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,B,D,X);default:if(he)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),he=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function I(B,D,X){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(X<B+D)throw new RangeError("Trying to access beyond buffer length")}function G(B,D,X,K,re,se){if(!u.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(re<D||D<se)throw new RangeError('"value" argument is out of bounds');if(X+K>B.length)throw new RangeError("Index out of range")}function R(B,D,X,K){if(X+K>B.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function q(B,D,X,K,re){return D=+D,X>>>=0,re||R(B,0,X,4),i.write(B,D,X,K,23,4),X+4}function M(B,D,X,K,re){return D=+D,X>>>=0,re||R(B,0,X,8),i.write(B,D,X,K,52,8),X+8}u.prototype.slice=function(B,D){var X=this.length,X=((B=~~B)<0?(B+=X)<0&&(B=0):X<B&&(B=X),(D=D===void 0?X:~~D)<0?(D+=X)<0&&(D=0):X<D&&(D=X),D<B&&(D=B),this.subarray(B,D));return Object.setPrototypeOf(X,u.prototype),X},u.prototype.readUIntLE=function(B,D,X){B>>>=0,D>>>=0,X||I(B,D,this.length);for(var K=this[B],re=1,se=0;++se<D&&(re*=256);)K+=this[B+se]*re;return K},u.prototype.readUIntBE=function(B,D,X){B>>>=0,D>>>=0,X||I(B,D,this.length);for(var K=this[B+--D],re=1;0<D&&(re*=256);)K+=this[B+--D]*re;return K},u.prototype.readUInt8=function(B,D){return B>>>=0,D||I(B,1,this.length),this[B]},u.prototype.readUInt16LE=function(B,D){return B>>>=0,D||I(B,2,this.length),this[B]|this[B+1]<<8},u.prototype.readUInt16BE=function(B,D){return B>>>=0,D||I(B,2,this.length),this[B]<<8|this[B+1]},u.prototype.readUInt32LE=function(B,D){return B>>>=0,D||I(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},u.prototype.readUInt32BE=function(B,D){return B>>>=0,D||I(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},u.prototype.readIntLE=function(B,D,X){B>>>=0,D>>>=0,X||I(B,D,this.length);for(var K=this[B],re=1,se=0;++se<D&&(re*=256);)K+=this[B+se]*re;return(re*=128)<=K&&(K-=Math.pow(2,8*D)),K},u.prototype.readIntBE=function(B,D,X){B>>>=0,D>>>=0,X||I(B,D,this.length);for(var K=D,re=1,se=this[B+--K];0<K&&(re*=256);)se+=this[B+--K]*re;return(re*=128)<=se&&(se-=Math.pow(2,8*D)),se},u.prototype.readInt8=function(B,D){return B>>>=0,D||I(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},u.prototype.readInt16LE=function(B,D){return B>>>=0,D||I(B,2,this.length),D=this[B]|this[B+1]<<8,32768&D?4294901760|D:D},u.prototype.readInt16BE=function(B,D){return B>>>=0,D||I(B,2,this.length),D=this[B+1]|this[B]<<8,32768&D?4294901760|D:D},u.prototype.readInt32LE=function(B,D){return B>>>=0,D||I(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},u.prototype.readInt32BE=function(B,D){return B>>>=0,D||I(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},u.prototype.readFloatLE=function(B,D){return B>>>=0,D||I(B,4,this.length),i.read(this,B,!0,23,4)},u.prototype.readFloatBE=function(B,D){return B>>>=0,D||I(B,4,this.length),i.read(this,B,!1,23,4)},u.prototype.readDoubleLE=function(B,D){return B>>>=0,D||I(B,8,this.length),i.read(this,B,!0,52,8)},u.prototype.readDoubleBE=function(B,D){return B>>>=0,D||I(B,8,this.length),i.read(this,B,!1,52,8)},u.prototype.writeUIntLE=function(B,D,X,K){B=+B,D>>>=0,X>>>=0,K||G(this,B,D,X,Math.pow(2,8*X)-1,0);var re=1,se=0;for(this[D]=255&B;++se<X&&(re*=256);)this[D+se]=B/re&255;return D+X},u.prototype.writeUIntBE=function(B,D,X,K){B=+B,D>>>=0,X>>>=0,K||G(this,B,D,X,Math.pow(2,8*X)-1,0);var re=X-1,se=1;for(this[D+re]=255&B;0<=--re&&(se*=256);)this[D+re]=B/se&255;return D+X},u.prototype.writeUInt8=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,1,255,0),this[D]=255&B,D+1},u.prototype.writeUInt16LE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,2,65535,0),this[D]=255&B,this[D+1]=B>>>8,D+2},u.prototype.writeUInt16BE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,2,65535,0),this[D]=B>>>8,this[D+1]=255&B,D+2},u.prototype.writeUInt32LE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,4,4294967295,0),this[D+3]=B>>>24,this[D+2]=B>>>16,this[D+1]=B>>>8,this[D]=255&B,D+4},u.prototype.writeUInt32BE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,4,4294967295,0),this[D]=B>>>24,this[D+1]=B>>>16,this[D+2]=B>>>8,this[D+3]=255&B,D+4},u.prototype.writeIntLE=function(B,D,X,K){B=+B,D>>>=0,K||G(this,B,D,X,(K=Math.pow(2,8*X-1))-1,-K);var re=0,se=1,fe=0;for(this[D]=255&B;++re<X&&(se*=256);)B<0&&fe===0&&this[D+re-1]!==0&&(fe=1),this[D+re]=(B/se>>0)-fe&255;return D+X},u.prototype.writeIntBE=function(B,D,X,K){B=+B,D>>>=0,K||G(this,B,D,X,(K=Math.pow(2,8*X-1))-1,-K);var re=X-1,se=1,fe=0;for(this[D+re]=255&B;0<=--re&&(se*=256);)B<0&&fe===0&&this[D+re+1]!==0&&(fe=1),this[D+re]=(B/se>>0)-fe&255;return D+X},u.prototype.writeInt8=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,1,127,-128),this[D]=255&(B=B<0?255+B+1:B),D+1},u.prototype.writeInt16LE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,2,32767,-32768),this[D]=255&B,this[D+1]=B>>>8,D+2},u.prototype.writeInt16BE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,2,32767,-32768),this[D]=B>>>8,this[D+1]=255&B,D+2},u.prototype.writeInt32LE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,4,2147483647,-2147483648),this[D]=255&B,this[D+1]=B>>>8,this[D+2]=B>>>16,this[D+3]=B>>>24,D+4},u.prototype.writeInt32BE=function(B,D,X){return B=+B,D>>>=0,X||G(this,B,D,4,2147483647,-2147483648),this[D]=(B=B<0?4294967295+B+1:B)>>>24,this[D+1]=B>>>16,this[D+2]=B>>>8,this[D+3]=255&B,D+4},u.prototype.writeFloatLE=function(B,D,X){return q(this,B,D,!0,X)},u.prototype.writeFloatBE=function(B,D,X){return q(this,B,D,!1,X)},u.prototype.writeDoubleLE=function(B,D,X){return M(this,B,D,!0,X)},u.prototype.writeDoubleBE=function(B,D,X){return M(this,B,D,!1,X)},u.prototype.copy=function(B,D,X,K){if(!u.isBuffer(B))throw new TypeError("argument should be a Buffer");if(X=X||0,K||K===0||(K=this.length),D>=B.length&&(D=B.length),(K=0<K&&K<X?X:K)===X||B.length===0||this.length===0)return 0;if((D=D||0)<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length);var re=(K=B.length-D<K-X?B.length-D+X:K)-X;if(this===B&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,X,K);else if(this===B&&X<D&&D<K)for(var se=re-1;0<=se;--se)B[se+D]=this[se+X];else Uint8Array.prototype.set.call(B,this.subarray(X,K),D);return re},u.prototype.fill=function(B,D,X,K){if(typeof B=="string"){if(typeof D=="string"?(K=D,D=0,X=this.length):typeof X=="string"&&(K=X,X=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!u.isEncoding(K))throw new TypeError("Unknown encoding: "+K);var re;B.length===1&&(re=B.charCodeAt(0),(K==="utf8"&&re<128||K==="latin1")&&(B=re))}else typeof B=="number"?B&=255:typeof B=="boolean"&&(B=Number(B));if(D<0||this.length<D||this.length<X)throw new RangeError("Out of range index");var se;if(!(X<=D))if(D>>>=0,X=X===void 0?this.length:X>>>0,typeof(B=B||0)=="number")for(se=D;se<X;++se)this[se]=B;else{var fe=u.isBuffer(B)?B:u.from(B,K),xe=fe.length;if(xe===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(se=0;se<X-D;++se)this[se+D]=fe[se%xe]}return this};var L=/[^+/0-9A-Za-z-_]/g;function H(B,D){D=D||1/0;for(var X,K=B.length,re=null,se=[],fe=0;fe<K;++fe){if(55295<(X=B.charCodeAt(fe))&&X<57344){if(!re){if(56319<X){-1<(D-=3)&&se.push(239,191,189);continue}if(fe+1===K){-1<(D-=3)&&se.push(239,191,189);continue}re=X;continue}if(X<56320){-1<(D-=3)&&se.push(239,191,189),re=X;continue}X=65536+(re-55296<<10|X-56320)}else re&&-1<(D-=3)&&se.push(239,191,189);if(re=null,X<128){if(--D<0)break;se.push(X)}else if(X<2048){if((D-=2)<0)break;se.push(X>>6|192,63&X|128)}else if(X<65536){if((D-=3)<0)break;se.push(X>>12|224,X>>6&63|128,63&X|128)}else{if(!(X<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;se.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}}return se}function O(B){return c.toByteArray(function(D){if((D=(D=D.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(B))}function U(B,D,X,K){for(var re=0;re<K&&!(re+X>=D.length||re>=B.length);++re)D[re+X]=B[re];return re}function J(B,D){return B instanceof D||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===D.name}function Z(B){return B!=B}var z=function(){for(var B="0123456789abcdef",D=new Array(256),X=0;X<16;++X)for(var K=16*X,re=0;re<16;++re)D[K+re]=B[X]+B[re];return D}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:246}],5:[function(t,a,l){a.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(t,a,l){var o=t("../internals/is-object");a.exports=function(c){if(o(c)||c===null)return c;throw TypeError("Can't set "+String(c)+" as a prototype")}},{"../internals/is-object":74}],7:[function(i,a,l){var o=i("../internals/well-known-symbol"),c=i("../internals/object-create"),i=i("../internals/object-define-property"),f=o("unscopables"),y=Array.prototype;y[f]==null&&i.f(y,f,{configurable:!0,value:c(null)}),a.exports=function(_){y[f][_]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(t,a,l){var o=t("../internals/string-multibyte").charAt;a.exports=function(c,i,f){return i+(f?o(c,i).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,a,l){a.exports=function(o,c,i){if(o instanceof c)return o;throw TypeError("Incorrect "+(i?i+" ":"")+"invocation")}},{}],10:[function(t,a,l){var o=t("../internals/is-object");a.exports=function(c){if(o(c))return c;throw TypeError(String(c)+" is not an object")}},{"../internals/is-object":74}],11:[function(t,a,l){a.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(R,a,l){function o(M){return _(M)&&u(q,m(M))}var c,i=R("../internals/array-buffer-native"),f=R("../internals/descriptors"),y=R("../internals/global"),_=R("../internals/is-object"),u=R("../internals/has"),m=R("../internals/classof"),p=R("../internals/create-non-enumerable-property"),g=R("../internals/redefine"),x=R("../internals/object-define-property").f,b=R("../internals/object-get-prototype-of"),E=R("../internals/object-set-prototype-of"),V=R("../internals/well-known-symbol"),R=R("../internals/uid"),S=y.Int8Array,k=S&&S.prototype,T=y.Uint8ClampedArray,T=T&&T.prototype,j=S&&b(S),A=k&&b(k),C=Object.prototype,N=C.isPrototypeOf,V=V("toStringTag"),I=R("TYPED_ARRAY_TAG"),G=i&&!!E&&m(y.opera)!=="Opera",R=!1,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(c in q)y[c]||(G=!1);if((!G||typeof j!="function"||j===Function.prototype)&&(j=function(){throw TypeError("Incorrect invocation")},G))for(c in q)y[c]&&E(y[c],j);if((!G||!A||A===C)&&(A=j.prototype,G))for(c in q)y[c]&&E(y[c].prototype,A);if(G&&b(T)!==A&&E(T,A),f&&!u(A,V))for(c in R=!0,x(A,V,{get:function(){return _(this)?this[I]:void 0}}),q)y[c]&&p(y[c],I,c);a.exports={NATIVE_ARRAY_BUFFER_VIEWS:G,TYPED_ARRAY_TAG:R&&I,aTypedArray:function(M){if(o(M))return M;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(M){if(E){if(N.call(j,M))return M}else for(var L in q)if(u(q,c)&&(L=y[L],L&&(M===L||N.call(L,M))))return M;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(M,L,H){if(f){if(H)for(var O in q)O=y[O],O&&u(O.prototype,M)&&delete O.prototype[M];A[M]&&!H||g(A,M,!H&&G&&k[M]||L)}},exportTypedArrayStaticMethod:function(M,L,H){var O,U;if(f){if(E){if(H)for(O in q)(U=y[O])&&u(U,M)&&delete U[M];if(j[M]&&!H)return;try{return g(j,M,!H&&G&&S[M]||L)}catch{}}for(O in q)!(U=y[O])||U[M]&&!H||g(U,M,L)}},isView:function(M){return M=m(M),M==="DataView"||u(q,M)},isTypedArray:o,TypedArray:j,TypedArrayPrototype:A}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(X,a,l){function o(ue){return[255&ue]}function c(ue){return[255&ue,ue>>8&255]}function i(ue){return[255&ue,ue>>8&255,ue>>16&255,ue>>24&255]}function f(ue){return ue[3]<<24|ue[2]<<16|ue[1]<<8|ue[0]}function y(ue){return se(ue,23,4)}function _(ue){return se(ue,52,8)}function u(ue,pe){R(ue[J],pe,{get:function(){return L(this)[pe]}})}function m(ne,pe,te,Ie){if(te=C(te),ne=L(ne),te+pe>ne.byteLength)throw re(Z);var $=L(ne.buffer).bytes,te=te+ne.byteOffset,ne=$.slice(te,te+pe);return Ie?ne:ne.reverse()}function p(ue,pe,ke,Ie,$,te){if(ke=C(ke),ue=L(ue),ke+pe>ue.byteLength)throw re(Z);for(var ne=L(ue.buffer).bytes,be=ke+ue.byteOffset,ve=Ie(+$),je=0;je<pe;je++)ne[be+je]=ve[te?je:pe-je-1]}var g=X("../internals/global"),x=X("../internals/descriptors"),b=X("../internals/array-buffer-native"),E=X("../internals/create-non-enumerable-property"),S=X("../internals/redefine-all"),k=X("../internals/fails"),T=X("../internals/an-instance"),j=X("../internals/to-integer"),A=X("../internals/to-length"),C=X("../internals/to-index"),N=X("../internals/ieee754"),V=X("../internals/object-get-prototype-of"),I=X("../internals/object-set-prototype-of"),G=X("../internals/object-get-own-property-names").f,R=X("../internals/object-define-property").f,q=X("../internals/array-fill"),M=X("../internals/set-to-string-tag"),X=X("../internals/internal-state"),L=X.get,H=X.set,O="ArrayBuffer",U="DataView",J="prototype",Z="Wrong index",z=g[O],B=z,D=g[U],X=D&&D[J],K=Object.prototype,re=g.RangeError,se=N.pack,fe=N.unpack;if(b){if(!k(function(){z(1)})||!k(function(){new z(-1)})||k(function(){return new z,new z(1.5),new z(NaN),z.name!=O})){for(var xe,g=(B=function(ke){return T(this,B),new z(C(ke))})[J]=z[J],he=G(z),_e=0;he.length>_e;)(xe=he[_e++])in B||E(B,xe,z[xe]);g.constructor=B}I&&V(X)!==K&&I(X,K);var N=new D(new B(2)),ye=X.setInt8;N.setInt8(0,2147483648),N.setInt8(1,2147483649),!N.getInt8(0)&&N.getInt8(1)||S(X,{setInt8:function(pe,ke){ye.call(this,pe,ke<<24>>24)},setUint8:function(pe,ke){ye.call(this,pe,ke<<24>>24)}},{unsafe:!0})}else B=function(ue){T(this,B,O),ue=C(ue),H(this,{bytes:q.call(new Array(ue),0),byteLength:ue}),x||(this.byteLength=ue)},D=function(ue,$,ke){T(this,D,U),T(ue,B,U);var Ie=L(ue).byteLength,$=j($);if($<0||Ie<$)throw re("Wrong offset");if(Ie<$+(ke=ke===void 0?Ie-$:A(ke)))throw re("Wrong length");H(this,{buffer:ue,byteLength:ke,byteOffset:$}),x||(this.buffer=ue,this.byteLength=ke,this.byteOffset=$)},x&&(u(B,"byteLength"),u(D,"buffer"),u(D,"byteLength"),u(D,"byteOffset")),S(D[J],{getInt8:function(ue){return m(this,1,ue)[0]<<24>>24},getUint8:function(ue){return m(this,1,ue)[0]},getInt16:function(ue){return ue=m(this,2,ue,1<arguments.length?arguments[1]:void 0),(ue[1]<<8|ue[0])<<16>>16},getUint16:function(ue){return ue=m(this,2,ue,1<arguments.length?arguments[1]:void 0),ue[1]<<8|ue[0]},getInt32:function(ue){return f(m(this,4,ue,1<arguments.length?arguments[1]:void 0))},getUint32:function(ue){return f(m(this,4,ue,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ue){return fe(m(this,4,ue,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ue){return fe(m(this,8,ue,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ue,pe){p(this,1,ue,o,pe)},setUint8:function(ue,pe){p(this,1,ue,o,pe)},setInt16:function(ue,pe){p(this,2,ue,c,pe,2<arguments.length?arguments[2]:void 0)},setUint16:function(ue,pe){p(this,2,ue,c,pe,2<arguments.length?arguments[2]:void 0)},setInt32:function(ue,pe){p(this,4,ue,i,pe,2<arguments.length?arguments[2]:void 0)},setUint32:function(ue,pe){p(this,4,ue,i,pe,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ue,pe){p(this,4,ue,y,pe,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ue,pe){p(this,8,ue,_,pe,2<arguments.length?arguments[2]:void 0)}});M(B,O),M(D,U),a.exports={ArrayBuffer:B,DataView:D}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(t,a,l){var o=t("../internals/to-object"),c=t("../internals/to-absolute-index"),i=t("../internals/to-length"),f=Math.min;a.exports=[].copyWithin||function(x,_){var u=o(this),m=i(u.length),p=c(x,m),g=c(_,m),x=2<arguments.length?arguments[2]:void 0,b=f((x===void 0?m:c(x,m))-g,m-p),E=1;for(g<p&&p<g+b&&(E=-1,g+=b-1,p+=b-1);0<b--;)g in u?u[p]=u[g]:delete u[p],p+=E,g+=E;return u}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(t,a,l){var o=t("../internals/to-object"),c=t("../internals/to-absolute-index"),i=t("../internals/to-length");a.exports=function(f){for(var y=o(this),_=i(y.length),m=arguments.length,u=c(1<m?arguments[1]:void 0,_),m=2<m?arguments[2]:void 0,p=m===void 0?_:c(m,_);u<p;)y[u++]=f;return y}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(i,a,l){var o=i("../internals/array-iteration").forEach,c=i("../internals/array-method-is-strict"),i=i("../internals/array-method-uses-to-length"),c=c("forEach"),i=i("forEach");a.exports=c&&i?[].forEach:function(f){return o(this,f,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,a,l){var o=t("../internals/function-bind-context"),c=t("../internals/to-object"),i=t("../internals/call-with-safe-iteration-closing"),f=t("../internals/is-array-iterator-method"),y=t("../internals/to-length"),_=t("../internals/create-property"),u=t("../internals/get-iterator-method");a.exports=function(T){var p,g,x,b,E,S,k=c(T),T=typeof this=="function"?this:Array,j=arguments.length,A=1<j?arguments[1]:void 0,C=A!==void 0,N=u(k),V=0;if(C&&(A=o(A,2<j?arguments[2]:void 0,2)),N==null||T==Array&&f(N))for(g=new T(p=y(k.length));V<p;V++)S=C?A(k[V],V):k[V],_(g,V,S);else for(E=(b=N.call(k)).next,g=new T;!(x=E.call(b)).done;V++)S=C?i(b,A,[x.value,V],!0):x.value,_(g,V,S);return g.length=V,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(t,a,l){function o(y){return function(_,u,m){var p,g=c(_),x=i(g.length),b=f(m,x);if(y&&u!=u){for(;b<x;)if((p=g[b++])!=p)return!0}else for(;b<x;b++)if((y||b in g)&&g[b]===u)return y||b||0;return!y&&-1}}var c=t("../internals/to-indexed-object"),i=t("../internals/to-length"),f=t("../internals/to-absolute-index");a.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(t,a,l){function o(m){var p=m==1,g=m==2,x=m==3,b=m==4,E=m==6,S=m==5||E;return function(k,T,j,A){for(var C,N,V=f(k),I=i(V),G=c(T,j,3),R=y(I.length),q=0,T=A||_,M=p?T(k,R):g?T(k,0):void 0;q<R;q++)if((S||q in I)&&(N=G(C=I[q],q,V),m)){if(p)M[q]=N;else if(N)switch(m){case 3:return!0;case 5:return C;case 6:return q;case 2:u.call(M,C)}else if(b)return!1}return E?-1:x||b?b:M}}var c=t("../internals/function-bind-context"),i=t("../internals/indexed-object"),f=t("../internals/to-object"),y=t("../internals/to-length"),_=t("../internals/array-species-create"),u=[].push;a.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(m,a,l){var o=m("../internals/to-indexed-object"),c=m("../internals/to-integer"),i=m("../internals/to-length"),u=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),f=Math.min,y=[].lastIndexOf,_=!!y&&1/[1].lastIndexOf(1,-0)<0,u=u("lastIndexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});a.exports=_||!u||!m?function(p){if(_)return y.apply(this,arguments)||0;var g=o(this),x=i(g.length),b=x-1;for((b=1<arguments.length?f(b,c(arguments[1])):b)<0&&(b=x+b);0<=b;b--)if(b in g&&g[b]===p)return b||0;return-1}:y},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/well-known-symbol"),i=t("../internals/engine-v8-version"),f=c("species");a.exports=function(y){return 51<=i||!o(function(){var _=[];return(_.constructor={})[f]=function(){return{foo:1}},_[y](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(t,a,l){var o=t("../internals/fails");a.exports=function(c,i){var f=[][c];return!!f&&o(function(){f.call(null,i||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,a,l){function o(u){throw u}var c=t("../internals/descriptors"),i=t("../internals/fails"),f=t("../internals/has"),y=Object.defineProperty,_={};a.exports=function(u,m){var p,g,x,b;return f(_,u)?_[u]:(p=[][u],g=!!f(m=m||{},"ACCESSORS")&&m.ACCESSORS,x=f(m,0)?m[0]:o,b=f(m,1)?m[1]:void 0,_[u]=!!p&&!i(function(){if(g&&!c)return!0;var E={length:-1};g?y(E,1,{enumerable:!0,get:o}):E[1]=1,p.call(E,x,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(t,a,l){function o(_){return function(u,m,p,g){c(m);var x=i(u),b=f(x),E=y(x.length),S=_?E-1:0,k=_?-1:1;if(p<2)for(;;){if(S in b){g=b[S],S+=k;break}if(S+=k,_?S<0:E<=S)throw TypeError("Reduce of empty array with no initial value")}for(;_?0<=S:S<E;S+=k)S in b&&(g=m(g,b[S],S,x));return g}}var c=t("../internals/a-function"),i=t("../internals/to-object"),f=t("../internals/indexed-object"),y=t("../internals/to-length");a.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(t,a,l){var o=t("../internals/is-object"),c=t("../internals/is-array"),i=t("../internals/well-known-symbol")("species");a.exports=function(f,y){var _;return new((_=c(f)&&(typeof(_=f.constructor)=="function"&&(_===Array||c(_.prototype))||o(_)&&(_=_[i])===null)?void 0:_)===void 0?Array:_)(y===0?0:y)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(t,a,l){var o=t("../internals/an-object");a.exports=function(c,i,f,y){try{return y?i(o(f)[0],f[1]):i(f)}catch(_){throw y=c.return,y!==void 0&&o(y.call(c)),_}}},{"../internals/an-object":10}],27:[function(t,a,l){var o=t("../internals/well-known-symbol")("iterator"),c=!1;try{var i=0,f={next:function(){return{done:!!i++}},return:function(){c=!0}};f[o]=function(){return this},Array.from(f,function(){throw 2})}catch{}a.exports=function(y,_){if(!_&&!c)return!1;var u=!1;try{var m={};m[o]=function(){return{next:function(){return{done:u=!0}}}},y(m)}catch{}return u}},{"../internals/well-known-symbol":148}],28:[function(t,a,l){var o={}.toString;a.exports=function(c){return o.call(c).slice(8,-1)}},{}],29:[function(t,a,l){var o=t("../internals/to-string-tag-support"),c=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("toStringTag"),f=c(function(){return arguments}())=="Arguments";a.exports=o?c:function(y){var _;return y===void 0?"Undefined":y===null?"Null":typeof(_=function(u,m){try{return u[m]}catch{}}(y=Object(y),i))=="string"?_:f?c(y):(_=c(y))=="Object"&&typeof y.callee=="function"?"Arguments":_}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(x,a,l){var o=x("../internals/object-define-property").f,c=x("../internals/object-create"),i=x("../internals/redefine-all"),f=x("../internals/function-bind-context"),y=x("../internals/an-instance"),_=x("../internals/iterate"),u=x("../internals/define-iterator"),m=x("../internals/set-species"),p=x("../internals/descriptors"),g=x("../internals/internal-metadata").fastKey,x=x("../internals/internal-state"),b=x.set,E=x.getterFor;a.exports={getConstructor:function(S,k,T,j){function A(I,G,R){var q,M=V(I),L=C(I,G);return L?L.value=R:(M.last=L={index:q=g(G,!0),key:G,value:R,previous:G=M.last,next:void 0,removed:!1},M.first||(M.first=L),G&&(G.next=L),p?M.size++:I.size++,q!=="F"&&(M.index[q]=L)),I}function C(q,G){var R,q=V(q),M=g(G);if(M!=="F")return q.index[M];for(R=q.first;R;R=R.next)if(R.key==G)return R}var N=S(function(I,G){y(I,N,k),b(I,{type:k,index:c(null),first:void 0,last:void 0,size:0}),p||(I.size=0),G!=null&&_(G,I[j],I,T)}),V=E(k);return i(N.prototype,{clear:function(){for(var I=V(this),G=I.index,R=I.first;R;)R.removed=!0,R.previous&&(R.previous=R.previous.next=void 0),delete G[R.index],R=R.next;I.first=I.last=void 0,p?I.size=0:this.size=0},delete:function(M){var G,R,q=V(this),M=C(this,M);return M&&(G=M.next,R=M.previous,delete q.index[M.index],M.removed=!0,R&&(R.next=G),G&&(G.previous=R),q.first==M&&(q.first=G),q.last==M&&(q.last=R),p?q.size--:this.size--),!!M},forEach:function(I){for(var G,R=V(this),q=f(I,1<arguments.length?arguments[1]:void 0,3);G=G?G.next:R.first;)for(q(G.value,G.key,this);G&&G.removed;)G=G.previous},has:function(I){return!!C(this,I)}}),i(N.prototype,T?{get:function(I){return I=C(this,I),I&&I.value},set:function(I,G){return A(this,I===0?0:I,G)}}:{add:function(I){return A(this,I=I===0?0:I,I)}}),p&&o(N.prototype,"size",{get:function(){return V(this).size}}),N},setStrong:function(S,k,T){var j=k+" Iterator",A=E(k),C=E(j);u(S,k,function(N,V){b(this,{type:j,target:N,state:A(N),kind:V,last:void 0})},function(){for(var N=C(this),V=N.kind,I=N.last;I&&I.removed;)I=I.previous;return N.target&&(N.last=I=I?I.next:N.state.first)?V=="keys"?{value:I.key,done:!1}:V=="values"?{value:I.value,done:!1}:{value:[I.key,I.value],done:!1}:{value:N.target=void 0,done:!0}},T?"entries":"values",!T,!0),m(k)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(b,a,l){function o(A){return A.frozen||(A.frozen=new c)}function c(){this.entries=[]}function i(A,C){return k(A.entries,function(N){return N[0]===C})}var f=b("../internals/redefine-all"),y=b("../internals/internal-metadata").getWeakData,_=b("../internals/an-object"),u=b("../internals/is-object"),m=b("../internals/an-instance"),p=b("../internals/iterate"),g=b("../internals/array-iteration"),x=b("../internals/has"),b=b("../internals/internal-state"),E=b.set,S=b.getterFor,k=g.find,T=g.findIndex,j=0;c.prototype={get:function(A){if(A=i(this,A),A)return A[1]},has:function(A){return!!i(this,A)},set:function(A,C){var N=i(this,A);N?N[1]=C:this.entries.push([A,C])},delete:function(A){var C=T(this.entries,function(N){return N[0]===A});return~C&&this.entries.splice(C,1),!!~C}},a.exports={getConstructor:function(A,C,N,V){function I(q,M,L){var H=R(q),O=y(_(M),!0);return O===!0?o(H).set(M,L):O[H.id]=L,q}var G=A(function(q,M){m(q,G,C),E(q,{type:C,id:j++,frozen:void 0}),M!=null&&p(M,q[V],q,N)}),R=S(C);return f(G.prototype,{delete:function(q){var M,L=R(this);return!!u(q)&&((M=y(q))===!0?o(L).delete(q):M&&x(M,L.id)&&delete M[L.id])},has:function(q){var M,L=R(this);return!!u(q)&&((M=y(q))===!0?o(L).has(q):M&&x(M,L.id))}}),f(G.prototype,N?{get:function(q){var M,L=R(this);if(u(q))return(M=y(q))===!0?o(L).get(q):M?M[L.id]:void 0},set:function(q,M){return I(this,q,M)}}:{add:function(q){return I(this,q,!0)}}),G}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/global"),i=t("../internals/is-forced"),f=t("../internals/redefine"),y=t("../internals/internal-metadata"),_=t("../internals/iterate"),u=t("../internals/an-instance"),m=t("../internals/is-object"),p=t("../internals/fails"),g=t("../internals/check-correctness-of-iteration"),x=t("../internals/set-to-string-tag"),b=t("../internals/inherit-if-required");a.exports=function(E,S,k){function T(O){var U=M[O];f(M,O,O=="add"?function(J){return U.call(this,J===0?0:J),this}:O=="delete"?function(J){return!(G&&!m(J))&&U.call(this,J===0?0:J)}:O=="get"?function(J){return G&&!m(J)?void 0:U.call(this,J===0?0:J)}:O=="has"?function(J){return!(G&&!m(J))&&U.call(this,J===0?0:J)}:function(J,Z){return U.call(this,J===0?0:J,Z),this})}var j,A,C,N,V,I=E.indexOf("Map")!==-1,G=E.indexOf("Weak")!==-1,R=I?"set":"add",q=c[E],M=q&&q.prototype,L=q,H={};return i(E,typeof q!="function"||!(G||M.forEach&&!p(function(){new q().entries().next()})))?(L=k.getConstructor(S,E,I,R),y.REQUIRED=!0):i(E,!0)&&(A=(j=new L)[R](G?{}:-0,1)!=j,C=p(function(){j.has(1)}),N=g(function(O){new q(O)}),V=!G&&p(function(){for(var O=new q,U=5;U--;)O[R](U,U);return!O.has(-0)}),N||(((L=S(function(O,U){return u(O,L,E),O=b(new q,O,L),U!=null&&_(U,O[R],O,I),O})).prototype=M).constructor=L),(C||V)&&(T("delete"),T("has"),I&&T("get")),(V||A)&&T(R),G&&M.clear&&delete M.clear),H[E]=L,o({global:!0,forced:L!=q},H),x(L,E),G||k.setStrong(L,E,I),L}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(t,a,l){var o=t("../internals/has"),c=t("../internals/own-keys"),i=t("../internals/object-get-own-property-descriptor"),f=t("../internals/object-define-property");a.exports=function(y,_){for(var u=c(_),m=f.f,p=i.f,g=0;g<u.length;g++){var x=u[g];o(y,x)||m(y,x,p(_,x))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(t,a,l){var o=t("../internals/well-known-symbol")("match");a.exports=function(c){var i=/./;try{"/./"[c](i)}catch{try{return i[o]=!1,"/./"[c](i)}catch{}}return!1}},{"../internals/well-known-symbol":148}],35:[function(t,a,l){t=t("../internals/fails"),a.exports=!t(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(t,a,l){var o=t("../internals/require-object-coercible"),c=/"/g;a.exports=function(u,f,y,_){var u=String(o(u)),m="<"+f;return y!==""&&(m+=" "+y+'="'+String(_).replace(c,"&quot;")+'"'),m+">"+u+"</"+f+">"}},{"../internals/require-object-coercible":113}],37:[function(t,a,l){function o(){return this}var c=t("../internals/iterators-core").IteratorPrototype,i=t("../internals/object-create"),f=t("../internals/create-property-descriptor"),y=t("../internals/set-to-string-tag"),_=t("../internals/iterators");a.exports=function(u,m,p){return m+=" Iterator",u.prototype=i(c,{next:f(1,p)}),y(u,m,!1,!0),_[m]=o,u}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");a.exports=o?function(f,y,_){return c.f(f,y,i(1,_))}:function(f,y,_){return f[y]=_,f}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(t,a,l){a.exports=function(o,c){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:c}}},{}],40:[function(t,a,l){var o=t("../internals/to-primitive"),c=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");a.exports=function(f,y,_){y=o(y),y in f?c.f(f,y,i(0,_)):f[y]=_}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(b,a,l){function o(){return this}var c=b("../internals/export"),i=b("../internals/create-iterator-constructor"),f=b("../internals/object-get-prototype-of"),y=b("../internals/object-set-prototype-of"),_=b("../internals/set-to-string-tag"),u=b("../internals/create-non-enumerable-property"),m=b("../internals/redefine"),p=b("../internals/well-known-symbol"),g=b("../internals/is-pure"),x=b("../internals/iterators"),b=b("../internals/iterators-core"),E=b.IteratorPrototype,S=b.BUGGY_SAFARI_ITERATORS,k=p("iterator"),T="values",j="entries";a.exports=function(A,C,N,H,I,G,R){i(N,C,H);function q(B){if(B===I&&Z)return Z;if(!S&&B in U)return U[B];switch(B){case"keys":case T:case j:return function(){return new N(this,B)}}return function(){return new N(this)}}var M,L,H=C+" Iterator",O=!1,U=A.prototype,J=U[k]||U["@@iterator"]||I&&U[I],Z=!S&&J||q(I),z=C=="Array"&&U.entries||J;if(z&&(z=f(z.call(new A)),E!==Object.prototype&&z.next&&(g||f(z)===E||(y?y(z,E):typeof z[k]!="function"&&u(z,k,o)),_(z,H,!0,!0),g&&(x[H]=o))),I==T&&J&&J.name!==T&&(O=!0,Z=function(){return J.call(this)}),g&&!R||U[k]===Z||u(U,k,Z),x[C]=Z,I)if(M={values:q(T),keys:G?Z:q("keys"),entries:q(j)},R)for(L in M)!S&&!O&&L in U||m(U,L,M[L]);else c({target:C,proto:!0,forced:S||O},M);return M}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(t,a,l){var o=t("../internals/path"),c=t("../internals/has"),i=t("../internals/well-known-symbol-wrapped"),f=t("../internals/object-define-property").f;a.exports=function(y){var _=o.Symbol||(o.Symbol={});c(_,y)||f(_,y,{value:i.f(y)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(t,a,l){t=t("../internals/fails"),a.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(c,a,l){var o=c("../internals/global"),c=c("../internals/is-object"),i=o.document,f=c(i)&&c(i.createElement);a.exports=function(y){return f?i.createElement(y):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(t,a,l){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,a,l){t=t("../internals/engine-user-agent"),a.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,a,l){t=t("../internals/get-built-in"),a.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(i,a,l){var o,c,f=i("../internals/global"),i=i("../internals/engine-user-agent"),f=f.process,f=f&&f.versions,f=f&&f.v8;f?c=(o=f.split("."))[0]+o[1]:i&&(!(o=i.match(/Edge\/(\d+)/))||74<=o[1])&&(o=i.match(/Chrome\/(\d+)/))&&(c=o[1]),a.exports=c&&+c},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(t,a,l){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,a,l){var o=t("../internals/global"),c=t("../internals/object-get-own-property-descriptor").f,i=t("../internals/create-non-enumerable-property"),f=t("../internals/redefine"),y=t("../internals/set-global"),_=t("../internals/copy-constructor-properties"),u=t("../internals/is-forced");a.exports=function(m,p){var g,x,b,E=m.target,S=m.global,k=m.stat,T=S?o:k?o[E]||y(E,{}):(o[E]||{}).prototype;if(T)for(g in p){if(x=p[g],b=m.noTargetGet?(b=c(T,g))&&b.value:T[g],!u(S?g:E+(k?".":"#")+g,m.forced)&&b!==void 0){if(typeof x==typeof b)continue;_(x,b)}(m.sham||b&&b.sham)&&i(x,"sham",!0),f(T,g,x,m)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(t,a,l){a.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(p,a,l){p("../modules/es.regexp.exec");var o=p("../internals/redefine"),c=p("../internals/fails"),i=p("../internals/well-known-symbol"),f=p("../internals/regexp-exec"),y=p("../internals/create-non-enumerable-property"),_=i("species"),u=!c(function(){var b=/./;return b.exec=function(){var E=[];return E.groups={a:"7"},E},"".replace(b,"$<a>")!=="7"}),m="a".replace(/./,"$0")==="$0",p=i("replace"),g=!!/./[p]&&/./[p]("a","$0")==="",x=!c(function(){var E=/(?:)/,b=E.exec,E=(E.exec=function(){return b.apply(this,arguments)},"ab".split(E));return E.length!==2||E[0]!=="a"||E[1]!=="b"});a.exports=function(b,E,S,k){var T,j,A=i(b),C=!c(function(){var V={};return V[A]=function(){return 7},""[b](V)!=7}),N=C&&!c(function(){var V=!1,I=/a/;return b==="split"&&((I={constructor:{}}).constructor[_]=function(){return I},I.flags="",I[A]=/./[A]),I.exec=function(){return V=!0,null},I[A](""),!V});C&&N&&(b!=="replace"||u&&m&&!g)&&(b!=="split"||x)||(T=/./[A],S=(N=S(A,""[b],function(V,I,G,R,q){return I.exec===f?C&&!q?{done:!0,value:T.call(I,G,R)}:{done:!0,value:V.call(G,I,R)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],j=N[1],o(String.prototype,b,S),o(RegExp.prototype,A,E==2?function(V,I){return j.call(V,this,I)}:function(V){return j.call(V,this)})),k&&y(RegExp.prototype[A],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":187}],53:[function(t,a,l){t=t("../internals/fails"),a.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(t,a,l){var o=t("../internals/a-function");a.exports=function(c,i,f){if(o(c),i===void 0)return c;switch(f){case 0:return function(){return c.call(i)};case 1:return function(y){return c.call(i,y)};case 2:return function(y,_){return c.call(i,y,_)};case 3:return function(y,_,u){return c.call(i,y,_,u)}}return function(){return c.apply(i,arguments)}}},{"../internals/a-function":5}],55:[function(t,a,l){var o=t("../internals/a-function"),c=t("../internals/is-object"),i=[].slice,f={};a.exports=Function.bind||function(y){var _=o(this),u=i.call(arguments,1),m=function(){var p=u.concat(i.call(arguments));if(this instanceof m){var g=_,x=p.length,b=p;if(!(x in f)){for(var E=[],S=0;S<x;S++)E[S]="a["+S+"]";f[x]=Function("C,a","return new C("+E.join(",")+")")}return f[x](g,b)}return _.apply(y,p)};return c(_.prototype)&&(m.prototype=_.prototype),m}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,a,l){function o(f){return typeof f=="function"?f:void 0}var c=t("../internals/path"),i=t("../internals/global");a.exports=function(f,y){return arguments.length<2?o(c[f])||o(i[f]):c[f]&&c[f][y]||i[f]&&i[f][y]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,a,l){var o=t("../internals/classof"),c=t("../internals/iterators"),i=t("../internals/well-known-symbol")("iterator");a.exports=function(f){if(f!=null)return f[i]||f["@@iterator"]||c[o(f)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/get-iterator-method");a.exports=function(i){var f=c(i);if(typeof f!="function")throw TypeError(String(i)+" is not iterable");return o(f.call(i))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,a,l){(function(o){function c(i){return i&&i.Math==Math&&i}a.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(t,a,l){var o={}.hasOwnProperty;a.exports=function(c,i){return o.call(c,i)}},{}],61:[function(t,a,l){a.exports={}},{}],62:[function(t,a,l){var o=t("../internals/global");a.exports=function(c,i){var f=o.console;f&&f.error&&(arguments.length===1?f.error(c):f.error(c,i))}},{"../internals/global":59}],63:[function(t,a,l){t=t("../internals/get-built-in"),a.exports=t("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/fails"),i=t("../internals/document-create-element");a.exports=!o&&!c(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(t,a,l){var o=Math.abs,c=Math.pow,i=Math.floor,f=Math.log,y=Math.LN2;a.exports={pack:function(_,u,S){var p,g,x,b=new Array(S),E=8*S-u-1,S=(1<<E)-1,k=S>>1,T=u===23?c(2,-24)-c(2,-77):0,j=_<0||_===0&&1/_<0?1:0,A=0;for((_=o(_))!=_||_===1/0?(g=_!=_?1:0,p=S):(p=i(f(_)/y),_*(x=c(2,-p))<1&&(p--,x*=2),2<=(_+=1<=p+k?T/x:T*c(2,1-k))*x&&(p++,x/=2),S<=p+k?(g=0,p=S):1<=p+k?(g=(_*x-1)*c(2,u),p+=k):(g=_*c(2,k-1)*c(2,u),p=0));8<=u;b[A++]=255&g,g/=256,u-=8);for(p=p<<u|g,E+=u;0<E;b[A++]=255&p,p/=256,E-=8);return b[--A]|=128*j,b},unpack:function(_,u){var m,p=_.length,S=8*p-u-1,g=(1<<S)-1,x=g>>1,b=S-7,E=p-1,S=_[E--],k=127&S;for(S>>=7;0<b;k=256*k+_[E],E--,b-=8);for(m=k&(1<<-b)-1,k>>=-b,b+=u;0<b;m=256*m+_[E],E--,b-=8);if(k===0)k=1-x;else{if(k===g)return m?NaN:S?-1/0:1/0;m+=c(2,u),k-=x}return(S?-1:1)*m*c(2,k-u)}}},{}],66:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/classof-raw"),i="".split;a.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return c(f)=="String"?i.call(f,""):Object(f)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(t,a,l){var o=t("../internals/is-object"),c=t("../internals/object-set-prototype-of");a.exports=function(i,f,y){return c&&typeof(f=f.constructor)=="function"&&f!==y&&o(f=f.prototype)&&f!==y.prototype&&c(i,f),i}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(o,a,l){var o=o("../internals/shared-store"),c=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(i){return c.call(i)}),a.exports=o.inspectSource},{"../internals/shared-store":119}],69:[function(t,a,l){function o(b){y(b,m,{value:{objectID:"O"+ ++p,weakData:{}}})}var c=t("../internals/hidden-keys"),i=t("../internals/is-object"),f=t("../internals/has"),y=t("../internals/object-define-property").f,_=t("../internals/uid"),u=t("../internals/freezing"),m=_("meta"),p=0,g=Object.isExtensible||function(){return!0},x=a.exports={REQUIRED:!1,fastKey:function(b,E){if(!i(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!f(b,m)){if(!g(b))return"F";if(!E)return"E";o(b)}return b[m].objectID},getWeakData:function(b,E){if(!f(b,m)){if(!g(b))return!0;if(!E)return!1;o(b)}return b[m].weakData},onFreeze:function(b){return u&&x.REQUIRED&&g(b)&&!f(b,m)&&o(b),b}};c[m]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(S,a,l){var o,c,i,f,y,_,u,m,p=S("../internals/native-weak-map"),k=S("../internals/global"),g=S("../internals/is-object"),x=S("../internals/create-non-enumerable-property"),b=S("../internals/has"),E=S("../internals/shared-key"),S=S("../internals/hidden-keys"),k=k.WeakMap;u=p?(o=new k,c=o.get,i=o.has,f=o.set,y=function(T,j){return f.call(o,T,j),j},_=function(T){return c.call(o,T)||{}},function(T){return i.call(o,T)}):(S[m=E("state")]=!0,y=function(T,j){return x(T,m,j),j},_=function(T){return b(T,m)?T[m]:{}},function(T){return b(T,m)}),a.exports={set:y,get:_,has:u,enforce:function(T){return u(T)?_(T):y(T,{})},getterFor:function(T){return function(j){if(g(j)&&(j=_(j)).type===T)return j;throw TypeError("Incompatible receiver, "+T+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,a,l){var o=t("../internals/well-known-symbol"),c=t("../internals/iterators"),i=o("iterator"),f=Array.prototype;a.exports=function(y){return y!==void 0&&(c.Array===y||f[i]===y)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(t,a,l){var o=t("../internals/classof-raw");a.exports=Array.isArray||function(c){return o(c)=="Array"}},{"../internals/classof-raw":28}],73:[function(t,a,l){function o(m,p){return(m=y[f(m)])==u||m!=_&&(typeof p=="function"?c(p):!!p)}var c=t("../internals/fails"),i=/#|\.prototype\./,f=o.normalize=function(m){return String(m).replace(i,".").toLowerCase()},y=o.data={},_=o.NATIVE="N",u=o.POLYFILL="P";a.exports=o},{"../internals/fails":51}],74:[function(t,a,l){a.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],75:[function(t,a,l){a.exports=!1},{}],76:[function(t,a,l){var o=t("../internals/is-object"),c=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("match");a.exports=function(f){var y;return o(f)&&((y=f[i])!==void 0?!!y:c(f)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(t,a,l){function o(m,p){this.stopped=m,this.result=p}var c=t("../internals/an-object"),i=t("../internals/is-array-iterator-method"),f=t("../internals/to-length"),y=t("../internals/function-bind-context"),_=t("../internals/get-iterator-method"),u=t("../internals/call-with-safe-iteration-closing");(a.exports=function(m,p,g,x,b){var E,S,k,T,j,A,C=y(p,g,x?2:1);if(b)E=m;else{if(typeof(p=_(m))!="function")throw TypeError("Target is not iterable");if(i(p)){for(S=0,k=f(m.length);S<k;S++)if((T=x?C(c(A=m[S])[0],A[1]):C(m[S]))&&T instanceof o)return T;return new o(!1)}E=p.call(m)}for(j=E.next;!(A=j.call(E)).done;)if(typeof(T=u(E,C,A.value,x))=="object"&&T&&T instanceof o)return T;return new o(!1)}).stop=function(m){return new o(!0,m)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(_,a,l){var o,c,i=_("../internals/object-get-prototype-of"),f=_("../internals/create-non-enumerable-property"),y=_("../internals/has"),u=_("../internals/well-known-symbol"),_=_("../internals/is-pure"),u=u("iterator"),m=!1;[].keys&&("next"in(c=[].keys())?(i=i(i(c)))!==Object.prototype&&(o=i):m=!0),o==null&&(o={}),_||y(o,u)||f(o,u,function(){return this}),a.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:m}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(t,a,l){a.exports={}},{}],80:[function(t,a,l){a.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],81:[function(x,a,l){var o,c,i,f,y,_,u,m,p=x("../internals/global"),j=x("../internals/object-get-own-property-descriptor").f,T=x("../internals/classof-raw"),g=x("../internals/task").set,x=x("../internals/engine-is-ios"),b=p.MutationObserver||p.WebKitMutationObserver,E=p.process,S=p.Promise,k=T(E)=="process",T=j(p,"queueMicrotask"),j=T&&T.value;j||(o=function(){var A,C;for(k&&(A=E.domain)&&A.exit();c;){C=c.fn,c=c.next;try{C()}catch(N){throw c?f():i=void 0,N}}i=void 0,A&&A.enter()},f=k?function(){E.nextTick(o)}:b&&!x?(y=!0,_=document.createTextNode(""),new b(o).observe(_,{characterData:!0}),function(){_.data=y=!y}):S&&S.resolve?(u=S.resolve(void 0),m=u.then,function(){m.call(u,o)}):function(){g.call(p,o)}),a.exports=j||function(A){A={fn:A,next:void 0},i&&(i.next=A),c||(c=A,f()),i=A}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(t,a,l){t=t("../internals/global"),a.exports=t.Promise},{"../internals/global":59}],83:[function(t,a,l){t=t("../internals/fails"),a.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/well-known-symbol"),i=t("../internals/is-pure"),f=c("iterator");a.exports=!o(function(){var y=new URL("b?a=1&b=2&c=3","http://a"),_=y.searchParams,u="";return y.pathname="c%20d",_.forEach(function(m,p){_.delete("b"),u+=p+m}),i&&!y.toJSON||!_.sort||y.href!=="http://a/c%20d?a=1&c=3"||_.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!_[f]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(o,a,l){var c=o("../internals/global"),o=o("../internals/inspect-source"),c=c.WeakMap;a.exports=typeof c=="function"&&/native code/.test(o(c))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,a,l){function o(i){var f,y;this.promise=new i(function(_,u){if(f!==void 0||y!==void 0)throw TypeError("Bad Promise constructor");f=_,y=u}),this.resolve=c(f),this.reject=c(y)}var c=t("../internals/a-function");a.exports.f=function(i){return new o(i)}},{"../internals/a-function":5}],87:[function(t,a,l){var o=t("../internals/is-regexp");a.exports=function(c){if(o(c))throw TypeError("The method doesn't accept regular expressions");return c}},{"../internals/is-regexp":76}],88:[function(t,a,l){var o=t("../internals/global").isFinite;a.exports=Number.isFinite||function(c){return typeof c=="number"&&o(c)}},{"../internals/global":59}],89:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/fails"),i=t("../internals/object-keys"),f=t("../internals/object-get-own-property-symbols"),y=t("../internals/object-property-is-enumerable"),_=t("../internals/to-object"),u=t("../internals/indexed-object"),m=Object.assign,p=Object.defineProperty;a.exports=!m||c(function(){var g,x,b,E;return!(!o||m({b:1},m(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(x={},E="abcdefghijklmnopqrst",(g={})[b=Symbol()]=7,E.split("").forEach(function(S){x[S]=S}),m({},g)[b]!=7||i(m({},x)).join("")!=E)})?function(g,x){for(var b=_(g),E=arguments.length,S=1,k=f.f,T=y.f;S<E;)for(var j,A=u(arguments[S++]),C=k?i(A).concat(k(A)):i(A),N=C.length,V=0;V<N;)j=C[V++],o&&!T.call(A,j)||(b[j]=A[j]);return b}:m},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(p,a,l){function o(){}var c,i=p("../internals/an-object"),f=p("../internals/object-define-properties"),y=p("../internals/enum-bug-keys"),_=p("../internals/hidden-keys"),u=p("../internals/html"),m=p("../internals/document-create-element"),p=p("../internals/shared-key"),g="prototype",x="script",b=p("IE_PROTO"),E=function(k){return"<"+x+">"+k+"</"+x+">"},S=function(){try{c=document.domain&&new ActiveXObject("htmlfile")}catch{}S=c?((k=c).write(E("")),k.close(),T=k.parentWindow.Object,k=null,T):(k=m("iframe"),T="java"+x+":",k.style.display="none",u.appendChild(k),k.src=String(T),(T=k.contentWindow.document).open(),T.write(E("document.F=Object")),T.close(),T.F);for(var k,T,j=y.length;j--;)delete S[g][y[j]];return S()};_[b]=!0,a.exports=Object.create||function(k,T){var j;return k!==null?(o[g]=i(k),j=new o,o[g]=null,j[b]=k):j=S(),T===void 0?j:f(j,T)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/object-define-property"),i=t("../internals/an-object"),f=t("../internals/object-keys");a.exports=o?Object.defineProperties:function(y,_){i(y);for(var u,m=f(_),p=m.length,g=0;g<p;)c.f(y,u=m[g++],_[u]);return y}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/ie8-dom-define"),i=t("../internals/an-object"),f=t("../internals/to-primitive"),y=Object.defineProperty;l.f=o?y:function(_,u,m){if(i(_),u=f(u,!0),i(m),c)try{return y(_,u,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(_[u]=m.value),_}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/object-property-is-enumerable"),i=t("../internals/create-property-descriptor"),f=t("../internals/to-indexed-object"),y=t("../internals/to-primitive"),_=t("../internals/has"),u=t("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;l.f=o?m:function(p,g){if(p=f(p),g=y(g,!0),u)try{return m(p,g)}catch{}if(_(p,g))return i(!c.f.call(p,g),p[g])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(t,a,l){var o=t("../internals/to-indexed-object"),c=t("../internals/object-get-own-property-names").f,i={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(y){if(!f||i.call(y)!="[object Window]")return c(o(y));try{return c(y)}catch{return f.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(t,a,l){var o=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys").concat("length","prototype");l.f=Object.getOwnPropertyNames||function(i){return o(i,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(t,a,l){l.f=Object.getOwnPropertySymbols},{}],97:[function(f,a,l){var o=f("../internals/has"),c=f("../internals/to-object"),i=f("../internals/shared-key"),f=f("../internals/correct-prototype-getter"),y=i("IE_PROTO"),_=Object.prototype;a.exports=f?Object.getPrototypeOf:function(u){return u=c(u),o(u,y)?u[y]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?_:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(t,a,l){var o=t("../internals/has"),c=t("../internals/to-indexed-object"),i=t("../internals/array-includes").indexOf,f=t("../internals/hidden-keys");a.exports=function(y,_){var u,m=c(y),p=0,g=[];for(u in m)!o(f,u)&&o(m,u)&&g.push(u);for(;_.length>p;)!o(m,u=_[p++])||~i(g,u)||g.push(u);return g}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(t,a,l){var o=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys");a.exports=Object.keys||function(i){return o(i,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(t,a,l){var o={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,i=c&&!o.call({1:2},1);l.f=i?function(f){return f=c(this,f),!!f&&f.enumerable}:o},{}],101:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/a-possible-prototype");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,f=!1,y={};try{(i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(y,[]),f=y instanceof Array}catch{}return function(_,u){return o(_),c(u),f?i.call(_,u):_.__proto__=u,_}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,a,l){var o=t("../internals/to-string-tag-support"),c=t("../internals/classof");a.exports=o?{}.toString:function(){return"[object "+c(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(t,a,l){var o=t("../internals/get-built-in"),c=t("../internals/object-get-own-property-names"),i=t("../internals/object-get-own-property-symbols"),f=t("../internals/an-object");a.exports=o("Reflect","ownKeys")||function(y){var _=c.f(f(y)),u=i.f;return u?_.concat(u(y)):_}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,a,l){t=t("../internals/global"),a.exports=t},{"../internals/global":59}],105:[function(t,a,l){a.exports=function(o){try{return{error:!1,value:o()}}catch(c){return{error:!0,value:c}}}},{}],106:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/is-object"),i=t("../internals/new-promise-capability");a.exports=function(f,y){return o(f),c(y)&&y.constructor===f?y:((0,(f=i.f(f)).resolve)(y),f.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,a,l){var o=t("../internals/redefine");a.exports=function(c,i,f){for(var y in i)o(c,y,i[y],f);return c}},{"../internals/redefine":108}],108:[function(_,a,l){var o=_("../internals/global"),c=_("../internals/create-non-enumerable-property"),i=_("../internals/has"),f=_("../internals/set-global"),y=_("../internals/inspect-source"),_=_("../internals/internal-state"),u=_.get,m=_.enforce,p=String(String).split("String");(a.exports=function(g,x,b,T){var S=!!T&&!!T.unsafe,k=!!T&&!!T.enumerable,T=!!T&&!!T.noTargetGet;typeof b=="function"&&(typeof x!="string"||i(b,"name")||c(b,"name",x),m(b).source=p.join(typeof x=="string"?x:"")),g===o?k?g[x]=b:f(x,b):(S?!T&&g[x]&&(k=!0):delete g[x],k?g[x]=b:c(g,x,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||y(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,a,l){var o=t("./classof-raw"),c=t("./regexp-exec");a.exports=function(i,f){var y=i.exec;if(typeof y=="function"){if(y=y.call(i,f),typeof y!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return y}if(o(i)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return c.call(i,f)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(f,a,l){var o,c,i=f("./regexp-flags"),f=f("./regexp-sticky-helpers"),y=RegExp.prototype.exec,_=String.prototype.replace,u=y,m=(o=/a/,c=/b*/g,y.call(o,"a"),y.call(c,"a"),o.lastIndex!==0||c.lastIndex!==0),p=f.UNSUPPORTED_Y||f.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;a.exports=u=m||g||p?function(x){var b,E,S,k,T=this,j=p&&T.sticky,A=i.call(T),C=T.source,N=0,V=x;return j&&((A=A.replace("y","")).indexOf("g")===-1&&(A+="g"),V=String(x).slice(T.lastIndex),0<T.lastIndex&&(!T.multiline||T.multiline&&x[T.lastIndex-1]!==`
`)&&(C="(?: "+C+")",V=" "+V,N++),E=new RegExp("^(?:"+C+")",A)),g&&(E=new RegExp("^"+C+"$(?!\\s)",A)),m&&(b=T.lastIndex),S=y.call(j?E:T,V),j?S?(S.input=S.input.slice(N),S[0]=S[0].slice(N),S.index=T.lastIndex,T.lastIndex+=S[0].length):T.lastIndex=0:m&&S&&(T.lastIndex=T.global?S.index+S[0].length:b),g&&S&&1<S.length&&_.call(S[0],E,function(){for(k=1;k<arguments.length-2;k++)arguments[k]===void 0&&(S[k]=void 0)}),S}:u},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,a,l){var o=t("../internals/an-object");a.exports=function(){var c=o(this),i="";return c.global&&(i+="g"),c.ignoreCase&&(i+="i"),c.multiline&&(i+="m"),c.dotAll&&(i+="s"),c.unicode&&(i+="u"),c.sticky&&(i+="y"),i}},{"../internals/an-object":10}],112:[function(t,a,l){t=t("./fails");function o(c,i){return RegExp(c,i)}l.UNSUPPORTED_Y=t(function(){var c=o("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),l.BROKEN_CARET=t(function(){var c=o("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},{"./fails":51}],113:[function(t,a,l){a.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],114:[function(t,a,l){a.exports=Object.is||function(o,c){return o===c?o!==0||1/o==1/c:o!=o&&c!=c}},{}],115:[function(t,a,l){var o=t("../internals/global"),c=t("../internals/create-non-enumerable-property");a.exports=function(i,f){try{c(o,i,f)}catch{o[i]=f}return f}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(t,a,l){var o=t("../internals/get-built-in"),c=t("../internals/object-define-property"),i=t("../internals/well-known-symbol"),f=t("../internals/descriptors"),y=i("species");a.exports=function(u){var u=o(u),m=c.f;f&&u&&!u[y]&&m(u,y,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(t,a,l){var o=t("../internals/object-define-property").f,c=t("../internals/has"),i=t("../internals/well-known-symbol")("toStringTag");a.exports=function(f,y,_){f&&!c(f=_?f:f.prototype,i)&&o(f,i,{configurable:!0,value:y})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(t,a,l){var o=t("../internals/shared"),c=t("../internals/uid"),i=o("keys");a.exports=function(f){return i[f]||(i[f]=c(f))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(o,a,l){var i=o("../internals/global"),o=o("../internals/set-global"),c="__core-js_shared__",i=i[c]||o(c,{});a.exports=i},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,a,l){var o=t("../internals/is-pure"),c=t("../internals/shared-store");(a.exports=function(i,f){return c[i]||(c[i]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/a-function"),i=t("../internals/well-known-symbol")("species");a.exports=function(_,y){var _=o(_).constructor;return _===void 0||(_=o(_)[i])==null?y:c(_)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(t,a,l){var o=t("../internals/fails");a.exports=function(c){return o(function(){var i=""[c]('"');return i!==i.toLowerCase()||3<i.split('"').length})}},{"../internals/fails":51}],123:[function(t,a,l){function o(f){return function(m,p){var u,m=String(i(m)),p=c(p),g=m.length;return p<0||g<=p?f?"":void 0:(u=m.charCodeAt(p))<55296||56319<u||p+1===g||(g=m.charCodeAt(p+1))<56320||57343<g?f?m.charAt(p):u:f?m.slice(p,p+2):g-56320+(u-55296<<10)+65536}}var c=t("../internals/to-integer"),i=t("../internals/require-object-coercible");a.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(t,a,l){t=t("../internals/engine-user-agent"),a.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],125:[function(t,a,l){function o(_){return function(g,E,b){var g=String(f(g)),x=g.length,b=b===void 0?" ":String(b),E=c(E);return E<=x||b==""?g:((x=i.call(b,y((E=E-x)/b.length))).length>E&&(x=x.slice(0,E)),_?g+x:x+g)}}var c=t("../internals/to-length"),i=t("../internals/string-repeat"),f=t("../internals/require-object-coercible"),y=Math.ceil;a.exports={start:o(!1),end:o(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(t,a,l){function o(S){return S+22+75*(S<26)}function c(S){var k,T=[],j=(S=function(J){for(var Z=[],z=0,B=J.length;z<B;){var D,X=J.charCodeAt(z++);55296<=X&&X<=56319&&z<B?(64512&(D=J.charCodeAt(z++)))==56320?Z.push(((1023&X)<<10)+(1023&D)+65536):(Z.push(X),z--):Z.push(X)}return Z}(S)).length,A=128,C=0,N=72;for(R=0;R<S.length;R++)(k=S[R])<128&&T.push(E(k));var V=T.length,I=V;for(V&&T.push("-");I<j;){for(var G=i,R=0;R<S.length;R++)A<=(k=S[R])&&k<G&&(G=k);var q=I+1;if(G-A>b((i-C)/q))throw RangeError(g);for(C+=(G-A)*q,A=G,R=0;R<S.length;R++){if((k=S[R])<A&&++C>i)throw RangeError(g);if(k==A){for(var M=C,L=f;;L+=f){var H=L<=N?1:N+y<=L?y:L-N;if(M<H)break;var O=M-H,U=f-H;T.push(E(o(H+O%U))),M=b(O/U)}T.push(E(o(M))),N=function(J,Z,z){var B=0;for(J=z?b(J/u):J>>1,J+=b(J/Z);x*y>>1<J;B+=f)J=b(J/x);return b(B+(x+1)*J/(J+_))}(C,q,I==V),C=0,++I}}++C,++A}return T.join("")}var i=2147483647,f=36,y=26,_=38,u=700,m=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",x=f-1,b=Math.floor,E=String.fromCharCode;a.exports=function(S){for(var k,T=[],j=S.toLowerCase().replace(p,".").split("."),A=0;A<j.length;A++)k=j[A],T.push(m.test(k)?"xn--"+c(k):k);return T.join(".")}},{}],127:[function(t,a,l){var o=t("../internals/to-integer"),c=t("../internals/require-object-coercible");a.exports="".repeat||function(i){var f=String(c(this)),y="",_=o(i);if(_<0||_==1/0)throw RangeError("Wrong number of repetitions");for(;0<_;(_>>>=1)&&(f+=f))1&_&&(y+=f);return y}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/whitespaces");a.exports=function(i){return o(function(){return!!c[i]()||""[i]()!=""||c[i].name!==i})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(i,a,l){function o(_){return function(u){return u=String(c(u)),1&_&&(u=u.replace(f,"")),u=2&_?u.replace(y,""):u}}var c=i("../internals/require-object-coercible"),i="["+i("../internals/whitespaces")+"]",f=RegExp("^"+i+i+"*"),y=RegExp(i+i+"*$");a.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(x,a,l){function o(I){return function(){V(I)}}function c(I){V(I.data)}function i(I){y.postMessage(I+"",b.protocol+"//"+b.host)}var f,y=x("../internals/global"),_=x("../internals/fails"),u=x("../internals/classof-raw"),m=x("../internals/function-bind-context"),p=x("../internals/html"),g=x("../internals/document-create-element"),x=x("../internals/engine-is-ios"),b=y.location,E=y.setImmediate,S=y.clearImmediate,k=y.process,T=y.MessageChannel,j=y.Dispatch,A=0,C={},N="onreadystatechange",V=function(I){var G;C.hasOwnProperty(I)&&(G=C[I],delete C[I],G())};E&&S||(E=function(I){for(var G=[],R=1;R<arguments.length;)G.push(arguments[R++]);return C[++A]=function(){(typeof I=="function"?I:Function(I)).apply(void 0,G)},f(A),A},S=function(I){delete C[I]},u(k)=="process"?f=function(I){k.nextTick(o(I))}:j&&j.now?f=function(I){j.now(o(I))}:T&&!x?(x=(u=new T).port2,u.port1.onmessage=c,f=m(x.postMessage,x,1)):!y.addEventListener||typeof postMessage!="function"||y.importScripts||_(i)||b.protocol==="file:"?f=N in g("script")?function(I){p.appendChild(g("script"))[N]=function(){p.removeChild(this),V(I)}}:function(I){setTimeout(o(I),0)}:(f=i,y.addEventListener("message",c,!1))),a.exports={set:E,clear:S}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(t,a,l){var o=t("../internals/classof-raw");a.exports=function(c){if(typeof c!="number"&&o(c)!="Number")throw TypeError("Incorrect invocation");return+c}},{"../internals/classof-raw":28}],132:[function(t,a,l){var o=t("../internals/to-integer"),c=Math.max,i=Math.min;a.exports=function(f,y){return f=o(f),f<0?c(f+y,0):i(f,y)}},{"../internals/to-integer":135}],133:[function(t,a,l){var o=t("../internals/to-integer"),c=t("../internals/to-length");a.exports=function(f){if(f===void 0)return 0;var f=o(f),y=c(f);if(f!==y)throw RangeError("Wrong length or index");return y}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(t,a,l){var o=t("../internals/indexed-object"),c=t("../internals/require-object-coercible");a.exports=function(i){return o(c(i))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(t,a,l){var o=Math.ceil,c=Math.floor;a.exports=function(i){return isNaN(i=+i)?0:(0<i?c:o)(i)}},{}],136:[function(t,a,l){var o=t("../internals/to-integer"),c=Math.min;a.exports=function(i){return 0<i?c(o(i),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(t,a,l){var o=t("../internals/require-object-coercible");a.exports=function(c){return Object(o(c))}},{"../internals/require-object-coercible":113}],138:[function(t,a,l){var o=t("../internals/to-positive-integer");a.exports=function(c,i){if(c=o(c),c%i)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":139}],139:[function(t,a,l){var o=t("../internals/to-integer");a.exports=function(c){if(c=o(c),c<0)throw RangeError("The argument can't be less than 0");return c}},{"../internals/to-integer":135}],140:[function(t,a,l){var o=t("../internals/is-object");a.exports=function(c,i){if(!o(c))return c;var f,y;if(i&&typeof(f=c.toString)=="function"&&!o(y=f.call(c))||typeof(f=c.valueOf)=="function"&&!o(y=f.call(c))||!i&&typeof(f=c.toString)=="function"&&!o(y=f.call(c)))return y;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(t,a,l){var o={};o[t("../internals/well-known-symbol")("toStringTag")]="z",a.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":148}],142:[function(t,a,l){function o($,te){for(var ne=0,be=te.length,ve=new(ue($))(be);ne<be;)ve[ne]=te[ne++];return ve}function c($,te){D($,te,{get:function(){return z(this)[te]}})}function i($){return $ instanceof se||($=V($))=="ArrayBuffer"||$=="SharedArrayBuffer"}function f($,te){return pe($)&&typeof te!="symbol"&&te in $&&String(+te)==String(te)}function y($,te){return f($,te=C(te,!0))?S(2,$[te]):X($,te)}function _($,te,ne){return!(f($,te=C(te,!0))&&I(ne)&&N(ne,"value"))||N(ne,"get")||N(ne,"set")||ne.configurable||N(ne,"writable")&&!ne.writable||N(ne,"enumerable")&&!ne.enumerable?D($,te,ne):($[te]=ne.value,$)}var u=t("../internals/export"),m=t("../internals/global"),p=t("../internals/descriptors"),g=t("../internals/typed-array-constructors-require-wrappers"),x=t("../internals/array-buffer-view-core"),b=t("../internals/array-buffer"),E=t("../internals/an-instance"),S=t("../internals/create-property-descriptor"),k=t("../internals/create-non-enumerable-property"),T=t("../internals/to-length"),j=t("../internals/to-index"),A=t("../internals/to-offset"),C=t("../internals/to-primitive"),N=t("../internals/has"),V=t("../internals/classof"),I=t("../internals/is-object"),G=t("../internals/object-create"),R=t("../internals/object-set-prototype-of"),q=t("../internals/object-get-own-property-names").f,M=t("../internals/typed-array-from"),L=t("../internals/array-iteration").forEach,H=t("../internals/set-species"),O=t("../internals/object-define-property"),U=t("../internals/object-get-own-property-descriptor"),J=t("../internals/internal-state"),Z=t("../internals/inherit-if-required"),z=J.get,B=J.set,D=O.f,X=U.f,K=Math.round,re=m.RangeError,se=b.ArrayBuffer,fe=b.DataView,xe=x.NATIVE_ARRAY_BUFFER_VIEWS,he=x.TYPED_ARRAY_TAG,_e=x.TypedArray,ye=x.TypedArrayPrototype,ue=x.aTypedArrayConstructor,pe=x.isTypedArray,ke="BYTES_PER_ELEMENT",Ie="Wrong length";p?(xe||(U.f=y,O.f=_,c(ye,"buffer"),c(ye,"byteOffset"),c(ye,"byteLength"),c(ye,"length")),u({target:"Object",stat:!0,forced:!xe},{getOwnPropertyDescriptor:y,defineProperty:_}),a.exports=function(Pe,te,ne){function be(Fe,de){D(Fe,de,{get:function(){var ge=this,ce=de;return(ge=z(ge)).view[Re](ce*ve+ge.byteOffset,!0)},set:function(ge){var ce=this,we=de;ce=z(ce),ne&&(ge=(ge=K(ge))<0?0:255<ge?255:255&ge),ce.view[Ge](we*ve+ce.byteOffset,ge,!0)},enumerable:!0})}var ve=Pe.match(/\d+$/)[0]/8,je=Pe+(ne?"Clamped":"")+"Array",Re="get"+Pe,Ge="set"+Pe,Xe=m[je],Ke=Xe,Pe=Ke&&Ke.prototype,We={};xe?g&&(Ke=te(function(Fe,de,ge,ce){return E(Fe,Ke,je),Z(I(de)?i(de)?ce!==void 0?new Xe(de,A(ge,ve),ce):ge!==void 0?new Xe(de,A(ge,ve)):new Xe(de):pe(de)?o(Ke,de):M.call(Ke,de):new Xe(j(de)),Fe,Ke)}),R&&R(Ke,_e),L(q(Xe),function(Fe){Fe in Ke||k(Ke,Fe,Xe[Fe])}),Ke.prototype=Pe):(Ke=te(function(Fe,de,ge,ce){E(Fe,Ke,je);var we,Oe,Le=0,qe=0;if(I(de)){if(!i(de))return pe(de)?o(Ke,de):M.call(Ke,de);var Qe=de,qe=A(ge,ve),ge=de.byteLength;if(ce===void 0){if(ge%ve||(we=ge-qe)<0)throw re(Ie)}else if(ge<(we=T(ce)*ve)+qe)throw re(Ie);Oe=we/ve}else Oe=j(de),Qe=new se(we=Oe*ve);for(B(Fe,{buffer:Qe,byteOffset:qe,byteLength:we,length:Oe,view:new fe(Qe)});Le<Oe;)be(Fe,Le++)}),R&&R(Ke,_e),Pe=Ke.prototype=G(ye)),Pe.constructor!==Ke&&k(Pe,"constructor",Ke),he&&k(Pe,he,je),We[je]=Ke,u({global:!0,forced:Ke!=Xe,sham:!xe},We),ke in Ke||k(Ke,ke,ve),ke in Pe||k(Pe,ke,ve),H(je)}):a.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(f,a,l){var o=f("../internals/global"),c=f("../internals/fails"),i=f("../internals/check-correctness-of-iteration"),f=f("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,y=o.ArrayBuffer,_=o.Int8Array;a.exports=!f||!c(function(){_(1)})||!c(function(){new _(-1)})||!i(function(u){new _,new _(null),new _(1.5),new _(u)},!0)||c(function(){return new _(new y(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(t,a,l){var o=t("../internals/to-object"),c=t("../internals/to-length"),i=t("../internals/get-iterator-method"),f=t("../internals/is-array-iterator-method"),y=t("../internals/function-bind-context"),_=t("../internals/array-buffer-view-core").aTypedArrayConstructor;a.exports=function(u){var m,p,g,x,b,E,S=o(u),k=arguments.length,T=1<k?arguments[1]:void 0,j=T!==void 0,A=i(S);if(A!=null&&!f(A))for(E=(b=A.call(S)).next,S=[];!(x=E.call(b)).done;)S.push(x.value);for(j&&2<k&&(T=y(T,arguments[2],2)),p=c(S.length),g=new(_(this))(p),m=0;m<p;m++)g[m]=j?T(S[m],m):S[m];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(t,a,l){var o=0,c=Math.random();a.exports=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++o+c).toString(36)}},{}],146:[function(t,a,l){t=t("../internals/native-symbol"),a.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],147:[function(t,a,l){t=t("../internals/well-known-symbol"),l.f=t},{"../internals/well-known-symbol":148}],148:[function(_,a,l){var o=_("../internals/global"),c=_("../internals/shared"),i=_("../internals/has"),f=_("../internals/uid"),y=_("../internals/native-symbol"),_=_("../internals/use-symbol-as-uid"),u=c("wks"),m=o.Symbol,p=_?m:m&&m.withoutSetter||f;a.exports=function(g){return i(u,g)||(y&&i(m,g)?u[g]=m[g]:u[g]=p("Symbol."+g)),u[g]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(t,a,l){a.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],150:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/global"),y=i("../internals/array-buffer"),i=i("../internals/set-species"),f="ArrayBuffer",y=y[f];o({global:!0,forced:c[f]!==y},{ArrayBuffer:y}),i(f)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(S,a,l){var o=S("../internals/export"),c=S("../internals/fails"),i=S("../internals/is-array"),f=S("../internals/is-object"),y=S("../internals/to-object"),_=S("../internals/to-length"),u=S("../internals/create-property"),m=S("../internals/array-species-create"),p=S("../internals/array-method-has-species-support"),E=S("../internals/well-known-symbol"),S=S("../internals/engine-v8-version"),g=E("isConcatSpreadable"),x=9007199254740991,b="Maximum allowed index exceeded",E=51<=S||!c(function(){var k=[];return k[g]=!1,k.concat()[0]!==k}),S=p("concat");o({target:"Array",proto:!0,forced:!E||!S},{concat:function(k){for(var T,j,A,C,N,V=y(this),I=m(V,0),G=0,R=-1,q=arguments.length;R<q;R++)if(N=void 0,!f(C=A=R===-1?V:arguments[R])||((N=C[g])!==void 0?!N:!i(C))){if(x<=G)throw TypeError(b);u(I,G++,A)}else{if(j=_(A.length),x<G+j)throw TypeError(b);for(T=0;T<j;T++,G++)T in A&&u(I,G,A[T])}return I.length=G,I}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/array-copy-within"),i=i("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:c}),i("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").every,i=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),i=i("every"),f=f("every");o({target:"Array",proto:!0,forced:!i||!f},{every:function(y){return c(this,y,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/array-fill"),i=i("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:c}),i("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").filter,i=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),i=i("filter"),f=f("filter");o({target:"Array",proto:!0,forced:!i||!f},{filter:function(y){return c(this,y,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/array-iteration").findIndex,i=_("../internals/add-to-unscopables"),_=_("../internals/array-method-uses-to-length"),f="findIndex",y=!0,_=_(f);f in[]&&Array(1)[f](function(){y=!1}),o({target:"Array",proto:!0,forced:y||!_},{findIndex:function(u){return c(this,u,1<arguments.length?arguments[1]:void 0)}}),i(f)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},{"../internals/array-for-each":16,"../internals/export":50}],158:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/array-from");o({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(i){Array.from(i)})},{from:c})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],159:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/array-includes").includes,i=t("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}}),i("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/array-includes").indexOf,y=_("../internals/array-method-is-strict"),_=_("../internals/array-method-uses-to-length"),i=[].indexOf,f=!!i&&1/[1].indexOf(1,-0)<0,y=y("indexOf"),_=_("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:f||!y||!_},{indexOf:function(u){return f?i.apply(this,arguments)||0:c(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],161:[function(y,a,l){var o=y("../internals/to-indexed-object"),c=y("../internals/add-to-unscopables"),i=y("../internals/iterators"),f=y("../internals/internal-state"),y=y("../internals/define-iterator"),_="Array Iterator",u=f.set,m=f.getterFor(_);a.exports=y(Array,"Array",function(p,g){u(this,{type:_,target:o(p),index:0,kind:g})},function(){var p=m(this),g=p.target,x=p.kind,b=p.index++;return!g||b>=g.length?{value:p.target=void 0,done:!0}:x=="keys"?{value:b,done:!1}:x=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),i.Arguments=i.Array,c("keys"),c("values"),c("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],162:[function(y,a,l){var o=y("../internals/export"),f=y("../internals/indexed-object"),c=y("../internals/to-indexed-object"),y=y("../internals/array-method-is-strict"),i=[].join,f=f!=Object,y=y("join",",");o({target:"Array",proto:!0,forced:f||!y},{join:function(_){return i.call(c(this),_===void 0?",":_)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],163:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:c!==[].lastIndexOf},{lastIndexOf:c})},{"../internals/array-last-index-of":20,"../internals/export":50}],164:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").map,i=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),i=i("map"),f=f("map");o({target:"Array",proto:!0,forced:!i||!f},{map:function(y){return c(this,y,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(g,a,l){var o=g("../internals/export"),c=g("../internals/is-object"),i=g("../internals/is-array"),f=g("../internals/to-absolute-index"),y=g("../internals/to-length"),_=g("../internals/to-indexed-object"),u=g("../internals/create-property"),m=g("../internals/well-known-symbol"),p=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),p=p("slice"),g=g("slice",{ACCESSORS:!0,0:0,1:2}),x=m("species"),b=[].slice,E=Math.max;o({target:"Array",proto:!0,forced:!p||!g},{slice:function(S,k){var T,j,A,C=_(this),N=y(C.length),V=f(S,N),I=f(k===void 0?N:k,N);if(i(C)&&((T=typeof(T=C.constructor)=="function"&&(T===Array||i(T.prototype))||c(T)&&(T=T[x])===null?void 0:T)===Array||T===void 0))return b.call(C,V,I);for(j=new(T===void 0?Array:T)(E(I-V,0)),A=0;V<I;V++,A++)V in C&&u(j,A,C[V]);return j.length=A,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],166:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").some,i=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),i=i("some"),f=f("some");o({target:"Array",proto:!0,forced:!i||!f},{some:function(y){return c(this,y,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],167:[function(p,a,l){var o=p("../internals/export"),c=p("../internals/to-absolute-index"),i=p("../internals/to-integer"),f=p("../internals/to-length"),y=p("../internals/to-object"),_=p("../internals/array-species-create"),u=p("../internals/create-property"),m=p("../internals/array-method-has-species-support"),p=p("../internals/array-method-uses-to-length"),m=m("splice"),p=p("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,x=Math.min;o({target:"Array",proto:!0,forced:!m||!p},{splice:function(G,E){var S,k,T,j,A,C,N=y(this),V=f(N.length),I=c(G,V),G=arguments.length;if(G===0?S=k=0:k=G===1?(S=0,V-I):(S=G-2,x(g(i(E),0),V-I)),9007199254740991<V+S-k)throw TypeError("Maximum allowed length exceeded");for(T=_(N,k),j=0;j<k;j++)(A=I+j)in N&&u(T,j,N[A]);if(S<(T.length=k)){for(j=I;j<V-k;j++)C=j+S,(A=j+k)in N?N[C]=N[A]:delete N[C];for(j=V;V-k+S<j;j--)delete N[j-1]}else if(k<S)for(j=V-k;I<j;j--)C=j+S-1,(A=j+k-1)in N?N[C]=N[A]:delete N[C];for(j=0;j<S;j++)N[j+I]=arguments[j+2];return N.length=V-k+S,T}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],168:[function(c,a,l){var o=c("../internals/descriptors"),c=c("../internals/object-define-property").f,i=Function.prototype,f=i.toString,y=/^\s*function ([^ (]*)/;!o||"name"in i||c(i,"name",{configurable:!0,get:function(){try{return f.call(this).match(y)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],169:[function(c,a,l){var o=c("../internals/collection"),c=c("../internals/collection-strong");a.exports=o("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],170:[function(o,a,l){var o=o("../internals/export"),c=Math.hypot,i=Math.abs,f=Math.sqrt;o({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(y,_){for(var u,m,p=0,g=0,x=arguments.length,b=0;g<x;)b<(u=i(arguments[g++]))?(p=p*(m=b/u)*m+1,b=u):p+=0<u?(m=u/b)*m:u;return b===1/0?1/0:b*f(p)}})},{"../internals/export":50}],171:[function(o,a,l){var o=o("../internals/export"),c=Math.log,i=Math.LN2;o({target:"Math",stat:!0},{log2:function(f){return c(f)/i}})},{"../internals/export":50}],172:[function(t,a,l){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],173:[function(t,a,l){function o(R){var q,M,L,H,O,U,J,Z=p(R,!1);if(typeof Z=="string"&&2<Z.length){if((R=(Z=k(Z)).charCodeAt(0))===43||R===45){if((q=Z.charCodeAt(2))===88||q===120)return NaN}else if(R===48){switch(Z.charCodeAt(1)){case 66:case 98:M=2,L=49;break;case 79:case 111:M=8,L=55;break;default:return+Z}for(O=(H=Z.slice(2)).length,U=0;U<O;U++)if((J=H.charCodeAt(U))<48||L<J)return NaN;return parseInt(H,M)}}return+Z}var c=t("../internals/descriptors"),i=t("../internals/global"),f=t("../internals/is-forced"),y=t("../internals/redefine"),_=t("../internals/has"),u=t("../internals/classof-raw"),m=t("../internals/inherit-if-required"),p=t("../internals/to-primitive"),g=t("../internals/fails"),x=t("../internals/object-create"),b=t("../internals/object-get-own-property-names").f,E=t("../internals/object-get-own-property-descriptor").f,S=t("../internals/object-define-property").f,k=t("../internals/string-trim").trim,T="Number",j=i[T],A=j.prototype,C=u(x(A))==T;if(f(T,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var N,V=function(q){var q=arguments.length<1?0:q,M=this;return M instanceof V&&(C?g(function(){A.valueOf.call(M)}):u(M)!=T)?m(new j(o(q)),M,V):o(q)},I=c?b(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),G=0;I.length>G;G++)_(j,N=I[G])&&!_(V,N)&&S(V,N,E(j,N));(V.prototype=A).constructor=V,y(i,T,V)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],174:[function(t,a,l){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],175:[function(_,a,l){function o(p,g,x){return g===0?x:g%2==1?o(p,g-1,x*p):o(p*p,g/2,x)}var c=_("../internals/export"),i=_("../internals/to-integer"),f=_("../internals/this-number-value"),y=_("../internals/string-repeat"),_=_("../internals/fails"),u=1 .toFixed,m=Math.floor;c({target:"Number",proto:!0,forced:u&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!_(function(){u.call({})})},{toFixed:function(T){function g(N,V){for(var I=-1,G=V;++I<6;)G+=N*j[I],j[I]=G%1e7,G=m(G/1e7)}function x(N){for(var V=6,I=0;0<=--V;)I+=j[V],j[V]=m(I/N),I=I%N*1e7}function b(){for(var N,V=6,I="";0<=--V;)I===""&&V!==0&&j[V]===0||(N=String(j[V]),I=I===""?N:I+y.call("0",7-N.length)+N);return I}var E,S,k=f(this),T=i(T),j=[0,0,0,0,0,0],A="",C="0";if(T<0||20<T)throw RangeError("Incorrect fraction digits");if(k!=k)return"NaN";if(k<=-1e21||1e21<=k)return String(k);if(k<0&&(A="-",k=-k),1e-21<k)if(k=(E=function(N){for(var V=0,I=N;4096<=I;)V+=12,I/=4096;for(;2<=I;)V+=1,I/=2;return V}(k*o(2,69,1))-69)<0?k*o(2,-E,1):k/o(2,E,1),k*=4503599627370496,0<(E=52-E)){for(g(0,k),S=T;7<=S;)g(1e7,0),S-=7;for(g(o(10,S,1),0),S=E-1;23<=S;)x(1<<23),S-=23;x(1<<S),g(1,1),x(2),C=b()}else g(0,k),g(1<<-E,0),C=b()+y.call("0",T);return C=0<T?A+((k=C.length)<=T?"0."+y.call("0",T-k)+C:C.slice(0,k-T)+"."+C.slice(k-T)):A+C}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],176:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},{"../internals/export":50,"../internals/object-assign":89}],177:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/iterate"),i=t("../internals/create-property");o({target:"Object",stat:!0},{fromEntries:function(f){var y={};return c(f,function(_,u){i(y,_,u)},void 0,!0),y}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],178:[function(f,a,l){var o=f("../internals/export"),y=f("../internals/fails"),c=f("../internals/to-indexed-object"),i=f("../internals/object-get-own-property-descriptor").f,f=f("../internals/descriptors"),y=y(function(){i(1)});o({target:"Object",stat:!0,forced:!f||y,sham:!f},{getOwnPropertyDescriptor:function(_,u){return i(c(_),u)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],179:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/fails"),i=i("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:c(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:i})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],180:[function(y,a,l){var o=y("../internals/export"),c=y("../internals/fails"),i=y("../internals/to-object"),f=y("../internals/object-get-prototype-of"),y=y("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:c(function(){f(1)}),sham:!y},{getPrototypeOf:function(_){return f(i(_))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],181:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/to-object"),i=t("../internals/object-keys");o({target:"Object",stat:!0,forced:t("../internals/fails")(function(){i(1)})},{keys:function(f){return i(c(f))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],182:[function(i,a,l){var o=i("../internals/to-string-tag-support"),c=i("../internals/redefine"),i=i("../internals/object-to-string");o||c(Object.prototype,"toString",i,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],183:[function(ne,a,l){var o,c,i,f,y=ne("../internals/export"),_=ne("../internals/is-pure"),u=ne("../internals/global"),m=ne("../internals/get-built-in"),p=ne("../internals/native-promise-constructor"),g=ne("../internals/redefine"),x=ne("../internals/redefine-all"),b=ne("../internals/set-to-string-tag"),E=ne("../internals/set-species"),S=ne("../internals/is-object"),k=ne("../internals/a-function"),T=ne("../internals/an-instance"),j=ne("../internals/classof-raw"),A=ne("../internals/inspect-source"),C=ne("../internals/iterate"),N=ne("../internals/check-correctness-of-iteration"),V=ne("../internals/species-constructor"),I=ne("../internals/task").set,G=ne("../internals/microtask"),R=ne("../internals/promise-resolve"),q=ne("../internals/host-report-errors"),M=ne("../internals/new-promise-capability"),L=ne("../internals/perform"),H=ne("../internals/internal-state"),O=ne("../internals/is-forced"),be=ne("../internals/well-known-symbol"),U=ne("../internals/engine-v8-version"),J=be("species"),Z="Promise",z=H.get,B=H.set,D=H.getterFor(Z),X=p,K=u.TypeError,re=u.document,se=u.process,fe=m("fetch"),xe=M.f,he=xe,_e=j(se)=="process",ye=!!(re&&re.createEvent&&u.dispatchEvent),ue="unhandledrejection",pe="rejectionhandled",ke=1,Ie=2,$=1,te=2,ne=O(Z,function(){var We,Fe;return A(X)===String(X)&&(U===66||!_e&&typeof PromiseRejectionEvent!="function")?!0:!(!_||X.prototype.finally)||!(51<=U&&/native code/.test(X))&&(Fe=function(de){de(function(){},function(){})},((We=X.resolve(1)).constructor={})[J]=Fe,!(We.then(function(){})instanceof Fe))}),be=ne||!N(function(We){X.all(We).catch(function(){})}),ve=function(We){var Fe;return!(!S(We)||typeof(Fe=We.then)!="function")&&Fe},je=function(We,Fe,de){var ge;Fe.notified||(Fe.notified=!0,ge=Fe.reactions,G(function(){for(var ce,we,Oe=Fe.value,Le=Fe.state==ke,qe=0;ge.length>qe;){var Qe,rt,tt,ot=ge[qe++],gt=Le?ot.ok:ot.fail,mt=ot.resolve,lt=ot.reject,vt=ot.domain;try{gt?(Le||(Fe.rejection===te&&function(pt,It){I.call(u,function(){_e?se.emit("rejectionHandled",pt):Re(pe,pt,It.value)})}(We,Fe),Fe.rejection=$),gt===!0?Qe=Oe:(vt&&vt.enter(),Qe=gt(Oe),vt&&(vt.exit(),tt=!0)),Qe===ot.promise?lt(K("Promise-chain cycle")):(rt=ve(Qe))?rt.call(Qe,mt,lt):mt(Qe)):lt(Oe)}catch(pt){vt&&!tt&&vt.exit(),lt(pt)}}Fe.reactions=[],Fe.notified=!1,de&&!Fe.rejection&&(ce=We,we=Fe,I.call(u,function(){var pt=we.value,It=Ge(we);if(It&&(It=L(function(){_e?se.emit("unhandledRejection",pt,ce):Re(ue,ce,pt)}),we.rejection=_e||Ge(we)?te:$,It.error))throw It.value}))}))},Re=function(We,Fe,de){var ge;ye?((ge=re.createEvent("Event")).promise=Fe,ge.reason=de,ge.initEvent(We,!1,!0),u.dispatchEvent(ge)):ge={promise:Fe,reason:de},(Fe=u["on"+We])?Fe(ge):We===ue&&q("Unhandled promise rejection",de)},Ge=function(We){return We.rejection!==$&&!We.parent},Xe=function(We,Fe,de,ge){return function(ce){We(Fe,de,ce,ge)}},Ke=function(We,Fe,de,ge){Fe.done||(Fe.done=!0,(Fe=ge||Fe).value=de,Fe.state=Ie,je(We,Fe,!0))},Pe=function(We,Fe,de,ge){if(!Fe.done){Fe.done=!0,ge&&(Fe=ge);try{if(We===de)throw K("Promise can't be resolved itself");var ce=ve(de);ce?G(function(){var we={done:!1};try{ce.call(de,Xe(Pe,We,we,Fe),Xe(Ke,We,we,Fe))}catch(Oe){Ke(We,we,Oe,Fe)}}):(Fe.value=de,Fe.state=ke,je(We,Fe,!1))}catch(we){Ke(We,{done:!1},we,Fe)}}};ne&&(X=function(We){T(this,X,Z),k(We),o.call(this);var Fe=z(this);try{We(Xe(Pe,this,Fe),Xe(Ke,this,Fe))}catch(de){Ke(this,Fe,de)}},(o=function(We){B(this,{type:Z,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=x(X.prototype,{then:function(We,Fe){var de=D(this),ge=xe(V(this,X));return ge.ok=typeof We!="function"||We,ge.fail=typeof Fe=="function"&&Fe,ge.domain=_e?se.domain:void 0,de.parent=!0,de.reactions.push(ge),de.state!=0&&je(this,de,!1),ge.promise},catch:function(We){return this.then(void 0,We)}}),c=function(){var We=new o,Fe=z(We);this.promise=We,this.resolve=Xe(Pe,We,Fe),this.reject=Xe(Ke,We,Fe)},M.f=xe=function(We){return We===X||We===i?new c:he(We)},_||typeof p!="function"||(f=p.prototype.then,g(p.prototype,"then",function(We,Fe){var de=this;return new X(function(ge,ce){f.call(de,ge,ce)}).then(We,Fe)},{unsafe:!0}),typeof fe=="function"&&y({global:!0,enumerable:!0,forced:!0},{fetch:function(We){return R(X,fe.apply(u,arguments))}}))),y({global:!0,wrap:!0,forced:ne},{Promise:X}),b(X,Z,!1,!0),E(Z),i=m(Z),y({target:Z,stat:!0,forced:ne},{reject:function(We){var Fe=xe(this);return Fe.reject.call(void 0,We),Fe.promise}}),y({target:Z,stat:!0,forced:_||ne},{resolve:function(We){return R(_&&this===i?X:this,We)}}),y({target:Z,stat:!0,forced:be},{all:function(We){var Fe=this,de=xe(Fe),ge=de.resolve,ce=de.reject,we=L(function(){var Oe=k(Fe.resolve),Le=[],qe=0,Qe=1;C(We,function(rt){var tt=qe++,ot=!1;Le.push(void 0),Qe++,Oe.call(Fe,rt).then(function(gt){ot||(ot=!0,Le[tt]=gt,--Qe||ge(Le))},ce)}),--Qe||ge(Le)});return we.error&&ce(we.value),de.promise},race:function(We){var Fe=this,de=xe(Fe),ge=de.reject,ce=L(function(){var we=k(Fe.resolve);C(We,function(Oe){we.call(Fe,Oe).then(de.resolve,ge)})});return ce.error&&ge(ce.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],184:[function(u,a,l){var o=u("../internals/export"),x=u("../internals/get-built-in"),c=u("../internals/a-function"),i=u("../internals/an-object"),f=u("../internals/is-object"),y=u("../internals/object-create"),_=u("../internals/function-bind"),u=u("../internals/fails"),m=x("Reflect","construct"),p=u(function(){function b(){}return!(m(function(){},[],b)instanceof b)}),g=!u(function(){m(function(){})}),x=p||g;o({target:"Reflect",stat:!0,forced:x,sham:x},{construct:function(b,E){c(b),i(E);var S=arguments.length<3?b:c(arguments[2]);if(g&&!p)return m(b,E,S);if(b==S){switch(E.length){case 0:return new b;case 1:return new b(E[0]);case 2:return new b(E[0],E[1]);case 3:return new b(E[0],E[1],E[2]);case 4:return new b(E[0],E[1],E[2],E[3])}var k=[null];return k.push.apply(k,E),new(_.apply(b,k))}return k=S.prototype,S=y(f(k)?k:Object.prototype),k=Function.apply.call(b,S,E),f(k)?k:S}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],185:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/is-object"),i=t("../internals/an-object"),f=t("../internals/has"),y=t("../internals/object-get-own-property-descriptor"),_=t("../internals/object-get-prototype-of");o({target:"Reflect",stat:!0},{get:function u(m,p){var g,x=arguments.length<3?m:arguments[2];return i(m)===x?m[p]:(g=y.f(m,p))?f(g,"value")?g.value:g.get===void 0?void 0:g.get.call(x):c(g=_(m))?u(g,p,x):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],186:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/global"),i=t("../internals/is-forced"),f=t("../internals/inherit-if-required"),y=t("../internals/object-define-property").f,_=t("../internals/object-get-own-property-names").f,u=t("../internals/is-regexp"),m=t("../internals/regexp-flags"),p=t("../internals/regexp-sticky-helpers"),g=t("../internals/redefine"),x=t("../internals/fails"),b=t("../internals/internal-state").set,E=t("../internals/set-species"),S=t("../internals/well-known-symbol")("match"),k=c.RegExp,T=k.prototype,j=/a/g,A=/a/g,C=new k(j)!==j,N=p.UNSUPPORTED_Y;if(o&&i("RegExp",!C||N||x(function(){return A[S]=!1,k(j)!=j||k(A)==A||k(j,"i")!="/a/i"}))){for(var V=function(R,q){var M,L=this instanceof V,H=u(R),O=q===void 0;return!L&&H&&R.constructor===V&&O?R:(C?H&&!O&&(R=R.source):R instanceof V&&(O&&(q=m.call(R)),R=R.source),N&&(M=!!q&&-1<q.indexOf("y"))&&(q=q.replace(/y/g,"")),H=f(C?new k(R,q):k(R,q),L?this:T,V),N&&M&&b(H,{sticky:M}),H)},I=_(k),G=0;I.length>G;)(function(R){R in V||y(V,R,{configurable:!0,get:function(){return k[R]},set:function(q){k[R]=q}})})(I[G++]);(T.constructor=V).prototype=T,g(c,"RegExp",V)}E("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],187:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},{"../internals/export":50,"../internals/regexp-exec":110}],188:[function(f,a,l){var o=f("../internals/redefine"),c=f("../internals/an-object"),u=f("../internals/fails"),i=f("../internals/regexp-flags"),f="toString",y=RegExp.prototype,_=y[f],u=u(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),m=_.name!=f;(u||m)&&o(RegExp.prototype,f,function(){var p=c(this),g=String(p.source),x=p.flags;return"/"+g+"/"+String(x===void 0&&p instanceof RegExp&&!("flags"in y)?i.call(p):x)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],189:[function(c,a,l){var o=c("../internals/collection"),c=c("../internals/collection-strong");a.exports=o("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],190:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/object-get-own-property-descriptor").f,i=_("../internals/to-length"),f=_("../internals/not-a-regexp"),y=_("../internals/require-object-coercible"),p=_("../internals/correct-is-regexp-logic"),_=_("../internals/is-pure"),u="".endsWith,m=Math.min,p=p("endsWith");o({target:"String",proto:!0,forced:!!(_||p||!(o=c(String.prototype,"endsWith"))||o.writable)&&!p},{endsWith:function(g){var x=String(y(this)),b=(f(g),1<arguments.length?arguments[1]:void 0),E=i(x.length),b=b===void 0?E:m(i(b),E),E=String(g);return u?u.call(x,E,b):x.slice(b-E.length,b)===E}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],191:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/not-a-regexp"),i=t("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(f){return!!~String(i(this)).indexOf(c(f),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],192:[function(i,a,l){var o=i("../internals/string-multibyte").charAt,c=i("../internals/internal-state"),i=i("../internals/define-iterator"),f="String Iterator",y=c.set,_=c.getterFor(f);i(String,"String",function(u){y(this,{type:f,string:String(u),index:0})},function(){var u=_(this),m=u.string,p=u.index;return p>=m.length?{value:void 0,done:!0}:(m=o(m,p),u.index+=m.length,{value:m,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],193:[function(t,a,l){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),i=t("../internals/to-length"),f=t("../internals/require-object-coercible"),y=t("../internals/advance-string-index"),_=t("../internals/regexp-exec-abstract");o("match",1,function(u,m,p){return[function(g){var x=f(this),b=g==null?void 0:g[u];return b!==void 0?b.call(g,x):new RegExp(g)[u](String(x))},function(g){var x=p(m,g,this);if(x.done)return x.value;var b=c(g),E=String(this);if(!b.global)return _(b,E);for(var S=b.unicode,k=[],T=b.lastIndex=0;(j=_(b,E))!==null;){var j=String(j[0]);(k[T]=j)===""&&(b.lastIndex=y(E,i(b.lastIndex),S)),T++}return T===0?null:k}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],194:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/string-pad").start;o({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(i){return c(this,i,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],195:[function(t,a,l){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],196:[function(t,a,l){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),i=t("../internals/to-object"),f=t("../internals/to-length"),y=t("../internals/to-integer"),_=t("../internals/require-object-coercible"),u=t("../internals/advance-string-index"),m=t("../internals/regexp-exec-abstract"),p=Math.max,g=Math.min,x=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,E=/\$([$&'`]|\d\d?)/g;o("replace",2,function(S,k,T,j){var A=j.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=j.REPLACE_KEEPS_$0,N=A?"$":"$0";return[function(V,I){var G=_(this),R=V==null?void 0:V[S];return R!==void 0?R.call(V,G,I):k.call(String(G),V,I)},function(V,I){if(!A&&C||typeof I=="string"&&I.indexOf(N)===-1){var G=T(k,V,this,I);if(G.done)return G.value}for(var R,q=c(V),M=String(this),L=typeof I=="function",H=(L||(I=String(I)),q.global),O=(H&&(R=q.unicode,q.lastIndex=0),[]);(B=m(q,M))!==null&&(O.push(B),H);)String(B[0])===""&&(q.lastIndex=u(M,f(q.lastIndex),R));for(var U,J="",Z=0,z=0;z<O.length;z++){for(var B=O[z],D=String(B[0]),X=p(g(y(B.index),M.length),0),K=[],re=1;re<B.length;re++)K.push((U=B[re])===void 0?U:String(U));var se=B.groups,fe=L?(fe=[D].concat(K,X,M),se!==void 0&&fe.push(se),String(I.apply(void 0,fe))):function(xe,he,_e,ye,ue,pe){var ke=_e+xe.length,Ie=ye.length,$=E;return ue!==void 0&&(ue=i(ue),$=b),k.call(pe,$,function(te,ne){var be;switch(ne.charAt(0)){case"$":return"$";case"&":return xe;case"`":return he.slice(0,_e);case"'":return he.slice(ke);case"<":be=ue[ne.slice(1,-1)];break;default:var ve,je=+ne;if(je==0)return te;if(Ie<je)return(ve=x(je/10))!==0&&ve<=Ie?ye[ve-1]===void 0?ne.charAt(1):ye[ve-1]+ne.charAt(1):te;be=ye[je-1]}return be===void 0?"":be})}(D,M,X,K,se,I);Z<=X&&(J+=M.slice(Z,X)+fe,Z=X+D.length)}return J+M.slice(Z)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],197:[function(t,a,l){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),i=t("../internals/require-object-coercible"),f=t("../internals/same-value"),y=t("../internals/regexp-exec-abstract");o("search",1,function(_,u,m){return[function(p){var g=i(this),x=p==null?void 0:p[_];return x!==void 0?x.call(p,g):new RegExp(p)[_](String(g))},function(p){var g,x=m(u,p,this);return x.done?x.value:(x=c(p),p=String(this),g=x.lastIndex,f(g,0)||(x.lastIndex=0),p=y(x,p),f(x.lastIndex,g)||(x.lastIndex=g),p===null?-1:p.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],198:[function(g,a,l){var o=g("../internals/fix-regexp-well-known-symbol-logic"),c=g("../internals/is-regexp"),i=g("../internals/an-object"),f=g("../internals/require-object-coercible"),y=g("../internals/species-constructor"),_=g("../internals/advance-string-index"),u=g("../internals/to-length"),m=g("../internals/regexp-exec-abstract"),p=g("../internals/regexp-exec"),g=g("../internals/fails"),x=[].push,b=Math.min,E=4294967295,S=!g(function(){return!RegExp(E,"y")});o("split",2,function(k,T,j){var A="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(C,N){var V=String(f(this)),I=N===void 0?E:N>>>0;if(I==0)return[];if(C===void 0)return[V];if(!c(C))return T.call(V,C,I);for(var G,R,q,M=[],N=(C.ignoreCase?"i":"")+(C.multiline?"m":"")+(C.unicode?"u":"")+(C.sticky?"y":""),L=0,H=new RegExp(C.source,N+"g");(G=p.call(H,V))&&!(L<(R=H.lastIndex)&&(M.push(V.slice(L,G.index)),1<G.length&&G.index<V.length&&x.apply(M,G.slice(1)),q=G[0].length,L=R,M.length>=I));)H.lastIndex===G.index&&H.lastIndex++;return L===V.length?!q&&H.test("")||M.push(""):M.push(V.slice(L)),M.length>I?M.slice(0,I):M}:"0".split(void 0,0).length?function(C,N){return C===void 0&&N===0?[]:T.call(this,C,N)}:T;return[function(C,N){var V=f(this),I=C==null?void 0:C[k];return I!==void 0?I.call(C,V,N):A.call(String(V),C,N)},function(G,N){var V=j(A,G,this,N,A!==T);if(V.done)return V.value;var V=i(G),I=String(this),G=y(V,RegExp),R=V.unicode,q=(V.ignoreCase?"i":"")+(V.multiline?"m":"")+(V.unicode?"u":"")+(S?"y":"g"),M=new G(S?V:"^(?:"+V.source+")",q),L=N===void 0?E:N>>>0;if(L==0)return[];if(I.length===0)return m(M,I)===null?[I]:[];for(var H=0,O=0,U=[];O<I.length;){M.lastIndex=S?O:0;var J,Z=m(M,S?I:I.slice(O));if(Z===null||(J=b(u(M.lastIndex+(S?0:O)),I.length))===H)O=_(I,O,R);else{if(U.push(I.slice(H,O)),U.length===L)return U;for(var z=1;z<=Z.length-1;z++)if(U.push(Z[z]),U.length===L)return U;O=H=J}}return U.push(I.slice(H)),U}]},!S)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],199:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/object-get-own-property-descriptor").f,i=_("../internals/to-length"),f=_("../internals/not-a-regexp"),y=_("../internals/require-object-coercible"),p=_("../internals/correct-is-regexp-logic"),_=_("../internals/is-pure"),u="".startsWith,m=Math.min,p=p("startsWith");o({target:"String",proto:!0,forced:!!(_||p||!(o=c(String.prototype,"startsWith"))||o.writable)&&!p},{startsWith:function(E){var x=String(y(this)),b=(f(E),i(m(1<arguments.length?arguments[1]:void 0,x.length))),E=String(E);return u?u.call(x,E,b):x.slice(b,b+E.length)===E}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],200:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/create-html");o({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return c(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],201:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/string-trim").trim;o({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return c(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],202:[function(b,a,l){var o,c,i,f,y,_=b("../internals/export"),u=b("../internals/descriptors"),m=b("../internals/global"),p=b("../internals/has"),g=b("../internals/is-object"),x=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),E=m.Symbol;!u||typeof E!="function"||"description"in E.prototype&&E().description===void 0||(o={},b(c=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),k=this instanceof c?new E(S):S===void 0?E():E(S);return S===""&&(o[k]=!0),k},E),(m=c.prototype=E.prototype).constructor=c,i=m.toString,f=String(E("test"))=="Symbol(test)",y=/^Symbol\((.*)\)[^)]+$/,x(m,"description",{configurable:!0,get:function(){var S=g(this)?this.valueOf():this,k=i.call(S);return p(o,S)?"":(S=f?k.slice(7,-1):k.replace(y,"$1"))===""?void 0:S}}),_({global:!0,forced:!0},{Symbol:c}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],203:[function(t,a,l){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],204:[function(he,a,l){function o(ce,we){var Oe=be[ce]=V(pe[xe]);return _e(Oe,{type:fe,tag:ce,description:we}),p||(Oe.description=we),Oe}function c(ce,Le){T(ce);var Oe=A(Le),Le=I(Oe).concat(ge(Oe));return re(Le,function(qe){p&&!de.call(Oe,qe)||Fe(ce,qe,Oe[qe])}),ce}function i(Le,qe){var Oe,Le=A(Le),qe=C(qe,!0);if(Le!==ue||!E(be,qe)||E(ve,qe))return!(Oe=Ie(Le,qe))||!E(be,qe)||E(Le,se)&&Le[se][qe]||(Oe.enumerable=!0),Oe}function f(we){var we=te(A(we)),Oe=[];return re(we,function(Le){E(be,Le)||E(Z,Le)||Oe.push(Le)}),Oe}var y=he("../internals/export"),_=he("../internals/global"),u=he("../internals/get-built-in"),m=he("../internals/is-pure"),p=he("../internals/descriptors"),g=he("../internals/native-symbol"),x=he("../internals/use-symbol-as-uid"),b=he("../internals/fails"),E=he("../internals/has"),S=he("../internals/is-array"),k=he("../internals/is-object"),T=he("../internals/an-object"),j=he("../internals/to-object"),A=he("../internals/to-indexed-object"),C=he("../internals/to-primitive"),N=he("../internals/create-property-descriptor"),V=he("../internals/object-create"),I=he("../internals/object-keys"),G=he("../internals/object-get-own-property-names"),R=he("../internals/object-get-own-property-names-external"),q=he("../internals/object-get-own-property-symbols"),M=he("../internals/object-get-own-property-descriptor"),L=he("../internals/object-define-property"),H=he("../internals/object-property-is-enumerable"),O=he("../internals/create-non-enumerable-property"),U=he("../internals/redefine"),J=he("../internals/shared"),Ge=he("../internals/shared-key"),Z=he("../internals/hidden-keys"),z=he("../internals/uid"),B=he("../internals/well-known-symbol"),D=he("../internals/well-known-symbol-wrapped"),X=he("../internals/define-well-known-symbol"),K=he("../internals/set-to-string-tag"),Xe=he("../internals/internal-state"),re=he("../internals/array-iteration").forEach,se=Ge("hidden"),fe="Symbol",xe="prototype",he=B("toPrimitive"),_e=Xe.set,ye=Xe.getterFor(fe),ue=Object[xe],pe=_.Symbol,ke=u("JSON","stringify"),Ie=M.f,$=L.f,te=R.f,ne=H.f,be=J("symbols"),ve=J("op-symbols"),je=J("string-to-symbol-registry"),Re=J("symbol-to-string-registry"),Ge=J("wks"),Xe=_.QObject,Ke=!Xe||!Xe[xe]||!Xe[xe].findChild,Pe=p&&b(function(){return V($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a!=7})?function(ce,we,Oe){var Le=Ie(ue,we);Le&&delete ue[we],$(ce,we,Oe),Le&&ce!==ue&&$(ue,we,Le)}:$,We=x?function(ce){return typeof ce=="symbol"}:function(ce){return Object(ce)instanceof pe},Fe=function(ce,we,Oe){return ce===ue&&Fe(ve,we,Oe),T(ce),we=C(we,!0),T(Oe),(E(be,we)?(Oe.enumerable?(E(ce,se)&&ce[se][we]&&(ce[se][we]=!1),Oe=V(Oe,{enumerable:N(0,!1)})):(E(ce,se)||$(ce,se,N(1,{})),ce[se][we]=!0),Pe):$)(ce,we,Oe)},de=function(we){var we=C(we,!0),Oe=ne.call(this,we);return!(this===ue&&E(be,we)&&!E(ve,we))&&(!(Oe||!E(this,we)||!E(be,we)||E(this,se)&&this[se][we])||Oe)},ge=function(Oe){var we=Oe===ue,Oe=te(we?ve:A(Oe)),Le=[];return re(Oe,function(qe){!E(be,qe)||we&&!E(ue,qe)||Le.push(be[qe])}),Le};g||(U((pe=function(){if(this instanceof pe)throw TypeError("Symbol is not a constructor");var ce=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,we=z(ce),Oe=function(Le){this===ue&&Oe.call(ve,Le),E(this,se)&&E(this[se],we)&&(this[se][we]=!1),Pe(this,we,N(1,Le))};return p&&Ke&&Pe(ue,we,{configurable:!0,set:Oe}),o(we,ce)})[xe],"toString",function(){return ye(this).tag}),U(pe,"withoutSetter",function(ce){return o(z(ce),ce)}),H.f=de,L.f=Fe,M.f=i,G.f=R.f=f,q.f=ge,D.f=function(ce){return o(B(ce),ce)},p&&($(pe[xe],"description",{configurable:!0,get:function(){return ye(this).description}}),m||U(ue,"propertyIsEnumerable",de,{unsafe:!0}))),y({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:pe}),re(I(Ge),function(ce){X(ce)}),y({target:fe,stat:!0,forced:!g},{for:function(Oe){var we,Oe=String(Oe);return E(je,Oe)?je[Oe]:(we=pe(Oe),je[Oe]=we,Re[we]=Oe,we)},keyFor:function(ce){if(!We(ce))throw TypeError(ce+" is not a symbol");if(E(Re,ce))return Re[ce]},useSetter:function(){Ke=!0},useSimple:function(){Ke=!1}}),y({target:"Object",stat:!0,forced:!g,sham:!p},{create:function(ce,we){return we===void 0?V(ce):c(V(ce),we)},defineProperty:Fe,defineProperties:c,getOwnPropertyDescriptor:i}),y({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:f,getOwnPropertySymbols:ge}),y({target:"Object",stat:!0,forced:b(function(){q.f(1)})},{getOwnPropertySymbols:function(ce){return q.f(j(ce))}}),ke&&y({target:"JSON",stat:!0,forced:!g||b(function(){var ce=pe();return ke([ce])!="[null]"||ke({a:ce})!="{}"||ke(Object(ce))!="{}"})},{stringify:function(ce,we,Oe){for(var Le,qe=[ce],Qe=1;Qe<arguments.length;)qe.push(arguments[Qe++]);if((k(Le=we)||ce!==void 0)&&!We(ce))return S(we)||(we=function(rt,tt){if(typeof Le=="function"&&(tt=Le.call(this,rt,tt)),!We(tt))return tt}),qe[1]=we,ke.apply(null,qe)}}),pe[xe][he]||O(pe[xe],he,pe[xe].valueOf),K(pe,fe),Z[se]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],205:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-copy-within"),i=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(f,y){return c.call(i(this),f,y,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],206:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").every,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],207:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-fill"),i=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(f){return c.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],208:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").filter,i=t("../internals/species-constructor"),f=o.aTypedArray,y=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(_){for(var u=c(f(this),_,1<arguments.length?arguments[1]:void 0),_=i(this,this.constructor),m=0,p=u.length,g=new(y(_))(p);m<p;)g[m]=u[m++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],209:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").findIndex,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],210:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").find,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],211:[function(t,a,l){t("../internals/typed-array-constructor")("Float32",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],212:[function(t,a,l){t("../internals/typed-array-constructor")("Float64",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],213:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").forEach,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(f){c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],214:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").includes,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],215:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").indexOf,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],216:[function(t,a,l){t("../internals/typed-array-constructor")("Int16",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],217:[function(t,a,l){t("../internals/typed-array-constructor")("Int32",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],218:[function(c,a,l){function o(){return i.call(_(this))}var p=c("../internals/global"),m=c("../internals/array-buffer-view-core"),u=c("../modules/es.array.iterator"),c=c("../internals/well-known-symbol")("iterator"),p=p.Uint8Array,i=u.values,f=u.keys,y=u.entries,_=m.aTypedArray,u=m.exportTypedArrayMethod,m=p&&p.prototype[c],p=!!m&&(m.name=="values"||m.name==null);u("entries",function(){return y.call(_(this))}),u("keys",function(){return f.call(_(this))}),u("values",o,!p),u(c,o,!p)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],219:[function(c,a,l){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,i=[].join;c("join",function(f){return i.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],220:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-last-index-of"),i=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(f){return c.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],221:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").map,i=t("../internals/species-constructor"),f=o.aTypedArray,y=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(_){return c(f(this),_,1<arguments.length?arguments[1]:void 0,function(u,m){return new(y(i(u,u.constructor)))(m)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],222:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").right,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(f){return c(i(this),f,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],223:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").left,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(f){return c(i(this),f,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],224:[function(c,a,l){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,i=Math.floor;c("reverse",function(){for(var f,y=o(this).length,_=i(y/2),u=0;u<_;)f=this[u],this[u++]=this[--y],this[y]=f;return this})},{"../internals/array-buffer-view-core":12}],225:[function(y,a,l){var o=y("../internals/array-buffer-view-core"),c=y("../internals/to-length"),i=y("../internals/to-offset"),f=y("../internals/to-object"),y=y("../internals/fails"),_=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(u){_(this);var m=i(1<arguments.length?arguments[1]:void 0,1),p=this.length,g=f(u),x=c(g.length),b=0;if(p<x+m)throw RangeError("Wrong length");for(;b<x;)this[m+b]=g[b++]},y(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],226:[function(c,a,l){var y=c("../internals/array-buffer-view-core"),o=c("../internals/species-constructor"),c=c("../internals/fails"),i=y.aTypedArray,f=y.aTypedArrayConstructor,y=y.exportTypedArrayMethod,_=[].slice;y("slice",function(u,m){for(var p=_.call(i(this),u,m),u=o(this,this.constructor),g=0,x=p.length,b=new(f(u))(x);g<x;)b[g]=p[g++];return b},c(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],227:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").some,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],228:[function(c,a,l){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,i=[].sort;c("sort",function(f){return i.call(o(this),f)})},{"../internals/array-buffer-view-core":12}],229:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/to-length"),i=t("../internals/to-absolute-index"),f=t("../internals/species-constructor"),y=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(g,u){var m=y(this),p=m.length,g=i(g,p);return new(f(m,m.constructor))(m.buffer,m.byteOffset+g*m.BYTES_PER_ELEMENT,c((u===void 0?p:i(u,p))-g))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],230:[function(c,a,l){var y=c("../internals/global"),o=c("../internals/array-buffer-view-core"),c=c("../internals/fails"),i=y.Int8Array,f=o.aTypedArray,y=o.exportTypedArrayMethod,_=[].toLocaleString,u=[].slice,m=!!i&&c(function(){_.call(new i(1))});y("toLocaleString",function(){return _.apply(m?u.call(f(this)):f(this),arguments)},c(function(){return[1,2].toLocaleString()!=new i([1,2]).toLocaleString()})||!c(function(){i.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],231:[function(c,a,l){var o=c("../internals/array-buffer-view-core").exportTypedArrayMethod,y=c("../internals/fails"),c=c("../internals/global").Uint8Array,c=c&&c.prototype||{},i=[].toString,f=[].join,y=(y(function(){i.call({})})&&(i=function(){return f.call(this)}),c.toString!=i);o("toString",i,y)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],232:[function(t,a,l){t("../internals/typed-array-constructor")("Uint16",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],233:[function(t,a,l){t("../internals/typed-array-constructor")("Uint32",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],234:[function(t,a,l){t("../internals/typed-array-constructor")("Uint8",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],235:[function(t,a,l){t("../internals/typed-array-constructor")("Uint8",function(o){return function(c,i,f){return o(this,c,i,f)}},!0)},{"../internals/typed-array-constructor":142}],236:[function(E,T,l){function o(j){return function(){return j(this,arguments.length?arguments[0]:void 0)}}var c,i,f,y,_,S=E("../internals/global"),u=E("../internals/redefine-all"),m=E("../internals/internal-metadata"),p=E("../internals/collection"),g=E("../internals/collection-weak"),x=E("../internals/is-object"),b=E("../internals/internal-state").enforce,E=E("../internals/native-weak-map"),S=!S.ActiveXObject&&"ActiveXObject"in S,k=Object.isExtensible,T=T.exports=p("WeakMap",o,g);E&&S&&(c=g.getConstructor(o,"WeakMap",!0),m.REQUIRED=!0,p=T.prototype,i=p.delete,f=p.has,y=p.get,_=p.set,u(p,{delete:function(j){var A;return x(j)&&!k(j)?((A=b(this)).frozen||(A.frozen=new c),i.call(this,j)||A.frozen.delete(j)):i.call(this,j)},has:function(j){var A;return x(j)&&!k(j)?((A=b(this)).frozen||(A.frozen=new c),f.call(this,j)||A.frozen.has(j)):f.call(this,j)},get:function(j){var A;return!x(j)||k(j)||((A=b(this)).frozen||(A.frozen=new c),f.call(this,j))?y.call(this,j):A.frozen.get(j)},set:function(j,A){var C;return!x(j)||k(j)||((C=b(this)).frozen||(C.frozen=new c),f.call(this,j))?_.call(this,j,A):C.frozen.set(j,A),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],237:[function(t,a,l){var o,c=t("../internals/global"),i=t("../internals/dom-iterables"),f=t("../internals/array-for-each"),y=t("../internals/create-non-enumerable-property");for(o in i){var _=c[o],_=_&&_.prototype;if(_&&_.forEach!==f)try{y(_,"forEach",f)}catch{_.forEach=f}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],238:[function(_,a,l){var o,c=_("../internals/global"),i=_("../internals/dom-iterables"),f=_("../modules/es.array.iterator"),y=_("../internals/create-non-enumerable-property"),_=_("../internals/well-known-symbol"),u=_("iterator"),m=_("toStringTag"),p=f.values;for(o in i){var g=c[o],x=g&&g.prototype;if(x){if(x[u]!==p)try{y(x,u,p)}catch{x[u]=p}if(x[m]||y(x,m,o),i[o]){for(var b in f)if(x[b]!==f[b])try{y(x,b,f[b])}catch{x[b]=f[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],239:[function(se,a,l){se("../modules/es.array.iterator");function o(fe){try{return decodeURIComponent(fe)}catch{return fe}}function c(fe){return X[fe]}function i(fe){return encodeURIComponent(fe).replace(D,c)}function f(fe){this.entries.length=0,K(this.entries,fe)}function y(fe,xe){if(fe<xe)throw TypeError("Not enough arguments")}function _(){S(this,_,L);var fe,xe,he,_e,ye,ue,pe,ke,Ie=0<arguments.length?arguments[0]:void 0,$=[];if(O(this,{type:L,entries:$,updateURL:function(){},updateSearchParams:f}),Ie!==void 0)if(C(Ie))if(typeof(fe=G(Ie))=="function")for(he=(xe=fe.call(Ie)).next;!(_e=he.call(xe)).done;){if((ue=(ye=(_e=I(A(_e.value))).next).call(_e)).done||(pe=ye.call(_e)).done||!ye.call(_e).done)throw TypeError("Expected sequence with length 2");$.push({key:ue.value+"",value:pe.value+""})}else for(ke in Ie)k(Ie,ke)&&$.push({key:ke,value:Ie[ke]+""});else K($,typeof Ie=="string"?Ie.charAt(0)==="?"?Ie.slice(1):Ie:Ie+"")}var u=se("../internals/export"),M=se("../internals/get-built-in"),m=se("../internals/native-url"),p=se("../internals/redefine"),g=se("../internals/redefine-all"),x=se("../internals/set-to-string-tag"),b=se("../internals/create-iterator-constructor"),E=se("../internals/internal-state"),S=se("../internals/an-instance"),k=se("../internals/has"),T=se("../internals/function-bind-context"),j=se("../internals/classof"),A=se("../internals/an-object"),C=se("../internals/is-object"),N=se("../internals/object-create"),V=se("../internals/create-property-descriptor"),I=se("../internals/get-iterator"),G=se("../internals/get-iterator-method"),se=se("../internals/well-known-symbol"),R=M("fetch"),q=M("Headers"),M=se("iterator"),L="URLSearchParams",H=L+"Iterator",O=E.set,U=E.getterFor(L),J=E.getterFor(H),Z=/\+/g,z=Array(4),B=function(fe){var xe,he=fe.replace(Z," "),_e=4;try{return decodeURIComponent(he)}catch{for(;_e;)he=he.replace((xe=_e--,z[xe-1]||(z[xe-1]=RegExp("((?:%[\\da-f]{2}){"+xe+"})","gi"))),o);return he}},D=/[!'()~]|%20/g,X={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},K=function(fe,xe){if(xe)for(var he,_e=xe.split("&"),ye=0;ye<_e.length;)(he=_e[ye++]).length&&(he=he.split("="),fe.push({key:B(he.shift()),value:B(he.join("="))}))},re=b(function(fe,xe){O(this,{type:H,iterator:I(U(fe).entries),kind:xe})},"Iterator",function(){var xe=J(this),fe=xe.kind,xe=xe.iterator.next(),he=xe.value;return xe.done||(xe.value=fe==="keys"?he.key:fe==="values"?he.value:[he.key,he.value]),xe}),se=_.prototype;g(se,{append:function(fe,xe){y(arguments.length,2);var he=U(this);he.entries.push({key:fe+"",value:xe+""}),he.updateURL()},delete:function(fe){y(arguments.length,1);for(var xe=U(this),he=xe.entries,_e=fe+"",ye=0;ye<he.length;)he[ye].key===_e?he.splice(ye,1):ye++;xe.updateURL()},get:function(fe){y(arguments.length,1);for(var xe=U(this).entries,he=fe+"",_e=0;_e<xe.length;_e++)if(xe[_e].key===he)return xe[_e].value;return null},getAll:function(fe){y(arguments.length,1);for(var xe=U(this).entries,he=fe+"",_e=[],ye=0;ye<xe.length;ye++)xe[ye].key===he&&_e.push(xe[ye].value);return _e},has:function(fe){y(arguments.length,1);for(var xe=U(this).entries,he=fe+"",_e=0;_e<xe.length;)if(xe[_e++].key===he)return!0;return!1},set:function(fe,xe){y(arguments.length,1);for(var he,_e=U(this),ye=_e.entries,ue=!1,pe=fe+"",ke=xe+"",Ie=0;Ie<ye.length;Ie++)(he=ye[Ie]).key===pe&&(ue?ye.splice(Ie--,1):(ue=!0,he.value=ke));ue||ye.push({key:pe,value:ke}),_e.updateURL()},sort:function(){for(var fe,xe,he=U(this),_e=he.entries,ye=_e.slice(),ue=_e.length=0;ue<ye.length;ue++){for(fe=ye[ue],xe=0;xe<ue;xe++)if(_e[xe].key>fe.key){_e.splice(xe,0,fe);break}xe===ue&&_e.push(fe)}he.updateURL()},forEach:function(fe){for(var xe,he=U(this).entries,_e=T(fe,1<arguments.length?arguments[1]:void 0,3),ye=0;ye<he.length;)_e((xe=he[ye++]).value,xe.key,this)},keys:function(){return new re(this,"keys")},values:function(){return new re(this,"values")},entries:function(){return new re(this,"entries")}},{enumerable:!0}),p(se,M,se.entries),p(se,"toString",function(){for(var fe,xe=U(this).entries,he=[],_e=0;_e<xe.length;)fe=xe[_e++],he.push(i(fe.key)+"="+i(fe.value));return he.join("&")},{enumerable:!0}),x(_,L),u({global:!0,forced:!m},{URLSearchParams:_}),m||typeof R!="function"||typeof q!="function"||u({global:!0,enumerable:!0,forced:!0},{fetch:function(ye){var xe,he,_e,ye=[ye];return 1<arguments.length&&(C(xe=arguments[1])&&(he=xe.body,j(he)===L&&((_e=xe.headers?new q(xe.headers):new q).has("content-type")||_e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),xe=N(xe,{body:V(0,String(he)),headers:V(0,_e)}))),ye.push(xe)),R.apply(this,ye)}}),a.exports={URLSearchParams:_,getState:U}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],240:[function(I,a,l){I("../modules/es.string.iterator");function o(Ae){var et,it,Je,St;if(typeof Ae=="number"){for(et=[],it=0;it<4;it++)et.unshift(Ae%256),Ae=H(Ae/256);return et.join(".")}if(typeof Ae!="object")return Ae;for(et="",Je=pe(Ae),it=0;it<8;it++)St&&Ae[it]===0||(St=St&&!1,Je===it?(et+=it?":":"::",St=!0):(et+=Ae[it].toString(16),it<7&&(et+=":")));return"["+et+"]"}function c(Ae){return!Ae.host||Ae.cannotBeABaseURL||Ae.scheme=="file"}function i(Ae,et,it,Je){var St,Ze,Tt,st=it||We,Et=0,at="",Bt=!1,Wt=!1,Ft=!1;for(it||(Ae.scheme="",Ae.username="",Ae.password="",Ae.host=null,Ae.port=null,Ae.path=[],Ae.query=null,Ae.fragment=null,Ae.cannotBeABaseURL=!1,et=et.replace(_e,"")),et=et.replace(ye,""),St=j(et);Et<=St.length;){switch(Ze=St[Et],st){case We:if(!Ze||!B.test(Ze)){if(it)return J;st=de;continue}at+=Ze.toLowerCase(),st=Fe;break;case Fe:if(Ze&&(D.test(Ze)||Ze=="+"||Ze=="-"||Ze=="."))at+=Ze.toLowerCase();else{if(Ze!=":"){if(it)return J;at="",st=de,Et=0;continue}if(it&&(ve(Ae)!=k(be,at)||at=="file"&&(je(Ae)||Ae.port!==null)||Ae.scheme=="file"&&!Ae.host))return;if(Ae.scheme=at,it)return void(ve(Ae)&&be[Ae.scheme]==Ae.port&&(Ae.port=null));at="",Ae.scheme=="file"?st=gt:ve(Ae)&&Je&&Je.scheme==Ae.scheme?st=ge:ve(Ae)?st=Le:St[Et+1]=="/"?(st=ce,Et++):(Ae.cannotBeABaseURL=!0,Ae.path.push(""),st=It)}break;case de:if(!Je||Je.cannotBeABaseURL&&Ze!="#")return J;if(Je.cannotBeABaseURL&&Ze=="#"){Ae.scheme=Je.scheme,Ae.path=Je.path.slice(),Ae.query=Je.query,Ae.fragment="",Ae.cannotBeABaseURL=!0,st=Ut;break}st=Je.scheme=="file"?gt:we;continue;case ge:if(Ze!="/"||St[Et+1]!="/"){st=we;continue}st=qe,Et++;break;case ce:if(Ze=="/"){st=Qe;break}st=pt;continue;case we:if(Ae.scheme=Je.scheme,Ze==_)Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.query=Je.query;else if(Ze=="/"||Ze=="\\"&&ve(Ae))st=Oe;else if(Ze=="?")Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.query="",st=Jt;else{if(Ze!="#"){Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.path.pop(),st=pt;continue}Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.query=Je.query,Ae.fragment="",st=Ut}break;case Oe:if(!ve(Ae)||Ze!="/"&&Ze!="\\"){if(Ze!="/"){Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,st=pt;continue}st=Qe}else st=qe;break;case Le:if(st=qe,Ze!="/"||at.charAt(Et+1)!="/")continue;Et++;break;case qe:if(Ze=="/"||Ze=="\\")break;st=Qe;continue;case Qe:if(Ze=="@"){Bt&&(at="%40"+at);for(var Bt=!0,Xt=j(at),Yt=0;Yt<Xt.length;Yt++){var rr=Xt[Yt];rr!=":"||Ft?(rr=ne(rr,te),Ft?Ae.password+=rr:Ae.username+=rr):Ft=!0}at=""}else if(Ze==_||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ve(Ae)){if(Bt&&at=="")return U;Et-=j(at).length+1,at="",st=rt}else at+=Ze;break;case rt:case tt:if(it&&Ae.scheme=="file"){st=lt;continue}if(Ze!=":"||Wt){if(Ze==_||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ve(Ae)){if(ve(Ae)&&at=="")return Z;if(it&&at==""&&(je(Ae)||Ae.port!==null))return;if(Tt=ue(Ae,at))return Tt;if(at="",st=vt,it)return;continue}Ze=="["?Wt=!0:Ze=="]"&&(Wt=!1),at+=Ze}else{if(at=="")return Z;if(Tt=ue(Ae,at))return Tt;if(at="",st=ot,it==tt)return}break;case ot:if(!X.test(Ze)){if(Ze==_||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ve(Ae)||it){if(at!=""){var Qt=parseInt(at,10);if(65535<Qt)return z;Ae.port=ve(Ae)&&Qt===be[Ae.scheme]?null:Qt,at=""}if(it)return;st=vt;continue}return z}at+=Ze;break;case gt:if(Ae.scheme="file",Ze=="/"||Ze=="\\")st=mt;else{if(!Je||Je.scheme!="file"){st=pt;continue}if(Ze==_)Ae.host=Je.host,Ae.path=Je.path.slice(),Ae.query=Je.query;else if(Ze=="?")Ae.host=Je.host,Ae.path=Je.path.slice(),Ae.query="",st=Jt;else{if(Ze!="#"){Ge(St.slice(Et).join(""))||(Ae.host=Je.host,Ae.path=Je.path.slice(),Xe(Ae)),st=pt;continue}Ae.host=Je.host,Ae.path=Je.path.slice(),Ae.query=Je.query,Ae.fragment="",st=Ut}}break;case mt:if(Ze=="/"||Ze=="\\"){st=lt;break}Je&&Je.scheme=="file"&&!Ge(St.slice(Et).join(""))&&(Re(Je.path[0],!0)?Ae.path.push(Je.path[0]):Ae.host=Je.host),st=pt;continue;case lt:if(Ze==_||Ze=="/"||Ze=="\\"||Ze=="?"||Ze=="#"){if(!it&&Re(at))st=pt;else{if(at==""){if(Ae.host="",it)return}else{if(Tt=ue(Ae,at))return Tt;if(Ae.host=="localhost"&&(Ae.host=""),it)return;at=""}st=vt}continue}at+=Ze;break;case vt:if(ve(Ae)){if(st=pt,Ze!="/"&&Ze!="\\")continue}else if(it||Ze!="?")if(it||Ze!="#"){if(Ze!=_&&(st=pt,Ze!="/"))continue}else Ae.fragment="",st=Ut;else Ae.query="",st=Jt;break;case pt:if(Ze==_||Ze=="/"||Ze=="\\"&&ve(Ae)||!it&&(Ze=="?"||Ze=="#")){if(Pe(at)?(Xe(Ae),Ze=="/"||Ze=="\\"&&ve(Ae)||Ae.path.push("")):Ke(at)?Ze=="/"||Ze=="\\"&&ve(Ae)||Ae.path.push(""):(Ae.scheme=="file"&&!Ae.path.length&&Re(at)&&(Ae.host&&(Ae.host=""),at=at.charAt(0)+":"),Ae.path.push(at)),at="",Ae.scheme=="file"&&(Ze==_||Ze=="?"||Ze=="#"))for(;1<Ae.path.length&&Ae.path[0]==="";)Ae.path.shift();Ze=="?"?(Ae.query="",st=Jt):Ze=="#"&&(Ae.fragment="",st=Ut)}else at+=ne(Ze,$);break;case It:Ze=="?"?(Ae.query="",st=Jt):Ze=="#"?(Ae.fragment="",st=Ut):Ze!=_&&(Ae.path[0]+=ne(Ze,ke));break;case Jt:it||Ze!="#"?Ze!=_&&(Ze=="'"&&ve(Ae)?Ae.query+="%27":Ae.query+=Ze=="#"?"%23":ne(Ze,ke)):(Ae.fragment="",st=Ut);break;case Ut:Ze!=_&&(Ae.fragment+=ne(Ze,Ie))}Et++}}function f(Ze){var et,it,Je=S(this,f,"URL"),St=1<arguments.length?arguments[1]:void 0,Ze=String(Ze),Tt=M(Je,{type:"URL"});if(St!==void 0){if(St instanceof f)et=L(St);else if(it=i(et={},String(St)))throw TypeError(it)}if(it=i(Tt,Ze,null,et))throw TypeError(it);var st=Tt.searchParams=new R;(St=q(st)).updateSearchParams(Tt.query),St.updateURL=function(){Tt.query=String(st)||null},g||(Je.href=Pt.call(Je),Je.origin=kt.call(Je),Je.protocol=qt.call(Je),Je.username=Ht.call(Je),Je.password=Mt.call(Je),Je.host=Zt.call(Je),Je.hostname=Sr.call(Je),Je.port=Er.call(Je),Je.pathname=kr.call(Je),Je.search=Tr.call(Je),Je.searchParams=lr.call(Je),Je.hash=Cr.call(Je))}function y(Ae,et){return{get:Ae,set:et,configurable:!0,enumerable:!0}}var _,u,m,p=I("../internals/export"),g=I("../internals/descriptors"),x=I("../internals/native-url"),At=I("../internals/global"),b=I("../internals/object-define-properties"),E=I("../internals/redefine"),S=I("../internals/an-instance"),k=I("../internals/has"),T=I("../internals/object-assign"),j=I("../internals/array-from"),A=I("../internals/string-multibyte").codeAt,C=I("../internals/string-punycode-to-ascii"),N=I("../internals/set-to-string-tag"),V=I("../modules/web.url-search-params"),I=I("../internals/internal-state"),G=At.URL,R=V.URLSearchParams,q=V.getState,M=I.set,L=I.getterFor("URL"),H=Math.floor,O=Math.pow,U="Invalid authority",J="Invalid scheme",Z="Invalid host",z="Invalid port",B=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,X=/\d/,K=/^(0x|0X)/,re=/^[0-7]+$/,se=/^\d+$/,fe=/^[\dA-Fa-f]+$/,xe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,he=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,_e=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ye=/[\u0009\u000A\u000D]/g,ue=function(Ae,et){var it,Je,St;if(et.charAt(0)=="[")return et.charAt(et.length-1)=="]"&&(it=function(Ze){var Tt=[0,0,0,0,0,0,0,0],st=0,Et=null,at=0,Bt,Wt,Ft,Xt,Yt,rr,Qt,Gt=function(){return Ze.charAt(at)};if(Gt()==":"){if(Ze.charAt(1)!=":")return;at+=2,st++,Et=st}for(;Gt();){if(st==8)return;if(Gt()==":"){if(Et!==null)return;at++,st++,Et=st;continue}for(Bt=Wt=0;Wt<4&&fe.test(Gt());)Bt=Bt*16+parseInt(Gt(),16),at++,Wt++;if(Gt()=="."){if(Wt==0||(at-=Wt,st>6))return;for(Ft=0;Gt();){if(Xt=null,Ft>0)if(Gt()=="."&&Ft<4)at++;else return;if(!X.test(Gt()))return;for(;X.test(Gt());){if(Yt=parseInt(Gt(),10),Xt===null)Xt=Yt;else{if(Xt==0)return;Xt=Xt*10+Yt}if(Xt>255)return;at++}Tt[st]=Tt[st]*256+Xt,Ft++,(Ft==2||Ft==4)&&st++}if(Ft!=4)return;break}else if(Gt()==":"){if(at++,!Gt())return}else if(Gt())return;Tt[st++]=Bt}if(Et!==null)for(rr=st-Et,st=7;st!=0&&rr>0;)Qt=Tt[st],Tt[st--]=Tt[Et+rr-1],Tt[Et+--rr]=Qt;else if(st!=8)return;return Tt}(et.slice(1,-1)))?void(Ae.host=it):Z;if(ve(Ae))return et=C(et),xe.test(et)||(it=function(Ze){var Tt=Ze.split("."),st,Et,at,Bt,Wt,Ft,Xt;if(Tt.length&&Tt[Tt.length-1]==""&&Tt.pop(),(st=Tt.length)>4)return Ze;for(Et=[],at=0;at<st;at++){if(Bt=Tt[at],Bt=="")return Ze;if(Wt=10,Bt.length>1&&Bt.charAt(0)=="0"&&(Wt=K.test(Bt)?16:8,Bt=Bt.slice(Wt==8?1:2)),Bt==="")Ft=0;else{if(!(Wt==10?se:Wt==8?re:fe).test(Bt))return Ze;Ft=parseInt(Bt,Wt)}Et.push(Ft)}for(at=0;at<st;at++)if(Ft=Et[at],at==st-1){if(Ft>=O(256,5-st))return null}else if(Ft>255)return null;for(Xt=Et.pop(),at=0;at<Et.length;at++)Xt+=Et[at]*O(256,3-at);return Xt}(et))===null?Z:void(Ae.host=it);if(he.test(et))return Z;for(it="",Je=j(et),St=0;St<Je.length;St++)it+=ne(Je[St],ke);Ae.host=it},pe=function(Ae){for(var et=null,it=1,Je=null,St=0,Ze=0;Ze<8;Ze++)Ae[Ze]!==0?(it<St&&(et=Je,it=St),Je=null,St=0):(Je===null&&(Je=Ze),++St);return it<St&&(et=Je,it=St),et},ke={},Ie=T({},ke,{" ":1,'"':1,"<":1,">":1,"`":1}),$=T({},Ie,{"#":1,"?":1,"{":1,"}":1}),te=T({},$,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ne=function(Ae,et){var it=A(Ae,0);return 32<it&&it<127&&!k(et,Ae)?Ae:encodeURIComponent(Ae)},be={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ve=function(Ae){return k(be,Ae.scheme)},je=function(Ae){return Ae.username!=""||Ae.password!=""},Re=function(Ae,et){return Ae.length==2&&B.test(Ae.charAt(0))&&((Ae=Ae.charAt(1))==":"||!et&&Ae=="|")},Ge=function(Ae){return 1<Ae.length&&Re(Ae.slice(0,2))&&(Ae.length==2||(Ae=Ae.charAt(2))==="/"||Ae==="\\"||Ae==="?"||Ae==="#")},Xe=function(Ae){var et=Ae.path,it=et.length;!it||Ae.scheme=="file"&&it==1&&Re(et[0],!0)||et.pop()},Ke=function(Ae){return Ae==="."||Ae.toLowerCase()==="%2e"},Pe=function(Ae){return(Ae=Ae.toLowerCase())===".."||Ae==="%2e."||Ae===".%2e"||Ae==="%2e%2e"},We={},Fe={},de={},ge={},ce={},we={},Oe={},Le={},qe={},Qe={},rt={},tt={},ot={},gt={},mt={},lt={},vt={},pt={},It={},Jt={},Ut={},At=f.prototype,Pt=function(){var Ae=L(this),et=Ae.scheme,it=Ae.username,Je=Ae.password,St=Ae.host,Ze=Ae.port,Tt=Ae.path,st=Ae.query,Et=Ae.fragment,at=et+":";return St!==null?(at+="//",je(Ae)&&(at+=it+(Je?":"+Je:"")+"@"),at+=o(St),Ze!==null&&(at+=":"+Ze)):et=="file"&&(at+="//"),at+=Ae.cannotBeABaseURL?Tt[0]:Tt.length?"/"+Tt.join("/"):"",st!==null&&(at+="?"+st),Et!==null&&(at+="#"+Et),at},kt=function(){var Ae=L(this),et=Ae.scheme,it=Ae.port;if(et=="blob")try{return new URL(et.path[0]).origin}catch{return"null"}return et!="file"&&ve(Ae)?et+"://"+o(Ae.host)+(it!==null?":"+it:""):"null"},qt=function(){return L(this).scheme+":"},Ht=function(){return L(this).username},Mt=function(){return L(this).password},Zt=function(){var et=L(this),Ae=et.host,et=et.port;return Ae===null?"":et===null?o(Ae):o(Ae)+":"+et},Sr=function(){var Ae=L(this).host;return Ae===null?"":o(Ae)},Er=function(){var Ae=L(this).port;return Ae===null?"":String(Ae)},kr=function(){var Ae=L(this),et=Ae.path;return Ae.cannotBeABaseURL?et[0]:et.length?"/"+et.join("/"):""},Tr=function(){var Ae=L(this).query;return Ae?"?"+Ae:""},lr=function(){return L(this).searchParams},Cr=function(){var Ae=L(this).fragment;return Ae?"#"+Ae:""};g&&b(At,{href:y(Pt,function(it){var et=L(this),it=String(it),it=i(et,it);if(it)throw TypeError(it);q(et.searchParams).updateSearchParams(et.query)}),origin:y(kt),protocol:y(qt,function(Ae){var et=L(this);i(et,String(Ae)+":",We)}),username:y(Ht,function(Ae){var et=L(this),it=j(String(Ae));if(!c(et)){et.username="";for(var Je=0;Je<it.length;Je++)et.username+=ne(it[Je],te)}}),password:y(Mt,function(Ae){var et=L(this),it=j(String(Ae));if(!c(et)){et.password="";for(var Je=0;Je<it.length;Je++)et.password+=ne(it[Je],te)}}),host:y(Zt,function(Ae){var et=L(this);et.cannotBeABaseURL||i(et,String(Ae),rt)}),hostname:y(Sr,function(Ae){var et=L(this);et.cannotBeABaseURL||i(et,String(Ae),tt)}),port:y(Er,function(Ae){var et=L(this);c(et)||((Ae=String(Ae))==""?et.port=null:i(et,Ae,ot))}),pathname:y(kr,function(Ae){var et=L(this);et.cannotBeABaseURL||(et.path=[],i(et,Ae+"",vt))}),search:y(Tr,function(Ae){var et=L(this);(Ae=String(Ae))==""?et.query=null:(Ae.charAt(0)=="?"&&(Ae=Ae.slice(1)),et.query="",i(et,Ae,Jt)),q(et.searchParams).updateSearchParams(et.query)}),searchParams:y(lr),hash:y(Cr,function(Ae){var et=L(this);(Ae=String(Ae))==""?et.fragment=null:(Ae.charAt(0)=="#"&&(Ae=Ae.slice(1)),et.fragment="",i(et,Ae,Ut))})}),E(At,"toJSON",function(){return Pt.call(this)},{enumerable:!0}),E(At,"toString",function(){return Pt.call(this)},{enumerable:!0}),G&&(u=G.createObjectURL,m=G.revokeObjectURL,u&&E(f,"createObjectURL",function(Ae){return u.apply(G,arguments)}),m&&E(f,"revokeObjectURL",function(Ae){return m.apply(G,arguments)})),N(f,"URL"),p({global:!0,forced:!x,sham:!g},{URL:f})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":192,"../modules/web.url-search-params":239}],241:[function(t,a,l){a.exports=t("./").polyfill()},{"./":242}],242:[function(t,a,l){(function(o,c){var i,f;i=this,f=function(){function y(ue){return typeof ue=="function"}var _=Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"},u=0,m=void 0,p=void 0,g=function(ue,pe){T[u]=ue,T[u+1]=pe,(u+=2)===2&&(p?p(j):R())},x=typeof window<"u"?window:void 0,b=x||{},b=b.MutationObserver||b.WebKitMutationObserver,E=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",S=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function k(){var ue=setTimeout;return function(){return ue(j,1)}}var T=new Array(1e3);function j(){for(var ue=0;ue<u;ue+=2)(0,T[ue])(T[ue+1]),T[ue]=void 0,T[ue+1]=void 0;u=0}function A(){try{var ue=Function("return this")().require("vertx");return(m=ue.runOnLoop||ue.runOnContext)!==void 0?function(){m(j)}:k()}catch{return k()}}var C,N,V,R=void 0;function I(ue,pe){var ke,Ie=this,$=new this.constructor(M),te=($[q]===void 0&&fe($),Ie._state);return te?(ke=arguments[te-1],g(function(){return re(te,$,ke,Ie._result)})):X(Ie,$,ue,pe),$}function G(ue){var pe;return ue&&typeof ue=="object"&&ue.constructor===this?ue:(Z(pe=new this(M),ue),pe)}var R=E?function(){return o.nextTick(j)}:b?(N=0,E=new b(j),V=document.createTextNode(""),E.observe(V,{characterData:!0}),function(){V.data=N=++N%2}):S?((C=new MessageChannel).port1.onmessage=j,function(){return C.port2.postMessage(0)}):(x===void 0&&typeof t=="function"?A:k)(),q=Math.random().toString(36).substring(2);function M(){}var L=void 0,H=1,O=2;function U(ue,pe,ke){g(function(Ie){var $=!1,te=function(ne,be,ve,je){try{ne.call(be,ve,je)}catch(Re){return Re}}(ke,pe,function(ne){$||($=!0,(pe!==ne?Z:B)(Ie,ne))},function(ne){$||($=!0,D(Ie,ne))},Ie._label);!$&&te&&($=!0,D(Ie,te))},ue)}function J(ue,pe,ke){var Ie,$;pe.constructor===ue.constructor&&ke===I&&pe.constructor.resolve===G?(Ie=ue,($=pe)._state===H?B(Ie,$._result):$._state===O?D(Ie,$._result):X($,void 0,function(te){return Z(Ie,te)},function(te){return D(Ie,te)})):ke!==void 0&&y(ke)?U(ue,pe,ke):B(ue,pe)}function Z(ue,pe){if(ue===pe)D(ue,new TypeError("You cannot resolve a promise with itself"));else if(ke=typeof pe,pe===null||ke!="object"&&ke!="function")B(ue,pe);else{ke=void 0;try{ke=pe.then}catch(Ie){return void D(ue,Ie)}J(ue,pe,ke)}var ke}function z(ue){ue._onerror&&ue._onerror(ue._result),K(ue)}function B(ue,pe){ue._state===L&&(ue._result=pe,ue._state=H,ue._subscribers.length!==0&&g(K,ue))}function D(ue,pe){ue._state===L&&(ue._state=O,ue._result=pe,g(z,ue))}function X(ue,pe,ke,Ie){var $=ue._subscribers,te=$.length;ue._onerror=null,$[te]=pe,$[te+H]=ke,$[te+O]=Ie,te===0&&ue._state&&g(K,ue)}function K(ue){var pe=ue._subscribers,ke=ue._state;if(pe.length!==0){for(var Ie,$=void 0,te=ue._result,ne=0;ne<pe.length;ne+=3)Ie=pe[ne],$=pe[ne+ke],Ie?re(ke,Ie,$,te):$(te);ue._subscribers.length=0}}function re(ue,pe,ke,Ie){var $=y(ke),te=void 0,ne=void 0,be=!0;if($){try{te=ke(Ie)}catch(ve){be=!1,ne=ve}if(pe===te)return void D(pe,new TypeError("A promises callback cannot return that same promise."))}else te=Ie;pe._state===L&&($&&be?Z(pe,te):be===!1?D(pe,ne):ue===H?B(pe,te):ue===O&&D(pe,te))}var se=0;function fe(ue){ue[q]=se++,ue._state=void 0,ue._result=void 0,ue._subscribers=[]}he.prototype._enumerate=function(ue){for(var pe=0;this._state===L&&pe<ue.length;pe++)this._eachEntry(ue[pe],pe)},he.prototype._eachEntry=function(ue,pe){var ke=this._instanceConstructor,Ie=ke.resolve;if(Ie===G){var $,te=void 0,ne=void 0,be=!1;try{te=ue.then}catch(ve){be=!0,ne=ve}te===I&&ue._state!==L?this._settledAt(ue._state,pe,ue._result):typeof te!="function"?(this._remaining--,this._result[pe]=ue):ke===_e?($=new ke(M),be?D($,ne):J($,ue,te),this._willSettleAt($,pe)):this._willSettleAt(new ke(function(ve){return ve(ue)}),pe)}else this._willSettleAt(Ie(ue),pe)},he.prototype._settledAt=function(ue,pe,ke){var Ie=this.promise;Ie._state===L&&(this._remaining--,ue===O?D(Ie,ke):this._result[pe]=ke),this._remaining===0&&B(Ie,this._result)},he.prototype._willSettleAt=function(ue,pe){var ke=this;X(ue,void 0,function(Ie){return ke._settledAt(H,pe,Ie)},function(Ie){return ke._settledAt(O,pe,Ie)})};var xe=he;function he(ue,pe){this._instanceConstructor=ue,this.promise=new ue(M),this.promise[q]||fe(this.promise),_(pe)?(this.length=pe.length,this._remaining=pe.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(pe),this._remaining!==0)||B(this.promise,this._result)):D(this.promise,new Error("Array Methods must be provided an Array"))}ye.prototype.catch=function(ue){return this.then(null,ue)},ye.prototype.finally=function(ue){var pe=this.constructor;return y(ue)?this.then(function(ke){return pe.resolve(ue()).then(function(){return ke})},function(ke){return pe.resolve(ue()).then(function(){throw ke})}):this.then(ue,ue)};var _e=ye;function ye(ue){if(this[q]=se++,this._result=this._state=void 0,this._subscribers=[],M!==ue){if(typeof ue!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ye))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var pe=this;try{ue(function(ke){Z(pe,ke)},function(ke){D(pe,ke)})}catch(ke){D(pe,ke)}}}return _e.prototype.then=I,_e.all=function(ue){return new xe(this,ue).promise},_e.race=function(ue){var pe=this;return _(ue)?new pe(function(ke,Ie){for(var $=ue.length,te=0;te<$;te++)pe.resolve(ue[te]).then(ke,Ie)}):new pe(function(ke,Ie){return Ie(new TypeError("You must pass an array to race."))})},_e.resolve=G,_e.reject=function(ue){var pe=new this(M);return D(pe,ue),pe},_e._setScheduler=function(ue){p=ue},_e._setAsap=function(ue){g=ue},_e._asap=g,_e.polyfill=function(){var ue=void 0;if(c!==void 0)ue=c;else if(typeof self<"u")ue=self;else try{ue=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var pe=ue.Promise;if(pe){var ke=null;try{ke=Object.prototype.toString.call(pe.resolve())}catch{}if(ke==="[object Promise]"&&!pe.cast)return}ue.Promise=_e},_e.Promise=_e},typeof l=="object"&&a!==void 0?a.exports=f():i.ES6Promise=f()}).call(this,t("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:251}],243:[function(t,a,l){var o,c;o=this,c=function(i,f){var y=5e3,_="callback";function u(p){try{delete window[p]}catch{window[p]=void 0}}function m(p){p=document.getElementById(p),p&&document.getElementsByTagName("head")[0].removeChild(p)}f.exports=function(p){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],x=p,b=g.timeout||y,E=g.jsonpCallback||_,S=void 0;return new Promise(function(k,T){var j=g.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),A=E+"_"+j,C=(window[j]=function(N){k({ok:!0,json:function(){return Promise.resolve(N)}}),S&&clearTimeout(S),m(A),u(j)},x+=x.indexOf("?")===-1?"?":"&",document.createElement("script"));C.setAttribute("src",""+x+E+"="+j),g.charset&&C.setAttribute("charset",g.charset),C.id=A,document.getElementsByTagName("head")[0].appendChild(C),S=setTimeout(function(){T(new Error("JSONP request to "+p+" timed out")),u(j),m(A),window[j]=function(){u(j)}},b),C.onerror=function(){T(new Error("JSONP request to "+p+" failed")),u(j),m(A),S&&clearTimeout(S)}})}},l!==void 0&&a!==void 0?c(0,a):(c(c={exports:{}},c),o.fetchJsonp=c.exports)},{}],244:[function(t,a,l){var o=function(c){var i,f,y,_,u,m,p,g,x,b,E;if(!(c===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return E=c.document,i=function(){return c.URL||c.webkitURL||c},f=E.createElementNS("http://www.w3.org/1999/xhtml","a"),y="download"in f,_=/constructor/i.test(c.HTMLElement)||c.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),m=function(S){(c.setImmediate||c.setTimeout)(function(){throw S},0)},p=4e4,g=function(S){setTimeout(function(){typeof S=="string"?i().revokeObjectURL(S):S.remove()},p)},x=function(S){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(S.type)?new Blob([String.fromCharCode(65279),S],{type:S.type}):S},E=(b=function(S,k,N){N||(S=x(S));var j,A,C=this,N=S.type==="application/octet-stream",V=function(){for(var I=C,G="writestart progress write writeend".split(" "),R=void 0,q=(G=[].concat(G)).length;q--;){var M=I["on"+G[q]];if(typeof M=="function")try{M.call(I,R||I)}catch(L){m(L)}}};C.readyState=C.INIT,y?(j=i().createObjectURL(S),setTimeout(function(){var I,G;f.href=j,f.download=k,I=f,G=new MouseEvent("click"),I.dispatchEvent(G),V(),g(j),C.readyState=C.DONE})):(u||N&&_)&&c.FileReader?((A=new FileReader).onloadend=function(){var I=u?A.result:A.result.replace(/^data:[^;]*;/,"data:attachment/file;");c.open(I,"_blank")||(c.location.href=I),I=void 0,C.readyState=C.DONE,V()},A.readAsDataURL(S),C.readyState=C.INIT):(j=j||i().createObjectURL(S),!N&&c.open(j,"_blank")||(c.location.href=j),C.readyState=C.DONE,V(),g(j))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(S,k,T){return k=k||S.name||"download",T||(S=x(S)),navigator.msSaveOrOpenBlob(S,k)}:(E.abort=function(){},E.readyState=E.INIT=0,E.WRITING=1,E.DONE=2,E.error=E.onwritestart=E.onprogress=E.onwrite=E.onabort=E.onerror=E.onwriteend=null,function(S,k,T){return new b(S,k||S.name||"download",T)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);a!==void 0&&a.exports?a.exports.saveAs=o:n!=null},{}],245:[function(t,a,l){var o,c=Object.defineProperty,i=(c(l,"__esModule",{value:!0}),l),f={GIFEncoder:()=>V,applyPalette:()=>function(L,H,O="rgb565"){if(!L||!L.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(L instanceof Uint8Array||L instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<H.length)throw new Error("applyPalette() only works with 256 colors or less");const U=new Uint32Array(L.buffer),J=U.length,Z=O==="rgb444"?4096:65536,z=new Uint8Array(J),B=new Array(Z);if(O==="rgba4444")for(let ye=0;ye<J;ye++){var re=U[ye],D=re>>24&255,X=re>>16&255,K=re>>8&255,re=255&re,se=g(re,K,X,D),se=se in B?B[se]:B[se]=function(ue,pe,ke,Ie,$){let te=0,ne=1e100;for(let Re=0;Re<$.length;Re++){var be,ve=$[Re],je=A(ve[3]-Ie);je>ne||(be=ve[0],(je+=A(be-ue))>ne||(be=ve[1],(je+=A(be-pe))>ne||(be=ve[2],(je+=A(be-ke))>ne||(ne=je,te=Re))))}return te}(re,K,X,D,H);z[ye]=se}else{const ye=O==="rgb444"?x:p;for(let ue=0;ue<J;ue++){var he=U[ue],fe=he>>16&255,xe=he>>8&255,he=255&he,_e=ye(he,xe,fe),_e=_e in B?B[_e]:B[_e]=function(pe,ke,Ie,$){let te=0,ne=1e100;for(let Re=0;Re<$.length;Re++){var be,ve=$[Re],je=A(ve[0]-pe);je>ne||(be=ve[1],(je+=A(be-ke))>ne||(be=ve[2],(je+=A(be-Ie))>ne||(ne=je,te=Re)))}return te}(he,xe,fe,H);z[ue]=_e}}return z},default:()=>M,nearestColor:()=>function(L,H,O=T){return L[C(L,H,O)]},nearestColorIndex:()=>C,nearestColorIndexWithDistance:()=>N,prequantize:()=>function(L,{roundRGB:H=5,roundAlpha:O=10,oneBitAlpha:U=null}={}){const J=new Uint32Array(L.buffer);for(let X=0;X<J.length;X++){var D=J[X];let K=D>>24&255;var Z,z=D>>16&255,B=D>>8&255,D=255&D;K=j(K,O),U&&(Z=typeof U=="number"?U:127,K=K<=Z?0:255),D=j(D,H),B=j(B,H),z=j(z,H),J[X]=K<<24|z<<16|B<<8|D<<0}},quantize:()=>function(L,H,O={}){var{format:U="rgb565",clearAlpha:J=!0,clearAlphaColor:Z=0,clearAlphaThreshold:z=0,oneBitAlpha:B=!1}=O;if(!L||!L.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(L instanceof Uint8Array||L instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");L=new Uint32Array(L.buffer);let D=O.useSqrt!==!1;const X=U==="rgba4444",K=function(Ge,Xe){const Ke=Xe==="rgb444"?4096:65536,Pe=new Array(Ke),We=Ge.length;if(Xe==="rgba4444")for(let mt=0;mt<We;++mt){var ce=Ge[mt],Fe=ce>>24&255,de=ce>>16&255,ge=ce>>8&255,ce=255&ce,we=g(ce,ge,de,Fe);let lt=we in Pe?Pe[we]:Pe[we]=k();lt.rc+=ce,lt.gc+=ge,lt.bc+=de,lt.ac+=Fe,lt.cnt++}else if(Xe==="rgb444")for(let mt=0;mt<We;++mt){var qe=Ge[mt],Oe=qe>>16&255,Le=qe>>8&255,qe=255&qe,Qe=x(qe,Le,Oe);let lt=Qe in Pe?Pe[Qe]:Pe[Qe]=k();lt.rc+=qe,lt.gc+=Le,lt.bc+=Oe,lt.cnt++}else for(let mt=0;mt<We;++mt){var ot=Ge[mt],rt=ot>>16&255,tt=ot>>8&255,ot=255&ot,gt=p(ot,tt,rt);let lt=gt in Pe?Pe[gt]:Pe[gt]=k();lt.rc+=ot,lt.gc+=tt,lt.bc+=rt,lt.cnt++}return Pe}(L,U),re=K.length,se=re-1,fe=new Uint32Array(re+1);for(var xe=0,he=0;he<re;++he){const Ge=K[he];Ge!=null&&(ve=1/Ge.cnt,X&&(Ge.ac*=ve),Ge.rc*=ve,Ge.gc*=ve,Ge.bc*=ve,K[xe++]=Ge)}E(H)/xe<.022&&(D=!1);for(var _e,ye,ue,he=0;he<xe-1;++he)K[he].fw=he+1,K[he+1].bk=he,D&&(K[he].cnt=Math.sqrt(K[he].cnt));for(D&&(K[he].cnt=Math.sqrt(K[he].cnt)),he=0;he<xe;++he){S(K,he,!1);var pe=K[he].err;for(ye=++fe[0];1<ye&&(ue=ye>>1,!(K[_e=fe[ue]].err<=pe));ye=ue)fe[ye]=_e;fe[ye]=he}var ke,Ie=xe-H;for(he=0;he<Ie;){for(;;){var $=fe[1];if((ke=K[$]).tm>=ke.mtm&&K[ke.nn].mtm<=ke.tm)break;for(ke.mtm==se?$=fe[1]=fe[fe[0]--]:(S(K,$,!1),ke.tm=he),pe=K[$].err,ye=1;(ue=ye+ye)<=fe[0]&&(ue<fe[0]&&K[fe[ue]].err>K[fe[ue+1]].err&&ue++,!(pe<=K[_e=fe[ue]].err));ye=ue)fe[ye]=_e;fe[ye]=$}var te=K[ke.nn],ne=ke.cnt,be=te.cnt,ve=1/(ne+be);X&&(ke.ac=ve*(ne*ke.ac+be*te.ac)),ke.rc=ve*(ne*ke.rc+be*te.rc),ke.gc=ve*(ne*ke.gc+be*te.gc),ke.bc=ve*(ne*ke.bc+be*te.bc),ke.cnt+=te.cnt,ke.mtm=++he,K[te.bk].fw=te.fw,K[te.fw].bk=te.bk,te.mtm=se}let je=[];for(he=0;;0){let Ge=b(Math.round(K[he].rc),0,255),Xe=b(Math.round(K[he].gc),0,255),Ke=b(Math.round(K[he].bc),0,255),Pe=255;X&&(Pe=b(Math.round(K[he].ac),0,255),B&&(Re=typeof B=="number"?B:127,Pe=Pe<=Re?0:255),J&&Pe<=z&&(Ge=Xe=Ke=Z,Pe=0));var Re=X?[Ge,Xe,Ke,Pe]:[Ge,Xe,Ke];if(function(We,Fe){for(let ce=0;ce<We.length;ce++){var ge=We[ce],de=ge[0]===Fe[0]&&ge[1]===Fe[1]&&ge[2]===Fe[2],ge=!(4<=ge.length&&4<=Fe.length)||ge[3]===Fe[3];if(de&&ge)return!0}return!1}(je,Re)||je.push(Re),(he=K[he].fw)==0)break}return je},snapColorsToPalette:()=>function(L,H,O=5){if(L.length&&H.length){var U=L.map(D=>D.slice(0,3)),J=O*O,Z=L[0].length;for(let D=0;D<H.length;D++){let X=H[D];X=X.length<Z?[X[0],X[1],X[2],255]:X.length>Z?X.slice(0,3):X.slice();var B=N(U,X.slice(0,3),T),z=B[0],B=B[1];0<B&&B<=J&&(L[z]=X)}}}};for(o in f)c(i,o,{get:f[o],enumerable:!0});var y={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function _(L=256){let H=0,O=new Uint8Array(L);return{get buffer(){return O.buffer},reset(){H=0},bytesView(){return O.subarray(0,H)},bytes(){return O.slice(0,H)},writeByte(J){U(H+1),O[H]=J,H++},writeBytes(J,Z=0,z=J.length){U(H+z);for(let B=0;B<z;B++)O[H++]=J[B+Z]},writeBytesView(J,Z=0,z=J.byteLength){U(H+z),O.set(J.subarray(Z,Z+z),H),H+=z}};function U(J){var Z=O.length;if(!(J<=Z)){J=Math.max(J,Z*(Z<1048576?2:1.125)>>>0),Z!=0&&(J=Math.max(J,256));const z=O;O=new Uint8Array(J),0<H&&O.set(z.subarray(0,H),0)}}}var u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],m=function(L,H,O,X,J=_(512),Z=new Uint8Array(256),z=new Int32Array(5003),B=new Int32Array(5003)){var D=z.length,X=Math.max(2,X);Z.fill(0),B.fill(0),z.fill(-1);let K=0,re=0;var se=X+1;const fe=se;let xe=!1,he=fe,_e=(1<<he)-1;var ye=1<<se-1;const ue=1+ye;let pe=2+ye,ke=0,Ie=O[0],$=0;for(let Re=D;Re<65536;Re*=2)++$;$=8-$,J.writeByte(X),je(ye);var te=O.length;for(let Re=1;Re<te;Re++)e:{var ne=O[Re],be=(ne<<12)+Ie;let Ge=ne<<$^Ie;if(z[Ge]===be)Ie=B[Ge];else{for(var ve=Ge===0?1:D-Ge;0<=z[Ge];)if((Ge-=ve)<0&&(Ge+=D),z[Ge]===be){Ie=B[Ge];break e}je(Ie),Ie=ne,pe<4096?(B[Ge]=pe++,z[Ge]=be):(z.fill(-1),pe=2+ye,xe=!0,je(ye))}}return je(Ie),je(ue),J.writeByte(0),J.bytesView();function je(Re){for(K&=u[re],0<re?K|=Re<<re:K=Re,re+=he;8<=re;)Z[ke++]=255&K,254<=ke&&(J.writeByte(ke),J.writeBytesView(Z,0,ke),ke=0),K>>=8,re-=8;if((pe>_e||xe)&&(xe?(he=fe,_e=(1<<he)-1,xe=!1):(++he,_e=he===12?1<<he:(1<<he)-1)),Re==ue){for(;0<re;)Z[ke++]=255&K,254<=ke&&(J.writeByte(ke),J.writeBytesView(Z,0,ke),ke=0),K>>=8,re-=8;0<ke&&(J.writeByte(ke),J.writeBytesView(Z,0,ke),ke=0)}}};function p(L,H,O){return L<<8&63488|H<<2&992|O>>3}function g(L,H,O,U){return L>>4|240&H|(240&O)<<4|(240&U)<<8}function x(L,H,O){return L>>4<<8|240&H|O>>4}function b(L,H,O){return L<H?H:O<L?O:L}function E(L){return L*L}function S(L,H,O){var U=0,J=1e100;const Z=L[H];for(var z=Z.cnt,B=Z.ac,D=Z.rc,X=Z.gc,K=Z.bc,re=Z.fw;re!=0;re=L[re].fw){var se,fe=L[re],xe=fe.cnt,xe=z*xe/(z+xe);J<=xe||(se=0,O&&J<=(se+=xe*E(fe.ac-B))||J<=(se+=xe*E(fe.rc-D))||J<=(se+=xe*E(fe.gc-X))||J<=(se+=xe*E(fe.bc-K))||(J=se,U=re))}Z.err=J,Z.nn=U}function k(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function T(L,H){for(var O=0,U=0;U<L.length;U++){var J=L[U]-H[U];O+=J*J}return O}function j(L,H){return 1<H?Math.round(L/H)*H:L}function A(L){return L*L}function C(L,H,O=T){let U=1/0,J=-1;for(let z=0;z<L.length;z++){var Z=O(H,L[z]);Z<U&&(U=Z,J=z)}return J}function N(L,H,O=T){let U=1/0,J=-1;for(let z=0;z<L.length;z++){var Z=O(H,L[z]);Z<U&&(U=Z,J=z)}return[J,U]}function V(L={}){const{initialCapacity:H=4096,auto:O=!0}=L,U=_(H),J=new Uint8Array(256),Z=new Int32Array(5003),z=new Int32Array(5003);let B=!1;return{reset(){U.reset(),B=!1},finish(){U.writeByte(y.trailer)},bytes(){return U.bytes()},bytesView(){return U.bytesView()},get buffer(){return U.buffer},get stream(){return U},writeHeader:D,writeFrame(X,K,re,Ie={}){var{transparent:fe=!1,transparentIndex:xe=0,delay:ve=0,palette:he=null,repeat:te=0,colorDepth:_e=8,dispose:ye=-1}=Ie;let ue=!1;if(O?B||(ue=!0,D(),B=!0):ue=!!Ie.first,K=Math.max(0,Math.floor(K)),re=Math.max(0,Math.floor(re)),ue){if(!he)throw new Error("First frame must include a { palette } option");var[Ie,ne,ke,be,$=8]=[U,K,re,he,_e];be=q(be.length)-1,$=128|$-1<<4|be,G(Ie,ne),G(Ie,ke),Ie.writeBytes([$,0,0]),I(U,he),0<=te&&(be=U,ne=te,be.writeByte(33),be.writeByte(255),be.writeByte(11),R(be,"NETSCAPE2.0"),be.writeByte(3),be.writeByte(1),G(be,ne),be.writeByte(0))}var pe,ke=Math.round(ve/10),Ie=U,$=ye,te=ke,ne=fe,be=xe,ve=(Ie.writeByte(33),Ie.writeByte(249),Ie.writeByte(4),be<0&&(be=0,ne=!1),ne=ne?(pe=1,2):pe=0,0<=$&&(ne=7&$),ne<<=2,Ie.writeByte(0|ne|pe),G(Ie,te),Ie.writeByte(be||0),Ie.writeByte(0),!!he&&!ue);ye=U,fe=K,xe=re,pe=ve?he:null,ye.writeByte(44),G(ye,0),G(ye,0),G(ye,fe),G(ye,xe),pe?(fe=q(pe.length)-1,ye.writeByte(128|fe)):ye.writeByte(0),ve&&I(U,he),[te,Ie,xe,fe,ye=8,ve,he,X]=[U,X,K,re,_e,J,Z,z],m(xe,fe,Ie,ye,te,ve,he,X)}};function D(){R(U,"GIF89a")}}function I(L,H){var O=1<<q(H.length);for(let U=0;U<O;U++){let J=[0,0,0];U<H.length&&(J=H[U]),L.writeByte(J[0]),L.writeByte(J[1]),L.writeByte(J[2])}}function G(L,H){L.writeByte(255&H),L.writeByte(H>>8&255)}function R(L,H){for(var O=0;O<H.length;O++)L.writeByte(H.charCodeAt(O))}function q(L){return Math.max(Math.ceil(Math.log2(L)),1)}var M=V},{}],246:[function(t,a,l){l.read=function(o,c,i,f,S){var _,u,m=8*S-f-1,p=(1<<m)-1,g=p>>1,x=-7,b=i?S-1:0,E=i?-1:1,S=o[c+b];for(b+=E,_=S&(1<<-x)-1,S>>=-x,x+=m;0<x;_=256*_+o[c+b],b+=E,x-=8);for(u=_&(1<<-x)-1,_>>=-x,x+=f;0<x;u=256*u+o[c+b],b+=E,x-=8);if(_===0)_=1-g;else{if(_===p)return u?NaN:1/0*(S?-1:1);u+=Math.pow(2,f),_-=g}return(S?-1:1)*u*Math.pow(2,_-f)},l.write=function(o,c,i,f,y,k){var u,m,p=8*k-y-1,g=(1<<p)-1,x=g>>1,b=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=f?0:k-1,S=f?1:-1,k=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(m=isNaN(c)?1:0,u=g):(u=Math.floor(Math.log(c)/Math.LN2),c*(f=Math.pow(2,-u))<1&&(u--,f*=2),2<=(c+=1<=u+x?b/f:b*Math.pow(2,1-x))*f&&(u++,f/=2),g<=u+x?(m=0,u=g):1<=u+x?(m=(c*f-1)*Math.pow(2,y),u+=x):(m=c*Math.pow(2,x-1)*Math.pow(2,y),u=0));8<=y;o[i+E]=255&m,E+=S,m/=256,y-=8);for(u=u<<y|m,p+=y;0<p;o[i+E]=255&u,E+=S,u/=256,p-=8);o[i+E-S]|=128*k}},{}],247:[function(t,a,l){var o;function c(de,ge){return de.b===ge.b&&de.a===ge.a}function i(de,ge){return de.b<ge.b||de.b===ge.b&&de.a<=ge.a}function f(de,ge,ce){var we=ge.b-de.b,Oe=ce.b-ge.b;return 0<we+Oe?we<Oe?ge.a-de.a+we/(we+Oe)*(de.a-ce.a):ge.a-ce.a+Oe/(we+Oe)*(ce.a-de.a):0}function y(de,ge,ce){var we=ge.b-de.b,Oe=ce.b-ge.b;return 0<we+Oe?(ge.a-ce.a)*we+(ge.a-de.a)*Oe:0}function _(de,ge){return de.a<ge.a||de.a===ge.a&&de.b<=ge.b}function u(de,ge,ce){var we=ge.a-de.a,Oe=ce.a-ge.a;return 0<we+Oe?we<Oe?ge.b-de.b+we/(we+Oe)*(de.b-ce.b):ge.b-ce.b+Oe/(we+Oe)*(ce.b-de.b):0}function m(de,ge,ce){var we=ge.a-de.a,Oe=ce.a-ge.a;return 0<we+Oe?(ge.b-ce.b)*we+(ge.b-de.b)*Oe:0}function p(de,ge,ce,we){return(de=de<0?0:de)<=(ce=ce<0?0:ce)?ce===0?(ge+we)/2:ge+de/(de+ce)*(we-ge):we+ce/(de+ce)*(ge-we)}function g(de){var ge=k(de.b);return j(ge,de.c),j(ge.b,de.c),A(ge,de.a),ge}function x(de,ge){var ce=!1,we=!1;de!==ge&&(ge.a!==de.a&&(we=!0,N(ge.a,de.a)),ge.d!==de.d&&(ce=!0,V(ge.d,de.d)),T(ge,de),we||(j(ge,de.a),de.a.c=de),ce||(A(ge,de.d),de.d.a=de))}function b(de){var ge=de.b,ce=!1;de.d!==de.b.d&&(ce=!0,V(de.d,de.b.d)),de.c===de?N(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,T(de,de.b.e),ce||A(de,de.d)),ge.c===ge?(N(ge.a,null),V(ge.d,null)):(de.d.a=ge.b.e,ge.a.c=ge.c,T(ge,ge.b.e)),C(de)}function E(de){var ge=k(de),ce=ge.b;return T(ge,de.e),ge.a=de.b.a,j(ce,ge.a),ge.d=ce.d=de.d,ge=ge.b,T(de.b,de.b.b.e),T(de.b,ge),de.b.a=ge.a,ge.b.a.c=ge.b,ge.b.d=de.b.d,ge.f=de.f,ge.b.f=de.b.f,ge}function S(de,ge){var ce=!1,we=k(de),Oe=we.b;return ge.d!==de.d&&(ce=!0,V(ge.d,de.d)),T(we,de.e),T(Oe,ge),we.a=de.b.a,Oe.a=ge.a,we.d=Oe.d=de.d,de.d.a=Oe,ce||A(we,de.d),we}function k(de){var ge=new ke,ce=new ke,we=de.b.h;return(((ce.h=we).b.h=ge).h=de).b.h=ce,ge.b=ce,((ge.c=ge).e=ce).b=ge,(ce.c=ce).e=ge}function T(de,ge){var ce=de.c,we=ge.c;ce.b.e=ge,(we.b.e=de).c=we,ge.c=ce}function j(de,ge){var ce=ge.f,we=new $(ge,ce);for(ce.e=we,ce=(ge.f=we).c=de;ce.a=we,(ce=ce.c)!==de;);}function A(de,ge){var ce=ge.d,we=new pe(ge,ce);for(ce.b=we,(ge.d=we).a=de,we.c=ge.c,ce=de;ce.d=we,(ce=ce.e)!==de;);}function C(de){var ge=de.h;de=de.b.h,(ge.b.h=de).b.h=ge}function N(de,ge){for(var ce=de.c,we=ce;we.a=ge,(we=we.c)!==ce;);ce=de.f,((we=de.e).f=ce).e=we}function V(de,ge){for(var ce=de.a,we=ce;we.d=ge,(we=we.e)!==ce;);ce=de.d,((we=de.b).d=ce).b=we}function I(de){var ge=0;return Math.abs(de[1])>Math.abs(de[0])&&(ge=1),ge=Math.abs(de[2])>Math.abs(de[ge])?2:ge}function G(de,ge){de.f+=ge.f,de.b.f+=ge.b.f}function R(de,ge,ce){return de=de.a,ge=ge.a,ce=ce.a,ge.b.a===de?ce.b.a===de?i(ge.a,ce.a)?y(ce.b.a,ge.a,ce.a)<=0:0<=y(ge.b.a,ce.a,ge.a):y(ce.b.a,de,ce.a)<=0:ce.b.a===de?0<=y(ge.b.a,de,ge.a):(ge=f(ge.b.a,de,ge.a),(de=f(ce.b.a,de,ce.a))<=ge)}function q(de){de.a.i=null;var ge=de.e;ge.a.c=ge.c,ge.c.a=ge.a,de.e=null}function M(de,ge){b(de.a),de.c=!1,(de.a=ge).i=de}function L(de){for(var ge=de.a.a;(de=Fe(de)).a.a===ge;);return de.c&&(M(de,ge=S(We(de).a.b,de.a.e)),de=Fe(de)),de}function H(de,ge,ce){var we=new Pe;return we.a=ce,we.e=xe(de.f,ge.e,we),ce.i=we}function O(de,ge){switch(de.s){case 100130:return(1&ge)!=0;case 100131:return ge!==0;case 100132:return 0<ge;case 100133:return ge<0;case 100134:return 2<=ge||ge<=-2}return!1}function U(de){var ge=de.a,ce=ge.d;ce.c=de.d,ce.a=ge,q(de)}function J(de,ge,ce){for(ge=(de=ge).a;de!==ce;){de.c=!1;var we=We(de),Oe=we.a;if(Oe.a!==ge.a){if(!we.c){U(de);break}M(we,Oe=S(ge.c.b,Oe.b))}ge.c!==Oe&&(x(Oe.b.e,Oe),x(ge,Oe)),U(de),ge=we.a,de=we}return ge}function Z(de,ge,ce,we,Oe,Le){for(var qe=!0;H(de,ge,ce.b),(ce=ce.c)!==we;);for(Oe===null&&(Oe=We(ge).a.b.c);(ce=(we=We(ge)).a.b).a===Oe.a;)ce.c!==Oe&&(x(ce.b.e,ce),x(Oe.b.e,ce)),we.f=ge.f-ce.f,we.d=O(de,we.f),ge.b=!0,!qe&&X(de,ge)&&(G(ce,Oe),q(ge),b(Oe)),qe=!1,ge=we,Oe=ce;ge.b=!0,Le&&re(de,ge)}function z(de,ge,ce,we,Oe){var Le=[ge.g[0],ge.g[1],ge.g[2]];ge.d=null,ge.d=de.o&&de.o(Le,ce,we,de.c)||null,ge.d===null&&(Oe?de.n||(ue(de,100156),de.n=!0):ge.d=ce[0])}function B(de,ge,ce){var we=[null,null,null,null];we[0]=ge.a.d,we[1]=ce.a.d,z(de,ge.a,we,[.5,.5,0,0],!1),x(ge,ce)}function D(de,ge,ce,we,Oe){var Le=Math.abs(ge.b-de.b)+Math.abs(ge.a-de.a),qe=Math.abs(ce.b-de.b)+Math.abs(ce.a-de.a),Qe=Oe+1;we[Oe]=.5*qe/(Le+qe),we[Qe]=.5*Le/(Le+qe),de.g[0]+=we[Oe]*ge.g[0]+we[Qe]*ce.g[0],de.g[1]+=we[Oe]*ge.g[1]+we[Qe]*ce.g[1],de.g[2]+=we[Oe]*ge.g[2]+we[Qe]*ce.g[2]}function X(de,ge){var ce=We(ge),we=ge.a,Oe=ce.a;if(i(we.a,Oe.a)){if(0<y(Oe.b.a,we.a,Oe.a))return;if(c(we.a,Oe.a)){if(we.a!==Oe.a){var ce=de.e,Le=we.a.h;if(0<=Le){var qe=(ce=ce.b).d,Qe=ce.e,rt=ce.c,tt=rt[Le];qe[tt]=qe[ce.a],(rt[qe[tt]]=tt)<=--ce.a&&(tt<=1||i(Qe[qe[tt>>1]],Qe[qe[tt]])?Xe:Ke)(ce,tt),Qe[Le]=null,rt[Le]=ce.b,ce.b=Le}else for(ce.c[-(Le+1)]=null;0<ce.a&&ce.c[ce.d[ce.a-1]]===null;)--ce.a;B(de,Oe.b.e,we)}}else E(Oe.b),x(we,Oe.b.e),ge.b=ce.b=!0}else{if(y(we.b.a,Oe.a,we.a)<0)return;Fe(ge).b=ge.b=!0,E(we.b),x(Oe.b.e,we)}return 1}function K(de,ge){var ce=We(ge),we=ge.a,Oe=ce.a,Le=we.a,qe=Oe.a,Qe=we.b.a,rt=Oe.b.a,tt=new $;if(y(Qe,de.a,Le),y(rt,de.a,qe),!(Le===qe||Math.min(Le.a,Qe.a)>Math.max(qe.a,rt.a))){if(i(Le,qe)){if(0<y(rt,Le,qe))return}else if(y(Qe,qe,Le)<0)return;var ot,gt,mt=Qe,lt=Le,vt=rt,pt=qe;if(i(mt,lt)||(ot=mt,mt=lt,lt=ot),i(vt,pt)||(ot=vt,vt=pt,pt=ot),i(mt,vt)||(ot=mt,mt=vt,vt=ot,ot=lt,lt=pt,pt=ot),i(vt,lt)?i(lt,pt)?((ot=f(mt,vt,lt))+(gt=f(vt,lt,pt))<0&&(ot=-ot,gt=-gt),tt.b=p(ot,vt.b,gt,lt.b)):((ot=y(mt,vt,lt))+(gt=-y(mt,pt,lt))<0&&(ot=-ot,gt=-gt),tt.b=p(ot,vt.b,gt,pt.b)):tt.b=(vt.b+lt.b)/2,_(mt,lt)||(ot=mt,mt=lt,lt=ot),_(vt,pt)||(ot=vt,vt=pt,pt=ot),_(mt,vt)||(ot=mt,mt=vt,vt=ot,ot=lt,lt=pt,pt=ot),_(vt,lt)?_(lt,pt)?((ot=u(mt,vt,lt))+(gt=u(vt,lt,pt))<0&&(ot=-ot,gt=-gt),tt.a=p(ot,vt.a,gt,lt.a)):((ot=m(mt,vt,lt))+(gt=-m(mt,pt,lt))<0&&(ot=-ot,gt=-gt),tt.a=p(ot,vt.a,gt,pt.a)):tt.a=(vt.a+lt.a)/2,i(tt,de.a)&&(tt.b=de.a.b,tt.a=de.a.a),mt=i(Le,qe)?Le:qe,i(mt,tt)&&(tt.b=mt.b,tt.a=mt.a),c(tt,Le)||c(tt,qe))return X(de,ge),0;if(!c(Qe,de.a)&&0<=y(Qe,de.a,tt)||!c(rt,de.a)&&y(rt,de.a,tt)<=0){if(rt===de.a)E(we.b),x(Oe.b,we),we=We(ge=L(ge)).a,J(de,We(ge),ce),Z(de,ge,we.b.e,we,we,!0);else{if(Qe!==de.a)return 0<=y(Qe,de.a,tt)&&(Fe(ge).b=ge.b=!0,E(we.b),we.a.b=de.a.b,we.a.a=de.a.a),void(y(rt,de.a,tt)<=0&&(ge.b=ce.b=!0,E(Oe.b),Oe.a.b=de.a.b,Oe.a.a=de.a.a));for(E(Oe.b),x(we.e,Oe.b.e),qe=(Le=ce=ge).a.b.a;(Le=Fe(Le)).a.b.a===qe;);Le=We(ge=Le).a.b.c,ce.a=Oe.b.e,Z(de,ge,(Oe=J(de,ce,null)).c,we.b.c,Le,!0)}return 1}E(we.b),E(Oe.b),x(Oe.b.e,we),we.a.b=tt.b,we.a.a=tt.a,we.a.h=ne(de.e,we.a),we=we.a,Oe=[0,0,0,0],tt=[Le.d,Qe.d,qe.d,rt.d],we.g[0]=we.g[1]=we.g[2]=0,D(we,Le,Qe,Oe,0),D(we,qe,rt,Oe,2),z(de,we,tt,Oe,!0),Fe(ge).b=ge.b=ce.b=!0}}function re(de,ge){for(var ce=We(ge);;){for(;ce.b;)ce=We(ge=ce);if(!ge.b&&((ge=Fe(ce=ge))===null||!ge.b))break;ge.b=!1;var we=ge.a,Oe=ce.a;if(Le=we.b.a!==Oe.b.a)e:{var Le,qe=We(Le=ge),Qe=Le.a,rt=qe.a,tt=void 0;if(i(Qe.b.a,rt.b.a)){if(y(Qe.b.a,rt.b.a,Qe.a)<0){Le=!1;break e}Fe(Le).b=Le.b=!0,tt=E(Qe),x(rt.b,tt),tt.d.c=Le.d}else{if(0<y(rt.b.a,Qe.b.a,rt.a)){Le=!1;break e}Le.b=qe.b=!0,tt=E(rt),x(Qe.e,rt.b),tt.b.d.c=Le.d}Le=!0}if(Le&&(ce.c?(q(ce),b(Oe),Oe=(ce=We(ge)).a):ge.c&&(q(ge),b(we),we=(ge=Fe(ce)).a)),we.a!==Oe.a){if(we.b.a===Oe.b.a||ge.c||ce.c||we.b.a!==de.a&&Oe.b.a!==de.a)X(de,ge);else if(K(de,ge))break}we.a===Oe.a&&we.b.a===Oe.b.a&&(G(Oe,we),q(ge),b(we),ge=Fe(ce))}}function se(de,ge){var ce=new Pe,we=g(de.b);we.a.b=4e150,we.a.a=ge,we.b.a.b=-4e150,we.b.a.a=ge,de.a=we.b.a,ce.a=we,ce.f=0,ce.d=!1,ce.c=!1,ce.h=!0,ce.b=!1,we=xe(we=de.f,we.a,ce),ce.e=we}function fe(de){this.a=new he,this.b=de,this.c=R}function xe(de,ge,ce){for(;(ge=ge.c).b!==null&&!de.c(de.b,ge.b,ce););return de=new he(ce,ge.a,ge),ge.a.c=de,ge.a=de}function he(de,ge,ce){this.b=de||null,this.a=ge||this,this.c=ce||this}function _e(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ye(de,ge){if(de.d!==ge)for(;de.d!==ge;)if(de.d<ge)switch(de.d){case 0:ue(de,100151),de.u(null);break;case 1:ue(de,100152),de.t()}else switch(de.d){case 2:ue(de,100154),de.v();break;case 1:ue(de,100153),de.w()}}function ue(de,ge){de.p&&de.p(ge,de.c)}function pe(de,ge){this.b=de||this,this.d=ge||this,this.a=null,this.c=!1}function ke(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ie(){this.c=new $,this.a=new pe,this.b=new ke,this.d=new ke,this.b.b=this.d,this.d.b=this.b}function $(de,ge){this.e=de||this,this.f=ge||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ve}function ne(de,ge){var ce,we,Oe;return de.e?(2*(we=++(ce=de.b).a)>ce.f&&(ce.f*=2,ce.c=je(ce.c,ce.f+1)),ce.b===0?Oe=we:(Oe=ce.b,ce.b=ce.c[ce.b]),ce.e[Oe]=ge,ce.c[Oe]=we,ce.d[we]=Oe,ce.h&&Ke(ce,we),Oe):(ce=de.a++,de.c[ce]=ge,-(ce+1))}function be(de){if(de.a===0)return Ge(de.b);var ge=de.c[de.d[de.a-1]];if(de.b.a!==0&&i(Re(de.b),ge))return Ge(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return ge}function ve(){this.d=je([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function je(de,ge){for(var ce=Array(ge),we=0;we<de.length;we++)ce[we]=de[we];for(;we<ge;we++)ce[we]=0;return ce}function Re(de){return de.e[de.d[1]]}function Ge(de){var ge=de.d,ce=de.e,we=de.c,Oe=ge[1],Le=ce[Oe];return 0<de.a&&(ge[1]=ge[de.a],we[ge[1]]=1,ce[Oe]=null,we[Oe]=de.b,de.b=Oe,0<--de.a&&Xe(de,1)),Le}function Xe(de,ge){for(var ce=de.d,we=de.e,Oe=de.c,Le=ge,qe=ce[Le];;){var Qe=Le<<1,rt=(Qe<de.a&&i(we[ce[Qe+1]],we[ce[Qe]])&&(Qe+=1),ce[Qe]);if(Qe>de.a||i(we[qe],we[rt])){Oe[ce[Le]=qe]=Le;break}Oe[ce[Le]=rt]=Le,Le=Qe}}function Ke(de,ge){for(var ce=de.d,we=de.e,Oe=de.c,Le=ge,qe=ce[Le];;){var Qe=Le>>1,rt=ce[Qe];if(Qe==0||i(we[rt],we[qe])){Oe[ce[Le]=qe]=Le;break}Oe[ce[Le]=rt]=Le,Le=Qe}}function Pe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function We(de){return de.e.c.b}function Fe(de){return de.e.a.b}(o=_e.prototype).x=function(){ye(this,0)},o.B=function(de,ge){switch(de){case 100142:return;case 100140:switch(ge){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ge)}break;case 100141:return void(this.m=!!ge);default:return void ue(this,100900)}ue(this,100901)},o.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ue(this,100900)}return!1},o.A=function(de,ge,ce){this.j[0]=de,this.j[1]=ge,this.j[2]=ce},o.z=function(de,ge){var ce=ge||null;switch(de){case 100100:case 100106:this.h=ce;break;case 100104:case 100110:this.l=ce;break;case 100101:case 100107:this.k=ce;break;case 100102:case 100108:this.i=ce;break;case 100103:case 100109:this.p=ce;break;case 100105:case 100111:this.o=ce;break;case 100112:this.r=ce;break;default:ue(this,100900)}},o.C=function(de,ge){var ce=!1,we=[0,0,0];ye(this,2);for(var Oe=0;Oe<3;++Oe){var Le=de[Oe];Le<-1e150&&(Le=-1e150,ce=!0),1e150<Le&&(Le=1e150,ce=!0),we[Oe]=Le}ce&&ue(this,100155),(ce=this.q)===null?x(ce=g(this.b),ce.b):(E(ce),ce=ce.e),ce.a.d=ge,ce.a.g[0]=we[0],ce.a.g[1]=we[1],ce.a.g[2]=we[2],ce.f=1,ce.b.f=-1,this.q=ce},o.u=function(de){ye(this,0),this.d=1,this.b=new Ie,this.c=de},o.t=function(){ye(this,1),this.d=2,this.q=null},o.v=function(){ye(this,2),this.d=1},o.w=function(){ye(this,1),this.d=0;var de,ge,ce=this.j[0],we=this.j[1],Oe=this.j[2],Le=!1,qe=[ce,we,Oe];if(ce===0&&we===0&&Oe===0){for(var we=[-2e150,-2e150,-2e150],Qe=[2e150,2e150,2e150],Oe=[],rt=[],ce=(Le=this.b.c).e;ce!==Le;ce=ce.e)for(var tt=0;tt<3;++tt){var ot=ce.g[tt];ot<Qe[tt]&&(Qe[tt]=ot,rt[tt]=ce),ot>we[tt]&&(we[tt]=ot,Oe[tt]=ce)}if(we[1]-Qe[1]>we[ce=0]-Qe[0]&&(ce=1),Qe[ce=we[2]-Qe[2]>we[ce]-Qe[ce]?2:ce]>=we[ce])qe[0]=0,qe[1]=0,qe[2]=1;else{for(Qe=rt[ce],Oe=Oe[ce],rt=[we=0,0,0],Qe=[Qe.g[0]-Oe.g[0],Qe.g[1]-Oe.g[1],Qe.g[2]-Oe.g[2]],tt=[0,0,0],ce=Le.e;ce!==Le;ce=ce.e)tt[0]=ce.g[0]-Oe.g[0],tt[1]=ce.g[1]-Oe.g[1],tt[2]=ce.g[2]-Oe.g[2],rt[0]=Qe[1]*tt[2]-Qe[2]*tt[1],rt[1]=Qe[2]*tt[0]-Qe[0]*tt[2],rt[2]=Qe[0]*tt[1]-Qe[1]*tt[0],we<(ot=rt[0]*rt[0]+rt[1]*rt[1]+rt[2]*rt[2])&&(we=ot,qe[0]=rt[0],qe[1]=rt[1],qe[2]=rt[2]);we<=0&&(qe[0]=qe[1]=qe[2]=0,qe[I(Qe)]=1)}Le=!0}for(rt=I(qe),ce=this.b.c,we=(rt+1)%3,Oe=(rt+2)%3,rt=0<qe[rt]?1:-1,qe=ce.e;qe!==ce;qe=qe.e)qe.b=qe.g[we],qe.a=rt*qe.g[Oe];if(Le){for(qe=0,ce=(Le=this.b.a).b;ce!==Le;ce=ce.b)if(!((we=ce.a).f<=0))for(;qe+=(we.a.b-we.b.a.b)*(we.a.a+we.b.a.a),(we=we.e)!==ce.a;);if(qe<0)for(Le=(qe=this.b.c).e;Le!==qe;Le=Le.e)Le.a=-Le.a}for(this.n=!1,qe=this.b.b,ce=qe.h;ce!==qe;ce=Le)Le=ce.h,we=ce.e,c(ce.a,ce.b.a)&&ce.e.e!==ce&&(B(this,we,ce),b(ce),we=(ce=we).e),we.e===ce&&(we!==ce&&(we!==Le&&we!==Le.b||(Le=Le.h),b(we)),ce!==Le&&ce!==Le.b||(Le=Le.h),b(ce));for(this.e=qe=new te,Le=this.b.c,ce=Le.e;ce!==Le;ce=ce.e)ce.h=ne(qe,ce);var gt=qe;gt.d=[];for(var mt=0;mt<gt.a;mt++)gt.d[mt]=mt;gt.d.sort(function(pt){return function(It,Jt){return i(pt[It],pt[Jt])?1:-1}}(gt.c)),gt.e=!0;for(var lt=gt.b,vt=lt.a;1<=vt;--vt)Xe(lt,vt);for(lt.h=!0,this.f=new fe(this),se(this,-4e150),se(this,4e150);(qe=be(this.e))!==null;){for(;;){e:if((ce=this.e).a===0)Le=Re(ce.b);else if(Le=ce.c[ce.d[ce.a-1]],ce.b.a!==0&&i(ce=Re(ce.b),Le)){Le=ce;break e}if(Le===null||!c(Le,qe))break;Le=be(this.e),B(this,qe.c,Le.c)}(function pt(It,Jt){for(var Ut,At=(It.a=Jt).c;At.i===null;)if((At=At.c)===Jt.c){var At=It,Pt=Jt;(Mt=new Pe).a=Pt.c.b;for(var Zt=(kt=At.f).a;(Zt=Zt.a).b!==null&&!kt.c(kt.b,Mt,Zt.b););var kt,qt,Ht=We(kt=Zt.b),Mt=kt.a,Zt=Ht.a;return void(y(Mt.b.a,Pt,Mt.a)===0?c((Mt=kt.a).a,Pt)||c(Mt.b.a,Pt)||(E(Mt.b),kt.c&&(b(Mt.c),kt.c=!1),x(Pt.c,Mt),pt(At,Pt)):(qt=i(Zt.b.a,Mt.b.a)?kt:Ht,Ht=void 0,kt.d||qt.c?(Ht=qt===kt?S(Pt.c.b,Mt.e):S(Zt.b.c.b,Pt.c).b,qt.c?M(qt,Ht):((kt=H(Mt=At,kt,Ht)).f=Fe(kt).f+kt.a.f,kt.d=O(Mt,kt.f)),pt(At,Pt)):Z(At,kt,Pt.c,Pt.c,null,!0)))}kt=(Mt=We(At=L(At.i))).a,(Mt=J(It,Mt,null)).c===kt?(Mt=(kt=Mt).c,Zt=We(At),Ht=At.a,qt=Zt.a,Ut=!1,Ht.b.a!==qt.b.a&&K(It,At),c(Ht.a,It.a)&&(x(Mt.b.e,Ht),Mt=We(At=L(At)).a,J(It,We(At),Zt),Ut=!0),c(qt.a,It.a)&&(x(kt,qt.b.e),kt=J(It,Zt,null),Ut=!0),Ut?Z(It,At,kt.c,Mt,Mt,!0):(Pt=i(qt.a,Ht.a)?qt.b.e:Ht,Z(It,At,Pt=S(kt.c.b,Pt),Pt.c,Pt.c,!1),Pt.b.i.c=!0,re(It,At))):Z(It,At,Mt.c,kt,kt,!0)})(this,qe)}for(this.a=this.f.a.a.b.a.a,qe=0;(Le=this.f.a.a.b)!==null;)Le.h||++qe,q(Le);for(this.f=null,(qe=this.e).b=null,qe.d=null,this.e=qe.c=null,qe=this.b,ce=qe.a.b;ce!==qe.a;ce=Le)Le=ce.b,(ce=ce.a).e.e===ce&&(G(ce.c,ce),b(ce));if(!this.n){if(qe=this.b,this.m)for(ce=qe.b.h;ce!==qe.b;ce=Le)Le=ce.h,ce.b.d.c!==ce.d.c?ce.f=ce.d.c?1:-1:b(ce);else for(ce=qe.a.b;ce!==qe.a;ce=Le)if(Le=ce.b,ce.c){for(ce=ce.a;i(ce.b.a,ce.a);ce=ce.c.b);for(;i(ce.a,ce.b.a);ce=ce.e);for(we=ce.c.b,Oe=void 0;ce.e!==we;)if(i(ce.b.a,we.a)){for(;we.e!==ce&&(i((ge=we.e).b.a,ge.a)||y(we.a,we.b.a,we.e.b.a)<=0);)we=(Oe=S(we.e,we)).b;we=we.c.b}else{for(;we.e!==ce&&(i((de=ce.c.b).a,de.b.a)||0<=y(ce.b.a,ce.a,ce.c.b.a));)ce=(Oe=S(ce,ce.c.b)).b;ce=ce.e}for(;we.e.e!==ce;)Oe=S(we.e,we),we=Oe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Le=(qe=this.b).a.b;Le!==qe.a;Le=Le.b)if(Le.c){for(this.h&&this.h(2,this.c),ce=Le.a;this.k&&this.k(ce.a.d,this.c),(ce=ce.e)!==Le.a;);this.i&&this.i(this.c)}}else{for(qe=this.b,Le=!!this.l,ce=!1,we=-1,Oe=qe.a.d;Oe!==qe.a;Oe=Oe.d)if(Oe.c)for(ce||(this.h&&this.h(4,this.c),ce=!0),rt=Oe.a;Le&&(Qe=rt.b.d.c?0:1,we!==Qe&&(we=Qe,this.l&&this.l(!!we,this.c))),this.k&&this.k(rt.a.d,this.c),(rt=rt.e)!==Oe.a;);ce&&this.i&&this.i(this.c)}if(this.r){for(qe=this.b,ce=qe.a.b;ce!==qe.a;ce=Le)if(Le=ce.b,!ce.c){for(Oe=(we=ce.a).e,rt=void 0;Oe=(rt=Oe).e,(rt.d=null)===rt.b.d&&(rt.c===rt?N(rt.a,null):(rt.a.c=rt.c,T(rt,rt.b.e)),(Qe=rt.b).c===Qe?N(Qe.a,null):(Qe.a.c=Qe.c,T(Qe,Qe.b.e)),C(rt)),rt!==we;);we=ce.d,((ce=ce.b).d=we).b=ce}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:_e,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},_e.prototype.gluDeleteTess=_e.prototype.x,_e.prototype.gluTessProperty=_e.prototype.B,_e.prototype.gluGetTessProperty=_e.prototype.y,_e.prototype.gluTessNormal=_e.prototype.A,_e.prototype.gluTessCallback=_e.prototype.z,_e.prototype.gluTessVertex=_e.prototype.C,_e.prototype.gluTessBeginPolygon=_e.prototype.u,_e.prototype.gluTessBeginContour=_e.prototype.t,_e.prototype.gluTessEndContour=_e.prototype.v,_e.prototype.gluTessEndPolygon=_e.prototype.w,a!==void 0&&(a.exports=this.libtess)},{}],248:[function(t,a,l){function o(i,f,y,_){var u=0,m=(_=_===void 0?{}:_).loop===void 0?null:_.loop,p=_.palette===void 0?null:_.palette;if(f<=0||y<=0||65535<f||65535<y)throw new Error("Width/Height invalid.");function g(A){if(A=A.length,A<2||256<A||A&A-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return A}i[u++]=71,i[u++]=73,i[u++]=70,i[u++]=56,i[u++]=57,i[u++]=97;var x=0,b=0;if(p!==null){for(var E=g(p);E>>=1;)++x;if(E=1<<x,--x,_.background!==void 0){if(E<=(b=_.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(i[u++]=255&f,i[u++]=f>>8&255,i[u++]=255&y,i[u++]=y>>8&255,i[u++]=(p!==null?128:0)|x,i[u++]=b,i[u++]=0,p!==null)for(var S=0,k=p.length;S<k;++S){var T=p[S];i[u++]=T>>16&255,i[u++]=T>>8&255,i[u++]=255&T}if(m!==null){if(m<0||65535<m)throw new Error("Loop count invalid.");i[u++]=33,i[u++]=255,i[u++]=11,i[u++]=78,i[u++]=69,i[u++]=84,i[u++]=83,i[u++]=67,i[u++]=65,i[u++]=80,i[u++]=69,i[u++]=50,i[u++]=46,i[u++]=48,i[u++]=3,i[u++]=1,i[u++]=255&m,i[u++]=m>>8&255,i[u++]=0}var j=!1;this.addFrame=function(A,C,N,V,I,G){if(j===!0&&(--u,j=!1),G=G===void 0?{}:G,A<0||C<0||65535<A||65535<C)throw new Error("x/y invalid.");if(N<=0||V<=0||65535<N||65535<V)throw new Error("Width/Height invalid.");if(I.length<N*V)throw new Error("Not enough pixels for the frame size.");var R=!0,q=G.palette;if(q==null&&(R=!1,q=p),q==null)throw new Error("Must supply either a local or global palette.");for(var L=g(q),M=0;L>>=1;)++M;var L=1<<M,H=G.delay===void 0?0:G.delay,O=G.disposal===void 0?0:G.disposal;if(O<0||3<O)throw new Error("Disposal out of range.");var U=!1,J=0;if(G.transparent!==void 0&&G.transparent!==null&&(U=!0,(J=G.transparent)<0||L<=J))throw new Error("Transparent color index.");if(O===0&&!U&&H===0||(i[u++]=33,i[u++]=249,i[u++]=4,i[u++]=O<<2|(U===!0?1:0),i[u++]=255&H,i[u++]=H>>8&255,i[u++]=J,i[u++]=0),i[u++]=44,i[u++]=255&A,i[u++]=A>>8&255,i[u++]=255&C,i[u++]=C>>8&255,i[u++]=255&N,i[u++]=N>>8&255,i[u++]=255&V,i[u++]=V>>8&255,i[u++]=R===!0?128|M-1:0,R===!0)for(var Z=0,z=q.length;Z<z;++Z){var B=q[Z];i[u++]=B>>16&255,i[u++]=B>>8&255,i[u++]=255&B}return u=function(D,X,K,re){D[X++]=K;var se=X++,fe=1<<K,xe=fe-1,he=1+fe,_e=1+he,ye=K+1,ue=0,pe=0;function ke(Ge){for(;Ge<=ue;)D[X++]=255&pe,pe>>=8,ue-=8,X===se+256&&(D[se]=255,se=X++)}function Ie(Ge){pe|=Ge<<ue,ue+=ye,ke(8)}var $=re[0]&xe,te={};Ie(fe);for(var ne=1,be=re.length;ne<be;++ne){var ve=re[ne]&xe,je=$<<8|ve,Re=te[je];if(Re===void 0){for(pe|=$<<ue,ue+=ye;8<=ue;)D[X++]=255&pe,pe>>=8,ue-=8,X===se+256&&(D[se]=255,se=X++);_e===4096?(Ie(fe),_e=1+he,ye=K+1,te={}):(1<<ye<=_e&&++ye,te[je]=_e++),$=ve}else $=Re}return Ie($),Ie(he),ke(1),se+1===X?D[se]=0:(D[se]=X-se-1,D[X++]=0),X}(i,u,M<2?2:M,I)},this.end=function(){return j===!1&&(i[u++]=59,j=!0),u},this.getOutputBuffer=function(){return i},this.setOutputBuffer=function(A){i=A},this.getOutputBufferPosition=function(){return u},this.setOutputBufferPosition=function(A){u=A}}function c(i,f,y,_){for(var u=i[f++],m=1<<u,p=1+m,g=1+p,x=u+1,b=(1<<x)-1,E=0,S=0,k=0,T=i[f++],j=new Int32Array(4096),A=null;;){for(;E<16&&T!==0;)S|=i[f++]<<E,E+=8,T===1?T=i[f++]:--T;if(E<x)break;var C=S&b;if(S>>=x,E-=x,C==m)g=1+p,b=(1<<(x=u+1))-1,A=null;else{if(C==p)break;for(var N=C<g?C:A,V=0,I=N;m<I;)I=j[I]>>8,++V;var G=I;if(_<k+V+(N!==C?1:0))return void console.log("Warning, gif stream longer than expected.");y[k++]=G;var R=k+=V;for(N!==C&&(y[k++]=G),I=N;V--;)I=j[I],y[--R]=255&I,I>>=8;A!==null&&g<4096&&(j[g++]=A<<8|G,b+1<=g&&x<12&&(++x,b=b<<1|1)),A=C}}k!==_&&console.log("Warning, gif stream shorter than expected.")}try{l.GifWriter=o,l.GifReader=function(i){var f=0;if(i[f++]!==71||i[f++]!==73||i[f++]!==70||i[f++]!==56||(i[f++]+1&253)!=56||i[f++]!==97)throw new Error("Invalid GIF 87a/89a header.");var y=i[f++]|i[f++]<<8,_=i[f++]|i[f++]<<8,u=i[f++],m=1<<1+(7&u),p=(i[f++],i[f++],null),g=null,x=(u>>7&&(p=f,f+=3*(g=m)),!0),b=[],E=0,S=null,k=0,T=null;for(this.width=y,this.height=_;x&&f<i.length;)switch(i[f++]){case 33:switch(i[f++]){case 255:if(i[f]!==11||i[f+1]==78&&i[f+2]==69&&i[f+3]==84&&i[f+4]==83&&i[f+5]==67&&i[f+6]==65&&i[f+7]==80&&i[f+8]==69&&i[f+9]==50&&i[f+10]==46&&i[f+11]==48&&i[f+12]==3&&i[f+13]==1&&i[f+16]==0)f+=14,T=i[f++]|i[f++]<<8,f++;else for(f+=12;;){if(!(0<=(A=i[f++])))throw Error("Invalid block size");if(A===0)break;f+=A}break;case 249:if(i[f++]!==4||i[f+4]!==0)throw new Error("Invalid graphics extension block.");var j=i[f++],E=i[f++]|i[f++]<<8,S=i[f++];!(1&j)&&(S=null),k=j>>2&7,f++;break;case 254:for(;;){if(!(0<=(A=i[f++])))throw Error("Invalid block size");if(A===0)break;f+=A}break;default:throw new Error("Unknown graphic control label: 0x"+i[f-1].toString(16))}break;case 44:var A,C=i[f++]|i[f++]<<8,N=i[f++]|i[f++]<<8,V=i[f++]|i[f++]<<8,I=i[f++]|i[f++]<<8,H=i[f++],G=H>>6&1,R=1<<1+(7&H),q=p,M=g,L=!1,H=(H>>7&&(L=!0,q=f,f+=3*(M=R)),f);for(f++;;){if(!(0<=(A=i[f++])))throw Error("Invalid block size");if(A===0)break;f+=A}b.push({x:C,y:N,width:V,height:I,has_local_palette:L,palette_offset:q,palette_size:M,data_offset:H,data_length:f-H,transparent_index:S,interlaced:!!G,delay:E,disposal:k});break;case 59:x=!1;break;default:throw new Error("Unknown gif block: 0x"+i[f-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return T},this.frameInfo=function(O){if(O<0||O>=b.length)throw new Error("Frame index out of range.");return b[O]},this.decodeAndBlitFrameBGRA=function(O,U){for(var O=this.frameInfo(O),J=O.width*O.height,Z=new Uint8Array(J),z=(c(i,O.data_offset,Z,J),O.palette_offset),B=O.transparent_index,D=(B===null&&(B=256),O.width),X=y-D,K=D,re=4*(O.y*y+O.x),se=4*((O.y+O.height)*y+O.x),fe=re,xe=4*X,he=(O.interlaced===!0&&(xe+=4*y*7),8),_e=0,ye=Z.length;_e<ye;++_e){var ue,pe,ke=Z[_e];K===0&&(K=D,se<=(fe+=xe)&&(xe=4*X+4*y*(he-1),fe=re+(D+X)*(he<<1),he>>=1)),ke===B?fe+=4:(ue=i[z+3*ke],pe=i[z+3*ke+1],ke=i[z+3*ke+2],U[fe++]=ke,U[fe++]=pe,U[fe++]=ue,U[fe++]=255),--K}},this.decodeAndBlitFrameRGBA=function(O,U){for(var O=this.frameInfo(O),J=O.width*O.height,Z=new Uint8Array(J),z=(c(i,O.data_offset,Z,J),O.palette_offset),B=O.transparent_index,D=(B===null&&(B=256),O.width),X=y-D,K=D,re=4*(O.y*y+O.x),se=4*((O.y+O.height)*y+O.x),fe=re,xe=4*X,he=(O.interlaced===!0&&(xe+=4*y*7),8),_e=0,ye=Z.length;_e<ye;++_e){var ue,pe,ke=Z[_e];K===0&&(K=D,se<=(fe+=xe)&&(xe=4*X+4*y*(he-1),fe=re+(D+X)*(he<<1),he>>=1)),ke===B?fe+=4:(ue=i[z+3*ke],pe=i[z+3*ke+1],ke=i[z+3*ke+2],U[fe++]=ue,U[fe++]=pe,U[fe++]=ke,U[fe++]=255),--K}}}}catch{}},{}],249:[function(t,a,l){(function(o){var c,i;c=this,i=function(f){function y(Q){if(this==null)throw TypeError();var F,W=String(this),Y=W.length,Q=Q?Number(Q):0;if(!((Q=Q!=Q?0:Q)<0||Y<=Q))return 55296<=(F=W.charCodeAt(Q))&&F<=56319&&Q+1<Y&&56320<=(Y=W.charCodeAt(Q+1))&&Y<=57343?1024*(F-55296)+Y-56320+65536:F}String.prototype.codePointAt||((_=function(){try{var P={},F=Object.defineProperty,W=F(P,P,P)&&F}catch{}return W}())?_(String.prototype,"codePointAt",{value:y,configurable:!0,writable:!0}):String.prototype.codePointAt=y);var _,u=0,m=-3;function p(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(P,F){this.source=P,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=F,this.destLen=0,this.ltree=new p,this.dtree=new p}var x=new p,b=new p,E=new Uint8Array(30),S=new Uint16Array(30),k=new Uint8Array(30),T=new Uint16Array(30),j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A=new p,C=new Uint8Array(320);function N(P,F,W,Y){for(var Q,ie=0;ie<W;++ie)P[ie]=0;for(ie=0;ie<30-W;++ie)P[ie+W]=ie/W|0;for(Q=Y,ie=0;ie<30;++ie)F[ie]=Q,Q+=1<<P[ie]}var V=new Uint16Array(16);function I(P,F,W,Y){for(var Q,ie=0;ie<16;++ie)P.table[ie]=0;for(ie=0;ie<Y;++ie)P.table[F[W+ie]]++;for(ie=Q=P.table[0]=0;ie<16;++ie)V[ie]=Q,Q+=P.table[ie];for(ie=0;ie<Y;++ie)F[W+ie]&&(P.trans[V[F[W+ie]]++]=ie)}function G(P,F,W){if(!F)return W;for(;P.bitcount<24;)P.tag|=P.source[P.sourceIndex++]<<P.bitcount,P.bitcount+=8;var Y=P.tag&65535>>>16-F;return P.tag>>>=F,P.bitcount-=F,Y+W}function R(P,F){for(;P.bitcount<24;)P.tag|=P.source[P.sourceIndex++]<<P.bitcount,P.bitcount+=8;for(var W=0,Y=0,Q=0,ie=P.tag;Y=2*Y+(1&ie),ie>>>=1,W+=F.table[++Q],0<=(Y-=F.table[Q]););return P.tag=ie,P.bitcount-=Q,F.trans[W+Y]}function q(P,F,W){for(;;){var Y=R(P,F);if(Y===256)return u;if(Y<256)P.dest[P.destLen++]=Y;else for(var Q,ie=G(P,E[Y-=257],S[Y]),Y=R(P,W),oe=Q=P.destLen-G(P,k[Y],T[Y]);oe<Q+ie;++oe)P.dest[P.destLen++]=P.dest[oe]}}for(var M=x,L=b,H=0;H<7;++H)M.table[H]=0;for(M.table[7]=24,M.table[8]=152,M.table[9]=112,H=0;H<24;++H)M.trans[H]=256+H;for(H=0;H<144;++H)M.trans[24+H]=H;for(H=0;H<8;++H)M.trans[168+H]=280+H;for(H=0;H<112;++H)M.trans[176+H]=144+H;for(H=0;H<5;++H)L.table[H]=0;for(L.table[5]=32,H=0;H<32;++H)L.trans[H]=H;N(E,S,4,3),N(k,T,2,1),E[28]=0,S[28]=258;var O=function(P,F){var W,Y,Q,ie=new g(P,F);do{switch(Q=void 0,(Y=ie).bitcount--||(Y.tag=Y.source[Y.sourceIndex++],Y.bitcount=7),Q=1&Y.tag,Y.tag>>>=1,Y=Q,G(ie,2,0)){case 0:W=function(Ue){for(var ut,_t;8<Ue.bitcount;)Ue.sourceIndex--,Ue.bitcount-=8;if((ut=256*Ue.source[Ue.sourceIndex+1]+Ue.source[Ue.sourceIndex])!==(65535&~(256*Ue.source[Ue.sourceIndex+3]+Ue.source[Ue.sourceIndex+2])))return m;for(Ue.sourceIndex+=4,_t=ut;_t;--_t)Ue.dest[Ue.destLen++]=Ue.source[Ue.sourceIndex++];return Ue.bitcount=0,u}(ie);break;case 1:W=q(ie,x,b);break;case 2:He=ze=Ye=Ve=oe=Ce=De=Be=Ne=Se=Ee=me=void 0;for(var oe,me=ie,Ee=ie.ltree,Se=ie.dtree,Ne=G(me,5,257),Be=G(me,5,1),De=G(me,4,4),Ce=0;Ce<19;++Ce)C[Ce]=0;for(Ce=0;Ce<De;++Ce){var Ye=G(me,3,0);C[j[Ce]]=Ye}for(I(A,C,0,19),oe=0;oe<Ne+Be;){var ze=R(me,A);switch(ze){case 16:for(var He=C[oe-1],Ve=G(me,2,3);Ve;--Ve)C[oe++]=He;break;case 17:for(Ve=G(me,3,3);Ve;--Ve)C[oe++]=0;break;case 18:for(Ve=G(me,7,11);Ve;--Ve)C[oe++]=0;break;default:C[oe++]=ze}}I(Ee,C,0,Ne),I(Se,C,Ne,Be),W=q(ie,ie.ltree,ie.dtree);break;default:W=m}if(W!==u)throw new Error("Data error")}while(!Y);return ie.destLen<ie.dest.length?typeof ie.dest.slice=="function"?ie.dest.slice(0,ie.destLen):ie.dest.subarray(0,ie.destLen):ie.dest};function U(P,F,W,Y,Q){return Math.pow(1-Q,3)*P+3*Math.pow(1-Q,2)*Q*F+3*(1-Q)*Math.pow(Q,2)*W+Math.pow(Q,3)*Y}function J(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Z(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function z(P){throw new Error(P)}function B(P,F){P||z(F)}J.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},J.prototype.addPoint=function(P,F){typeof P=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=P,this.x2=P),P<this.x1&&(this.x1=P),P>this.x2&&(this.x2=P)),typeof F=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=F,this.y2=F),F<this.y1&&(this.y1=F),F>this.y2&&(this.y2=F))},J.prototype.addX=function(P){this.addPoint(P,null)},J.prototype.addY=function(P){this.addPoint(null,P)},J.prototype.addBezier=function(P,F,W,Y,Q,ie,oe,me){var Ee=[P,F],Se=[W,Y],Ne=[Q,ie],Be=[oe,me];this.addPoint(P,F),this.addPoint(oe,me);for(var De=0;De<=1;De++){var Ce,Ye=6*Ee[De]-12*Se[De]+6*Ne[De],ze=-3*Ee[De]+9*Se[De]-9*Ne[De]+3*Be[De],He=3*Se[De]-3*Ee[De];ze==0?Ye==0||0<(Ce=-He/Ye)&&Ce<1&&(De===0&&this.addX(U(Ee[De],Se[De],Ne[De],Be[De],Ce)),De===1&&this.addY(U(Ee[De],Se[De],Ne[De],Be[De],Ce))):(Ce=Math.pow(Ye,2)-4*He*ze)<0||(0<(He=(-Ye+Math.sqrt(Ce))/(2*ze))&&He<1&&(De===0&&this.addX(U(Ee[De],Se[De],Ne[De],Be[De],He)),De===1&&this.addY(U(Ee[De],Se[De],Ne[De],Be[De],He))),0<(He=(-Ye-Math.sqrt(Ce))/(2*ze))&&He<1&&(De===0&&this.addX(U(Ee[De],Se[De],Ne[De],Be[De],He)),De===1&&this.addY(U(Ee[De],Se[De],Ne[De],Be[De],He))))}},J.prototype.addQuad=function(P,F,W,Y,Q,ie){W=P+2/3*(W-P),Y=F+2/3*(Y-F),this.addBezier(P,F,W,Y,W+1/3*(Q-P),Y+1/3*(ie-F),Q,ie)},Z.prototype.moveTo=function(P,F){this.commands.push({type:"M",x:P,y:F})},Z.prototype.lineTo=function(P,F){this.commands.push({type:"L",x:P,y:F})},Z.prototype.curveTo=Z.prototype.bezierCurveTo=function(P,F,W,Y,Q,ie){this.commands.push({type:"C",x1:P,y1:F,x2:W,y2:Y,x:Q,y:ie})},Z.prototype.quadTo=Z.prototype.quadraticCurveTo=function(P,F,W,Y){this.commands.push({type:"Q",x1:P,y1:F,x:W,y:Y})},Z.prototype.close=Z.prototype.closePath=function(){this.commands.push({type:"Z"})},Z.prototype.extend=function(P){var F;if(P.commands)P=P.commands;else if(P instanceof J)return F=P,this.moveTo(F.x1,F.y1),this.lineTo(F.x2,F.y1),this.lineTo(F.x2,F.y2),this.lineTo(F.x1,F.y2),void this.close();Array.prototype.push.apply(this.commands,P)},Z.prototype.getBoundingBox=function(){for(var P=new J,F=0,W=0,Y=0,Q=0,ie=0;ie<this.commands.length;ie++){var oe=this.commands[ie];switch(oe.type){case"M":P.addPoint(oe.x,oe.y),F=Y=oe.x,W=Q=oe.y;break;case"L":P.addPoint(oe.x,oe.y),Y=oe.x,Q=oe.y;break;case"Q":P.addQuad(Y,Q,oe.x1,oe.y1,oe.x,oe.y),Y=oe.x,Q=oe.y;break;case"C":P.addBezier(Y,Q,oe.x1,oe.y1,oe.x2,oe.y2,oe.x,oe.y),Y=oe.x,Q=oe.y;break;case"Z":Y=F,Q=W;break;default:throw new Error("Unexpected path command "+oe.type)}}return P.isEmpty()&&P.addPoint(0,0),P},Z.prototype.draw=function(P){P.beginPath();for(var F=0;F<this.commands.length;F+=1){var W=this.commands[F];W.type==="M"?P.moveTo(W.x,W.y):W.type==="L"?P.lineTo(W.x,W.y):W.type==="C"?P.bezierCurveTo(W.x1,W.y1,W.x2,W.y2,W.x,W.y):W.type==="Q"?P.quadraticCurveTo(W.x1,W.y1,W.x,W.y):W.type==="Z"&&P.closePath()}this.fill&&(P.fillStyle=this.fill,P.fill()),this.stroke&&(P.strokeStyle=this.stroke,P.lineWidth=this.strokeWidth,P.stroke())},Z.prototype.toPathData=function(P){function F(){for(var ie=arguments,oe="",me=0;me<arguments.length;me+=1){var Ee=ie[me];0<=Ee&&0<me&&(oe+=" "),oe+=(Ee=Ee,Math.round(Ee)===Ee?""+Math.round(Ee):Ee.toFixed(P))}return oe}P=P!==void 0?P:2;for(var W="",Y=0;Y<this.commands.length;Y+=1){var Q=this.commands[Y];Q.type==="M"?W+="M"+F(Q.x,Q.y):Q.type==="L"?W+="L"+F(Q.x,Q.y):Q.type==="C"?W+="C"+F(Q.x1,Q.y1,Q.x2,Q.y2,Q.x,Q.y):Q.type==="Q"?W+="Q"+F(Q.x1,Q.y1,Q.x,Q.y):Q.type==="Z"&&(W+="Z")}return W},Z.prototype.toSVG=function(P){var F=(F='<path d="')+this.toPathData(P)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?F+=' fill="none"':F+=' fill="'+this.fill+'"'),this.stroke&&(F+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),F+="/>"},Z.prototype.toDOMElement=function(F){var F=this.toPathData(F),W=document.createElementNS("http://www.w3.org/2000/svg","path");return W.setAttribute("d",F),W};var D={fail:z,argument:B,assert:B},X={},K={},re={};function se(P){return function(){return P}}K.BYTE=function(P){return D.argument(0<=P&&P<=255,"Byte value should be between 0 and 255."),[P]},re.BYTE=se(1),K.CHAR=function(P){return[P.charCodeAt(0)]},re.CHAR=se(1),K.CHARARRAY=function(P){for(var F=[],W=0;W<P.length;W+=1)F[W]=P.charCodeAt(W);return F},re.CHARARRAY=function(P){return P.length},K.USHORT=function(P){return[P>>8&255,255&P]},re.USHORT=se(2),K.SHORT=function(P){return[(P=32768<=P?-(65536-P):P)>>8&255,255&P]},re.SHORT=se(2),K.UINT24=function(P){return[P>>16&255,P>>8&255,255&P]},re.UINT24=se(3),K.ULONG=function(P){return[P>>24&255,P>>16&255,P>>8&255,255&P]},re.ULONG=se(4),K.LONG=function(P){return[(P=2147483648<=P?-(4294967296-P):P)>>24&255,P>>16&255,P>>8&255,255&P]},re.LONG=se(4),K.FIXED=K.ULONG,re.FIXED=re.ULONG,K.FWORD=K.SHORT,re.FWORD=re.SHORT,K.UFWORD=K.USHORT,re.UFWORD=re.USHORT,K.LONGDATETIME=function(P){return[0,0,0,0,P>>24&255,P>>16&255,P>>8&255,255&P]},re.LONGDATETIME=se(8),K.TAG=function(P){return D.argument(P.length===4,"Tag should be exactly 4 ASCII characters."),[P.charCodeAt(0),P.charCodeAt(1),P.charCodeAt(2),P.charCodeAt(3)]},re.TAG=se(4),K.Card8=K.BYTE,re.Card8=re.BYTE,K.Card16=K.USHORT,re.Card16=re.USHORT,K.OffSize=K.BYTE,re.OffSize=re.BYTE,K.SID=K.USHORT,re.SID=re.USHORT,K.NUMBER=function(P){return-107<=P&&P<=107?[P+139]:108<=P&&P<=1131?[247+((P-=108)>>8),255&P]:-1131<=P&&P<=-108?[251+((P=-P-108)>>8),255&P]:-32768<=P&&P<=32767?K.NUMBER16(P):K.NUMBER32(P)},re.NUMBER=function(P){return K.NUMBER(P).length},K.NUMBER16=function(P){return[28,P>>8&255,255&P]},re.NUMBER16=se(3),K.NUMBER32=function(P){return[29,P>>24&255,P>>16&255,P>>8&255,255&P]},re.NUMBER32=se(5),K.REAL=function(P){for(var F=P.toString(),W=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(F),Y=(W&&(W=parseFloat("1e"+((W[2]?+W[2]:0)+W[1].length)),F=(Math.round(P*W)/W).toString()),""),Q=0,ie=F.length;Q<ie;Q+=1){var oe=F[Q];Y+=oe==="e"?F[++Q]==="-"?"c":"b":oe==="."?"a":oe==="-"?"e":oe}for(var me=[30],Ee=0,Se=(Y+=1&Y.length?"f":"ff").length;Ee<Se;Ee+=2)me.push(parseInt(Y.substr(Ee,2),16));return me},re.REAL=function(P){return K.REAL(P).length},K.NAME=K.CHARARRAY,re.NAME=re.CHARARRAY,K.STRING=K.CHARARRAY,re.STRING=re.CHARARRAY,X.UTF8=function(P,F,W){for(var Y=[],Q=W,ie=0;ie<Q;ie++,F+=1)Y[ie]=P.getUint8(F);return String.fromCharCode.apply(null,Y)},X.UTF16=function(P,F,W){for(var Y=[],Q=W/2,ie=0;ie<Q;ie++,F+=2)Y[ie]=P.getUint16(F);return String.fromCharCode.apply(null,Y)},K.UTF16=function(P){for(var F=[],W=0;W<P.length;W+=1){var Y=P.charCodeAt(W);F[F.length]=Y>>8&255,F[F.length]=255&Y}return F},re.UTF16=function(P){return 2*P.length};var fe,xe={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},he=(X.MACSTRING=function(P,F,W,Y){var Q=xe[Y];if(Q!==void 0){for(var ie="",oe=0;oe<W;oe++){var me=P.getUint8(F+oe);ie+=me<=127?String.fromCharCode(me):Q[127&me]}return ie}},typeof WeakMap=="function"&&new WeakMap);function _e(P){return-128<=P&&P<=127}K.MACSTRING=function(P,F){var W=function(oe){if(!fe)for(var me in fe={},xe)fe[me]=new String(me);var Ee=fe[oe];if(Ee!==void 0){if(he){var Se=he.get(Ee);if(Se!==void 0)return Se}var Ne=xe[oe];if(Ne!==void 0){for(var Be={},De=0;De<Ne.length;De++)Be[Ne.charCodeAt(De)]=De+128;return he&&he.set(Ee,Be),Be}}}(F);if(W!==void 0){for(var Y=[],Q=0;Q<P.length;Q++){var ie=P.charCodeAt(Q);if(128<=ie&&(ie=W[ie])===void 0)return;Y[Q]=ie}return Y}},re.MACSTRING=function(P,F){return P=K.MACSTRING(P,F),P!==void 0?P.length:0},K.VARDELTAS=function(P){for(var Y=0,F=[];Y<P.length;)var W=P[Y],Y=(W===0?function(Q,ie,oe){for(var me=0,Ee=Q.length;ie<Ee&&me<64&&Q[ie]===0;)++ie,++me;return oe.push(128|me-1),ie}:-128<=W&&W<=127?function(Q,ie,oe){for(var me=0,Ee=Q.length,Se=ie;Se<Ee&&me<64;){var Ne=Q[Se];if(!_e(Ne)||Ne===0&&Se+1<Ee&&Q[Se+1]===0)break;++Se,++me}oe.push(me-1);for(var Be=ie;Be<Se;++Be)oe.push(Q[Be]+256&255);return Se}:function(Q,ie,oe){for(var me=0,Ee=Q.length,Se=ie;Se<Ee&&me<64;){var Ne=Q[Se];if(Ne===0||_e(Ne)&&Se+1<Ee&&_e(Q[Se+1]))break;++Se,++me}oe.push(64|me-1);for(var Be=ie;Be<Se;++Be){var De=Q[Be];oe.push(De+65536>>8&255,De+256&255)}return Se})(P,Y,F);return F},K.INDEX=function(P){for(var F=1,W=[F],Y=[],Q=0;Q<P.length;Q+=1){var ie=K.OBJECT(P[Q]);Array.prototype.push.apply(Y,ie),F+=ie.length,W.push(F)}if(Y.length===0)return[0,0];for(var oe=[],me=1+Math.floor(Math.log(F)/Math.log(2))/8|0,Ee=[void 0,K.BYTE,K.USHORT,K.UINT24,K.ULONG][me],Se=0;Se<W.length;Se+=1){var Ne=Ee(W[Se]);Array.prototype.push.apply(oe,Ne)}return Array.prototype.concat(K.Card16(P.length),K.OffSize(me),oe,Y)},re.INDEX=function(P){return K.INDEX(P).length},K.DICT=function(P){for(var F=[],W=Object.keys(P),Y=W.length,Q=0;Q<Y;Q+=1){var ie=parseInt(W[Q],0),oe=P[ie];F=(F=F.concat(K.OPERAND(oe.value,oe.type))).concat(K.OPERATOR(ie))}return F},re.DICT=function(P){return K.DICT(P).length},K.OPERATOR=function(P){return P<1200?[P]:[12,P-1200]},K.OPERAND=function(P,F){var W=[];if(Array.isArray(F))for(var Y=0;Y<F.length;Y+=1)D.argument(P.length===F.length,"Not enough arguments given for type"+F),W=W.concat(K.OPERAND(P[Y],F[Y]));else if(F==="SID")W=W.concat(K.NUMBER(P));else if(F==="offset")W=W.concat(K.NUMBER32(P));else if(F==="number")W=W.concat(K.NUMBER(P));else{if(F!=="real")throw new Error("Unknown operand type "+F);W=W.concat(K.REAL(P))}return W},K.OP=K.BYTE,re.OP=re.BYTE;var ye=typeof WeakMap=="function"&&new WeakMap;function ue(P,F,W){for(var Y=0;Y<F.length;Y+=1){var Q=F[Y];this[Q.name]=Q.value}if(this.tableName=P,this.fields=F,W)for(var ie=Object.keys(W),oe=0;oe<ie.length;oe+=1){var me=ie[oe],Ee=W[me];this[me]!==void 0&&(this[me]=Ee)}}function pe(P,F,W){W===void 0&&(W=F.length);var Y=new Array(F.length+1);Y[0]={name:P+"Count",type:"USHORT",value:W};for(var Q=0;Q<F.length;Q++)Y[Q+1]={name:P+Q,type:"USHORT",value:F[Q]};return Y}function ke(P,F,W){var Y=F.length,Q=new Array(Y+1);Q[0]={name:P+"Count",type:"USHORT",value:Y};for(var ie=0;ie<Y;ie++)Q[ie+1]={name:P+ie,type:"TABLE",value:W(F[ie],ie)};return Q}function Ie(P,F,W){var Y=F.length,Q=[];Q[0]={name:P+"Count",type:"USHORT",value:Y};for(var ie=0;ie<Y;ie++)Q=Q.concat(W(F[ie],ie));return Q}function $(P){P.format===1?ue.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(pe("glyph",P.glyphs))):D.assert(!1,"Can't create coverage table format 2 yet.")}function te(P){ue.call(this,"scriptListTable",Ie("scriptRecord",P,function(F,W){var Y=F.script,Q=Y.defaultLangSys;return D.assert(!!Q,"Unable to write GSUB: script "+F.tag+" has no default language system."),[{name:"scriptTag"+W,type:"TAG",value:F.tag},{name:"script"+W,type:"TABLE",value:new ue("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ue("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Q.reqFeatureIndex}].concat(pe("featureIndex",Q.featureIndexes)))}].concat(Ie("langSys",Y.langSysRecords,function(ie,oe){var me=ie.langSys;return[{name:"langSysTag"+oe,type:"TAG",value:ie.tag},{name:"langSys"+oe,type:"TABLE",value:new ue("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:me.reqFeatureIndex}].concat(pe("featureIndex",me.featureIndexes)))}]})))}]}))}function ne(P){ue.call(this,"featureListTable",Ie("featureRecord",P,function(F,W){var Y=F.feature;return[{name:"featureTag"+W,type:"TAG",value:F.tag},{name:"feature"+W,type:"TABLE",value:new ue("featureTable",[{name:"featureParams",type:"USHORT",value:Y.featureParams}].concat(pe("lookupListIndex",Y.lookupListIndexes)))}]}))}function be(P,F){ue.call(this,"lookupListTable",ke("lookup",P,function(W){var Y=F[W.lookupType];return D.assert(!!Y,"Unable to write GSUB lookup type "+W.lookupType+" tables."),new ue("lookupTable",[{name:"lookupType",type:"USHORT",value:W.lookupType},{name:"lookupFlag",type:"USHORT",value:W.lookupFlag}].concat(ke("subtable",W.subtables,Y)))}))}K.CHARSTRING=function(P){if(ye){var F=ye.get(P);if(F!==void 0)return F}for(var ie=[],W=P.length,Y=0;Y<W;Y+=1)var Q=P[Y],ie=ie.concat(K[Q.type](Q.value));return ye&&ye.set(P,ie),ie},re.CHARSTRING=function(P){return K.CHARSTRING(P).length},K.OBJECT=function(P){var F=K[P.type];return D.argument(F!==void 0,"No encoding function for type "+P.type),F(P.value)},re.OBJECT=function(P){var F=re[P.type];return D.argument(F!==void 0,"No sizeOf function for type "+P.type),F(P.value)},K.TABLE=function(P){for(var F=[],W=P.fields.length,Y=[],Q=[],ie=0;ie<W;ie+=1){var oe=P.fields[ie],Ee=K[oe.type],me=(D.argument(Ee!==void 0,"No encoding function for field type "+oe.type+" ("+oe.name+")"),P[oe.name]),Ee=Ee(me=me===void 0?oe.value:me);oe.type==="TABLE"?(Q.push(F.length),F=F.concat([0,0]),Y.push(Ee)):F=F.concat(Ee)}for(var Se=0;Se<Y.length;Se+=1){var Ne=Q[Se],Be=F.length;D.argument(Be<65536,"Table "+P.tableName+" too big."),F[Ne]=Be>>8,F[Ne+1]=255&Be,F=F.concat(Y[Se])}return F},re.TABLE=function(P){for(var F=0,W=P.fields.length,Y=0;Y<W;Y+=1){var Q=P.fields[Y],ie=re[Q.type],oe=(D.argument(ie!==void 0,"No sizeOf function for field type "+Q.type+" ("+Q.name+")"),P[Q.name]);F+=ie(oe=oe===void 0?Q.value:oe),Q.type==="TABLE"&&(F+=2)}return F},K.RECORD=K.TABLE,re.RECORD=re.TABLE,K.LITERAL=function(P){return P},re.LITERAL=function(P){return P.length},ue.prototype.encode=function(){return K.TABLE(this)},ue.prototype.sizeOf=function(){return re.TABLE(this)};var ve={Table:ue,Record:ue,Coverage:($.prototype=Object.create(ue.prototype)).constructor=$,ScriptList:(te.prototype=Object.create(ue.prototype)).constructor=te,FeatureList:(ne.prototype=Object.create(ue.prototype)).constructor=ne,LookupList:(be.prototype=Object.create(ue.prototype)).constructor=be,ushortList:pe,tableList:ke,recordList:Ie};function je(P,F){return P.getUint8(F)}function Re(P,F){return P.getUint16(F,!1)}function Ge(P,F){return P.getUint32(F,!1)}function Xe(P,F){return P.getInt16(F,!1)+P.getUint16(F+2,!1)/65535}var Ke={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Pe(P,F){this.data=P,this.offset=F,this.relativeOffset=0}Pe.prototype.parseByte=function(){var P=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},Pe.prototype.parseChar=function(){var P=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},Pe.prototype.parseCard8=Pe.prototype.parseByte,Pe.prototype.parseCard16=Pe.prototype.parseUShort=function(){var P=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},Pe.prototype.parseSID=Pe.prototype.parseUShort,Pe.prototype.parseOffset16=Pe.prototype.parseUShort,Pe.prototype.parseShort=function(){var P=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},Pe.prototype.parseF2Dot14=function(){var P=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,P},Pe.prototype.parseOffset32=Pe.prototype.parseULong=function(){var P=Ge(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},Pe.prototype.parseFixed=function(){var P=Xe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},Pe.prototype.parseString=function(P){var F=this.data,W=this.offset+this.relativeOffset,Y="";this.relativeOffset+=P;for(var Q=0;Q<P;Q++)Y+=String.fromCharCode(F.getUint8(W+Q));return Y},Pe.prototype.parseTag=function(){return this.parseString(4)},Pe.prototype.parseLongDateTime=function(){var P=Ge(this.data,this.offset+this.relativeOffset+4);return P-=2082844800,this.relativeOffset+=8,P},Pe.prototype.parseVersion=function(P){var F=Re(this.data,this.offset+this.relativeOffset),W=Re(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,F+W/(P=P===void 0?4096:P)/10},Pe.prototype.skip=function(P,F){this.relativeOffset+=Ke[P]*(F=F===void 0?1:F)},Pe.prototype.parseULongList=function(P){P===void 0&&(P=this.parseULong());for(var F=new Array(P),W=this.data,Y=this.offset+this.relativeOffset,Q=0;Q<P;Q++)F[Q]=W.getUint32(Y),Y+=4;return this.relativeOffset+=4*P,F},Pe.prototype.parseOffset16List=Pe.prototype.parseUShortList=function(P){P===void 0&&(P=this.parseUShort());for(var F=new Array(P),W=this.data,Y=this.offset+this.relativeOffset,Q=0;Q<P;Q++)F[Q]=W.getUint16(Y),Y+=2;return this.relativeOffset+=2*P,F},Pe.prototype.parseShortList=function(P){for(var F=new Array(P),W=this.data,Y=this.offset+this.relativeOffset,Q=0;Q<P;Q++)F[Q]=W.getInt16(Y),Y+=2;return this.relativeOffset+=2*P,F},Pe.prototype.parseByteList=function(P){for(var F=new Array(P),W=this.data,Y=this.offset+this.relativeOffset,Q=0;Q<P;Q++)F[Q]=W.getUint8(Y++);return this.relativeOffset+=P,F},Pe.prototype.parseList=function(P,F){F||(F=P,P=this.parseUShort());for(var W=new Array(P),Y=0;Y<P;Y++)W[Y]=F.call(this);return W},Pe.prototype.parseList32=function(P,F){F||(F=P,P=this.parseULong());for(var W=new Array(P),Y=0;Y<P;Y++)W[Y]=F.call(this);return W},Pe.prototype.parseRecordList=function(P,F){F||(F=P,P=this.parseUShort());for(var W=new Array(P),Y=Object.keys(F),Q=0;Q<P;Q++){for(var ie={},oe=0;oe<Y.length;oe++){var me=Y[oe],Ee=F[me];ie[me]=Ee.call(this)}W[Q]=ie}return W},Pe.prototype.parseRecordList32=function(P,F){F||(F=P,P=this.parseULong());for(var W=new Array(P),Y=Object.keys(F),Q=0;Q<P;Q++){for(var ie={},oe=0;oe<Y.length;oe++){var me=Y[oe],Ee=F[me];ie[me]=Ee.call(this)}W[Q]=ie}return W},Pe.prototype.parseStruct=function(P){if(typeof P=="function")return P.call(this);for(var F=Object.keys(P),W={},Y=0;Y<F.length;Y++){var Q=F[Y],ie=P[Q];W[Q]=ie.call(this)}return W},Pe.prototype.parseValueRecord=function(P){var F;if((P=P===void 0?this.parseUShort():P)!==0)return F={},1&P&&(F.xPlacement=this.parseShort()),2&P&&(F.yPlacement=this.parseShort()),4&P&&(F.xAdvance=this.parseShort()),8&P&&(F.yAdvance=this.parseShort()),16&P&&(F.xPlaDevice=void 0,this.parseShort()),32&P&&(F.yPlaDevice=void 0,this.parseShort()),64&P&&(F.xAdvDevice=void 0,this.parseShort()),128&P&&(F.yAdvDevice=void 0,this.parseShort()),F},Pe.prototype.parseValueRecordList=function(){for(var P=this.parseUShort(),F=this.parseUShort(),W=new Array(F),Y=0;Y<F;Y++)W[Y]=this.parseValueRecord(P);return W},Pe.prototype.parsePointer=function(P){var F=this.parseOffset16();if(0<F)return new Pe(this.data,this.offset+F).parseStruct(P)},Pe.prototype.parsePointer32=function(P){var F=this.parseOffset32();if(0<F)return new Pe(this.data,this.offset+F).parseStruct(P)},Pe.prototype.parseListOfLists=function(P){for(var F=this.parseOffset16List(),W=F.length,Y=this.relativeOffset,Q=new Array(W),ie=0;ie<W;ie++){var oe=F[ie];if(oe===0)Q[ie]=void 0;else if(this.relativeOffset=oe,P){for(var me=this.parseOffset16List(),Ee=new Array(me.length),Se=0;Se<me.length;Se++)this.relativeOffset=oe+me[Se],Ee[Se]=P.call(this);Q[ie]=Ee}else Q[ie]=this.parseUShortList()}return this.relativeOffset=Y,Q},Pe.prototype.parseCoverage=function(){var P=this.offset+this.relativeOffset,F=this.parseUShort(),W=this.parseUShort();if(F===1)return{format:1,glyphs:this.parseUShortList(W)};if(F!==2)throw new Error("0x"+P.toString(16)+": Coverage format must be 1 or 2.");for(var Y=new Array(W),Q=0;Q<W;Q++)Y[Q]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:Y}},Pe.prototype.parseClassDef=function(){var P=this.offset+this.relativeOffset,F=this.parseUShort();if(F===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(F===2)return{format:2,ranges:this.parseRecordList({start:Pe.uShort,end:Pe.uShort,classId:Pe.uShort})};throw new Error("0x"+P.toString(16)+": ClassDef format must be 1 or 2.")},Pe.list=function(P,F){return function(){return this.parseList(P,F)}},Pe.list32=function(P,F){return function(){return this.parseList32(P,F)}},Pe.recordList=function(P,F){return function(){return this.parseRecordList(P,F)}},Pe.recordList32=function(P,F){return function(){return this.parseRecordList32(P,F)}},Pe.pointer=function(P){return function(){return this.parsePointer(P)}},Pe.pointer32=function(P){return function(){return this.parsePointer32(P)}},Pe.tag=Pe.prototype.parseTag,Pe.byte=Pe.prototype.parseByte,Pe.uShort=Pe.offset16=Pe.prototype.parseUShort,Pe.uShortList=Pe.prototype.parseUShortList,Pe.uLong=Pe.offset32=Pe.prototype.parseULong,Pe.uLongList=Pe.prototype.parseULongList,Pe.struct=Pe.prototype.parseStruct,Pe.coverage=Pe.prototype.parseCoverage,Pe.classDef=Pe.prototype.parseClassDef;var We={reserved:Pe.uShort,reqFeatureIndex:Pe.uShort,featureIndexes:Pe.uShortList},Fe=(Pe.prototype.parseScriptList=function(){return this.parsePointer(Pe.recordList({tag:Pe.tag,script:Pe.pointer({defaultLangSys:Pe.pointer(We),langSysRecords:Pe.recordList({tag:Pe.tag,langSys:Pe.pointer(We)})})}))||[]},Pe.prototype.parseFeatureList=function(){return this.parsePointer(Pe.recordList({tag:Pe.tag,feature:Pe.pointer({featureParams:Pe.offset16,lookupListIndexes:Pe.uShortList})}))||[]},Pe.prototype.parseLookupList=function(P){return this.parsePointer(Pe.list(Pe.pointer(function(){var F=this.parseUShort(),W=(D.argument(1<=F&&F<=9,"GPOS/GSUB lookup type "+F+" unknown."),this.parseUShort()),Y=16&W;return{lookupType:F,lookupFlag:W,subtables:this.parseList(Pe.pointer(P[F])),markFilteringSet:Y?this.parseUShort():void 0}})))||[]},Pe.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var P=this.parseUShort(),F=this.parseUShort();return D.argument(P===1&&F<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Pe.offset32,featureTableSubstitutionOffset:Pe.offset32})})||[]},{getByte:je,getCard8:je,getUShort:Re,getCard16:Re,getShort:function(P,F){return P.getInt16(F,!1)},getULong:Ge,getFixed:Xe,getTag:function(P,F){for(var W="",Y=F;Y<F+4;Y+=1)W+=String.fromCharCode(P.getInt8(Y));return W},getOffset:function(P,F,W){for(var Y=0,Q=0;Q<W;Q+=1)Y=(Y<<=8)+P.getUint8(F+Q);return Y},getBytes:function(P,F,W){for(var Y=[],Q=F;Q<W;Q+=1)Y.push(P.getUint8(Q));return Y},bytesToString:function(P){for(var F="",W=0;W<P.length;W+=1)F+=String.fromCharCode(P[W]);return F},Parser:Pe}),de={parse:function(P,F){for(var W={},Y=(W.version=Fe.getUShort(P,F),D.argument(W.version===0,"cmap table version should be 0."),W.numTables=Fe.getUShort(P,F+2),-1),Q=W.numTables-1;0<=Q;--Q){var ie=Fe.getUShort(P,F+4+8*Q),oe=Fe.getUShort(P,F+4+8*Q+2);if(ie===3&&(oe===0||oe===1||oe===10)||ie===0&&(oe===0||oe===1||oe===2||oe===3||oe===4)){Y=Fe.getULong(P,F+4+8*Q+4);break}}if(Y===-1)throw new Error("No valid cmap sub-tables found.");var me=new Fe.Parser(P,F+Y);if(W.format=me.parseUShort(),W.format===12){var Ee,Se=W,Ne=me;Ne.parseUShort(),Se.length=Ne.parseULong(),Se.language=Ne.parseULong(),Se.groupCount=Ee=Ne.parseULong(),Se.glyphIndexMap={};for(var Be=0;Be<Ee;Be+=1)for(var De=Ne.parseULong(),Ce=Ne.parseULong(),Ye=Ne.parseULong(),ze=De;ze<=Ce;ze+=1)Se.glyphIndexMap[ze]=Ye,Ye++}else{if(W.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+W.format+").");var He=W,Ve=P,Ue=F,ut=Y;He.length=me.parseUShort(),He.language=me.parseUShort(),He.segCount=_t=me.parseUShort()>>1,me.skip("uShort",3),He.glyphIndexMap={};for(var _t,dt=new Fe.Parser(Ve,Ue+ut+14),ft=new Fe.Parser(Ve,Ue+ut+16+2*_t),xt=new Fe.Parser(Ve,Ue+ut+16+4*_t),Rt=new Fe.Parser(Ve,Ue+ut+16+6*_t),zt=Ue+ut+16+8*_t,$t=0;$t<_t-1;$t+=1)for(var nr=void 0,sr=dt.parseUShort(),gr=ft.parseUShort(),Nt=xt.parseShort(),Dt=Rt.parseUShort(),Ot=gr;Ot<=sr;Ot+=1)Dt!==0?(zt=(zt=Rt.offset+Rt.relativeOffset-2)+Dt+2*(Ot-gr),(nr=Fe.getUShort(Ve,zt))!==0&&(nr=nr+Nt&65535)):nr=Ot+Nt&65535,He.glyphIndexMap[Ot]=nr}return W},make:function(P){for(var F=!0,W=P.length-1;0<W;--W)if(65535<P.get(W).unicode){console.log("Adding CMAP format 12 (needed!)"),F=!1;break}var Y,Q,ie=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:F?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:F?12:20}],oe=(ie=(ie=F?ie:ie.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new ve.Table("cmap",ie));for(oe.segments=[],W=0;W<P.length;W+=1){for(var me=P.get(W),Ee=0;Ee<me.unicodes.length;Ee+=1)Y=me.unicodes[Ee],Q=W,oe.segments.push({end:Y,start:Y,delta:-(Y-Q),offset:0,glyphIndex:Q});oe.segments=oe.segments.sort(function(Ue,ut){return Ue.start-ut.start})}oe.segments.push({end:65535,start:65535,delta:1,offset:0});var Se=oe.segments.length,Ne=0,Be=[],De=[],Ce=[],Ye=[],ze=[],He=[];for(W=0;W<Se;W+=1){var Ve=oe.segments[W];Ve.end<=65535&&Ve.start<=65535?(Be=Be.concat({name:"end_"+W,type:"USHORT",value:Ve.end}),De=De.concat({name:"start_"+W,type:"USHORT",value:Ve.start}),Ce=Ce.concat({name:"idDelta_"+W,type:"SHORT",value:Ve.delta}),Ye=Ye.concat({name:"idRangeOffset_"+W,type:"USHORT",value:Ve.offset}),Ve.glyphId!==void 0&&(ze=ze.concat({name:"glyph_"+W,type:"USHORT",value:Ve.glyphId}))):Ne+=1,F||Ve.glyphIndex===void 0||(He=(He=(He=He.concat({name:"cmap12Start_"+W,type:"ULONG",value:Ve.start})).concat({name:"cmap12End_"+W,type:"ULONG",value:Ve.end})).concat({name:"cmap12Glyph_"+W,type:"ULONG",value:Ve.glyphIndex}))}return oe.segCountX2=2*(Se-Ne),oe.searchRange=2*Math.pow(2,Math.floor(Math.log(Se-Ne)/Math.log(2))),oe.entrySelector=Math.log(oe.searchRange/2)/Math.log(2),oe.rangeShift=oe.segCountX2-oe.searchRange,oe.fields=oe.fields.concat(Be),oe.fields.push({name:"reservedPad",type:"USHORT",value:0}),oe.fields=oe.fields.concat(De),oe.fields=oe.fields.concat(Ce),oe.fields=oe.fields.concat(Ye),oe.fields=oe.fields.concat(ze),oe.cmap4Length=14+2*Be.length+2+2*De.length+2*Ce.length+2*Ye.length+2*ze.length,F||(ie=16+4*He.length,oe.cmap12Offset=20+oe.cmap4Length,oe.fields=oe.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ie},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:He.length/3}]),oe.fields=oe.fields.concat(He)),oe}},ge=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],we=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Oe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Le(P){this.font=P}function qe(P){this.cmap=P}function Qe(P,F){this.encoding=P,this.charset=F}function rt(P){switch(P.version){case 1:this.names=Oe.slice();break;case 2:this.names=new Array(P.numberOfGlyphs);for(var F=0;F<P.numberOfGlyphs;F++)P.glyphNameIndex[F]<Oe.length?this.names[F]=Oe[P.glyphNameIndex[F]]:this.names[F]=P.names[P.glyphNameIndex[F]-Oe.length];break;case 2.5:this.names=new Array(P.numberOfGlyphs);for(var W=0;W<P.numberOfGlyphs;W++)this.names[W]=Oe[W+P.glyphNameIndex[W]];break;default:this.names=[]}}Le.prototype.charToGlyphIndex=function(P){var F=P.codePointAt(0),W=this.font.glyphs;if(W){for(var Y=0;Y<W.length;Y+=1)for(var Q=W.get(Y),ie=0;ie<Q.unicodes.length;ie+=1)if(Q.unicodes[ie]===F)return Y}return null},qe.prototype.charToGlyphIndex=function(P){return this.cmap.glyphIndexMap[P.codePointAt(0)]||0},Qe.prototype.charToGlyphIndex=function(P){return P=P.codePointAt(0),P=this.encoding[P],this.charset.indexOf(P)},rt.prototype.nameToGlyphIndex=function(P){return this.names.indexOf(P)},rt.prototype.glyphIndexToName=function(P){return this.names[P]};var tt={line:function(P,F,W,Y,Q){P.beginPath(),P.moveTo(F,W),P.lineTo(Y,Q),P.stroke()}};function ot(P){this.bindConstructorValues(P)}function gt(P,F,W){Object.defineProperty(P,F,{get:function(){return P.path,P[W]},set:function(Y){P[W]=Y},enumerable:!0,configurable:!0})}function mt(P,F){if(this.font=P,this.glyphs={},Array.isArray(F))for(var W=0;W<F.length;W++)this.glyphs[W]=F[W];this.length=F&&F.length||0}ot.prototype.bindConstructorValues=function(P){var F;this.index=P.index||0,this.name=P.name||null,this.unicode=P.unicode||void 0,this.unicodes=P.unicodes||P.unicode!==void 0?[P.unicode]:[],P.xMin&&(this.xMin=P.xMin),P.yMin&&(this.yMin=P.yMin),P.xMax&&(this.xMax=P.xMax),P.yMax&&(this.yMax=P.yMax),P.advanceWidth&&(this.advanceWidth=P.advanceWidth),Object.defineProperty(this,"path",(P=P.path,F=P||new Z,{configurable:!0,get:function(){return F=typeof F=="function"?F():F},set:function(W){F=W}}))},ot.prototype.addUnicode=function(P){this.unicodes.length===0&&(this.unicode=P),this.unicodes.push(P)},ot.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ot.prototype.getPath=function(P,F,W,Y,Q){P=P!==void 0?P:0,F=F!==void 0?F:0,W=W!==void 0?W:72;for(var ie,oe,me=(Y=Y||{}).xScale,Ee=Y.yScale,Se=((ie=Y.hinting&&Q&&Q.hinting?this.path&&Q.hinting.exec(this,W):ie)?(oe=Q.hinting.getCommands(ie),P=Math.round(P),F=Math.round(F),me=Ee=1):(oe=this.path.commands,Y=1/this.path.unitsPerEm*W,me===void 0&&(me=Y),Ee===void 0&&(Ee=Y)),new Z),Ne=0;Ne<oe.length;Ne+=1){var Be=oe[Ne];Be.type==="M"?Se.moveTo(P+Be.x*me,F+-Be.y*Ee):Be.type==="L"?Se.lineTo(P+Be.x*me,F+-Be.y*Ee):Be.type==="Q"?Se.quadraticCurveTo(P+Be.x1*me,F+-Be.y1*Ee,P+Be.x*me,F+-Be.y*Ee):Be.type==="C"?Se.curveTo(P+Be.x1*me,F+-Be.y1*Ee,P+Be.x2*me,F+-Be.y2*Ee,P+Be.x*me,F+-Be.y*Ee):Be.type==="Z"&&Se.closePath()}return Se},ot.prototype.getContours=function(){if(this.points===void 0)return[];for(var P=[],F=[],W=0;W<this.points.length;W+=1){var Y=this.points[W];F.push(Y),Y.lastPointOfContour&&(P.push(F),F=[])}return D.argument(F.length===0,"There are still points left in the current contour."),P},ot.prototype.getMetrics=function(){for(var P=this.path.commands,F=[],W=[],Y=0;Y<P.length;Y+=1){var Q=P[Y];Q.type!=="Z"&&(F.push(Q.x),W.push(Q.y)),Q.type!=="Q"&&Q.type!=="C"||(F.push(Q.x1),W.push(Q.y1)),Q.type==="C"&&(F.push(Q.x2),W.push(Q.y2))}var ie={xMin:Math.min.apply(null,F),yMin:Math.min.apply(null,W),xMax:Math.max.apply(null,F),yMax:Math.max.apply(null,W),leftSideBearing:this.leftSideBearing};return isFinite(ie.xMin)||(ie.xMin=0),isFinite(ie.xMax)||(ie.xMax=this.advanceWidth),isFinite(ie.yMin)||(ie.yMin=0),isFinite(ie.yMax)||(ie.yMax=0),ie.rightSideBearing=this.advanceWidth-ie.leftSideBearing-(ie.xMax-ie.xMin),ie},ot.prototype.draw=function(P,F,W,Y,Q){this.getPath(F,W,Y,Q).draw(P)},ot.prototype.drawPoints=function(P,F,W,Y){function Q(Ne,Be,De,Ce){var Ye=2*Math.PI;P.beginPath();for(var ze=0;ze<Ne.length;ze+=1)P.moveTo(Be+Ne[ze].x*Ce,De+Ne[ze].y*Ce),P.arc(Be+Ne[ze].x*Ce,De+Ne[ze].y*Ce,2,0,Ye,!1);P.closePath(),P.fill()}F=F!==void 0?F:0,W=W!==void 0?W:0;for(var Y=1/this.path.unitsPerEm*(Y=Y!==void 0?Y:24),ie=[],oe=[],me=this.path,Ee=0;Ee<me.commands.length;Ee+=1){var Se=me.commands[Ee];Se.x!==void 0&&ie.push({x:Se.x,y:-Se.y}),Se.x1!==void 0&&oe.push({x:Se.x1,y:-Se.y1}),Se.x2!==void 0&&oe.push({x:Se.x2,y:-Se.y2})}P.fillStyle="blue",Q(ie,F,W,Y),P.fillStyle="red",Q(oe,F,W,Y)},ot.prototype.drawMetrics=function(P,F,W,Y){F=F!==void 0?F:0,W=W!==void 0?W:0,Y=1/this.path.unitsPerEm*(Y=Y!==void 0?Y:24),P.lineWidth=1,P.strokeStyle="black",tt.line(P,F,-1e4,F,1e4),tt.line(P,-1e4,W,1e4,W);var Q=this.xMin||0,ie=this.yMin||0,oe=this.xMax||0,me=this.yMax||0,Ee=this.advanceWidth||0;P.strokeStyle="blue",tt.line(P,F+Q*Y,-1e4,F+Q*Y,1e4),tt.line(P,F+oe*Y,-1e4,F+oe*Y,1e4),tt.line(P,-1e4,W+-ie*Y,1e4,W+-ie*Y),tt.line(P,-1e4,W+-me*Y,1e4,W+-me*Y),P.strokeStyle="green",tt.line(P,F+Ee*Y,-1e4,F+Ee*Y,1e4)},mt.prototype.get=function(P){return typeof this.glyphs[P]=="function"&&(this.glyphs[P]=this.glyphs[P]()),this.glyphs[P]},mt.prototype.push=function(P,F){this.glyphs[P]=F,this.length++};var lt={GlyphSet:mt,glyphLoader:function(P,F){return new ot({index:F,font:P})},ttfGlyphLoader:function(P,F,W,Y,Q,ie){return function(){var oe=new ot({index:F,font:P});return oe.path=function(){W(oe,Y,Q);var me=ie(P.glyphs,oe);return me.unitsPerEm=P.unitsPerEm,me},gt(oe,"xMin","_xMin"),gt(oe,"xMax","_xMax"),gt(oe,"yMin","_yMin"),gt(oe,"yMax","_yMax"),oe}},cffGlyphLoader:function(P,F,W,Y){return function(){var Q=new ot({index:F,font:P});return Q.path=function(){var ie=W(P,Q,Y);return ie.unitsPerEm=P.unitsPerEm,ie},Q}}};function vt(P){return P=P.length<1240?107:P.length<33900?1131:32768,P}function pt(P,F,W){var Y,Q=[],ie=[],oe=Fe.getCard16(P,F);if(oe!==0){for(var me=Fe.getByte(P,F+2),Ee=F+(oe+1)*me+2,Se=F+3,Ne=0;Ne<oe+1;Ne+=1)Q.push(Fe.getOffset(P,Se,me)),Se+=me;Y=Ee+Q[oe]}else Y=F+2;for(var Be=0;Be<Q.length-1;Be+=1){var De=Fe.getBytes(P,Ee+Q[Be],Ee+Q[Be+1]);W&&(De=W(De)),ie.push(De)}return{objects:ie,startOffset:F,endOffset:Y}}function It(P,F){if(F===28)return P.parseByte()<<8|P.parseByte();if(F===29)return P.parseByte()<<24|P.parseByte()<<16|P.parseByte()<<8|P.parseByte();if(F===30){for(var W=P,Y="",Q=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var oe=W.parseByte(),ie=oe>>4,oe=15&oe;if(ie==15||(Y+=Q[ie],oe==15))break;Y+=Q[oe]}return parseFloat(Y)}if(32<=F&&F<=246)return F-139;if(247<=F&&F<=250)return 256*(F-247)+P.parseByte()+108;if(251<=F&&F<=254)return 256*-(F-251)-P.parseByte()-108;throw new Error("Invalid b0 "+F)}function Jt(P,F,W){var Y=new Fe.Parser(P,F=F!==void 0?F:0),Q=[],ie=[];for(W=W!==void 0?W:P.length;Y.relativeOffset<W;){var oe=Y.parseByte();oe<=21?(oe===12&&(oe=1200+Y.parseByte()),Q.push([oe,ie]),ie=[]):ie.push(It(Y,oe))}for(var me=Q,Ee={},Se=0;Se<me.length;Se+=1){var Ne=me[Se][0],Be=me[Se][1],De=void 0,De=Be.length===1?Be[0]:Be;if(Ee.hasOwnProperty(Ne)&&!isNaN(Ee[Ne]))throw new Error("Object "+Ee+" already has key "+Ne);Ee[Ne]=De}return Ee}function Ut(P,F){return F=F<=390?ge[F]:P[F-391]}function At(P,F,W){for(var Y,Q={},ie=0;ie<F.length;ie+=1){var oe=F[ie];if(Array.isArray(oe.type)){var me=[];me.length=oe.type.length;for(var Ee=0;Ee<oe.type.length;Ee++)(Y=P[oe.op]!==void 0?P[oe.op][Ee]:void 0)===void 0&&(Y=oe.value!==void 0&&oe.value[Ee]!==void 0?oe.value[Ee]:null),oe.type[Ee]==="SID"&&(Y=Ut(W,Y)),me[Ee]=Y;Q[oe.name]=me}else(Y=P[oe.op])===void 0&&(Y=oe.value!==void 0?oe.value:null),oe.type==="SID"&&(Y=Ut(W,Y)),Q[oe.name]=Y}return Q}var Pt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],kt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function qt(P,F,W,Y){return At(Jt(P,F,W),kt,Y)}function Ht(P,F,W,Y){for(var Q=[],ie=0;ie<W.length;ie+=1){var oe=new DataView(new Uint8Array(W[ie]).buffer),oe=(me=Y,At(Jt(oe,0,oe.byteLength),Pt,me)),me=(oe._subrs=[],oe._subrsBias=0,oe.private[0]),Ee=oe.private[1];me!==0&&Ee!==0&&(me=qt(P,Ee+F,me,Y),oe._defaultWidthX=me.defaultWidthX,oe._nominalWidthX=me.nominalWidthX,me.subrs!==0&&(Ee=pt(P,Ee+me.subrs+F),oe._subrs=Ee.objects,oe._subrsBias=vt(oe._subrs)),oe._privateDict=me),Q.push(oe)}return Q}function Mt(P,F,W){var Y,Q,ie,oe,me,Ee,Se,Ne,Be,De=new Z,Ce=[],Ye=0,ze=!1,He=!1,Ve=0,Ue=0,ut=(Be=(P.isCIDFont?(me=P.tables.cff.topDict._fdSelect[F.index],me=P.tables.cff.topDict._fdArray[me],Ee=me._subrs,Se=me._subrsBias,Ne=me._defaultWidthX,me):(Ee=P.tables.cff.topDict._subrs,Se=P.tables.cff.topDict._subrsBias,Ne=P.tables.cff.topDict._defaultWidthX,P.tables.cff.topDict))._nominalWidthX,Ne);function _t(ft,xt){He&&De.closePath(),De.moveTo(ft,xt),He=!0}function dt(){Ce.length%2==0||ze||(ut=Ce.shift()+Be),Ye+=Ce.length>>1,Ce.length=0,ze=!0}return function ft(xt){for(var Rt,zt,$t,nr,sr,gr,Nt,Dt,Ot,ir,Vt,tr,Lt=0;Lt<xt.length;){var er=xt[Lt];switch(Lt+=1,er){case 1:case 3:dt();break;case 4:1<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),Ue+=Ce.pop(),_t(Ve,Ue);break;case 5:for(;0<Ce.length;)Ve+=Ce.shift(),Ue+=Ce.shift(),De.lineTo(Ve,Ue);break;case 6:for(;0<Ce.length&&(Ve+=Ce.shift(),De.lineTo(Ve,Ue),Ce.length!==0);)Ue+=Ce.shift(),De.lineTo(Ve,Ue);break;case 7:for(;0<Ce.length&&(Ue+=Ce.shift(),De.lineTo(Ve,Ue),Ce.length!==0);)Ve+=Ce.shift(),De.lineTo(Ve,Ue);break;case 8:for(;0<Ce.length;)Y=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+Ce.shift(),De.curveTo(Y,Q,ie,oe,Ve,Ue);break;case 10:sr=Ce.pop()+Se,(gr=Ee[sr])&&ft(gr);break;case 11:return;case 12:switch(er=xt[Lt],Lt+=1,er){case 35:Y=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe+Ce.shift(),Ot=Nt+Ce.shift(),ir=Dt+Ce.shift(),Vt=Ot+Ce.shift(),tr=ir+Ce.shift(),Ve=Vt+Ce.shift(),Ue=tr+Ce.shift(),Ce.shift(),De.curveTo(Y,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;case 34:Y=Ve+Ce.shift(),Q=Ue,ie=Y+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe,Ot=Nt+Ce.shift(),ir=oe,Vt=Ot+Ce.shift(),tr=Ue,Ve=Vt+Ce.shift(),De.curveTo(Y,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;case 36:Y=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe,Ot=Nt+Ce.shift(),ir=oe,Vt=Ot+Ce.shift(),tr=ir+Ce.shift(),Ve=Vt+Ce.shift(),De.curveTo(Y,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;case 37:Y=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe+Ce.shift(),Ot=Nt+Ce.shift(),ir=Dt+Ce.shift(),Vt=Ot+Ce.shift(),tr=ir+Ce.shift(),Math.abs(Vt-Ve)>Math.abs(tr-Ue)?Ve=Vt+Ce.shift():Ue=tr+Ce.shift(),De.curveTo(Y,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;default:console.log("Glyph "+F.index+": unknown operator 1200"+er),Ce.length=0}break;case 14:0<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),He&&(De.closePath(),He=!1);break;case 18:dt();break;case 19:case 20:dt(),Lt+=Ye+7>>3;break;case 21:2<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),Ue+=Ce.pop(),_t(Ve+=Ce.pop(),Ue);break;case 22:1<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),_t(Ve+=Ce.pop(),Ue);break;case 23:dt();break;case 24:for(;2<Ce.length;)Y=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+Ce.shift(),De.curveTo(Y,Q,ie,oe,Ve,Ue);Ve+=Ce.shift(),Ue+=Ce.shift(),De.lineTo(Ve,Ue);break;case 25:for(;6<Ce.length;)Ve+=Ce.shift(),Ue+=Ce.shift(),De.lineTo(Ve,Ue);Y=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+Ce.shift(),De.curveTo(Y,Q,ie,oe,Ve,Ue);break;case 26:for(Ce.length%2&&(Ve+=Ce.shift());0<Ce.length;)Y=Ve,Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ve=ie,Ue=oe+Ce.shift(),De.curveTo(Y,Q,ie,oe,Ve,Ue);break;case 27:for(Ce.length%2&&(Ue+=Ce.shift());0<Ce.length;)Y=Ve+Ce.shift(),Q=Ue,ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe,De.curveTo(Y,Q,ie,oe,Ve,Ue);break;case 28:Rt=xt[Lt],zt=xt[Lt+1],Ce.push((Rt<<24|zt<<16)>>16),Lt+=2;break;case 29:sr=Ce.pop()+P.gsubrsBias,(gr=P.gsubrs[sr])&&ft(gr);break;case 30:for(;0<Ce.length&&(Y=Ve,Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+(Ce.length===1?Ce.shift():0),De.curveTo(Y,Q,ie,oe,Ve,Ue),Ce.length!==0);)Y=Ve+Ce.shift(),Q=Ue,ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ue=oe+Ce.shift(),Ve=ie+(Ce.length===1?Ce.shift():0),De.curveTo(Y,Q,ie,oe,Ve,Ue);break;case 31:for(;0<Ce.length&&(Y=Ve+Ce.shift(),Q=Ue,ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ue=oe+Ce.shift(),Ve=ie+(Ce.length===1?Ce.shift():0),De.curveTo(Y,Q,ie,oe,Ve,Ue),Ce.length!==0);)Y=Ve,Q=Ue+Ce.shift(),ie=Y+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+(Ce.length===1?Ce.shift():0),De.curveTo(Y,Q,ie,oe,Ve,Ue);break;default:er<32?console.log("Glyph "+F.index+": unknown operator "+er):er<247?Ce.push(er-139):er<251?(Rt=xt[Lt],Lt+=1,Ce.push(256*(er-247)+Rt+108)):er<255?(Rt=xt[Lt],Lt+=1,Ce.push(256*-(er-251)-Rt-108)):(Rt=xt[Lt],zt=xt[Lt+1],$t=xt[Lt+2],nr=xt[Lt+3],Lt+=4,Ce.push((Rt<<24|zt<<16|$t<<8|nr)/65536))}}}(W),F.advanceWidth=ut,De}function Zt(P,F){var W,Y=ge.indexOf(P);return 0<=Y&&(W=Y),0<=(Y=F.indexOf(P))?W=Y+ge.length:(W=ge.length+F.length,F.push(P)),W}function Sr(P,F,W){for(var Y={},Q=0;Q<P.length;Q+=1){var ie=P[Q],oe=F[ie.name];oe===void 0||function me(Ee,Se){if(Ee===Se)return 1;if(Array.isArray(Ee)&&Array.isArray(Se)&&Ee.length===Se.length){for(var Ne=0;Ne<Ee.length;Ne+=1)if(!me(Ee[Ne],Se[Ne]))return;return 1}}(oe,ie.value)||(ie.type==="SID"&&(oe=Zt(oe,W)),Y[ie.op]={name:ie.name,type:ie.type,value:oe})}return Y}function Er(P,F){var W=new ve.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return W.dict=Sr(Pt,P,F),W}function kr(P){var F=new ve.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return F.topDicts=[{name:"topDict_0",type:"TABLE",value:P}],F}function Tr(P){for(var F=new ve.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),W=0;W<P.length;W+=1){var Y=P.get(W),Q=function(ie){for(var oe=[],me=ie.path,Ee=(oe.push({name:"width",type:"NUMBER",value:ie.advanceWidth}),0),Se=0,Ne=0;Ne<me.commands.length;Ne+=1){var Be,De,Ce,Ye,ze=void 0,He=void 0,Ve=me.commands[Ne];(Ve=Ve.type==="Q"?{type:"C",x:Ve.x,y:Ve.y,x1:1/3*Ee+2/3*Ve.x1,y1:1/3*Se+2/3*Ve.y1,x2:1/3*Ve.x+2/3*Ve.x1,y2:1/3*Ve.y+2/3*Ve.y1}:Ve).type==="M"?(ze=Math.round(Ve.x-Ee),He=Math.round(Ve.y-Se),oe.push({name:"dx",type:"NUMBER",value:ze}),oe.push({name:"dy",type:"NUMBER",value:He}),oe.push({name:"rmoveto",type:"OP",value:21}),Ee=Math.round(Ve.x),Se=Math.round(Ve.y)):Ve.type==="L"?(ze=Math.round(Ve.x-Ee),He=Math.round(Ve.y-Se),oe.push({name:"dx",type:"NUMBER",value:ze}),oe.push({name:"dy",type:"NUMBER",value:He}),oe.push({name:"rlineto",type:"OP",value:5}),Ee=Math.round(Ve.x),Se=Math.round(Ve.y)):Ve.type==="C"&&(Be=Math.round(Ve.x1-Ee),De=Math.round(Ve.y1-Se),Ce=Math.round(Ve.x2-Ve.x1),Ye=Math.round(Ve.y2-Ve.y1),ze=Math.round(Ve.x-Ve.x2),He=Math.round(Ve.y-Ve.y2),oe.push({name:"dx1",type:"NUMBER",value:Be}),oe.push({name:"dy1",type:"NUMBER",value:De}),oe.push({name:"dx2",type:"NUMBER",value:Ce}),oe.push({name:"dy2",type:"NUMBER",value:Ye}),oe.push({name:"dx",type:"NUMBER",value:ze}),oe.push({name:"dy",type:"NUMBER",value:He}),oe.push({name:"rrcurveto",type:"OP",value:8}),Ee=Math.round(Ve.x),Se=Math.round(Ve.y))}return oe.push({name:"endchar",type:"OP",value:14}),oe}(Y);F.charStrings.push({name:Y.name,type:"CHARSTRING",value:Q})}return F}var lr={parse:function(P,F,W){W.tables.cff={},me=P,Y=F,(Q={}).formatMajor=Fe.getCard8(me,Y),Q.formatMinor=Fe.getCard8(me,Y+1),Q.size=Fe.getCard8(me,Y+2),Q.offsetSize=Fe.getCard8(me,Y+3),Q.startOffset=Y,Q.endOffset=Y+4;var me=pt(P,Q.endOffset,Fe.bytesToString),Y=pt(P,me.endOffset),Q=pt(P,Y.endOffset,Fe.bytesToString),me=pt(P,Q.endOffset);if(W.gsubrs=me.objects,W.gsubrsBias=vt(W.gsubrs),(me=Ht(P,F,Y.objects,Q.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+me.length);if(Y=me[0],(W.tables.cff.topDict=Y)._privateDict&&(W.defaultWidthX=Y._privateDict.defaultWidthX,W.nominalWidthX=Y._privateDict.nominalWidthX),Y.ros[0]!==void 0&&Y.ros[1]!==void 0&&(W.isCIDFont=!0),W.isCIDFont){var me=Y.fdArray,ie=Y.fdSelect;if(me===0||ie===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");me=Ht(P,F,pt(P,me+=F).objects,Q.objects),Y._fdArray=me,Y._fdSelect=function(De,Ce,Ye,ze){var He,Ve=[],Ue=new Fe.Parser(De,Ce);if((De=Ue.parseCard8())===0)for(var ut=0;ut<Ye;ut++){if(ze<=(He=Ue.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+He+" (FD count "+ze+")");Ve.push(He)}else{if(De!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+De);var _t,dt=Ue.parseCard16(),ft=Ue.parseCard16();if(ft!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+ft);for(var xt=0;xt<dt;xt++){if(He=Ue.parseCard8(),_t=Ue.parseCard16(),ze<=He)throw new Error("CFF table CID Font FDSelect has bad FD index value "+He+" (FD count "+ze+")");if(Ye<_t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+_t);for(;ft<_t;ft++)Ve.push(He);ft=_t}if(_t!==Ye)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+_t)}return Ve}(P,ie+=F,W.numGlyphs,me.length)}var ie=F+Y.private[1],me=qt(P,ie,Y.private[0],Q.objects),oe=(W.defaultWidthX=me.defaultWidthX,W.nominalWidthX=me.nominalWidthX,me.subrs!==0?(ie=pt(P,ie+me.subrs),W.subrs=ie.objects,W.subrsBias=vt(W.subrs)):(W.subrs=[],W.subrsBias=0),pt(P,F+Y.charStrings)),me=(W.nGlyphs=oe.objects.length,function(Ne,Be,De,Ce){var Ye=new Fe.Parser(Ne,Be),ze=(--De,[".notdef"]);if((Ne=Ye.parseCard8())===0)for(var He=0;He<De;He+=1)Ve=Ye.parseSID(),ze.push(Ut(Ce,Ve));else if(Ne===1)for(;ze.length<=De;)for(var Ve=Ye.parseSID(),Ue=Ye.parseCard8(),ut=0;ut<=Ue;ut+=1)ze.push(Ut(Ce,Ve)),Ve+=1;else{if(Ne!==2)throw new Error("Unknown charset format "+Ne);for(;ze.length<=De;){Ve=Ye.parseSID(),Ue=Ye.parseCard16();for(var _t=0;_t<=Ue;_t+=1)ze.push(Ut(Ce,Ve)),Ve+=1}}return ze}(P,F+Y.charset,W.nGlyphs,Q.objects));Y.encoding===0?W.cffEncoding=new Qe(ce,me):Y.encoding===1?W.cffEncoding=new Qe(we,me):W.cffEncoding=function(Ne,Be,De){var Ce={},Ye=new Fe.Parser(Ne,Be);if((Ne=Ye.parseCard8())===0)for(var ze=Ye.parseCard8(),He=0;He<ze;He+=1)Ce[Ue=Ye.parseCard8()]=He;else{if(Ne!==1)throw new Error("Unknown encoding format "+Ne);for(var Ve=Ye.parseCard8(),Ue=1,ut=0;ut<Ve;ut+=1)for(var _t=Ye.parseCard8(),dt=Ye.parseCard8(),ft=_t;ft<=_t+dt;ft+=1)Ce[ft]=Ue,Ue+=1}return new Qe(Ce,De)}(P,F+Y.encoding,me),W.encoding=W.encoding||W.cffEncoding,W.glyphs=new lt.GlyphSet(W);for(var Ee=0;Ee<W.nGlyphs;Ee+=1){var Se=oe.objects[Ee];W.glyphs.push(Ee,lt.cffGlyphLoader(W,Ee,Mt,Se))}},make:function(P,Ne){for(var W,Y=new ve.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),Q=1/Ne.unitsPerEm,Q={version:Ne.version,fullName:Ne.fullName,familyName:Ne.familyName,weight:Ne.weightName,fontBBox:Ne.fontBBox||[0,0,0,0],fontMatrix:[Q,0,0,Q,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},ie=[],oe=1;oe<P.length;oe+=1)W=P.get(oe),ie.push(W.name);var me,Ee,Se=[],Ne=(Y.header=new ve.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),Y.nameIndex=function(De){var Ce=new ve.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ce.names=[];for(var Ye=0;Ye<De.length;Ye+=1)Ce.names.push({name:"name_"+Ye,type:"NAME",value:De[Ye]});return Ce}([Ne.postScriptName]),Er(Q,Se)),Be=(Y.topDictIndex=kr(Ne),Y.globalSubrIndex=new ve.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),Y.charsets=function(De,Ce){for(var Ye=new ve.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ze=0;ze<De.length;ze+=1){var He=Zt(De[ze],Ce);Ye.fields.push({name:"glyph_"+ze,type:"SID",value:He})}return Ye}(ie,Se),Y.charStringsIndex=Tr(P),Y.privateDict=(Be={},me=Se,(Ee=new ve.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Sr(kt,Be,me),Ee),Y.stringIndex=function(De){var Ce=new ve.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ce.strings=[];for(var Ye=0;Ye<De.length;Ye+=1)Ce.strings.push({name:"string_"+Ye,type:"STRING",value:De[Ye]});return Ce}(Se),Y.header.sizeOf()+Y.nameIndex.sizeOf()+Y.topDictIndex.sizeOf()+Y.stringIndex.sizeOf()+Y.globalSubrIndex.sizeOf());return Q.charset=Be,Q.encoding=0,Q.charStrings=Q.charset+Y.charsets.sizeOf(),Q.private[1]=Q.charStrings+Y.charStringsIndex.sizeOf(),Ne=Er(Q,Se),Y.topDictIndex=kr(Ne),Y}},Cr={parse:function(Y,F){var W={},Y=new Fe.Parser(Y,F);return W.version=Y.parseVersion(),W.fontRevision=Math.round(1e3*Y.parseFixed())/1e3,W.checkSumAdjustment=Y.parseULong(),W.magicNumber=Y.parseULong(),D.argument(W.magicNumber===1594834165,"Font header has wrong magic number."),W.flags=Y.parseUShort(),W.unitsPerEm=Y.parseUShort(),W.created=Y.parseLongDateTime(),W.modified=Y.parseLongDateTime(),W.xMin=Y.parseShort(),W.yMin=Y.parseShort(),W.xMax=Y.parseShort(),W.yMax=Y.parseShort(),W.macStyle=Y.parseUShort(),W.lowestRecPPEM=Y.parseUShort(),W.fontDirectionHint=Y.parseShort(),W.indexToLocFormat=Y.parseShort(),W.glyphDataFormat=Y.parseShort(),W},make:function(P){var F=Math.round(new Date().getTime()/1e3)+2082844800,W=F;return P.createdTimestamp&&(W=P.createdTimestamp+2082844800),new ve.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:W},{name:"modified",type:"LONGDATETIME",value:F},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],P)}},Ae={parse:function(Y,F){var W={},Y=new Fe.Parser(Y,F);return W.version=Y.parseVersion(),W.ascender=Y.parseShort(),W.descender=Y.parseShort(),W.lineGap=Y.parseShort(),W.advanceWidthMax=Y.parseUShort(),W.minLeftSideBearing=Y.parseShort(),W.minRightSideBearing=Y.parseShort(),W.xMaxExtent=Y.parseShort(),W.caretSlopeRise=Y.parseShort(),W.caretSlopeRun=Y.parseShort(),W.caretOffset=Y.parseShort(),Y.relativeOffset+=8,W.metricDataFormat=Y.parseShort(),W.numberOfHMetrics=Y.parseUShort(),W},make:function(P){return new ve.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],P)}},et={parse:function(P,F,W,Y,Q){for(var ie,oe,me=new Fe.Parser(P,F),Ee=0;Ee<Y;Ee+=1){Ee<W&&(ie=me.parseUShort(),oe=me.parseShort());var Se=Q.get(Ee);Se.advanceWidth=ie,Se.leftSideBearing=oe}},make:function(P){for(var F=new ve.Table("hmtx",[]),W=0;W<P.length;W+=1){var Q=P.get(W),Y=Q.advanceWidth||0,Q=Q.leftSideBearing||0;F.fields.push({name:"advanceWidth_"+W,type:"USHORT",value:Y}),F.fields.push({name:"leftSideBearing_"+W,type:"SHORT",value:Q})}return F}},it={make:function(P){for(var F=new ve.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:P.length}]),W="",Y=12+4*P.length,Q=0;Q<P.length;++Q){var ie=W.indexOf(P[Q]);ie<0&&(ie=W.length,W+=P[Q]),F.fields.push({name:"offset "+Q,type:"USHORT",value:Y+ie}),F.fields.push({name:"length "+Q,type:"USHORT",value:P[Q].length})}return F.fields.push({name:"stringPool",type:"CHARARRAY",value:W}),F},parse:function(P,F){for(var W=new Fe.Parser(P,F),Y=W.parseULong(),Q=(D.argument(Y===1,"Unsupported ltag table version."),W.skip("uLong",1),W.parseULong()),ie=[],oe=0;oe<Q;oe++){for(var me="",Ee=F+W.parseUShort(),Se=W.parseUShort(),Ne=Ee;Ne<Ee+Se;++Ne)me+=String.fromCharCode(P.getInt8(Ne));ie.push(me)}return ie}},Je={parse:function(Y,F){var W={},Y=new Fe.Parser(Y,F);return W.version=Y.parseVersion(),W.numGlyphs=Y.parseUShort(),W.version===1&&(W.maxPoints=Y.parseUShort(),W.maxContours=Y.parseUShort(),W.maxCompositePoints=Y.parseUShort(),W.maxCompositeContours=Y.parseUShort(),W.maxZones=Y.parseUShort(),W.maxTwilightPoints=Y.parseUShort(),W.maxStorage=Y.parseUShort(),W.maxFunctionDefs=Y.parseUShort(),W.maxInstructionDefs=Y.parseUShort(),W.maxStackElements=Y.parseUShort(),W.maxSizeOfInstructions=Y.parseUShort(),W.maxComponentElements=Y.parseUShort(),W.maxComponentDepth=Y.parseUShort()),W},make:function(P){return new ve.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:P}])}},St=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ze={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Tt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},st={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Et="utf-16",at={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Bt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Wt(P,F,W){switch(P){case 0:return Et;case 1:return Bt[W]||at[F];case 3:if(F===1||F===10)return Et}}function Ft(P){var F,W={};for(F in P)W[P[F]]=parseInt(F);return W}function Xt(P,F,W,Y,Q,ie){return new ve.Record("NameRecord",[{name:"platformID",type:"USHORT",value:P},{name:"encodingID",type:"USHORT",value:F},{name:"languageID",type:"USHORT",value:W},{name:"nameID",type:"USHORT",value:Y},{name:"length",type:"USHORT",value:Q},{name:"offset",type:"USHORT",value:ie}])}function Yt(P,F){if((W=function(ie,oe){var me=ie.length,Ee=oe.length-me+1;e:for(var Se=0;Se<Ee;Se++)for(;Se<Ee;Se++){for(var Ne=0;Ne<me;Ne++)if(oe[Se+Ne]!==ie[Ne])continue e;return Se}return-1}(P,F))<0)for(var W=F.length,Y=0,Q=P.length;Y<Q;++Y)F.push(P[Y]);return W}var rr={parse:function(P,F,W){for(var Y={},Q=new Fe.Parser(P,F),F=Q.parseUShort(),ie=Q.parseUShort(),oe=Q.offset+Q.parseUShort(),me=0;me<ie;me++){var Ye=Q.parseUShort(),Ee=Q.parseUShort(),Se=Q.parseUShort(),Ne=Q.parseUShort(),Ne=St[Ne]||Ne,Be=Q.parseUShort(),De=Q.parseUShort(),Ce=function(He,Ve,Ue){switch(He){case 0:if(Ve===65535)return"und";if(Ue)return Ue[Ve];break;case 1:return Ze[Ve];case 3:return st[Ve]}}(Ye,Se,W),Ye=Wt(Ye,Ee,Se);Ye!==void 0&&Ce!==void 0&&(Ee=void 0,(Ee=Ye===Et?X.UTF16(P,oe+De,Be):X.MACSTRING(P,oe+De,Be,Ye))&&((Se=(Se=Y[Ne])===void 0?Y[Ne]={}:Se)[Ce]=Ee))}return F===1&&Q.parseUShort(),Y},make:function(P,F){var W,Y=[],Q={},ie=Ft(St);for(W in P){var oe=ie[W];if(oe===void 0&&(oe=W),De=parseInt(oe),isNaN(De))throw new Error('Name table entry "'+W+'" does not exist, see nameTableNames for complete list.');Q[De]=P[W],Y.push(De)}for(var me=Ft(Ze),Ee=Ft(st),Se=[],Ne=[],Be=0;Be<Y.length;Be++){var De,Ce,Ye=Q[De=Y[Be]];for(Ce in Ye){var ze=Ye[Ce],_t=1,He=me[Ce],Ve=Tt[He],Ue=Wt(_t,Ve,He),Ue=K.MACSTRING(ze,Ue),ut=(Ue===void 0&&(_t=0,(He=F.indexOf(Ce))<0&&(He=F.length,F.push(Ce)),Ve=4,Ue=K.UTF16(ze)),Yt(Ue,Ne)),_t=(Se.push(Xt(_t,Ve,He,De,Ue.length,ut)),Ee[Ce]);_t!==void 0&&(He=Yt(Ve=K.UTF16(ze),Ne),Se.push(Xt(3,1,_t,De,Ve.length,He)))}}Se.sort(function(xt,Rt){return xt.platformID-Rt.platformID||xt.encodingID-Rt.encodingID||xt.languageID-Rt.languageID||xt.nameID-Rt.nameID});for(var dt=new ve.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Se.length},{name:"stringOffset",type:"USHORT",value:6+12*Se.length}]),ft=0;ft<Se.length;ft++)dt.fields.push({name:"record_"+ft,type:"RECORD",value:Se[ft]});return dt.fields.push({name:"strings",type:"LITERAL",value:Ne}),dt}},Qt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Gt={parse:function(P,F){var W={},Y=new Fe.Parser(P,F);W.version=Y.parseUShort(),W.xAvgCharWidth=Y.parseShort(),W.usWeightClass=Y.parseUShort(),W.usWidthClass=Y.parseUShort(),W.fsType=Y.parseUShort(),W.ySubscriptXSize=Y.parseShort(),W.ySubscriptYSize=Y.parseShort(),W.ySubscriptXOffset=Y.parseShort(),W.ySubscriptYOffset=Y.parseShort(),W.ySuperscriptXSize=Y.parseShort(),W.ySuperscriptYSize=Y.parseShort(),W.ySuperscriptXOffset=Y.parseShort(),W.ySuperscriptYOffset=Y.parseShort(),W.yStrikeoutSize=Y.parseShort(),W.yStrikeoutPosition=Y.parseShort(),W.sFamilyClass=Y.parseShort(),W.panose=[];for(var Q=0;Q<10;Q++)W.panose[Q]=Y.parseByte();return W.ulUnicodeRange1=Y.parseULong(),W.ulUnicodeRange2=Y.parseULong(),W.ulUnicodeRange3=Y.parseULong(),W.ulUnicodeRange4=Y.parseULong(),W.achVendID=String.fromCharCode(Y.parseByte(),Y.parseByte(),Y.parseByte(),Y.parseByte()),W.fsSelection=Y.parseUShort(),W.usFirstCharIndex=Y.parseUShort(),W.usLastCharIndex=Y.parseUShort(),W.sTypoAscender=Y.parseShort(),W.sTypoDescender=Y.parseShort(),W.sTypoLineGap=Y.parseShort(),W.usWinAscent=Y.parseUShort(),W.usWinDescent=Y.parseUShort(),1<=W.version&&(W.ulCodePageRange1=Y.parseULong(),W.ulCodePageRange2=Y.parseULong()),2<=W.version&&(W.sxHeight=Y.parseShort(),W.sCapHeight=Y.parseShort(),W.usDefaultChar=Y.parseUShort(),W.usBreakChar=Y.parseUShort(),W.usMaxContent=Y.parseUShort()),W},make:function(P){return new ve.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],P)},unicodeRanges:Qt,getUnicodeRange:function(P){for(var F=0;F<Qt.length;F+=1){var W=Qt[F];if(P>=W.begin&&P<W.end)return F}return-1}},Jr={parse:function(P,F){var W={},Y=new Fe.Parser(P,F);switch(W.version=Y.parseVersion(),W.italicAngle=Y.parseFixed(),W.underlinePosition=Y.parseShort(),W.underlineThickness=Y.parseShort(),W.isFixedPitch=Y.parseULong(),W.minMemType42=Y.parseULong(),W.maxMemType42=Y.parseULong(),W.minMemType1=Y.parseULong(),W.maxMemType1=Y.parseULong(),W.version){case 1:W.names=Oe.slice();break;case 2:W.numberOfGlyphs=Y.parseUShort(),W.glyphNameIndex=new Array(W.numberOfGlyphs);for(var Q=0;Q<W.numberOfGlyphs;Q++)W.glyphNameIndex[Q]=Y.parseUShort();W.names=[];for(var ie,oe=0;oe<W.numberOfGlyphs;oe++)W.glyphNameIndex[oe]>=Oe.length&&(ie=Y.parseChar(),W.names.push(Y.parseString(ie)));break;case 2.5:W.numberOfGlyphs=Y.parseUShort(),W.offset=new Array(W.numberOfGlyphs);for(var me=0;me<W.numberOfGlyphs;me++)W.offset[me]=Y.parseChar()}return W},make:function(){return new ve.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},cr=new Array(9),_r=(cr[1]=function(){var P=this.offset+this.relativeOffset,F=this.parseUShort();return F===1?{substFormat:1,coverage:this.parsePointer(Pe.coverage),deltaGlyphId:this.parseUShort()}:F===2?{substFormat:2,coverage:this.parsePointer(Pe.coverage),substitute:this.parseOffset16List()}:void D.assert(!1,"0x"+P.toString(16)+": lookup type 1 format must be 1 or 2.")},cr[2]=function(){var P=this.parseUShort();return D.argument(P===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),sequences:this.parseListOfLists()}},cr[3]=function(){var P=this.parseUShort();return D.argument(P===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),alternateSets:this.parseListOfLists()}},cr[4]=function(){var P=this.parseUShort();return D.argument(P===1,"GSUB ligature table identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Pe.uShort,lookupListIndex:Pe.uShort});cr[5]=function(){var P,F,W=this.offset+this.relativeOffset,Y=this.parseUShort();return Y===1?{substFormat:Y,coverage:this.parsePointer(Pe.coverage),ruleSets:this.parseListOfLists(function(){var Q=this.parseUShort(),ie=this.parseUShort();return{input:this.parseUShortList(Q-1),lookupRecords:this.parseRecordList(ie,_r)}})}:Y===2?{substFormat:Y,coverage:this.parsePointer(Pe.coverage),classDef:this.parsePointer(Pe.classDef),classSets:this.parseListOfLists(function(){var Q=this.parseUShort(),ie=this.parseUShort();return{classes:this.parseUShortList(Q-1),lookupRecords:this.parseRecordList(ie,_r)}})}:Y===3?(P=this.parseUShort(),F=this.parseUShort(),{substFormat:Y,coverages:this.parseList(P,Pe.pointer(Pe.coverage)),lookupRecords:this.parseRecordList(F,_r)}):void D.assert(!1,"0x"+W.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},cr[6]=function(){var P=this.offset+this.relativeOffset,F=this.parseUShort();return F===1?{substFormat:1,coverage:this.parsePointer(Pe.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(_r)}})}:F===2?{substFormat:2,coverage:this.parsePointer(Pe.coverage),backtrackClassDef:this.parsePointer(Pe.classDef),inputClassDef:this.parsePointer(Pe.classDef),lookaheadClassDef:this.parsePointer(Pe.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(_r)}})}:F===3?{substFormat:3,backtrackCoverage:this.parseList(Pe.pointer(Pe.coverage)),inputCoverage:this.parseList(Pe.pointer(Pe.coverage)),lookaheadCoverage:this.parseList(Pe.pointer(Pe.coverage)),lookupRecords:this.parseRecordList(_r)}:void D.assert(!1,"0x"+P.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},cr[7]=function(){var P=this.parseUShort(),P=(D.argument(P===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),F=new Pe(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:P,extension:cr[P].call(F)}},cr[8]=function(){var P=this.parseUShort();return D.argument(P===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),backtrackCoverage:this.parseList(Pe.pointer(Pe.coverage)),lookaheadCoverage:this.parseList(Pe.pointer(Pe.coverage)),substitutes:this.parseUShortList()}};var Mr=new Array(9);Mr[1]=function(P){return P.substFormat===1?new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)},{name:"deltaGlyphID",type:"USHORT",value:P.deltaGlyphId}]):new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)}].concat(ve.ushortList("substitute",P.substitute)))},Mr[3]=function(P){return D.assert(P.substFormat===1,"Lookup type 3 substFormat must be 1."),new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)}].concat(ve.tableList("altSet",P.alternateSets,function(F){return new ve.Table("alternateSetTable",ve.ushortList("alternate",F))})))},Mr[4]=function(P){return D.assert(P.substFormat===1,"Lookup type 4 substFormat must be 1."),new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)}].concat(ve.tableList("ligSet",P.ligatureSets,function(F){return new ve.Table("ligatureSetTable",ve.tableList("ligature",F,function(W){return new ve.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:W.ligGlyph}].concat(ve.ushortList("component",W.components,W.components.length+1)))}))})))};var Ir={parse:function(P,F){return F=(P=new Pe(P,F=F||0)).parseVersion(1),D.argument(F===1||F===1.1,"Unsupported GSUB table version."),F===1?{version:F,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(cr)}:{version:F,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(cr),variations:P.parseFeatureVariationsList()}},make:function(P){return new ve.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ve.ScriptList(P.scripts)},{name:"features",type:"TABLE",value:new ve.FeatureList(P.features)},{name:"lookups",type:"TABLE",value:new ve.LookupList(P.lookups,Mr)}])}},Qr={parse:function(P,F){for(var W=new Fe.Parser(P,F),Y=W.parseULong(),Q=(D.argument(Y===1,"Unsupported META table version."),W.parseULong(),W.parseULong(),W.parseULong()),ie={},oe=0;oe<Q;oe++){var me=W.parseTag(),Se=W.parseULong(),Ee=W.parseULong(),Se=X.UTF8(P,F+Se,Ee);ie[me]=Se}return ie},make:function(P){var F,W=Object.keys(P).length,Y="",Q=16+12*W,ie=new ve.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:Q},{name:"numTags",type:"ULONG",value:W}]);for(F in P){var oe=Y.length;Y+=P[F],ie.fields.push({name:"tag "+F,type:"TAG",value:F}),ie.fields.push({name:"offset "+F,type:"ULONG",value:Q+oe}),ie.fields.push({name:"length "+F,type:"ULONG",value:P[F].length})}return ie.fields.push({name:"stringPool",type:"CHARARRAY",value:Y}),ie}};function en(P){return Math.log(P)/Math.log(2)|0}function Or(P){for(;P.length%4!=0;)P.push(0);for(var F=0,W=0;W<P.length;W+=4)F+=(P[W]<<24)+(P[W+1]<<16)+(P[W+2]<<8)+P[W+3];return F%=Math.pow(2,32)}function Ar(P,F,W,Y){return new ve.Record("Table Record",[{name:"tag",type:"TAG",value:P!==void 0?P:""},{name:"checkSum",type:"ULONG",value:F!==void 0?F:0},{name:"offset",type:"ULONG",value:W!==void 0?W:0},{name:"length",type:"ULONG",value:Y!==void 0?Y:0}])}function br(P){for(var F=new ve.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),W=(F.tables=P,F.numTables=P.length,Math.pow(2,en(F.numTables))),Y=(F.searchRange=16*W,F.entrySelector=en(W),F.rangeShift=16*F.numTables-F.searchRange,[]),Q=[],ie=F.sizeOf()+Ar().sizeOf()*F.numTables;ie%4!=0;)ie+=1,Q.push({name:"padding",type:"BYTE",value:0});for(var oe=0;oe<P.length;oe+=1){var me=P[oe],Ee=(D.argument(me.tableName.length===4,"Table name"+me.tableName+" is invalid."),me.sizeOf()),Se=Ar(me.tableName,Or(me.encode()),ie,Ee);for(Y.push({name:Se.tag+" Table Record",type:"RECORD",value:Se}),Q.push({name:me.tableName+" table",type:"RECORD",value:me}),ie+=Ee,D.argument(!isNaN(ie),"Something went wrong calculating the offset.");ie%4!=0;)ie+=1,Q.push({name:"padding",type:"BYTE",value:0})}return Y.sort(function(Ne,Be){return Ne.value.tag>Be.value.tag?1:-1}),F.fields=F.fields.concat(Y),F.fields=F.fields.concat(Q),F}function tn(P,F,W){for(var Y=0;Y<F.length;Y+=1){var Q=P.charToGlyphIndex(F[Y]);if(0<Q)return P.glyphs.get(Q).getMetrics()}return W}var jr={make:br,fontToTable:function(P){for(var F,W=[],Y=[],Q=[],ie=[],oe=[],me=[],Ee=[],Se=0,Ne=0,Be=0,De=0,Ce=0,Ye=0;Ye<P.glyphs.length;Ye+=1){var ze=P.glyphs.get(Ye),He=0|ze.unicode;if(isNaN(ze.advanceWidth))throw new Error("Glyph "+ze.name+" ("+Ye+"): advanceWidth is not a number.");(He<F||F===void 0)&&0<He&&(F=He),Se<He&&(Se=He);var He=Gt.getUnicodeRange(He);if(He<32)Ne|=1<<He;else if(He<64)Be|=1<<He-32;else if(He<96)De|=1<<He-64;else{if(!(He<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ce|=1<<He-96}ze.name!==".notdef"&&(He=ze.getMetrics(),W.push(He.xMin),Y.push(He.yMin),Q.push(He.xMax),ie.push(He.yMax),me.push(He.leftSideBearing),Ee.push(He.rightSideBearing),oe.push(ze.advanceWidth))}var Ve,Ue={xMin:Math.min.apply(null,W),yMin:Math.min.apply(null,Y),xMax:Math.max.apply(null,Q),yMax:Math.max.apply(null,ie),advanceWidthMax:Math.max.apply(null,oe),advanceWidthAvg:function(er){for(var Kr=0,Br=0;Br<er.length;Br+=1)Kr+=er[Br];return Kr/er.length}(oe),minLeftSideBearing:Math.min.apply(null,me),maxLeftSideBearing:Math.max.apply(null,me),minRightSideBearing:Math.min.apply(null,Ee)},ut=(Ue.ascender=P.ascender,Ue.descender=P.descender,Cr.make({flags:3,unitsPerEm:P.unitsPerEm,xMin:Ue.xMin,yMin:Ue.yMin,xMax:Ue.xMax,yMax:Ue.yMax,lowestRecPPEM:3,createdTimestamp:P.createdTimestamp})),_t=Ae.make({ascender:Ue.ascender,descender:Ue.descender,advanceWidthMax:Ue.advanceWidthMax,minLeftSideBearing:Ue.minLeftSideBearing,minRightSideBearing:Ue.minRightSideBearing,xMaxExtent:Ue.maxLeftSideBearing+(Ue.xMax-Ue.xMin),numberOfHMetrics:P.glyphs.length}),dt=Je.make(P.glyphs.length),ft=Gt.make({xAvgCharWidth:Math.round(Ue.advanceWidthAvg),usWeightClass:P.tables.os2.usWeightClass,usWidthClass:P.tables.os2.usWidthClass,usFirstCharIndex:F,usLastCharIndex:Se,ulUnicodeRange1:Ne,ulUnicodeRange2:Be,ulUnicodeRange3:De,ulUnicodeRange4:Ce,fsSelection:P.tables.os2.fsSelection,sTypoAscender:Ue.ascender,sTypoDescender:Ue.descender,sTypoLineGap:0,usWinAscent:Ue.yMax,usWinDescent:Math.abs(Ue.yMin),ulCodePageRange1:1,sxHeight:tn(P,"xyvw",{yMax:Math.round(Ue.ascender/2)}).yMax,sCapHeight:tn(P,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ue).yMax,usDefaultChar:P.hasChar(" ")?32:0,usBreakChar:P.hasChar(" ")?32:0}),xt=et.make(P.glyphs),Rt=de.make(P.glyphs),Dt=P.getEnglishName("fontFamily"),Ot=P.getEnglishName("fontSubfamily"),Nt=Dt+" "+Ot,zt=(zt=P.getEnglishName("postScriptName"))||Dt.replace(/\s/g,"")+"-"+Ot,$t={};for(Ve in P.names)$t[Ve]=P.names[Ve];$t.uniqueID||($t.uniqueID={en:P.getEnglishName("manufacturer")+":"+Nt}),$t.postScriptName||($t.postScriptName={en:zt}),$t.preferredFamily||($t.preferredFamily=P.names.fontFamily),$t.preferredSubfamily||($t.preferredSubfamily=P.names.fontSubfamily);var sr=[],nr=rr.make($t,sr),sr=0<sr.length?it.make(sr):void 0,gr=Jr.make(),Nt=lr.make(P.glyphs,{version:P.getEnglishName("version"),fullName:Nt,familyName:Dt,weightName:Ot,postScriptName:zt,unitsPerEm:P.unitsPerEm,fontBBox:[0,Ue.yMin,Ue.ascender,Ue.advanceWidthMax]}),Dt=P.metas&&0<Object.keys(P.metas).length?Qr.make(P.metas):void 0,Ot=[ut,_t,dt,ft,nr,Rt,gr,Nt,xt];sr&&Ot.push(sr),P.tables.gsub&&Ot.push(Ir.make(P.tables.gsub)),Dt&&Ot.push(Dt);for(var ir=Or((zt=br(Ot)).encode()),Vt=zt.fields,tr=!1,Lt=0;Lt<Vt.length;Lt+=1)if(Vt[Lt].name==="head table"){Vt[Lt].value.checkSumAdjustment=2981146554-ir,tr=!0;break}if(tr)return zt;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Or};function Ur(P,F){for(var W=0,Y=P.length-1;W<=Y;){var Q=W+Y>>>1,ie=P[Q].tag;if(ie===F)return Q;ie<F?W=1+Q:Y=Q-1}return-W-1}function rn(P,F){for(var W=0,Y=P.length-1;W<=Y;){var Q=W+Y>>>1,ie=P[Q];if(ie===F)return Q;ie<F?W=1+Q:Y=Q-1}return-W-1}function nn(P,F){for(var W=0,Y=P.length-1;W<=Y;){var Q,ie=W+Y>>>1,oe=(Q=P[ie]).start;if(oe===F)return Q;oe<F?W=1+ie:Y=ie-1}if(0<W)return F>(Q=P[W-1]).end?0:Q}function Nr(P,F){this.font=P,this.tableName=F}function Rr(P){Nr.call(this,P,"gpos")}function hr(P){Nr.call(this,P,"gsub")}function sn(P,F,W){for(var Y=P.subtables,Q=0;Q<Y.length;Q++){var ie=Y[Q];if(ie.substFormat===F)return ie}if(W)return Y.push(W),W}function Dr(P){for(var F=new ArrayBuffer(P.length),W=new Uint8Array(F),Y=0;Y<P.length;++Y)W[Y]=P[Y];return F}function ar(P,F){if(!P)throw F}function on(P,F,W,Y,Q){var ie=0<(F&Y)?(ie=P.parseByte(),W+(ie=F&Q?ie:-ie)):0<(F&Q)?W:W+P.parseShort();return ie}function kn(P,F,W){var Y,Q=new Fe.Parser(F,W);if(P.numberOfContours=Q.parseShort(),P._xMin=Q.parseShort(),P._yMin=Q.parseShort(),P._xMax=Q.parseShort(),P._yMax=Q.parseShort(),0<P.numberOfContours){for(var ie=P.endPointIndices=[],oe=0;oe<P.numberOfContours;oe+=1)ie.push(Q.parseUShort());P.instructionLength=Q.parseUShort(),P.instructions=[];for(var me=0;me<P.instructionLength;me+=1)P.instructions.push(Q.parseByte());for(var Ee=ie[ie.length-1]+1,Se=[],Ne=0;Ne<Ee;Ne+=1)if(Y=Q.parseByte(),Se.push(Y),0<(8&Y))for(var Be=Q.parseByte(),De=0;De<Be;De+=1)Se.push(Y),Ne+=1;if(D.argument(Se.length===Ee,"Bad flags."),0<ie.length){var Ce,Ye=[];if(0<Ee){for(var ze=0;ze<Ee;ze+=1)Y=Se[ze],(Ce={}).onCurve=!!(1&Y),Ce.lastPointOfContour=0<=ie.indexOf(ze),Ye.push(Ce);for(var He=0,Ve=0;Ve<Ee;Ve+=1)Y=Se[Ve],(Ce=Ye[Ve]).x=on(Q,Y,He,2,16),He=Ce.x;for(var Ue=0,ut=0;ut<Ee;ut+=1)Y=Se[ut],(Ce=Ye[ut]).y=on(Q,Y,Ue,4,32),Ue=Ce.y}P.points=Ye}else P.points=[]}else if(P.numberOfContours===0)P.points=[];else{P.isComposite=!0,P.points=[],P.components=[];for(var _t=!0;_t;){Se=Q.parseUShort();var dt={glyphIndex:Q.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Se)?0<(2&Se)?(dt.dx=Q.parseShort(),dt.dy=Q.parseShort()):dt.matchedPoints=[Q.parseUShort(),Q.parseUShort()]:0<(2&Se)?(dt.dx=Q.parseChar(),dt.dy=Q.parseChar()):dt.matchedPoints=[Q.parseByte(),Q.parseByte()],0<(8&Se)?dt.xScale=dt.yScale=Q.parseF2Dot14():0<(64&Se)?(dt.xScale=Q.parseF2Dot14(),dt.yScale=Q.parseF2Dot14()):0<(128&Se)&&(dt.xScale=Q.parseF2Dot14(),dt.scale01=Q.parseF2Dot14(),dt.scale10=Q.parseF2Dot14(),dt.yScale=Q.parseF2Dot14()),P.components.push(dt),_t=!!(32&Se)}if(256&Se){P.instructionLength=Q.parseUShort(),P.instructions=[];for(var ft=0;ft<P.instructionLength;ft+=1)P.instructions.push(Q.parseByte())}}}function Gr(P,F){for(var W=[],Y=0;Y<P.length;Y+=1){var Q=P[Y],Q={x:F.xScale*Q.x+F.scale01*Q.y+F.dx,y:F.scale10*Q.x+F.yScale*Q.y+F.dy,onCurve:Q.onCurve,lastPointOfContour:Q.lastPointOfContour};W.push(Q)}return W}function an(P){var F=new Z;if(P)for(var W=function(Be){for(var De=[],Ce=[],Ye=0;Ye<Be.length;Ye+=1){var ze=Be[Ye];Ce.push(ze),ze.lastPointOfContour&&(De.push(Ce),Ce=[])}return D.argument(Ce.length===0,"There are still points left in the current contour."),De}(P),Y=0;Y<W.length;++Y){var Q,ie=W[Y],oe=ie[ie.length-1],me=ie[0];oe.onCurve?F.moveTo(oe.x,oe.y):me.onCurve?F.moveTo(me.x,me.y):(Q={x:.5*(oe.x+me.x),y:.5*(oe.y+me.y)},F.moveTo(Q.x,Q.y));for(var Ee=0;Ee<ie.length;++Ee){var Se,Ne=oe,oe=me,me=ie[(Ee+1)%ie.length];oe.onCurve?F.lineTo(oe.x,oe.y):(Se=me,Ne.onCurve||(oe.x,Ne.x,oe.y,Ne.y),me.onCurve||(Se={x:.5*(oe.x+me.x),y:.5*(oe.y+me.y)}),F.quadraticCurveTo(oe.x,oe.y,Se.x,Se.y))}F.closePath()}return F}function ln(P,F){if(F.isComposite)for(var W=0;W<F.components.length;W+=1){var Y=F.components[W],Q=P.get(Y.glyphIndex);if(Q.getPath(),Q.points){var ie=void 0;if(Y.matchedPoints===void 0)ie=Gr(Q.points,Y);else{if(Y.matchedPoints[0]>F.points.length-1||Y.matchedPoints[1]>Q.points.length-1)throw Error("Matched points out of range in "+F.name);var oe=F.points[Y.matchedPoints[0]],me=Q.points[Y.matchedPoints[1]],Y={xScale:Y.xScale,scale01:Y.scale01,scale10:Y.scale10,yScale:Y.yScale,dx:0,dy:0},me=Gr([me],Y)[0];Y.dx=oe.x-me.x,Y.dy=oe.y-me.y,ie=Gr(Q.points,Y)}F.points=F.points.concat(ie)}}return an(F.points)}(Rr.prototype=Nr.prototype={searchTag:Ur,binSearch:rn,getTable:function(P){var F=this.font.tables[this.tableName];return F=!F&&P?this.font.tables[this.tableName]=this.createDefaultTable():F},getScriptNames:function(){var P=this.getTable();return P?P.scripts.map(function(F){return F.tag}):[]},getDefaultScriptName:function(){var P=this.getTable();if(P){for(var F=!1,W=0;W<P.scripts.length;W++){var Y=P.scripts[W].tag;if(Y==="DFLT")return Y;Y==="latn"&&(F=!0)}return F?"latn":void 0}},getScriptTable:function(P,F){var W,Y=this.getTable(F);if(Y)return W=Y.scripts,0<=(Y=Ur(Y.scripts,P=P||"DFLT"))?W[Y].script:F?(W.splice(-1-Y,0,F={tag:P,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),F.script):void 0},getLangSysTable:function(Q,F,W){var Y,Q=this.getScriptTable(Q,W);if(Q)return F&&F!=="dflt"&&F!=="DFLT"?0<=(Y=Ur(Q.langSysRecords,F))?Q.langSysRecords[Y].langSys:W?(Q.langSysRecords.splice(-1-Y,0,W={tag:F,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),W.langSys):void 0:Q.defaultLangSys},getFeatureTable:function(P,F,W,Y){if(P=this.getLangSysTable(P,F,Y),P){for(var Q,ie=P.featureIndexes,oe=this.font.tables[this.tableName].features,me=0;me<ie.length;me++)if((Q=oe[ie[me]]).tag===W)return Q.feature;if(Y)return F=oe.length,D.assert(F===0||W>=oe[F-1].tag,"Features must be added in alphabetical order."),oe.push(Q={tag:W,feature:{params:0,lookupListIndexes:[]}}),ie.push(F),Q.feature}},getLookupTables:function(ie,F,W,Y,Q){var ie=this.getFeatureTable(ie,F,W,Q),oe=[];if(ie){for(var me,Ee=ie.lookupListIndexes,Se=this.font.tables[this.tableName].lookups,Ne=0;Ne<Ee.length;Ne++)(me=Se[Ee[Ne]]).lookupType===Y&&oe.push(me);if(oe.length===0&&Q)return F=Se.length,Se.push(me={lookupType:Y,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Ee.push(F),[me]}return oe},getGlyphClass:function(P,F){switch(P.format){case 1:return P.startGlyph<=F&&F<P.startGlyph+P.classes.length?P.classes[F-P.startGlyph]:0;case 2:var W=nn(P.ranges,F);return W?W.classId:0}},getCoverageIndex:function(P,F){switch(P.format){case 1:var W=rn(P.glyphs,F);return 0<=W?W:-1;case 2:return W=nn(P.ranges,F),W?W.index+F-W.start:-1}},expandCoverage:function(P){if(P.format===1)return P.glyphs;for(var F=[],W=P.ranges,Y=0;Y<W.length;Y++)for(var Q=W[Y],ie=Q.start,oe=Q.end,me=ie;me<=oe;me++)F.push(me);return F}}).init=function(){var P=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(P)},Rr.prototype.getKerningValue=function(P,F,W){for(var Y=0;Y<P.length;Y++)for(var Q=P[Y].subtables,ie=0;ie<Q.length;ie++){var oe=Q[ie],me=this.getCoverageIndex(oe.coverage,F);if(!(me<0))switch(oe.posFormat){case 1:for(var Ee=oe.pairSets[me],Se=0;Se<Ee.length;Se++){var Ne=Ee[Se];if(Ne.secondGlyph===W)return Ne.value1&&Ne.value1.xAdvance||0}break;case 2:var De=this.getGlyphClass(oe.classDef1,F),Be=this.getGlyphClass(oe.classDef2,W),De=oe.classRecords[De][Be];return De.value1&&De.value1.xAdvance||0}}return 0},Rr.prototype.getKerningTables=function(P,F){if(this.font.tables.gpos)return this.getLookupTables(P,F,"kern",2)},(hr.prototype=Nr.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},hr.prototype.getSingle=function(P,F,W){for(var Y=[],Q=this.getLookupTables(F,W,P,1),ie=0;ie<Q.length;ie++)for(var oe=Q[ie].subtables,me=0;me<oe.length;me++){var Ee=oe[me],Se=this.expandCoverage(Ee.coverage),Ne=void 0;if(Ee.substFormat===1)for(var Be=Ee.deltaGlyphId,Ne=0;Ne<Se.length;Ne++){var De=Se[Ne];Y.push({sub:De,by:De+Be})}else{var Ce=Ee.substitute;for(Ne=0;Ne<Se.length;Ne++)Y.push({sub:Se[Ne],by:Ce[Ne]})}}return Y},hr.prototype.getAlternates=function(P,F,W){for(var Y=[],Q=this.getLookupTables(F,W,P,3),ie=0;ie<Q.length;ie++)for(var oe=Q[ie].subtables,me=0;me<oe.length;me++)for(var Ee=oe[me],Se=this.expandCoverage(Ee.coverage),Ne=Ee.alternateSets,Be=0;Be<Se.length;Be++)Y.push({sub:Se[Be],by:Ne[Be]});return Y},hr.prototype.getLigatures=function(P,F,W){for(var Y=[],Q=this.getLookupTables(F,W,P,4),ie=0;ie<Q.length;ie++)for(var oe=Q[ie].subtables,me=0;me<oe.length;me++)for(var Ee=oe[me],Se=this.expandCoverage(Ee.coverage),Ne=Ee.ligatureSets,Be=0;Be<Se.length;Be++)for(var De=Se[Be],Ce=Ne[Be],Ye=0;Ye<Ce.length;Ye++){var ze=Ce[Ye];Y.push({sub:[De].concat(ze.components),by:ze.ligGlyph})}return Y},hr.prototype.addSingle=function(P,F,W,Y){W=sn(this.getLookupTables(W,Y,P,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),D.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),Y=F.sub,P=this.binSearch(W.coverage.glyphs,Y),P<0&&(W.coverage.glyphs.splice(P=-1-P,0,Y),W.substitute.splice(P,0,0)),W.substitute[P]=F.by},hr.prototype.addAlternate=function(P,F,W,Y){W=sn(this.getLookupTables(W,Y,P,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),D.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),Y=F.sub,P=this.binSearch(W.coverage.glyphs,Y),P<0&&(W.coverage.glyphs.splice(P=-1-P,0,Y),W.alternateSets.splice(P,0,0)),W.alternateSets[P]=F.by},hr.prototype.addLigature=function(ie,Ee,me,Q){var me=this.getLookupTables(me,Q,ie,4,!0)[0],Q=me.subtables[0],ie=(Q||(me.subtables[0]=Q={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),D.assert(Q.coverage.format===1,"Ligature: unable to modify coverage table format "+Q.coverage.format),Ee.sub[0]),oe=Ee.sub.slice(1),me={ligGlyph:Ee.by,components:oe},Ee=this.binSearch(Q.coverage.glyphs,ie);if(0<=Ee){for(var Se=Q.ligatureSets[Ee],Ne=0;Ne<Se.length;Ne++)if(function(Be,De){var Ce=Be.length;if(Ce===De.length){for(var Ye=0;Ye<Ce;Ye++)if(Be[Ye]!==De[Ye])return;return 1}}(Se[Ne].components,oe))return;Se.push(me)}else Q.coverage.glyphs.splice(Ee=-1-Ee,0,ie),Q.ligatureSets.splice(Ee,0,[me])},hr.prototype.getFeature=function(P,F,W){if(/ss\d\d/.test(P))return this.getSingle(P,F,W);switch(P){case"aalt":case"salt":return this.getSingle(P,F,W).concat(this.getAlternates(P,F,W));case"dlig":case"liga":case"rlig":return this.getLigatures(P,F,W)}},hr.prototype.add=function(P,F,W,Y){if(/ss\d\d/.test(P))return this.addSingle(P,F,W,Y);switch(P){case"aalt":case"salt":return typeof F.by=="number"?this.addSingle(P,F,W,Y):this.addAlternate(P,F,W,Y);case"dlig":case"liga":case"rlig":return this.addLigature(P,F,W,Y)}};var cn={getPath:an,parse:function(P,F,W,Y){for(var Q=new lt.GlyphSet(Y),ie=0;ie<W.length-1;ie+=1){var oe=W[ie];oe!==W[ie+1]?Q.push(ie,lt.ttfGlyphLoader(Y,ie,kn,P,F+oe,ln)):Q.push(ie,lt.glyphLoader(Y,ie))}return Q}};function zr(P){this.font=P,this.getCommands=function(F){return cn.getPath(F).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Tn(P){return P}function un(P){return Math.sign(P)*Math.round(Math.abs(P))}function Cn(P){return Math.sign(P)*Math.round(Math.abs(2*P))/2}function An(P){return Math.sign(P)*(Math.round(Math.abs(P)+.5)-.5)}function jn(P){return Math.sign(P)*Math.ceil(Math.abs(P))}function Pn(P){return Math.sign(P)*Math.floor(Math.abs(P))}function hn(P){var F=this.srPeriod,W=this.srPhase,Y=1;return P<0&&(P=-P,Y=-1),P+=this.srThreshold-W,P=Math.trunc(P/F)*F,(P+=W)<0?W*Y:P*Y}var dr={x:1,y:0,axis:"x",distance:function(P,F,W,Y){return(W?P.xo:P.x)-(Y?F.xo:F.x)},interpolate:function(P,F,W,Y){var Q,ie,oe,me,Ee,Se,Ne;if(!Y||Y===this)return Q=P.xo-F.xo,ie=P.xo-W.xo,Ee=F.x-F.xo,Se=W.x-W.xo,(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?void(P.x=P.xo+(Ee+Se)/2):void(P.x=P.xo+(Ee*me+Se*oe)/Ne);Q=Y.distance(P,F,!0,!0),ie=Y.distance(P,W,!0,!0),Ee=Y.distance(F,F,!1,!0),Se=Y.distance(W,W,!1,!0),(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?dr.setRelative(P,P,(Ee+Se)/2,Y,!0):dr.setRelative(P,P,(Ee*me+Se*oe)/Ne,Y,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(P,F,W,Y,Q){var ie,oe;Y&&Y!==this?(ie=Q?F.xo:F.x,oe=Q?F.yo:F.y,ie+=W*Y.x,oe+=W*Y.y,P.x=ie+(P.y-oe)/Y.normalSlope):P.x=(Q?F.xo:F.x)+W},slope:0,touch:function(P){P.xTouched=!0},touched:function(P){return P.xTouched},untouch:function(P){P.xTouched=!1}},pr={x:0,y:1,axis:"y",distance:function(P,F,W,Y){return(W?P.yo:P.y)-(Y?F.yo:F.y)},interpolate:function(P,F,W,Y){var Q,ie,oe,me,Ee,Se,Ne;if(!Y||Y===this)return Q=P.yo-F.yo,ie=P.yo-W.yo,Ee=F.y-F.yo,Se=W.y-W.yo,(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?void(P.y=P.yo+(Ee+Se)/2):void(P.y=P.yo+(Ee*me+Se*oe)/Ne);Q=Y.distance(P,F,!0,!0),ie=Y.distance(P,W,!0,!0),Ee=Y.distance(F,F,!1,!0),Se=Y.distance(W,W,!1,!0),(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?pr.setRelative(P,P,(Ee+Se)/2,Y,!0):pr.setRelative(P,P,(Ee*me+Se*oe)/Ne,Y,!0)},normalSlope:0,setRelative:function(P,F,W,Y,Q){var ie,oe;Y&&Y!==this?(ie=Q?F.xo:F.x,oe=Q?F.yo:F.y,ie+=W*Y.x,oe+=W*Y.y,P.y=oe+Y.normalSlope*(P.x-ie)):P.y=(Q?F.yo:F.y)+W},slope:Number.POSITIVE_INFINITY,touch:function(P){P.yTouched=!0},touched:function(P){return P.yTouched},untouch:function(P){P.yTouched=!1}};function wr(P,F){this.x=P,this.y=F,this.axis=void 0,this.slope=F/P,this.normalSlope=-P/F,Object.freeze(this)}function Pr(P,F){var W=Math.sqrt(P*P+F*F);return F/=W,(P/=W)===1&&F===0?dr:P===0&&F===1?pr:new wr(P,F)}function mr(P,F,W,Y){this.x=this.xo=Math.round(64*P)/64,this.y=this.yo=Math.round(64*F)/64,this.lastPointOfContour=W,this.onCurve=Y,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(dr),Object.freeze(pr),wr.prototype.distance=function(P,F,W,Y){return this.x*dr.distance(P,F,W,Y)+this.y*pr.distance(P,F,W,Y)},wr.prototype.interpolate=function(P,Q,ie,Y){var oe=Y.distance(P,Q,!0,!0),me=Y.distance(P,ie,!0,!0),Q=Y.distance(Q,Q,!1,!0),ie=Y.distance(ie,ie,!1,!0),oe=Math.abs(oe),me=Math.abs(me),Ee=oe+me;Ee===0?this.setRelative(P,P,(Q+ie)/2,Y,!0):this.setRelative(P,P,(Q*me+ie*oe)/Ee,Y,!0)},wr.prototype.setRelative=function(P,ie,Ee,Se,me){var oe=me?ie.xo:ie.x,me=me?ie.yo:ie.y,ie=oe+Ee*(Se=Se||this).x,oe=me+Ee*Se.y,me=Se.normalSlope,Ee=this.slope,Se=P.x,Ne=P.y;P.x=(Ee*Se-me*ie+oe-Ne)/(Ee-me),P.y=Ee*(P.x-Se)+Ne},wr.prototype.touch=function(P){P.xTouched=!0,P.yTouched=!0},mr.prototype.nextTouched=function(P){for(var F=this.nextPointOnContour;!P.touched(F)&&F!==this;)F=F.nextPointOnContour;return F},mr.prototype.prevTouched=function(P){for(var F=this.prevPointOnContour;!P.touched(F)&&F!==this;)F=F.prevPointOnContour;return F};var bt=Object.freeze(new mr(0,0)),Wr={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function ur(P,F){switch(this.env=P,this.stack=[],this.prog=F,P){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=dr,this.round=un}}function Lr(P){for(var F=P.tZone=new Array(P.gZone.length),W=0;W<F.length;W++)F[W]=new mr(0,0)}function dn(P,F){var W,Y=P.prog,Q=P.ip,ie=1;do if((W=Y[++Q])===88)ie++;else if(W===89)ie--;else if(W===64)Q+=Y[Q+1]+1;else if(W===65)Q+=2*Y[Q+1]+1;else if(176<=W&&W<=183)Q+=W-176+1;else if(184<=W&&W<=191)Q+=2*(W-184+1);else if(F&&ie===1&&W===27)break;while(0<ie);P.ip=Q}function qr(P,F){f.DEBUG&&console.log(F.step,"SVTCA["+P.axis+"]"),F.fv=F.pv=F.dpv=P}function fn(P,F){f.DEBUG&&console.log(F.step,"SPVTCA["+P.axis+"]"),F.pv=F.dpv=P}function pn(P,F){f.DEBUG&&console.log(F.step,"SFVTCA["+P.axis+"]"),F.fv=P}function mn(P,F){var W,Q=F.stack,Y=Q.pop(),Q=Q.pop(),ie=F.z2[Y],oe=F.z1[Q];f.DEBUG&&console.log("SPVTL["+P+"]",Y,Q),Y=P?(W=ie.y-oe.y,oe.x-ie.x):(W=oe.x-ie.x,oe.y-ie.y),F.pv=F.dpv=Pr(W,Y)}function gn(P,F){var W,Q=F.stack,Y=Q.pop(),Q=Q.pop(),ie=F.z2[Y],oe=F.z1[Q];f.DEBUG&&console.log("SFVTL["+P+"]",Y,Q),Y=P?(W=ie.y-oe.y,oe.x-ie.x):(W=oe.x-ie.x,oe.y-ie.y),F.fv=Pr(W,Y)}function Hr(P){f.DEBUG&&console.log(P.step,"POP[]"),P.stack.pop()}function Mn(P,F){var W=F.stack.pop(),Y=F.z0[W],Q=F.fv,ie=F.pv,oe=(f.DEBUG&&console.log(F.step,"MDAP["+P+"]",W),ie.distance(Y,bt));P&&(oe=F.round(oe)),Q.setRelative(Y,bt,oe,ie),Q.touch(Y),F.rp0=F.rp1=W}function yn(P,F){var W,Y,Q,ie=F.z2,oe=ie.length-2;f.DEBUG&&console.log(F.step,"IUP["+P.axis+"]");for(var me=0;me<oe;me++)W=ie[me],P.touched(W)||(Y=W.prevTouched(P))!==W&&(Y===(Q=W.nextTouched(P))&&P.setRelative(W,W,P.distance(Y,Y,!1,!0),P,!0),P.interpolate(W,Y,Q,P))}function vn(P,F){for(var W=F.stack,Y=P?F.rp1:F.rp2,Q=(P?F.z0:F.z1)[Y],ie=F.fv,oe=F.pv,me=F.loop,Ee=F.z2;me--;){var Se=W.pop(),Ne=Ee[Se],Be=oe.distance(Q,Q,!1,!0);ie.setRelative(Ne,Ne,Be,oe),ie.touch(Ne),f.DEBUG&&console.log(F.step,(1<F.loop?"loop "+(F.loop-me)+": ":"")+"SHP["+(P?"rp1":"rp2")+"]",Se)}F.loop=1}function In(P,F){for(var W=F.stack,oe=P?F.rp1:F.rp2,Y=(P?F.z0:F.z1)[oe],Q=F.fv,ie=F.pv,oe=W.pop(),me=F.z2[F.contours[oe]],Ee=me,Se=(f.DEBUG&&console.log(F.step,"SHC["+P+"]",oe),ie.distance(Y,Y,!1,!0));Ee!==Y&&Q.setRelative(Ee,Ee,Se,ie),(Ee=Ee.nextPointOnContour)!==me;);}function _n(P,F){var W,Y,me=F.stack,Q=P?F.rp1:F.rp2,Q=(P?F.z0:F.z1)[Q],ie=F.fv,oe=F.pv,me=me.pop();switch(f.DEBUG&&console.log(F.step,"SHZ["+P+"]",me),me){case 0:W=F.tZone;break;case 1:W=F.gZone;break;default:throw new Error("Invalid zone")}for(var Ee=oe.distance(Q,Q,!1,!0),Se=W.length-2,Ne=0;Ne<Se;Ne++)Y=W[Ne],ie.setRelative(Y,Y,Ee,oe)}function bn(P,F){var Y=F.stack,W=Y.pop()/64,Y=Y.pop(),Q=F.z1[Y],ie=F.z0[F.rp0],oe=F.fv,me=F.pv;oe.setRelative(Q,ie,W,me),oe.touch(Q),f.DEBUG&&console.log(F.step,"MSIRP["+P+"]",W,Y),F.rp1=F.rp0,F.rp2=Y,P&&(F.rp0=Y)}function Xr(P,F){var W=F.stack,me=W.pop(),W=W.pop(),Y=F.z0[W],Q=F.fv,ie=F.pv,oe=F.cvt[me],me=(f.DEBUG&&console.log(F.step,"MIAP["+P+"]",me,"(",oe,")",W),ie.distance(Y,bt));P&&(Math.abs(me-oe)<F.cvCutIn&&(me=oe),me=F.round(me)),Q.setRelative(Y,bt,me,ie),F.zp0===0&&(Y.xo=Y.x,Y.yo=Y.y),Q.touch(Y),F.rp0=F.rp1=W}function wn(P,F){var W=F.stack,Y=W.pop(),Q=F.z2[Y];f.DEBUG&&console.log(F.step,"GC["+P+"]",Y),W.push(64*F.dpv.distance(Q,bt,P,!1))}function xn(P,F){var Y=F.stack,W=Y.pop(),Y=Y.pop(),Q=F.z1[W],ie=F.z0[Y],ie=F.dpv.distance(ie,Q,P,P);f.DEBUG&&console.log(F.step,"MD["+P+"]",W,Y,"->",ie),F.stack.push(Math.round(64*ie))}function Yr(P,F){var W=F.stack,Y=W.pop(),Q=F.fv,ie=F.pv,oe=F.ppem,me=F.deltaBase+16*(P-1),Ee=F.deltaShift,Se=F.z0;f.DEBUG&&console.log(F.step,"DELTAP["+P+"]",Y,W);for(var Ne=0;Ne<Y;Ne++){var Be=W.pop(),De=W.pop();me+((240&De)>>4)===oe&&(0<=(De=(15&De)-8)&&De++,f.DEBUG&&console.log(F.step,"DELTAPFIX",Be,"by",De*Ee),Be=Se[Be],Q.setRelative(Be,Be,De*Ee,ie))}}function Fr(P,F){var W=F.stack,Y=W.pop();f.DEBUG&&console.log(F.step,"ROUND[]"),W.push(64*F.round(Y/64))}function $r(P,F){var W=F.stack,Y=W.pop(),Q=F.ppem,ie=F.deltaBase+16*(P-1),oe=F.deltaShift;f.DEBUG&&console.log(F.step,"DELTAC["+P+"]",Y,W);for(var me=0;me<Y;me++){var Ee=W.pop(),Se=W.pop();ie+((240&Se)>>4)===Q&&(0<=(Se=(15&Se)-8)&&Se++,Se=Se*oe,f.DEBUG&&console.log(F.step,"DELTACFIX",Ee,"by",Se),F.cvt[Ee]+=Se)}}function Zr(P,F){var W,Q=F.stack,Y=Q.pop(),Q=Q.pop(),ie=F.z2[Y],oe=F.z1[Q];f.DEBUG&&console.log(F.step,"SDPVTL["+P+"]",Y,Q),Y=P?(W=ie.y-oe.y,oe.x-ie.x):(W=oe.x-ie.x,oe.y-ie.y),F.dpv=Pr(W,Y)}function yr(P,F){var W=F.stack,Y=F.prog,Q=F.ip;f.DEBUG&&console.log(F.step,"PUSHB["+P+"]");for(var ie=0;ie<P;ie++)W.push(Y[++Q]);F.ip=Q}function vr(P,F){var W=F.ip,Y=F.prog,Q=F.stack;f.DEBUG&&console.log(F.ip,"PUSHW["+P+"]");for(var ie=0;ie<P;ie++){var oe=Y[++W]<<8|Y[++W];32768&oe&&(oe=-(1+(65535^oe))),Q.push(oe)}F.ip=W}function ct(P,F,W,Y,Q,ie){var oe,me,Se=ie.stack,Ee=P&&Se.pop(),Se=Se.pop(),Ne=ie.rp0,Ne=ie.z0[Ne],Be=ie.z1[Se],De=ie.minDis,Ce=ie.fv,Ye=ie.dpv,ze=oe=Ye.distance(Be,Ne,!0,!0),He=0<=ze?1:-1;ze=Math.abs(ze),P&&(me=ie.cvt[Ee],Y&&Math.abs(ze-me)<ie.cvCutIn&&(ze=me)),W&&ze<De&&(ze=De),Y&&(ze=ie.round(ze)),Ce.setRelative(Be,Ne,He*ze,Ye),Ce.touch(Be),f.DEBUG&&console.log(ie.step,(P?"MIRP[":"MDRP[")+(F?"M":"m")+(W?">":"_")+(Y?"R":"_")+(Q===0?"Gr":Q===1?"Bl":Q===2?"Wh":"")+"]",P?Ee+"("+ie.cvt[Ee]+","+me+")":"",Se,"(d =",oe,"->",He*ze,")"),ie.rp1=ie.rp0,ie.rp2=Se,F&&(ie.rp0=Se)}zr.prototype.exec=function(P,F){if(typeof F!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var W=this.font,Y=this._prepState;if(!Y||Y.ppem!==F){var Q=this._fpgmState;if(!Q){ur.prototype=Wr,(Q=this._fpgmState=new ur("fpgm",W.tables.fpgm)).funcs=[],Q.font=W,f.DEBUG&&(console.log("---EXEC FPGM---"),Q.step=-1);try{xr(Q)}catch(Se){return console.log("Hinting error in FPGM:"+Se),void(this._errorState=3)}}ur.prototype=Q,(Y=this._prepState=new ur("prep",W.tables.prep)).ppem=F;var ie=W.tables.cvt;if(ie)for(var oe=Y.cvt=new Array(ie.length),me=F/W.unitsPerEm,Ee=0;Ee<ie.length;Ee++)oe[Ee]=ie[Ee]*me;else Y.cvt=[];f.DEBUG&&(console.log("---EXEC PREP---"),Y.step=-1);try{xr(Y)}catch(Se){this._errorState<2&&console.log("Hinting error in PREP:"+Se),this._errorState=2}}if(!(1<this._errorState))try{return On(P,Y)}catch(Se){this._errorState<1&&(console.log("Hinting error:"+Se),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var On=function(P,F){var W=F.ppem/F.font.unitsPerEm,Y=W,Q=P.components;if(ur.prototype=F,Q){for(var ie=F.font,oe=[],me=[],Ee=0;Ee<Q.length;Ee++){var Se=Q[Ee],Ne=ie.glyphs.get(Se.glyphIndex),Be=new ur("glyf",Ne.instructions);f.DEBUG&&(console.log("---EXEC COMP "+Ee+"---"),Be.step=-1),Sn(Ne,Be,W,Y);for(var De=Math.round(Se.dx*W),Ce=Math.round(Se.dy*Y),Ye=Be.gZone,ze=Be.contours,He=0;He<Ye.length;He++){var Ve=Ye[He];Ve.xTouched=Ve.yTouched=!1,Ve.xo=Ve.x=Ve.x+De,Ve.yo=Ve.y=Ve.y+Ce}var Ue=oe.length;oe.push.apply(oe,Ye);for(var ut=0;ut<ze.length;ut++)me.push(ze[ut]+Ue)}P.instructions&&!Be.inhibitGridFit&&((Be=new ur("glyf",P.instructions)).gZone=Be.z0=Be.z1=Be.z2=oe,Be.contours=me,oe.push(new mr(0,0),new mr(Math.round(P.advanceWidth*W),0)),f.DEBUG&&(console.log("---EXEC COMPOSITE---"),Be.step=-1),xr(Be),oe.length-=2)}else Be=new ur("glyf",P.instructions),f.DEBUG&&(console.log("---EXEC GLYPH---"),Be.step=-1),Sn(P,Be,W,Y),oe=Be.gZone;return oe},Sn=function(P,F,W,Y){for(var Q,ie,oe,me=P.points||[],Ee=me.length,Se=F.gZone=F.z0=F.z1=F.z2=[],Ne=F.contours=[],Be=0;Be<Ee;Be++)Q=me[Be],Se[Be]=new mr(Q.x*W,Q.y*Y,Q.lastPointOfContour,Q.onCurve);for(var De=0;De<Ee;De++)Q=Se[De],ie||(ie=Q,Ne.push(De)),Q.lastPointOfContour?((Q.nextPointOnContour=ie).prevPointOnContour=Q,ie=void 0):(oe=Se[De+1],(Q.nextPointOnContour=oe).prevPointOnContour=Q);if(!F.inhibitGridFit){if(f.DEBUG){console.log("PROCESSING GLYPH",F.stack);for(var Ce=0;Ce<Ee;Ce++)console.log(Ce,Se[Ce].x,Se[Ce].y)}if(Se.push(new mr(0,0),new mr(Math.round(P.advanceWidth*W),0)),xr(F),Se.length-=2,f.DEBUG){console.log("FINISHED GLYPH",F.stack);for(var Ye=0;Ye<Ee;Ye++)console.log(Ye,Se[Ye].x,Se[Ye].y)}}},xr=function(P){var F=P.prog;if(F){var W,Y=F.length;for(P.ip=0;P.ip<Y;P.ip++){if(f.DEBUG&&P.step++,!(W=Nn[F[P.ip]]))throw new Error("unknown instruction: 0x"+Number(F[P.ip]).toString(16));W(P)}}},Nn=[qr.bind(void 0,pr),qr.bind(void 0,dr),fn.bind(void 0,pr),fn.bind(void 0,dr),pn.bind(void 0,pr),pn.bind(void 0,dr),mn.bind(void 0,0),mn.bind(void 0,1),gn.bind(void 0,0),gn.bind(void 0,1),function(P){var F=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"SPVFS[]",F,W),P.pv=P.dpv=Pr(W,F)},function(P){var F=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"SPVFS[]",F,W),P.fv=Pr(W,F)},function(P){var F=P.stack,W=P.pv;f.DEBUG&&console.log(P.step,"GPV[]"),F.push(16384*W.x),F.push(16384*W.y)},function(P){var F=P.stack,W=P.fv;f.DEBUG&&console.log(P.step,"GFV[]"),F.push(16384*W.x),F.push(16384*W.y)},function(P){P.fv=P.pv,f.DEBUG&&console.log(P.step,"SFVTPV[]")},function(F){var W=(oe=F.stack).pop(),Y=oe.pop(),Q=oe.pop(),ie=oe.pop(),oe=oe.pop(),Ee=F.z0,Ne=F.z1,me=Ee[W],Ee=Ee[Y],Se=Ne[Q],Ne=Ne[ie],F=F.z2[oe],W=(f.DEBUG&&console.log("ISECT[], ",W,Y,Q,ie,oe),me.x),Y=me.y,Q=Ee.x,ie=Ee.y,oe=Se.x,me=Se.y,Ee=Ne.x,Se=Ne.y,Ne=(W-Q)*(me-Se)-(Y-ie)*(oe-Ee),Be=W*ie-Y*Q,De=oe*Se-me*Ee;F.x=(Be*(oe-Ee)-De*(W-Q))/Ne,F.y=(Be*(me-Se)-De*(Y-ie))/Ne},function(P){P.rp0=P.stack.pop(),f.DEBUG&&console.log(P.step,"SRP0[]",P.rp0)},function(P){P.rp1=P.stack.pop(),f.DEBUG&&console.log(P.step,"SRP1[]",P.rp1)},function(P){P.rp2=P.stack.pop(),f.DEBUG&&console.log(P.step,"SRP2[]",P.rp2)},function(P){var F=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZP0[]",F),P.zp0=F){case 0:P.tZone||Lr(P),P.z0=P.tZone;break;case 1:P.z0=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var F=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZP1[]",F),P.zp1=F){case 0:P.tZone||Lr(P),P.z1=P.tZone;break;case 1:P.z1=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var F=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZP2[]",F),P.zp2=F){case 0:P.tZone||Lr(P),P.z2=P.tZone;break;case 1:P.z2=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var F=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZPS[]",F),P.zp0=P.zp1=P.zp2=F){case 0:P.tZone||Lr(P),P.z0=P.z1=P.z2=P.tZone;break;case 1:P.z0=P.z1=P.z2=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){P.loop=P.stack.pop(),f.DEBUG&&console.log(P.step,"SLOOP[]",P.loop)},function(P){f.DEBUG&&console.log(P.step,"RTG[]"),P.round=un},function(P){f.DEBUG&&console.log(P.step,"RTHG[]"),P.round=An},function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"SMD[]",F),P.minDis=F/64},function(P){f.DEBUG&&console.log(P.step,"ELSE[]"),dn(P,!1)},function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"JMPR[]",F),P.ip+=F-1},function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"SCVTCI[]",F),P.cvCutIn=F/64},void 0,void 0,function(P){var F=P.stack;f.DEBUG&&console.log(P.step,"DUP[]"),F.push(F[F.length-1])},Hr,function(P){f.DEBUG&&console.log(P.step,"CLEAR[]"),P.stack.length=0},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"SWAP[]"),F.push(W),F.push(Y)},function(P){var F=P.stack;f.DEBUG&&console.log(P.step,"DEPTH[]"),F.push(F.length)},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"CINDEX[]",W),F.push(F[F.length-W])},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"MINDEX[]",W),F.push(F.splice(F.length-W,1)[0])},void 0,void 0,void 0,function(P){var F=(Y=P.stack).pop(),W=Y.pop(),Y=(f.DEBUG&&console.log(P.step,"LOOPCALL[]",F,W),P.ip),Q=P.prog;P.prog=P.funcs[F];for(var ie=0;ie<W;ie++)xr(P),f.DEBUG&&console.log(++P.step,ie+1<W?"next loopcall":"done loopcall",ie);P.ip=Y,P.prog=Q},function(P){var F=P.stack.pop(),W=(f.DEBUG&&console.log(P.step,"CALL[]",F),P.ip),Y=P.prog;P.prog=P.funcs[F],xr(P),P.ip=W,P.prog=Y,f.DEBUG&&console.log(++P.step,"returning from",F)},function(P){if(P.env!=="fpgm")throw new Error("FDEF not allowed here");var Y=P.stack,F=P.prog,W=P.ip,Y=Y.pop(),Q=W;for(f.DEBUG&&console.log(P.step,"FDEF[]",Y);F[++W]!==45;);P.ip=W,P.funcs[Y]=F.slice(Q+1,W)},void 0,Mn.bind(void 0,0),Mn.bind(void 0,1),yn.bind(void 0,pr),yn.bind(void 0,dr),vn.bind(void 0,0),vn.bind(void 0,1),In.bind(void 0,0),In.bind(void 0,1),_n.bind(void 0,0),_n.bind(void 0,1),function(P){for(var F=P.stack,W=P.loop,Y=P.fv,Q=F.pop()/64,ie=P.z2;W--;){var oe=F.pop(),me=ie[oe];f.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-W)+": ":"")+"SHPIX[]",oe,Q),Y.setRelative(me,me,Q),Y.touch(me)}P.loop=1},function(P){for(var F=P.stack,W=P.rp1,Y=P.rp2,Q=P.loop,ie=P.z0[W],oe=P.z1[Y],me=P.fv,Ee=P.dpv,Se=P.z2;Q--;){var Ne=F.pop(),Be=Se[Ne];f.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-Q)+": ":"")+"IP[]",Ne,W,"<->",Y),me.interpolate(Be,ie,oe,Ee),me.touch(Be)}P.loop=1},bn.bind(void 0,0),bn.bind(void 0,1),function(P){for(var F=P.stack,W=P.rp0,Y=P.z0[W],Q=P.loop,ie=P.fv,oe=P.pv,me=P.z1;Q--;){var Ee=F.pop(),Se=me[Ee];f.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-Q)+": ":"")+"ALIGNRP[]",Ee),ie.setRelative(Se,Y,0,oe),ie.touch(Se)}P.loop=1},function(P){f.DEBUG&&console.log(P.step,"RTDG[]"),P.round=Cn},Xr.bind(void 0,0),Xr.bind(void 0,1),function(P){var F=P.prog,W=P.ip,Y=P.stack,Q=F[++W];f.DEBUG&&console.log(P.step,"NPUSHB[]",Q);for(var ie=0;ie<Q;ie++)Y.push(F[++W]);P.ip=W},function(P){var F=P.ip,W=P.prog,Y=P.stack,Q=W[++F];f.DEBUG&&console.log(P.step,"NPUSHW[]",Q);for(var ie=0;ie<Q;ie++){var oe=W[++F]<<8|W[++F];32768&oe&&(oe=-(1+(65535^oe))),Y.push(oe)}P.ip=F},function(P){var Y=P.stack,F=(F=P.store)||(P.store=[]),W=Y.pop(),Y=Y.pop();f.DEBUG&&console.log(P.step,"WS",W,Y),F[Y]=W},function(Q){var F=Q.stack,W=Q.store,Y=F.pop(),Q=(f.DEBUG&&console.log(Q.step,"RS",Y),W&&W[Y]||0);F.push(Q)},function(P){var F=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"WCVTP",F,W),P.cvt[W]=F/64},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"RCVT",W),F.push(64*P.cvt[W])},wn.bind(void 0,0),wn.bind(void 0,1),void 0,xn.bind(void 0,0),xn.bind(void 0,1),function(P){f.DEBUG&&console.log(P.step,"MPPEM[]"),P.stack.push(P.ppem)},void 0,function(P){f.DEBUG&&console.log(P.step,"FLIPON[]"),P.autoFlip=!0},void 0,void 0,function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"LT[]",W,Y),F.push(Y<W?1:0)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"LTEQ[]",W,Y),F.push(Y<=W?1:0)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"GT[]",W,Y),F.push(W<Y?1:0)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"GTEQ[]",W,Y),F.push(W<=Y?1:0)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"EQ[]",W,Y),F.push(W===Y?1:0)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"NEQ[]",W,Y),F.push(W!==Y?1:0)},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"ODD[]",W),F.push(Math.trunc(W)%2?1:0)},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"EVEN[]",W),F.push(Math.trunc(W)%2?0:1)},function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"IF[]",F),F||(dn(P,!0),f.DEBUG&&console.log(P.step,"EIF[]"))},function(P){f.DEBUG&&console.log(P.step,"EIF[]")},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"AND[]",W,Y),F.push(W&&Y?1:0)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"OR[]",W,Y),F.push(W||Y?1:0)},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"NOT[]",W),F.push(W?0:1)},Yr.bind(void 0,1),function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"SDB[]",F),P.deltaBase=F},function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"SDS[]",F),P.deltaShift=Math.pow(.5,F)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"ADD[]",W,Y),F.push(Y+W)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"SUB[]",W,Y),F.push(Y-W)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"DIV[]",W,Y),F.push(64*Y/W)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"MUL[]",W,Y),F.push(Y*W/64)},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"ABS[]",W),F.push(Math.abs(W))},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"NEG[]",W),F.push(-W)},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"FLOOR[]",W),F.push(64*Math.floor(W/64))},function(P){var F=P.stack,W=F.pop();f.DEBUG&&console.log(P.step,"CEILING[]",W),F.push(64*Math.ceil(W/64))},Fr.bind(void 0,0),Fr.bind(void 0,1),Fr.bind(void 0,2),Fr.bind(void 0,3),void 0,void 0,void 0,void 0,function(P){var F=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"WCVTF[]",F,W),P.cvt[W]=F*P.ppem/P.font.unitsPerEm},Yr.bind(void 0,2),Yr.bind(void 0,3),$r.bind(void 0,1),$r.bind(void 0,2),$r.bind(void 0,3),function(P){var F,W=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SROUND[]",W),P.round=hn,192&W){case 0:F=.5;break;case 64:F=1;break;case 128:F=2;break;default:throw new Error("invalid SROUND value")}switch(P.srPeriod=F,48&W){case 0:P.srPhase=0;break;case 16:P.srPhase=.25*F;break;case 32:P.srPhase=.5*F;break;case 48:P.srPhase=.75*F;break;default:throw new Error("invalid SROUND value")}P.srThreshold=(W&=15)===0?0:(W/8-.5)*F},function(P){var F,W=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"S45ROUND[]",W),P.round=hn,192&W){case 0:F=Math.sqrt(2)/2;break;case 64:F=Math.sqrt(2);break;case 128:F=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(P.srPeriod=F,48&W){case 0:P.srPhase=0;break;case 16:P.srPhase=.25*F;break;case 32:P.srPhase=.5*F;break;case 48:P.srPhase=.75*F;break;default:throw new Error("invalid S45ROUND value")}P.srThreshold=(W&=15)===0?0:(W/8-.5)*F},void 0,void 0,function(P){f.DEBUG&&console.log(P.step,"ROFF[]"),P.round=Tn},void 0,function(P){f.DEBUG&&console.log(P.step,"RUTG[]"),P.round=jn},function(P){f.DEBUG&&console.log(P.step,"RDTG[]"),P.round=Pn},Hr,Hr,void 0,void 0,void 0,void 0,void 0,function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"SCANCTRL[]",F)},Zr.bind(void 0,0),Zr.bind(void 0,1),function(P){var F=P.stack,W=F.pop(),Y=0;f.DEBUG&&console.log(P.step,"GETINFO[]",W),1&W&&(Y=35),32&W&&(Y|=4096),F.push(Y)},void 0,function(P){var F=P.stack,W=F.pop(),Y=F.pop(),Q=F.pop();f.DEBUG&&console.log(P.step,"ROLL[]"),F.push(Y),F.push(W),F.push(Q)},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"MAX[]",W,Y),F.push(Math.max(Y,W))},function(P){var F=P.stack,W=F.pop(),Y=F.pop();f.DEBUG&&console.log(P.step,"MIN[]",W,Y),F.push(Math.min(Y,W))},function(P){var F=P.stack.pop();f.DEBUG&&console.log(P.step,"SCANTYPE[]",F)},function(P){var F=P.stack.pop(),W=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"INSTCTRL[]",F,W),F){case 1:return void(P.inhibitGridFit=!!W);case 2:return void(P.ignoreCvt=!!W);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,yr.bind(void 0,1),yr.bind(void 0,2),yr.bind(void 0,3),yr.bind(void 0,4),yr.bind(void 0,5),yr.bind(void 0,6),yr.bind(void 0,7),yr.bind(void 0,8),vr.bind(void 0,1),vr.bind(void 0,2),vr.bind(void 0,3),vr.bind(void 0,4),vr.bind(void 0,5),vr.bind(void 0,6),vr.bind(void 0,7),vr.bind(void 0,8),ct.bind(void 0,0,0,0,0,0),ct.bind(void 0,0,0,0,0,1),ct.bind(void 0,0,0,0,0,2),ct.bind(void 0,0,0,0,0,3),ct.bind(void 0,0,0,0,1,0),ct.bind(void 0,0,0,0,1,1),ct.bind(void 0,0,0,0,1,2),ct.bind(void 0,0,0,0,1,3),ct.bind(void 0,0,0,1,0,0),ct.bind(void 0,0,0,1,0,1),ct.bind(void 0,0,0,1,0,2),ct.bind(void 0,0,0,1,0,3),ct.bind(void 0,0,0,1,1,0),ct.bind(void 0,0,0,1,1,1),ct.bind(void 0,0,0,1,1,2),ct.bind(void 0,0,0,1,1,3),ct.bind(void 0,0,1,0,0,0),ct.bind(void 0,0,1,0,0,1),ct.bind(void 0,0,1,0,0,2),ct.bind(void 0,0,1,0,0,3),ct.bind(void 0,0,1,0,1,0),ct.bind(void 0,0,1,0,1,1),ct.bind(void 0,0,1,0,1,2),ct.bind(void 0,0,1,0,1,3),ct.bind(void 0,0,1,1,0,0),ct.bind(void 0,0,1,1,0,1),ct.bind(void 0,0,1,1,0,2),ct.bind(void 0,0,1,1,0,3),ct.bind(void 0,0,1,1,1,0),ct.bind(void 0,0,1,1,1,1),ct.bind(void 0,0,1,1,1,2),ct.bind(void 0,0,1,1,1,3),ct.bind(void 0,1,0,0,0,0),ct.bind(void 0,1,0,0,0,1),ct.bind(void 0,1,0,0,0,2),ct.bind(void 0,1,0,0,0,3),ct.bind(void 0,1,0,0,1,0),ct.bind(void 0,1,0,0,1,1),ct.bind(void 0,1,0,0,1,2),ct.bind(void 0,1,0,0,1,3),ct.bind(void 0,1,0,1,0,0),ct.bind(void 0,1,0,1,0,1),ct.bind(void 0,1,0,1,0,2),ct.bind(void 0,1,0,1,0,3),ct.bind(void 0,1,0,1,1,0),ct.bind(void 0,1,0,1,1,1),ct.bind(void 0,1,0,1,1,2),ct.bind(void 0,1,0,1,1,3),ct.bind(void 0,1,1,0,0,0),ct.bind(void 0,1,1,0,0,1),ct.bind(void 0,1,1,0,0,2),ct.bind(void 0,1,1,0,0,3),ct.bind(void 0,1,1,0,1,0),ct.bind(void 0,1,1,0,1,1),ct.bind(void 0,1,1,0,1,2),ct.bind(void 0,1,1,0,1,3),ct.bind(void 0,1,1,1,0,0),ct.bind(void 0,1,1,1,0,1),ct.bind(void 0,1,1,1,0,2),ct.bind(void 0,1,1,1,0,3),ct.bind(void 0,1,1,1,1,0),ct.bind(void 0,1,1,1,1,1),ct.bind(void 0,1,1,1,1,2),ct.bind(void 0,1,1,1,1,3)],Kt=Array.from||function(P){return P.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function jt(P){(P=P||{}).empty||(ar(P.familyName,"When creating a new Font object, familyName is required."),ar(P.styleName,"When creating a new Font object, styleName is required."),ar(P.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ar(P.ascender,"When creating a new Font object, ascender is required."),ar(P.descender,"When creating a new Font object, descender is required."),ar(P.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:P.familyName||" "},fontSubfamily:{en:P.styleName||" "},fullName:{en:P.fullName||P.familyName+" "+P.styleName},postScriptName:{en:P.postScriptName||(P.familyName+P.styleName).replace(/\s/g,"")},designer:{en:P.designer||" "},designerURL:{en:P.designerURL||" "},manufacturer:{en:P.manufacturer||" "},manufacturerURL:{en:P.manufacturerURL||" "},license:{en:P.license||" "},licenseURL:{en:P.licenseURL||" "},version:{en:P.version||"Version 0.1"},description:{en:P.description||" "},copyright:{en:P.copyright||" "},trademark:{en:P.trademark||" "}},this.unitsPerEm=P.unitsPerEm||1e3,this.ascender=P.ascender,this.descender=P.descender,this.createdTimestamp=P.createdTimestamp,this.tables={os2:{usWeightClass:P.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:P.widthClass||this.usWidthClasses.MEDIUM,fsSelection:P.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new lt.GlyphSet(this,P.glyphs||[]),this.encoding=new Le(this),this.position=new Rr(this),this.substitution=new hr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new zr(this):void 0)}})}function En(P,F){var W,Y=JSON.stringify(P),Q=256;for(W in F){var ie=parseInt(W);if(ie&&!(ie<256)){if(JSON.stringify(F[W])===Y)return ie;Q<=ie&&(Q=ie+1)}}return F[Q]=P,Q}jt.prototype.hasChar=function(P){return this.encoding.charToGlyphIndex(P)!==null},jt.prototype.charToGlyphIndex=function(P){return this.encoding.charToGlyphIndex(P)},jt.prototype.charToGlyph=function(P){return P=this.charToGlyphIndex(P),this.glyphs.get(P)||this.glyphs.get(0)},jt.prototype.stringToGlyphs=function(P,F){F=F||this.defaultRenderOptions;for(var W=Kt(P),Y=[],Q=0;Q<W.length;Q+=1){var ie=W[Q];Y.push(this.charToGlyphIndex(ie))}var oe=Y.length;if(F.features){var P=F.script||this.substitution.getDefaultScriptName(),me=[];F.features.liga&&(me=me.concat(this.substitution.getFeature("liga",P,F.language))),F.features.rlig&&(me=me.concat(this.substitution.getFeature("rlig",P,F.language)));for(var Ee=0;Ee<oe;Ee+=1)for(var Se=0;Se<me.length;Se++){for(var Ne=me[Se],Be=Ne.sub,De=Be.length,Ce=0;Ce<De&&Be[Ce]===Y[Ee+Ce];)Ce++;Ce===De&&(Y.splice(Ee,De,Ne.by),oe=oe-De+1)}}for(var Ye=new Array(oe),ze=this.glyphs.get(0),He=0;He<oe;He+=1)Ye[He]=this.glyphs.get(Y[He])||ze;return Ye},jt.prototype.nameToGlyphIndex=function(P){return this.glyphNames.nameToGlyphIndex(P)},jt.prototype.nameToGlyph=function(P){return P=this.nameToGlyphIndex(P),this.glyphs.get(P)||this.glyphs.get(0)},jt.prototype.glyphIndexToName=function(P){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(P):""},jt.prototype.getKerningValue=function(P,F){P=P.index||P,F=F.index||F;var W=this.position.defaultKerningTables;return W?this.position.getKerningValue(W,P,F):this.kerningPairs[P+","+F]||0},jt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},jt.prototype.forEachGlyph=function(P,F,W,Y,Q,ie){F=F!==void 0?F:0,W=W!==void 0?W:0,Q=Q||this.defaultRenderOptions;var oe,me=1/this.unitsPerEm*(Y=Y!==void 0?Y:72),Ee=this.stringToGlyphs(P,Q);Q.kerning&&(P=Q.script||this.position.getDefaultScriptName(),oe=this.position.getKerningTables(P,Q.language));for(var Se=0;Se<Ee.length;Se+=1){var Ne=Ee[Se];ie.call(this,Ne,F,W,Y,Q),Ne.advanceWidth&&(F+=Ne.advanceWidth*me),Q.kerning&&Se<Ee.length-1&&(F+=(oe?this.position.getKerningValue(oe,Ne.index,Ee[Se+1].index):this.getKerningValue(Ne,Ee[Se+1]))*me),Q.letterSpacing?F+=Q.letterSpacing*Y:Q.tracking&&(F+=Q.tracking/1e3*Y)}return F},jt.prototype.getPath=function(P,F,W,Y,Q){var ie=new Z;return this.forEachGlyph(P,F,W,Y,Q,function(oe,me,Ee,Se){oe=oe.getPath(me,Ee,Se,Q,this),ie.extend(oe)}),ie},jt.prototype.getPaths=function(P,F,W,Y,Q){var ie=[];return this.forEachGlyph(P,F,W,Y,Q,function(oe,me,Ee,Se){oe=oe.getPath(me,Ee,Se,Q,this),ie.push(oe)}),ie},jt.prototype.getAdvanceWidth=function(P,F,W){return this.forEachGlyph(P,0,0,F,W,function(){})},jt.prototype.draw=function(P,F,W,Y,Q,ie){this.getPath(F,W,Y,Q,ie).draw(P)},jt.prototype.drawPoints=function(P,F,W,Y,Q,ie){this.forEachGlyph(F,W,Y,Q,ie,function(oe,me,Ee,Se){oe.drawPoints(P,me,Ee,Se)})},jt.prototype.drawMetrics=function(P,F,W,Y,Q,ie){this.forEachGlyph(F,W,Y,Q,ie,function(oe,me,Ee,Se){oe.drawMetrics(P,me,Ee,Se)})},jt.prototype.getEnglishName=function(P){if(P=this.names[P],P)return P.en},jt.prototype.validate=function(){var P=this;function F(W){W=P.getEnglishName(W),W&&W.trim().length}F("fontFamily"),F("weightName"),F("manufacturer"),F("copyright"),F("version"),this.unitsPerEm},jt.prototype.toTables=function(){return jr.fontToTable(this)},jt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},jt.prototype.toArrayBuffer=function(){for(var P=this.toTables().encode(),F=new ArrayBuffer(P.length),W=new Uint8Array(F),Y=0;Y<P.length;Y++)W[Y]=P[Y];return F},jt.prototype.download=function(P){var F=this.getEnglishName("fontFamily"),W=this.getEnglishName("fontSubfamily"),Y=(P=P||F.replace(/\s/g,"")+"-"+W+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,Y.byteLength,function(Q){Q.root.getFile(P,{create:!0},function(ie){ie.createWriter(function(oe){var me=new DataView(Y),me=new Blob([me],{type:"font/opentype"});oe.write(me),oe.addEventListener("writeend",function(){location.href=ie.toURL()},!1)})})},function(Q){throw new Error(Q.name+": "+Q.message)})):(F=t("fs"),W=function(Q){for(var ie=new o(Q.byteLength),oe=new Uint8Array(Q),me=0;me<ie.length;++me)ie[me]=oe[me];return ie}(Y),F.writeFileSync(P,W))},jt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},jt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},jt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var le={make:function(P,F){var W=new ve.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:P.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:P.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*P.axes.length}]);W.offsetToData=W.sizeOf();for(var Y,Q,ie,oe=0;oe<P.axes.length;oe++)W.fields=W.fields.concat((Y=oe,Q=P.axes[oe],ie=F,ie=En(Q.name,F),[{name:"tag_"+Y,type:"TAG",value:Q.tag},{name:"minValue_"+Y,type:"FIXED",value:Q.minValue<<16},{name:"defaultValue_"+Y,type:"FIXED",value:Q.defaultValue<<16},{name:"maxValue_"+Y,type:"FIXED",value:Q.maxValue<<16},{name:"flags_"+Y,type:"USHORT",value:0},{name:"nameID_"+Y,type:"USHORT",value:ie}]));for(var me=0;me<P.instances.length;me++)W.fields=W.fields.concat(function(Ee,Se,Ne,Be){for(var De=[{name:"nameID_"+Ee,type:"USHORT",value:En(Se.name,Be)},{name:"flags_"+Ee,type:"USHORT",value:0}],Ce=0;Ce<Ne.length;++Ce){var Ye=Ne[Ce].tag;De.push({name:"axis_"+Ee+" "+Ye,type:"FIXED",value:Se.coordinates[Ye]<<16})}return De}(me,P.instances[me],P.axes,F));return W},parse:function(P,F,W){for(var Y,Q,ie,oe,me=new Fe.Parser(P,F),Ee=me.parseULong(),Se=(D.argument(Ee===65536,"Unsupported fvar table version."),me.parseOffset16()),Ne=(me.skip("uShort",1),me.parseUShort()),Be=me.parseUShort(),De=me.parseUShort(),Ce=me.parseUShort(),Ye=[],ze=0;ze<Ne;ze++)Ye.push((Y=P,Q=F+Se+ze*Be,ie=W,oe={},Y=new Fe.Parser(Y,Q),oe.tag=Y.parseTag(),oe.minValue=Y.parseFixed(),oe.defaultValue=Y.parseFixed(),oe.maxValue=Y.parseFixed(),Y.skip("uShort",1),oe.name=ie[Y.parseUShort()]||{},oe));for(var He=[],Ve=F+Se+Ne*Be,Ue=0;Ue<De;Ue++)He.push(function(ut,_t,dt,ft){var xt={},Rt=new Fe.Parser(ut,_t);xt.name=ft[Rt.parseUShort()]||{},Rt.skip("uShort",1),xt.coordinates={};for(var zt=0;zt<dt.length;++zt)xt.coordinates[dt[zt].tag]=Rt.parseFixed();return xt}(P,Ve+Ue*Ce,Ye,W));return{axes:Ye,instances:He}}},ee=new Array(10);ee[1]=function(){var P=this.offset+this.relativeOffset,F=this.parseUShort();return F===1?{posFormat:1,coverage:this.parsePointer(Pe.coverage),value:this.parseValueRecord()}:F===2?{posFormat:2,coverage:this.parsePointer(Pe.coverage),values:this.parseValueRecordList()}:void D.assert(!1,"0x"+P.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ee[2]=function(){var P,F,W,Y,ie=this.offset+this.relativeOffset,Q=this.parseUShort(),ie=(D.assert(Q===1||Q===2,"0x"+ie.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Pe.coverage)),oe=this.parseUShort(),me=this.parseUShort();return Q===1?{posFormat:Q,coverage:ie,valueFormat1:oe,valueFormat2:me,pairSets:this.parseList(Pe.pointer(Pe.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(oe),value2:this.parseValueRecord(me)}})))}:Q===2?(P=this.parsePointer(Pe.classDef),F=this.parsePointer(Pe.classDef),W=this.parseUShort(),Y=this.parseUShort(),{posFormat:Q,coverage:ie,valueFormat1:oe,valueFormat2:me,classDef1:P,classDef2:F,class1Count:W,class2Count:Y,classRecords:this.parseList(W,Pe.list(Y,function(){return{value1:this.parseValueRecord(oe),value2:this.parseValueRecord(me)}}))}):void 0},ee[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ee[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ee[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ee[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ee[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ee[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ee[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var ae=new Array(10),Te={parse:function(P,F){return F=(P=new Pe(P,F=F||0)).parseVersion(1),D.argument(F===1||F===1.1,"Unsupported GPOS table version "+F),F===1?{version:F,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(ee)}:{version:F,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(ee),variations:P.parseFeatureVariationsList()}},make:function(P){return new ve.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ve.ScriptList(P.scripts)},{name:"features",type:"TABLE",value:new ve.FeatureList(P.features)},{name:"lookups",type:"TABLE",value:new ve.LookupList(P.lookups,ae)}])}},Me={parse:function(P,F){if(P=new Fe.Parser(P,F),(F=P.parseUShort())===0){var W=P,Y={},Be=(W.skip("uShort"),W.parseUShort()),Q=(D.argument(Be===0,"Unsupported kern sub-table version."),W.skip("uShort",2),W.parseUShort());W.skip("uShort",3);for(var ie=0;ie<Q;ie+=1){var oe=W.parseUShort(),me=W.parseUShort(),Ee=W.parseShort();Y[oe+","+me]=Ee}return Y}if(F!==1)throw new Error("Unsupported kern table version ("+F+").");var Se=P,Ne={},Be=(Se.skip("uShort"),1<Se.parseULong()&&console.warn("Only the first kern subtable is supported."),Se.skip("uLong"),255&Se.parseUShort());if(Se.skip("uShort"),Be==0){var De=Se.parseUShort();Se.skip("uShort",3);for(var Ce=0;Ce<De;Ce+=1){var Ye=Se.parseUShort(),ze=Se.parseUShort(),He=Se.parseShort();Ne[Ye+","+ze]=He}}return Ne}},$e={parse:function(P,F,W,Y){for(var Q=new Fe.Parser(P,F),ie=Y?Q.parseUShort:Q.parseULong,oe=[],me=0;me<W+1;me+=1){var Ee=ie.call(Q);Y&&(Ee*=2),oe.push(Ee)}return oe}};function nt(P,F){t("fs").readFile(P,function(W,Y){if(W)return F(W.message);F(null,Dr(Y))})}function ht(P,F){var W=new XMLHttpRequest;W.open("get",P,!0),W.responseType="arraybuffer",W.onload=function(){return W.response?F(null,W.response):F("Font could not be loaded: "+W.statusText)},W.onerror=function(){F("Font could not be loaded")},W.send()}function wt(P,F){for(var W=[],Y=12,Q=0;Q<F;Q+=1){var ie=Fe.getTag(P,Y),oe=Fe.getULong(P,Y+4),me=Fe.getULong(P,Y+8),Ee=Fe.getULong(P,Y+12);W.push({tag:ie,checksum:oe,offset:me,length:Ee,compression:!1}),Y+=16}return W}function yt(W,F){if(F.compression!=="WOFF")return{data:W,offset:F.offset};var W=new Uint8Array(W.buffer,F.offset+2,F.compressedLength-2),Y=new Uint8Array(F.length);if(O(W,Y),Y.byteLength!==F.length)throw new Error("Decompression error: "+F.tag+" decompressed length doesn't match recorded length");return{data:new DataView(Y.buffer,0),offset:0}}function Ct(Ue){var F,W,Y,Q,ie,oe,me,Ee,Se,Ne,Be,De,Ce,Ye,ze=new jt({empty:!0}),He=new DataView(Ue,0),Ve=[],Ue=Fe.getTag(He,0);if(Ue===String.fromCharCode(0,1,0,0)||Ue==="true"||Ue==="typ1")ze.outlinesFormat="truetype",Ve=wt(He,Y=Fe.getUShort(He,4));else if(Ue==="OTTO")ze.outlinesFormat="cff",Ve=wt(He,Y=Fe.getUShort(He,4));else{if(Ue!=="wOFF")throw new Error("Unsupported OpenType signature "+Ue);var ut=Fe.getTag(He,4);if(ut===String.fromCharCode(0,1,0,0))ze.outlinesFormat="truetype";else{if(ut!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ue);ze.outlinesFormat="cff"}Ve=function(Dt,Ot){for(var ir=[],Vt=44,tr=0;tr<Ot;tr+=1){var Lt=Fe.getTag(Dt,Vt),er=Fe.getULong(Dt,Vt+4),Kr=Fe.getULong(Dt,Vt+8),Br=Fe.getULong(Dt,Vt+12),Ln=void 0,Ln=Kr<Br&&"WOFF";ir.push({tag:Lt,offset:er,compression:Ln,compressedLength:Kr,length:Br}),Vt+=20}return ir}(He,Y=Fe.getUShort(He,12))}for(var _t=0;_t<Y;_t+=1){var dt=Ve[_t],ft=void 0;switch(dt.tag){case"cmap":ft=yt(He,dt),ze.tables.cmap=de.parse(ft.data,ft.offset),ze.encoding=new qe(ze.tables.cmap);break;case"cvt ":ft=yt(He,dt),Ye=new Fe.Parser(ft.data,ft.offset),ze.tables.cvt=Ye.parseShortList(dt.length/2);break;case"fvar":ie=dt;break;case"fpgm":ft=yt(He,dt),Ye=new Fe.Parser(ft.data,ft.offset),ze.tables.fpgm=Ye.parseByteList(dt.length);break;case"head":ft=yt(He,dt),ze.tables.head=Cr.parse(ft.data,ft.offset),ze.unitsPerEm=ze.tables.head.unitsPerEm,F=ze.tables.head.indexToLocFormat;break;case"hhea":ft=yt(He,dt),ze.tables.hhea=Ae.parse(ft.data,ft.offset),ze.ascender=ze.tables.hhea.ascender,ze.descender=ze.tables.hhea.descender,ze.numberOfHMetrics=ze.tables.hhea.numberOfHMetrics;break;case"hmtx":Se=dt;break;case"ltag":ft=yt(He,dt),W=it.parse(ft.data,ft.offset);break;case"maxp":ft=yt(He,dt),ze.tables.maxp=Je.parse(ft.data,ft.offset),ze.numGlyphs=ze.tables.maxp.numGlyphs;break;case"name":De=dt;break;case"OS/2":ft=yt(He,dt),ze.tables.os2=Gt.parse(ft.data,ft.offset);break;case"post":ft=yt(He,dt),ze.tables.post=Jr.parse(ft.data,ft.offset),ze.glyphNames=new rt(ze.tables.post);break;case"prep":ft=yt(He,dt),Ye=new Fe.Parser(ft.data,ft.offset),ze.tables.prep=Ye.parseByteList(dt.length);break;case"glyf":oe=dt;break;case"loca":Be=dt;break;case"CFF ":Q=dt;break;case"kern":Ne=dt;break;case"GPOS":me=dt;break;case"GSUB":Ee=dt;break;case"meta":Ce=dt}}if(ut=yt(He,De),ze.tables.name=rr.parse(ut.data,ut.offset,W),ze.names=ze.tables.name,oe&&Be)Ue=F===0,ut=yt(He,Be),ut=$e.parse(ut.data,ut.offset,ze.numGlyphs,Ue),Ue=yt(He,oe),ze.glyphs=cn.parse(Ue.data,Ue.offset,ut,ze);else{if(!Q)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ue=yt(He,Q),lr.parse(Ue.data,Ue.offset,ze)}for(var ut=yt(He,Se),xt=(et.parse(ut.data,ut.offset,ze.numberOfHMetrics,ze.numGlyphs,ze.glyphs),ze),Rt=xt.tables.cmap.glyphIndexMap,zt=Object.keys(Rt),$t=0;$t<zt.length;$t+=1){var nr,sr=zt[$t],gr=Rt[sr];(nr=xt.glyphs.get(gr)).addUnicode(parseInt(sr))}for(var Nt=0;Nt<xt.glyphs.length;Nt+=1)nr=xt.glyphs.get(Nt),xt.cffEncoding?xt.isCIDFont?nr.name="gid"+Nt:nr.name=xt.cffEncoding.charset[Nt]:xt.glyphNames.names&&(nr.name=xt.glyphNames.glyphIndexToName(Nt));return Ne?(Ue=yt(He,Ne),ze.kerningPairs=Me.parse(Ue.data,Ue.offset)):ze.kerningPairs={},me&&(ut=yt(He,me),ze.tables.gpos=Te.parse(ut.data,ut.offset),ze.position.init()),Ee&&(Ue=yt(He,Ee),ze.tables.gsub=Ir.parse(Ue.data,Ue.offset)),ie&&(ut=yt(He,ie),ze.tables.fvar=le.parse(ut.data,ut.offset,ze.names)),Ce&&(Ue=yt(He,Ce),ze.tables.meta=Qr.parse(Ue.data,Ue.offset),ze.metas=ze.tables.meta),ze}f.Font=jt,f.Glyph=ot,f.Path=Z,f.BoundingBox=J,f._parse=Fe,f.parse=Ct,f.load=function(P,F){(typeof window>"u"?nt:ht)(P,function(W,Y){if(W)return F(W);var Q;try{Q=Ct(Y)}catch(ie){return F(ie,null)}return F(null,Q)})},f.loadSync=function(P){return Ct(Dr(t("fs").readFileSync(P)))},Object.defineProperty(f,"__esModule",{value:!0})},i(typeof l=="object"&&a!==void 0?l:c.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],250:[function(t,a,l){(function(o){function c(y,_){for(var u=0,m=y.length-1;0<=m;m--){var p=y[m];p==="."?y.splice(m,1):p===".."?(y.splice(m,1),u++):u&&(y.splice(m,1),u--)}if(_)for(;u--;)y.unshift("..");return y}function i(y,_){if(y.filter)return y.filter(_);for(var u=[],m=0;m<y.length;m++)_(y[m],m,y)&&u.push(y[m]);return u}l.resolve=function(){for(var y="",_=!1,u=arguments.length-1;-1<=u&&!_;u--){var m=0<=u?arguments[u]:o.cwd();if(typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");m&&(y=m+"/"+y,_=m.charAt(0)==="/")}return(_?"/":"")+(y=c(i(y.split("/"),function(p){return!!p}),!_).join("/"))||"."},l.normalize=function(y){var _=l.isAbsolute(y),u=f(y,-1)==="/";return(y=(y=c(i(y.split("/"),function(m){return!!m}),!_).join("/"))||_?y:".")&&u&&(y+="/"),(_?"/":"")+y},l.isAbsolute=function(y){return y.charAt(0)==="/"},l.join=function(){var y=Array.prototype.slice.call(arguments,0);return l.normalize(i(y,function(_,u){if(typeof _!="string")throw new TypeError("Arguments to path.join must be strings");return _}).join("/"))},l.relative=function(y,_){function u(S){for(var k=0;k<S.length&&S[k]==="";k++);for(var T=S.length-1;0<=T&&S[T]==="";T--);return T<k?[]:S.slice(k,T-k+1)}y=l.resolve(y).substr(1),_=l.resolve(_).substr(1);for(var m=u(y.split("/")),p=u(_.split("/")),g=Math.min(m.length,p.length),x=g,b=0;b<g;b++)if(m[b]!==p[b]){x=b;break}for(var E=[],b=x;b<m.length;b++)E.push("..");return(E=E.concat(p.slice(x))).join("/")},l.sep="/",l.delimiter=":",l.dirname=function(y){if(typeof y!="string"&&(y+=""),y.length===0)return".";for(var _=y.charCodeAt(0)===47,u=-1,m=!0,p=y.length-1;1<=p;--p)if(y.charCodeAt(p)===47){if(!m){u=p;break}}else m=!1;return u===-1?_?"/":".":_&&u===1?"/":y.slice(0,u)},l.basename=function(y,_){return y=function(u){typeof u!="string"&&(u+="");for(var m=0,p=-1,g=!0,x=u.length-1;0<=x;--x)if(u.charCodeAt(x)===47){if(!g){m=x+1;break}}else p===-1&&(g=!1,p=x+1);return p===-1?"":u.slice(m,p)}(y),y=_&&y.substr(-1*_.length)===_?y.substr(0,y.length-_.length):y},l.extname=function(y){typeof y!="string"&&(y+="");for(var _=-1,u=0,m=-1,p=!0,g=0,x=y.length-1;0<=x;--x){var b=y.charCodeAt(x);if(b===47){if(p)continue;u=x+1;break}m===-1&&(p=!1,m=x+1),b===46?_===-1?_=x:g!==1&&(g=1):_!==-1&&(g=-1)}return _===-1||m===-1||g===0||g===1&&_===m-1&&_===u+1?"":y.slice(_,m)};var f="ab".substr(-1)==="b"?function(y,_,u){return y.substr(_,u)}:function(y,_,u){return _<0&&(_=y.length+_),y.substr(_,u)}}).call(this,t("_process"))},{_process:251}],251:[function(t,i,l){var o,c,i=i.exports={};function f(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:f}catch{o=f}try{c=typeof clearTimeout=="function"?clearTimeout:y}catch{c=y}function _(k){if(o===setTimeout)return setTimeout(k,0);if((o===f||!o)&&setTimeout)return(o=setTimeout)(k,0);try{return o(k,0)}catch{try{return o.call(null,k,0)}catch{return o.call(this,k,0)}}}var u,m=[],p=!1,g=-1;function x(){p&&u&&(p=!1,u.length?m=u.concat(m):g=-1,m.length&&b())}function b(){if(!p){for(var k=_(x),T=(p=!0,m.length);T;){for(u=m,m=[];++g<T;)u&&u[g].run();g=-1,T=m.length}u=null,p=!1,function(j){if(c===clearTimeout)return clearTimeout(j);if((c===y||!c)&&clearTimeout)return(c=clearTimeout)(j);try{c(j)}catch{try{return c.call(null,j)}catch{return c.call(this,j)}}}(k)}}function E(k,T){this.fun=k,this.array=T}function S(){}i.nextTick=function(k){var T=new Array(arguments.length-1);if(1<arguments.length)for(var j=1;j<arguments.length;j++)T[j-1]=arguments[j];m.push(new E(k,T)),m.length!==1||p||_(b)},E.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=S,i.addListener=S,i.once=S,i.off=S,i.removeListener=S,i.removeAllListeners=S,i.emit=S,i.prependListener=S,i.prependOnceListener=S,i.listeners=function(k){return[]},i.binding=function(k){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(k){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],252:[function(t,a,l){a=function(o){var c,i=Object.prototype,f=i.hasOwnProperty,A=typeof Symbol=="function"?Symbol:{},y=A.iterator||"@@iterator",_=A.asyncIterator||"@@asyncIterator",u=A.toStringTag||"@@toStringTag";function m(H,X,U,K){var Z,z,B,D,X=X&&X.prototype instanceof k?X:k,X=Object.create(X.prototype),K=new q(K||[]);return X._invoke=(Z=H,z=U,B=K,D=g,function(re,se){if(D===b)throw new Error("Generator is already running");if(D===E){if(re==="throw")throw se;return L()}for(B.method=re,B.arg=se;;){var fe=B.delegate;if(fe&&(fe=function xe(he,_e){var ye=he.iterator[_e.method];if(ye===c){if(_e.delegate=null,_e.method==="throw"){if(he.iterator.return&&(_e.method="return",_e.arg=c,xe(he,_e),_e.method==="throw"))return S;_e.method="throw",_e.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}if(ye=p(ye,he.iterator,_e.arg),ye.type==="throw")return _e.method="throw",_e.arg=ye.arg,_e.delegate=null,S;if(ye=ye.arg,!ye)return _e.method="throw",_e.arg=new TypeError("iterator result is not an object"),_e.delegate=null,S;{if(!ye.done)return ye;_e[he.resultName]=ye.value,_e.next=he.nextLoc,_e.method!=="return"&&(_e.method="next",_e.arg=c)}return _e.delegate=null,S}(fe,B),fe)){if(fe===S)continue;return fe}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(D===g)throw D=E,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);if(D=b,fe=p(Z,z,B),fe.type==="normal"){if(D=B.done?E:x,fe.arg!==S)return{value:fe.arg,done:B.done}}else fe.type==="throw"&&(D=E,B.method="throw",B.arg=fe.arg)}}),X}function p(H,O,U){try{return{type:"normal",arg:H.call(O,U)}}catch(J){return{type:"throw",arg:J}}}o.wrap=m;var g="suspendedStart",x="suspendedYield",b="executing",E="completed",S={};function k(){}function T(){}function j(){}var A={},C=(A[y]=function(){return this},Object.getPrototypeOf),C=C&&C(C(M([]))),N=(C&&C!==i&&f.call(C,y)&&(A=C),j.prototype=k.prototype=Object.create(A));function V(H){["next","throw","return"].forEach(function(O){H[O]=function(U){return this._invoke(O,U)}})}function I(H){var O;this._invoke=function(U,J){function Z(){return new Promise(function(z,B){(function D(xe,K,re,se){var fe,xe=p(H[xe],H,K);if(xe.type!=="throw")return(K=(fe=xe.arg).value)&&typeof K=="object"&&f.call(K,"__await")?Promise.resolve(K.__await).then(function(he){D("next",he,re,se)},function(he){D("throw",he,re,se)}):Promise.resolve(K).then(function(he){fe.value=he,re(fe)},function(he){return D("throw",he,re,se)});se(xe.arg)})(U,J,z,B)})}return O=O?O.then(Z,Z):Z()}}function G(H){var O={tryLoc:H[0]};1 in H&&(O.catchLoc=H[1]),2 in H&&(O.finallyLoc=H[2],O.afterLoc=H[3]),this.tryEntries.push(O)}function R(H){var O=H.completion||{};O.type="normal",delete O.arg,H.completion=O}function q(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(G,this),this.reset(!0)}function M(H){if(H){var O,U=H[y];if(U)return U.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length))return O=-1,(U=function J(){for(;++O<H.length;)if(f.call(H,O))return J.value=H[O],J.done=!1,J;return J.value=c,J.done=!0,J}).next=U}return{next:L}}function L(){return{value:c,done:!0}}return(T.prototype=N.constructor=j).constructor=T,j[u]=T.displayName="GeneratorFunction",o.isGeneratorFunction=function(H){return H=typeof H=="function"&&H.constructor,!!H&&(H===T||(H.displayName||H.name)==="GeneratorFunction")},o.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,j):(H.__proto__=j,u in H||(H[u]="GeneratorFunction")),H.prototype=Object.create(N),H},o.awrap=function(H){return{__await:H}},V(I.prototype),I.prototype[_]=function(){return this},o.AsyncIterator=I,o.async=function(H,O,U,J){var Z=new I(m(H,O,U,J));return o.isGeneratorFunction(O)?Z:Z.next().then(function(z){return z.done?z.value:Z.next()})},V(N),N[u]="Generator",N[y]=function(){return this},N.toString=function(){return"[object Generator]"},o.keys=function(H){var O,U=[];for(O in H)U.push(O);return U.reverse(),function J(){for(;U.length;){var Z=U.pop();if(Z in H)return J.value=Z,J.done=!1,J}return J.done=!0,J}},o.values=M,q.prototype={constructor:q,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(R),!H)for(var O in this)O.charAt(0)==="t"&&f.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=c)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var O=this;function U(X,K){return z.type="throw",z.arg=H,O.next=X,K&&(O.method="next",O.arg=c),!!K}for(var J=this.tryEntries.length-1;0<=J;--J){var Z=this.tryEntries[J],z=Z.completion;if(Z.tryLoc==="root")return U("end");if(Z.tryLoc<=this.prev){var B=f.call(Z,"catchLoc"),D=f.call(Z,"finallyLoc");if(B&&D){if(this.prev<Z.catchLoc)return U(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return U(Z.finallyLoc)}else if(B){if(this.prev<Z.catchLoc)return U(Z.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return U(Z.finallyLoc)}}}},abrupt:function(H,O){for(var U=this.tryEntries.length-1;0<=U;--U){var J=this.tryEntries[U];if(J.tryLoc<=this.prev&&f.call(J,"finallyLoc")&&this.prev<J.finallyLoc){var Z=J;break}}var z=(Z=Z&&(H==="break"||H==="continue")&&Z.tryLoc<=O&&O<=Z.finallyLoc?null:Z)?Z.completion:{};return z.type=H,z.arg=O,Z?(this.method="next",this.next=Z.finallyLoc,S):this.complete(z)},complete:function(H,O){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&O&&(this.next=O),S},finish:function(H){for(var O=this.tryEntries.length-1;0<=O;--O){var U=this.tryEntries[O];if(U.finallyLoc===H)return this.complete(U.completion,U.afterLoc),R(U),S}},catch:function(H){for(var O=this.tryEntries.length-1;0<=O;--O){var U,J,Z=this.tryEntries[O];if(Z.tryLoc===H)return(U=Z.completion).type==="throw"&&(J=U.arg,R(Z)),J}throw new Error("illegal catch attempt")},delegateYield:function(H,O,U){return this.delegate={iterator:M(H),resultName:O,nextLoc:U},this.method==="next"&&(this.arg=c),S}},o}(typeof a=="object"?a.exports:{});try{regeneratorRuntime=a}catch{Function("r","regeneratorRuntime = r")(a)}},{}],253:[function(t,a,l){(function(o){var c,i,f,y,_,u,m,p,g,x;function b(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(R))throw new TypeError("Invalid character in header field name");return R.toLowerCase()}function E(R){return R=typeof R!="string"?String(R):R}function S(R){var q={next:function(){var M=R.shift();return{done:M===void 0,value:M}}};return i&&(q[Symbol.iterator]=function(){return q}),q}function k(R){this.map={},R instanceof k?R.forEach(function(q,M){this.append(M,q)},this):Array.isArray(R)?R.forEach(function(q){this.append(q[0],q[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(q){this.append(q,R[q])},this)}function T(R){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}function j(R){return new Promise(function(q,M){R.onload=function(){q(R.result)},R.onerror=function(){M(R.error)}})}function A(R){var q=new FileReader,M=j(q);return q.readAsArrayBuffer(R),M}function C(R){var q;return R.slice?R.slice(0):((q=new Uint8Array(R.byteLength)).set(new Uint8Array(R)),q.buffer)}function N(){return this.bodyUsed=!1,this._initBody=function(R){if(this._bodyInit=R)if(typeof R=="string")this._bodyText=R;else if(f&&Blob.prototype.isPrototypeOf(R))this._bodyBlob=R;else if(y&&FormData.prototype.isPrototypeOf(R))this._bodyFormData=R;else if(c&&URLSearchParams.prototype.isPrototypeOf(R))this._bodyText=R.toString();else if(_&&f&&m(R))this._bodyArrayBuffer=C(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_||!ArrayBuffer.prototype.isPrototypeOf(R)&&!p(R))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=C(R)}else this._bodyText="";this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f&&(this.blob=function(){var R=T(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?T(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var R,q,M=T(this);if(M)return M;if(this._bodyBlob)return M=this._bodyBlob,R=new FileReader,q=j(R),R.readAsText(M),q;if(this._bodyArrayBuffer)return Promise.resolve(function(L){for(var H=new Uint8Array(L),O=new Array(H.length),U=0;U<H.length;U++)O[U]=String.fromCharCode(H[U]);return O.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}function V(R,q){var M,L=(q=q||{}).body;if(R instanceof V){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,q.headers||(this.headers=new k(R.headers)),this.method=R.method,this.mode=R.mode,L||R._bodyInit==null||(L=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=q.credentials||this.credentials||"omit",!q.headers&&this.headers||(this.headers=new k(q.headers)),this.method=(R=q.method||this.method||"GET",M=R.toUpperCase(),-1<g.indexOf(M)?M:R),this.mode=q.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(L)}function I(R){var q=new FormData;return R.trim().split("&").forEach(function(M){var L;M&&(L=(M=M.split("=")).shift().replace(/\+/g," "),M=M.join("=").replace(/\+/g," "),q.append(decodeURIComponent(L),decodeURIComponent(M)))}),q}function G(R,q){q=q||{},this.type="default",this.status=q.status===void 0?200:q.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new k(q.headers),this.url=q.url||"",this._initBody(R)}o.fetch||(c="URLSearchParams"in o,i="Symbol"in o&&"iterator"in Symbol,f="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),y="FormData"in o,(_="ArrayBuffer"in o)&&(u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(R){return R&&DataView.prototype.isPrototypeOf(R)},p=ArrayBuffer.isView||function(R){return R&&-1<u.indexOf(Object.prototype.toString.call(R))}),k.prototype.append=function(R,q){R=b(R),q=E(q);var M=this.map[R];this.map[R]=M?M+","+q:q},k.prototype.delete=function(R){delete this.map[b(R)]},k.prototype.get=function(R){return R=b(R),this.has(R)?this.map[R]:null},k.prototype.has=function(R){return this.map.hasOwnProperty(b(R))},k.prototype.set=function(R,q){this.map[b(R)]=E(q)},k.prototype.forEach=function(R,q){for(var M in this.map)this.map.hasOwnProperty(M)&&R.call(q,this.map[M],M,this)},k.prototype.keys=function(){var R=[];return this.forEach(function(q,M){R.push(M)}),S(R)},k.prototype.values=function(){var R=[];return this.forEach(function(q){R.push(q)}),S(R)},k.prototype.entries=function(){var R=[];return this.forEach(function(q,M){R.push([M,q])}),S(R)},i&&(k.prototype[Symbol.iterator]=k.prototype.entries),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},N.call(V.prototype),N.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new k(this.headers),url:this.url})},G.error=function(){var R=new G(null,{status:0,statusText:""});return R.type="error",R},x=[301,302,303,307,308],G.redirect=function(R,q){if(x.indexOf(q)===-1)throw new RangeError("Invalid status code");return new G(null,{status:q,headers:{location:R}})},o.Headers=k,o.Request=V,o.Response=G,o.fetch=function(R,q){return new Promise(function(M,L){var H=new V(R,q),O=new XMLHttpRequest;O.onload=function(){var U,J={status:O.status,statusText:O.statusText,headers:(J=O.getAllResponseHeaders()||"",U=new k,J.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(B){var B=B.split(":"),D=B.shift().trim();D&&(B=B.join(":").trim(),U.append(D,B))}),U)},Z=(J.url="responseURL"in O?O.responseURL:J.headers.get("X-Request-URL"),"response"in O?O.response:O.responseText);M(new G(Z,J))},O.onerror=function(){L(new TypeError("Network request failed"))},O.ontimeout=function(){L(new TypeError("Network request failed"))},O.open(H.method,H.url,!0),H.credentials==="include"?O.withCredentials=!0:H.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&f&&(O.responseType="blob"),H.headers.forEach(function(U,J){O.setRequestHeader(J,U)}),O.send(H._bodyInit===void 0?null:H._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],254:[function(t,a,l){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o,c=f(t("../core/main")),i=f(t("../color/color_conversion"));function f(u){return u&&u.__esModule?u:{default:u}}var y=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],_=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];c.default.prototype._rgbColorName=function(g){var m,p,g=i.default._rgbaToHSBA(g),x=[(o=g)[0],g[1],g[2]];x[0]!==0&&(x[0]=Math.round(100*x[0]),(g=x[0].toString().split(""))[p=g.length-1]=parseInt(g[p]),g[p]<2.5?g[p]=0:2.5<=g[p]&&g[p]<7.5&&(g[p]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[p]&&(g[p]=0,g[0]=g[0]+1),x[0]=10*g[0]+g[1]):7.5<=g[p]?x[0]=10:x[0]=g[p]),x[2]=x[2]/255;for(var b=x.length-1;1<=b;b--)x[b]<=.25?x[b]=0:.25<x[b]&&x[b]<.75?x[b]=.5:x[b]=1;if(x[0]===0&&x[1]===0&&x[2]===1){for(var E=2;0<=E;E--)o[E]=Math.round(1e4*o[E])/1e4;for(var S=0;S<y.length;S++){if(y[S].h===o[0]&&y[S].s===o[1]&&y[S].b===o[2]){m=y[S].name;break}m="white"}}else for(var k=0;k<_.length;k++)if(_[k].h===x[0]&&_[k].s===x[1]&&_[k].b===x[2]){m=_[k].name;break}return m},t=c.default,l.default=t},{"../color/color_conversion":260,"../core/main":275,"core-js/modules/es.function.name":168,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198}],255:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t},c="_Description",i="_fallbackDesc",f="_fallbackTable",y="_Label",_="_labelDesc",u="_labelTable";function m(p){if(p==="label"||p==="fallback")throw new Error("description should not be LABEL or FALLBACK");return p.endsWith(".")||p.endsWith(";")||p.endsWith(",")||p.endsWith("?")||p.endsWith("!")||(p+="."),p}o.default.prototype.describe=function(p,g){var x;o.default._validateParameters("describe",arguments),typeof p=="string"&&(x=this.canvas.id,p=m(p),this.dummyDOM||(this.dummyDOM=document.getElementById(x).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==p&&(this.descriptions.fallback.innerHTML=p):this._describeHTML("fallback",p),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==p&&(this.descriptions.label.innerHTML=p):this._describeHTML("label",p)))},o.default.prototype.describeElement=function(p,g,x){var b,E;o.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof p=="string"&&(b=this.canvas.id,g=m(g),E=function(S){if(S==="label"||S==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return S.endsWith(".")||S.endsWith(";")||S.endsWith(",")?S=S.replace(/.$/,":"):S.endsWith(":")||(S+=":"),S}(p),p=p.replace(/[^a-zA-Z0-9]/g,""),E='<th scope="row">'.concat(E,"</th><td>").concat(g,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[p]?this.descriptions.fallbackElements[p].innerHTML!==E&&(this.descriptions.fallbackElements[p].innerHTML=E):this._describeElementHTML("fallback",p,E),x===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[p]?this.descriptions.labelElements[p].innerHTML!==E&&(this.descriptions.labelElements[p].innerHTML=E):this._describeElementHTML("label",p,E)))},o.default.prototype._describeHTML=function(p,g){var x,b=this.canvas.id;p==="fallback"?(this.dummyDOM.querySelector("#".concat(b+c))?this.dummyDOM.querySelector("#"+b+f).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+i,'"></p>')):(x='<div id="'.concat(b).concat(c,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(i,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#".concat(b)).innerHTML=x),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(i)),this.descriptions.fallback.innerHTML=g):p==="label"&&(this.dummyDOM.querySelector("#".concat(b+y))?this.dummyDOM.querySelector("#".concat(b+u))&&this.dummyDOM.querySelector("#".concat(b+u)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(_,'"></p>')):(x='<div id="'.concat(b).concat(y,'" class="p5Label"><p id="').concat(b).concat(_,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",x)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+_),this.descriptions.label.innerHTML=g)},o.default.prototype._describeElementHTML=function(p,g,x){var b,E=this.canvas.id;p==="fallback"?(this.dummyDOM.querySelector("#".concat(E+c))?this.dummyDOM.querySelector("#"+E+f)||this.dummyDOM.querySelector("#"+E+i).insertAdjacentHTML("afterend",'<table id="'.concat(E).concat(f,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(E).concat(c,'" role="region" aria-label="Canvas Description"><table id="').concat(E).concat(f,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(E,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(E,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+E).innerHTML=b),(b=document.createElement("tr")).id=E+"_fte_"+g,this.dummyDOM.querySelector("#"+E+f).appendChild(b),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(E).concat("_fte_").concat(g)),this.descriptions.fallbackElements[g].innerHTML=x):p==="label"&&(this.dummyDOM.querySelector("#".concat(E+y))?this.dummyDOM.querySelector("#".concat(E+u))||this.dummyDOM.querySelector("#"+E+_).insertAdjacentHTML("afterend",'<table id="'.concat(E+u,'"></table>')):(b='<div id="'.concat(E).concat(y,'" class="p5Label"><table id="').concat(E).concat(u,'"></table></div>'),this.dummyDOM.querySelector("#".concat(E,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(E,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+E).insertAdjacentHTML("afterend",b)),(p=document.createElement("tr")).id=E+"_lte_"+g,this.dummyDOM.querySelector("#"+E+u).appendChild(p),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(E).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=x)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.replace":196}],256:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(o){var c,i,f,y;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(c=this._accessibleOutputs[o],f=function(_,u,m,p){return u="".concat(u," canvas, ").concat(m," by ").concat(p," pixels, contains ").concat(_[0]),u=(_[0]===1?"".concat(u," shape: "):"".concat(u," shapes: ")).concat(_[1]),u}((i=function(_,u){var m,p="",g="",x=0;for(m in u){var b,E=0;for(b in u[m]){var S='<li id="'.concat(_,"shape").concat(x,'">').concat(u[m][b].color," ").concat(m,",");m==="line"?S+=" location = ".concat(u[m][b].pos,", length = ").concat(u[m][b].length," pixels"):(S+=" location = ".concat(u[m][b].pos),m!=="point"&&(S+=", area = ".concat(u[m][b].area," %")),S+="</li>"),p+=S,E++,x++}g=1<E?"".concat(g," ").concat(E," ").concat(m,"s"):"".concat(g," ").concat(E," ").concat(m)}return{numShapes:[x,g],details:p}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),y=function(_,u){var m,p,g=0,x="",b=Array.from(Array(10),function(){return Array(10)});for(m in u)for(var E in u[m]){var S=void 0;S=m!=="line"?'<a href="#'.concat(_,"shape").concat(g,'">').concat(u[m][E].color," ").concat(m,"</a>"):'<a href="#'.concat(_,"shape").concat(g,'">').concat(u[m][E].color," ").concat(m," midpoint</a>"),b[u[m][E].loc.locY][u[m][E].loc.locX]?b[u[m][E].loc.locY][u[m][E].loc.locX]=b[u[m][E].loc.locY][u[m][E].loc.locX]+"  "+S:b[u[m][E].loc.locY][u[m][E].loc.locX]=S,g++}for(p in b){var k,T="<tr>";for(k in b[p])T+="<td>",b[p][k]!==void 0&&(T+=b[p][k]),T+="</td>";x=x+T+"</tr>"}return x}(o,this.ingredients.shapes),f!==c.summary.innerHTML&&(c.summary.innerHTML=f),y!==c.map.innerHTML&&(c.map.innerHTML=y),i.details!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=i.details),this._accessibleOutputs[o]=c)},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":158,"core-js/modules/es.array.map":164,"core-js/modules/es.string.iterator":192}],257:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(f){return function(y){if(Array.isArray(y)){for(var _=0,u=new Array(y.length);_<y.length;_++)u[_]=y[_];return u}}(f)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(f,y,_){return y=Math.floor(f[0]/y*10),f=Math.floor(f[1]/_*10),y===10&&(y-=1),f===10&&(f-=1),{locX:y,locY:f}}o.default.prototype.textOutput=function(f){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),f===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(f){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),f===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(f,y){var _,u,m,p=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),"");y==="Fallback"?(_=p+f,this.dummyDOM.querySelector("#".concat(u=p+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(p,"_Description"))?this.dummyDOM.querySelector("#".concat(p,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(p)).innerHTML='<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>'))):y==="Label"&&(_=p+f+(g=y),this.dummyDOM.querySelector("#".concat(u=p+"accessibleOutput"+y))||(this.dummyDOM.querySelector("#".concat(p,"_Label"))?this.dummyDOM.querySelector("#".concat(p,"_Label")):this.dummyDOM.querySelector("#".concat(p))).insertAdjacentHTML("afterend",'<div id="'.concat(u,'"></div>'))),this._accessibleOutputs[_]={},f==="textOutput"?(g="#".concat(p,"gridOutput").concat(g),m='<div id="'.concat(_,'">Text Output<div id="').concat(_,'Summary" aria-label="text output summary"><p id="').concat(_,'_summary"></p><ul id="').concat(_,'_list"></ul></div><table id="').concat(_,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(u)).innerHTML=m,this._accessibleOutputs[_].list=this.dummyDOM.querySelector("#".concat(_,"_list"))):f==="gridOutput"&&(g="#".concat(p,"textOutput").concat(g),m='<div id="'.concat(_,'">Grid Output<p id="').concat(_,'_summary" aria-label="grid output summary"><table id="').concat(_,'_map" summary="grid output content"></table><ul id="').concat(_,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",m):this.dummyDOM.querySelector("#".concat(u)).innerHTML=m,this._accessibleOutputs[_].map=this.dummyDOM.querySelector("#".concat(_,"_map"))),this._accessibleOutputs[_].shapeDetails=this.dummyDOM.querySelector("#".concat(_,"_shapeDetails")),this._accessibleOutputs[_].summary=this.dummyDOM.querySelector("#".concat(_,"_summary"))},o.default.prototype._updateAccsOutput=function(){var f=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(f+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(f+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(f+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(f+"gridOutputLabel"))},o.default.prototype._accsBackground=function(f){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==f&&(this.ingredients.colors.backgroundRGBA=f,this.ingredients.colors.background=this._rgbColorName(f))},o.default.prototype._accsCanvasColors=function(f,y){f==="fill"?this.ingredients.colors.fillRGBA!==y&&(this.ingredients.colors.fillRGBA=y,this.ingredients.colors.fill=this._rgbColorName(y)):f==="stroke"&&this.ingredients.colors.strokeRGBA!==y&&(this.ingredients.colors.strokeRGBA=y,this.ingredients.colors.stroke=this._rgbColorName(y))},o.default.prototype._accsOutput=function(f,y){f==="ellipse"&&y[2]===y[3]?f="circle":f==="rectangle"&&y[2]===y[3]&&(f="square");var _,u,m={},p=!0,g=function(b,E){var S;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(S=Math.round(E[0]+E[2]/2),Math.round(E[1]+E[3]/2)):b==="triangle"?(S=(E[0]+E[2]+E[4])/3,(E[1]+E[3]+E[5])/3):b==="quadrilateral"?(S=(E[0]+E[2]+E[4]+E[6])/4,(E[1]+E[3]+E[5]+E[7])/4):b==="line"?(S=(E[0]+E[2])/2,(E[1]+E[3])/2):(S=E[0],E[1]),[S,b]}(f,y);if(f==="line"?(m.color=this.ingredients.colors.stroke,m.length=Math.round(this.dist(y[0],y[1],y[2],y[3])),_=this._getPos(y[0],[1]),u=this._getPos(y[2],[3]),m.loc=i(g,this.width,this.height),m.pos=_===u?"at ".concat(_):"from ".concat(_," to ").concat(u)):(f==="point"?m.color=this.ingredients.colors.stroke:(m.color=this.ingredients.colors.fill,m.area=this._getArea(f,y)),m.pos=this._getPos.apply(this,c(g)),m.loc=i(g,this.width,this.height)),this.ingredients.shapes[f]){if(this.ingredients.shapes[f]!==[m]){for(var x in this.ingredients.shapes[f])JSON.stringify(this.ingredients.shapes[f][x])===JSON.stringify(m)&&(p=!1);p===!0&&this.ingredients.shapes[f].push(m)}}else this.ingredients.shapes[f]=[m]},o.default.prototype._getPos=function(u,_){var u=new DOMPointReadOnly(u,_),_=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),u=u.matrixTransform(_),_=u.x,u=u.y,m=this.width,p=this.height;return _<.4*m?u<.4*p?"top left":.6*p<u?"bottom left":"mid left":.6*m<_?u<.4*p?"top right":.6*p<u?"bottom right":"mid right":u<.4*p?"top middle":.6*p<u?"bottom middle":"middle"},o.default.prototype._getArea=function(f,y){var _,u,m=0,p=(f==="arc"?(m=(_=((y[5]-y[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*y[2]*y[3]/8,y[6]!=="open"&&y[6]!=="chord"||(u=y[0],E=y[1],p=y[0]+y[2]/2*Math.cos(y[4]).toFixed(2),S=y[1]+y[3]/2*Math.sin(y[4]).toFixed(2),x=y[0]+y[2]/2*Math.cos(y[5]).toFixed(2),g=y[1]+y[3]/2*Math.sin(y[5]).toFixed(2),u=Math.abs(u*(S-g)+p*(g-E)+x*(E-S))/2,_>Math.PI?m+=u:m-=u)):f==="ellipse"||f==="circle"?m=3.14*y[2]/2*y[3]/2:f==="line"||f==="point"?m=0:f==="quadrilateral"?m=Math.abs((y[6]+y[0])*(y[7]-y[1])+(y[0]+y[2])*(y[1]-y[3])+(y[2]+y[4])*(y[3]-y[5])+(y[4]+y[6])*(y[5]-y[7]))/2:f==="rectangle"||f==="square"?m=y[2]*y[3]:f==="triangle"&&(m=Math.abs(y[0]*(y[3]-y[5])+y[2]*(y[5]-y[1])+y[4]*(y[1]-y[3]))/2),this.width*this._pixelDensity),g=this.height*this._pixelDensity,x=[new DOMPoint(0,0),new DOMPoint(p,0),new DOMPoint(p,g),new DOMPoint(0,g)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),E=x.map(function(k){return k.matrixTransform(b)}),S=Math.abs((E[3].x+E[0].x)*(E[3].y-E[0].y)+(E[0].x+E[1].x)*(E[0].y-E[1].y)+(E[1].x+E[2].x)*(E[1].y-E[2].y)+(E[2].x+E[3].x)*(E[2].y-E[3].y))/2;return Math.round(100*m/S)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],258:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(o){var c,i,f,y;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(c=this._accessibleOutputs[o],f=function(_,u,m,p){return m="Your output is a, ".concat(m," by ").concat(p," pixels, ").concat(u," canvas containing the following"),m=_===1?"".concat(m," shape:"):"".concat(m," ").concat(_," shapes:"),m}((i=function(_,u){var m,p="",g=0;for(m in u)for(var x in u[m]){var b='<li><a href="#'.concat(_,"shape").concat(g,'">').concat(u[m][x].color," ").concat(m,"</a>");m==="line"?b+=", ".concat(u[m][x].pos,", ").concat(u[m][x].length," pixels long.</li>"):(b+=", at ".concat(u[m][x].pos),m!=="point"&&(b+=", covering ".concat(u[m][x].area,"% of the canvas")),b+=".</li>"),p+=b,g++}return{numShapes:g,listShapes:p}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),y=function(_,u){var m,p="",g=0;for(m in u)for(var x in u[m]){var b='<tr id="'.concat(_,"shape").concat(g,'"><th>').concat(u[m][x].color," ").concat(m,"</th>");m==="line"?b+="<td>location = ".concat(u[m][x].pos,"</td><td>length = ").concat(u[m][x].length," pixels</td></tr>"):(b+="<td>location = ".concat(u[m][x].pos,"</td>"),m!=="point"&&(b+="<td> area = ".concat(u[m][x].area,"%</td>")),b+="</tr>"),p+=b,g++}return p}(o,this.ingredients.shapes),f!==c.summary.innerHTML&&(c.summary.innerHTML=f),i.listShapes!==c.list.innerHTML&&(c.list.innerHTML=i.listShapes),y!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=y),this._accessibleOutputs[o]=c)},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151}],259:[function(t,a,l){var o=(o=t("./core/main"))&&o.__esModule?o:{default:o};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),a.exports=o.default},{"./accessibility/color_namer":254,"./accessibility/describe":255,"./accessibility/gridOutput":256,"./accessibility/outputs":257,"./accessibility/textOutput":258,"./color/color_conversion":260,"./color/creating_reading":261,"./color/p5.Color":262,"./color/setting":263,"./core/constants":264,"./core/environment":265,"./core/friendly_errors/fes_core":266,"./core/friendly_errors/file_errors":267,"./core/friendly_errors/sketch_reader":268,"./core/friendly_errors/stacktrace":269,"./core/friendly_errors/validate_params":270,"./core/helpers":271,"./core/init":272,"./core/legacy":274,"./core/main":275,"./core/p5.Element":276,"./core/p5.Graphics":277,"./core/p5.Renderer":278,"./core/p5.Renderer2D":279,"./core/preload":280,"./core/rendering":281,"./core/shape/2d_primitives":282,"./core/shape/attributes":283,"./core/shape/curves":284,"./core/shape/vertex":285,"./core/shim":286,"./core/structure":287,"./core/transform":288,"./data/local_storage.js":289,"./data/p5.TypedDict":290,"./dom/dom":291,"./events/acceleration":292,"./events/keyboard":293,"./events/mouse":294,"./events/touch":295,"./image/filters":296,"./image/image":297,"./image/loading_displaying":298,"./image/p5.Image":299,"./image/pixels":300,"./io/files":301,"./io/p5.Table":302,"./io/p5.TableRow":303,"./io/p5.XML":304,"./math/calculation":305,"./math/math":306,"./math/noise":307,"./math/p5.Vector":308,"./math/random":309,"./math/trigonometry":310,"./typography/attributes":311,"./typography/loading_displaying":312,"./typography/p5.Font":313,"./utilities/array_functions":314,"./utilities/conversion":315,"./utilities/string_functions":316,"./utilities/time_date":317,"./webgl/3d_primitives":318,"./webgl/interaction":320,"./webgl/light":321,"./webgl/loading":322,"./webgl/material":323,"./webgl/p5.Camera":324,"./webgl/p5.DataArray":325,"./webgl/p5.Framebuffer":326,"./webgl/p5.Geometry":327,"./webgl/p5.Matrix":328,"./webgl/p5.RenderBuffer":329,"./webgl/p5.RendererGL":332,"./webgl/p5.RendererGL.Immediate":330,"./webgl/p5.RendererGL.Retained":331,"./webgl/p5.Shader":333,"./webgl/p5.Texture":334,"./webgl/text":335}],260:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(o){var c=o[0],i=o[1],f=o[2],y=(2-i)*f/2;return y!=0&&(y==1?i=0:y<.5?i/=2-i:i=i*f/(2-2*y)),[c,i,y,o[3]]},_hsbaToRGBA:function(o){var c,i,f,y,_,u=6*o[0],m=o[1],p=o[2];return m===0?[p,p,p,o[3]]:(i=p*(1-m),f=p*(1-m*(u-(c=Math.floor(u)))),m=p*(1-m*(1+c-u)),u=c===1?(y=f,_=p,i):c===2?(y=i,_=p,m):c===3?(y=i,_=f,p):c===4?(y=m,_=i,p):c===5?(y=p,_=i,f):(y=p,_=m,i),[y,_,u,o[3]])},_hslaToHSBA:function(o){var c=o[0],i=o[1],f=o[2],y=f<.5?(1+i)*f:f+i-f*i;return[c,i=2*(y-f)/y,y,o[3]]},_hslaToRGBA:function(o){var c,i=6*o[0],f=o[1],y=o[2];return f===0?[y,y,y,o[3]]:[(c=function(_,u,m){return _<0?_+=6:6<=_&&(_-=6),_<1?u+(m-u)*_:_<3?m:_<4?u+(m-u)*(4-_):u})(2+i,f=2*y-(y=y<.5?(1+f)*y:y+f-y*f),y),c(i,f,y),c(i-2,f,y),o[3]]},_rgbaToHSBA:function(o){var c,i,f=o[0],y=o[1],_=o[2],u=Math.max(f,y,_),m=u-Math.min(f,y,_);return m==0?i=c=0:(i=m/u,f===u?c=(y-_)/m:y===u?c=2+(_-f)/m:_===u&&(c=4+(f-y)/m),c<0?c+=6:6<=c&&(c-=6)),[c/6,i,u,o[3]]},_rgbaToHSLA:function(o){var c,i,f=o[0],y=o[1],_=o[2],u=Math.max(f,y,_),p=Math.min(f,y,_),m=u+p,p=u-p;return p==0?i=c=0:(i=m<1?p/m:p/(2-m),f===u?c=(y-_)/p:y===u?c=2+(_-f)/p:_===u&&(c=4+(f-y)/p),c<0?c+=6:6<=c&&(c-=6)),[c/6,i,m/2,o[3]]}},t=t.default.ColorConversion,l.default=t},{"../core/main":275}],261:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var m=y();if(m&&m.has(u))return m.get(u);var p,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var b;Object.prototype.hasOwnProperty.call(u,p)&&((b=x?Object.getOwnPropertyDescriptor(u,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=u[p])}return g.default=u,m&&m.set(u,g),g}(t("../core/constants"));function y(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,y=function(){return u},u)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(u){return i.default._validateParameters("alpha",arguments),this.color(u)._getAlpha()},i.default.prototype.blue=function(u){return i.default._validateParameters("blue",arguments),this.color(u)._getBlue()},i.default.prototype.brightness=function(u){return i.default._validateParameters("brightness",arguments),this.color(u)._getBrightness()},i.default.prototype.color=function(){var u;return i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color?arguments[0]:(u=arguments[0]instanceof Array?arguments[0]:arguments,new i.default.Color(this,u))},i.default.prototype.green=function(u){return i.default._validateParameters("green",arguments),this.color(u)._getGreen()},i.default.prototype.hue=function(u){return i.default._validateParameters("hue",arguments),this.color(u)._getHue()},i.default.prototype.lerpColor=function(u,m,p){i.default._validateParameters("lerpColor",arguments);var g,x,b,E=this._colorMode,S=this._colorMaxes;if(E===f.RGB)x=u.levels.map(function(k){return k/255}),b=m.levels.map(function(k){return k/255});else if(E===f.HSB)u._getBrightness(),m._getBrightness(),x=u.hsba,b=m.hsba;else{if(E!==f.HSL)throw new Error("".concat(E,"cannot be used for interpolation."));u._getLightness(),m._getLightness(),x=u.hsla,b=m.hsla}return p=Math.max(Math.min(p,1),0),this.lerp===void 0&&(this.lerp=function(k,T,j){return j*(T-k)+k}),u=this.lerp(x[0],b[0],p),m=this.lerp(x[1],b[1],p),g=this.lerp(x[2],b[2],p),x=this.lerp(x[3],b[3],p),u*=S[E][0],m*=S[E][1],g*=S[E][2],x*=S[E][3],this.color(u,m,g,x)},i.default.prototype.lightness=function(u){return i.default._validateParameters("lightness",arguments),this.color(u)._getLightness()},i.default.prototype.red=function(u){return i.default._validateParameters("red",arguments),this.color(u)._getRed()},i.default.prototype.saturation=function(u){return i.default._validateParameters("saturation",arguments),this.color(u)._getSaturation()};var _=i.default;l.default=_},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],262:[function(g,a,l){function o(k){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(k)}function c(k){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(T){return o(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":o(T)})(k)}g("core-js/modules/es.symbol"),g("core-js/modules/es.symbol.description"),g("core-js/modules/es.symbol.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.iterator"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.get-own-property-descriptor"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.iterator"),g("core-js/modules/es.string.trim"),g("core-js/modules/es.weak-map"),g("core-js/modules/web.dom-collections.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=u(g("../core/main")),f=function(k){if(k&&k.__esModule)return k;if(k===null||c(k)!=="object"&&typeof k!="function")return{default:k};var T=_();if(T&&T.has(k))return T.get(k);var j,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var N;Object.prototype.hasOwnProperty.call(k,j)&&((N=C?Object.getOwnPropertyDescriptor(k,j):null)&&(N.get||N.set)?Object.defineProperty(A,j,N):A[j]=k[j])}return A.default=k,T&&T.set(k,A),A}(g("../core/constants")),y=u(g("./color_conversion"));function _(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,_=function(){return k},k)}function u(k){return k&&k.__esModule?k:{default:k}}function m(k,T){for(var j=0;j<T.length;j++){var A=T[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}var p={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g=/\s*/,S=/(\d{1,3})/,x=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(x.source,"%")),E={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",S.source,",",S.source,",",S.source,"\\)$"].join(g.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),RGBA:new RegExp(["^rgba\\(",S.source,",",S.source,",",S.source,",",x.source,"\\)$"].join(g.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",x.source,"\\)$"].join(g.source),"i"),HSL:new RegExp(["^hsl\\(",S.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSLA:new RegExp(["^hsla\\(",S.source,",",b.source,",",b.source,",",x.source,"\\)$"].join(g.source),"i"),HSB:new RegExp(["^hsb\\(",S.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSBA:new RegExp(["^hsba\\(",S.source,",",b.source,",",b.source,",",x.source,"\\)$"].join(g.source),"i")},S=(i.default.Color=function(){function k(C,N){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(C._colorMode,C._colorMaxes),![f.RGB,f.HSL,f.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=k._parseInputs.apply(this,N),this._calculateLevels()}var T,j,A;return T=k,A=[{key:"_parseInputs",value:function(C,N,V,I){var G,R=arguments.length,q=this.mode,M=this.maxes[q],L=[];if(3<=R){for(L[0]=C/M[0],L[1]=N/M[1],L[2]=V/M[2],L[3]=typeof I=="number"?I/M[3]:1,G=L.length-1;0<=G;--G){var H=L[G];H<0?L[G]=0:1<H&&(L[G]=1)}return q===f.HSL?y.default._hslaToRGBA(L):q===f.HSB?y.default._hsbaToRGBA(L):L}if(R===1&&typeof C=="string"){if(V=C.trim().toLowerCase(),p[V])return k._parseInputs.call(this,p[V]);if(E.HEX3.test(V))return(L=E.HEX3.exec(V).slice(1).map(function(O){return parseInt(O+O,16)/255}))[3]=1,L;if(E.HEX6.test(V))return(L=E.HEX6.exec(V).slice(1).map(function(O){return parseInt(O,16)/255}))[3]=1,L;if(E.HEX4.test(V))return L=E.HEX4.exec(V).slice(1).map(function(O){return parseInt(O+O,16)/255});if(E.HEX8.test(V))return L=E.HEX8.exec(V).slice(1).map(function(O){return parseInt(O,16)/255});if(E.RGB.test(V))return(L=E.RGB.exec(V).slice(1).map(function(O){return O/255}))[3]=1,L;if(E.RGB_PERCENT.test(V))return(L=E.RGB_PERCENT.exec(V).slice(1).map(function(O){return parseFloat(O)/100}))[3]=1,L;if(E.RGBA.test(V))return L=E.RGBA.exec(V).slice(1).map(function(O,U){return U===3?parseFloat(O):O/255});if(E.RGBA_PERCENT.test(V))return L=E.RGBA_PERCENT.exec(V).slice(1).map(function(O,U){return U===3?parseFloat(O):parseFloat(O)/100});if(E.HSL.test(V)?(L=E.HSL.exec(V).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:E.HSLA.test(V)&&(L=E.HSLA.exec(V).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:U===3?parseFloat(O):parseInt(O,10)/100})),(L=L.map(function(O){return Math.max(Math.min(O,1),0)})).length)return y.default._hslaToRGBA(L);if(E.HSB.test(V)?(L=E.HSB.exec(V).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:E.HSBA.test(V)&&(L=E.HSBA.exec(V).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:U===3?parseFloat(O):parseInt(O,10)/100})),L.length){for(G=L.length-1;0<=G;--G)L[G]=Math.max(Math.min(L[G],1),0);return y.default._hsbaToRGBA(L)}L=[1,1,1,1]}else{if(R!==1&&R!==2||typeof C!="number")throw new Error("".concat(arguments,"is not a valid color representation."));L[0]=C/M[2],L[1]=C/M[2],L[2]=C/M[2],L[3]=typeof N=="number"?N/M[3]:1,L=L.map(function(O){return Math.max(Math.min(O,1),0)})}return L}}],(j=[{key:"toString",value:function(C){var N=this.levels,V=this._array,I=V[3];switch(C){case"#rrggbb":return"#".concat(N[0]<16?"0".concat(N[0].toString(16)):N[0].toString(16),N[1]<16?"0".concat(N[1].toString(16)):N[1].toString(16),N[2]<16?"0".concat(N[2].toString(16)):N[2].toString(16));case"#rrggbbaa":return"#".concat(N[0]<16?"0".concat(N[0].toString(16)):N[0].toString(16),N[1]<16?"0".concat(N[1].toString(16)):N[1].toString(16),N[2]<16?"0".concat(N[2].toString(16)):N[2].toString(16),N[3]<16?"0".concat(N[3].toString(16)):N[3].toString(16));case"#rgb":return"#".concat(Math.round(15*V[0]).toString(16),Math.round(15*V[1]).toString(16),Math.round(15*V[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*V[0]).toString(16),Math.round(15*V[1]).toString(16),Math.round(15*V[2]).toString(16),Math.round(15*V[3]).toString(16));case"rgb":return"rgb(".concat(N[0],", ",N[1],", ",N[2],")");case"rgb%":return"rgb(".concat((100*V[0]).toPrecision(3),"%, ",(100*V[1]).toPrecision(3),"%, ",(100*V[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*V[0]).toPrecision(3),"%, ",(100*V[1]).toPrecision(3),"%, ",(100*V[2]).toPrecision(3),"%, ",(100*V[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=y.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=y.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=y.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],", ",I,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=y.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*I).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=y.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=y.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=y.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],", ",I,")");case"hsla%":return this.hsla||(this.hsla=y.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*I).toPrecision(3),"%)");default:return"rgba(".concat(N[0],",",N[1],",",N[2],",",I,")")}}},{key:"setRed",value:function(C){this._array[0]=C/this.maxes[f.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(C){this._array[1]=C/this.maxes[f.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(C){this._array[2]=C/this.maxes[f.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(C){this._array[3]=C/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var C=this._array,N=this.levels=new Array(C.length),V=C.length-1;0<=V;--V)N[V]=Math.round(255*C[V]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(C,N){this.mode=C,this.maxes=N}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[f.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=y.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[f.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[f.RGB][1]}},{key:"_getHue",value:function(){return this.mode===f.HSB?(this.hsba||(this.hsba=y.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[f.HSB][0]):(this.hsla||(this.hsla=y.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[f.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=y.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[f.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[f.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===f.HSB?(this.hsba||(this.hsba=y.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[f.HSB][1]):(this.hsla||(this.hsla=y.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[f.HSL][1])}}])&&m(T.prototype,j),A&&m(T,A),k}(),i.default.Color);l.default=S},{"../core/constants":264,"../core/main":275,"./color_conversion":260,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],263:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var m=y();if(m&&m.has(u))return m.get(u);var p,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var b;Object.prototype.hasOwnProperty.call(u,p)&&((b=x?Object.getOwnPropertyDescriptor(u,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=u[p])}return g.default=u,m&&m.set(u,g),g}(t("../core/constants"));function y(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,y=function(){return u},u)}t("./p5.Color"),i.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},i.default.prototype.endClip=function(){this._renderer.endClip()},i.default.prototype.clip=function(u,m){this._renderer.beginClip(m),u(),this._renderer.endClip(m)},i.default.prototype.background=function(){var u;return(u=this._renderer).background.apply(u,arguments),this},i.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},i.default.prototype.colorMode=function(u,m,p,g,x){return i.default._validateParameters("colorMode",arguments),u!==f.RGB&&u!==f.HSB&&u!==f.HSL||(this._colorMode=u,u=this._colorMaxes[u],arguments.length===2?(u[0]=m,u[1]=m,u[2]=m,u[3]=m):arguments.length===4?(u[0]=m,u[1]=p,u[2]=g):arguments.length===5&&(u[0]=m,u[1]=p,u[2]=g,u[3]=x)),this},i.default.prototype.fill=function(){var u;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(u=this._renderer).fill.apply(u,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var u;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(u=this._renderer).stroke.apply(u,arguments),this},i.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var _=i.default;l.default=_},{"../core/constants":264,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],264:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.QUADRATIC=l.LINEAR=l._CTX_MIDDLE=l._DEFAULT_LEADMULT=l._DEFAULT_TEXT_FILL=l.WORD=l.CHAR=l.BOLDITALIC=l.BOLD=l.ITALIC=l.NORMAL=l.BLUR=l.ERODE=l.DILATE=l.POSTERIZE=l.INVERT=l.OPAQUE=l.GRAY=l.THRESHOLD=l.BURN=l.DODGE=l.SOFT_LIGHT=l.HARD_LIGHT=l.OVERLAY=l.REPLACE=l.SCREEN=l.MULTIPLY=l.EXCLUSION=l.SUBTRACT=l.DIFFERENCE=l.LIGHTEST=l.DARKEST=l.ADD=l.REMOVE=l.BLEND=l.UP_ARROW=l.TAB=l.SHIFT=l.RIGHT_ARROW=l.RETURN=l.OPTION=l.LEFT_ARROW=l.ESCAPE=l.ENTER=l.DOWN_ARROW=l.DELETE=l.CONTROL=l.BACKSPACE=l.ALT=l.AUTO=l.HSL=l.HSB=l.RGB=l.MITER=l.BEVEL=l.ROUND=l.SQUARE=l.PROJECT=l.PIE=l.CHORD=l.OPEN=l.CLOSE=l.TESS=l.QUAD_STRIP=l.QUADS=l.TRIANGLE_STRIP=l.TRIANGLE_FAN=l.TRIANGLES=l.LINE_LOOP=l.LINE_STRIP=l.LINES=l.POINTS=l.BASELINE=l.BOTTOM=l.TOP=l.CENTER=l.LEFT=l.RIGHT=l.RADIUS=l.CORNERS=l.CORNER=l.RAD_TO_DEG=l.DEG_TO_RAD=l.RADIANS=l.DEGREES=l.TWO_PI=l.TAU=l.QUARTER_PI=l.PI=l.HALF_PI=l.WAIT=l.TEXT=l.MOVE=l.HAND=l.CROSS=l.ARROW=l.WEBGL2=l.WEBGL=l.P2D=l.VERSION=void 0,l.RGBA=l.HALF_FLOAT=l.FLOAT=l.UNSIGNED_INT=l.UNSIGNED_BYTE=l.COVER=l.CONTAIN=l.FALLBACK=l.LABEL=l.AXES=l.GRID=l._DEFAULT_FILL=l._DEFAULT_STROKE=l.PORTRAIT=l.LANDSCAPE=l.SMOOTH=l.FLAT=l.MIRROR=l.CLAMP=l.REPEAT=l.NEAREST=l.IMAGE=l.IMMEDIATE=l.TEXTURE=l.FILL=l.STROKE=l.CURVE=l.BEZIER=void 0;var o=Math.PI,c=(l.VERSION="1.9.0",l.P2D="p2d",l.WEBGL="webgl",l.WEBGL2="webgl2",l.ARROW="default",l.CROSS="crosshair",l.HAND="pointer",l.MOVE="move",l.TEXT="text",l.WAIT="wait",o/2),c=(l.HALF_PI=c,o),c=(l.PI=c,o/4),c=(l.QUARTER_PI=c,2*o),c=(l.TAU=c,2*o),c=(l.TWO_PI=c,l.DEGREES="degrees",l.RADIANS="radians",o/180),c=(l.DEG_TO_RAD=c,180/o);l.RAD_TO_DEG=c,l.CORNER="corner",l.CORNERS="corners",l.RADIUS="radius",l.RIGHT="right",l.LEFT="left",l.CENTER="center",l.TOP="top",l.BOTTOM="bottom",l.BASELINE="alphabetic",l.POINTS=0,l.LINES=1,l.LINE_STRIP=3,l.LINE_LOOP=2,l.TRIANGLES=4,l.TRIANGLE_FAN=6,l.TRIANGLE_STRIP=5,l.QUADS="quads",l.QUAD_STRIP="quad_strip",l.TESS="tess",l.CLOSE="close",l.OPEN="open",l.CHORD="chord",l.PIE="pie",l.PROJECT="square",l.SQUARE="butt",l.ROUND="round",l.BEVEL="bevel",l.MITER="miter",l.RGB="rgb",l.HSB="hsb",l.HSL="hsl",l.AUTO="auto",l.ALT=18,l.BACKSPACE=8,l.CONTROL=17,l.DELETE=46,l.DOWN_ARROW=40,l.ENTER=13,l.ESCAPE=27,l.LEFT_ARROW=37,l.OPTION=18,l.RETURN=13,l.RIGHT_ARROW=39,l.SHIFT=16,l.TAB=9,l.UP_ARROW=38,l.BLEND="source-over",l.REMOVE="destination-out",l.ADD="lighter",l.DARKEST="darken",l.LIGHTEST="lighten",l.DIFFERENCE="difference",l.SUBTRACT="subtract",l.EXCLUSION="exclusion",l.MULTIPLY="multiply",l.SCREEN="screen",l.REPLACE="copy",l.OVERLAY="overlay",l.HARD_LIGHT="hard-light",l.SOFT_LIGHT="soft-light",l.DODGE="color-dodge",l.BURN="color-burn",l.THRESHOLD="threshold",l.GRAY="gray",l.OPAQUE="opaque",l.INVERT="invert",l.POSTERIZE="posterize",l.DILATE="dilate",l.ERODE="erode",l.BLUR="blur",l.NORMAL="normal",l.ITALIC="italic",l.BOLD="bold",l.BOLDITALIC="bold italic",l.CHAR="CHAR",l.WORD="WORD",l._DEFAULT_TEXT_FILL="#000000",l._DEFAULT_LEADMULT=1.25,l._CTX_MIDDLE="middle",l.LINEAR="linear",l.QUADRATIC="quadratic",l.BEZIER="bezier",l.CURVE="curve",l.STROKE="stroke",l.FILL="fill",l.TEXTURE="texture",l.IMMEDIATE="immediate",l.IMAGE="image",l.NEAREST="nearest",l.REPEAT="repeat",l.CLAMP="clamp",l.MIRROR="mirror",l.FLAT="flat",l.SMOOTH="smooth",l.LANDSCAPE="landscape",l.PORTRAIT="portrait",l._DEFAULT_STROKE="#000000",l._DEFAULT_FILL="#FFFFFF",l.GRID="grid",l.AXES="axes",l.LABEL="label",l.FALLBACK="fallback",l.CONTAIN="contain",l.COVER="cover",l.UNSIGNED_BYTE="unsigned-byte",l.UNSIGNED_INT="unsigned-int",l.FLOAT="float",l.HALF_FLOAT="half-float",l.RGBA="rgba"},{}],265:[function(t,a,l){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}function c(x){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(b){return o(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":o(b)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(f=t("./main"))&&f.__esModule?f:{default:f},f=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var b=y();if(b&&b.has(x))return b.get(x);var E,S={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in x){var T;Object.prototype.hasOwnProperty.call(x,E)&&((T=k?Object.getOwnPropertyDescriptor(x,E):null)&&(T.get||T.set)?Object.defineProperty(S,E,T):S[E]=x[E])}return S.default=x,b&&b.set(x,S),S}(t("./constants"));function y(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,y=function(){return x},x)}var _=[f.ARROW,f.CROSS,f.HAND,f.MOVE,f.TEXT,f.WAIT],u=(i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60,window.print),m=!1;function p(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function g(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var x;arguments.length?(x=console).log.apply(x,arguments):m||(u(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(m=!0))},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(x,b,E){var S,k="auto",T=this._curElement.elt;_.includes(x)?k=x:typeof x=="string"&&(S="",b&&E&&typeof b=="number"&&typeof E=="number"&&(S="".concat(b," ").concat(E)),k=x.substring(0,7)==="http://"||x.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(x)?"url(".concat(x,") ").concat(S,", auto"):x),T.style.cursor=k},i.default.prototype.frameRate=function(x){return i.default._validateParameters("frameRate",arguments),typeof x!="number"||x<0?this._frameRate:(this._setProperty("_targetFrameRate",x),x===0&&this._setProperty("_frameRate",x),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(x){return this.frameRate(x)},i.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.webglVersion=f.P2D,i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=p(),i.default.prototype.windowHeight=g(),i.default.prototype._onresize=function(x){this._setProperty("windowWidth",p()),this._setProperty("windowHeight",g());var b=this._isGlobal?window:this;typeof b.windowResized!="function"||(b=b.windowResized(x))===void 0||b||x.preventDefault()},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(x){if(i.default._validateParameters("fullscreen",arguments),x===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(x){if(x=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");x.requestFullscreen?x.requestFullscreen():x.mozRequestFullScreen?x.mozRequestFullScreen():x.webkitRequestFullscreen?x.webkitRequestFullscreen():x.msRequestFullscreen&&x.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(x){var b;return i.default._validateParameters("pixelDensity",arguments),typeof x=="number"?(x!==this._pixelDensity&&(this._pixelDensity=x),(b=this).resizeCanvas(this.width,this.height,!0)):b=this._pixelDensity,b},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(x){return x!==""})},i.default.prototype.getURLParams=function(){for(var x,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,E={};(x=b.exec(location.search))!=null;)x.index===b.lastIndex&&b.lastIndex++,E[x[1]]=x[2];return E},t=i.default,l.default=t},{"./constants":264,"./main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.search":197,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],266:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(_=t("../main"))&&_.__esModule?_:{default:_};t("../internationalization");function c(u,m){m=m||console.log.bind(console),i||y(),i.some(function(p){var g;if(u.message&&u.message.match("\\W?".concat(p.name,"\\W"))!==null)return g=p.type==="function"?"".concat(p.name,"()"):p.name,m("Did you just try to use p5.js's ".concat(g," ").concat(p.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(f)),!0})}var i=null,y=null,f=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},i=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),y=function(){function u(p){return Object.getOwnPropertyNames(p).filter(function(g){return g[0]!=="_"&&!(g in m)&&(m[g]=!0)}).map(function(g){var x=typeof p[g]=="function"?"function":g===g.toUpperCase()?"constant":"variable";return{name:g,type:x}})}var m={};(i=[].concat(u(o.default.prototype),u(t("../constants")))).sort(function(p,g){return g.name.length-p.name.length})},_=(o.default.prototype._helpForMisusedAtTopLevelCode=c,document.readyState!=="complete"&&(window.addEventListener("error",c,!1),window.addEventListener("load",function(){window.removeEventListener("error",c,!1)})),o.default);l.default=_},{"../constants":264,"../internationalization":273,"../main":275,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.starts-with":199,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],267:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(o=t("../main"))&&o.__esModule?o:{default:o};t("../internationalization"),o.default._friendlyFileLoadError=function(){},t=o.default,l.default=t},{"../internationalization":273,"../main":275}],268:[function(t,a,l){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}function c(m){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=_(t("../main"));t("../internationalization"),y(t("../constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function y(m){if(m&&m.__esModule)return m;if(m===null||c(m)!=="object"&&typeof m!="function")return{default:m};var p=f();if(p&&p.has(m))return p.get(m);var g,x,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&((x=E?Object.getOwnPropertyDescriptor(m,g):null)&&(x.get||x.set)?Object.defineProperty(b,g,x):b[g]=m[g]);return b.default=m,p&&p.set(m,b),b}function _(m){return m&&m.__esModule?m:{default:m}}i.default._fesCodeReader=function(){};var u=i.default;l.default=u},{"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],269:[function(t,a,l){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function o(){var c=/(^|@)\S+:\d+/,i=/^\s*at .*(\S+:\d+|\(native\))/m,f=/^(eval@)?(\[native code])?$/;return{parse:function(y){return y.stacktrace!==void 0||y["opera#sourceloc"]!==void 0?this.parseOpera(y):y.stack&&y.stack.match(i)?this.parseV8OrIE(y):y.stack?this.parseFFOrSafari(y):void 0},extractLocation:function(y){return y.indexOf(":")===-1?[y]:[(y=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(y.replace(/[()]/g,"")))[1],y[2]||void 0,y[3]||void 0]},parseV8OrIE:function(y){return y.stack.split(`
`).filter(function(_){return!!_.match(i)},this).map(function(_){var u=(_=-1<_.indexOf("(eval ")?_.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):_).replace(/^\s+/,"").replace(/\(eval code/g,"("),m=u.match(/ (\((.+):(\d+):(\d+)\)$)/),u=(u=m?u.replace(m[0],""):u).split(/\s+/).slice(1),m=this.extractLocation(m?m[1]:u.pop());return{functionName:u.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(m[0])?void 0:m[0],lineNumber:m[1],columnNumber:m[2],source:_}},this)},parseFFOrSafari:function(y){return y.stack.split(`
`).filter(function(_){return!_.match(f)},this).map(function(_){var u,m;return(_=-1<_.indexOf(" > eval")?_.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):_).indexOf("@")===-1&&_.indexOf(":")===-1?{functionName:_}:{functionName:(m=_.match(u=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&m[1]?m[1]:void 0,fileName:(m=this.extractLocation(_.replace(u,"")))[0],lineNumber:m[1],columnNumber:m[2],source:_}},this)},parseOpera:function(y){return!y.stacktrace||-1<y.message.indexOf(`
`)&&y.message.split(`
`).length>y.stacktrace.split(`
`).length?this.parseOpera9(y):y.stack?this.parseOpera11(y):this.parseOpera10(y)},parseOpera9:function(y){for(var _=/Line (\d+).*script (?:in )?(\S+)/i,u=y.message.split(`
`),m=[],p=2,g=u.length;p<g;p+=2){var x=_.exec(u[p]);x&&m.push({fileName:x[2],lineNumber:x[1],source:u[p]})}return m},parseOpera10:function(y){for(var _=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=y.stacktrace.split(`
`),m=[],p=0,g=u.length;p<g;p+=2){var x=_.exec(u[p]);x&&m.push({functionName:x[3]||void 0,fileName:x[2],lineNumber:x[1],source:u[p]})}return m},parseOpera11:function(y){return y.stack.split(`
`).filter(function(_){return!!_.match(c)&&!_.match(/^Error created at/)},this).map(function(_){var u,p=_.split("@"),m=this.extractLocation(p.pop()),p=p.shift()||"";return{functionName:p.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(u=p.match(/\(([^)]*)\)/)?p.replace(/^[^(]+\(([^)]*)\)$/,"$1"):u)===void 0||u==="[arguments not available]"?void 0:u.split(","),fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:_}},this)}}}t.default._getErrorStackParser=function(){return new o},t=t.default,l.default=t},{"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],270:[function(t,a,l){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(c=t("../main"))&&c.__esModule?c:{default:c};(function(y){if(!(y&&y.__esModule)&&!(y===null||f(y)!=="object"&&typeof y!="function")){var _=i();if(_&&_.has(y))return _.get(y);var u,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in y){var g;Object.prototype.hasOwnProperty.call(y,u)&&((g=p?Object.getOwnPropertyDescriptor(y,u):null)&&(g.get||g.set)?Object.defineProperty(m,u,g):m[u]=y[u])}m.default=y,_&&_.set(y,m)}})(t("../constants")),t("../internationalization");function i(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,i=function(){return y},y)}function f(y){return(f=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(y)}c.default._validateParameters=c.default._clearValidateParamsCache=function(){},t=c.default,l.default=t},{"../../../docs/parameterData.json":void 0,"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.map":169,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],271:[function(t,a,l){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(y)}function c(y){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=function(y){if(y&&y.__esModule)return y;if(y===null||c(y)!=="object"&&typeof y!="function")return{default:y};var _=f();if(_&&_.has(y))return _.get(y);var u,m={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in y){var g;Object.prototype.hasOwnProperty.call(y,u)&&((g=p?Object.getOwnPropertyDescriptor(y,u):null)&&(g.get||g.set)?Object.defineProperty(m,u,g):m[u]=y[u])}return m.default=y,_&&_.set(y,m),m}(t("./constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}l.default={modeAdjust:function(y,_,u,m,p){return p===i.CORNER?{x:y,y:_,w:u,h:m}:p===i.CORNERS?{x:y,y:_,w:u-y,h:m-_}:p===i.RADIUS?{x:y-u,y:_-m,w:2*u,h:2*m}:p===i.CENTER?{x:y-.5*u,y:_-.5*m,w:u,h:m}:void 0}}},{"./constants":264,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],272:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var o=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./internationalization");var c=Promise.resolve();Promise.all([new Promise(function(i,f){document.readyState==="complete"?i():window.addEventListener("load",i,!1)}),c]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":275,"./internationalization":273,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/web.dom-collections.iterator":238}],273:[function(t,a,l){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.setTranslatorLanguage=l.currentTranslatorLanguage=l.availableTranslatorLanguages=l.initialize=l.translator=void 0;var o,c,i=y(t("i18next")),f=y(t("i18next-browser-languagedetector"));function y(m){return m&&m.__esModule?m:{default:m}}function _(m,p){for(var g=0;g<p.length;g++){var x=p[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}var u=function(){function m(x,b){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.init(x,b)}var p,g;return p=m,(g=[{key:"fetchWithTimeout",value:function(x,b){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(x,b),new Promise(function(S,k){return setTimeout(function(){return k(new Error("timeout"))},E)})])}},{key:"init",value:function(x){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=x,this.options=b}},{key:"read",value:function(x,b,E){var S=this.options.loadPath;x===this.options.fallback?E(null,o[x][b]):c.includes(x)?(S=this.services.interpolator.interpolate(S,{lng:x,ns:b}),this.loadUrl(S,E)):E("Not found",!1)}},{key:"loadUrl",value:function(x,b){this.fetchWithTimeout(x).then(function(E){if(E.ok)return E.json();throw new Error("failed loading ".concat(x))},function(){throw new Error("failed loading ".concat(x))}).then(function(E){return b(null,E)}).catch(b)}}])&&_(p.prototype,g),m}();u.type="backend",l.translator=function(m,p){console.debug("p5.js translator called before translations were loaded"),i.default.t(m,p)},l.initialize=function(){return i.default.use(f.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(m){l.translator=m},function(m){return console.debug("Translations failed to load (".concat(m,")"))})},l.availableTranslatorLanguages=function(){return i.default.languages},l.currentTranslatorLanguage=function(m){return i.default.language},l.setTranslatorLanguage=function(m){return i.default.changeLanguage(m||void 0,function(p){return console.debug("Translations failed to load (".concat(p,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238,i18next:3,"i18next-browser-languagedetector":3}],274:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,l.default=t},{"./main":275}],275:[function(t,a,l){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}function c(m){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t("./shim");var i=function(m){if(m&&m.__esModule)return m;if(m===null||c(m)!=="object"&&typeof m!="function")return{default:m};var p=f();if(p&&p.has(m))return p.get(m);var g,x={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var E;Object.prototype.hasOwnProperty.call(m,g)&&((E=b?Object.getOwnPropertyDescriptor(m,g):null)&&(E.get||E.set)?Object.defineProperty(x,g,E):x[g]=m[g])}return x.default=m,p&&p.set(m,x),x}(t("./constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function y(m,p){for(var g=0;g<p.length;g++){var x=p[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}var _,u=function(){function m(x,S){var E=this;if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var S=Object.getOwnPropertyNames(m.prototype._registeredMethods),k=!0,T=!1,j=void 0;try{for(var A,C=S[Symbol.iterator]();!(k=(A=C.next()).done);k=!0){var N=A.value;this._registeredMethods[N]=m.prototype._registeredMethods[N].slice()}}catch(O){T=!0,j=O}finally{try{k||C.return==null||C.return()}finally{if(T)throw j}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),m.prototype.callRegisteredHooksFor=function(O){var U=this||m.prototype,J=this._isGlobal?window:this;if(U._registeredMethods.hasOwnProperty(O)){var U=U._registeredMethods[O],Z=!0,O=!1,z=void 0;try{for(var B,D=U[Symbol.iterator]();!(Z=(B=D.next()).done);Z=!0){var X=B.value;typeof X=="function"&&X.call(J)}}catch(se){O=!0,z=se}finally{try{Z||D.return==null||D.return()}finally{if(O)throw z}}}},this._start=function(){E._userNode&&typeof E._userNode=="string"&&(E._userNode=document.getElementById(E._userNode));var O=E._isGlobal?window:E;if(O.preload){E.callRegisteredHooksFor("beforePreload");var U,J=document.getElementById(E._loadingScreenId),Z=(J||((J=document.createElement("div")).innerHTML="Loading...",J.style.position="absolute",J.id=E._loadingScreenId,(E._userNode||document.body).appendChild(J)),E._preloadMethods);for(U in Z){Z[U]=Z[U]||m;var z=Z[U];z!==m.prototype&&z!==m||(E._isGlobal&&(window[U]=E._wrapPreload(E,U)),z=E),E._registeredPreloadMethods[U]=z[U],z[U]=E._wrapPreload(z,U)}O.preload(),E._runIfPreloadsAreDone()}else E._setup(),E._recording||E._draw()},this._runIfPreloadsAreDone=function(){var O,U=this._isGlobal?window:this;U._preloadCount===0&&((O=document.getElementById(U._loadingScreenId))&&O.parentNode.removeChild(O),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),U._setup(),this._recording||U._draw()))},this._decrementPreload=function(){var O=this._isGlobal?window:this;O._preloadDone||typeof O.preload!="function"||(O._setProperty("_preloadCount",O._preloadCount-1),O._runIfPreloadsAreDone())},this._wrapPreload=function(O,U){var J=this;return function(){J._incrementPreload();for(var Z=arguments.length,z=new Array(Z),B=0;B<Z;B++)z[B]=arguments[B];return J._registeredPreloadMethods[U].apply(O,z)}},this._incrementPreload=function(){var O=this._isGlobal?window:this;O._preloadDone||O._setProperty("_preloadCount",O._preloadCount+1)},this._setup=function(){E.callRegisteredHooksFor("beforeSetup"),E.createCanvas(E._defaultCanvasSize.width,E._defaultCanvasSize.height,"p2d");var O=E._isGlobal?window:E;if(typeof O.preload=="function")for(var U in E._preloadMethods)O[U]=E._preloadMethods[U][U],O[U]&&E&&(O[U]=O[U].bind(E));E._millisStart=window.performance.now(),O._preloadDone=!0,typeof O.setup=="function"&&O.setup();var J=document.getElementsByTagName("canvas"),Z=!0,z=!1,B=void 0;try{for(var D,X=J[Symbol.iterator]();!(Z=(D=X.next()).done);Z=!0){var K=D.value;K.dataset.hidden==="true"&&(K.style.visibility="",delete K.dataset.hidden)}}catch(re){z=!0,B=re}finally{try{Z||X.return==null||X.return()}finally{if(z)throw B}}E._lastTargetFrameTime=window.performance.now(),E._lastRealFrameTime=window.performance.now(),E._setupDone=!0,(E._accessibleOutputs.grid||E._accessibleOutputs.text)&&E._updateAccsOutput(),E.callRegisteredHooksFor("afterSetup")},this._draw=function(){var O=window.performance.now(),U=O-E._lastTargetFrameTime,J=1e3/E._targetFrameRate;(!E._loop||J-5<=U)&&(E.deltaTime=O-E._lastRealFrameTime,E._setProperty("deltaTime",E.deltaTime),E._frameRate=1e3/E.deltaTime,E.redraw(),E._lastTargetFrameTime=Math.max(E._lastTargetFrameTime+J,O),E._lastRealFrameTime=O,E._updateMouseCoords!==void 0&&(E._updateMouseCoords(),E._setProperty("movedX",0),E._setProperty("movedY",0))),E._loop&&(E._requestAnimId=window.requestAnimationFrame(E._draw))},this._setProperty=function(O,U){E[O]=U,E._isGlobal&&(window[O]=U)},this.remove=function(){E._startListener&&window.removeEventListener("load",E._startListener,!1);var O=document.getElementById(E._loadingScreenId);if(O&&(O.parentNode.removeChild(O),E._incrementPreload()),E._curElement){for(var U in E._loop=!1,E._requestAnimId&&window.cancelAnimationFrame(E._requestAnimId),E._events)window.removeEventListener(U,E._events[U]);var J=!0,O=!1,Z=void 0;try{for(var z,B=E._elements[Symbol.iterator]();!(J=(z=B.next()).done);J=!0){var D,X=z.value;for(D in X.elt&&X.elt.parentNode&&X.elt.parentNode.removeChild(X.elt),X._events)X.elt.removeEventListener(D,X._events[D])}}catch(xe){O=!0,Z=xe}finally{try{J||B.return==null||B.return()}finally{if(O)throw Z}}var K=E;E._registeredMethods.remove.forEach(function(xe){xe!==void 0&&xe.call(K)})}if(E._isGlobal){for(var re in m.prototype)try{delete window[re]}catch{window[re]=void 0}for(var se in E)if(E.hasOwnProperty(se))try{delete window[se]}catch{window[se]=void 0}m.instance=null}},this._registeredMethods.init.forEach(function(O){O!==void 0&&O.call(this)},this),this._setupPromisePreloads();var V,I,G=this._createFriendlyGlobalFunctionBinder();if(x)x(this),m._checkForUserDefinedFunctions(this);else{for(var R in this._isGlobal=!0,m.instance=this,m.prototype)typeof m.prototype[R]=="function"?(V=R.substring(2),this._events.hasOwnProperty(V)||(Math.hasOwnProperty(R)&&Math[R]===m.prototype[R]?G(R,m.prototype[R]):G(R,m.prototype[R].bind(this)))):G(R,m.prototype[R]);for(var q in this)this.hasOwnProperty(q)&&G(q,this[q])}for(I in this._events){var M=this["_on".concat(I)];M&&(M=M.bind(this),window.addEventListener(I,M,{passive:!1}),this._events[I]=M)}function L(){E._setProperty("focused",!0)}function H(){E._setProperty("focused",!1)}window.addEventListener("focus",L),window.addEventListener("blur",H),this.registerMethod("remove",function(){window.removeEventListener("focus",L),window.removeEventListener("blur",H)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var p,g;return p=m,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=i.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(x,b){m.prototype._preloadMethods.hasOwnProperty(x)||(m.prototype._preloadMethods[x]=b)}},{key:"registerMethod",value:function(x,b){var E=this||m.prototype;E._registeredMethods.hasOwnProperty(x)||(E._registeredMethods[x]=[]),E._registeredMethods[x].push(b)}},{key:"unregisterMethod",value:function(x,b){var E=this||m.prototype;if(E._registeredMethods.hasOwnProperty(x)){for(var S=E._registeredMethods[x],k=[],T=0;T<S.length;T++)S[T]===b&&k.push(T);for(var j=k.length-1;0<=j;j--)S.splice(k[j],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=x.globalObject||window;return x.log||console.log.bind(console),function(E,S){m.disableFriendlyErrors,b[E]=S}}}])&&y(p.prototype,g),m}();for(_ in u.instance=null,u.disableFriendlyErrors=!1,i)u.prototype[_]=i[_];u.VERSION=i.VERSION,u.prototype._preloadMethods={loadJSON:u.prototype,loadImage:u.prototype,loadStrings:u.prototype,loadXML:u.prototype,loadBytes:u.prototype,loadTable:u.prototype,loadFont:u.prototype,loadModel:u.prototype,loadShader:u.prototype},u.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},u.prototype._registeredPreloadMethods={},l.default=u},{"./constants":264,"./shim":286,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],276:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("./main"))&&t.__esModule?t:{default:t};function c(i,f){for(var y=0;y<f.length;y++){var _=f[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.Element=function(){function i(u,m){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.elt=u,this._pInst=this._pixelsState=m,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var f,y,_;return f=i,_=[{key:"_adjustListener",value:function(u,m,p){return m===!1?o.default.Element._detachListener(u,p):o.default.Element._attachListener(u,m,p),this}},{key:"_attachListener",value:function(u,m,p){p._events[u]&&o.default.Element._detachListener(u,p),m=m.bind(p),p.elt.addEventListener(u,m,!1),p._events[u]=m}},{key:"_detachListener",value:function(u,m){var p=m._events[u];m.elt.removeEventListener(u,p,!1),m._events[u]=null}}],(y=[{key:"parent",value:function(u){return u===void 0?this.elt.parentNode:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof o.default.Element&&(u=u.elt),u.appendChild(this.elt),this)}},{key:"id",value:function(u){return u===void 0?this.elt.id:(this.elt.id=u,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(u){return u===void 0?this.elt.className:(this.elt.className=u,this)}},{key:"mousePressed",value:function(u){return o.default.Element._adjustListener("mousedown",function(m){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(m),u.call(this,m)},this),this}},{key:"doubleClicked",value:function(u){return o.default.Element._adjustListener("dblclick",u,this),this}},{key:"mouseWheel",value:function(u){return o.default.Element._adjustListener("wheel",u,this),this}},{key:"mouseReleased",value:function(u){return o.default.Element._adjustListener("mouseup",u,this),this}},{key:"mouseClicked",value:function(u){return o.default.Element._adjustListener("click",u,this),this}},{key:"mouseMoved",value:function(u){return o.default.Element._adjustListener("mousemove",u,this),this}},{key:"mouseOver",value:function(u){return o.default.Element._adjustListener("mouseover",u,this),this}},{key:"mouseOut",value:function(u){return o.default.Element._adjustListener("mouseout",u,this),this}},{key:"touchStarted",value:function(u){return o.default.Element._adjustListener("touchstart",u,this),this}},{key:"touchMoved",value:function(u){return o.default.Element._adjustListener("touchmove",u,this),this}},{key:"touchEnded",value:function(u){return o.default.Element._adjustListener("touchend",u,this),this}},{key:"dragOver",value:function(u){return o.default.Element._adjustListener("dragover",u,this),this}},{key:"dragLeave",value:function(u){return o.default.Element._adjustListener("dragleave",u,this),this}},{key:"_setProperty",value:function(u,m){this[u]=m}}])&&c(f.prototype,y),_&&c(f,_),i}(),t=o.default.Element,l.default=t},{"./main":275}],277:[function(t,a,l){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function c(E){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(S){return o(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":o(S)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(b=t("./main"))&&b.__esModule?b:{default:b},f=function(E){if(E&&E.__esModule)return E;if(E===null||c(E)!=="object"&&typeof E!="function")return{default:E};var S=y();if(S&&S.has(E))return S.get(E);var k,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var A;Object.prototype.hasOwnProperty.call(E,k)&&((A=j?Object.getOwnPropertyDescriptor(E,k):null)&&(A.get||A.set)?Object.defineProperty(T,k,A):T[k]=E[k])}return T.default=E,S&&S.set(E,T),T}(t("./constants"));function y(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,y=function(){return E},E)}function _(E,S){for(var k=0;k<S.length;k++){var T=S[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}function u(E,S){return(u=Object.setPrototypeOf||function(k,T){return k.__proto__=T,k})(E,S)}function m(E){return function(){var S,k=x(E);return p(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=x(this).constructor,Reflect.construct(k,arguments,S)):k.apply(this,arguments))}}function p(E,S){return!S||c(S)!=="object"&&typeof S!="function"?g(E):S}function g(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function x(E){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}i.default.Graphics=function(E){var S=T;if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&u(S,E);var k=m(T);function T(j,A,q,N,V){var I;if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");R=V||document.createElement("canvas"),(I=k.call(this,R,N)).canvas=R;var G,R=q||f.P2D,q=N._userNode||document.body;for(G in V||q.appendChild(I.canvas),i.default.prototype)I[G]||(typeof i.default.prototype[G]=="function"?I[G]=i.default.prototype[G].bind(g(I)):I[G]=i.default.prototype[G]);return i.default.prototype._initializeInstanceVariables.apply(g(I)),I.width=j,I.height=A,I._pixelDensity=N._pixelDensity,R===f.WEBGL?I._renderer=new i.default.RendererGL(I.canvas,g(I),!1):I._renderer=new i.default.Renderer2D(I.canvas,g(I),!1),N._elements.push(g(I)),Object.defineProperty(g(I),"deltaTime",{get:function(){return this._pInst.deltaTime}}),I._renderer.resize(j,A),I._renderer._applyDefaults(),p(I,g(I))}return S=T,(E=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var j,A=this._pInst._elements.indexOf(this);for(j in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(j,this._events[j])}},{key:"createFramebuffer",value:function(j){return new i.default.Framebuffer(this,j)}}])&&_(S.prototype,E),T}(i.default.Element);var b=i.default.Graphics;l.default=b},{"./constants":264,"./main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],278:[function(t,a,l){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(x=t("./main"))&&x.__esModule?x:{default:x},i=function(E){if(E&&E.__esModule)return E;if(E===null||y(E)!=="object"&&typeof E!="function")return{default:E};var S=f();if(S&&S.has(E))return S.get(E);var k,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var A;Object.prototype.hasOwnProperty.call(E,k)&&((A=j?Object.getOwnPropertyDescriptor(E,k):null)&&(A.get||A.set)?Object.defineProperty(T,k,A):T[k]=E[k])}return T.default=E,S&&S.set(E,T),T}(t("../core/constants"));function f(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,f=function(){return E},E)}function y(E){return(y=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(S){return o(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":o(S)})(E)}function _(E,S){for(var k=0;k<S.length;k++){var T=S[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}function u(E,S){return(u=Object.setPrototypeOf||function(k,T){return k.__proto__=T,k})(E,S)}function m(E){return function(){var S,k,T=g(E);return S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=g(this).constructor,Reflect.construct(T,arguments,S)):T.apply(this,arguments),T=this,!(k=S)||y(k)!=="object"&&typeof k!="function"?p(T):k}}function p(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function g(E){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}var x=function(E){var S=T;if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&u(S,E);var k=m(T);function T(j,A,C){var N;if(this instanceof T)return(N=k.call(this,j,A)).canvas=j,N._pixelsState=A,C?(N._isMainCanvas=!0,N._pInst._setProperty("_curElement",p(N)),N._pInst._setProperty("canvas",N.canvas),N._pInst._setProperty("width",N.width),N._pInst._setProperty("height",N.height)):(N.canvas.style.display="none",N._styles=[]),N._clipping=!1,N._clipInvert=!1,N._textSize=12,N._textLeading=15,N._textFont="sans-serif",N._textStyle=i.NORMAL,N._textAscent=null,N._textDescent=null,N._textAlign=i.LEFT,N._textBaseline=i.BASELINE,N._textWrap=i.WORD,N._rectMode=i.CORNER,N._ellipseMode=i.CENTER,N._curveTightness=0,N._imageMode=i.CORNER,N._tint=null,N._doStroke=!0,N._doFill=!0,N._strokeSet=!1,N._fillSet=!1,N._leadingSet=!1,N._pushPopDepth=0,N;throw new TypeError("Cannot call a class as a function")}return S=T,(E=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(j){this._pushPopDepth--,j.properties&&Object.assign(this,j.properties)}},{key:"beginClip",value:function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=j.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(j,A){this.width=j,this.height=A,this.elt.width=j*this._pInst._pixelDensity,this.elt.height=A*this._pInst._pixelDensity,this.elt.style.width="".concat(j,"px"),this.elt.style.height="".concat(A,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(j,A,C,N){var V=this._pixelsState,I=V._pixelDensity,G=this.canvas;if(j===void 0&&A===void 0)j=A=0,C=V.width,N=V.height;else if(j*=I,A*=I,C===void 0&&N===void 0)return j<0||A<0||j>=G.width||A>=G.height?[0,0,0,0]:this._getPixel(j,A);return V=new c.default.Image(C*I,N*I),V.pixelDensity(I),V.canvas.getContext("2d").drawImage(G,j,A,C*I,N*I,0,0,C*I,N*I),V}},{key:"textLeading",value:function(j){return typeof j=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",j),this._pInst):this._textLeading}},{key:"textStyle",value:function(j){return j?(j!==i.NORMAL&&j!==i.ITALIC&&j!==i.BOLD&&j!==i.BOLDITALIC||this._setProperty("_textStyle",j),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(j,A){return j!==void 0?(this._setProperty("_textAlign",j),A!==void 0&&this._setProperty("_textBaseline",A),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(j){return this._setProperty("_textWrap",j),this._textWrap}},{key:"text",value:function(j,A,C,N,V){var I,G,R,q,M=this._pInst,L=this._textWrap,H=Number.MAX_VALUE,O=C;if((this._doFill||this._doStroke)&&j!==void 0){if(I=(j=(j=typeof j!="string"?j.toString():j).replace(/(\t)/g,"  ")).split(`
`),N!==void 0){switch(this._rectMode===i.CENTER&&(A-=N/2),this._textAlign){case i.CENTER:A+=N/2;break;case i.RIGHT:A+=N}if(V!==void 0){this._rectMode===i.CENTER&&(C-=V/2,O-=V/2);var j=C,U=M.textAscent();switch(this._textBaseline){case i.BOTTOM:q=C+V,C=Math.max(q,C),O+=U;break;case i.CENTER:q=C+V/2,C=Math.max(q,C),O+=U/2}H=C+V-U,this._textBaseline===i.CENTER&&(H=j+V-U/2)}else this._textBaseline!==i.BOTTOM&&this._textBaseline!==i.CENTER||(O=C-(j=M.textSize()*this._textLeading)/2,H=C+j/2);if(L===i.WORD){for(var J=[],Z=0;Z<I.length;Z++){for(var z="",B=I[Z].split(" "),D=0;D<B.length;D++)G="".concat(z+B[D])+" ",z=N<(R=this.textWidth(G))&&0<z.length?(J.push(z),"".concat(B[D])+" "):G;J.push(z)}var X=0;this._textBaseline===i.CENTER?X=(J.length-1)*M.textLeading()/2:this._textBaseline===i.BOTTOM&&(X=(J.length-1)*M.textLeading());for(var K=0;K<I.length;K++){z="",B=I[K].split(" ");for(var re=0;re<B.length;re++)G="".concat(z+B[re])+" ",N<(R=this.textWidth(G))&&0<z.length?(this._renderText(M,z.trim(),A,C-X,H,O),z="".concat(B[re])+" ",C+=M.textLeading()):z=G;this._renderText(M,z.trim(),A,C-X,H,O),C+=M.textLeading()}}else{for(var se=[],fe=0;fe<I.length;fe++)for(var xe=I[fe].split(z=""),he=0;he<xe.length;he++)G="".concat(z+xe[he]),(R=this.textWidth(G))<=N?z+=xe[he]:N<R&&0<z.length&&(se.push(z),z="".concat(xe[he]));se.push(z);var _e=0;this._textBaseline===i.CENTER?_e=(se.length-1)*M.textLeading()/2:this._textBaseline===i.BOTTOM&&(_e=(se.length-1)*M.textLeading());for(var ye=0;ye<I.length;ye++){xe=I[ye].split(z="");for(var ue=0;ue<xe.length;ue++)G="".concat(z+xe[ue]),(R=this.textWidth(G))<=N?z+=xe[ue]:N<R&&0<z.length&&(this._renderText(M,z.trim(),A,C-_e,H,O),C+=M.textLeading(),z="".concat(xe[ue]))}this._renderText(M,z.trim(),A,C-_e,H,O),C+=M.textLeading()}}else{var pe=0;this._textBaseline===i.CENTER?pe=(I.length-1)*M.textLeading()/2:this._textBaseline===i.BOTTOM&&(pe=(I.length-1)*M.textLeading());for(var ke=0;ke<I.length;ke++)this._renderText(M,I[ke],A,C-pe,H,O-pe),C+=M.textLeading()}return M}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return y(j)==="object"&&j.font&&j.font.supported}},{key:"_updateTextMetrics",value:function(){var j,A,C,N,V,I;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((j=document.createElement("span")).style.fontFamily=this._textFont,j.style.fontSize="".concat(this._textSize,"px"),j.innerHTML="ABCjgq|",(I=document.createElement("div")).style.display="inline-block",I.style.width="1px",I.style.height="0px",N=((A=document.createElement("div")).appendChild(j),A.appendChild(I),A.style.height="0px",A.style.overflow="hidden",document.body.appendChild(A),I.style.verticalAlign="baseline",b(I)),V=b(j),C=N[1]-V[1],N=(I.style.verticalAlign="bottom",b(I)),V=b(j),I=N[1]-V[1]-C,document.body.removeChild(A),this._setProperty("_textAscent",C),this._setProperty("_textDescent",I)),this}}])&&_(S.prototype,E),T}(c.default.Element);function b(E){var S=0,k=0;if(E.offsetParent)for(;S+=E.offsetLeft,k+=E.offsetTop,E=E.offsetParent;);else S+=E.offsetLeft,k+=E.offsetTop;return[S,k]}x.prototype.textSize=function(E){return typeof E=="number"?(this._setProperty("_textSize",E),this._leadingSet||this._setProperty("_textLeading",E*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},c.default.Renderer=x,t=c.default.Renderer,l.default=t},{"../core/constants":264,"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],279:[function(E,a,l){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}function c(S){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(S)}E("core-js/modules/es.symbol"),E("core-js/modules/es.symbol.description"),E("core-js/modules/es.symbol.iterator"),E("core-js/modules/es.array.concat"),E("core-js/modules/es.array.fill"),E("core-js/modules/es.array.for-each"),E("core-js/modules/es.array.iterator"),E("core-js/modules/es.array.join"),E("core-js/modules/es.array.slice"),E("core-js/modules/es.function.name"),E("core-js/modules/es.number.to-fixed"),E("core-js/modules/es.object.get-own-property-descriptor"),E("core-js/modules/es.object.get-prototype-of"),E("core-js/modules/es.object.to-string"),E("core-js/modules/es.reflect.construct"),E("core-js/modules/es.reflect.get"),E("core-js/modules/es.regexp.to-string"),E("core-js/modules/es.string.iterator"),E("core-js/modules/es.weak-map"),E("core-js/modules/web.dom-collections.iterator"),E("core-js/modules/es.array.concat"),E("core-js/modules/es.array.fill"),E("core-js/modules/es.array.for-each"),E("core-js/modules/es.array.join"),E("core-js/modules/es.array.slice"),E("core-js/modules/es.function.name"),E("core-js/modules/es.number.to-fixed"),E("core-js/modules/es.object.get-prototype-of"),E("core-js/modules/es.object.to-string"),E("core-js/modules/es.regexp.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(b=E("./main"))&&b.__esModule?b:{default:b},f=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var k=y();if(k&&k.has(S))return k.get(S);var T,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in S){var C;Object.prototype.hasOwnProperty.call(S,T)&&((C=A?Object.getOwnPropertyDescriptor(S,T):null)&&(C.get||C.set)?Object.defineProperty(j,T,C):j[T]=S[T])}return j.default=S,k&&k.set(S,j),j}(E("./constants"));function y(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,y=function(){return S},S)}function _(S,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(S,j.key,j)}}function u(S,k,T){return(u=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(N,A,C){var N=function(V,I){for(;!Object.prototype.hasOwnProperty.call(V,I)&&(V=g(V))!==null;);return V}(N,A);if(N)return(N=Object.getOwnPropertyDescriptor(N,A)).get?N.get.call(C):N.value})(S,k,T||S)}function m(S,k){return(m=Object.setPrototypeOf||function(T,j){return T.__proto__=j,T})(S,k)}function p(S){return function(){var k,T=g(S),T=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=g(this).constructor,Reflect.construct(T,arguments,k)):T.apply(this,arguments),this);if(!k||c(k)!=="object"&&typeof k!="function"){if(T!==void 0)return T;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function g(S){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(S)}E("./p5.Renderer");var x="rgba(0,0,0,0)",b=function(S){var k=j;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),S&&m(k,S);var T=p(j);function j(A,C,N){if(this instanceof j)return(A=T.call(this,A,C,N)).drawingContext=A.canvas.getContext("2d"),A._pInst._setProperty("drawingContext",A.drawingContext),A;throw new TypeError("Cannot call a class as a function")}return k=j,(S=[{key:"getFilterGraphicsLayer",value:function(){var A;return this.filterGraphicsLayer||(A=(this._pInst instanceof i.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new i.default.Graphics(this.width,this.height,f.WEBGL,A)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=f.BLEND,this._setFill(f._DEFAULT_FILL),this._setStroke(f._DEFAULT_STROKE),this.drawingContext.lineCap=f.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(A,C){u(g(j.prototype),"resize",this).call(this,A,C),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var A,C;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof i.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(A=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(A,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(A=this._getFill(),C=(C=this._pInst).color.apply(C,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(C.levels),C=C.toString(),this._setFill(C),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(A),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setFill(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",A.levels)}},{key:"stroke",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setStroke(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",A.levels)}},{key:"erase",value:function(A,C){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,A=this._pInst.color(255,A).toString(),this.drawingContext.fillStyle=A,this._cachedStrokeStyle=this.drawingContext.strokeStyle,A=this._pInst.color(255,C).toString(),this.drawingContext.strokeStyle=A,C=this._cachedBlendMode,this.blendMode(f.REMOVE),this._cachedBlendMode=C,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var A=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},A=(u(g(j.prototype),"beginClip",this).call(this,A),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),A=(this.drawingContext.fillStyle=A,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),A=(this.drawingContext.strokeStyle=A,this._cachedBlendMode);this.blendMode(f.BLEND),this._cachedBlendMode=A,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),u(g(j.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(A,C,N,V,I,G,R,q,M){A.gifProperties&&A._animateGif(this._pInst);try{i.default.MediaElement&&A instanceof i.default.MediaElement&&A._ensureCanvas();var L=(L=this._tint&&A.canvas?this._getTintedImageCanvas(A):L)||A.canvas||A.elt,H=1;A.width&&0<A.width&&(H=L.width/A.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(L,H*C,H*N,H*V,H*I,G,R,q,M),this._isErasing&&this._pInst.erase()}catch(O){if(O.name!=="NS_ERROR_NOT_AVAILABLE")throw O}}},{key:"_getTintedImageCanvas",value:function(A){if(!A.canvas)return A;A.tintCanvas||(A.tintCanvas=document.createElement("canvas")),A.tintCanvas.width!==A.canvas.width&&(A.tintCanvas.width=A.canvas.width),A.tintCanvas.height!==A.canvas.height&&(A.tintCanvas.height=A.canvas.height);var C=A.tintCanvas.getContext("2d");return C.save(),C.clearRect(0,0,A.canvas.width,A.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(C.drawImage(A.canvas,0,0),C.globalCompositeOperation="luminosity",C.drawImage(A.canvas,0,0),C.globalCompositeOperation="color",C.drawImage(A.canvas,0,0),C.globalCompositeOperation="multiply",C.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),C.fillRect(0,0,A.canvas.width,A.canvas.height),C.globalCompositeOperation="destination-in"),C.globalAlpha=this._tint[3]/255,C.drawImage(A.canvas,0,0),C.restore(),A.tintCanvas}},{key:"blendMode",value:function(A){if(A===f.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(A!==f.BLEND&&A!==f.REMOVE&&A!==f.DARKEST&&A!==f.LIGHTEST&&A!==f.DIFFERENCE&&A!==f.MULTIPLY&&A!==f.EXCLUSION&&A!==f.SCREEN&&A!==f.REPLACE&&A!==f.OVERLAY&&A!==f.HARD_LIGHT&&A!==f.SOFT_LIGHT&&A!==f.DODGE&&A!==f.BURN&&A!==f.ADD)throw new Error("Mode ".concat(A," not recognized."));this._cachedBlendMode=A,this.drawingContext.globalCompositeOperation=A}}},{key:"blend",value:function(){for(var A=this.drawingContext.globalCompositeOperation,C=arguments.length,N=new Array(C),V=0;V<C;V++)N[V]=arguments[V];var I=N[N.length-1],G=Array.prototype.slice.call(N,0,N.length-1);this.drawingContext.globalCompositeOperation=I,i.default.prototype.copy.apply(this,G),this.drawingContext.globalCompositeOperation=A}},{key:"_getPixel",value:function(A,C){return A=this.drawingContext.getImageData(A,C,1,1).data,[A[0],A[1],A[2],A[3]]}},{key:"loadPixels",value:function(){var A=this._pixelsState,C=A._pixelDensity,N=this.width*C,C=this.height*C,N=this.drawingContext.getImageData(0,0,N,C);A._setProperty("imageData",N),A._setProperty("pixels",N.data)}},{key:"set",value:function(A,C,N){A=Math.floor(A),C=Math.floor(C);var V=this._pixelsState;if(N instanceof i.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(V._pixelDensity,V._pixelDensity),this.drawingContext.clearRect(A,C,N.width,N.height),this.drawingContext.drawImage(N.canvas,A,C),this.drawingContext.restore();else{var I=0,G=0,R=0,q=0,M=4*(C*V._pixelDensity*(this.width*V._pixelDensity)+A*V._pixelDensity);if(V.imageData||V.loadPixels.call(V),typeof N=="number")M<V.pixels.length&&(R=G=I=N,q=255);else if(N instanceof Array){if(N.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");M<V.pixels.length&&(I=N[0],G=N[1],R=N[2],q=N[3])}else N instanceof i.default.Color&&M<V.pixels.length&&(I=N.levels[0],G=N.levels[1],R=N.levels[2],q=N.levels[3]);for(var L=0;L<V._pixelDensity;L++)for(var H=0;H<V._pixelDensity;H++)M=4*((C*V._pixelDensity+H)*this.width*V._pixelDensity+(A*V._pixelDensity+L)),V.pixels[M]=I,V.pixels[M+1]=G,V.pixels[M+2]=R,V.pixels[M+3]=q}}},{key:"updatePixels",value:function(A,C,N,V){var I=this._pixelsState,G=I._pixelDensity;A===void 0&&C===void 0&&N===void 0&&V===void 0&&(C=A=0,N=this.width,V=this.height),A*=G,C*=G,N*=G,V*=G,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=I.imageData),this.drawingContext.putImageData(I.imageData,A,C,0,0,N,V)}},{key:"_acuteArcToBezier",value:function(A,C){var G=C/2,N=Math.cos(G),q=Math.sin(G),V=1/Math.tan(G),G=A+G,I=Math.cos(G),G=Math.sin(G),R=(4-N)/3,q=q+(N-R)*V;return{ax:Math.cos(A).toFixed(7),ay:Math.sin(A).toFixed(7),bx:(R*I+q*G).toFixed(7),by:(R*G-q*I).toFixed(7),cx:(R*I-q*G).toFixed(7),cy:(R*G+q*I).toFixed(7),dx:Math.cos(A+C).toFixed(7),dy:Math.sin(A+C).toFixed(7)}}},{key:"arc",value:function(A,C,N,V,I,G,R){var q,M=this.drawingContext,L=N/2,H=V/2,O=[];for(A+=L,C+=H;1e-5<=G-I;)q=Math.min(G-I,f.HALF_PI),O.push(this._acuteArcToBezier(I,q)),I+=q;return this._doFill&&(this._clipping||M.beginPath(),O.forEach(function(U,J){J===0&&M.moveTo(A+U.ax*L,C+U.ay*H),M.bezierCurveTo(A+U.bx*L,C+U.by*H,A+U.cx*L,C+U.cy*H,A+U.dx*L,C+U.dy*H)}),R!==f.PIE&&R!=null||M.lineTo(A,C),M.closePath(),this._clipping||M.fill()),this._doStroke&&(this._clipping||M.beginPath(),O.forEach(function(U,J){J===0&&M.moveTo(A+U.ax*L,C+U.ay*H),M.bezierCurveTo(A+U.bx*L,C+U.by*H,A+U.cx*L,C+U.cy*H,A+U.dx*L,C+U.dy*H)}),R===f.PIE?(M.lineTo(A,C),M.closePath()):R===f.CHORD&&M.closePath(),this._clipping||M.stroke()),this}},{key:"ellipse",value:function(O){var C=this.drawingContext,N=this._doFill,V=this._doStroke,I=parseFloat(O[0]),G=parseFloat(O[1]),H=parseFloat(O[2]),O=parseFloat(O[3]);if(N&&!V){if(this._getFill()===x)return this}else if(!N&&V&&this._getStroke()===x)return this;var R=H/2*.5522847498,q=O/2*.5522847498,M=I+H,L=G+O,H=I+H/2,O=G+O/2;this._clipping||C.beginPath(),C.moveTo(I,O),C.bezierCurveTo(I,O-q,H-R,G,H,G),C.bezierCurveTo(H+R,G,M,O-q,M,O),C.bezierCurveTo(M,O+q,H+R,L,H,L),C.bezierCurveTo(H-R,L,I,O+q,I,O),!this._clipping&&N&&C.fill(),!this._clipping&&V&&C.stroke()}},{key:"line",value:function(A,C,N,V){var I=this.drawingContext;return this._doStroke&&this._getStroke()!==x&&(this._clipping||I.beginPath(),I.moveTo(A,C),I.lineTo(N,V),I.stroke()),this}},{key:"point",value:function(A,C){var N,V,I=this.drawingContext;return!this._doStroke||this._getStroke()===x?this:(N=this._getStroke(),V=this._getFill(),this._clipping||this._setFill(N),this._clipping||I.beginPath(),I.arc(A,C,I.lineWidth/2,0,f.TWO_PI,!1),void(this._clipping||(I.fill(),this._setFill(V))))}},{key:"quad",value:function(A,C,N,V,I,G,R,q){var M=this.drawingContext,L=this._doFill,H=this._doStroke;if(L&&!H){if(this._getFill()===x)return this}else if(!L&&H&&this._getStroke()===x)return this;return this._clipping||M.beginPath(),M.moveTo(A,C),M.lineTo(N,V),M.lineTo(I,G),M.lineTo(R,q),M.closePath(),!this._clipping&&L&&M.fill(),!this._clipping&&H&&M.stroke(),this}},{key:"rect",value:function(H){var C,N,V=H[0],I=H[1],G=H[2],R=H[3],q=H[4],M=H[5],L=H[6],H=H[7],O=this.drawingContext,U=this._doFill,J=this._doStroke;if(U&&!J){if(this._getFill()===x)return this}else if(!U&&J&&this._getStroke()===x)return this;return this._clipping||O.beginPath(),q===void 0?O.rect(V,I,G,R):(M===void 0&&(M=q),L===void 0&&(L=M),H===void 0&&(H=L),J=(U=Math.abs(G))/2,N=(C=Math.abs(R))/2,C<2*(q=U<2*q?J:q)&&(q=N),C<2*(M=U<2*M?J:M)&&(M=N),C<2*(L=U<2*L?J:L)&&(L=N),C<2*(H=U<2*H?J:H)&&(H=N),this._clipping||O.beginPath(),O.moveTo(V+q,I),O.arcTo(V+G,I,V+G,I+R,M),O.arcTo(V+G,I+R,V,I+R,L),O.arcTo(V,I+R,V,I,H),O.arcTo(V,I,V+G,I,q),O.closePath()),!this._clipping&&this._doFill&&O.fill(),!this._clipping&&this._doStroke&&O.stroke(),this}},{key:"triangle",value:function(L){var C=this.drawingContext,N=this._doFill,V=this._doStroke,I=L[0],G=L[1],R=L[2],q=L[3],M=L[4],L=L[5];if(N&&!V){if(this._getFill()===x)return this}else if(!N&&V&&this._getStroke()===x)return this;this._clipping||C.beginPath(),C.moveTo(I,G),C.lineTo(R,q),C.lineTo(M,L),C.closePath(),!this._clipping&&N&&C.fill(),!this._clipping&&V&&C.stroke()}},{key:"endShape",value:function(A,C,N,V,I,G,R){if(C.length!==0&&(this._doStroke||this._doFill)){var q,M,L,H=A===f.CLOSE,O=(H&&!G&&C.push(C[0]),C.length);if(N&&R===null){if(3<O){var U=[],J=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[1][0],C[1][1]),M=1;M+2<O;M++)q=C[M],U[0]=[q[0],q[1]],U[1]=[q[0]+(J*C[M+1][0]-J*C[M-1][0])/6,q[1]+(J*C[M+1][1]-J*C[M-1][1])/6],U[2]=[C[M+1][0]+(J*C[M][0]-J*C[M+2][0])/6,C[M+1][1]+(J*C[M][1]-J*C[M+2][1])/6],U[3]=[C[M+1][0],C[M+1][1]],this.drawingContext.bezierCurveTo(U[1][0],U[1][1],U[2][0],U[2][1],U[3][0],U[3][1]);H&&this.drawingContext.lineTo(C[M+1][0],C[M+1][1]),this._doFillStrokeClose(H)}}else if(V&&R===null){for(this._clipping||this.drawingContext.beginPath(),M=0;M<O;M++)C[M].isVert?C[M].moveTo?this.drawingContext.moveTo(C[M][0],C[M][1]):this.drawingContext.lineTo(C[M][0],C[M][1]):this.drawingContext.bezierCurveTo(C[M][0],C[M][1],C[M][2],C[M][3],C[M][4],C[M][5]);this._doFillStrokeClose(H)}else if(I&&R===null){for(this._clipping||this.drawingContext.beginPath(),M=0;M<O;M++)C[M].isVert?C[M].moveTo?this.drawingContext.moveTo(C[M][0],C[M][1]):this.drawingContext.lineTo(C[M][0],C[M][1]):this.drawingContext.quadraticCurveTo(C[M][0],C[M][1],C[M][2],C[M][3]);this._doFillStrokeClose(H)}else if(R===f.POINTS)for(M=0;M<O;M++)q=C[M],this._doStroke&&this._pInst.stroke(q[6]),this._pInst.point(q[0],q[1]);else if(R===f.LINES)for(M=0;M+1<O;M+=2)q=C[M],this._doStroke&&this._pInst.stroke(C[M+1][6]),this._pInst.line(q[0],q[1],C[M+1][0],C[M+1][1]);else if(R===f.TRIANGLES)for(M=0;M+2<O;M+=3)q=C[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[M+1][0],C[M+1][1]),this.drawingContext.lineTo(C[M+2][0],C[M+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(C[M+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(C[M+2][6]),this.drawingContext.stroke());else if(R===f.TRIANGLE_STRIP)for(M=0;M+1<O;M++)q=C[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[M+1][0],C[M+1][1]),this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+1][5]),M+2<O&&(this.drawingContext.lineTo(C[M+2][0],C[M+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+2][5])),this._doFillStrokeClose(H);else if(R===f.TRIANGLE_FAN){if(2<O){for(this._clipping||this.drawingContext.beginPath(),M=2;M<O;M++)q=C[M],this.drawingContext.moveTo(C[0][0],C[0][1]),this.drawingContext.lineTo(C[M-1][0],C[M-1][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[0][0],C[0][1]),M<O-1&&(this._doFill&&q[5]!==C[M+1][5]||this._doStroke&&q[6]!==C[M+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(q[5]),this.drawingContext.fill(),this._pInst.fill(C[M+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(q[6]),this.drawingContext.stroke(),this._pInst.stroke(C[M+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(H)}}else if(R===f.QUADS)for(M=0;M+3<O;M+=4){for(q=C[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),L=1;L<4;L++)this.drawingContext.lineTo(C[M+L][0],C[M+L][1]);this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+3][6]),this._doFillStrokeClose(H)}else if(R===f.QUAD_STRIP){if(3<O)for(M=0;M+1<O;M+=2)q=C[M],this._clipping||this.drawingContext.beginPath(),M+3<O?(this.drawingContext.moveTo(C[M+2][0],C[M+2][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[M+1][0],C[M+1][1]),this.drawingContext.lineTo(C[M+3][0],C[M+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+3][6])):(this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[M+1][0],C[M+1][1])),this._doFillStrokeClose(H)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[0][0],C[0][1]),M=1;M<O;M++)(q=C[M]).isVert&&(q.moveTo?(H&&this.drawingContext.closePath(),this.drawingContext.moveTo(q[0],q[1])):this.drawingContext.lineTo(q[0],q[1]));this._doFillStrokeClose(H)}G=I=V=N=!1,H&&C.pop()}return this}},{key:"strokeCap",value:function(A){return A!==f.ROUND&&A!==f.SQUARE&&A!==f.PROJECT||(this.drawingContext.lineCap=A),this}},{key:"strokeJoin",value:function(A){return A!==f.ROUND&&A!==f.BEVEL&&A!==f.MITER||(this.drawingContext.lineJoin=A),this}},{key:"strokeWeight",value:function(A){return this.drawingContext.lineWidth=A===void 0||A===0?1e-4:A,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(A){A!==this._cachedFillStyle&&(this.drawingContext.fillStyle=A,this._cachedFillStyle=A)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(A){A!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=A,this._cachedStrokeStyle=A)}},{key:"bezier",value:function(A,C,N,V,I,G,R,q){return this._pInst.beginShape(),this._pInst.vertex(A,C),this._pInst.bezierVertex(N,V,I,G,R,q),this._pInst.endShape(),this}},{key:"curve",value:function(A,C,N,V,I,G,R,q){return this._pInst.beginShape(),this._pInst.curveVertex(A,C),this._pInst.curveVertex(N,V),this._pInst.curveVertex(I,G),this._pInst.curveVertex(R,q),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(A){A&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(A,C,N,V,I,G){this.drawingContext.transform(A,C,N,V,I,G)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(A){this.drawingContext.rotate(A)}},{key:"scale",value:function(A,C){return this.drawingContext.scale(A,C),this}},{key:"translate",value:function(A,C){return A instanceof i.default.Vector&&(C=A.y,A=A.x),this.drawingContext.translate(A,C),this}},{key:"_renderText",value:function(A,C,N,V,I,G){if(!(V<G||I<=V))return A.push(),this._isOpenType()?this._textFont._renderPath(C,N,V,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(C,N,V),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(f._DEFAULT_TEXT_FILL),this.drawingContext.fillText(C,N,V))),A.pop(),A}},{key:"textWidth",value:function(A){return this._isOpenType()?this._textFont._textWidth(A,this._textSize):this.drawingContext.measureText(A).width}},{key:"_applyTextProperties",value:function(){var A,C=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),A=this._textFont,this._isOpenType()&&(A=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(A||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===f.CENTER?this.drawingContext.textBaseline=f._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,C}},{key:"push",value:function(){return this.drawingContext.save(),u(g(j.prototype),"push",this).call(this)}},{key:"pop",value:function(A){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,u(g(j.prototype),"pop",this).call(this,A)}}])&&_(k.prototype,S),j}(i.default.Renderer),E=(b.prototype.text=function(S,k,T,N,A){N!==void 0&&this.drawingContext.textBaseline===f.BASELINE&&(C=!0,this.drawingContext.textBaseline=f.TOP);var C,N=i.default.Renderer.prototype.text.apply(this,arguments);return C&&(this.drawingContext.textBaseline=f.BASELINE),N},i.default.Renderer2D=b,i.default.Renderer2D);l.default=E},{"./constants":264,"./main":275,"./p5.Renderer":278,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],280:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var o=(t=t("./main"))&&t.__esModule?t:{default:t};o.default.prototype._promisePreloads=[];function c(){return{}}var i=!(o.default.prototype.registerPromisePreload=function(f){o.default.prototype._promisePreloads.push(f)});o.default.prototype._setupPromisePreloads=function(){var f=!0,y=!1,_=void 0;try{for(var u,m=this._promisePreloads[Symbol.iterator]();!(f=(u=m.next()).done);f=!0){var p=u.value,g=this,x=p.method,b=p.addCallbacks,E=p.legacyPreloadSetup,S=p.target||this,k=S[x].bind(S);if(S===o.default.prototype){if(i)continue;g=null,k=S[x]}S[x]=this._wrapPromisePreload(g,k,b),E&&(S[E.method]=this._legacyPreloadGenerator(g,E,S[x]))}}catch(T){y=!0,_=T}finally{try{f||m.return==null||m.return()}finally{if(y)throw _}}i=!0},o.default.prototype._wrapPromisePreload=function(f,y,_){var u=function(){for(var m=this,p=(this._incrementPreload(),null),g=null,x=arguments.length,b=new Array(x),E=0;E<x;E++)b[E]=arguments[E];if(_)for(var S=b.length-1;0<=S&&!g&&typeof b[S]=="function";S--)g=p,p=b.pop();var k=Promise.resolve(y.apply(this,b));return p&&k.then(p),g&&k.catch(g),k.then(function(){return m._decrementPreload()}),k};return u=f?u.bind(f):u},o.default.prototype._legacyPreloadGenerator=function(f,m,_){var u=m.createBaseObject||c,m=function(){var p=this;this._incrementPreload();for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var E=u.apply(this,x);return _.apply(this,x).then(function(S){Object.assign(E,S),p._decrementPreload()}),E};return m=f?m.bind(f):m}},{"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],281:[function(t,a,l){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(u=t("./main"))&&u.__esModule?u:{default:u},i=function(m){if(m&&m.__esModule)return m;if(m===null||y(m)!=="object"&&typeof m!="function")return{default:m};var p=f();if(p&&p.has(m))return p.get(m);var g,x={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var E;Object.prototype.hasOwnProperty.call(m,g)&&((E=b?Object.getOwnPropertyDescriptor(m,g):null)&&(E.get||E.set)?Object.defineProperty(x,g,E):x[g]=m[g])}return x.default=m,p&&p.set(m,x),x}(t("./constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function y(m){return(y=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(m)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var _="defaultCanvas0",u=(c.default.prototype.createCanvas=function(m,p,g,x){var b,E,S;if(c.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(g=i.P2D,x=arguments[2]):b=g||i.P2D,x)(S=document.getElementById(_))&&S.parentNode.removeChild(S),S=x,this._defaultGraphicsCreated=!1;else{if(b===i.WEBGL)(S=document.getElementById(_))&&(S.parentNode.removeChild(S),E=this._renderer,this._elements=this._elements.filter(function(T){return T!==E})),(S=document.createElement("canvas")).id=_,S.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)S=this.canvas;else{S=x||document.createElement("canvas");for(var k=0;document.getElementById("defaultCanvas".concat(k));)k++;_="defaultCanvas".concat(k),S.id=_,S.classList.add("p5Canvas")}this._setupDone||(S.dataset.hidden=!0,S.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(g=document.createElement("main"),document.body.appendChild(g)),document.getElementsByTagName("main")[0])).appendChild(S)}return b===i.WEBGL?(this._setProperty("_renderer",new c.default.RendererGL(S,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new c.default.Renderer2D(S,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(m,p),this._renderer._applyDefaults(),this._renderer},c.default.prototype.resizeCanvas=function(m,p,g){if(c.default._validateParameters("resizeCanvas",arguments),this._renderer){var x,b,E={};for(x in this.drawingContext){var S=this.drawingContext[x];y(S)!=="object"&&typeof S!="function"&&(E[x]=S)}for(b in this.width=m,this.height=p,this._renderer.resize(m,p),E)try{this.drawingContext[b]=E[b]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},c.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},c.default.prototype.createGraphics=function(m,p){for(var g=arguments.length,x=new Array(2<g?g-2:0),b=2;b<g;b++)x[b-2]=arguments[b];return x[0]instanceof HTMLCanvasElement&&(x[1]=x[0],x[0]=i.P2D),c.default._validateParameters("createGraphics",arguments),new c.default.Graphics(m,p,x[0],this,x[1])},c.default.prototype.createFramebuffer=function(m){return new c.default.Framebuffer(this,m)},c.default.prototype.blendMode=function(m){c.default._validateParameters("blendMode",arguments),m===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),m=i.BLEND),this._renderer.blendMode(m)},c.default);l.default=u},{"../webgl/p5.RendererGL":332,"./constants":264,"./main":275,"./p5.Graphics":277,"./p5.Renderer2D":279,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],282:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=u(t("../main")),f=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=_();if(g&&g.has(p))return g.get(p);var x,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in p){var S;Object.prototype.hasOwnProperty.call(p,x)&&((S=E?Object.getOwnPropertyDescriptor(p,x):null)&&(S.get||S.set)?Object.defineProperty(b,x,S):b[x]=p[x])}return b.default=p,g&&g.set(p,b),b}(t("../constants")),y=u(t("../helpers"));function _(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,_=function(){return p},p)}function u(p){return p&&p.__esModule?p:{default:p}}function m(p){return function(g){if(Array.isArray(g)){for(var x=0,b=new Array(g.length);x<g.length;x++)b[x]=g[x];return b}}(p)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),i.default.prototype._normalizeArcAngles=function(p,g,x,b,E){var S;return p-=f.TWO_PI*Math.floor(p/f.TWO_PI),g-=f.TWO_PI*Math.floor(g/f.TWO_PI),S=Math.min(Math.abs(p-g),f.TWO_PI-Math.abs(p-g)),E&&(p=p<=f.HALF_PI?Math.atan(x/b*Math.tan(p)):p>f.HALF_PI&&p<=3*f.HALF_PI?Math.atan(x/b*Math.tan(p))+f.PI:Math.atan(x/b*Math.tan(p))+f.TWO_PI,g=g<=f.HALF_PI?Math.atan(x/b*Math.tan(g)):g>f.HALF_PI&&g<=3*f.HALF_PI?Math.atan(x/b*Math.tan(g))+f.PI:Math.atan(x/b*Math.tan(g))+f.TWO_PI),g<p&&(g+=f.TWO_PI),{start:p,stop:g,correspondToSamePoint:S<1e-5}},i.default.prototype.arc=function(p,g,x,b,E,S,k,T){return i.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&E!==S&&(E=this._toRadians(E),S=this._toRadians(S),x=Math.abs(x),b=Math.abs(b),p=y.default.modeAdjust(p,g,x,b,this._renderer._ellipseMode),(g=this._normalizeArcAngles(E,S,p.w,p.h,!0)).correspondToSamePoint?this._renderer.ellipse([p.x,p.y,p.w,p.h,T]):(this._renderer.arc(p.x,p.y,p.w,p.h,g.start,g.stop,k,T),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[p.x,p.y,p.w,p.h,g.start,g.stop,k]))),this},i.default.prototype.ellipse=function(p,g,x,b,E){return i.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},i.default.prototype.circle=function(){i.default._validateParameters("circle",arguments);var p=Array.prototype.slice.call(arguments,0,2);return p.push(arguments[2]),p.push(arguments[2]),this._renderEllipse.apply(this,m(p))},i.default.prototype._renderEllipse=function(p,g,x,b,E){return(this._renderer._doStroke||this._renderer._doFill)&&(x<0&&(x=Math.abs(x)),b===void 0?b=x:b<0&&(b=Math.abs(b)),p=y.default.modeAdjust(p,g,x,b,this._renderer._ellipseMode),this._renderer.ellipse([p.x,p.y,p.w,p.h,E]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[p.x,p.y,p.w,p.h])),this},i.default.prototype.line=function(){for(var p,g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];return i.default._validateParameters("line",x),this._renderer._doStroke&&(p=this._renderer).line.apply(p,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",x),this},i.default.prototype.point=function(){for(var p,g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];return i.default._validateParameters("point",x),this._renderer._doStroke&&(x.length===1&&x[0]instanceof i.default.Vector?this._renderer.point.call(this._renderer,x[0].x,x[0].y,x[0].z):((p=this._renderer).point.apply(p,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",x))),this},i.default.prototype.quad=function(){for(var p,g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];return i.default._validateParameters("quad",x),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&x.length<12?this._renderer.quad.call(this._renderer,x[0],x[1],0,x[2],x[3],0,x[4],x[5],0,x[6],x[7],0,x[8],x[9]):((p=this._renderer).quad.apply(p,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",x))),this},i.default.prototype.rect=function(){for(var p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];return i.default._validateParameters("rect",g),this._renderRect.apply(this,g)},i.default.prototype.square=function(p,g,x,b,E,S,k){return i.default._validateParameters("square",arguments),this._renderRect.call(this,p,g,x,x,b,E,S,k)},i.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var p=y.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),g=[p.x,p.y,p.w,p.h],x=4;x<arguments.length;x++)g[x]=arguments[x];this._renderer.rect(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[p.x,p.y,p.w,p.h])}return this},i.default.prototype.triangle=function(){for(var p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];return i.default._validateParameters("triangle",g),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",g),this},t=i.default,l.default=t},{"../constants":264,"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../helpers":271,"../main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],283:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var m=y();if(m&&m.has(u))return m.get(u);var p,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var b;Object.prototype.hasOwnProperty.call(u,p)&&((b=x?Object.getOwnPropertyDescriptor(u,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=u[p])}return g.default=u,m&&m.set(u,g),g}(t("../constants"));function y(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,y=function(){return u},u)}i.default.prototype.ellipseMode=function(u){return i.default._validateParameters("ellipseMode",arguments),u!==f.CORNER&&u!==f.CORNERS&&u!==f.RADIUS&&u!==f.CENTER||(this._renderer._ellipseMode=u),this},i.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(u){return i.default._validateParameters("rectMode",arguments),u!==f.CORNER&&u!==f.CORNERS&&u!==f.RADIUS&&u!==f.CENTER||(this._renderer._rectMode=u),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(u){return i.default._validateParameters("strokeCap",arguments),u!==f.ROUND&&u!==f.SQUARE&&u!==f.PROJECT||this._renderer.strokeCap(u),this},i.default.prototype.strokeJoin=function(u){return i.default._validateParameters("strokeJoin",arguments),u!==f.ROUND&&u!==f.BEVEL&&u!==f.MITER||this._renderer.strokeJoin(u),this},i.default.prototype.strokeWeight=function(u){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(u),this};var _=i.default;l.default=_},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],284:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(c=t("../main"))&&c.__esModule?c:{default:c};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var i,f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return o.default._validateParameters("bezier",y),(this._renderer._doStroke||this._renderer._doFill)&&(i=this._renderer).bezier.apply(i,y),this},o.default.prototype.bezierDetail=function(i){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=i,this},o.default.prototype.bezierPoint=function(i,f,y,_,u){o.default._validateParameters("bezierPoint",arguments);var m=1-u;return Math.pow(m,3)*i+3*Math.pow(m,2)*u*f+3*m*Math.pow(u,2)*y+Math.pow(u,3)*_},o.default.prototype.bezierTangent=function(i,f,y,_,u){o.default._validateParameters("bezierTangent",arguments);var m=1-u;return 3*_*Math.pow(u,2)-3*y*Math.pow(u,2)+6*y*m*u-6*f*m*u+3*f*Math.pow(m,2)-3*i*Math.pow(m,2)},o.default.prototype.curve=function(){for(var i,f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return o.default._validateParameters("curve",y),this._renderer._doStroke&&(i=this._renderer).curve.apply(i,y),this},o.default.prototype.curveDetail=function(i){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=i<3?3:i,this},o.default.prototype.curveTightness=function(i){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=i,this},o.default.prototype.curvePoint=function(i,f,y,_,u){o.default._validateParameters("curvePoint",arguments);var m=this._renderer._curveTightness,p=u*u*u,g=u*u;return i*((m-1)/2*p+(1-m)*g+(m-1)/2*u)+f*((m+3)/2*p+(-5-m)/2*g+1)+y*((-3-m)/2*p+(m+2)*g+(1-m)/2*u)+_*((1-m)/2*p+(m-1)/2*g)},o.default.prototype.curveTangent=function(i,f,y,_,g){o.default._validateParameters("curveTangent",arguments);var m=this._renderer._curveTightness,p=g*g*3,g=2*g;return i*((m-1)/2*p+(1-m)*g+(m-1)/2)+f*((m+3)/2*p+(-5-m)/2*g)+y*((-3-m)/2*p+(m+2)*g+(1-m)/2)+_*((1-m)/2*p+(m-1)/2*g)};var c=o.default;l.default=c},{"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../main":275}],285:[function(t,a,l){function o(k){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(k)}function c(k){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(T){return o(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":o(T)})(k)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(S=t("../main"))&&S.__esModule?S:{default:S},f=function(k){if(k&&k.__esModule)return k;if(k===null||c(k)!=="object"&&typeof k!="function")return{default:k};var T=y();if(T&&T.has(k))return T.get(k);var j,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var N;Object.prototype.hasOwnProperty.call(k,j)&&((N=C?Object.getOwnPropertyDescriptor(k,j):null)&&(N.get||N.set)?Object.defineProperty(A,j,N):A[j]=k[j])}return A.default=k,T&&T.set(k,A),A}(t("../constants"));function y(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,y=function(){return k},k)}var _=null,u=[],m=[],p=!1,g=!1,x=!1,b=!1,E=!0,S=(i.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(m=[],b=!0),this},i.default.prototype.beginShape=function(k){var T;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(T=this._renderer).beginShape.apply(T,arguments):(_=k===f.POINTS||k===f.LINES||k===f.TRIANGLES||k===f.TRIANGLE_FAN||k===f.TRIANGLE_STRIP||k===f.QUADS||k===f.QUAD_STRIP?k:null,u=[],m=[]),this},i.default.prototype.bezierVertex=function(){for(var k,T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];if(i.default._validateParameters("bezierVertex",j),this._renderer.isP3D)(k=this._renderer).bezierVertex.apply(k,j);else if(u.length===0)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{p=!0;for(var C=[],N=0;N<j.length;N++)C[N]=j[N];C.isVert=!1,(b?m:u).push(C)}return this},i.default.prototype.curveVertex=function(){for(var k,T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];return i.default._validateParameters("curveVertex",j),this._renderer.isP3D?(k=this._renderer).curveVertex.apply(k,j):(g=!0,this.vertex(j[0],j[1])),this},i.default.prototype.endContour=function(){if(!this._renderer.isP3D){var k=m[0].slice();k.isVert=m[0].isVert,k.moveTo=!1,m.push(k),E&&(u.push(u[0]),E=!1);for(var T=0;T<m.length;T++)u.push(m[T])}return this},i.default.prototype.endShape=function(k){var T=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(i.default._validateParameters("endShape",arguments),T<1&&(console.log(" p5.js says: You can not have less than one instance"),T=1),this._renderer.isP3D)this._renderer.endShape(k,g,p,x,b,_,T);else{if(T!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),u.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;T=k===f.CLOSE,T&&!b&&u.push(u[0]),this._renderer.endShape(k,u,g,p,x,b,_),E=!(b=x=p=g=!1),T&&u.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var k,T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];if(i.default._validateParameters("quadraticVertex",j),this._renderer.isP3D)(k=this._renderer).quadraticVertex.apply(k,j);else{if(this._contourInited)return(k={}).x=j[0],k.y=j[1],k.x3=j[2],k.y3=j[3],k.type=f.QUADRATIC,this._contourVertices.push(k),this;if(0<u.length){x=!0;for(var C=[],N=0;N<j.length;N++)C[N]=j[N];C.isVert=!1,(b?m:u).push(C)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(k,T,j,A,C){var N;return this._renderer.isP3D?(N=this._renderer).vertex.apply(N,arguments):((N=[]).isVert=!0,N[0]=k,N[1]=T,N[2]=0,N[3]=0,N[4]=0,N[5]=this._renderer._getFill(),N[6]=this._renderer._getStroke(),j&&(N.moveTo=j),(b?(m.length===0&&(N.moveTo=!0),m):u).push(N)),this},i.default.prototype.normal=function(k,T,j){var A;return this._assert3d("normal"),i.default._validateParameters("normal",arguments),(A=this._renderer).normal.apply(A,arguments),this},i.default);l.default=S},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],286:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function c(u){return function(m){if(Array.isArray(m)){for(var p=0,g=new Array(m.length);p<m.length;p++)g[p]=m[p];return g}}(u)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(u){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}var f,y,_;t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u,m){window.setTimeout(u,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(f=Object.keys,t=Object.defineProperty,y=typeof Symbol=="function"&&i(Symbol())==="symbol",_=Object.prototype.propertyIsEnumerable,t(Object,"assign",{value:function(u,m){if(u==null)throw new TypeError("target must be an object");for(var p,g=Object(u),x=1;x<arguments.length;++x){var b=Object(arguments[x]),E=f(b);for(y&&Object.getOwnPropertySymbols&&E.push.apply(E,c(Object.getOwnPropertySymbols(b).filter(function(S){return function(k){return _.call(S,k)}}(b)))),p=0;p<E.length;++p)g[E[p]]=b[E[p]]}return g},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/web.dom-collections.iterator":238}],287:[function(t,a,l){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var c=parseInt(o),i=((isNaN(c)||c<1)&&(c=1),this._isGlobal?window:this);if(typeof i.draw=="function"){i.setup===void 0&&i.scale(i._pixelDensity,i._pixelDensity);for(var f=0;f<c;f++){i.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),i._renderer.isP3D&&i._renderer._update(),i._setProperty("frameCount",i.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{i.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,l.default=t},{"./main":275,"core-js/modules/es.object.assign":176}],288:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("./main"))&&t.__esModule?t:{default:t};function c(i){return function(f){if(Array.isArray(f)){for(var y=0,_=new Array(f.length);y<f.length;y++)_[y]=f[y];return _}}(i)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var i=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||i?(i=this._renderer).applyMatrix.apply(i,c(arguments.length<=0?void 0:arguments[0])):(i=this._renderer).applyMatrix.apply(i,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(i,f){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(i),f),this},o.default.prototype.rotateX=function(i){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(i)),this},o.default.prototype.rotateY=function(i){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(i)),this},o.default.prototype.rotateZ=function(i){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(i)),this},o.default.prototype.scale=function(i,f,y){var _;return o.default._validateParameters("scale",arguments),i instanceof o.default.Vector?(i=(_=i).x,f=_.y,y=_.z):i instanceof Array&&(i=(_=i)[0],f=_[1],y=_[2]||1),isNaN(f)?f=y=i:isNaN(y)&&(y=1),this._renderer.scale.call(this._renderer,i,f,y),this},o.default.prototype.shearX=function(i){return o.default._validateParameters("shearX",arguments),i=this._toRadians(i),this._renderer.applyMatrix(1,0,Math.tan(i),1,0,0),this},o.default.prototype.shearY=function(i){return o.default._validateParameters("shearY",arguments),i=this._toRadians(i),this._renderer.applyMatrix(1,Math.tan(i),0,1,0,0),this},o.default.prototype.translate=function(i,f,y){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(i,f,y):this._renderer.translate(i,f),this},t=o.default,l.default=t},{"./main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238}],289:[function(t,a,l){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(y){return function(_){if(Array.isArray(_)){for(var u=0,m=new Array(_.length);u<_.length;u++)m[u]=_[u];return m}}(y)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(y){return(f=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(y)}c.default.prototype.storeItem=function(y,_){typeof y!="string"&&console.log("The argument that you passed to storeItem() - ".concat(y," is not a string.")),y.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(y," must not end with 'p5TypeID'.")),_===void 0&&console.log("You cannot store undefined variables using storeItem().");var u=f(_);switch(u){case"number":case"boolean":_=_.toString();break;case"object":_ instanceof c.default.Color?u="p5.Color":_ instanceof c.default.Vector&&(u="p5.Vector",_=[_.x,_.y,_.z]),_=JSON.stringify(_)}localStorage.setItem(y,_),y="".concat(y,"p5TypeID"),localStorage.setItem(y,u)},c.default.prototype.getItem=function(y){var _=localStorage.getItem(y),u=localStorage.getItem("".concat(y,"p5TypeID"));if(u===void 0)console.log("Unable to determine type of item stored under ".concat(y,"in local storage. Did you save the item with something other than setItem()?"));else if(_!==null)switch(u){case"number":_=parseFloat(_);break;case"boolean":_=_==="true";break;case"object":_=JSON.parse(_);break;case"p5.Color":_=JSON.parse(_),_=this.color.apply(this,i(_.levels));break;case"p5.Vector":_=JSON.parse(_),_=this.createVector.apply(this,i(_))}return _},c.default.prototype.clearStorage=function(){localStorage.clear()},c.default.prototype.removeItem=function(y){typeof y!="string"&&console.log("The argument that you passed to removeItem() - ".concat(y," is not a string.")),localStorage.removeItem(y),localStorage.removeItem("".concat(y,"p5TypeID"))}},{"../core/main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],290:[function(t,a,l){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}function c(x){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(b){return o(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":o(b)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),b&&y(x,b)}function y(x,b){return(y=Object.setPrototypeOf||function(E,S){return E.__proto__=S,E})(x,b)}function _(x){return function(){var b,E=u(x),E=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=u(this).constructor,Reflect.construct(E,arguments,b)):E.apply(this,arguments),this);if(!b||c(b)!=="object"&&typeof b!="function"){if(E!==void 0)return E;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function u(x){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(x)}function m(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function p(x,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,S.key,S)}}function g(x,b,E){b&&p(x.prototype,b),E&&p(x,E)}i.default.prototype.createStringDict=function(x,b){return i.default._validateParameters("createStringDict",arguments),new i.default.StringDict(x,b)},i.default.prototype.createNumberDict=function(x,b){return i.default._validateParameters("createNumberDict",arguments),new i.default.NumberDict(x,b)},i.default.TypedDict=function(){function x(b,E){return m(this,x),b instanceof Object?this.data=b:(this.data={},this.data[b]=E),this}return g(x,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,E){this._validate(E)?this.data[b]=E:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var E in b)this.set(E,b[E])}},{key:"create",value:function(b,E){b instanceof Object&&E===void 0?this._addObj(b):b!==void 0?this.set(b,E):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var E,S="";for(E in this.data)S+="".concat(E,",").concat(this.data[E],`
`);var k=new Blob([S],{type:"text/csv"});i.default.prototype.downloadFile(k,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,E){i.default.prototype.saveJSON(this.data,b,E)}},{key:"_validate",value:function(b){return!0}}]),x}(),i.default.StringDict=function(){f(b,i.default.TypedDict);var x=_(b);function b(){m(this,b);for(var E=arguments.length,S=new Array(E),k=0;k<E;k++)S[k]=arguments[k];return x.call.apply(x,[this].concat(S))}return g(b,[{key:"_validate",value:function(E){return typeof E=="string"}}]),b}(),i.default.NumberDict=function(){f(b,i.default.TypedDict);var x=_(b);function b(){m(this,b);for(var E=arguments.length,S=new Array(E),k=0;k<E;k++)S[k]=arguments[k];return x.call.apply(x,[this].concat(S))}return g(b,[{key:"_validate",value:function(E){return typeof E=="number"}},{key:"add",value:function(E,S){this.data.hasOwnProperty(E)?this.data[E]+=S:console.log("The key - ".concat(E," does not exist in this dictionary."))}},{key:"sub",value:function(E,S){this.add(E,-S)}},{key:"mult",value:function(E,S){this.data.hasOwnProperty(E)?this.data[E]*=S:console.log("The key - ".concat(E," does not exist in this dictionary."))}},{key:"div",value:function(E,S){this.data.hasOwnProperty(E)?this.data[E]/=S:console.log("The key - ".concat(E," does not exist in this dictionary."))}},{key:"_valueTest",value:function(E){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var S,k=this.data[Object.keys(this.data)[0]];for(S in this.data)this.data[S]*E<k*E&&(k=this.data[S]);return k}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(E){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var S=Object.keys(this.data)[0],k=1;k<Object.keys(this.data).length;k++)Object.keys(this.data)[k]*E<S*E&&(S=Object.keys(this.data)[k]);return S}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),t=i.default.TypedDict,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],291:[function(t,a,l){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(S,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(S,j.key,j)}}function f(S,k,T){k&&i(S.prototype,k),T&&i(S,T)}function y(S,k){return(y=Object.setPrototypeOf||function(T,j){return T.__proto__=j,T})(S,k)}function _(S){return function(){var k,T,j=m(S);return k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=m(this).constructor,Reflect.construct(j,arguments,k)):j.apply(this,arguments),j=this,!(T=k)||g(T)!=="object"&&typeof T!="function"?u(j):T}}function u(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function m(S){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(S)}function p(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function g(S){return(g=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(S)}function x(S,k,T){return(k._userNode||document.body).appendChild(S),T=new(T?c.default.MediaElement:c.default.Element)(S,k),k._elements.push(T),T}function b(S,N,T,j){var A=document.createElement(N),C=(typeof(T=T||"")=="string"&&(T=[T]),!0),N=!1,V=void 0;try{for(var I,G=T[Symbol.iterator]();!(C=(I=G.next()).done);C=!0){var R=I.value,q=document.createElement("source");q.setAttribute("src",R),A.appendChild(q)}}catch(L){N=!0,V=L}finally{try{C||G.return==null||G.return()}finally{if(N)throw V}}typeof j=="function"&&A.addEventListener("canplaythrough",function L(){j(),A.removeEventListener("canplaythrough",L)});var M=x(A,S,!0);return M.loadedmetadata=!1,A.addEventListener("loadedmetadata",function(){M.width=A.videoWidth,M.height=A.videoHeight,M.elt.width===0&&(M.elt.width=A.videoWidth),M.elt.height===0&&(M.elt.height=A.videoHeight),M.presetPlaybackRate&&(M.elt.playbackRate=M.presetPlaybackRate,delete M.presetPlaybackRate),M.loadedmetadata=!0}),M}c.default.prototype.select=function(S,k){return c.default._validateParameters("select",arguments),k=this._getContainer(k).querySelector(S),k?this._wrapElement(k):null},c.default.prototype.selectAll=function(S,k){c.default._validateParameters("selectAll",arguments);var T=[],j=this._getContainer(k).querySelectorAll(S);if(j)for(var A=0;A<j.length;A++){var C=this._wrapElement(j[A]);T.push(C)}return T},c.default.prototype._getContainer=function(S){var k=document;return typeof S=="string"?k=document.querySelector(S)||document:S instanceof c.default.Element?k=S.elt:S instanceof HTMLElement&&(k=S),k},c.default.prototype._wrapElement=function(S){var k,T=Array.prototype.slice.call(S.children);return S.tagName==="INPUT"&&S.type==="checkbox"?((k=new c.default.Element(S,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},k):S.tagName==="VIDEO"||S.tagName==="AUDIO"?new c.default.MediaElement(S,this):S.tagName==="SELECT"?this.createSelect(new c.default.Element(S,this)):0<T.length&&T.every(function(j){return j.tagName==="INPUT"||j.tagName==="LABEL"})?this.createRadio(new c.default.Element(S,this)):new c.default.Element(S,this)},c.default.prototype.removeElements=function(S){c.default._validateParameters("removeElements",arguments),this._elements.filter(function(k){return!(k.elt instanceof HTMLCanvasElement)}).map(function(k){return k.remove()})},c.default.Element.prototype.changed=function(S){return c.default.Element._adjustListener("change",S,this),this},c.default.Element.prototype.input=function(S){return c.default.Element._adjustListener("input",S,this),this},c.default.prototype.createDiv=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=document.createElement("div");return k.innerHTML=S,x(k,this)},c.default.prototype.createP=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=document.createElement("p");return k.innerHTML=S,x(k,this)},c.default.prototype.createSpan=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=document.createElement("span");return k.innerHTML=S,x(k,this)},c.default.prototype.createImg=function(){c.default._validateParameters("createImg",arguments);var S,k=document.createElement("img"),T=arguments;return 1<T.length&&typeof T[1]=="string"&&(k.alt=T[1]),2<T.length&&typeof T[2]=="string"&&(k.crossOrigin=T[2]),k.src=T[0],S=x(k,this),k.addEventListener("load",function(){S.width=k.offsetWidth||k.width,S.height=k.offsetHeight||k.height;var j=T[T.length-1];typeof j=="function"&&j(S)}),S},c.default.prototype.createA=function(S,k,T){c.default._validateParameters("createA",arguments);var j=document.createElement("a");return j.href=S,j.innerHTML=k,T&&(j.target=T),x(j,this)},c.default.prototype.createSlider=function(S,k,T,j){c.default._validateParameters("createSlider",arguments);var A=document.createElement("input");return A.type="range",A.min=S,A.max=k,j===0?A.step=1e-18:j&&(A.step=j),typeof T=="number"&&(A.value=T),x(A,this)},c.default.prototype.createButton=function(S,k){c.default._validateParameters("createButton",arguments);var T=document.createElement("button");return T.innerHTML=S,k&&(T.value=k),x(T,this)},c.default.prototype.createCheckbox=function(){for(var S=arguments.length,k=new Array(S),T=0;T<S;T++)k[T]=arguments[T];c.default._validateParameters("createCheckbox",k);var j=document.createElement("div"),A=document.createElement("input"),C=(A.type="checkbox",document.createElement("label")),N=(C.appendChild(A),j.appendChild(C),x(j,this));return N.checked=function(){var V=N.elt.firstElementChild.getElementsByTagName("input")[0];if(V){if(arguments.length===0)return V.checked;V.checked=!(arguments.length<=0||!arguments[0])}return N},this.value=function(V){return N.value=V,this},k[0]&&(N.value(k[0]),(j=document.createElement("span")).innerHTML=k[0],C.appendChild(j)),k[1]&&(A.checked=!0),N},c.default.prototype.createSelect=function(){for(var S,k=arguments.length,T=new Array(k),j=0;j<k;j++)T[j]=arguments[j];c.default._validateParameters("createSelect",T);var A,C=T[0];return C instanceof c.default.Element&&C.elt instanceof HTMLSelectElement?this.elt=(S=C).elt:C instanceof HTMLSelectElement?(S=x(C,this),this.elt=C):(A=document.createElement("select"),C&&typeof C=="boolean"&&A.setAttribute("multiple","true"),S=x(A,this),this.elt=A),S.option=function(N,V){var I;if(N!==void 0){for(var G,R=0;R<this.elt.length;R+=1)if(this.elt[R].textContent===N){I=R;break}I!==void 0?V===!1?this.elt.remove(I):this.elt[I].value=V:((G=document.createElement("option")).textContent=N,G.value=V===void 0?N:V,this.elt.appendChild(G),this._pInst._elements.push(G))}},S.selected=function(N){if(N!==void 0){for(var V=0;V<this.elt.length;V+=1)this.elt[V].value.toString()===N.toString()&&(this.elt.selectedIndex=V);return this}if(this.elt.getAttribute("multiple")){var I=[],G=!0,R=!1,q=void 0;try{for(var M,L=this.elt.selectedOptions[Symbol.iterator]();!(G=(M=L.next()).done);G=!0){var H=M.value;I.push(H.value)}}catch(O){R=!0,q=O}finally{try{G||L.return==null||L.return()}finally{if(R)throw q}}return I}return this.elt.value},S.disable=function(N){if(typeof N=="string")for(var V=0;V<this.elt.length;V++)this.elt[V].value.toString()===N&&(this.elt[V].disabled=!0,this.elt[V].selected=!1);else this.elt.disabled=!0;return this},S.enable=function(N){if(typeof N=="string")for(var V=0;V<this.elt.length;V++)this.elt[V].value.toString()===N&&(this.elt[V].disabled=!1,this.elt[V].selected=!1);else{this.elt.disabled=!1;for(var I=0;I<this.elt.length;I++)this.elt[I].disabled=!1,this.elt[I].selected=!1}return this},S},c.default.prototype.createRadio=function(){function S(N){return N instanceof HTMLInputElement&&N.type==="radio"}function k(N){return N instanceof HTMLLabelElement}var T,j,A,C=arguments.length<=0?void 0:arguments[0];return C instanceof c.default.Element&&(C.elt instanceof HTMLDivElement||C.elt instanceof HTMLSpanElement)?(T=C,this.elt=C.elt):C instanceof HTMLDivElement||C instanceof HTMLSpanElement?(T=x(C,this),j=this.elt=C,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(A=arguments.length<=1?void 0:arguments[1])):(typeof C=="string"&&(A=C),j=document.createElement("div"),T=x(j,this),this.elt=j),T._name=A||"radioOption",T._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(N){return S(N)||k(N)&&S(N.firstElementChild)}).map(function(N){return S(N)?N:N.firstElementChild})},T.option=function(N,V){var I,G,R,q=!0,M=!1,L=void 0;try{for(var H,O=T._getOptionsArray()[Symbol.iterator]();!(q=(H=O.next()).done);q=!0){var U=H.value;if(U.value===N){I=U;break}}}catch(J){M=!0,L=J}finally{try{q||O.return==null||O.return()}finally{if(M)throw L}}return I===void 0&&((I=document.createElement("input")).setAttribute("type","radio"),I.setAttribute("value",N)),I.setAttribute("name",T._name),k(I.parentElement)?G=I.parentElement:(G=document.createElement("label")).insertAdjacentElement("afterbegin",I),G.lastElementChild instanceof HTMLSpanElement?R=G.lastElementChild:(R=document.createElement("span"),I.insertAdjacentElement("afterend",R)),R.innerHTML=V===void 0?N:V,this.elt.appendChild(G),I},T.remove=function(N){var V=!0,I=!1,G=void 0;try{for(var R,q=T._getOptionsArray()[Symbol.iterator]();!(V=(R=q.next()).done);V=!0){var M=R.value;if(M.value===N)return void(k(M.parentElement)?M.parentElement:M).remove()}}catch(L){I=!0,G=L}finally{try{V||q.return==null||q.return()}finally{if(I)throw G}}},T.value=function(){var N="",V=!0,I=!1,G=void 0;try{for(var R,q=T._getOptionsArray()[Symbol.iterator]();!(V=(R=q.next()).done);V=!0){var M=R.value;if(M.checked){N=M.value;break}}}catch(L){I=!0,G=L}finally{try{V||q.return==null||q.return()}finally{if(I)throw G}}return N},T.selected=function(N){var V=null;if(N===void 0){var I=!0,G=!1,R=void 0;try{for(var q,M=T._getOptionsArray()[Symbol.iterator]();!(I=(q=M.next()).done);I=!0){var L=q.value;if(L.checked){V=L;break}}}catch(Z){G=!0,R=Z}finally{try{I||M.return==null||M.return()}finally{if(G)throw R}}}else{T._getOptionsArray().forEach(function(B){B.checked=!1,B.removeAttribute("checked")});var H=!0,G=!1,R=void 0;try{for(var O,U=T._getOptionsArray()[Symbol.iterator]();!(H=(O=U.next()).done);H=!0){var J=O.value;J.value===N&&(J.setAttribute("checked",!0),J.checked=!0,V=J)}}catch(B){G=!0,R=B}finally{try{H||U.return==null||U.return()}finally{if(G)throw R}}}return V},T.disable=function(){var N=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],V=!0,I=!1,G=void 0;try{for(var R,q=T._getOptionsArray()[Symbol.iterator]();!(V=(R=q.next()).done);V=!0)R.value.setAttribute("disabled",N)}catch(M){I=!0,G=M}finally{try{V||q.return==null||q.return()}finally{if(I)throw G}}},T},c.default.prototype.createColorPicker=function(S){c.default._validateParameters("createColorPicker",arguments);var k=document.createElement("input");return k.type="color",S?S instanceof c.default.Color?k.value=S.toString("#rrggbb"):(c.default.prototype._colorMode="rgb",c.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},k.value=c.default.prototype.color(S).toString("#rrggbb")):k.value="#000000",(k=x(k,this)).color=function(){return S&&(S.mode&&(c.default.prototype._colorMode=S.mode),S.maxes&&(c.default.prototype._colorMaxes=S.maxes)),c.default.prototype.color(this.elt.value)},k},c.default.prototype.createInput=function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",T=(c.default._validateParameters("createInput",arguments),document.createElement("input"));return T.setAttribute("value",S),T.setAttribute("type",k),x(T,this)},c.default.prototype.createFileInput=function(S){var k,T=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(c.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(k=document.createElement("input")).setAttribute("type","file"),T&&k.setAttribute("multiple",!0),k.addEventListener("change",function(j){var A=!0,C=!1,N=void 0;try{for(var V,I=j.target.files[Symbol.iterator]();!(A=(V=I.next()).done);A=!0){var G=V.value;c.default.File._load(G,S)}}catch(R){C=!0,N=R}finally{try{A||I.return==null||I.return()}finally{if(C)throw N}}},!1),x(k,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},c.default.prototype.createVideo=function(S,k){return c.default._validateParameters("createVideo",arguments),b(this,"video",S,k)},c.default.prototype.createAudio=function(S,k){return c.default._validateParameters("createAudio",arguments),b(this,"audio",S,k)},c.default.prototype.VIDEO="video",c.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var k=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return k?new Promise(function(T,j){k.call(navigator,S,T,j)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),c.default.prototype.createCapture=function(){for(var S=arguments.length,k=new Array(S),T=0;T<S;T++)k[T]=arguments[T];if(c.default._validateParameters("createCapture",k),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var j,A=!0,C=!0,N=0,V=k;N<V.length;N++){var I=V[N];I===c.default.prototype.VIDEO?C=!1:I===c.default.prototype.AUDIO?A=!1:g(I)==="object"?G=I:typeof I=="function"&&(j=I)}var G=G||{video:A,audio:C},R=document.createElement("video"),q=(R.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(G).then(function(M){try{"srcObject"in R?R.srcObject=M:R.src=window.URL.createObjectURL(M)}catch{R.src=M}},console.log),x(R,this,!0));return q.loadedmetadata=!1,R.addEventListener("loadedmetadata",function(){R.play(),R.width?(q.width=R.width,q.height=R.height):(q.width=q.elt.width=R.videoWidth,q.height=q.elt.height=R.videoHeight),q.loadedmetadata=!0,j&&j(R.srcObject)}),q},c.default.prototype.createElement=function(S,k){return c.default._validateParameters("createElement",arguments),S=document.createElement(S),k!==void 0&&(S.innerHTML=k),x(S,this)},c.default.Element.prototype.addClass=function(S){return this.elt.className?this.hasClass(S)||(this.elt.className=this.elt.className+" "+S):this.elt.className=S,this},c.default.Element.prototype.removeClass=function(S){return this.elt.classList.remove(S),this},c.default.Element.prototype.hasClass=function(S){return this.elt.classList.contains(S)},c.default.Element.prototype.toggleClass=function(S){return this.elt.classList.contains(S)?this.elt.classList.remove(S):this.elt.classList.add(S),this},c.default.Element.prototype.child=function(S){return S===void 0?this.elt.childNodes:(typeof S=="string"?(S[0]==="#"&&(S=S.substring(1)),S=document.getElementById(S)):S instanceof c.default.Element&&(S=S.elt),S instanceof HTMLElement&&this.elt.appendChild(S),this)},c.default.Element.prototype.center=function(S){var k=this.elt.style.display,T=this.elt.style.display==="none",j=this.parent().style.display==="none",A={x:this.elt.offsetLeft,y:this.elt.offsetTop},C=(T&&this.show(),j&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),N=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return S==="both"||S===void 0?this.position(C/2+this.parent().offsetLeft,N/2+this.parent().offsetTop):S==="horizontal"?this.position(C/2+this.parent().offsetLeft,A.y):S==="vertical"&&this.position(A.x,N/2+this.parent().offsetTop),this.style("display",k),T&&this.hide(),j&&this.parent().hide(),this},c.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},c.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},c.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=S,this},c.default.Element.prototype._rotate=function(){var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=S,this},c.default.Element.prototype.style=function(S,k){if((k=k instanceof c.default.Color?"rgba("+k.levels[0]+","+k.levels[1]+","+k.levels[2]+","+k.levels[3]/255+")":k)===void 0){if(S.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(S);for(var T=S.split(";"),j=0;j<T.length;j++){var A=T[j].split(":");A[0]&&A[1]&&(this.elt.style[A[0].trim()]=A[1].trim())}}else this.elt.style[S]=k,S!=="width"&&S!=="height"&&S!=="left"&&S!=="top"||(k=window.getComputedStyle(this.elt).getPropertyValue(S).replace(/[^\d.]/g,""),this[S]=Math.round(parseFloat(k,10)));return this},c.default.Element.prototype.attribute=function(S,k){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return k===void 0?this.elt.getAttribute(S):(this.elt.setAttribute(S,k),this);if(k===void 0)return this.elt.firstChild.getAttribute(S);for(var T=0;T<this.elt.childNodes.length;T++)this.elt.childNodes[T].setAttribute(S,k)},c.default.Element.prototype.removeAttribute=function(S){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var k=0;k<this.elt.childNodes.length;k++)this.elt.childNodes[k].removeAttribute(S);return this.elt.removeAttribute(S),this},c.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},c.default.Element.prototype.show=function(){return this.elt.style.display="block",this},c.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},c.default.Element.prototype.size=function(S,k){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var T=S,j=k,A=c.default.prototype.AUTO;if(T!==A||j!==A){if(T===A?T=k*this.width/this.height:j===A&&(j=S*this.height/this.width),this.elt instanceof HTMLCanvasElement){var C,N={},V=this.elt.getContext("2d");for(C in V)N[C]=V[C];for(C in this.elt.setAttribute("width",T*this._pInst._pixelDensity),this.elt.setAttribute("height",j*this._pInst._pixelDensity),this.elt.style.width=T+"px",this.elt.style.height=j+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),N)this.elt.getContext("2d")[C]=N[C]}else this.elt.style.width=T+"px",this.elt.style.height=j+"px",this.elt.width=T,this.elt.height=j;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},c.default.Element.prototype.remove=function(){this instanceof c.default.MediaElement&&(this.stop(),(k=this.elt.srcObject)!==null&&k.getTracks().forEach(function(T){T.stop()}));var S,k=this._pInst._elements.indexOf(this);for(S in k!==-1&&this._pInst._elements.splice(k,1),this._events)this.elt.removeEventListener(S,this._events[S]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},c.default.Element.prototype.drop=function(S,k){var T;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",T=function(j){j.preventDefault()}),this.elt.addEventListener("dragleave",T)),c.default.Element._attachListener("drop",function(A){A.preventDefault(),typeof k=="function"&&k.call(this,A);var A=A.dataTransfer.files,C=!0,N=!1,V=void 0;try{for(var I,G=A[Symbol.iterator]();!(C=(I=G.next()).done);C=!0){var R=I.value;c.default.File._load(R,S)}}catch(q){N=!0,V=q}finally{try{C||G.return==null||G.return()}finally{if(N)throw V}}},this)):console.log("The File APIs are not fully supported in this browser."),this},c.default.Element.prototype.draggable=function(S){var k,T="ontouchstart"in window,j=0,A=0,C=0,N=0,V=T?"touchend":"mouseup",I=T?"touchmove":"mousemove";function G(q){var M;q=q||window.event,N=T?(M=q.changedTouches,j=C-parseInt(M[0].clientX),A=N-parseInt(M[0].clientY),C=parseInt(M[0].clientX),parseInt(M[0].clientY)):(j=C-parseInt(q.clientX),A=N-parseInt(q.clientY),C=parseInt(q.clientX),parseInt(q.clientY)),S.style.left=S.offsetLeft-j+"px",S.style.top=S.offsetTop-A+"px"}function R(){document.removeEventListener(V,R,!1),document.removeEventListener(I,G,!1)}return S===void 0?k=S=this.elt:S!==this.elt&&S.elt!==this.elt&&(S=S.elt,k=this.elt),k.addEventListener(T?"touchstart":"mousedown",function(q){{var M;q=q||window.event,N=T?(M=q.changedTouches,C=parseInt(M[0].clientX),parseInt(M[0].clientY)):(C=parseInt(q.clientX),parseInt(q.clientY))}return document.addEventListener(V,R,!1),document.addEventListener(I,G,!1),!1},!1),k.style.cursor="move",this};function E(S,k,T,j){p(this,E),this.callback=S,this.time=k,this.id=T,this.val=j}t=function(S){var k=j;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),S&&y(k,S);var T=_(j);function j(A,C){p(this,j);var N=u(C=T.call(this,A,C));return C.elt.crossOrigin="anonymous",C._prevTime=0,C._cueIDCounter=0,C._cues=[],C.pixels=[],C._pixelsState=u(C),C._pixelDensity=1,C._modified=!1,C._frameOnCanvas=-1,Object.defineProperty(N,"src",{get:function(){var V=N.elt.children[0].src,I=N.elt.src===window.location.href?"":N.elt.src;return V===window.location.href?I:V},set:function(V){for(var I=0;I<N.elt.children.length;I++)N.elt.removeChild(N.elt.children[I]);var G=document.createElement("source");G.src=V,A.appendChild(G),N.elt.src=V,N.modified=!0}}),N._onended=function(){},N.elt.onended=function(){N._onended(N)},C}return f(j,[{key:"play",value:function(){var A;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(A=this.elt.play())&&A.catch&&A.catch(function(C){C.name==="NotAllowedError"?console.error(C):console.error("Media play method encountered an unexpected error",C)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var A=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(A)},{passive:!0,once:!0})}},{key:"autoplay",value:function(A){var C=this,N=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",A),A&&!N&&(A=function(){return C._setupAutoplayFailDetection()},this.elt.readyState===4?A():this.elt.addEventListener("canplay",A,{passive:!0,once:!0})),this}},{key:"volume",value:function(A){if(A===void 0)return this.elt.volume;this.elt.volume=A}},{key:"speed",value:function(A){if(A===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=A:this.presetPlaybackRate=A}},{key:"time",value:function(A){return A===void 0?this.elt.currentTime:(this.elt.currentTime=A,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var A=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&A&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var A=arguments.length,C=new Array(A),N=0;N<A;N++)C[N]=arguments[N];return c.default.Renderer2D.prototype.loadPixels.apply(this,C)}},{key:"updatePixels",value:function(A,C,N,V){return this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.updatePixels.call(this,A,C,N,V)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var A=arguments.length,C=new Array(A),N=0;N<A;N++)C[N]=arguments[N];return c.default.Renderer2D.prototype.get.apply(this,C)}},{key:"_getPixel",value:function(){this.loadPixels();for(var A=arguments.length,C=new Array(A),N=0;N<A;N++)C[N]=arguments[N];return c.default.Renderer2D.prototype._getPixel.apply(this,C)}},{key:"set",value:function(A,C,N){this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.set.call(this,A,C,N),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var A=arguments.length,C=new Array(A),N=0;N<A;N++)C[N]=arguments[N];c.default.prototype.copy.apply(this,C)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var A=arguments.length,C=new Array(A),N=0;N<A;N++)C[N]=arguments[N];c.default.Image.prototype.mask.apply(this,C)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(A){this._modified=A}},{key:"onended",value:function(A){return this._onended=A,this}},{key:"connect",value:function(A){var C,N;if(typeof c.default.prototype.getAudioContext=="function")C=c.default.prototype.getAudioContext(),N=c.default.soundOut.input;else try{N=(C=A.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=C.createMediaElementSource(this.elt),this.audioSourceNode.connect(N)),A?A.input?this.audioSourceNode.connect(A.input):this.audioSourceNode.connect(A):this.audioSourceNode.connect(N)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(A,I,N){var V=this._cueIDCounter++,I=new E(I,A,V,N);return this._cues.push(I),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),V}},{key:"removeCue",value:function(A){for(var C=0;C<this._cues.length;C++)this._cues[C].id===A&&(console.log(A),this._cues.splice(C,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var A=this.time(),C=0;C<this._cues.length;C++){var N=this._cues[C].time,V=this._cues[C].val;this._prevTime<N&&N<=A&&this._cues[C].callback(V)}this._prevTime=A}}]),j}(c.default.Element),c.default.MediaElement=t,t=function(){function S(k,T){p(this,S),this.file=k,this._pInst=T,T=k.type.split("/"),this.type=T[0],this.subtype=T[1],this.name=k.name,this.size=k.size,this.data=void 0}return f(S,null,[{key:"_createLoader",value:function(k,T){var j=new FileReader;return j.onload=function(A){var C,N=new c.default.File(k);N.file.type==="application/json"?N.data=JSON.parse(A.target.result):N.file.type==="text/xml"?(C=new DOMParser().parseFromString(A.target.result,"text/xml"),N.data=new c.default.XML(C.documentElement)):N.data=A.target.result,T(N)},j}},{key:"_load",value:function(k,T){var j;/^text\//.test(k.type)||k.type==="application/json"?c.default.File._createLoader(k,T).readAsText(k):/^(video|audio)\//.test(k.type)?((j=new c.default.File(k)).data=URL.createObjectURL(k),T(j)):c.default.File._createLoader(k,T).readAsDataURL(k)}}]),S}(),c.default.File=t,t=c.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240}],292:[function(t,a,l){function o(k){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(k)}function c(k){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(T){return o(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":o(T)})(k)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(S=t("../core/main"))&&S.__esModule?S:{default:S},f=function(k){if(k&&k.__esModule)return k;if(k===null||c(k)!=="object"&&typeof k!="function")return{default:k};var T=y();if(T&&T.has(k))return T.get(k);var j,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var N;Object.prototype.hasOwnProperty.call(k,j)&&((N=C?Object.getOwnPropertyDescriptor(k,j):null)&&(N.get||N.set)?Object.defineProperty(A,j,N):A[j]=k[j])}return A.default=k,T&&T.set(k,A),A}(t("../core/constants"));function y(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,y=function(){return k},k)}i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var _=i.default.prototype.pRotationZ=0,u=0,m=0,p="clockwise",g="clockwise",x="clockwise",b=(i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0,.5),E=30,S=(i.default.prototype.setMoveThreshold=function(k){i.default._validateParameters("setMoveThreshold",arguments),b=k},i.default.prototype.setShakeThreshold=function(k){i.default._validateParameters("setShakeThreshold",arguments),E=k},i.default.prototype._ondeviceorientation=function(k){this._updatePRotations(),this._angleMode===f.radians&&(k.beta=k.beta*(_PI/180),k.gamma=k.gamma*(_PI/180),k.alpha=k.alpha*(_PI/180)),this._setProperty("rotationX",k.beta),this._setProperty("rotationY",k.gamma),this._setProperty("rotationZ",k.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(k){this._updatePAccelerations(),this._setProperty("accelerationX",2*k.acceleration.x),this._setProperty("accelerationY",2*k.acceleration.y),this._setProperty("accelerationZ",2*k.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var k,T,j,A,C,N=this._isGlobal?window:this;typeof N.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>b||Math.abs(this.accelerationY-this.pAccelerationY)>b||Math.abs(this.accelerationZ-this.pAccelerationZ)>b)&&N.deviceMoved(),typeof N.deviceTurned=="function"&&(T=this.rotationX+180,k=this.pRotationX+180,j=_+180,0<T-k&&T-k<270||T-k<-270?p="clockwise":(T-k<0||270<T-k)&&(p="counter-clockwise"),p!==this.pRotateDirectionX&&(j=T),90<Math.abs(T-j)&&Math.abs(T-j)<270&&(j=T,this._setProperty("turnAxis","X"),N.deviceTurned()),this.pRotateDirectionX=p,_=j-180,k=this.rotationY+180,T=this.pRotationY+180,j=u+180,0<k-T&&k-T<270||k-T<-270?g="clockwise":(k-T<0||270<k-this.pRotationY)&&(g="counter-clockwise"),g!==this.pRotateDirectionY&&(j=k),90<Math.abs(k-j)&&Math.abs(k-j)<270&&(j=k,this._setProperty("turnAxis","Y"),N.deviceTurned()),this.pRotateDirectionY=g,u=j-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?x="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(x="counter-clockwise"),x!==this.pRotateDirectionZ&&(m=this.rotationZ),90<Math.abs(this.rotationZ-m)&&Math.abs(this.rotationZ-m)<270&&(m=this.rotationZ,this._setProperty("turnAxis","Z"),N.deviceTurned()),this.pRotateDirectionZ=x,this._setProperty("turnAxis",void 0)),typeof N.deviceShaken=="function"&&(this.pAccelerationX!==null&&(A=Math.abs(this.accelerationX-this.pAccelerationX),C=Math.abs(this.accelerationY-this.pAccelerationY)),E<A+C&&N.deviceShaken())},i.default);l.default=S},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],293:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(c){var i;this._downKeys[c.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(i=this._isGlobal?window:this).keyPressed!="function"||c.charCode||i.keyPressed(c)===!1&&c.preventDefault())},o.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var i=this._isGlobal?window:this;typeof i.keyReleased=="function"&&i.keyReleased(c)===!1&&c.preventDefault()},o.default.prototype._onkeypress=function(c){var i;c.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(i=this._isGlobal?window:this).keyTyped=="function"&&i.keyTyped(c)===!1&&c.preventDefault())},o.default.prototype._onblur=function(c){this._downKeys={}},o.default.prototype.keyIsDown=function(c){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},o.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1},t=o.default,l.default=t},{"../core/main":275}],294:[function(t,a,l){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(_)}function c(_){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(u){return o(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":o(u)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(i=t("../core/main"))&&i.__esModule?i:{default:i},f=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var u=y();if(u&&u.has(_))return u.get(_);var m,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in _){var x;Object.prototype.hasOwnProperty.call(_,m)&&((x=g?Object.getOwnPropertyDescriptor(_,m):null)&&(x.get||x.set)?Object.defineProperty(p,m,x):p[m]=_[m])}return p.default=_,u&&u.set(_,p),p}(t("../core/constants"));function y(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,y=function(){return _},_)}i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(_){var u,m,p,g,x;this._curElement!==null&&(!_.touches||0<_.touches.length)&&(u=this._curElement.elt,m=this.width,p=this.height,(g=_)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),x=u.getBoundingClientRect(),m=u.scrollWidth/m||1,u=u.scrollHeight/p||1,p={x:(g.clientX-x.left)/m,y:(g.clientY-x.top)/u,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",_.movementX),this._setProperty("movedY",_.movementY),this._setProperty("mouseX",p.x),this._setProperty("mouseY",p.y),this._setProperty("winMouseX",p.winX),this._setProperty("winMouseY",p.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(_){_.button===1?this._setProperty("mouseButton",f.CENTER):_.button===2?this._setProperty("mouseButton",f.RIGHT):this._setProperty("mouseButton",f.LEFT)},i.default.prototype._onmousemove=function(_){var u=this._isGlobal?window:this;this._updateNextMouseCoords(_),this.mouseIsPressed?typeof u.mouseDragged=="function"?u.mouseDragged(_)===!1&&_.preventDefault():typeof u.touchMoved=="function"&&u.touchMoved(_)===!1&&_.preventDefault():typeof u.mouseMoved=="function"&&u.mouseMoved(_)===!1&&_.preventDefault()},i.default.prototype._onmousedown=function(_){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(_),this._updateNextMouseCoords(_),typeof u.mousePressed=="function"?u.mousePressed(_)===!1&&_.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof u.touchStarted=="function"&&u.touchStarted(_)===!1&&_.preventDefault()},i.default.prototype._onmouseup=function(_){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof u.mouseReleased=="function"?u.mouseReleased(_)===!1&&_.preventDefault():typeof u.touchEnded=="function"&&u.touchEnded(_)===!1&&_.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(_){var u=this._isGlobal?window:this;typeof u.mouseClicked=="function"&&u.mouseClicked(_)===!1&&_.preventDefault()},i.default.prototype._ondblclick=function(_){var u=this._isGlobal?window:this;typeof u.doubleClicked=="function"&&u.doubleClicked(_)===!1&&_.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(_){var u=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",_.deltaY),typeof u.mouseWheel=="function"&&(_.delta=_.deltaY,u.mouseWheel(_)===!1&&_.preventDefault())},i.default.prototype.requestPointerLock=function(){var _=this._curElement.elt;return _.requestPointerLock=_.requestPointerLock||_.mozRequestPointerLock,_.requestPointerLock?(_.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=i.default,l.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],295:[function(t,a,l){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var c=[],i=0;i<o.touches.length;i++)c[i]=function(x,g,b,u){var m=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,p=x.getBoundingClientRect(),g=x.scrollWidth/g||1,x=x.scrollHeight/b||1,b=u.touches[m]||u.changedTouches[m];return{x:(b.clientX-p.left)/g,y:(b.clientY-p.top)/x,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,o,i);this._setProperty("touches",c)}},t.default.prototype._ontouchstart=function(o){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof c.touchStarted=="function"?c.touchStarted(o)===!1&&o.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof c.mousePressed=="function"&&c.mousePressed(o)===!1&&o.preventDefault()},t.default.prototype._ontouchmove=function(o){var c=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof c.touchMoved=="function"?c.touchMoved(o)===!1&&o.preventDefault():typeof c.mouseDragged=="function"&&c.mouseDragged(o)===!1&&o.preventDefault()},t.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var c=this._isGlobal?window:this;typeof c.touchEnded=="function"?c.touchEnded(o)===!1&&o.preventDefault():typeof c.mouseReleased=="function"&&c.mouseReleased(o)===!1&&o.preventDefault()},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.string.includes":191}],296:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o,c,i,f,y={_toPixels:function(_){var u,m;return _ instanceof ImageData?_.data:_.getContext("2d")?_.getContext("2d").getImageData(0,0,_.width,_.height).data:_.getContext("webgl")?(m=(u=_.getContext("webgl")).drawingBufferWidth*u.drawingBufferHeight*4,m=new Uint8Array(m),u.readPixels(0,0,_.width,_.height,u.RGBA,u.UNSIGNED_BYTE,m),m):void 0},_getARGB:function(_,u){return u*=4,_[3+u]<<24&4278190080|_[u]<<16&16711680|_[1+u]<<8&65280|255&_[2+u]},_setPixels:function(_,u){for(var m,p=0,g=_.length;p<g;p++)_[0+(m=4*p)]=(16711680&u[p])>>>16,_[1+m]=(65280&u[p])>>>8,_[2+m]=255&u[p],_[3+m]=(4278190080&u[p])>>>24},_toImageData:function(_){return _ instanceof ImageData?_:_.getContext("2d").getImageData(0,0,_.width,_.height)},_createImageData:function(_,u){return y._tmpCanvas=document.createElement("canvas"),y._tmpCtx=y._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(_,u)},apply:function(_,x,m){var p=_.getContext("2d"),g=p.getImageData(0,0,_.width,_.height),x=x(g,m);x instanceof ImageData?p.putImageData(x,0,0,0,0,_.width,_.height):p.putImageData(g,0,0,0,0,_.width,_.height)},threshold:function(_,u){for(var m=y._toPixels(_),p=(u===void 0&&(u=.5),Math.floor(255*u)),g=0;g<m.length;g+=4){var x=void 0,x=p<=.2126*m[g]+.7152*m[g+1]+.0722*m[g+2]?255:0;m[g]=m[g+1]=m[g+2]=x}},gray:function(_){for(var u=y._toPixels(_),m=0;m<u.length;m+=4){var p=u[m],g=u[m+1],x=u[m+2];u[m]=u[m+1]=u[m+2]=.2126*p+.7152*g+.0722*x}},opaque:function(_){for(var u=y._toPixels(_),m=0;m<u.length;m+=4)u[m+3]=255;return u},invert:function(_){for(var u=y._toPixels(_),m=0;m<u.length;m+=4)u[m]=255-u[m],u[m+1]=255-u[m+1],u[m+2]=255-u[m+2]},posterize:function(_,u){var m=y._toPixels(_);if((u=u===void 0?4:u)<2||255<u)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var p=u-1,g=0;g<m.length;g+=4){var x=m[g],b=m[g+1],E=m[g+2];m[g]=255*(x*u>>8)/p,m[g+1]=255*(b*u>>8)/p,m[g+2]=255*(E*u>>8)/p}},dilate:function(_){for(var u,m,p,g,x,b,E,S,k,T=y._toPixels(_),j=0,A=T.length?T.length/4:0,C=new Int32Array(A);j<A;)for(m=(u=j)+_.width;j<m;)g=p=y._getARGB(T,j),(k=j-1)<u&&(k=j),m<=(S=j+1)&&(S=j),(x=j-_.width)<0&&(x=0),A<=(b=j+_.width)&&(b=j),x=y._getARGB(T,x),k=y._getARGB(T,k),b=y._getARGB(T,b),(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<(E=77*(k>>16&255)+151*(k>>8&255)+28*(255&k))&&(p=k,g=E),g<(E=77*((k=y._getARGB(T,S))>>16&255)+151*(k>>8&255)+28*(255&k))&&(p=k,g=E),g<(S=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(p=x,g=S),g<(k=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(p=b,g=k),C[j++]=p;y._setPixels(T,C)},erode:function(_){for(var u,m,p,g,x,b,E,S,k,T=y._toPixels(_),j=0,A=T.length?T.length/4:0,C=new Int32Array(A);j<A;)for(m=(u=j)+_.width;j<m;)g=p=y._getARGB(T,j),(k=j-1)<u&&(k=j),m<=(S=j+1)&&(S=j),(x=j-_.width)<0&&(x=0),A<=(b=j+_.width)&&(b=j),x=y._getARGB(T,x),k=y._getARGB(T,k),b=y._getARGB(T,b),(E=77*(k>>16&255)+151*(k>>8&255)+28*(255&k))<(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(p=k,g=E),(E=77*((k=y._getARGB(T,S))>>16&255)+151*(k>>8&255)+28*(255&k))<g&&(p=k,g=E),(S=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<g&&(p=x,g=S),(k=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<g&&(p=b,g=k),C[j++]=p;y._setPixels(T,C)},blur:function(_,u){for(var m,p,g,x,b,E,S,k,T,j,A=y._toPixels(_),C=_.width,N=_.height,V=C*N,I=new Int32Array(V),G=0;G<V;G++)I[G]=y._getARGB(A,G);var R,q,M,L,H,O,U,J,Z=new Int32Array(V),z=new Int32Array(V),B=new Int32Array(V),D=new Int32Array(V),X=0,K=3.5*u|0;if(o!==(K=K<1?1:K<248?K:248)){c=1+(o=K)<<1,i=new Int32Array(c),f=new Array(c);for(var re=0;re<c;re++)f[re]=new Int32Array(256);for(var se=1,fe=K-1;se<K;se++){i[K+se]=i[fe]=O=fe*fe,U=f[K+se],J=f[fe--];for(var xe=0;xe<256;xe++)U[xe]=J[xe]=O*xe}H=i[K]=K*K,U=f[K];for(var he=0;he<256;he++)U[he]=H*he}for(q=0;q<N;q++){for(R=0;R<C;R++){if(x=g=p=b=m=0,(E=R-o)<0)j=-E,E=0;else{if(C<=E)break;j=0}for(M=j;M<c&&!(C<=E);M++){var _e=I[E+X];L=f[M],b+=L[(-16777216&_e)>>>24],p+=L[(16711680&_e)>>16],g+=L[(65280&_e)>>8],x+=L[255&_e],m+=i[M],E++}Z[S=X+R]=b/m,z[S]=p/m,B[S]=g/m,D[S]=x/m}X+=C}for(T=(k=-o)*C,q=X=0;q<N;q++){for(R=0;R<C;R++){if(x=g=p=b=m=0,k<0)j=S=-k,E=R;else{if(N<=k)break;j=0,S=k,E=R+T}for(M=j;M<c&&!(N<=S);M++)L=f[M],b+=L[Z[E]],p+=L[z[E]],g+=L[B[E]],x+=L[D[E]],m+=i[M],S++,E+=C;I[R+X]=b/m<<24|p/m<<16|g/m<<8|x/m}X+=C,T+=C,k++}y._setPixels(A,I)}};l.default=y},{"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int32-array":217,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234}],297:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=i(t("../core/main")),c=i(t("omggif"));function i(y){return y&&y.__esModule?y:{default:y}}function f(y){return function(_){if(Array.isArray(_)){for(var u=0,m=new Array(_.length);u<_.length;u++)m[u]=_[u];return m}}(y)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(y,_){return o.default._validateParameters("createImage",arguments),new o.default.Image(y,_)},o.default.prototype.saveCanvas=function(){o.default._validateParameters("saveCanvas",arguments);var y,_,u,m,p,g,x=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(y=arguments[0],x.shift()):arguments[0]instanceof o.default.Element?(y=arguments[0].elt,x.shift()):arguments[0]instanceof o.default.Framebuffer?((p=this.createGraphics((m=arguments[0]).width,m.height)).pixelDensity(pixelDensity()),m.loadPixels(),p.loadPixels(),p.pixels.set(m.pixels),p.updatePixels(),y=p.elt,x.shift()):y=this._curElement&&this._curElement.elt,1<=x.length&&(_=x[0]),u=(u=2<=x.length?x[1]:u)||o.default.prototype._checkFileExtension(_,u)[1]||"png"){default:g="image/png";break;case"jpeg":case"jpg":g="image/jpeg"}y.toBlob(function(b){o.default.prototype.downloadFile(b,_,u),p&&p.remove()},g)},o.default.prototype.encodeAndDownloadGif=function(y,_){for(var u=y.gifProperties,m=u.loopLimit,p=(m===1?m=null:m===null&&(m=0),new Uint8Array(y.width*y.height*u.numFrames)),g=[],x={},b=0;b<u.numFrames;b++){for(var E=new Set,S=u.frames[b].image.data,k=S.length,T=new Uint32Array(y.width*y.height),j=0,A=0;j<k;j+=4,A++){var C=S[j+0]<<16|S[j+1]<<8|S[j+2]<<0;E.add(C),T[A]=C}var N=f(E).sort().toString();x[N]===void 0?x[N]={freq:1,frames:[b]}:(x[N].freq+=1,x[N].frames.push(b)),g.push(T)}for(var G=[],V=Object.keys(x).sort(function(B,D){return x[D].freq-x[B].freq}),I=V[0].split(",").map(function(B){return parseInt(B)}),G=G.concat(x[I].frames),R=new Set(I),q=1;q<V.length;q++){var M=V[q].split(",").map(function(B){return parseInt(B)}).filter(function(B){return!R.has(B)});if(I.length+M.length<=256){for(var L=0;L<M.length;L++)I.push(M[L]),R.add(M[L]);G=G.concat(x[V[q]].frames)}}G=new Set(G);for(var H={},O=0;O<I.length;O++)H[I[O]]||(H[I[O]]=O);for(var U=1;U<I.length;)U<<=1;I.length=U;for(var m={loop:m,palette:new Uint32Array(I)},J=new c.default.GifWriter(p,y.width,y.height,m),Z={},z=0;z<u.numFrames;z++)(function(D){var X=!G.has(D),K=X?[]:I,re=new Uint8Array(y.width*y.height),se={},fe=new Set,xe=(g[D].forEach(function(pe,ke){X?(se[pe]===void 0&&(se[pe]=K.length,K.push(pe)),re[ke]=se[pe]):re[ke]=H[pe],0<D&&g[D-1][ke]!==pe&&fe.add(pe)}),{}),he=K.filter(function(pe){return!fe.has(pe)});if(0<he.length){var he=he[0],_e=(X?se:H)[he];if(0<D){for(var ye=0;ye<g[D].length;ye++)g[D-1][ye]===g[D][ye]&&(re[ye]=_e);xe.transparent=_e,Z.frameOpts.disposal=1}}if(xe.delay=u.frames[D].delay/10,X){for(var ue=1;ue<K.length;)ue<<=1;K.length=ue,xe.palette=new Uint32Array(K)}0<D&&J.addFrame(0,0,y.width,y.height,Z.pixelPaletteIndex,Z.frameOpts),Z={pixelPaletteIndex:re,frameOpts:xe}})(z);Z.frameOpts.disposal=1,J.addFrame(0,0,y.width,y.height,Z.pixelPaletteIndex,Z.frameOpts),m=new Blob([p.slice(0,J.end())],{type:"image/gif"}),o.default.prototype.downloadFile(m,_,"gif")},o.default.prototype.saveFrames=function(y,_,u,g,p){o.default._validateParameters("saveFrames",arguments),u=o.default.prototype.constrain(u=u||3,0,15),u*=1e3;var g=o.default.prototype.constrain(g||15,0,22),x=0,b=o.default.prototype._makeFrame,E=this._curElement.elt,S=[],k=setInterval(function(){S.push(b(y+x,_,E)),x++},1e3/g);setTimeout(function(){if(clearInterval(k),p)p(S);else for(var T=0,j=S;T<j.length;T++){var A=j[T];o.default.prototype.downloadFile(A.imageData,A.filename,A.ext)}S=[]},.01+u)},o.default.prototype._makeFrame=function(y,_,p){var m,p=this?this._curElement.elt:p;if(_)switch(_.toLowerCase()){case"png":m="image/png";break;case"jpeg":case"jpg":m="image/jpeg";break;default:m="image/png"}else _="png",m="image/png";var p=(p=p.toDataURL(m)).replace(m,"image/octet-stream"),g={};return g.imageData=p,g.filename=y,g.ext=_,g},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,omggif:248}],298:[function(t,a,l){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function c(E){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(S){return o(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":o(S)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t("regenerator-runtime/runtime");var i=p(t("../core/main")),f=p(t("../core/helpers")),y=function(E){if(E&&E.__esModule)return E;if(E===null||c(E)!=="object"&&typeof E!="function")return{default:E};var S=m();if(S&&S.has(E))return S.get(E);var k,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var A;Object.prototype.hasOwnProperty.call(E,k)&&((A=j?Object.getOwnPropertyDescriptor(E,k):null)&&(A.get||A.set)?Object.defineProperty(T,k,A):T[k]=E[k])}return T.default=E,S&&S.set(E,T),T}(t("../core/constants")),_=p(t("omggif")),u=t("gifenc");function m(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,m=function(){return E},E)}function p(E){return E&&E.__esModule?E:{default:E}}function g(E,S,k,T,j,A,C){try{var N=E[A](C),V=N.value}catch(I){return void k(I)}N.done?S(V):Promise.resolve(V).then(T,j)}function x(E,S,k,T,j,A,C,N,V,I,G){var R,q,M,L,H,O,U,J,Z;return E===y.COVER&&(R=S,M=k,U=A,J=C,O=N,Z=V,q=I,L=G,H=Math.max(U/q,J/L),U/=H,J/=H,H=O,O=Z,R===y.CENTER?H+=(q-U)/2:R===y.RIGHT&&(H+=q-U),M===y.CENTER?O+=(L-J)/2:M===y.BOTTOM&&(O+=L-J),N=(Z={x:H,y:O,w:U,h:J}).x,V=Z.y,I=Z.w,G=Z.h),E===y.CONTAIN&&(R=S,q=k,M=T,L=j,H=A,O=C,U=I,J=G,Z=Math.max(U/H,J/O),U/=Z,J/=Z,Z=M,M=L,R===y.CENTER?Z+=(H-U)/2:R===y.RIGHT&&(Z+=H-U),q===y.CENTER?M+=(O-J)/2:q===y.BOTTOM&&(M+=O-J),T=(E={x:Z,y:M,w:U,h:J}).x,j=E.y,A=E.w,C=E.h),{sx:N,sy:V,sw:I,sh:G,dx:T,dy:j,dw:A,dh:C}}function b(E,S){return 0<E&&E<S?E:S}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.loadImage=function(E,S,k){i.default._validateParameters("loadImage",arguments);var T=new i.default.Image(1,1,this),j=this,A=new Request(E,{method:"GET",mode:"cors"});return fetch(E,A).then(function(C){var N,V=C.headers.get("content-type");V===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),V&&V.includes("image/gif")?C.arrayBuffer().then(function(I){if(I){for(var I=new Uint8Array(I),G=T,R=S,q=k,M=(function(X){j._decrementPreload()}).bind(j),L=new _.default.GifReader(I),H=(G.width=G.canvas.width=L.width,G.height=G.canvas.height=L.height,[]),O=L.numFrames(),U=new Uint8ClampedArray(G.width*G.height*4),J=0;J<O;J++){var Z=L.frameInfo(J),z=G.drawingContext.getImageData(0,0,G.width,G.height),B=(U=z.data.slice(),function(X,K){try{K.decodeAndBlitFrameRGBA(X,U)}catch(re){i.default._friendlyFileLoadError(8,G.src),typeof q=="function"?q(re):console.error(re)}}(J,L),new ImageData(U,G.width,G.height)),B=(G.drawingContext.putImageData(B,0,0),Z.delay);B===0&&(B=10),H.push({image:G.drawingContext.getImageData(0,0,G.width,G.height),delay:10*B}),Z.disposal===2?G.drawingContext.clearRect(Z.x,Z.y,Z.width,Z.height):Z.disposal===3&&G.drawingContext.putImageData(z,0,0,Z.x,Z.y,Z.width,Z.height)}(I=L.loopCount())===null?I=1:I===0&&(I=null),G.drawingContext.putImageData(H[0].image,0,0),1<H.length&&(G.gifProperties={displayIndex:0,loopLimit:I,loopCount:0,frames:H,numFrames:O,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof R=="function"&&R(G),M()}},function(I){typeof k=="function"?(k(I),j._decrementPreload()):console.error(I)}):((N=new Image).onload=function(){T.width=T.canvas.width=N.width,T.height=T.canvas.height=N.height,T.drawingContext.drawImage(N,0,0),T.modified=!0,typeof S=="function"&&S(T),j._decrementPreload()},N.onerror=function(I){i.default._friendlyFileLoadError(0,N.src),typeof k=="function"?(k(I),j._decrementPreload()):console.error(I)},E.indexOf("data:image/")!==0&&(N.crossOrigin="Anonymous"),N.src=E),T.modified=!0}).catch(function(C){i.default._friendlyFileLoadError(0,E),typeof k=="function"?(k(C),j._decrementPreload()):console.error(C)}),T},i.default.prototype.saveGif=function(){E=regeneratorRuntime.mark(function k(T,j){var A,C,N,V,I,G,R,q,M,L,H,O,U,J,Z,z,B,D,X,K,re,se,fe,xe,he,_e,ye=arguments;return regeneratorRuntime.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(A=2<ye.length&&ye[2]!==void 0?ye[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof T!="string")throw TypeError("fileName parameter must be a string");ue.next=3;break;case 3:if(typeof j!="number")throw TypeError("Duration parameter must be a number");ue.next=5;break;case 5:if(C=A&&A.delay||0,N=A&&A.units||"seconds",V=A&&A.silent||!1,I=A&&A.notificationDuration||0,G=A&&A.notificationID||"progressBar",typeof C!="number")throw TypeError("Delay parameter must be a number");ue.next=12;break;case 12:if(N!=="seconds"&&N!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ue.next=14;break;case 14:if(typeof V!="boolean")throw TypeError("Silent parameter must be a boolean");ue.next=16;break;case 16:if(typeof I!="number")throw TypeError("Notification duration parameter must be a number");ue.next=18;break;case 18:if(typeof G!="string")throw TypeError("Notification ID parameter must be a string");ue.next=20;break;case 20:return this._recording=!0,L=this._targetFrameRate,R=(R=1/(L=L!==1/0&&L!==void 0&&L!==0?L:60)*1e3)<20?20:R,M=(q=N==="seconds"?j*L:j)+(L=N==="seconds"?C*L:C),L=L,this.frameCount=L,H=this._pixelDensity,this.pixelDensity(1),O=[],document.getElementById(G)!==null&&document.getElementById(G).remove(),V||((U=this.createP("")).id(G),U.style("font-size","16px"),U.style("font-family","Montserrat"),U.style("background-color","#ffffffa0"),U.style("padding","8px"),U.style("border-radius","10px"),U.position(0,0)),this._renderer instanceof i.default.RendererGL&&(Z=this.drawingContext,J=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4)),this.noLoop(),ue.next=39,Promise.resolve();case 39:if(L<M)return this.redraw(),xe=void 0,xe=this._renderer instanceof i.default.RendererGL?(J=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4),Z.readPixels(0,0,Z.drawingBufferWidth,Z.drawingBufferHeight,Z.RGBA,Z.UNSIGNED_BYTE,J),function(pe){for(var ke=parseInt(height/2),Ie=4*width,$=new Uint8Array(4*width),te=0;te<ke;++te){var ne=te*Ie,be=(height-te-1)*Ie;$.set(pe.subarray(ne,ne+Ie)),pe.copyWithin(ne,be,be+Ie),pe.set($,be)}return pe}(J)):this.drawingContext.getImageData(0,0,this.width,this.height).data,O.push(xe),L++,V||U.html("Saved frame <b>"+O.length.toString()+"</b> out of "+q.toString()),ue.next=48,new Promise(function(pe){return setTimeout(pe,0)});ue.next=50;break;case 48:ue.next=39;break;case 50:V||U.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(H),z=(0,u.GIFEncoder)(),B=function(pe){for(var ke=new Uint8Array(pe.length*pe[0].length),Ie=0;Ie<pe.length;Ie++)ke.set(pe[Ie],Ie*pe[0].length);var $=(0,u.quantize)(ke,256,{format:"rgba4444",oneBitAlpha:!0});return $.length===256?$[$.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:$.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),$}(O),D={},X=function(pe){for(var ke=pe.length/4,Ie=new Uint8Array(ke),$=0;$<ke;$++){var te=pe[4*$]<<24|pe[4*$+1]<<16|pe[4*$+2]<<8|pe[4*$+3];D[te]===void 0&&(D[te]=(0,u.nearestColorIndex)(B,pe.slice(4*$,4*($+1)))),Ie[$]=D[te]}return Ie},K=B.length-1,re=[],se=0;case 60:if(!(se<O.length)){ue.next=71;break}if(fe=X(O[se]),xe=fe.slice(),se===0)z.writeFrame(fe,this.width,this.height,{palette:B,delay:R,dispose:1});else{for(he=0;he<fe.length;he++)fe[he]===re[he]&&(fe[he]=K);z.writeFrame(fe,this.width,this.height,{delay:R,transparent:!0,transparentIndex:K,dispose:1})}return re=xe,V||U.html("Rendered frame <b>"+se.toString()+"</b> out of "+q.toString()),ue.next=68,new Promise(function(pe){return setTimeout(pe,0)});case 68:se++,ue.next=60;break;case 71:z.finish(),_e=z.bytesView(),_e=new Blob([_e],{type:"image/gif"}),O=[],this._recording=!1,this.loop(),V||(U.html("Done. Downloading your gif!"),0<I&&setTimeout(function(){return U.remove()},1e3*I)),i.default.prototype.downloadFile(_e,T,"gif");case 80:case"end":return ue.stop()}},k,this)});var E,S=function(){var k=this,T=arguments;return new Promise(function(j,A){var C=E.apply(k,T);function N(I){g(C,j,A,N,V,"next",I)}function V(I){g(C,j,A,N,V,"throw",I)}N(void 0)})};return function(k,T){return S.apply(this,arguments)}}(),i.default.prototype.image=function(E,S,k,T,L,H,O,U,Z,I,G,R){i.default._validateParameters("image",arguments);var J=E.width,q=E.height,M=(R=R||y.CENTER,G=G||y.CENTER,E.elt&&(J=J!==void 0?J:E.elt.width,q=q!==void 0?q:E.elt.height),E.elt&&E.elt.videoWidth&&!E.canvas&&(J=J!==void 0?J:E.elt.videoWidth,q=q!==void 0?q:E.elt.videoHeight),T||J),L=L||q,H=H||0,O=O||0,U=b(U!==void 0?U:J,J),J=b(Z!==void 0?Z:q,q),Z=1;E.elt&&!E.canvas&&E.elt.style.width&&(Z=E.elt.videoWidth&&!T?E.elt.videoWidth:E.elt.width,Z/=parseInt(E.elt.style.width,10)),H*=Z,O*=Z,J*=Z,U*=Z,q=x(I,G,R,(q=f.default.modeAdjust(S,k,M,L,this._renderer._imageMode)).x,q.y,q.w,q.h,H,O,U,J),this._renderer.image(E,q.sx,q.sy,q.sw,q.sh,q.dx,q.dy,q.dw,q.dh)},i.default.prototype.tint=function(){for(var E=arguments.length,S=new Array(E),k=0;k<E;k++)S[k]=arguments[k];i.default._validateParameters("tint",S);var T=this.color.apply(this,S);this._renderer._tint=T.levels},i.default.prototype.noTint=function(){this._renderer._tint=null},i.default.prototype._getTintedImageCanvas=i.default.Renderer2D.prototype._getTintedImageCanvas,i.default.prototype.imageMode=function(E){i.default._validateParameters("imageMode",arguments),E!==y.CORNER&&E!==y.CORNERS&&E!==y.CENTER||(this._renderer._imageMode=E)},t=i.default,l.default=t},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/helpers":271,"../core/main":275,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,gifenc:245,omggif:248,"regenerator-runtime/runtime":252}],299:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=i(t("../core/main")),c=i(t("./filters"));function i(y){return y&&y.__esModule?y:{default:y}}function f(y,_){for(var u=0;u<_.length;u++){var m=_[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}o.default.Image=function(){function y(m,p){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.width=m,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var _,u;return _=y,(u=[{key:"pixelDensity",value:function(m){return m!==void 0?(m<=0&&(o.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),m=1),this._pixelDensity=m,this.width/=m,this.height/=m,this):this._pixelDensity}},{key:"_animateGif",value:function(x){var p,g=this.gifProperties,x=x._lastRealFrameTime;g.lastChangeTime===0&&(g.lastChangeTime=x),g.playing&&(g.timeDisplayed=x-g.lastChangeTime,p=g.frames[g.displayIndex].delay,g.timeDisplayed>=p&&(p=Math.floor(g.timeDisplayed/p),g.timeDisplayed=0,g.lastChangeTime=x,g.displayIndex+=p,g.loopCount=Math.floor(g.displayIndex/g.numFrames),g.loopLimit!==null&&g.loopCount>=g.loopLimit?g.playing=!1:(x=g.displayIndex%g.numFrames,this.drawingContext.putImageData(g.frames[x].image,0,0),g.displayIndex=x,this.setModified(!0))))}},{key:"_setProperty",value:function(m,p){this[m]=p,this.setModified(!0)}},{key:"loadPixels",value:function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(m,p,g,x){o.default.Renderer2D.prototype.updatePixels.call(this,m,p,g,x),this.setModified(!0)}},{key:"get",value:function(m,p,g,x){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];return o.default.Renderer2D.prototype._getPixel.apply(this,p)}},{key:"set",value:function(m,p,g){o.default.Renderer2D.prototype.set.call(this,m,p,g),this.setModified(!0)}},{key:"resize",value:function(m,p){m===0&&p===0?(m=this.canvas.width,p=this.canvas.height):m===0?m=this.canvas.width*p/this.canvas.height:p===0&&(p=this.canvas.height*m/this.canvas.width),m=Math.floor(m),p=Math.floor(p);var g=document.createElement("canvas");if(g.width=m,g.height=p,this.gifProperties)for(var x=this.gifProperties,b=0;b<x.numFrames;b++){for(var E=this.drawingContext.createImageData(m,p),S=(C=C=A=j=T=void 0,x.frames[b].image),k=E,T=0,j=0;j<k.height;j++)for(var A=0;A<k.width;A++){var C=Math.floor(A*S.width/k.width),C=4*(Math.floor(j*S.height/k.height)*S.width+C);k.data[T++]=S.data[C++],k.data[T++]=S.data[C++],k.data[T++]=S.data[C++],k.data[T++]=S.data[+C]}x.frames[b].image=E}g.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,g.width,g.height),this.canvas.width=this.width=m,this.canvas.height=this.height=p,this.drawingContext.drawImage(g,0,0,m,p,0,0,m,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];o.default.prototype.copy.apply(this,p)}},{key:"mask",value:function(m){var p=this.drawingContext.globalCompositeOperation,g=1,x=[m=m===void 0?this:m,0,0,(g=m instanceof o.default.Renderer?m._pInst._pixelDensity:g)*m.width,g*m.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var b=0;b<this.gifProperties.frames.length;b++)this.drawingContext.putImageData(this.gifProperties.frames[b].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[b].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)}},{key:"filter",value:function(m,p){c.default.apply(this.canvas,c.default[m],p),this.setModified(!0)}},{key:"blend",value:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,p),this.setModified(!0)}},{key:"setModified",value:function(m){this._modified=m}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(m,p){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,m):o.default.prototype.saveCanvas(this.canvas,m,p)}},{key:"reset",value:function(){var m;this.gifProperties&&((m=this.gifProperties).playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var m;if(this.gifProperties)return(m=this.gifProperties).displayIndex%m.numFrames}},{key:"setFrame",value:function(m){var p;this.gifProperties&&(m<(p=this.gifProperties).numFrames&&0<=m?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=m,this.drawingContext.putImageData(p.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(m,p){if(this.gifProperties){var g=this.gifProperties;if(p<g.numFrames&&0<=p)g.frames[p].delay=m;else{var x=!0,p=!1,b=void 0;try{for(var E,S=g.frames[Symbol.iterator]();!(x=(E=S.next()).done);x=!0)E.value.delay=m}catch(T){p=!0,b=T}finally{try{x||S.return==null||S.return()}finally{if(p)throw b}}}}}}])&&f(_.prototype,u),y}(),t=o.default.Image,l.default=t},{"../core/main":275,"./filters":296,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],300:[function(t,a,l){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=i(t("../core/main")),c=i(t("./filters"));function i(f){return f&&f.__esModule?f:{default:f}}t("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var f,y=arguments.length,_=new Array(y),u=0;u<y;u++)_[u]=arguments[u];o.default._validateParameters("blend",_),this._renderer?(f=this._renderer).blend.apply(f,_):o.default.Renderer2D.prototype.blend.apply(this,_)},o.default.prototype.copy=function(){for(var f,y,_,u,m,p,g,x,b,E=arguments.length,S=new Array(E),k=0;k<E;k++)S[k]=arguments[k];if(o.default._validateParameters("copy",S),S.length===9)f=S[0],y=S[1],_=S[2],u=S[3],m=S[4],p=S[5],g=S[6],x=S[7],b=S[8];else{if(S.length!==8)throw new Error("Signature not supported");f=this,y=S[0],_=S[1],u=S[2],m=S[3],p=S[4],g=S[5],x=S[6],b=S[7]}o.default.prototype._copyHelper(this,f,y,_,u,m,p,g,x,b)},o.default.prototype._copyHelper=function(f,y,_,u,m,p,g,x,b,E){var S=y.canvas.width/y.width,k=0,T=0;y._renderer&&y._renderer.isP3D&&(k=y.width/2,T=y.height/2),f._renderer&&f._renderer.isP3D?o.default.RendererGL.prototype.image.call(f._renderer,y,_+k,u+T,m,p,g,x,b,E):f.drawingContext.drawImage(y.canvas,S*(_+k),S*(u+T),S*m,S*p,g,x,b,E)},o.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},o.default.prototype.filter=function(){for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];o.default._validateParameters("filter",arguments);var g=(function(){var x,b={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof o.default.Shader?b.shader=arguments.length<=0?void 0:arguments[0]:(b.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(b.value=arguments.length<=1?void 0:arguments[1]),((x=arguments.length-1)<0||arguments.length<=x?void 0:arguments[x])===!1&&(b.useWebGL=!1)),b}).apply(void 0,y),u=g.shader,m=g.operation,p=g.value,g=g.useWebGL;this._renderer.isP3D&&u?o.default.RendererGL.prototype.filter.call(this._renderer,u):g||this._renderer.isP3D?(!g&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?o.default.RendererGL.prototype.filter.call(this._renderer,m,p):((u=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),u.filter.apply(u,y),this._renderer._pInst.image(u,0,0),u.clear())):this.canvas!==void 0?c.default.apply(this.canvas,c.default[m],p):c.default.apply(this.elt,c.default[m],p)},o.default.prototype.get=function(f,y,_,u){var m;return o.default._validateParameters("get",arguments),(m=this._renderer).get.apply(m,arguments)},o.default.prototype.loadPixels=function(){for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];o.default._validateParameters("loadPixels",y),this._renderer.loadPixels()},o.default.prototype.set=function(f,y,_){this._renderer.set(f,y,_)},o.default.prototype.updatePixels=function(f,y,_,u){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(f,y,_,u)},t=o.default,l.default=t},{"../color/p5.Color":262,"../core/main":275,"./filters":296,"core-js/modules/es.array.filter":155}],301:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=y(t("../core/main")),i=(t("whatwg-fetch"),t("es6-promise/auto"),y(t("fetch-jsonp"))),f=y(t("file-saver"));function y(p){return p&&p.__esModule?p:{default:p}}function _(p){return(_=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}function u(p){return p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function m(p,g){g&&g!==!0&&g!=="true"||(g="");var x="";return(p=p||"untitled")&&p.includes(".")&&(x=p.split(".").pop()),g&&x!==g&&(x=g,p="".concat(p,".").concat(x)),[p,x]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),c.default.prototype.loadJSON=function(){for(var p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];c.default._validateParameters("loadJSON",g);for(var b,E,S,k=g[0],T={},j="json",A=1;A<g.length;A++){var C=g[A];typeof C=="string"?C!=="jsonp"&&C!=="json"||(j=C):typeof C=="function"?b?E=C:b=C:_(C)==="object"&&(C.hasOwnProperty("jsonpCallback")||C.hasOwnProperty("jsonpCallbackFunction"))&&(j="jsonp",S=C)}var N=this;return this.httpDo(k,"GET",S,j,function(V){for(var I in V)T[I]=V[I];b!==void 0&&b(V),N._decrementPreload()},function(V){if(c.default._friendlyFileLoadError(5,k),!E)throw V;E(V)}),T},c.default.prototype.loadStrings=function(){for(var p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];c.default._validateParameters("loadStrings",g);for(var b,E,S=[],k=1;k<g.length;k++){var T=g[k];typeof T=="function"&&(b===void 0?b=T:E===void 0&&(E=T))}var j=this;return c.default.prototype.httpDo.call(this,g[0],"GET","text",function(A){for(var C=A.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),N=0,V=C.length;N<V;N+=32768)Array.prototype.push.apply(S,C.slice(N,Math.min(N+32768,V)));b!==void 0&&b(S),j._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(3,A),!E)throw A;E(A)}),S},c.default.prototype.loadTable=function(p){var g,x,b,E=!1,S=p.substring(p.lastIndexOf(".")+1,p.length);S==="csv"?b=",":S==="ssv"?b=";":S==="tsv"&&(b="	");for(var k=1;k<arguments.length;k++)typeof arguments[k]=="function"?g===void 0?g=arguments[k]:x===void 0&&(x=arguments[k]):typeof arguments[k]=="string"&&(arguments[k]==="header"&&(E=!0),arguments[k]==="csv"?b=",":arguments[k]==="ssv"?b=";":arguments[k]==="tsv"&&(b="	"));var T=new c.default.Table,j=this;return this.httpDo(p,"GET","table",function(A){for(var C,N,V={},I=0,G=[],R=0,q=null,M=function(){V.currentState=I,V.token=""},L=function(){q.push(V.token),M()},H=function(){V.currentState=4,G.push(q),q=null};;){if((C=A[R++])==null){if(V.escaped)throw new Error("Unclosed quote in file.");if(q){L(),H();break}}if(q===null&&(V.escaped=!1,q=[],M()),V.currentState===I){if(C==='"'){V.escaped=!0,V.currentState=1;continue}V.currentState=1}if(V.currentState===1&&V.escaped)if(C==='"')A[R]==='"'?(V.token+='"',R++):(V.escaped=!1,V.currentState=2);else{if(C==="\r")continue;V.token+=C}else C==="\r"?(A[R]===`
`&&R++,L(),H()):C===`
`?(L(),H()):C===b?L():V.currentState===1&&(V.token+=C)}if(E)T.columns=G.shift();else for(var O=0;O<G[0].length;O++)T.columns[O]="null";for(var U=0;U<G.length;U++)(G[U].length!==1||G[U][0]!=="undefined"&&G[U][0]!=="")&&((N=new c.default.TableRow).arr=G[U],N.obj=function(J,Z){if((Z=Z||[])===void 0)for(var z=0;z<J.length;z++)Z[z.toString()]=z;return Object.fromEntries(Z.map(function(B,D){return[B,J[D]]}))}(G[U],T.columns),T.addRow(N));typeof g=="function"&&g(T),j._decrementPreload()},function(A){c.default._friendlyFileLoadError(2,p),x?x(A):console.error(A)}),T},c.default.prototype.loadXML=function(){for(var p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];for(var b,E,S=new c.default.XML,k=1;k<g.length;k++){var T=g[k];typeof T=="function"&&(b===void 0?b=T:E===void 0&&(E=T))}var j=this;return this.httpDo(g[0],"GET","xml",function(A){for(var C in A)S[C]=A[C];b!==void 0&&b(S),j._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(1,A),!E)throw A;E(A)}),S},c.default.prototype.loadBytes=function(p,g,x){var b={},E=this;return this.httpDo(p,"GET","arrayBuffer",function(S){b.bytes=new Uint8Array(S),typeof g=="function"&&g(b),E._decrementPreload()},function(S){if(c.default._friendlyFileLoadError(6,p),!x)throw S;x(S)}),b},c.default.prototype.httpGet=function(){c.default._validateParameters("httpGet",arguments);var p=Array.prototype.slice.call(arguments);return p.splice(1,0,"GET"),c.default.prototype.httpDo.apply(this,p)},c.default.prototype.httpPost=function(){c.default._validateParameters("httpPost",arguments);var p=Array.prototype.slice.call(arguments);return p.splice(1,0,"POST"),c.default.prototype.httpDo.apply(this,p)},c.default.prototype.httpDo=function(){for(var p,g,x,b={},E=0,S="text/plain",k=arguments.length-1;0<k&&typeof(k<0||arguments.length<=k?void 0:arguments[k])=="function";k--)E++;var T=arguments.length-E,j=arguments.length<=0?void 0:arguments[0];if(T==2&&typeof j=="string"&&_(arguments.length<=1?void 0:arguments[1])==="object")G=new Request(j,arguments.length<=1?void 0:arguments[1]),g=arguments.length<=2?void 0:arguments[2],x=arguments.length<=3?void 0:arguments[3];else{for(var A,C="GET",N=1;N<arguments.length;N++){var V=N<0||arguments.length<=N?void 0:arguments[N];if(typeof V=="string")V==="GET"||V==="POST"||V==="PUT"||V==="DELETE"?C=V:V==="json"||V==="jsonp"||V==="binary"||V==="arrayBuffer"||V==="xml"||V==="text"||V==="table"?p=V:A=V;else if(typeof V=="number")A=V.toString();else if(_(V)==="object")if(V.hasOwnProperty("jsonpCallback")||V.hasOwnProperty("jsonpCallbackFunction"))for(var I in V)b[I]=V[I];else S=V instanceof c.default.XML?(A=V.serialize(),"application/xml"):(A=JSON.stringify(V),"application/json");else typeof V=="function"&&(g?x=V:g=V)}var T=C==="GET"?new Headers:new Headers({"Content-Type":S}),G=new Request(j,{method:C,mode:"cors",body:A,headers:T})}return(T=(T=(p=p||(j.includes("json")?"json":j.includes("xml")?"xml":"text"))==="jsonp"?(0,i.default)(j,b):fetch(G)).then(function(R){if(!R.ok)throw(q=new Error(R.body)).status=R.status,q.ok=!1,q;var q=0;switch((q=p!=="jsonp"?R.headers.get("content-length"):q)&&64e6<q&&c.default._friendlyFileLoadError(7,j),p){case"json":case"jsonp":return R.json();case"binary":return R.blob();case"arrayBuffer":return R.arrayBuffer();case"xml":return R.text().then(function(M){return M=new DOMParser().parseFromString(M,"text/xml"),new c.default.XML(M.documentElement)});default:return R.text()}})).then(g||function(){}),T.catch(x||console.error),T},window.URL=window.URL||window.webkitURL,c.default.prototype._pWriters=[],c.default.prototype.createWriter=function(p,g){var x,b;for(b in c.default.prototype._pWriters)if(c.default.prototype._pWriters[b].name===p)return x=new c.default.PrintWriter(p+this.millis(),g),c.default.prototype._pWriters.push(x),x;return x=new c.default.PrintWriter(p,g),c.default.prototype._pWriters.push(x),x},c.default.PrintWriter=function(p,g){var x=this;this.name=p,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,E=[];for(b in E.push(this.content),c.default.prototype.writeFile(E,p,g),c.default.prototype._pWriters)c.default.prototype._pWriters[b].name===this.name&&c.default.prototype._pWriters.splice(b,1);x.clear(),x={}}},c.default.prototype.save=function(p,g,x){var b=arguments,E=(this._curElement||this).elt;if(b.length===0)c.default.prototype.saveCanvas(E);else if(b[0]instanceof c.default.Renderer||b[0]instanceof c.default.Graphics)c.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")c.default.prototype.saveCanvas(E,b[0]);else switch(m(b[1],b[2])[1]){case"json":return void c.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void c.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?c.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof c.default.Table?c.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof c.default.Image?c.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof c.default.SoundFile&&c.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},c.default.prototype.saveJSON=function(p,g,x){c.default._validateParameters("saveJSON",arguments),x=x?JSON.stringify(p):JSON.stringify(p,void 0,2),this.saveStrings(x.split(`
`),g,"json")},c.default.prototype.saveJSONObject=c.default.prototype.saveJSON,c.default.prototype.saveJSONArray=c.default.prototype.saveJSON,c.default.prototype.saveStrings=function(p,g,x,b){c.default._validateParameters("saveStrings",arguments);for(var E=this.createWriter(g,x||"txt"),S=0;S<p.length;S++)b?E.write(p[S]+`\r
`):E.write(p[S]+`
`);E.close(),E.clear()},c.default.prototype.saveTable=function(p,g,x){c.default._validateParameters("saveTable",arguments),b=x===void 0?g.substring(g.lastIndexOf(".")+1,g.length):x;var b,E=this.createWriter(g,b),S=p.columns,k=b==="tsv"?"	":",";if(b!=="html"){if(S[0]!=="0"){for(var T=0;T<S.length;T++)T<S.length-1?E.write(S[T]+k):E.write(S[T]);E.write(`
`)}for(var j=0;j<p.rows.length;j++){for(var A=void 0,A=0;A<p.rows[j].arr.length;A++)A<p.rows[j].arr.length-1?b==="csv"&&String(p.rows[j].arr[A]).includes(",")?E.write('"'+p.rows[j].arr[A]+'"'+k):E.write(p.rows[j].arr[A]+k):b==="csv"&&String(p.rows[j].arr[A]).includes(",")?E.write('"'+p.rows[j].arr[A]+'"'):E.write(p.rows[j].arr[A]);E.write(`
`)}}else{if(E.print("<html>"),E.print("<head>"),E.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),E.print("</head>"),E.print("<body>"),E.print("  <table>"),S[0]!=="0"){E.print("    <tr>");for(var C=0;C<S.length;C++){var N=u(S[C]);E.print("      <td>".concat(N)),E.print("      </td>")}E.print("    </tr>")}for(var V=0;V<p.rows.length;V++){E.print("    <tr>");for(var I=0;I<p.columns.length;I++){var G=u(p.rows[V].getString(I));E.print("      <td>".concat(G)),E.print("      </td>")}E.print("    </tr>")}E.print("  </table>"),E.print("</body>"),E.print("</html>")}E.close(),E.clear()},c.default.prototype.writeFile=function(E,g,x){var b="application/octet-stream",E=(c.default.prototype._isSafari()&&(b="text/plain"),new Blob(E,{type:b}));c.default.prototype.downloadFile(E,g,x)},c.default.prototype.downloadFile=function(p,E,S){var b,E=m(E,S),S=E[0];p instanceof Blob?f.default.saveAs(p,S):((b=document.createElement("a")).href=p,b.download=S,b.onclick=function(k){document.body.removeChild(k.target),k.stopPropagation()},b.style.display="none",document.body.appendChild(b),c.default.prototype._isSafari()&&(p=(p=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(E[1],'"'),alert(p)),b.click())},c.default.prototype._checkFileExtension=m,c.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},t=c.default,l.default=t},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240,"es6-promise/auto":241,"fetch-jsonp":243,"file-saver":244,"whatwg-fetch":253}],302:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(i,f){for(var y=0;y<f.length;y++){var _=f[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.Table=function(){function i(_){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var f,y;return f=i,(y=[{key:"addRow",value:function(_){if(_=_||new o.default.TableRow,_.arr===void 0||_.obj===void 0)throw new Error("invalid TableRow: ".concat(_));return(_.table=this).rows.push(_),_}},{key:"removeRow",value:function(_){this.rows[_].table=null,_=this.rows.splice(_+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(_)}},{key:"getRow",value:function(_){return this.rows[_]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(_,u){if(typeof u=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[u]===_)return this.rows[m]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[u]===_)return this.rows[p];return null}},{key:"findRows",value:function(_,u){var m=[];if(typeof u=="string")for(var p=0;p<this.rows.length;p++)this.rows[p].obj[u]===_&&m.push(this.rows[p]);else for(var g=0;g<this.rows.length;g++)this.rows[g].arr[u]===_&&m.push(this.rows[g]);return m}},{key:"matchRow",value:function(_,u){if(typeof u=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[u].match(_))return this.rows[m]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[u].match(_))return this.rows[p];return null}},{key:"matchRows",value:function(_,u){var m=[];if(typeof u=="number")for(var p=0;p<this.rows.length;p++)this.rows[p].arr[u].match(_)&&m.push(this.rows[p]);else for(var g=0;g<this.rows.length;g++)this.rows[g].obj[u].match(_)&&m.push(this.rows[g]);return m}},{key:"getColumn",value:function(_){var u=[];if(typeof _=="string")for(var m=0;m<this.rows.length;m++)u.push(this.rows[m].obj[_]);else for(var p=0;p<this.rows.length;p++)u.push(this.rows[p].arr[_]);return u}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(_){this.columns.push(_||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(_,u){for(var m=[],p=0;p<_.length;p++)m.push(_.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var g=new RegExp(m.join("|"),"g");if(u===void 0)for(var x=0;x<this.columns.length;x++)for(var b=0;b<this.rows.length;b++){var E=(E=this.rows[b].arr[x]).replace(g,"");this.rows[b].arr[x]=E,this.rows[b].obj[this.columns[x]]=E}else if(typeof u=="string")for(var S=0;S<this.rows.length;S++){var k=(k=this.rows[S].obj[u]).replace(g,""),T=(this.rows[S].obj[u]=k,this.columns.indexOf(u));this.rows[S].arr[T]=k}else for(var j=0;j<this.rows.length;j++){var A=(A=this.rows[j].arr[u]).replace(g,"");this.rows[j].arr[u]=A,this.rows[j].obj[this.columns[u]]=A}}},{key:"trim",value:function(_){var u=new RegExp(" ","g");if(_===void 0)for(var m=0;m<this.columns.length;m++)for(var p=0;p<this.rows.length;p++){var g=(g=this.rows[p].arr[m]).replace(u,"");this.rows[p].arr[m]=g,this.rows[p].obj[this.columns[m]]=g}else if(typeof _=="string")for(var x=0;x<this.rows.length;x++){var b=(b=this.rows[x].obj[_]).replace(u,""),E=(this.rows[x].obj[_]=b,this.columns.indexOf(_));this.rows[x].arr[E]=b}else for(var S=0;S<this.rows.length;S++){var k=(k=this.rows[S].arr[_]).replace(u,"");this.rows[S].arr[_]=k,this.rows[S].obj[this.columns[_]]=k}}},{key:"removeColumn",value:function(p){typeof p=="string"?m=this.columns.indexOf(u=p):u=this.columns[m=p];var u,m,p=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(p);for(var g=0;g<this.rows.length;g++){var x=this.rows[g].arr,b=x.splice(m+1,x.length);x.pop(),this.rows[g].arr=x.concat(b),delete this.rows[g].obj[u]}}},{key:"set",value:function(_,u,m){this.rows[_].set(u,m)}},{key:"setNum",value:function(_,u,m){this.rows[_].setNum(u,m)}},{key:"setString",value:function(_,u,m){this.rows[_].setString(u,m)}},{key:"get",value:function(_,u){return this.rows[_].get(u)}},{key:"getNum",value:function(_,u){return this.rows[_].getNum(u)}},{key:"getString",value:function(_,u){return this.rows[_].getString(u)}},{key:"getObject",value:function(_){for(var u,m={},p=0;p<this.rows.length;p++)if(u=this.rows[p].obj,typeof _=="string"){if(!(0<=this.columns.indexOf(_)))throw new Error('This table has no column named "'.concat(_,'"'));m[u[_]]=u}else m[p]=this.rows[p].obj;return m}},{key:"getArray",value:function(){for(var _=[],u=0;u<this.rows.length;u++)_.push(this.rows[u].arr);return _}}])&&c(f.prototype,y),i}(),t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.splice":167,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196}],303:[function(t,a,l){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,i){for(var f=0;f<i.length;f++){var y=i[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}t.default.TableRow=function(){function c(y,_){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var u=[];y&&(u=y.split(_=_||",")),this.arr=u,this.obj=Object.fromEntries(u.entries()),this.table=null}var i,f;return i=c,(f=[{key:"set",value:function(y,_){if(typeof y=="string"){var u=this.table.columns.indexOf(y);if(!(0<=u))throw new Error('This table has no column named "'.concat(y,'"'));this.obj[y]=_,this.arr[u]=_}else{if(!(y<this.table.columns.length))throw new Error("Column #".concat(y," is out of the range of this table"));this.arr[y]=_,u=this.table.columns[y],this.obj[u]=_}}},{key:"setNum",value:function(y,_){_=parseFloat(_),this.set(y,_)}},{key:"setString",value:function(y,_){_=_.toString(),this.set(y,_)}},{key:"get",value:function(y){return(typeof y=="string"?this.obj:this.arr)[y]}},{key:"getNum",value:function(y){var _=parseFloat(typeof y=="string"?this.obj[y]:this.arr[y]);if(_.toString()==="NaN")throw"Error: ".concat(this.obj[y]," is NaN (Not a Number)");return _}},{key:"getString",value:function(y){return(typeof y=="string"?this.obj:this.arr)[y].toString()}}])&&o(i.prototype,f),c}(),t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238}],304:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(f,y){for(var _=0;_<y.length;_++){var u=y[_];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}function i(f){for(var y=[],_=0;_<f.length;_++)y.push(new o.default.XML(f[_]));return y}o.default.XML=function(){function f(u){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");u?this.DOM=u:(u=document.implementation.createDocument(null,"doc"),this.DOM=u.createElement("root"))}var y,_;return y=f,(_=[{key:"getParent",value:function(){return new o.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(u){var m=this.DOM.innerHTML,p=this.DOM.attributes,g=document.implementation.createDocument(null,"default").createElement(u);g.innerHTML=m;for(var x=0;x<p.length;x++)g.setAttribute(p[x].nodeName,p.nodeValue);this.DOM=g}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var u=[],m=0;m<this.DOM.childNodes.length;m++)u.push(this.DOM.childNodes[m].nodeName);return u}},{key:"getChildren",value:function(u){return i(u?this.DOM.getElementsByTagName(u):this.DOM.children)}},{key:"getChild",value:function(u){if(typeof u!="string")return new o.default.XML(this.DOM.children[u]);var m=!0,p=!1,g=void 0;try{for(var x,b=this.DOM.children[Symbol.iterator]();!(m=(x=b.next()).done);m=!0){var E=x.value;if(E.tagName===u)return new o.default.XML(E)}}catch(S){p=!0,g=S}finally{try{m||b.return==null||b.return()}finally{if(p)throw g}}}},{key:"addChild",value:function(u){u instanceof o.default.XML&&this.DOM.appendChild(u.DOM)}},{key:"removeChild",value:function(u){var m=-1;if(typeof u=="string"){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===u){m=p;break}}else m=u;m!==-1&&this.DOM.removeChild(this.DOM.children[m])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var u=[],m=!0,p=!1,g=void 0;try{for(var x,b=this.DOM.attributes[Symbol.iterator]();!(m=(x=b.next()).done);m=!0){var E=x.value;u.push(E.nodeName)}}catch(S){p=!0,g=S}finally{try{m||b.return==null||b.return()}finally{if(p)throw g}}return u}},{key:"hasAttribute",value:function(u){var m={},p=!0,g=!1,x=void 0;try{for(var b,E=this.DOM.attributes[Symbol.iterator]();!(p=(b=E.next()).done);p=!0){var S=b.value;m[S.nodeName]=S.nodeValue}}catch(k){g=!0,x=k}finally{try{p||E.return==null||E.return()}finally{if(g)throw x}}return!!m[u]}},{key:"getNum",value:function(u,m){var p={},g=!0,x=!1,b=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(g=(E=S.next()).done);g=!0){var k=E.value;p[k.nodeName]=k.nodeValue}}catch(T){x=!0,b=T}finally{try{g||S.return==null||S.return()}finally{if(x)throw b}}return Number(p[u])||m||0}},{key:"getString",value:function(u,m){var p={},g=!0,x=!1,b=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(g=(E=S.next()).done);g=!0){var k=E.value;p[k.nodeName]=k.nodeValue}}catch(T){x=!0,b=T}finally{try{g||S.return==null||S.return()}finally{if(x)throw b}}return p[u]?String(p[u]):m||null}},{key:"setAttribute",value:function(u,m){this.DOM.setAttribute(u,m)}},{key:"getContent",value:function(u){var m=this.DOM.textContent;return(m=m.replace(/\s\s+/g,","))||u||null}},{key:"setContent",value:function(u){this.DOM.children.length||(this.DOM.textContent=u)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&c(y.prototype,_),f}(),t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],305:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(c,i,f){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(c,f),i)},o.default.prototype.dist=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("dist",i),i.length===4?Math.hypot(i[2]-i[0],i[3]-i[1]):i.length===6?Math.hypot(i[3]-i[0],i[4]-i[1],i[5]-i[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(c,i,f){return o.default._validateParameters("lerp",arguments),f*(i-c)+c},o.default.prototype.log=Math.log,o.default.prototype.mag=function(c,i){return o.default._validateParameters("mag",arguments),Math.hypot(c,i)},o.default.prototype.map=function(c,i,f,y,_,u){return o.default._validateParameters("map",arguments),c=(c-i)/(f-i)*(_-y)+y,u?y<_?this.constrain(c,y,_):this.constrain(c,_,y):c},o.default.prototype.max=function(){for(var c=function(_){var u=-1/0,m=!0,p=!1,g=void 0;try{for(var x,b=_[Symbol.iterator]();!(m=(x=b.next()).done);m=!0)var E=x.value,u=u<E?E:u}catch(S){p=!0,g=S}finally{try{m||b.return==null||b.return()}finally{if(p)throw g}}return u},i=arguments.length,f=new Array(i),y=0;y<i;y++)f[y]=arguments[y];return f[0]instanceof Array?c(f[0]):c(f)},o.default.prototype.min=function(){for(var c=function(_){var u=1/0,m=!0,p=!1,g=void 0;try{for(var x,b=_[Symbol.iterator]();!(m=(x=b.next()).done);m=!0)var E=x.value,u=E<u?E:u}catch(S){p=!0,g=S}finally{try{m||b.return==null||b.return()}finally{if(p)throw g}}return u},i=arguments.length,f=new Array(i),y=0;y<i;y++)f[y]=arguments[y];return f[0]instanceof Array?c(f[0]):c(f)},o.default.prototype.norm=function(c,i,f){return o.default._validateParameters("norm",arguments),this.map(c,i,f,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(c,i){return i?(i=Math.pow(10,i),Math.round(c*i)/i):Math.round(c)},o.default.prototype.sq=function(c){return c*c},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(y){o.default._validateParameters("fract",arguments);var i,f=0,y=Number(y);return isNaN(y)||Math.abs(y)===1/0?y:(y<0&&(y=-y,f=1),String(y).includes(".")&&!String(y).includes("e")?(i=String(y),i=+("0"+i.slice(i.indexOf("."))),Math.abs(f-i)):y<1?Math.abs(f-y):0)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],306:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(f,y,_){return(c=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(u,m,p){var g=[null];return g.push.apply(g,m),m=new(Function.bind.apply(u,g)),p&&i(m,p.prototype),m}).apply(null,arguments)}function i(f,y){return(i=Object.setPrototypeOf||function(_,u){return _.__proto__=u,_})(f,y)}o.default.prototype.createVector=function(f,y,_){return this instanceof o.default?c(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(f,y,_)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188}],307:[function(_,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,_=(_=_("../core/main"))&&_.__esModule?_:{default:_};function o(u){return .5*(1-Math.cos(u*Math.PI))}var c,i=4095,f=4,y=.5,_=(_.default.prototype.noise=function(u){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var g=0;g<4096;g++)c[g]=Math.random()}u<0&&(u=-u),m<0&&(m=-m),p<0&&(p=-p);for(var x,b,E=Math.floor(u),S=Math.floor(m),k=Math.floor(p),T=u-E,j=m-S,A=p-k,C=0,N=.5,V=0;V<f;V++){var I=E+(S<<4)+(k<<8),G=o(T),R=o(j),q=c[I&i];q+=G*(c[I+1&i]-q),x=c[I+16&i],q+=R*((x+=G*(c[I+16+1&i]-x))-q),x=c[(I+=256)&i],x+=G*(c[I+1&i]-x),b=c[I+16&i],x+=R*((b+=G*(c[I+16+1&i]-b))-x),C+=(q+=o(A)*(x-q))*N,N*=y,E<<=1,S<<=1,k<<=1,1<=(T*=2)&&(E++,T--),1<=(j*=2)&&(S++,j--),1<=(A*=2)&&(k++,A--)}return C},_.default.prototype.noiseDetail=function(u,m){0<u&&(f=u),0<m&&(y=m)},_.default.prototype.noiseSeed=function(u){g=4294967296;var m,p,g,x={setSeed:function(E){p=m=(E??Math.random()*g)>>>0},getSeed:function(){return m},rand:function(){return(p=(1664525*p+1013904223)%g)/g}};x.setSeed(u),c=new Array(4096);for(var b=0;b<4096;b++)c[b]=x.rand()},_.default);l.default=_},{"../core/main":275}],308:[function(t,a,l){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(g)}function c(g){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(p=t("../core/main"))&&p.__esModule?p:{default:p},f=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var x=y();if(x&&x.has(g))return x.get(g);var b,E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in g){var k;Object.prototype.hasOwnProperty.call(g,b)&&((k=S?Object.getOwnPropertyDescriptor(g,b):null)&&(k.get||k.set)?Object.defineProperty(E,b,k):E[b]=g[b])}return E.default=g,x&&x.set(g,E),E}(t("../core/constants"));function y(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,y=function(){return g},g)}function _(g,x){for(var b=0;b<x.length;b++){var E=x[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}function u(g,x){return g!==0&&(this.x=this.x%g),x!==0&&(this.y=this.y%x),this}function m(g,x,b){return g!==0&&(this.x=this.x%g),x!==0&&(this.y=this.y%x),b!==0&&(this.z=this.z%b),this}i.default.Vector=function(){function g(){var j=this,S=g;if(!(j instanceof S))throw new TypeError("Cannot call a class as a function");var k,T,j=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],k=(arguments.length<=2?void 0:arguments[2])||0,T=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(k=(arguments.length<=0?void 0:arguments[0])||0,T=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=k,this.y=T,this.z=j}var x,b,E;return x=g,E=[{key:"fromAngle",value:function(S,k){return new i.default.Vector((k=k===void 0?1:k)*Math.cos(S),k*Math.sin(S),0)}},{key:"fromAngles",value:function(N,A,T){T===void 0&&(T=1);var j=Math.cos(A),A=Math.sin(A),C=Math.cos(N),N=Math.sin(N);return new i.default.Vector(T*N*A,-T*C,T*N*j)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*f.TWO_PI)}},{key:"random3D",value:function(){var S=Math.random()*f.TWO_PI,k=2*Math.random()-1,j=Math.sqrt(1-k*k),T=j*Math.cos(S),j=j*Math.sin(S);return new i.default.Vector(T,j,k)}},{key:"copy",value:function(S){return S.copy(S)}},{key:"add",value:function(S,k,T){return T?T.set(S):(T=S.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),T.add(k),T}},{key:"rem",value:function(S,k){if(S instanceof i.default.Vector&&k instanceof i.default.Vector)return(S=S.copy()).rem(k),S}},{key:"sub",value:function(S,k,T){return T?T.set(S):(T=S.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),T.sub(k),T}},{key:"mult",value:function(S,k,T){return T?T.set(S):(T=S.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),T.mult(k),T}},{key:"rotate",value:function(S,k,T){return arguments.length===2?T=S.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),T.set(S)),T.rotate(k),T}},{key:"div",value:function(S,k,T){return T?T.set(S):(T=S.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),T.div(k),T}},{key:"dot",value:function(S,k){return S.dot(k)}},{key:"cross",value:function(S,k){return S.cross(k)}},{key:"dist",value:function(S,k){return S.dist(k)}},{key:"lerp",value:function(S,k,T,j){return j?j.set(S):(j=S.copy(),arguments.length===4&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),j.lerp(k,T),j}},{key:"slerp",value:function(S,k,T,j){return j?j.set(S):(j=S.copy(),arguments.length===4&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),j.slerp(k,T),j}},{key:"mag",value:function(S){return S.mag()}},{key:"magSq",value:function(S){return S.magSq()}},{key:"normalize",value:function(S,k){return arguments.length<2?k=S.copy():(k instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),k.set(S)),k.normalize()}},{key:"limit",value:function(S,k,T){return arguments.length<3?T=S.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),T.set(S)),T.limit(k)}},{key:"setMag",value:function(S,k,T){return arguments.length<3?T=S.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),T.set(S)),T.setMag(k)}},{key:"heading",value:function(S){return S.heading()}},{key:"angleBetween",value:function(S,k){return S.angleBetween(k)}},{key:"reflect",value:function(S,k,T){return arguments.length<3?T=S.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),T.set(S)),T.reflect(k)}},{key:"array",value:function(S){return S.array()}},{key:"equals",value:function(S,k){var T;return S instanceof i.default.Vector?T=S:S instanceof Array?T=new i.default.Vector().set(S):i.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),T.equals(k)}}],(b=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(S,k,T){return S instanceof i.default.Vector?(this.x=S.x||0,this.y=S.y||0,this.z=S.z||0):Array.isArray(S)?(this.x=S[0]||0,this.y=S[1]||0,this.z=S[2]||0):(this.x=S||0,this.y=k||0,this.z=T||0),this}},{key:"copy",value:function(){return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new i.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(S,k,T){return S instanceof i.default.Vector?(this.x+=S.x||0,this.y+=S.y||0,this.z+=S.z||0):Array.isArray(S)?(this.x+=S[0]||0,this.y+=S[1]||0,this.z+=S[2]||0):(this.x+=S||0,this.y+=k||0,this.z+=T||0),this}},{key:"rem",value:function(S,k,T){var j;if(S instanceof i.default.Vector){if([S.x,S.y,S.z].every(Number.isFinite))return A=parseFloat(S.x),C=parseFloat(S.y),j=parseFloat(S.z),m.call(this,A,C,j)}else if(Array.isArray(S)){if(S.every(function(N){return Number.isFinite(N)}))return S.length===2?u.call(this,S[0],S[1]):S.length===3?m.call(this,S[0],S[1],S[2]):void 0}else if(arguments.length===1){if(Number.isFinite(S)&&S!==0)return this.x=this.x%S,this.y=this.y%S,this.z=this.z%S,this}else if(arguments.length===2){var A=Array.prototype.slice.call(arguments);if(A.every(function(N){return Number.isFinite(N)})&&A.length===2)return u.call(this,A[0],A[1])}else if(arguments.length===3){var C=Array.prototype.slice.call(arguments);if(C.every(function(N){return Number.isFinite(N)})&&C.length===3)return m.call(this,C[0],C[1],C[2])}}},{key:"sub",value:function(S,k,T){return S instanceof i.default.Vector?(this.x-=S.x||0,this.y-=S.y||0,this.z-=S.z||0):Array.isArray(S)?(this.x-=S[0]||0,this.y-=S[1]||0,this.z-=S[2]||0):(this.x-=S||0,this.y-=k||0,this.z-=T||0),this}},{key:"mult",value:function(S,k,T){var j;return S instanceof i.default.Vector?Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&typeof S.x=="number"&&typeof S.y=="number"&&typeof S.z=="number"?(this.x*=S.x,this.y*=S.y,this.z*=S.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(S)?S.every(function(A){return Number.isFinite(A)})&&S.every(function(A){return typeof A=="number"})?S.length===1?(this.x*=S[0],this.y*=S[0],this.z*=S[0]):S.length===2?(this.x*=S[0],this.y*=S[1]):S.length===3&&(this.x*=S[0],this.y*=S[1],this.z*=S[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(j=Array.prototype.slice.call(arguments)).every(function(A){return Number.isFinite(A)})&&j.every(function(A){return typeof A=="number"})?(arguments.length===1&&(this.x*=S,this.y*=S,this.z*=S),arguments.length===2&&(this.x*=S,this.y*=k),arguments.length===3&&(this.x*=S,this.y*=k,this.z*=T)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(S,k,T){if(S instanceof i.default.Vector)if(Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&typeof S.x=="number"&&typeof S.y=="number"&&typeof S.z=="number"){var j=S.z===0&&this.z===0;if(S.x===0||S.y===0||!j&&S.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=S.x,this.y/=S.y,j||(this.z/=S.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(S))if(S.every(function(A){return Number.isFinite(A)})&&S.every(function(A){return typeof A=="number"})){if(S.some(function(A){return A===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;S.length===1?(this.x/=S[0],this.y/=S[0],this.z/=S[0]):S.length===2?(this.x/=S[0],this.y/=S[1]):S.length===3&&(this.x/=S[0],this.y/=S[1],this.z/=S[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(j=Array.prototype.slice.call(arguments),j.every(function(A){return Number.isFinite(A)})&&j.every(function(A){return typeof A=="number"})){if(j.some(function(A){return A===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=S,this.y/=S,this.z/=S),arguments.length===2&&(this.x/=S,this.y/=k),arguments.length===3&&(this.x/=S,this.y/=k,this.z/=T)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var S=this.x,k=this.y,T=this.z;return S*S+k*k+T*T}},{key:"dot",value:function(S,k,T){return S instanceof i.default.Vector?this.dot(S.x,S.y,S.z):this.x*(S||0)+this.y*(k||0)+this.z*(T||0)}},{key:"cross",value:function(j){var k=this.y*j.z-this.z*j.y,T=this.z*j.x-this.x*j.z,j=this.x*j.y-this.y*j.x;return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,k,T,j):new i.default.Vector(k,T,j)}},{key:"dist",value:function(S){return S.copy().sub(this).mag()}},{key:"normalize",value:function(){var S=this.mag();return S!==0&&this.mult(1/S),this}},{key:"limit",value:function(S){var k=this.magSq();return S*S<k&&this.div(Math.sqrt(k)).mult(S),this}},{key:"setMag",value:function(S){return this.normalize().mult(S)}},{key:"heading",value:function(){var S=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(S):S}},{key:"setHeading",value:function(S){this.isPInst&&(S=this._toRadians(S));var k=this.mag();return this.x=k*Math.cos(S),this.y=k*Math.sin(S),this}},{key:"rotate",value:function(k){var k=this.heading()+k,T=(this.isPInst&&(k=this._toRadians(k)),this.mag());return this.x=Math.cos(k)*T,this.y=Math.sin(k)*T,this}},{key:"angleBetween",value:function(S){var k;return this.magSq()*S.magSq()==0?NaN:(k=this.cross(S),S=Math.atan2(k.mag(),this.dot(S))*Math.sign(k.z||1),this.isPInst?this._fromRadians(S):S)}},{key:"lerp",value:function(S,k,T,j){return S instanceof i.default.Vector?this.lerp(S.x,S.y,S.z,k):(this.x+=(S-this.x)*j||0,this.y+=(k-this.y)*j||0,this.z+=(T-this.z)*j||0,this)}},{key:"slerp",value:function(S,k){if(k!==0){if(k===1)return this.set(S);var T=this.mag(),j=S.mag();if(T*j==0)this.mult(1-k).add(S.x*k,S.y*k,S.z*k);else{var A=this.cross(S),C=A.mag(),N=Math.atan2(C,this.dot(S));if(0<C)A.x/=C,A.y/=C,A.z/=C;else{if(N<.5*Math.PI)return this.mult(1-k).add(S.x*k,S.y*k,S.z*k),this;this.z===0&&S.z===0?A.set(0,0,1):this.x!==0?A.set(this.y,-this.x,0).normalize():A.set(1,0,0)}C=A.cross(this),S=1-k+k*j/T,A=S*Math.cos(k*N),j=S*Math.sin(k*N),this.x=this.x*A+C.x*j,this.y=this.y*A+C.y*j,this.z=this.z*A+C.z*j}}return this}},{key:"reflect",value:function(S){return S.normalize(),this.sub(S.mult(2*this.dot(S)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(C,k,T){var j,A,C=C instanceof i.default.Vector?(j=C.x||0,A=C.y||0,C.z||0):Array.isArray(C)?(j=C[0]||0,A=C[1]||0,C[2]||0):(j=C||0,A=k||0,T||0);return this.x===j&&this.y===A&&this.z===C}}])&&_(x.prototype,b),E&&_(x,E),g}();var p=i.default.Vector;l.default=p},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.constructor":173,"core-js/modules/es.number.is-finite":174,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],309:[function(y,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(y=y("../core/main"))&&y.__esModule?y:{default:y},c="_lcg_random_state",i=4294967296,f=0,y=(o.default.prototype._lcg=function(_){return this[_]=(1664525*this[_]+1013904223)%i,this[_]/i},o.default.prototype._lcgSetSeed=function(_,u){this[_]=(u??Math.random()*i)>>>0},o.default.prototype.randomSeed=function(_){this._lcgSetSeed(c,_),this._gaussian_previous=!1},o.default.prototype.random=function(_,u){var m,p;return o.default._validateParameters("random",arguments),m=this[c]!=null?this._lcg(c):Math.random(),_===void 0?m:u===void 0?_ instanceof Array?_[Math.floor(m*_.length)]:m*_:(u<_&&(p=_,_=u,u=p),m*(u-_)+_)},o.default.prototype.randomGaussian=function(_){var u,m,p,g,x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)u=f,this._gaussian_previous=!1;else{for(;1<=(g=(m=this.random(2)-1)*m+(p=this.random(2)-1)*p););u=m*(g=Math.sqrt(-2*Math.log(g)/g)),f=p*g,this._gaussian_previous=!0}return u*x+(_||0)},o.default);l.default=y},{"../core/main":275}],310:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var m=y();if(m&&m.has(u))return m.get(u);var p,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var b;Object.prototype.hasOwnProperty.call(u,p)&&((b=x?Object.getOwnPropertyDescriptor(u,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=u[p])}return g.default=u,m&&m.set(u,g),g}(t("../core/constants"));function y(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,y=function(){return u},u)}i.default.prototype._angleMode=f.RADIANS,i.default.prototype.acos=function(u){return this._fromRadians(Math.acos(u))},i.default.prototype.asin=function(u){return this._fromRadians(Math.asin(u))},i.default.prototype.atan=function(u){return this._fromRadians(Math.atan(u))},i.default.prototype.atan2=function(u,m){return this._fromRadians(Math.atan2(u,m))},i.default.prototype.cos=function(u){return Math.cos(this._toRadians(u))},i.default.prototype.sin=function(u){return Math.sin(this._toRadians(u))},i.default.prototype.tan=function(u){return Math.tan(this._toRadians(u))},i.default.prototype.degrees=function(u){return u*f.RAD_TO_DEG},i.default.prototype.radians=function(u){return u*f.DEG_TO_RAD},i.default.prototype.angleMode=function(u){if(i.default._validateParameters("angleMode",arguments),u===void 0)return this._angleMode;u!==f.DEGREES&&u!==f.RADIANS||(this._angleMode=u)},i.default.prototype._toRadians=function(u){return this._angleMode===f.DEGREES?u*f.DEG_TO_RAD:u},i.default.prototype._toDegrees=function(u){return this._angleMode===f.RADIANS?u*f.RAD_TO_DEG:u},i.default.prototype._fromRadians=function(u){return this._angleMode===f.DEGREES?u*f.RAD_TO_DEG:u};var _=i.default;l.default=_},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],311:[function(t,a,l){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.textAlign=function(c,i){var f;return o.default._validateParameters("textAlign",arguments),(f=this._renderer).textAlign.apply(f,arguments)},o.default.prototype.textLeading=function(c){var i;return o.default._validateParameters("textLeading",arguments),(i=this._renderer).textLeading.apply(i,arguments)},o.default.prototype.textSize=function(c){var i;return o.default._validateParameters("textSize",arguments),(i=this._renderer).textSize.apply(i,arguments)},o.default.prototype.textStyle=function(c){var i;return o.default._validateParameters("textStyle",arguments),(i=this._renderer).textStyle.apply(i,arguments)},o.default.prototype.textWidth=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];if(i[0]+="",o.default._validateParameters("textWidth",i),i[0].length===0)return 0;for(var y=i[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),_=[],u=0;u<y.length;u++)_.push(this._renderer.textWidth(y[u]));return Math.max.apply(Math,_)},o.default.prototype.textAscent=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("textAscent",i),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("textDescent",i),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(c){if(c!=="WORD"&&c!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(c)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],312:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=u(t("../core/constants")),y=u(t("opentype.js"));function _(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,_=function(){return p},p)}function u(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=_();if(g&&g.has(p))return g.get(p);var x,b,E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&((b=S?Object.getOwnPropertyDescriptor(p,x):null)&&(b.get||b.set)?Object.defineProperty(E,x,b):E[x]=p[x]);return E.default=p,g&&g.set(p,E),E}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(p,g,x){i.default._validateParameters("loadFont",arguments);var b=new i.default.Font(this),E=this;return y.load(p,function(T,j){if(T)return i.default._friendlyFileLoadError(4,p),x!==void 0?x(T):void console.error(T,p);b.font=j,g!==void 0&&g(b),E._decrementPreload();var T=p.split("\\").pop().split("/").pop(),j=T.lastIndexOf("."),A=j<1?null:T.slice(j+1);["ttf","otf","woff","woff2"].includes(A)&&(A=T.slice(0,j!==-1?j:0),(T=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(A,`;
src: url(`).concat(p,`);
}
`))),document.head.appendChild(T))}),b},i.default.prototype.text=function(p,g,x,b,E){var S;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(S=this._renderer).text.apply(S,arguments):this},i.default.prototype.textFont=function(p,g){if(i.default._validateParameters("textFont",arguments),arguments.length){if(p)return this._renderer._setProperty("_textFont",p),g&&(this._renderer._setProperty("_textSize",g),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",g*f._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var m=i.default;l.default=m},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,"opentype.js":249}],313:[function(t,a,l){function o(C){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(C)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(c=t("../core/main"))&&c.__esModule?c:{default:c},i=function(C){if(C&&C.__esModule)return C;if(C===null||y(C)!=="object"&&typeof C!="function")return{default:C};var N=f();if(N&&N.has(C))return N.get(C);var V,I={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(V in C){var R;Object.prototype.hasOwnProperty.call(C,V)&&((R=G?Object.getOwnPropertyDescriptor(C,V):null)&&(R.get||R.set)?Object.defineProperty(I,V,R):I[V]=C[V])}return I.default=C,N&&N.set(C,I),I}(t("../core/constants"));function f(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,f=function(){return C},C)}function y(C){return(y=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(N){return o(N)}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":o(N)})(C)}function _(C,N){for(var V=0;V<N.length;V++){var I=N[V];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}function u(C,N){var V=C.length;return C[N<0?N%V+V:N%V]}function m(C,N,V,I){var G,R,q;return I?(m.tmpPoint1===void 0&&(m.tmpPoint1=[],m.tmpPoint2=[]),R=m.tmpPoint1,q=m.tmpPoint2,R.x=N.x-C.x,R.y=N.y-C.y,q.x=V.x-N.x,q.y=V.y-N.y,G=R.x*q.x+R.y*q.y,R=Math.sqrt(R.x*R.x+R.y*R.y),q=Math.sqrt(q.x*q.x+q.y*q.y),Math.acos(G/(R*q))<I):(N[0]-C[0])*(V[1]-C[1])-(V[0]-C[0])*(N[1]-C[1])==0}function p(D,K,X,re,se,R,q,M,L){var H=1-L,U=Math.pow(H,3),J=Math.pow(H,2),B=L*L,Z=B*L,O=U*D+3*J*L*X+3*H*L*L*se+Z*q,U=U*K+3*J*L*re+3*H*L*L*R+Z*M,J=D+2*L*(X-D)+B*(se-2*X+D),Z=K+2*L*(re-K)+B*(R-2*re+K),z=X+2*L*(se-X)+B*(q-2*se+X),B=re+2*L*(R-re)+B*(M-2*R+re),D=H*D+L*X,X=H*K+L*re,K=H*se+L*q,re=H*R+L*M,se=90-180*Math.atan2(J-z,Z-B)/Math.PI;return(z<J||Z<B)&&(se+=180),{x:O,y:U,m:{x:J,y:Z},n:{x:z,y:B},start:{x:D,y:X},end:{x:K,y:re},alpha:se}}function g(C,N,V,I,G,R,q,M,L){return L==null?j(C,N,V,I,G,R,q,M):p(C,N,V,I,G,R,q,M,function(H,O,U,J,Z,z,B,D,X){if(!(X<0||j(H,O,U,J,Z,z,B,D)<X)){var K,re=.5,se=1-re;for(K=j(H,O,U,J,Z,z,B,D,se);.01<Math.abs(K-X);)K=j(H,O,U,J,Z,z,B,D,se+=(K<X?1:-1)*(re/=2));return se}}(C,N,V,I,G,R,q,M,L))}function x(C,N,V){for(var I,G,R,q,M,L=0,H=0,O=(C=function(U,J){function Z($,te,ne){var be,ve;if(!$)return["C",te.x,te.y,te.x,te.y,te.x,te.y];switch($[0]in{T:1,Q:1}||(te.qx=te.qy=null),$[0]){case"M":te.X=$[1],te.Y=$[2];break;case"A":$=["C"].concat(E.apply(0,[te.x,te.y].concat($.slice(1))));break;case"S":ve=ne==="C"||ne==="S"?(be=2*te.x-te.bx,2*te.y-te.by):(be=te.x,te.y),$=["C",be,ve].concat($.slice(1));break;case"T":ne==="Q"||ne==="T"?(te.qx=2*te.x-te.qx,te.qy=2*te.y-te.qy):(te.qx=te.x,te.qy=te.y),$=["C"].concat(T(te.x,te.y,te.qx,te.qy,$[1],$[2]));break;case"Q":te.qx=$[1],te.qy=$[2],$=["C"].concat(T(te.x,te.y,$[1],$[2],$[3],$[4]));break;case"L":$=["C"].concat(k(te.x,te.y,$[1],$[2]));break;case"H":$=["C"].concat(k(te.x,te.y,$[1],te.y));break;case"V":$=["C"].concat(k(te.x,te.y,te.x,$[1]));break;case"Z":$=["C"].concat(k(te.x,te.y,te.X,te.Y))}return $}function z($,te){if(7<$[te].length){$[te].shift();for(var ne=$[te];ne.length;)fe[te]="A",K&&(xe[te]="A"),$.splice(te++,0,["C"].concat(ne.splice(0,6)));$.splice(te,1),D=Math.max(X.length,K&&K.length||0)}}function B($,te,ne,be,ve){$&&te&&$[ve][0]==="M"&&te[ve][0]!=="M"&&(te.splice(ve,0,["M",be.x,be.y]),ne.bx=0,ne.by=0,ne.x=$[ve][1],ne.y=$[ve][2],D=Math.max(X.length,K&&K.length||0))}var D,X=b(U),K=J&&b(J),re={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},se={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},fe=[],xe=[],he="",_e="";D=Math.max(X.length,K&&K.length||0);for(var ye=0;ye<D;ye++){(he=X[ye]?X[ye][0]:he)!=="C"&&(fe[ye]=he,ye&&(_e=fe[ye-1])),X[ye]=Z(X[ye],re,_e),fe[ye]!=="A"&&he==="C"&&(fe[ye]="C"),z(X,ye),K&&((he=K[ye]?K[ye][0]:he)!=="C"&&(xe[ye]=he,ye&&(_e=xe[ye-1])),K[ye]=Z(K[ye],se,_e),xe[ye]!=="A"&&he==="C"&&(xe[ye]="C"),z(K,ye)),B(X,K,re,se,ye),B(K,X,se,re,ye);var ue=X[ye],pe=K&&K[ye],ke=ue.length,Ie=K&&pe.length;re.x=ue[ke-2],re.y=ue[ke-1],re.bx=parseFloat(ue[ke-4])||re.x,re.by=parseFloat(ue[ke-3])||re.y,se.bx=K&&(parseFloat(pe[Ie-4])||se.x),se.by=K&&(parseFloat(pe[Ie-3])||se.y),se.x=K&&pe[Ie-2],se.y=K&&pe[Ie-1]}return K?[X,K]:X}(C)).length;H<O;H++){if((R=C[H])[0]==="M")I=+R[1],G=+R[2];else{if(N<L+(q=g(I,G,R[1],R[2],R[3],R[4],R[5],R[6]))&&!V)return{x:(M=g(I,G,R[1],R[2],R[3],R[4],R[5],R[6],N-L)).x,y:M.y,alpha:M.alpha};L+=q,I=+R[5],G=+R[6]}R.shift()}return M=(M=V?L:p(I,G,R[0],R[1],R[2],R[3],R[4],R[5],1)).alpha?{x:M.x,y:M.y,alpha:M.alpha}:M}function b(C){var N=[],V=0,I=0,G=0,R=0,q=0;if(C){C[0][0]==="M"&&(G=V=+C[0][1],R=I=+C[0][2],q++,N[0]=["M",V,I]);for(var M,L,H=C.length===3&&C[0][0]==="M"&&C[1][0].toUpperCase()==="R"&&C[2][0].toUpperCase()==="Z",O=q,U=C.length;O<U;O++){if(N.push(M=[]),(L=C[O])[0]!==String.prototype.toUpperCase.call(L[0]))switch(M[0]=String.prototype.toUpperCase.call(L[0]),M[0]){case"A":M[1]=L[1],M[2]=L[2],M[3]=L[3],M[4]=L[4],M[5]=L[5],M[6]=+(L[6]+V),M[7]=+(L[7]+I);break;case"V":M[1]=+L[1]+I;break;case"H":M[1]=+L[1]+V;break;case"R":for(var J,Z=2,z=(J=[V,I].concat(L.slice(1))).length;Z<z;Z++)J[Z]=+J[Z]+V,J[++Z]=+J[Z]+I;N.pop(),N=N.concat(S(J,H));break;case"M":G=+L[1]+V,R=+L[2]+I;break;default:for(var B=1,D=L.length;B<D;B++)M[B]=+L[B]+(B%2?V:I)}else if(L[0]==="R")J=[V,I].concat(L.slice(1)),N.pop(),N=N.concat(S(J,H)),M=["R"].concat(L.slice(-2));else for(var X=0,K=L.length;X<K;X++)M[X]=L[X];switch(M[0]){case"Z":V=G,I=R;break;case"H":V=M[1];break;case"V":I=M[1];break;case"M":G=M[M.length-2],R=M[M.length-1];break;default:V=M[M.length-2],I=M[M.length-1]}}}return N}function E(C,N,V,I,K,fe,re,M,L,H){function O(Ie,$,te){return{x:Ie*Math.cos(te)-$*Math.sin(te),y:Ie*Math.sin(te)+$*Math.cos(te)}}var U,D=Math.PI,X=120*D/180,J=D/180*(+K||0),Z=[],z=(H?(ye=H[0],U=H[1],he=H[2],_e=H[3]):(C=(se=O(C,N,-J)).x,N=se.y,1<(z=(B=(C-(M=(se=O(M,L,-J)).x))/2)*B/(V*V)+(se=(N-(L=se.y))/2)*se/(I*I))&&(V*=z=Math.sqrt(z),I*=z),z=V*V,xe=I*I,he=(fe=(fe===re?-1:1)*Math.sqrt(Math.abs((z*xe-z*se*se-xe*B*B)/(z*se*se+xe*B*B))))*V*se/I+(C+M)/2,_e=fe*-I*B/V+(N+L)/2,ye=Math.asin(((N-_e)/I).toFixed(9)),U=Math.asin(((L-_e)/I).toFixed(9)),(ye=C<he?D-ye:ye)<0&&(ye=2*D+ye),(U=M<he?D-U:U)<0&&(U=2*D+U),re&&U<ye&&(ye-=2*D),!re&&ye<U&&(U-=2*D)),U-ye),B=(Math.abs(z)>X&&(xe=U,se=M,fe=L,U=ye+X*(re&&ye<U?1:-1),Z=E(M=he+V*Math.cos(U),L=_e+I*Math.sin(U),V,I,K,0,re,se,fe,[U,xe,he,_e])),z=U-ye,Math.cos(ye)),D=Math.sin(ye),X=Math.cos(U),K=Math.sin(U),re=Math.tan(z/4),se=4/3*V*re,fe=4/3*I*re,xe=[C,N],he=[C+se*D,N-fe*B],_e=[M+se*K,L-fe*X],ye=[M,L];if(he[0]=2*xe[0]-he[0],he[1]=2*xe[1]-he[1],H)return[he,_e,ye].concat(Z);for(var ue=[],pe=0,ke=(Z=[he,_e,ye].concat(Z).join().split(",")).length;pe<ke;pe++)ue[pe]=pe%2?O(Z[pe-1],Z[pe],J).y:O(Z[pe],Z[pe+1],J).x;return ue}function S(C,N){for(var V=[],I=0,G=C.length;I<G-2*!N;I+=2){var R=[{x:+C[I-2],y:+C[I-1]},{x:+C[I],y:+C[I+1]},{x:+C[I+2],y:+C[I+3]},{x:+C[I+4],y:+C[I+5]}];N?I?G-4===I?R[3]={x:+C[0],y:+C[1]}:G-2===I&&(R[2]={x:+C[0],y:+C[1]},R[3]={x:+C[2],y:+C[3]}):R[0]={x:+C[G-2],y:+C[G-1]}:G-4===I?R[3]=R[2]:I||(R[0]={x:+C[I],y:+C[I+1]}),V.push(["C",(-R[0].x+6*R[1].x+R[2].x)/6,(-R[0].y+6*R[1].y+R[2].y)/6,(R[1].x+6*R[2].x-R[3].x)/6,(R[1].y+6*R[2].y-R[3].y)/6,R[2].x,R[2].y])}return V}function k(C,N,V,I){return[C,N,V,I,V,I]}function T(C,N,V,I,G,R){return[1/3*C+2/3*V,1/3*N+2/3*I,1/3*G+2/3*V,1/3*R+2/3*I,G,R]}function j(C,N,V,I,G,R,q,M,L){for(var H=(L=1<(L=L??1)?1:L<0?0:L)/2,O=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],U=0,J=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0;Z<12;Z++){var B=H*O[Z]+H,z=A(B,C,V,G,q),B=A(B,N,I,R,M);U+=J[Z]*Math.sqrt(z*z+B*B)}return H*U}function A(C,N,V,I,G){return C*(C*(-3*N+9*V-9*I+3*G)+6*N-12*V+6*I)-3*N+3*V}c.default.Font=function(){function C(I){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.parent=I,this.cache={},this.font=void 0}var N,V;return N=C,(V=[{key:"textBounds",value:function(I){var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,H=3<arguments.length?arguments[3]:void 0,q=4<arguments.length?arguments[4]:void 0,M=q&&q.renderer&&q.renderer._pInst||this.parent,L=M._renderer.drawingContext,H=(L.textAlign||i.LEFT,L.textBaseline||i.BASELINE,H||M._renderer._textSize);if(!se){for(var O=[],U=[],J=[],Z=(J[0]=[],[]),z=this._scale(H),B=M._renderer.textLeading(),D=0,X=(this.font.forEachGlyph(I,G,R,H,q,function(he,_e,ye,ue){var pe=he.getMetrics();he.index===0||he.index===10?J[D+=1]=[]:(J[D].push(_e+pe.xMin*z),J[D].push(_e+pe.xMax*z),Z.push(ye+D*B+-pe.yMin*z),Z.push(ye+D*B+-pe.yMax*z))}),0<J[D].length&&(O[D]=Math.min.apply(null,J[D]),U[D]=Math.max.apply(null,J[D])),0),K=0;K<=D;K++){O[K]=Math.min.apply(null,J[K]),U[K]=Math.max.apply(null,J[K]);var re=U[K]-O[K];X<re&&(X=re)}var L=Math.min.apply(null,O),se={x:L,y:R=Math.min.apply(null,Z),h:Math.max.apply(null,Z)-R,w:X,advance:L-G},H=this._handleAlignment(M._renderer,I,se.x,se.y,se.w+se.advance);se.x=H.x,se.y=H.y}return se}},{key:"textToPoints",value:function(I,G,R,q,M){var L=G,H=[],O=I.split(/\r?\n|\r|\n/g);q=q||this.parent._renderer._textSize;for(var U,J,Z,z=0;z<O.length;z++){var B=0;G=L;for(var D=(D=O[z]).replace("	","  "),X=this._getGlyphs(D),K=0;K<X.length;K++){if(J=D,!((Z=X)[U=K].name&&Z[U].name==="space"||J.length===Z.length&&J[U]===" "))for(var re=function(he){for(var _e,ye=[],ue=0;ue<he.length;ue++)he[ue].type==="M"&&(_e&&ye.push(_e),_e=[]),_e.push(function(pe){var ke=[pe.type];return pe.type==="M"||pe.type==="L"?ke.push(pe.x,pe.y):pe.type==="C"?ke.push(pe.x1,pe.y1,pe.x2,pe.y2,pe.x,pe.y):pe.type==="Q"&&ke.push(pe.x1,pe.y1,pe.x,pe.y),ke}(he[ue]));return ye.push(_e),ye}(X[K].getPath(G,R,q).commands),se=0;se<re.length;se++)for(var fe=function(he,_e){for(var _e=function($,te){if(y($)!=="object")$=te;else for(var ne in te)$[ne]===void 0&&($[ne]=te[ne]);return $}(_e,{sampleFactor:.1,simplifyThreshold:0}),ye=x(he,0,1),ue=ye/(ye*_e.sampleFactor),pe=[],ke=0;ke<ye;ke+=ue)pe.push(x(he,ke));return _e.simplifyThreshold&&function(Ie){for(var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,te=0,ne=Ie.length-1;3<Ie.length&&0<=ne;--ne)m(u(Ie,ne-1),u(Ie,ne),u(Ie,ne+1),$)&&(Ie.splice(ne%Ie.length,1),te++)}(pe,_e.simplifyThreshold),pe}(re[se],M),xe=0;xe<fe.length;xe++)fe[xe].x+=B,H.push(fe[xe]);B+=X[K].advanceWidth*this._scale(q)}R+=this.parent._renderer._textLeading}return H}},{key:"_getGlyphs",value:function(I){return this.font.stringToGlyphs(I)}},{key:"_getPath",value:function(I,L,R,q){var M=(q&&q.renderer&&q.renderer._pInst||this.parent)._renderer,L=this._handleAlignment(M,I,L,R);return this.font.getPath(I,L.x,L.y,M._textSize,q)}},{key:"_getPathData",value:function(I,G,R,q){var M=3;return typeof I=="string"&&2<arguments.length?I=this._getPath(I,G,R,q):y(G)==="object"&&(q=G),q&&typeof q.decimals=="number"&&(M=q.decimals),I.toPathData(M)}},{key:"_getSVG",value:function(I,G,R,q){var M=3;return typeof I=="string"&&2<arguments.length?I=this._getPath(I,G,R,q):y(G)==="object"&&(q=G),q&&(typeof q.decimals=="number"&&(M=q.decimals),typeof q.strokeWidth=="number"&&(I.strokeWidth=q.strokeWidth),q.fill!==void 0&&(I.fill=q.fill),q.stroke!==void 0&&(I.stroke=q.stroke)),I.toSVG(M)}},{key:"_renderPath",value:function(H,U,J,q){var M=q&&q.renderer||this.parent._renderer,L=M.drawingContext,H=(y(H)==="object"&&H.commands?H:this._getPath(H,U,J,q)).commands,O=(L.beginPath(),!0),U=!1,J=void 0;try{for(var Z,z=H[Symbol.iterator]();!(O=(Z=z.next()).done);O=!0){var B=Z.value;B.type==="M"?L.moveTo(B.x,B.y):B.type==="L"?L.lineTo(B.x,B.y):B.type==="C"?L.bezierCurveTo(B.x1,B.y1,B.x2,B.y2,B.x,B.y):B.type==="Q"?L.quadraticCurveTo(B.x1,B.y1,B.x,B.y):B.type==="Z"&&L.closePath()}}catch(D){U=!0,J=D}finally{try{O||z.return==null||z.return()}finally{if(U)throw J}}return M._doStroke&&M._strokeSet&&!M._clipping&&L.stroke(),M._doFill&&!M._clipping&&(M._fillSet||M._setFill(i._DEFAULT_TEXT_FILL),L.fill()),this}},{key:"_textWidth",value:function(I,G){return this.font.getAdvanceWidth(I,G)}},{key:"_textAscent",value:function(I){return this.font.ascender*this._scale(I)}},{key:"_textDescent",value:function(I){return-this.font.descender*this._scale(I)}},{key:"_scale",value:function(I){return 1/this.font.unitsPerEm*(I||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(I,G,R,q,M){var L=I._textSize;switch(M===void 0&&(M=this._textWidth(G,L)),I._textAlign){case i.CENTER:R-=M/2;break;case i.RIGHT:R-=M}switch(I._textBaseline){case i.TOP:q+=this._textAscent(L);break;case i.CENTER:q+=this._textAscent(L)/2;break;case i.BOTTOM:q-=this._textDescent(L)}return{x:R,y:q}}}])&&_(N.prototype,V),C}(),t=c.default,l.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],314:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(o,c){return o.push(c),o},t.default.prototype.arrayCopy=function(o,c,i,f,y){var _,u;o=y!==void 0?(u=Math.min(y,o.length),_=f,o.slice(c,u+c)):(u=i!==void 0?(u=i,Math.min(u,o.length)):o.length,i=c,o.slice(_=0,u)),Array.prototype.splice.apply(i,[_,u].concat(o))},t.default.prototype.concat=function(o,c){return o.concat(c)},t.default.prototype.reverse=function(o){return o.reverse()},t.default.prototype.shorten=function(o){return o.pop(),o},t.default.prototype.shuffle=function(o,c){for(var i,f,y=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),_=(o=c||y?o:o.slice()).length;1<_;)i=this.random(0,1)*_|0,f=o[--_],o[_]=o[i],o[i]=f;return o},t.default.prototype.sort=function(o,f){var i=f?o.slice(0,Math.min(f,o.length)):o,f=f?o.slice(Math.min(f,o.length)):[];return(i=typeof i[0]=="string"?i.sort():i.sort(function(y,_){return y-_})).concat(f)},t.default.prototype.splice=function(o,c,i){return Array.prototype.splice.apply(o,[i,0].concat(c)),o},t.default.prototype.subset=function(o,c,i){return i!==void 0?o.slice(c,c+i):o.slice(c,o.length)},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182}],315:[function(t,a,l){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},o.default.prototype.int=function(c){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,i):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(f){return o.default.prototype.int(f,i)}):void 0},o.default.prototype.str=function(c){return c instanceof Array?c.map(o.default.prototype.str):String(c)},o.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(c){return c=o.default.prototype.int(c,10),typeof c=="number"?(c+128)%256-128:c instanceof Array?c.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(o.default.prototype.char):typeof c=="string"?o.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},o.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(c,i){if(i=i??8,c instanceof Array)return c.map(function(y){return o.default.prototype.hex(y,i)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(i);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var f=Number(c).toString(16).toUpperCase();f.length<i;)f="0".concat(f);return f=f.length>=i?f.substring(f.length-i,f.length):f}},o.default.prototype.unhex=function(c){return c instanceof Array?c.map(o.default.prototype.unhex):parseInt("0x".concat(c),16)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.map":164,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.repeat":195}],316:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(u=t("../core/main"))&&u.__esModule?u:{default:u};function c(m,p){return function(g){if(Array.isArray(g))return g}(m)||function(g,x){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]"){var b=[],E=!0,S=!1,k=void 0;try{for(var T,j=g[Symbol.iterator]();!(E=(T=j.next()).done)&&(b.push(T.value),!x||b.length!==x);E=!0);}catch(A){S=!0,k=A}finally{try{E||j.return==null||j.return()}finally{if(S)throw k}}return b}}(m,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(m,p,g){var b=c(m.toString().split("."),2),x=b[0],b=b[1];return g===void 0?(x=x.padStart(p,"0"),b?x+"."+b:x):(x=(m=c(m.toFixed(g).toString().split("."),2))[0],b=m[1],x=x.padStart(p,"0"),b===void 0?x:x+"."+b)}function f(b,p){var g=(b=b.toString()).indexOf("."),x=g!==-1?b.substring(g):"",b=(b=g!==-1?b.substring(0,g):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(p===0)x="";else if(p!==void 0)if(p>x.length)for(var E=p-(x+=g===-1?".":"").length+1,S=0;S<E;S++)x+="0";else x=x.substring(0,p+1);return b+x}function y(m){return 0<parseFloat(m)?"+".concat(m.toString()):m.toString()}function _(m){return 0<=parseFloat(m)?" ".concat(m.toString()):m.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),o.default.prototype.join=function(m,p){return o.default._validateParameters("join",arguments),m.join(p)},o.default.prototype.match=function(m,p){return o.default._validateParameters("match",arguments),m.match(p)},o.default.prototype.matchAll=function(m,p){o.default._validateParameters("matchAll",arguments);for(var g=new RegExp(p,"g"),x=g.exec(m),b=[];x!==null;)b.push(x),x=g.exec(m);return b},o.default.prototype.nf=function(m,p,g){return o.default._validateParameters("nf",arguments),m instanceof Array?m.map(function(x){return i(x,p,g)}):Object.prototype.toString.call(m)==="[object Arguments]"?m.length===3?this.nf(m[0],m[1],m[2]):m.length===2?this.nf(m[0],m[1]):this.nf(m[0]):i(m,p,g)},o.default.prototype.nfc=function(m,p){return o.default._validateParameters("nfc",arguments),m instanceof Array?m.map(function(g){return f(g,p)}):f(m,p)},o.default.prototype.nfp=function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];o.default._validateParameters("nfp",p);var x=o.default.prototype.nf.apply(this,p);return x instanceof Array?x.map(y):y(x)},o.default.prototype.nfs=function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];o.default._validateParameters("nfs",p);var x=o.default.prototype.nf.apply(this,p);return x instanceof Array?x.map(_):_(x)},o.default.prototype.split=function(m,p){return o.default._validateParameters("split",arguments),m.split(p)},o.default.prototype.splitTokens=function(m,p){var g,x;return o.default._validateParameters("splitTokens",arguments),x=p!==void 0?(x=/\]/g.exec(p=p),(g=/\[/g.exec(p))&&x?(p=p.slice(0,x.index)+p.slice(x.index+1),g=/\[/g.exec(p),p=p.slice(0,g.index)+p.slice(g.index+1),new RegExp("[\\[".concat(p,"\\]]"),"g")):x?(p=p.slice(0,x.index)+p.slice(x.index+1),new RegExp("[".concat(p,"\\]]"),"g")):g?(p=p.slice(0,g.index)+p.slice(g.index+1),new RegExp("[".concat(p,"\\[]"),"g")):new RegExp("[".concat(p,"]"),"g")):/\s/g,m.split(x).filter(function(b){return b})},o.default.prototype.trim=function(m){return o.default._validateParameters("trim",arguments),m instanceof Array?m.map(this.trim):m.trim()};var u=o.default;l.default=u},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.pad-start":194,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],317:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,l.default=t},{"../core/main":275}],318:[function(t,a,l){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}function c(m){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(u=t("../core/main"))&&u.__esModule?u:{default:u},f=(t("./p5.Geometry"),function(m){if(m&&m.__esModule)return m;if(m===null||c(m)!=="object"&&typeof m!="function")return{default:m};var p=y();if(p&&p.has(m))return p.get(m);var g,x={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in m){var E;Object.prototype.hasOwnProperty.call(m,g)&&((E=b?Object.getOwnPropertyDescriptor(m,g):null)&&(E.get||E.set)?Object.defineProperty(x,g,E):x[g]=m[g])}return x.default=m,p&&p.set(m,x),x}(t("../core/constants")));function y(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,y=function(){return m},m)}i.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},i.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},i.default.prototype.buildGeometry=function(m){return this._renderer.buildGeometry(m)},i.default.prototype.freeGeometry=function(m){this._renderer._freeBuffers(m.gid)},i.default.prototype.plane=function(m,p,g,x){this._assert3d("plane"),i.default._validateParameters("plane",arguments),m===void 0&&(m=50),p===void 0&&(p=m),x===void 0&&(x=1);var b,E="plane|".concat(g=g===void 0?1:g,"|").concat(x);return this._renderer.geometryInHash(E)||((b=new i.default.Geometry(g,x,function(){for(var S,k,T=0;T<=this.detailY;T++)for(var j=T/this.detailY,A=0;A<=this.detailX;A++)S=A/this.detailX,k=new i.default.Vector(S-.5,j-.5,0),this.vertices.push(k),this.uvs.push(S,j)})).computeFaces().computeNormals(),g<=1&&x<=1?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(E,b)),this._renderer.drawBuffersScaled(E,m,p,1),this},i.default.prototype.box=function(m,p,g,x,b){this._assert3d("box"),i.default._validateParameters("box",arguments),m===void 0&&(m=50),p===void 0&&(p=m),g===void 0&&(g=p);var E,S=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,S=(b===void 0&&(b=S?1:4),"box|".concat(x=x===void 0?S?1:4:x,"|").concat(b));return this._renderer.geometryInHash(S)||((E=new i.default.Geometry(x,b,function(){var k=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(T,j){for(var j=4*j,A=0;A<4;A++){var C=T[A],C=new i.default.Vector((2*(1&C)-1)/2,((2&C)-1)/2,((4&C)/2-1)/2);k.vertices.push(C),k.uvs.push(1&A,(2&A)/2)}k.faces.push([j,1+j,2+j]),k.faces.push([2+j,1+j,3+j])})})).computeNormals(),x<=4&&b<=4?E._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(S,E)),this._renderer.drawBuffersScaled(S,m,p,g),this},i.default.prototype.sphere=function(m,p,g){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),this.ellipsoid(m=m===void 0?50:m,m,m,p=p===void 0?24:p,g=g===void 0?16:g),this};function _(m,p,g,x,b,E,S){m=m<=0?1:m,p=p<0?0:p,g=g<=0?m:g,x=x<3?3:x;for(var k,T,j=(E=E===void 0||E)?-2:0,A=(b=b<1?1:b)+((S=S===void 0?p!==0:S)?2:0),C=Math.atan2(m-p,g),N=Math.sin(C),V=Math.cos(C),I=j;I<=A;++I){var G=I/b,R=g*G,q=void 0,q=I<0?(G=R=0,m):b<I?(R=g,G=1,p):m+(p-m)*G;for(I!==-2&&I!==b+2||(q=0),R-=g/2,k=0;k<x;++k){var M=k/(x-1),H=2*Math.PI*M,L=Math.sin(H),H=Math.cos(H),O=(this.vertices.push(new i.default.Vector(L*q,R,H*q)),void 0),O=I<0?new i.default.Vector(0,-1,0):b<I&&p?new i.default.Vector(0,1,0):new i.default.Vector(L*V,N,H*V);this.vertexNormals.push(O),this.uvs.push(M,G)}}var U=0;if(E){for(T=0;T<x;++T)this.faces.push([U+T,U+x+(T+1)%x,U+x+T]);U+=2*x}for(I=0;I<b;++I){for(k=0;k<x;++k){var J=(k+1)%x;this.faces.push([U+k,U+J,U+x+J]),this.faces.push([U+k,U+x+J,U+x+k])}U+=x}if(S)for(U+=x,k=0;k<x;++k)this.faces.push([U+k,U+(k+1)%x,U+x])}i.default.prototype.cylinder=function(m,p,g,x,b,E){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),m===void 0&&(m=50),p===void 0&&(p=m),x===void 0&&(x=1),E===void 0&&(E=!0),b===void 0&&(b=!0);var S,k="cylinder|".concat(g=g===void 0?24:g,"|").concat(x,"|").concat(b,"|").concat(E);return this._renderer.geometryInHash(k)||(S=new i.default.Geometry(g,x),_.call(S,1,1,1,g,x,b,E),g<=24&&x<=16?S._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(k,S)),this._renderer.drawBuffersScaled(k,m,p,m),this},i.default.prototype.cone=function(m,p,g,x,b){this._assert3d("cone"),i.default._validateParameters("cone",arguments),m===void 0&&(m=50),p===void 0&&(p=m),x===void 0&&(x=1),b===void 0&&(b=!0);var E,S="cone|".concat(g=g===void 0?24:g,"|").concat(x,"|").concat(b);return this._renderer.geometryInHash(S)||(E=new i.default.Geometry(g,x),_.call(E,1,0,1,g,x,b,!1),g<=24&&x<=16?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,E)),this._renderer.drawBuffersScaled(S,m,p,m),this},i.default.prototype.ellipsoid=function(m,p,g,x,b){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),m===void 0&&(m=50),p===void 0&&(p=m),g===void 0&&(g=m),b===void 0&&(b=16);var E,S="ellipsoid|".concat(x=x===void 0?24:x,"|").concat(b);return this._renderer.geometryInHash(S)||((E=new i.default.Geometry(x,b,function(){for(var k=0;k<=this.detailY;k++)for(var T=k/this.detailY,j=Math.PI*T-Math.PI/2,A=Math.cos(j),C=Math.sin(j),N=0;N<=this.detailX;N++){var V=N/this.detailX,G=2*Math.PI*V,I=Math.cos(G),G=Math.sin(G),G=new i.default.Vector(A*G,C,A*I);this.vertices.push(G),this.vertexNormals.push(G),this.uvs.push(V,T)}})).computeFaces(),x<=24&&b<=24?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(S,E)),this._renderer.drawBuffersScaled(S,m,p,g),this},i.default.prototype.torus=function(m,S,g,x){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),m===void 0)m=50;else if(!m)return;if(S===void 0)S=10;else if(!S)return;g===void 0&&(g=24),x===void 0&&(x=16);var b,E=(S/m).toPrecision(4),S="torus|".concat(E,"|").concat(g,"|").concat(x);return this._renderer.geometryInHash(S)||((b=new i.default.Geometry(g,x,function(){for(var k=0;k<=this.detailY;k++)for(var T=k/this.detailY,j=2*Math.PI*T,A=Math.cos(j),C=Math.sin(j),N=1+E*A,V=0;V<=this.detailX;V++){var I=V/this.detailX,G=2*Math.PI*I,q=Math.cos(G),G=Math.sin(G),R=new i.default.Vector(N*q,N*G,E*C),q=new i.default.Vector(A*q,A*G,C);this.vertices.push(R),this.vertexNormals.push(q),this.uvs.push(I,T)}})).computeFaces(),g<=24&&x<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,b)),this._renderer.drawBuffersScaled(S,m,m,m),this},i.default.RendererGL.prototype.point=function(m,p,g){var x=[];return x.push(new i.default.Vector(m,p,g=g===void 0?0:g)),this._drawPoints(x,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(S){var p=S[0],g=S[1],x=S[2],b=S[3],E=S[4],S=S[5],k=(this.geometryInHash("tri")||((k=new i.default.Geometry(1,1,function(){var A=[];A.push(new i.default.Vector(0,0,0)),A.push(new i.default.Vector(1,0,0)),A.push(new i.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=A,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),k.computeNormals(),this.createBuffers("tri",k)),this.uMVMatrix.copy());try{var T=Math.sign(p*b-x*g+x*S-E*b+E*g-p*S),j=new i.default.Matrix([x-p,b-g,0,0,E-p,S-g,0,0,0,0,T,0,p,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=j,this.drawBuffers("tri")}finally{this.uMVMatrix=k}return this},i.default.RendererGL.prototype.ellipse=function(m){this.arc(m[0],m[1],m[2],m[3],0,f.TWO_PI,f.OPEN,m[4])},i.default.RendererGL.prototype.arc=function(m){var p,g=arguments[1],x=arguments[2],b=arguments[3],E=arguments[4],S=arguments[5],k=arguments[6],T=arguments[7]||25,j=(Math.abs(S-E)>=f.TWO_PI?"".concat(A="ellipse","|"):"".concat(A="arc","|").concat(E,"|").concat(S,"|").concat(k,"|")).concat(T,"|"),A=(this.geometryInHash(j)||((p=new i.default.Geometry(T,1,function(){if(E.toFixed(10)!==S.toFixed(10)){k!==f.PIE&&k!==void 0||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var C=0;C<=T;C++){var V=(S-E)*(C/T)+E,N=.5+Math.cos(V)/2,V=.5+Math.sin(V)/2;this.vertices.push(new i.default.Vector(N,V,0)),this.uvs.push([N,V]),C<T-1&&(this.faces.push([0,C+1,C+2]),this.edges.push([C+1,C+2]))}switch(k){case f.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case f.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case f.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),T<=50?p._edgesToVertices(p):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(A," with more than 50 detail")),this.createBuffers(j,p)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,g,0]),this.uMVMatrix.scale(x,b,1),this.drawBuffers(j)}finally{this.uMVMatrix=A}return this},i.default.RendererGL.prototype.rect=function(m){var p=m[0],g=m[1],x=m[2],b=m[3];if(m[4]===void 0){var k=this._pInst._glAttributes.perPixelLighting,E=m[4]||(k?1:24),S=m[5]||(k?1:16),k="rect|".concat(E,"|").concat(S),T=(this.geometryInHash(k)||((T=new i.default.Geometry(E,S,function(){for(var O=0;O<=this.detailY;O++)for(var U=O/this.detailY,J=0;J<=this.detailX;J++){var Z=J/this.detailX,z=new i.default.Vector(Z,U,0);this.vertices.push(z),this.uvs.push(Z,U)}0<E&&0<S&&(this.edges=[[0,E],[E,(E+1)*(S+1)-1],[(E+1)*(S+1)-1,(E+1)*S],[(E+1)*S,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(k,T)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([p,g,0]),this.uMVMatrix.scale(x,b,1),this.drawBuffers(k)}finally{this.uMVMatrix=T}}else{var k=m[4],T=m[5]===void 0?k:m[5],j=m[6]===void 0?T:m[6],m=m[7]===void 0?j:m[7],G=x,A=b,V=((G+=p)<p&&(V=p,p=G,G=V),(A+=g)<g&&(V=g,g=A,A=V),Math.min((G-p)/2,(A-g)/2)),C=(V<k&&(k=V),V<T&&(T=V),V<j&&(j=V),V<m&&(m=V),p),N=g,V=G,p=A,I=(this.beginShape(),T!==0?(this.vertex(V-T,N),this.quadraticVertex(V,N,V,N+T)):this.vertex(V,N),j!==0?(this.vertex(V,p-j),this.quadraticVertex(V,p,V-j,p)):this.vertex(V,p),m!==0?(this.vertex(C+m,p),this.quadraticVertex(C,p,C,p-m)):this.vertex(C,p),k!==0?(this.vertex(C,N+k),this.quadraticVertex(C,N,C+k,N)):this.vertex(C,N),!(this.immediateMode.geometry.uvs.length=0)),g=!1,G=void 0;try{for(var R,q=this.immediateMode.geometry.vertices[Symbol.iterator]();!(I=(R=q.next()).done);I=!0){var M=R.value,L=(M.x-C)/x,H=(M.y-N)/b;this.immediateMode.geometry.uvs.push(L,H)}}catch(B){g=!0,G=B}finally{try{I||q.return==null||q.return()}finally{if(g)throw G}}this.endShape(f.CLOSE)}return this},i.default.RendererGL.prototype.quad=function(m,p,g,x,b,E,S,k,T,j,A,C,N,V){N===void 0&&(N=2),V===void 0&&(V=2);var I="quad|".concat(m,"|").concat(p,"|").concat(g,"|").concat(x,"|").concat(b,"|").concat(E,"|").concat(S,"|").concat(k,"|").concat(T,"|").concat(j,"|").concat(A,"|").concat(C,"|").concat(N,"|").concat(V);if(!this.geometryInHash(I)){var G=new i.default.Geometry(N,V,function(){for(var J=1/(this.detailX-1),Z=1/(this.detailY-1),z=0;z<this.detailY;z++)for(var B=0;B<this.detailX;B++){var D=B*J,X=z*Z;this.vertices.push(new i.default.Vector((1-D)*((1-X)*m+X*j)+D*((1-X)*x+X*S),(1-D)*((1-X)*p+X*A)+D*((1-X)*b+X*k),(1-D)*((1-X)*g+X*C)+D*((1-X)*E+X*T))),this.uvs.push([D,X])}});G.faces=[];for(var R=0;R<V-1;R++)for(var q=0;q<N-1;q++){var M=q+R*N,L=q+1+(R+1)*N,H=q+(R+1)*N;G.faces.push([M,q+1+R*N,L]),G.faces.push([M,L,H])}G.computeNormals();for(var O=[G.edges.length=0,2,3,1],U=0;U<O.length;U++)G.edges.push([O[U],O[(U+1)%O.length]]);G._edgesToVertices(),this.createBuffers(I,G)}return this.drawBuffers(I),this},i.default.RendererGL.prototype.bezier=function(m,p,g,x,b,E,S,k,T,j,A,C){arguments.length===8&&(A=k,j=S,k=E,S=b,b=x,x=g,g=E=T=C=0);var N=this._pInst._bezierDetail||20;this.beginShape();for(var V=0;V<=N;V++){var I=Math.pow(1-V/N,3),G=V/N*3*Math.pow(1-V/N,2),R=3*Math.pow(V/N,2)*(1-V/N),q=Math.pow(V/N,3);this.vertex(m*I+x*G+S*R+j*q,p*I+b*G+k*R+A*q,g*I+E*G+T*R+C*q)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(m,p,g,x,b,E,S,k,T,j,A,C){arguments.length===8&&(j=S,A=k,S=b,k=x,b=x=g,g=E=T=C=0);var N=this._pInst._curveDetail;this.beginShape();for(var V=0;V<=N;V++){var I=.5*Math.pow(V/N,3),G=.5*Math.pow(V/N,2),R=V/N*.5;this.vertex(I*(3*x-m-3*S+j)+G*(2*m-5*x+4*S-j)+R*(-m+S)+2*x*.5,I*(3*b-p-3*k+A)+G*(2*p-5*b+4*k-A)+R*(-p+k)+2*b*.5,I*(3*E-g-3*T+C)+G*(2*g-5*E+4*T-C)+R*(-g+T)+2*E*.5)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(f.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(f.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var m,p,g,x,b,E,S=[],k=[],T=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,A=0,C=1,N=0;A<1;){if(E=parseFloat(A.toFixed(6)),this._lookUpTableBezier[N]=this._bezierCoefficients(E),C.toFixed(6)===j.toFixed(6)){E=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++N,this._lookUpTableBezier[N]=this._bezierCoefficients(E);break}A+=j,C-=j,++N}}for(var V=this._lookUpTableBezier.length,I=[],G=0;G<4;G++)I.push([]);I[0]=this.immediateMode.geometry.vertexColors.slice(-4),I[3]=this.curFillColor.slice();var R=[];for(G=0;G<4;G++)R.push([]);if(R[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),R[3]=this.curStrokeColor.slice(),T===6){this.isBezier=!0;var S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],k=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],q=Math.hypot(S[0]-S[1],k[0]-k[1]),L=Math.hypot(S[1]-S[2],k[1]-k[2]),M=Math.hypot(S[2]-S[3],k[2]-k[3]),L=q+L+M;for(q/=L,M/=L,b=0;b<4;b++)I[1].push(I[0][b]*(1-q)+I[3][b]*q),I[2].push(I[0][b]*M+I[3][b]*(1-M)),R[1].push(R[0][b]*(1-q)+R[3][b]*q),R[2].push(R[0][b]*M+R[3][b]*(1-M));for(x=0;x<V;x++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],G=m=p=0;G<4;G++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[x][G]*I[G][b],this.curStrokeColor[b]+=this._lookUpTableBezier[x][G]*R[G][b];m+=S[G]*this._lookUpTableBezier[x][G],p+=k[G]*this._lookUpTableBezier[x][G]}this.vertex(m,p)}this.curFillColor=I[3],this.curStrokeColor=R[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(T===9){this.isBezier=!0,S=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],k=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var H=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],O=Math.hypot(S[0]-S[1],k[0]-k[1],H[0]-H[1]),L=Math.hypot(S[1]-S[2],k[1]-k[2],H[1]-H[2]),U=Math.hypot(S[2]-S[3],k[2]-k[3],H[2]-H[3]),T=O+L+U;for(O/=T,U/=T,b=0;b<4;b++)I[1].push(I[0][b]*(1-O)+I[3][b]*O),I[2].push(I[0][b]*U+I[3][b]*(1-U)),R[1].push(R[0][b]*(1-O)+R[3][b]*O),R[2].push(R[0][b]*U+R[3][b]*(1-U));for(x=0;x<V;x++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],G=m=p=g=0;G<4;G++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[x][G]*I[G][b],this.curStrokeColor[b]+=this._lookUpTableBezier[x][G]*R[G][b];m+=S[G]*this._lookUpTableBezier[x][G],p+=k[G]*this._lookUpTableBezier[x][G],g+=H[G]*this._lookUpTableBezier[x][G]}this.vertex(m,p,g)}this.curFillColor=I[3],this.curStrokeColor=R[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var m,p,g,x,b,E,S=[],k=[],T=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var j=1/this._lutQuadraticDetail,A=0,C=1,N=0;A<1;){if(E=parseFloat(A.toFixed(6)),this._lookUpTableQuadratic[N]=this._quadraticCoefficients(E),C.toFixed(6)===j.toFixed(6)){E=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++N,this._lookUpTableQuadratic[N]=this._quadraticCoefficients(E);break}A+=j,C-=j,++N}}for(var V=this._lookUpTableQuadratic.length,I=[],G=0;G<3;G++)I.push([]);I[0]=this.immediateMode.geometry.vertexColors.slice(-4),I[2]=this.curFillColor.slice();var R=[];for(G=0;G<3;G++)R.push([]);if(R[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),R[2]=this.curStrokeColor.slice(),T===4){this.isQuadratic=!0;var S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],k=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],q=Math.hypot(S[0]-S[1],k[0]-k[1]);for(q/=q+Math.hypot(S[1]-S[2],k[1]-k[2]),b=0;b<4;b++)I[1].push(I[0][b]*(1-q)+I[2][b]*q),R[1].push(R[0][b]*(1-q)+R[2][b]*q);for(x=0;x<V;x++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],G=m=p=0;G<3;G++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[x][G]*I[G][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[x][G]*R[G][b];m+=S[G]*this._lookUpTableQuadratic[x][G],p+=k[G]*this._lookUpTableQuadratic[x][G]}this.vertex(m,p)}this.curFillColor=I[2],this.curStrokeColor=R[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(T===6){this.isQuadratic=!0,S=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],k=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var M=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],L=Math.hypot(S[0]-S[1],k[0]-k[1],M[0]-M[1]);for(L/=L+Math.hypot(S[1]-S[2],k[1]-k[2],M[1]-M[2]),b=0;b<4;b++)I[1].push(I[0][b]*(1-L)+I[2][b]*L),R[1].push(R[0][b]*(1-L)+R[2][b]*L);for(x=0;x<V;x++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],G=m=p=g=0;G<3;G++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[x][G]*I[G][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[x][G]*R[G][b];m+=S[G]*this._lookUpTableQuadratic[x][G],p+=k[G]*this._lookUpTableQuadratic[x][G],g+=M[G]*this._lookUpTableQuadratic[x][G]}this.vertex(m,p,g)}this.curFillColor=I[2],this.curStrokeColor=R[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var m,p,g,x,b,E,S=[],k=[],T=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,A=0,C=1,N=0;A<1;){if(E=parseFloat(A.toFixed(6)),this._lookUpTableBezier[N]=this._bezierCoefficients(E),C.toFixed(6)===j.toFixed(6)){E=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++N,this._lookUpTableBezier[N]=this._bezierCoefficients(E);break}A+=j,C-=j,++N}}var V=this._lookUpTableBezier.length;if(T===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),k=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<V;b++)p=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],g=k[0]*this._lookUpTableBezier[b][0]+k[1]*this._lookUpTableBezier[b][1]+k[2]*this._lookUpTableBezier[b][2]+k[3]*this._lookUpTableBezier[b][3],this.vertex(p,g);for(b=0;b<T;b++)this.immediateMode._curveVertex.shift()}}else if(T===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,S=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),k=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),m=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<V;b++)p=S[0]*this._lookUpTableBezier[b][0]+S[1]*this._lookUpTableBezier[b][1]+S[2]*this._lookUpTableBezier[b][2]+S[3]*this._lookUpTableBezier[b][3],g=k[0]*this._lookUpTableBezier[b][0]+k[1]*this._lookUpTableBezier[b][1]+k[2]*this._lookUpTableBezier[b][2]+k[3]*this._lookUpTableBezier[b][3],x=m[0]*this._lookUpTableBezier[b][0]+m[1]*this._lookUpTableBezier[b][1]+m[2]*this._lookUpTableBezier[b][2]+m[3]*this._lookUpTableBezier[b][3],this.vertex(p,g,x);for(b=0;b<T;b++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(m,C,g,N,b,E,S,k,T){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(m),this._pInst.textureMode(f.NORMAL);var j=0,A=(C<=m.width&&(j=C/m.width),1),C=(C+N<=m.width&&(A=(C+N)/m.width),0),N=(g<=m.height&&(C=g/m.height),1);g+b<=m.height&&(N=(g+b)/m.height),this.beginShape(),this.vertex(E,S,0,j,C),this.vertex(E+k,S,0,A,C),this.vertex(E+k,S+T,0,A,N),this.vertex(E,S+T,0,j,N),this.endShape(f.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(f.REMOVE)};var u=i.default;l.default=u},{"../core/constants":264,"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],319:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=y();if(g&&g.has(p))return g.get(p);var x,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in p){var S;Object.prototype.hasOwnProperty.call(p,x)&&((S=E?Object.getOwnPropertyDescriptor(p,x):null)&&(S.get||S.set)?Object.defineProperty(b,x,S):b[x]=p[x])}return b.default=p,g&&g.set(p,b),b}(t("../core/constants"));function y(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,y=function(){return p},p)}function _(p){return function(g){if(Array.isArray(g)){for(var x=0,b=new Array(g.length);x<g.length;x++)b[x]=g[x];return b}}(p)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(p,g){for(var x=0;x<g.length;x++){var b=g[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}var m=function(){function p(b){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");(this.renderer=b)._pInst.push(),this.identityMatrix=new i.default.Matrix,b.uMVMatrix=new i.default.Matrix,this.geometry=new i.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(p.nextGeometryId),p.nextGeometryId++,this.hasTransform=!1}var g,x;return g=p,(x=[{key:"transformVertices",value:function(b){var E=this;return this.hasTransform?b.map(function(S){return E.renderer.uMVMatrix.multiplyPoint(S)}):b}},{key:"transformNormals",value:function(b){var E=this;return this.hasTransform?b.map(function(S){return E.renderer.uNMatrix.multiplyVec3(S)}):b}},{key:"addGeometry",value:function(b){for(var E,S=this,k=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(j,A){return j===S.identityMatrix.mat4[A]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),T=((E=this.geometry.vertices).push.apply(E,_(this.transformVertices(b.vertices))),(E=this.geometry.vertexNormals).push.apply(E,_(this.transformNormals(b.vertexNormals))),(E=this.geometry.uvs).push.apply(E,_(b.uvs)),this.renderer._doFill&&(E=this.geometry.faces).push.apply(E,_(b.faces.map(function(j){return j.map(function(A){return A+k})}))),this.renderer._doStroke&&(E=this.geometry.edges).push.apply(E,_(b.edges.map(function(j){return j.map(function(A){return A+k})}))),_(b.vertexColors));T.length<4*b.vertices.length;)T.push.apply(T,_(this.renderer.curFillColor));(E=this.geometry.vertexColors).push.apply(E,_(T))}},{key:"addImmediate",value:function(){var b=this.renderer.immediateMode.geometry,E=this.renderer.immediateMode.shapeMode,S=[];if(this.renderer._doFill)if(E===f.TRIANGLE_STRIP||E===f.QUAD_STRIP)for(var k=2;k<b.vertices.length;k++)k%2==0?S.push([k,k-1,k-2]):S.push([k,k-2,k-1]);else if(E===f.TRIANGLE_FAN)for(var T=2;T<b.vertices.length;T++)S.push([0,T-1,T]);else for(var j=0;j<b.vertices.length;j+=3)S.push([j,j+1,j+2]);this.addGeometry(Object.assign({},b,{faces:S}))}},{key:"addRetained",value:function(b){this.addGeometry(b.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&u(g.prototype,x),p}();m.nextGeometryId=0,l.default=m},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],320:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(_=t("../core/main"))&&_.__esModule?_:{default:_},i=function(u){if(u&&u.__esModule)return u;if(u===null||y(u)!=="object"&&typeof u!="function")return{default:u};var m=f();if(m&&m.has(u))return m.get(u);var p,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var b;Object.prototype.hasOwnProperty.call(u,p)&&((b=x?Object.getOwnPropertyDescriptor(u,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=u[p])}return g.default=u,m&&m.set(u,g),g}(t("../core/constants"));function f(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,f=function(){return u},u)}function y(u){return(y=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}c.default.prototype.orbitControl=function(u,m,p,T){var x=this,b=(this._assert3d("orbitControl"),c.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);u===void 0&&(u=1),m===void 0&&(m=u),p===void 0&&(p=1),y(T)!=="object"&&(T={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var A=T.disableTouchActions;this.touchActionsDisabled===!0||A!==void 0&&!A||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var E,S,k,A=T.freeRotation,T=A!==void 0&&A,j=[],A=(this.touches.forEach(function(q){x._renderer.prevTouches.forEach(function(M){q.id===M.id&&(M={x:q.x,y:q.y,px:M.x,py:M.y},j.push(M))})}),this._renderer.prevTouches=this.touches,0),C=0,N=0,V=0,I=0,G=this.height<this.width?this.height:this.width,R=!1;return 0<j.length?(R=0<j[0].x&&j[0].x<this.width&&0<j[0].y&&j[0].y<this.height,j.length===1?(C=-u*((E=j[0]).x-E.px)/G,N=m*(E.y-E.py)/G):(E=j[0],S=j[1],A=-(Math.hypot(E.x-S.x,E.y-S.y)-Math.hypot(E.px-S.px,E.py-S.py))*p*4e-4,V=.5*(E.x+S.x)-.5*(E.px+S.px),I=.5*(E.y+S.y)-.5*(E.py+S.py)),0<this.touches.length?R&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(R=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(A=Math.sign(this._mouseWheelDeltaY)*p,A*=.01,this._mouseWheelDeltaY=0,R&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(C=-u*this.movedX/G,N=m*this.movedY/G):this.mouseButton===this.RIGHT&&(V=this.movedX,I=this.movedY*b.yScale),R&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),A!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=A),.001<Math.abs(this._renderer.zoomVelocity)?(T?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,C===0&&N===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*C,.6*N),1e-6<this._renderer.rotateVelocity.magSq()?(T?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),V===0&&I===0||!this._renderer.executeRotateAndMove||(E=2*V/this.width,S=2*-I/this.height,this._renderer.moveVelocity.add(.15*E,.15*S)),1e-6<this._renderer.moveVelocity.magSq()?(p=b._getLocalAxes(),u=b.eyeX-b.centerX,m=b.eyeY-b.centerY,G=b.eyeZ-b.centerZ,R=Math.sqrt(u*u+m*m+G*G),A=new c.default.Vector(b.centerX,b.centerY,b.centerZ),A=b.cameraMatrix.multiplyPoint(A),(A=this._renderer.uPMatrix.multiplyAndNormalizePoint(A)).x-=this._renderer.moveVelocity.x,A.y-=this._renderer.moveVelocity.y,N=(C=this._renderer.uPMatrix.mat4)[15]===0?(k=(C[8]+A.x)/C[0]*R,(C[9]+A.y)/C[5]*R):(k=(A.x-C[12])/C[0],(A.y-C[13])/C[5]),b.setPosition(b.eyeX+k*p.x[0]+N*p.y[0],b.eyeY+k*p.x[1]+N*p.y[1],b.eyeZ+k*p.x[2]+N*p.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},c.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var u=arguments.length,m=new Array(u),p=0;p<u;p++)m[p]=arguments[p];c.default._validateParameters("debugMode",m);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);m[0]===i.GRID?this.registerMethod("post",this._grid.call(this,m[1],m[2],m[3],m[4],m[5])):m[0]===i.AXES?this.registerMethod("post",this._axesIcon.call(this,m[1],m[2],m[3],m[4])):(this.registerMethod("post",this._grid.call(this,m[0],m[1],m[2],m[3],m[4])),this.registerMethod("post",this._axesIcon.call(this,m[5],m[6],m[7],m[8])))},c.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1)},c.default.prototype._grid=function(u,m,p,g,x){u===void 0&&(u=this.width/2),m===void 0&&(m=Math.round(u/30)<4?4:Math.round(u/30)),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0);var b=u/m,E=u/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var S=0;S<=m;S++)this.beginShape(this.LINES),this.vertex(-E+p,g,S*b-E+x),this.vertex(E+p,g,S*b-E+x),this.endShape();for(var k=0;k<=m;k++)this.beginShape(this.LINES),this.vertex(k*b-E+p,g,-E+x),this.vertex(k*b-E+p,g,E+x),this.endShape();this.pop()}},c.default.prototype._axesIcon=function(u,m,p,g){return u===void 0&&(u=40<this.width/20?this.width/20:40),m===void 0&&(m=-this.width/4),p===void 0&&(p=m),g===void 0&&(g=m),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(m,p,g),this.vertex(m+u,p,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(m,p,g),this.vertex(m,p+u,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(m,p,g),this.vertex(m,p,g+u),this.endShape(),this.pop()}};var _=c.default;l.default=_},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],321:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.ambientLight=function(c,i,f,y){this._assert3d("ambientLight"),o.default._validateParameters("ambientLight",arguments);var _=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(_._array[0],_._array[1],_._array[2]),this._renderer._enableLighting=!0,this},o.default.prototype.specularColor=function(c,i,f){this._assert3d("specularColor"),o.default._validateParameters("specularColor",arguments);var y=this.color.apply(this,arguments);return this._renderer.specularColors=[y._array[0],y._array[1],y._array[2]],this},o.default.prototype.directionalLight=function(c,x,g,y,_,u){this._assert3d("directionalLight"),o.default._validateParameters("directionalLight",arguments),c=c instanceof o.default.Color?c:this.color(c,x,g);var m,p,x=arguments[arguments.length-1],g=typeof x=="number"?(m=arguments[arguments.length-3],p=arguments[arguments.length-2],arguments[arguments.length-1]):(m=x.x,p=x.y,x.z),x=Math.sqrt(m*m+p*p+g*g);return this._renderer.directionalLightDirections.push(m/x,p/x,g/x),this._renderer.directionalLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.pointLight=function(c,g,x,y,_,u){this._assert3d("pointLight"),o.default._validateParameters("pointLight",arguments),c=c instanceof o.default.Color?c:this.color(c,g,x);var m,p,g=arguments[arguments.length-1],x=typeof g=="number"?(m=arguments[arguments.length-3],p=arguments[arguments.length-2],arguments[arguments.length-1]):(m=g.x,p=g.y,g.z);return this._renderer.pointLightPositions.push(m,p,x),this._renderer.pointLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.imageLight=function(c){this._renderer.activeImageLight=c,this._renderer._enableLighting=!0},o.default.prototype.lights=function(){this._assert3d("lights");var c=this.color("rgb(128,128,128)");return this.ambientLight(c),this.directionalLight(c,0,0,-1),this},o.default.prototype.lightFalloff=function(c,i,f){return this._assert3d("lightFalloff"),o.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),i<0&&(i=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),f<0&&(f=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&i===0&&f===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=i,this._renderer.quadraticAttenuation=f,this},o.default.prototype.spotLight=function(c,i,f,y,_,u,m,p,g,x,b){this._assert3d("spotLight"),o.default._validateParameters("spotLight",arguments);var E,S,k,T=arguments.length;switch(T){case 11:case 10:E=this.color(c,i,f),S=new o.default.Vector(y,_,u),k=new o.default.Vector(m,p,g);break;case 9:c instanceof o.default.Color?(E=c,S=new o.default.Vector(i,f,y),k=new o.default.Vector(_,u,m),x=p,b=g):y instanceof o.default.Vector?(E=this.color(c,i,f),S=y,k=new o.default.Vector(_,u,m),x=p,b=g):m instanceof o.default.Vector?(E=this.color(c,i,f),S=new o.default.Vector(y,_,u),k=m,x=p,b=g):(E=this.color(c,i,f),S=new o.default.Vector(y,_,u),k=new o.default.Vector(m,p,g));break;case 8:x=(k=c instanceof o.default.Color?(E=c,S=new o.default.Vector(i,f,y),new o.default.Vector(_,u,m)):y instanceof o.default.Vector?(E=this.color(c,i,f),S=y,new o.default.Vector(_,u,m)):(E=this.color(c,i,f),S=new o.default.Vector(y,_,u),m),p);break;case 7:c instanceof o.default.Color&&i instanceof o.default.Vector?(E=c,S=i,k=new o.default.Vector(f,y,_),x=u,b=m):c instanceof o.default.Color&&_ instanceof o.default.Vector?(E=c,S=new o.default.Vector(i,f,y),k=_,x=u,b=m):y instanceof o.default.Vector&&_ instanceof o.default.Vector?(E=this.color(c,i,f),S=y,k=_,x=u,b=m):k=c instanceof o.default.Color?(E=c,S=new o.default.Vector(i,f,y),new o.default.Vector(_,u,m)):y instanceof o.default.Vector?(E=this.color(c,i,f),S=y,new o.default.Vector(_,u,m)):(E=this.color(c,i,f),S=new o.default.Vector(y,_,u),m);break;case 6:y instanceof o.default.Vector&&_ instanceof o.default.Vector?(E=this.color(c,i,f),S=y,k=_,x=u):c instanceof o.default.Color&&_ instanceof o.default.Vector?(E=c,S=new o.default.Vector(i,f,y),k=_,x=u):c instanceof o.default.Color&&i instanceof o.default.Vector&&(E=c,S=i,k=new o.default.Vector(f,y,_),x=u);break;case 5:c instanceof o.default.Color&&i instanceof o.default.Vector&&f instanceof o.default.Vector?(E=c,S=i,k=f,x=y,b=_):y instanceof o.default.Vector&&_ instanceof o.default.Vector?(E=this.color(c,i,f),S=y,k=_):c instanceof o.default.Color&&_ instanceof o.default.Vector?(E=c,S=new o.default.Vector(i,f,y),k=_):c instanceof o.default.Color&&i instanceof o.default.Vector&&(E=c,S=i,k=new o.default.Vector(f,y,_));break;case 4:E=c,S=i,k=f,x=y;break;case 3:E=c,S=i,k=f;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(T<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(E._array[0],E._array[1],E._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(S.x,S.y,S.z),k.normalize(),this._renderer.spotLightDirections.push(k.x,k.y,k.z),x===void 0&&(x=Math.PI/3),b!==void 0&&b<1?(b=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):b===void 0&&(b=100),x=this._renderer._pInst._toRadians(x),this._renderer.spotLightAngle.push(Math.cos(x)),this._renderer.spotLightConc.push(b),this._renderer._enableLighting=!0,this},o.default.prototype.noLights=function(){this._assert3d("noLights");for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("noLights",i),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},t=o.default,l.default=t},{"../core/main":275}],322:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./p5.Geometry"),o.default.prototype.loadModel=function(i){o.default._validateParameters("loadModel",arguments);var f,y,_,u=i.slice(-4),m=(typeof arguments[1]=="boolean"?(f=arguments[1],y=arguments[2],_=arguments[3],arguments[4]!==void 0&&(u=arguments[4])):(f=!1,y=arguments[1],_=arguments[2],arguments[3]!==void 0&&(u=arguments[3])),new o.default.Geometry),p=(m.gid="".concat(i,"|").concat(f),this);return u.match(/\.stl$/i)?this.httpDo(i,"GET","arrayBuffer",function(g){(function(x,b){if(function(E){for(var S=new DataView(E),k=[115,111,108,105,100],T=0;T<5;T++)if(function(j,A,C){for(var N=0,V=j.length;N<V;N++)if(j[N]!==A.getUint8(C+N,!1))return;return 1}(k,S,T))return;return 1}(b))(function(E,S){for(var k,T,j,A,C,N,V,I=new DataView(S),G=I.getUint32(80,!0),R=!1,q=0;q<70;q++)I.getUint32(q,!1)===1129270351&&I.getUint8(q+4)===82&&I.getUint8(q+5)===61&&(R=!0,A=[],C=I.getUint8(q+6)/255,N=I.getUint8(q+7)/255,V=I.getUint8(q+8)/255);for(var M=0;M<G;M++){for(var L,H=84+50*M,O=I.getFloat32(H,!0),U=I.getFloat32(4+H,!0),J=I.getFloat32(8+H,!0),Z=(R&&(L=I.getUint16(48+H,!0),j=32768&L?(k=C,T=N,V):(k=(31&L)/31,T=(L>>5&31)/31,(L>>10&31)/31)),new o.default.Vector(O,U,J)),z=1;z<=3;z++){var B=H+12*z,B=new o.default.Vector(I.getFloat32(B,!0),I.getFloat32(4+B,!0),I.getFloat32(8+B,!0));E.vertices.push(B),E.vertexNormals.push(Z),R&&A.push(k,T,j)}E.faces.push([3*M,3*M+1,3*M+2]),E.uvs.push([0,0],[0,0],[0,0])}})(x,b);else{if(b=new DataView(b),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");b=new TextDecoder("utf-8").decode(b).split(`
`),function(E,S){for(var k,T,j="",A=[],C=0;C<S.length;++C){for(var N=S[C].trim(),V=N.split(" "),I=0;I<V.length;++I)V[I]===""&&V.splice(I,1);if(V.length!==0)switch(j){case"":if(V[0]!=="solid")return console.error(N),console.error('Invalid state "'.concat(V[0],'", should be "solid"'));j="solid";break;case"solid":if(V[0]!=="facet"||V[1]!=="normal")return console.error(N),console.error('Invalid state "'.concat(V[0],'", should be "facet normal"'));k=new o.default.Vector(parseFloat(V[2]),parseFloat(V[3]),parseFloat(V[4])),E.vertexNormals.push(k,k,k),j="facet normal";break;case"facet normal":if(V[0]!=="outer"||V[1]!=="loop")return console.error(N),console.error('Invalid state "'.concat(V[0],'", should be "outer loop"'));j="vertex";break;case"vertex":if(V[0]==="vertex")T=new o.default.Vector(parseFloat(V[1]),parseFloat(V[2]),parseFloat(V[3])),E.vertices.push(T),E.uvs.push([0,0]),A.push(E.vertices.indexOf(T));else{if(V[0]!=="endloop")return console.error(N),console.error('Invalid state "'.concat(V[0],'", should be "vertex" or "endloop"'));E.faces.push(A),A=[],j="endloop"}break;case"endloop":if(V[0]!=="endfacet")return console.error(N),console.error('Invalid state "'.concat(V[0],'", should be "endfacet"'));j="endfacet";break;case"endfacet":if(V[0]!=="endsolid"){if(V[0]!=="facet"||V[1]!=="normal")return console.error(N),console.error('Invalid state "'.concat(V[0],'", should be "endsolid" or "facet normal"'));k=new o.default.Vector(parseFloat(V[2]),parseFloat(V[3]),parseFloat(V[4])),E.vertexNormals.push(k,k,k),j="facet normal"}break;default:console.error('Invalid state "'.concat(j,'"'))}}}(x,b)}})(m,g),f&&m.normalize(),p._decrementPreload(),typeof y=="function"&&y(m)},_):u.match(/\.obj$/i)?this.loadStrings(i,function(g){for(var x=m,b=g,E={v:[],vt:[],vn:[]},S={},k=0;k<b.length;++k){var T=b[k].trim().split(/\b\s+/);if(0<T.length){if(T[0]==="v"||T[0]==="vn"){var j=new o.default.Vector(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));E[T[0]].push(j)}else if(T[0]==="vt")j=[parseFloat(T[1]),1-parseFloat(T[2])],E[T[0]].push(j);else if(T[0]==="f")for(var A=3;A<T.length;++A){for(var C=[],N=[1,A-1,A],V=0;V<N.length;++V){var I=T[N[V]],G=0;if(S[I]!==void 0)G=S[I];else{for(var R=I.split("/"),q=0;q<R.length;q++)R[q]=parseInt(R[q])-1;G=S[I]=x.vertices.length,x.vertices.push(E.v[R[0]].copy()),E.vt[R[1]]?x.uvs.push(E.vt[R[1]].slice()):x.uvs.push([0,0]),E.vn[R[2]]&&x.vertexNormals.push(E.vn[R[2]].copy())}C.push(G)}C[0]!==C[1]&&C[0]!==C[2]&&C[1]!==C[2]&&x.faces.push(C)}}}x.vertexNormals.length===0&&x.computeNormals(),f&&m.normalize(),p._decrementPreload(),typeof y=="function"&&y(m)},_):(o.default._friendlyFileLoadError(3,i),_?_():o.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),m},o.default.prototype.model=function(i){this._assert3d("model"),o.default._validateParameters("model",arguments),0<i.vertices.length&&(this._renderer.geometryInHash(i.gid)||(i.edges.length===0&&i._makeTriangleEdges(),i._edgesToVertices(),this._renderer.createBuffers(i.gid,i)),this._renderer.drawBuffers(i.gid))};var c=o.default;l.default=c},{"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201}],323:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var m=y();if(m&&m.has(u))return m.get(u);var p,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var b;Object.prototype.hasOwnProperty.call(u,p)&&((b=x?Object.getOwnPropertyDescriptor(u,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=u[p])}return g.default=u,m&&m.set(u,g),g}(t("../core/constants"));function y(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,y=function(){return u},u)}t("./p5.Texture"),i.default.prototype.loadShader=function(u,m,p,g){i.default._validateParameters("loadShader",arguments),g=g||console.error;function x(){E._decrementPreload(),p&&p(b)}var b=new i.default.Shader,E=this,S=!1,k=!1;return this.loadStrings(u,function(T){b._vertSrc=T.join(`
`),k=!0,S&&x()},g),this.loadStrings(m,function(T){b._fragSrc=T.join(`
`),S=!0,k&&x()},g),b},i.default.prototype.createShader=function(u,m){return i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,u,m)},i.default.prototype.createFilterShader=function(u){i.default._validateParameters("createFilterShader",arguments);var m=u.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,m=new i.default.Shader(this._renderer,m,u);return this._renderer.GL?m.ensureCompiledOnContext(this):m.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),m},i.default.prototype.shader=function(u){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),u.ensureCompiledOnContext(this),u.isStrokeShader()?this._renderer.userStrokeShader=u:(this._renderer.userFillShader=u,this._renderer._useNormalMaterial=!1),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.texture=function(u){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),u.gifProperties&&u._animateGif(this),this._renderer.drawMode=f.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=u,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(u){u!==f.IMAGE&&u!==f.NORMAL?console.warn("You tried to set ".concat(u," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=u},i.default.prototype.textureWrap=function(u){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u,p=(this._renderer.textureWrapX=u,this._renderer.textureWrapY=m,!0),g=!1,x=void 0;try{for(var b,E=this._renderer.textures.values()[Symbol.iterator]();!(p=(b=E.next()).done);p=!0)b.value.setWrapMode(u,m)}catch(S){g=!0,x=S}finally{try{p||E.return==null||E.return()}finally{if(g)throw x}}},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var u=arguments.length,m=new Array(u),p=0;p<u;p++)m[p]=arguments[p];return i.default._validateParameters("normalMaterial",m),this._renderer.drawMode=f.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.ambientMaterial=function(u,m,p){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var g=i.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.emissiveMaterial=function(u,m,p,g){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var x=i.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=x._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.specularMaterial=function(u,m,p,g){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var x=i.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=x._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.shininess=function(u){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),this._renderer._useShininess=u=u<1?1:u,this},i.default.RendererGL.prototype._applyColorBlend=function(u){var m=this.GL,p=this.drawMode===f.TEXTURE,p=this.userFillShader||this.userStrokeShader||this.userPointShader||p||this.curBlendMode!==f.BLEND||u[u.length-1]<1||this._isErasing;return p!==this._isBlending&&(p||this.curBlendMode!==f.BLEND&&this.curBlendMode!==f.ADD?m.enable(m.BLEND):m.disable(m.BLEND),m.depthMask(!0),this._isBlending=p),this._applyBlendMode(),u},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var u=this.GL;switch(this.curBlendMode){case f.BLEND:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case f.ADD:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE);break;case f.REMOVE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ZERO,u.ONE_MINUS_SRC_ALPHA);break;case f.MULTIPLY:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA);break;case f.SCREEN:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_COLOR);break;case f.EXCLUSION:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE);break;case f.REPLACE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO);break;case f.SUBTRACT:u.blendEquationSeparate(u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case f.DARKEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case f.LIGHTEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var _=i.default;l.default=_},{"../core/constants":264,"../core/main":275,"./p5.Texture":334,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],324:[function(t,a,l){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(i,f){for(var y=0;y<f.length;y++){var _=f[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.prototype.camera=function(){var i;this._assert3d("camera");for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return o.default._validateParameters("camera",y),(i=this._renderer._curCamera).camera.apply(i,y),this},o.default.prototype.perspective=function(){var i;this._assert3d("perspective");for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return o.default._validateParameters("perspective",y),(i=this._renderer._curCamera).perspective.apply(i,y),this},o.default.prototype.ortho=function(){var i;this._assert3d("ortho");for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return o.default._validateParameters("ortho",y),(i=this._renderer._curCamera).ortho.apply(i,y),this},o.default.prototype.frustum=function(){var i;this._assert3d("frustum");for(var f=arguments.length,y=new Array(f),_=0;_<f;_++)y[_]=arguments[_];return o.default._validateParameters("frustum",y),(i=this._renderer._curCamera).frustum.apply(i,y),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var i=new o.default.Camera(this._renderer);return i._computeCameraDefaultSettings(),i._setDefaultCamera(),this._renderer._curCamera=i},o.default.Camera=function(){function i(_){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._renderer=_,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix,this.yScale=1}var f,y;return f=i,(y=[{key:"perspective",value:function(g,u,m,p){this.cameraType=0<arguments.length?"custom":"default",g===void 0?(g=this.defaultCameraFOV,this.cameraFOV=g):this.cameraFOV=this._renderer._pInst._toRadians(g),u===void 0&&(u=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),p===void 0&&(p=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=u,this.cameraNear=m,this.cameraFar=p,this.projMatrix=o.default.Matrix.identity();var g=1/Math.tan(this.cameraFOV/2),x=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(g/u,0,0,0,0,-g*this.yScale,0,0,0,0,(p+m)*x,-1,0,0,2*p*m*x,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(A,j,m,p,g,x){A===void 0&&(A=-this._renderer.width/2),j===void 0&&(j=+this._renderer.width/2),m===void 0&&(m=-this._renderer.height/2),p===void 0&&(p=+this._renderer.height/2),g===void 0&&(g=0),x===void 0&&(x=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=g;var C=j-A,b=p-m,E=(this.cameraFar=x)-g,S=2/C,k=2/b*this.yScale,T=-2/E,j=-(j+A)/C,A=-(p+m)/b,C=-(x+g)/E;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-k,0,0,0,0,T,0,j,A,C,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(A,j,m,p,g,x){A===void 0&&(A=.05*-this._renderer.width),j===void 0&&(j=.05*+this._renderer.width),m===void 0&&(m=.05*+this._renderer.height),p===void 0&&(p=.05*-this._renderer.height),g===void 0&&(g=this.defaultCameraNear),x===void 0&&(x=this.defaultCameraFar),this.cameraNear=g;var C=j-A,b=p-m,E=(this.cameraFar=x)-g,S=2*g/C,k=2*g/b*this.yScale,T=-2*x*g/E,j=(j+A)/C,A=(p+m)/b,C=-(x+g)/E;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-k,0,0,j,A,C,-1,0,0,T,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(S,u,m,p){var g=this.centerX,x=this.centerY,b=this.centerZ,E=(g-=this.eyeX,x-=this.eyeY,b-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),S=(E.rotate(this._renderer._pInst._toRadians(S),u,m,p),[g*E.mat4[0]+x*E.mat4[4]+b*E.mat4[8],g*E.mat4[1]+x*E.mat4[5]+b*E.mat4[9],g*E.mat4[2]+x*E.mat4[6]+b*E.mat4[10]]);S[0]+=this.eyeX,S[1]+=this.eyeY,S[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,S[0],S[1],S[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(_){var u=this._getLocalAxes();this._rotateView(_,u.y[0],u.y[1],u.y[2])}},{key:"tilt",value:function(_){var u=this._getLocalAxes();this._rotateView(_,u.x[0],u.x[1],u.x[2])}},{key:"lookAt",value:function(_,u,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,_,u,m,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(_,u,m,p,g,x,b,E,S){return _===void 0&&(_=this.defaultEyeX,u=this.defaultEyeY,m=this.defaultEyeZ,p=_,g=u,E=1,S=b=x=0),this.eyeX=_,this.eyeY=u,this.eyeZ=m,p!==void 0&&(this.centerX=p,this.centerY=g,this.centerZ=x),b!==void 0&&(this.upX=b,this.upY=E,this.upZ=S),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),g=-_,this.cameraMatrix.translate([g,-u,-m]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(p,g,m){var x=this._getLocalAxes(),p=[x.x[0]*p,x.x[1]*p,x.x[2]*p],g=[x.y[0]*g,x.y[1]*g,x.y[2]*g],x=[x.z[0]*m,x.z[1]*m,x.z[2]*m];this.camera(this.eyeX+p[0]+g[0]+x[0],this.eyeY+p[1]+g[1]+x[1],this.eyeZ+p[2]+g[2]+x[2],this.centerX+p[0]+g[0]+x[0],this.centerY+p[1]+g[1]+x[1],this.centerZ+p[2]+g[2]+x[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(_,u,m){var p=_-this.eyeX,g=u-this.eyeY,x=m-this.eyeZ;this.camera(_,u,m,this.centerX+p,this.centerY+g,this.centerZ+x,this.upX,this.upY,this.upZ)}},{key:"set",value:function(_){for(var u=0,m=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];u<m.length;u++){var p=m[u];this[p]=_[p]}this.cameraMatrix=_.cameraMatrix.copy(),this.projMatrix=_.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(_,u,m){var p,g,x,b,E,S,k,T,j,A,C,N,V,I,G,R,q,M;m===0?this.set(_):m===1?this.set(u):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=_.projMatrix.mat4[0]*Math.pow(u.projMatrix.mat4[0]/_.projMatrix.mat4[0],m),this.projMatrix.mat4[5]=_.projMatrix.mat4[5]*Math.pow(u.projMatrix.mat4[5]/_.projMatrix.mat4[5],m),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),b=new o.default.Vector(_.eyeX,_.eyeY,_.eyeZ),E=new o.default.Vector(u.eyeX,u.eyeY,u.eyeZ),R=new o.default.Vector(_.centerX,_.centerY,_.centerZ),M=new o.default.Vector(u.centerX,u.centerY,u.centerZ),x=o.default.Vector.dist(b,R),p=o.default.Vector.dist(E,M),p=x*Math.pow(p/x,m),x=o.default.Vector.sub(b,E),g=1,1e-6<(q=(I=b.copy().sub(E).sub(R).add(M)).magSq())&&(g=o.default.Vector.dot(x,I)/q,g=Math.max(0,Math.min(g,1))),x=o.default.Vector.lerp(o.default.Vector.lerp(b,R,g),o.default.Vector.lerp(E,M,g),m),I=_.cameraMatrix.createSubMatrix3x3(),q=u.cameraMatrix.createSubMatrix3x3(),b=I.row(2),R=q.row(2),E=I.row(1),M=q.row(1),_=new o.default.Vector,u=new o.default.Vector,S=new o.default.Vector,k=new o.default.Vector,1-(T=.5*((I=(q=q.mult3x3(I.copy().transpose3x3())).diagonal())[0]+I[1]+I[2]-1))<1e-7?(_.set(o.default.Vector.lerp(b,R,m)).normalize(),S.set(_).mult(g*p).add(x),k.set(_).mult((g-1)*p).add(x),u.set(o.default.Vector.lerp(E,M,m)).normalize()):(R=1/(1-T),M=Math.max(I[0],I[1],I[2]),N=q.mat3[1]+q.mat3[3],V=q.mat3[2]+q.mat3[6],G=q.mat3[5]+q.mat3[7],M=M===I[0]?(A=.5*N*(R/=j=Math.sqrt((I[0]-T)*R)),C=.5*V*R,.5*(q.mat3[7]-q.mat3[5])/j):M===I[1]?(C=.5*G*(R/=A=Math.sqrt((I[1]-T)*R)),j=.5*N*R,.5*(q.mat3[2]-q.mat3[6])/A):(j=.5*V*(R/=C=Math.sqrt((I[2]-T)*R)),A=.5*G*R,.5*(q.mat3[3]-q.mat3[1])/C),N=m*Math.atan2(M,T),V=Math.cos(N),I=Math.sin(N),(M=new o.default.Matrix("mat3",[V+(G=1-V)*j*j,G*(R=j*A)+I*C,G*(q=C*j)-I*A,G*R-I*C,V+G*A*A,G*(m=A*C)+I*j,G*q+I*A,G*m-I*j,V+G*C*C])).multiplyVec3(b,_),S.set(_).mult(g*p).add(x),k.set(_).mult((g-1)*p).add(x),M.multiplyVec3(E,u)),this.camera(S.x,S.y,S.z,k.x,k.y,k.z,u.x,u.y,u.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var _=new o.default.Camera(this._renderer);return _.cameraFOV=this.cameraFOV,_.aspectRatio=this.aspectRatio,_.eyeX=this.eyeX,_.eyeY=this.eyeY,_.eyeZ=this.eyeZ,_.centerX=this.centerX,_.centerY=this.centerY,_.centerZ=this.centerZ,_.upX=this.upX,_.upY=this.upY,_.upZ=this.upZ,_.cameraNear=this.cameraNear,_.cameraFar=this.cameraFar,_.cameraType=this.cameraType,_.cameraMatrix=this.cameraMatrix.copy(),_.projMatrix=this.projMatrix.copy(),_.yScale=this.yScale,_}},{key:"_getLocalAxes",value:function(){var _=this.eyeX-this.centerX,u=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,b=Math.sqrt(_*_+u*u+m*m),b=(b!==0&&(_/=b,u/=b,m/=b),this.upX),p=(E=this.upY)*m-(S=this.upZ)*u,g=-b*m+S*_,x=b*u-E*_,b=u*x-m*g,E=-_*x+m*p,S=_*g-u*p,k=Math.sqrt(p*p+g*g+x*x),k=(k!==0&&(p/=k,g/=k,x/=k),Math.sqrt(b*b+E*E+S*S));return k!==0&&(b/=k,E/=k,S/=k),{x:[p,g,x],y:[b,E,S],z:[_,u,m]}}},{key:"_orbit",value:function(_,k,S){var g=this.eyeX-this.centerX,x=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,p=Math.hypot(g,x,b),g=new o.default.Vector(g,x,b).normalize(),x=new o.default.Vector(this.upX,this.upY,this.upZ).normalize(),b=new o.default.Vector.cross(x,g).normalize(),E=new o.default.Vector.cross(b,x),S=((p=(p*=Math.pow(10,S))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,o.default.Vector.dot(g,x))))+k),k=_;(S<=0||S>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),x.mult(Math.cos(S)),E.mult(Math.cos(k)*Math.sin(S)),b.mult(Math.sin(k)*Math.sin(S)),g.set(x).add(E).add(b),this.eyeX=p*g.x+this.centerX,this.eyeY=p*g.y+this.centerY,this.eyeZ=p*g.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(S,k,j){var g=this.eyeX-this.centerX,x=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,p=Math.hypot(g,x,b),g=new o.default.Vector(g,x,b).normalize(),x=new o.default.Vector(this.upX,this.upY,this.upZ),b=new o.default.Vector.cross(x,g).normalize(),E=new o.default.Vector.cross(g,b),A=Math.atan2(k,S),A=(E.mult(Math.sin(A)),b.mult(Math.cos(A)).add(E),Math.sqrt(S*S+k*k)),E=new o.default.Vector.cross(g,b),S=((p=(p*=Math.pow(10,j))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),Math.cos(A)),k=Math.sin(A),j=x.dot(g),A=x.dot(b),T=j*S+A*k,j=-j*k+A*S,A=x.dot(E);x.x=T*g.x+j*b.x+A*E.x,x.y=T*g.y+j*b.y+A*E.y,x.z=T*g.z+j*b.z+A*E.z,b.mult(-k),g.mult(S).add(b).mult(p),this.camera(g.x+this.centerX,g.y+this.centerY,g.z+this.centerZ,this.centerX,this.centerY,this.centerZ,x.x,x.y,x.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&c(f.prototype,y),i}(),o.default.prototype.setCamera=function(i){this._renderer._curCamera=i,this._renderer.uPMatrix.set(i.projMatrix.mat4[0],i.projMatrix.mat4[1],i.projMatrix.mat4[2],i.projMatrix.mat4[3],i.projMatrix.mat4[4],i.projMatrix.mat4[5],i.projMatrix.mat4[6],i.projMatrix.mat4[7],i.projMatrix.mat4[8],i.projMatrix.mat4[9],i.projMatrix.mat4[10],i.projMatrix.mat4[11],i.projMatrix.mat4[12],i.projMatrix.mat4[13],i.projMatrix.mat4[14],i.projMatrix.mat4[15])},t=o.default.Camera,l.default=t},{"../core/main":275,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.string.sub":200}],325:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,i){for(var f=0;f<i.length;f++){var y=i[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}t.default.DataArray=function(){function c(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,_=this,u=c;if(!(_ instanceof u))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(y),this.initialLength=y}var i,f;return i=c,(f=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var y;this.length<this.data.length/2&&(y=1<<Math.ceil(Math.log2(this.length)),(y=new Float32Array(y)).set(this.data.subarray(0,this.length),0),this.data=y)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var y=arguments.length,_=new Array(y),u=0;u<y;u++)_[u]=arguments[u];this.ensureLength(this.length+_.length),this.data.set(_,this.length),this.length+=_.length}},{key:"slice",value:function(y,_){return this.data.slice(y,Math.min(_,this.length))}},{key:"subArray",value:function(y,_){return this.data.subarray(y,Math.min(_,this.length))}},{key:"ensureLength",value:function(y){for(;this.data.length<y;){var _=new Float32Array(2*this.data.length);_.set(this.data,0),this.data=_}}}])&&o(i.prototype,f),c}(),t=t.default.DataArray,l.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.log2":171,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],326:[function(N,a,l){function o(V){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(V)}function c(V){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(I){return o(I)}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":o(I)})(V)}N("core-js/modules/es.symbol"),N("core-js/modules/es.symbol.description"),N("core-js/modules/es.symbol.iterator"),N("core-js/modules/es.array.fill"),N("core-js/modules/es.array.includes"),N("core-js/modules/es.array.iterator"),N("core-js/modules/es.object.get-own-property-descriptor"),N("core-js/modules/es.object.get-prototype-of"),N("core-js/modules/es.object.to-string"),N("core-js/modules/es.reflect.construct"),N("core-js/modules/es.reflect.get"),N("core-js/modules/es.regexp.to-string"),N("core-js/modules/es.string.includes"),N("core-js/modules/es.string.iterator"),N("core-js/modules/es.typed-array.float32-array"),N("core-js/modules/es.typed-array.uint8-array"),N("core-js/modules/es.typed-array.uint8-clamped-array"),N("core-js/modules/es.typed-array.copy-within"),N("core-js/modules/es.typed-array.every"),N("core-js/modules/es.typed-array.fill"),N("core-js/modules/es.typed-array.filter"),N("core-js/modules/es.typed-array.find"),N("core-js/modules/es.typed-array.find-index"),N("core-js/modules/es.typed-array.for-each"),N("core-js/modules/es.typed-array.includes"),N("core-js/modules/es.typed-array.index-of"),N("core-js/modules/es.typed-array.iterator"),N("core-js/modules/es.typed-array.join"),N("core-js/modules/es.typed-array.last-index-of"),N("core-js/modules/es.typed-array.map"),N("core-js/modules/es.typed-array.reduce"),N("core-js/modules/es.typed-array.reduce-right"),N("core-js/modules/es.typed-array.reverse"),N("core-js/modules/es.typed-array.set"),N("core-js/modules/es.typed-array.slice"),N("core-js/modules/es.typed-array.some"),N("core-js/modules/es.typed-array.sort"),N("core-js/modules/es.typed-array.subarray"),N("core-js/modules/es.typed-array.to-locale-string"),N("core-js/modules/es.typed-array.to-string"),N("core-js/modules/es.weak-map"),N("core-js/modules/web.dom-collections.iterator"),N("core-js/modules/es.array.fill"),N("core-js/modules/es.array.includes"),N("core-js/modules/es.array.iterator"),N("core-js/modules/es.object.get-prototype-of"),N("core-js/modules/es.object.to-string"),N("core-js/modules/es.string.includes"),N("core-js/modules/es.typed-array.float32-array"),N("core-js/modules/es.typed-array.uint8-array"),N("core-js/modules/es.typed-array.uint8-clamped-array"),N("core-js/modules/es.typed-array.copy-within"),N("core-js/modules/es.typed-array.every"),N("core-js/modules/es.typed-array.fill"),N("core-js/modules/es.typed-array.filter"),N("core-js/modules/es.typed-array.find"),N("core-js/modules/es.typed-array.find-index"),N("core-js/modules/es.typed-array.for-each"),N("core-js/modules/es.typed-array.includes"),N("core-js/modules/es.typed-array.index-of"),N("core-js/modules/es.typed-array.iterator"),N("core-js/modules/es.typed-array.join"),N("core-js/modules/es.typed-array.last-index-of"),N("core-js/modules/es.typed-array.map"),N("core-js/modules/es.typed-array.reduce"),N("core-js/modules/es.typed-array.reduce-right"),N("core-js/modules/es.typed-array.reverse"),N("core-js/modules/es.typed-array.set"),N("core-js/modules/es.typed-array.slice"),N("core-js/modules/es.typed-array.some"),N("core-js/modules/es.typed-array.sort"),N("core-js/modules/es.typed-array.subarray"),N("core-js/modules/es.typed-array.to-locale-string"),N("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(C=N("../core/main"))&&C.__esModule?C:{default:C},f=function(V){if(V&&V.__esModule)return V;if(V===null||c(V)!=="object"&&typeof V!="function")return{default:V};var I=u();if(I&&I.has(V))return I.get(V);var G,R={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(G in V){var M;Object.prototype.hasOwnProperty.call(V,G)&&((M=q?Object.getOwnPropertyDescriptor(V,G):null)&&(M.get||M.set)?Object.defineProperty(R,G,M):R[G]=V[G])}return R.default=V,I&&I.set(V,R),R}(N("../core/constants")),y=N("./p5.Texture"),_=N("./p5.RendererGL");function u(){var V;return typeof WeakMap!="function"?null:(V=new WeakMap,u=function(){return V},V)}function m(V,I){return function(G){if(Array.isArray(G))return G}(V)||function(G,R){if(Symbol.iterator in Object(G)||Object.prototype.toString.call(G)==="[object Arguments]"){var q=[],M=!0,L=!1,H=void 0;try{for(var O,U=G[Symbol.iterator]();!(M=(O=U.next()).done)&&(q.push(O.value),!R||q.length!==R);M=!0);}catch(J){L=!0,H=J}finally{try{M||U.return==null||U.return()}finally{if(L)throw H}}return q}}(V,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(V,I,G){return I in V?Object.defineProperty(V,I,{value:G,enumerable:!0,configurable:!0,writable:!0}):V[I]=G,V}function g(V,I){if(!(V instanceof I))throw new TypeError("Cannot call a class as a function")}function x(V,I){for(var G=0;G<I.length;G++){var R=I[G];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(V,R.key,R)}}function b(V,I,G){I&&x(V.prototype,I),G&&x(V,G)}function E(V,I,G){return(E=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(L,q,M){var L=function(H,O){for(;!Object.prototype.hasOwnProperty.call(H,O)&&(H=T(H))!==null;);return H}(L,q);if(L)return(L=Object.getOwnPropertyDescriptor(L,q)).get?L.get.call(M):L.value})(V,I,G||V)}function S(V,I){return(S=Object.setPrototypeOf||function(G,R){return G.__proto__=R,G})(V,I)}function k(V){return function(){var I,G=T(V),G=(I=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(I=T(this).constructor,Reflect.construct(G,arguments,I)):G.apply(this,arguments),this);if(!I||c(I)!=="object"&&typeof I!="function"){if(G!==void 0)return G;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return I}}function T(V){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)})(V)}var j=function(V){var I=R;if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(V&&V.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),V&&S(I,V);var G=k(R);function R(q){var M;return g(this,R),(M=G.call(this,q.target._renderer)).fbo=q,M.yScale=-1,M}return b(R,[{key:"_computeCameraDefaultSettings",value:function(){E(T(R.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),R}(i.default.Camera),A=(i.default.FramebufferCamera=j,function(){function V(I,G){g(this,V),this.framebuffer=I,this.property=G}return b(V,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),V}()),C=(i.default.FramebufferTexture=A,function(){function V(q){var G=this,R=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},q=(g(this,V),this.target=q,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=R.format||f.UNSIGNED_BYTE,this.channels=R.channels||(q._renderer._pInst._glAttributes.alpha?f.RGBA:f.RGB),this.useDepth=R.depth===void 0||R.depth,this.depthFormat=R.depthFormat||f.FLOAT,this.textureFiltering=R.textureFiltering||f.LINEAR,R.antialias===void 0?this.antialiasSamples=q._renderer._pInst._glAttributes.antialias?2:0:typeof R.antialias=="number"?this.antialiasSamples=R.antialias:this.antialiasSamples=R.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&q.webglVersion!==f.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),R.width&&R.height?(this.width=R.width,this.height=R.height,this.autoSized=!1):(R.width===void 0!=(R.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=q.width,this.height=q.height,this.autoSized=!0),this.density=R.density||q.pixelDensity(),q._renderer.GL);if(this.gl=q,this._checkIfFormatsAvailable(),R.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(R.stencil===void 0||R.stencil),this.framebuffer=q.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=q.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),R=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=R,this.draw(function(){return G.target.clear()})}return b(V,[{key:"resize",value:function(I,G){this.autoSized=!1,this.width=I,this.height=G,this._handleResize()}},{key:"pixelDensity",value:function(I){if(!I)return this.density;this.autoSized=!1,this.density=I,this._handleResize()}},{key:"autoSized",value:function(I){if(I===void 0)return this.autoSized;this.autoSized=I,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var I=this.gl,I=(this.useDepth&&this.target.webglVersion===f.WEBGL&&!I.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===f.WEBGL&&this.depthFormat===f.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=f.UNSIGNED_INT),[f.UNSIGNED_BYTE,f.FLOAT,f.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.useDepth&&![f.UNSIGNED_INT,f.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=f.FLOAT),(0,y.checkWebGLCapabilities)(this.target._renderer));I.float||this.format!==f.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.useDepth&&!I.float&&this.depthFormat===f.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=f.UNSIGNED_INT),I.halfFloat||this.format!==f.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.channels===f.RGB&&[f.FLOAT,f.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=f.RGBA)}},{key:"_recreateTextures",value:function(){var I=this.gl,G=(this._updateSize(),I.getParameter(I.TEXTURE_BINDING_2D)),R=I.getParameter(I.FRAMEBUFFER_BINDING),q=I.createTexture();if(!q)throw new Error("Unable to create color texture");I.bindTexture(I.TEXTURE_2D,q);var M=this._glColorFormat();if(I.texImage2D(I.TEXTURE_2D,0,M.internalFormat,this.width*this.density,this.height*this.density,0,M.format,M.type,null),this.colorTexture=q,I.bindFramebuffer(I.FRAMEBUFFER,this.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,q,0),this.useDepth){var q=I.createTexture();if(!q)throw new Error("Unable to create depth texture");var L=this._glDepthFormat();I.bindTexture(I.TEXTURE_2D,q),I.texImage2D(I.TEXTURE_2D,0,L.internalFormat,this.width*this.density,this.height*this.density,0,L.format,L.type,null),I.framebufferTexture2D(I.FRAMEBUFFER,this.useStencil?I.DEPTH_STENCIL_ATTACHMENT:I.DEPTH_ATTACHMENT,I.TEXTURE_2D,q,0),this.depthTexture=q}this.antialias&&(this.colorRenderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(I.RENDERBUFFER,this.colorRenderbuffer),I.renderbufferStorageMultisample(I.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,I.getParameter(I.MAX_SAMPLES))),M.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(L=this._glDepthFormat(),this.depthRenderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(I.RENDERBUFFER,this.depthRenderbuffer),I.renderbufferStorageMultisample(I.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,I.getParameter(I.MAX_SAMPLES))),L.internalFormat,this.width*this.density,this.height*this.density)),I.bindFramebuffer(I.FRAMEBUFFER,this.aaFramebuffer),I.framebufferRenderbuffer(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&I.framebufferRenderbuffer(I.FRAMEBUFFER,this.useStencil?I.DEPTH_STENCIL_ATTACHMENT:I.DEPTH_ATTACHMENT,I.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new A(this,"depthTexture"),q=I.NEAREST,this.depthP5Texture=new i.default.Texture(this.target._renderer,this.depth,{minFilter:q,magFilter:q}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new A(this,"colorTexture"),M=this.textureFiltering===f.LINEAR?I.LINEAR:I.NEAREST,this.colorP5Texture=new i.default.Texture(this.target._renderer,this.color,{minFilter:M,magFilter:M}),this.target._renderer.textures.set(this.color,this.colorP5Texture),I.bindTexture(I.TEXTURE_2D,G),I.bindFramebuffer(I.FRAMEBUFFER,R)}},{key:"_glColorFormat",value:function(){var I,G,R=this.gl,q=this.format===f.FLOAT?R.FLOAT:this.format===f.HALF_FLOAT?this.target.webglVersion===f.WEBGL2?R.HALF_FLOAT:R.getExtension("OES_texture_half_float").HALF_FLOAT_OES:R.UNSIGNED_BYTE,M=this.channels===f.RGBA?R.RGBA:R.RGB;return{internalFormat:this.target.webglVersion===f.WEBGL2?(p(G={},R.FLOAT,p({},R.RGBA,R.RGBA32F)),p(G,R.HALF_FLOAT,p({},R.RGBA,R.RGBA16F)),p(G,R.UNSIGNED_BYTE,(p(I={},R.RGBA,R.RGBA8),p(I,R.RGB,R.RGB8),I)),G[q][M]):this.format===f.HALF_FLOAT?R.RGBA:M,format:M,type:q}}},{key:"_glDepthFormat",value:function(){var R=this.gl,I=this.useStencil?this.depthFormat===f.FLOAT?R.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===f.WEBGL2?R.UNSIGNED_INT_24_8:R.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===f.FLOAT?R.FLOAT:R.UNSIGNED_INT,G=this.useStencil?R.DEPTH_STENCIL:R.DEPTH_COMPONENT,R=this.useStencil?this.depthFormat===f.FLOAT?R.DEPTH32F_STENCIL8:this.target.webglVersion===f.WEBGL2?R.DEPTH24_STENCIL8:R.DEPTH_STENCIL:this.target.webglVersion===f.WEBGL2?this.depthFormat===f.FLOAT?R.DEPTH_COMPONENT32F:R.DEPTH_COMPONENT24:R.DEPTH_COMPONENT;return{internalFormat:R,format:G,type:I}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var q=this.color,I=this.depth,G=this.colorRenderbuffer,R=this.depthRenderbuffer,q=(this._deleteTexture(q),I&&this._deleteTexture(I),this.gl);G&&q.deleteRenderbuffer(G),R&&q.deleteRenderbuffer(R),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var I=new j(this);return I._computeCameraDefaultSettings(),I._setDefaultCamera(),this.target._renderer._curCamera=I}},{key:"_deleteTexture",value:function(I){this.gl.deleteTexture(I.rawTexture()),this.target._renderer.textures.delete(I)}},{key:"remove",value:function(){var I=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),I.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&I.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&I.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&I.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var I=this.gl,G=(I.bindFramebuffer(I.READ_FRAMEBUFFER,this.aaFramebuffer),I.bindFramebuffer(I.DRAW_FRAMEBUFFER,this.framebuffer),[[I.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&G.push([I.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var R=0,q=G;R<q.length;R++){var L=m(q[R],2),M=L[0],L=L[1];I.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,M,L)}}}},{key:"end",value:function(){var I=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(I.bindFramebuffer(I.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(I){this.begin(),I(),this.end()}},{key:"loadPixels",value:function(){var I=this.gl,G=this.target._renderer.activeFramebuffer(),R=(I.bindFramebuffer(I.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,_.readPixelsWebGL)(this.pixels,I,this.framebuffer,0,0,this.width*this.density,this.height*this.density,R.format,R.type),G?I.bindFramebuffer(I.FRAMEBUFFER,G._framebufferToBind()):I.bindFramebuffer(I.FRAMEBUFFER,null)}},{key:"get",value:function(I,G,R,q){i.default._validateParameters("p5.Framebuffer.get",arguments);var M=this._glColorFormat();if(I===void 0&&G===void 0)G=I=0,R=this.width,q=this.height;else if(R===void 0&&q===void 0)return(I<0||G<0||I>=this.width||G>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),I=this.target.constrain(I,0,this.width-1),G=this.target.constrain(G,0,this.height-1)),(0,_.readPixelWebGL)(this.gl,this.framebuffer,I*this.density,G*this.density,M.format,M.type);I=this.target.constrain(I,0,this.width-1),G=this.target.constrain(G,0,this.height-1),R=this.target.constrain(R,1,this.width-I),q=this.target.constrain(q,1,this.height-G);for(var L=(0,_.readPixelsWebGL)(void 0,this.gl,this.framebuffer,I*this.density,G*this.density,R*this.density,q*this.density,M.format,M.type),H=new Uint8ClampedArray(R*q*this.density*this.density*4),O=(H.fill(255),M.type===this.gl.RGB?3:4),U=0;U<q*this.density;U++)for(var J=0;J<R*this.density;J++)for(var Z=0;Z<4;Z++){var z,B=4*(U*R*this.density+J)+Z;Z<O&&(z=O==4?B:(U*R*this.density+J)*O+Z,H[B]=L[z])}return I=new i.default.Image(R*this.density,q*this.density),I.imageData=I.canvas.getContext("2d").createImageData(I.width,I.height),I.imageData.data.set(H),I.pixels=I.imageData.data,I.updatePixels(),this.density!==1&&I.resize(R,q),I}},{key:"updatePixels",value:function(){var I=this.gl,G=(this.colorP5Texture.bindTexture(),this._glColorFormat()),R=G.format===I.RGBA?4:3,R=this.width*this.height*this.density*this.density*R,q=G.type===I.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof q)||this.pixels.length!==R)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");I.texImage2D(I.TEXTURE_2D,0,G.internalFormat,this.width*this.density,this.height*this.density,0,G.format,G.type,this.pixels),this.colorP5Texture.unbindTexture(),q=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(I.clearDepth(1),I.clear(I.DEPTH_BUFFER_BIT)),this.end()):(I.bindFramebuffer(I.FRAMEBUFFER,this.framebuffer),this.useDepth&&(I.clearDepth(1),I.clear(I.DEPTH_BUFFER_BIT)),q?I.bindFramebuffer(I.FRAMEBUFFER,q._framebufferToBind()):I.bindFramebuffer(I.FRAMEBUFFER,null))}}]),V}()),N=i.default.Framebuffer=C;l.default=N},{"../core/constants":264,"../core/main":275,"./p5.RendererGL":332,"./p5.Texture":334,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],327:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=y();if(g&&g.has(p))return g.get(p);var x,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in p){var S;Object.prototype.hasOwnProperty.call(p,x)&&((S=E?Object.getOwnPropertyDescriptor(p,x):null)&&(S.get||S.set)?Object.defineProperty(b,x,S):b[x]=p[x])}return b.default=p,g&&g.set(p,b),b}(t("../core/constants"));function y(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,y=function(){return p},p)}function _(p){return function(g){if(Array.isArray(g)){for(var x=0,b=new Array(g.length);x<g.length;x++)b[x]=g[x];return b}}(p)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(p,g){for(var x=0;x<g.length;x++){var b=g[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}i.default.Geometry=function(){function p(b,E,S){if(this instanceof p)return this.vertices=[],this.lineVertices=new i.default.DataArray,this.lineTangentsIn=new i.default.DataArray,this.lineTangentsOut=new i.default.DataArray,this.lineSides=new i.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new i.default.DataArray,this.detailX=b!==void 0?b:1,this.detailY=E!==void 0?E:1,this.dirtyFlags={},S instanceof Function&&S.call(this),this;throw new TypeError("Cannot call a class as a function")}var g,x;return g=p,(x=[{key:"reset",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"computeFaces",value:function(){this.faces.length=0;for(var b,E,S,k=this.detailX+1,T=0;T<this.detailY;T++)for(var j=0;j<this.detailX;j++)E=(T+1)*k+j+1,this.faces.push([T*k+j,b=T*k+j+1,S=(T+1)*k+j]),this.faces.push([S,b,E]);return this}},{key:"_getFaceNormal",value:function(E){var E=this.faces[E],S=this.vertices[E[0]],T=this.vertices[E[1]],E=this.vertices[E[2]],T=i.default.Vector.sub(T,S),E=i.default.Vector.sub(E,S),S=i.default.Vector.cross(T,E),k=i.default.Vector.mag(S),T=k/(i.default.Vector.mag(T)*i.default.Vector.mag(E));return T===0||isNaN(T)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),S):(1<T&&(T=1),S.mult(Math.asin(T)/k))}},{key:"computeNormals",value:function(){var b,E=this,S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:f.FLAT,k=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,T=this.vertexNormals,j=this.vertices,A=this.faces;if(S===f.SMOOTH){for(var C={},N=[],V=Math.pow(10,k===void 0?3:k),I=function(L){return Math.round(L*V)/V},G=function(L){return"".concat(I(L.x),",").concat(I(L.y),",").concat(I(L.z))},R=0;R<j.length;R++){var q=j[R],M=G(q);C[M]===void 0&&(C[M]=N.length,N.push(q))}A.forEach(function(L){for(var H=0;H<3;++H){var O=L[H],O=j[O],O=G(O);L[H]=C[O]}}),this.edges.forEach(function(L){for(var H=0;H<2;++H){var O=L[H],O=j[O],O=G(O);L[H]=C[O]}}),this.vertices=j=N}for(b=T.length=0;b<j.length;++b)T.push(new i.default.Vector);for(A.forEach(function(L,H){for(var O=E._getFaceNormal(H),U=0;U<3;++U){var J=L[U];T[J].add(O)}}),b=0;b<j.length;++b)T[b].normalize();return this}},{key:"averageNormals",value:function(){for(var b=0;b<=this.detailY;b++){var E=this.detailX+1,S=i.default.Vector.add(this.vertexNormals[b*E],this.vertexNormals[b*E+this.detailX]),S=i.default.Vector.div(S,2);this.vertexNormals[b*E]=S,this.vertexNormals[b*E+this.detailX]=S}return this}},{key:"averagePoleNormals",value:function(){for(var b=new i.default.Vector(0,0,0),E=0;E<this.detailX;E++)b.add(this.vertexNormals[E]);for(var b=i.default.Vector.div(b,this.detailX),S=0;S<this.detailX;S++)this.vertexNormals[S]=b;b=new i.default.Vector(0,0,0);for(var k=this.vertices.length-1;k>this.vertices.length-1-this.detailX;k--)b.add(this.vertexNormals[k]);b=i.default.Vector.div(b,this.detailX);for(var T=this.vertices.length-1;T>this.vertices.length-1-this.detailX;T--)this.vertexNormals[T]=b;return this}},{key:"_makeTriangleEdges",value:function(){for(var b=this.edges.length=0;b<this.faces.length;b++)this.edges.push([this.faces[b][0],this.faces[b][1]]),this.edges.push([this.faces[b][1],this.faces[b][2]]),this.edges.push([this.faces[b][2],this.faces[b][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var b,E=new Map,S=new Set,k=0;k<this.edges.length;k++){var T,j=this.edges[k-1],A=this.edges[k],C=this.vertices[A[0]],N=this.vertices[A[1]],V=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*A[0],4*(A[0]+1)):[0,0,0,0],I=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*A[1],4*(A[1]+1)):[0,0,0,0],G=N.copy().sub(C).normalize(),R=0<G.magSq();R&&this._addSegment(C,N,V,I,G),0<k&&j[1]===A[0]?S.has(A[0])||(S.add(A[0]),E.delete(A[0]),b&&R&&G.dot(b)<1-1e-8&&this._addJoin(C,b,G,V)):(R&&!S.has(A[0])&&((T=E.get(A[0]))?(this._addJoin(C,T.dir,G,V),E.delete(A[0]),S.add(A[0])):E.set(A[0],{point:C,dir:G.copy().mult(-1),color:V})),b&&!S.has(j[1])&&((T=E.get(j[1]))?(this._addJoin(this.vertices[j[1]],b,T.dir.copy().mult(-1),V),E.delete(j[1]),S.add(j[1])):E.set(j[1],{point:this.vertices[j[1]],dir:b,color:V}),b=void 0)),k!==this.edges.length-1||S.has(A[1])||((C=E.get(A[1]))?(this._addJoin(N,G,C.dir.copy().mult(-1),I),E.delete(A[1]),S.add(A[1])):E.set(A[1],{point:N,dir:G,color:I})),R&&(b=G)}var q=!0,M=!1,L=void 0;try{for(var H,O=E.values()[Symbol.iterator]();!(q=(H=O.next()).done);q=!0){var U=H.value,J=U.point,Z=U.dir,z=U.color;this._addCap(J,Z,z)}}catch(B){M=!0,L=B}finally{try{q||O.return==null||O.return()}finally{if(M)throw L}}return this}},{key:"_addSegment",value:function(j,A,S,k,T){var j=j.array(),A=A.array(),C=T.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var N=0,V=[this.lineTangentsIn,this.lineTangentsOut];N<V.length;N++)for(var I=V[N],G=0;G<6;G++)I.push.apply(I,_(C));return(T=this.lineVertices).push.apply(T,_(j).concat(_(A),_(j),_(A),_(A),_(j))),(T=this.lineVertexColors).push.apply(T,_(S).concat(_(k),_(S),_(k),_(k),_(S))),this}},{key:"_addCap",value:function(b,E,S){for(var k,T=b.array(),j=E.array(),A=[0,0,0],C=0;C<6;C++)(k=this.lineVertices).push.apply(k,_(T)),(k=this.lineTangentsIn).push.apply(k,_(j)),(k=this.lineTangentsOut).push.apply(k,A),(k=this.lineVertexColors).push.apply(k,_(S));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(b,E,S,k){for(var T,j=b.array(),A=E.array(),C=S.array(),N=0;N<12;N++)(T=this.lineVertices).push.apply(T,_(j)),(T=this.lineTangentsIn).push.apply(T,_(A)),(T=this.lineTangentsOut).push.apply(T,_(C)),(T=this.lineVertexColors).push.apply(T,_(k));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var b=this.vertices[0].copy(),E=this.vertices[0].copy(),S=0;S<this.vertices.length;S++)b.x=Math.max(b.x,this.vertices[S].x),E.x=Math.min(E.x,this.vertices[S].x),b.y=Math.max(b.y,this.vertices[S].y),E.y=Math.min(E.y,this.vertices[S].y),b.z=Math.max(b.z,this.vertices[S].z),E.z=Math.min(E.z,this.vertices[S].z);for(var k=i.default.Vector.lerp(b,E,.5),T=i.default.Vector.sub(b,E),j=200/Math.max(Math.max(T.x,T.y),T.z),A=0;A<this.vertices.length;A++)this.vertices[A].sub(k),this.vertices[A].mult(j)}return this}}])&&u(g.prototype,x),p}();var m=i.default.Geometry;l.default=m},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],328:[function(y,a,l){y("core-js/modules/es.array.iterator"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.typed-array.float32-array"),y("core-js/modules/es.typed-array.copy-within"),y("core-js/modules/es.typed-array.every"),y("core-js/modules/es.typed-array.fill"),y("core-js/modules/es.typed-array.filter"),y("core-js/modules/es.typed-array.find"),y("core-js/modules/es.typed-array.find-index"),y("core-js/modules/es.typed-array.for-each"),y("core-js/modules/es.typed-array.includes"),y("core-js/modules/es.typed-array.index-of"),y("core-js/modules/es.typed-array.iterator"),y("core-js/modules/es.typed-array.join"),y("core-js/modules/es.typed-array.last-index-of"),y("core-js/modules/es.typed-array.map"),y("core-js/modules/es.typed-array.reduce"),y("core-js/modules/es.typed-array.reduce-right"),y("core-js/modules/es.typed-array.reverse"),y("core-js/modules/es.typed-array.set"),y("core-js/modules/es.typed-array.slice"),y("core-js/modules/es.typed-array.some"),y("core-js/modules/es.typed-array.sort"),y("core-js/modules/es.typed-array.subarray"),y("core-js/modules/es.typed-array.to-locale-string"),y("core-js/modules/es.typed-array.to-string"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.typed-array.float32-array"),y("core-js/modules/es.typed-array.copy-within"),y("core-js/modules/es.typed-array.every"),y("core-js/modules/es.typed-array.fill"),y("core-js/modules/es.typed-array.filter"),y("core-js/modules/es.typed-array.find"),y("core-js/modules/es.typed-array.find-index"),y("core-js/modules/es.typed-array.for-each"),y("core-js/modules/es.typed-array.includes"),y("core-js/modules/es.typed-array.index-of"),y("core-js/modules/es.typed-array.iterator"),y("core-js/modules/es.typed-array.join"),y("core-js/modules/es.typed-array.last-index-of"),y("core-js/modules/es.typed-array.map"),y("core-js/modules/es.typed-array.reduce"),y("core-js/modules/es.typed-array.reduce-right"),y("core-js/modules/es.typed-array.reverse"),y("core-js/modules/es.typed-array.set"),y("core-js/modules/es.typed-array.slice"),y("core-js/modules/es.typed-array.some"),y("core-js/modules/es.typed-array.sort"),y("core-js/modules/es.typed-array.subarray"),y("core-js/modules/es.typed-array.to-locale-string"),y("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(y=y("../core/main"))&&y.__esModule?y:{default:y};function c(_,u){for(var m=0;m<u.length;m++){var p=u[m];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(_,p.key,p)}}var i=Array,f=function(_){return Array.isArray(_)},y=(typeof Float32Array<"u"&&(i=Float32Array,f=function(_){return Array.isArray(_)||_ instanceof Float32Array}),o.default.Matrix=function(){function _(){var g=this,x=_;if(g instanceof x)return arguments.length&&((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])instanceof o.default&&(this.p5=(x=arguments.length-1)<0||arguments.length<=x?void 0:arguments[x]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var u,m,p;return u=_,p=[{key:"identity",value:function(g){return new o.default.Matrix(g)}}],(m=[{key:"set",value:function(g){return g instanceof o.default.Matrix?this.mat4=g.mat4:f(g)?this.mat4=g:arguments.length===16&&(this.mat4[0]=g,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new o.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var g;return this.mat3!==void 0?((g=new o.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],g.mat3[1]=this.mat3[1],g.mat3[2]=this.mat3[2],g.mat3[3]=this.mat3[3],g.mat3[4]=this.mat3[4],g.mat3[5]=this.mat3[5],g.mat3[6]=this.mat3[6],g.mat3[7]=this.mat3[7],g.mat3[8]=this.mat3[8]):((g=new o.default.Matrix(this.p5)).mat4[0]=this.mat4[0],g.mat4[1]=this.mat4[1],g.mat4[2]=this.mat4[2],g.mat4[3]=this.mat4[3],g.mat4[4]=this.mat4[4],g.mat4[5]=this.mat4[5],g.mat4[6]=this.mat4[6],g.mat4[7]=this.mat4[7],g.mat4[8]=this.mat4[8],g.mat4[9]=this.mat4[9],g.mat4[10]=this.mat4[10],g.mat4[11]=this.mat4[11],g.mat4[12]=this.mat4[12],g.mat4[13]=this.mat4[13],g.mat4[14]=this.mat4[14],g.mat4[15]=this.mat4[15]),g}},{key:"transpose",value:function(g){var x,b,E,S,k,T;return g instanceof o.default.Matrix?(x=g.mat4[1],b=g.mat4[2],E=g.mat4[3],S=g.mat4[6],k=g.mat4[7],T=g.mat4[11],this.mat4[0]=g.mat4[0],this.mat4[1]=g.mat4[4],this.mat4[2]=g.mat4[8],this.mat4[3]=g.mat4[12],this.mat4[4]=x,this.mat4[5]=g.mat4[5],this.mat4[6]=g.mat4[9],this.mat4[7]=g.mat4[13],this.mat4[8]=b,this.mat4[9]=S,this.mat4[10]=g.mat4[10],this.mat4[11]=g.mat4[14],this.mat4[12]=E,this.mat4[13]=k,this.mat4[14]=T,this.mat4[15]=g.mat4[15]):f(g)&&(x=g[1],b=g[2],E=g[3],S=g[6],k=g[7],T=g[11],this.mat4[0]=g[0],this.mat4[1]=g[4],this.mat4[2]=g[8],this.mat4[3]=g[12],this.mat4[4]=x,this.mat4[5]=g[5],this.mat4[6]=g[9],this.mat4[7]=g[13],this.mat4[8]=b,this.mat4[9]=S,this.mat4[10]=g[10],this.mat4[11]=g[14],this.mat4[12]=E,this.mat4[13]=k,this.mat4[14]=T,this.mat4[15]=g[15]),this}},{key:"invert",value:function(L){L instanceof o.default.Matrix?(x=L.mat4[0],b=L.mat4[1],E=L.mat4[2],S=L.mat4[3],k=L.mat4[4],T=L.mat4[5],j=L.mat4[6],A=L.mat4[7],C=L.mat4[8],N=L.mat4[9],V=L.mat4[10],I=L.mat4[11],G=L.mat4[12],R=L.mat4[13],q=L.mat4[14],M=L.mat4[15]):f(L)&&(x=L[0],b=L[1],E=L[2],S=L[3],k=L[4],T=L[5],j=L[6],A=L[7],C=L[8],N=L[9],V=L[10],I=L[11],G=L[12],R=L[13],q=L[14],M=L[15]);var x,b,E,S,k,T,j,A,C,N,V,I,G,R,q,M,L=x*T-b*k,H=x*j-E*k,O=x*A-S*k,U=b*j-E*T,J=b*A-S*T,Z=E*A-S*j,z=C*R-N*G,B=C*q-V*G,D=C*M-I*G,X=N*q-V*R,K=N*M-I*R,re=V*M-I*q,se=L*re-H*K+O*X+U*D-J*B+Z*z;return se?(this.mat4[0]=(T*re-j*K+A*X)*(se=1/se),this.mat4[1]=(E*K-b*re-S*X)*se,this.mat4[2]=(R*Z-q*J+M*U)*se,this.mat4[3]=(V*J-N*Z-I*U)*se,this.mat4[4]=(j*D-k*re-A*B)*se,this.mat4[5]=(x*re-E*D+S*B)*se,this.mat4[6]=(q*O-G*Z-M*H)*se,this.mat4[7]=(C*Z-V*O+I*H)*se,this.mat4[8]=(k*K-T*D+A*z)*se,this.mat4[9]=(b*D-x*K-S*z)*se,this.mat4[10]=(G*J-R*O+M*L)*se,this.mat4[11]=(N*O-C*J-I*L)*se,this.mat4[12]=(T*B-k*X-j*z)*se,this.mat4[13]=(x*X-b*B+E*z)*se,this.mat4[14]=(R*H-G*U-q*L)*se,this.mat4[15]=(C*U-N*H+V*L)*se,this):null}},{key:"invert3x3",value:function(){var g=this.mat3[0],x=this.mat3[1],b=this.mat3[2],E=this.mat3[3],S=this.mat3[4],k=this.mat3[5],T=this.mat3[6],j=this.mat3[7],A=this.mat3[8],C=A*S-k*j,N=-A*E+k*T,V=j*E-S*T,I=g*C+x*N+b*V;return I?(this.mat3[0]=C*(I=1/I),this.mat3[1]=(-A*x+b*j)*I,this.mat3[2]=(k*x-b*S)*I,this.mat3[3]=N*I,this.mat3[4]=(A*g-b*T)*I,this.mat3[5]=(-k*g+b*E)*I,this.mat3[6]=V*I,this.mat3[7]=(-j*g+x*T)*I,this.mat3[8]=(S*g-x*E)*I,this):null}},{key:"transpose3x3",value:function(g){var x=(g=g===void 0?this.mat3:g)[1],b=g[2],E=g[5];return this.mat3[0]=g[0],this.mat3[1]=g[3],this.mat3[2]=g[6],this.mat3[3]=x,this.mat3[4]=g[4],this.mat3[5]=g[7],this.mat3[6]=b,this.mat3[7]=E,this.mat3[8]=g[8],this}},{key:"inverseTranspose",value:function(g){if(g=g.mat4,this.mat3===void 0?o.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=g[0],this.mat3[1]=g[1],this.mat3[2]=g[2],this.mat3[3]=g[4],this.mat3[4]=g[5],this.mat3[5]=g[6],this.mat3[6]=g[8],this.mat3[7]=g[9],this.mat3[8]=g[10]),g=this.invert3x3(),g)g.transpose3x3(this.mat3);else for(var x=0;x<9;x++)this.mat3[x]=0;return this}},{key:"determinant",value:function(){var g=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],x=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],E=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],S=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],k=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],T=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],j=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],A=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],C=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],N=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return g*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-x*N+b*C+E*A-S*j+k*T}},{key:"mult",value:function(b){var x;if(b===this||b===this.mat4)x=this.copy().mat4;else if(b instanceof o.default.Matrix)x=b.mat4;else if(f(b))x=b;else{if(arguments.length!==16)return;x=arguments}var b=this.mat4[0],E=this.mat4[1],S=this.mat4[2],k=this.mat4[3];return this.mat4[0]=b*x[0]+E*x[4]+S*x[8]+k*x[12],this.mat4[1]=b*x[1]+E*x[5]+S*x[9]+k*x[13],this.mat4[2]=b*x[2]+E*x[6]+S*x[10]+k*x[14],this.mat4[3]=b*x[3]+E*x[7]+S*x[11]+k*x[15],b=this.mat4[4],E=this.mat4[5],S=this.mat4[6],k=this.mat4[7],this.mat4[4]=b*x[0]+E*x[4]+S*x[8]+k*x[12],this.mat4[5]=b*x[1]+E*x[5]+S*x[9]+k*x[13],this.mat4[6]=b*x[2]+E*x[6]+S*x[10]+k*x[14],this.mat4[7]=b*x[3]+E*x[7]+S*x[11]+k*x[15],b=this.mat4[8],E=this.mat4[9],S=this.mat4[10],k=this.mat4[11],this.mat4[8]=b*x[0]+E*x[4]+S*x[8]+k*x[12],this.mat4[9]=b*x[1]+E*x[5]+S*x[9]+k*x[13],this.mat4[10]=b*x[2]+E*x[6]+S*x[10]+k*x[14],this.mat4[11]=b*x[3]+E*x[7]+S*x[11]+k*x[15],b=this.mat4[12],E=this.mat4[13],S=this.mat4[14],k=this.mat4[15],this.mat4[12]=b*x[0]+E*x[4]+S*x[8]+k*x[12],this.mat4[13]=b*x[1]+E*x[5]+S*x[9]+k*x[13],this.mat4[14]=b*x[2]+E*x[6]+S*x[10]+k*x[14],this.mat4[15]=b*x[3]+E*x[7]+S*x[11]+k*x[15],this}},{key:"apply",value:function(b){var x;if(b===this||b===this.mat4)x=this.copy().mat4;else if(b instanceof o.default.Matrix)x=b.mat4;else if(f(b))x=b;else{if(arguments.length!==16)return;x=arguments}var b=this.mat4,E=b[0],S=b[4],k=b[8],T=b[12],E=(b[0]=x[0]*E+x[1]*S+x[2]*k+x[3]*T,b[4]=x[4]*E+x[5]*S+x[6]*k+x[7]*T,b[8]=x[8]*E+x[9]*S+x[10]*k+x[11]*T,b[12]=x[12]*E+x[13]*S+x[14]*k+x[15]*T,b[1]),S=b[5],k=b[9],T=b[13],E=(b[1]=x[0]*E+x[1]*S+x[2]*k+x[3]*T,b[5]=x[4]*E+x[5]*S+x[6]*k+x[7]*T,b[9]=x[8]*E+x[9]*S+x[10]*k+x[11]*T,b[13]=x[12]*E+x[13]*S+x[14]*k+x[15]*T,b[2]),S=b[6],k=b[10],T=b[14],E=(b[2]=x[0]*E+x[1]*S+x[2]*k+x[3]*T,b[6]=x[4]*E+x[5]*S+x[6]*k+x[7]*T,b[10]=x[8]*E+x[9]*S+x[10]*k+x[11]*T,b[14]=x[12]*E+x[13]*S+x[14]*k+x[15]*T,b[3]),S=b[7],k=b[11],T=b[15];return b[3]=x[0]*E+x[1]*S+x[2]*k+x[3]*T,b[7]=x[4]*E+x[5]*S+x[6]*k+x[7]*T,b[11]=x[8]*E+x[9]*S+x[10]*k+x[11]*T,b[15]=x[12]*E+x[13]*S+x[14]*k+x[15]*T,this}},{key:"scale",value:function(g,x,b){return g instanceof o.default.Vector?(x=g.y,b=g.z,g=g.x):g instanceof Array&&(x=g[1],b=g[2],g=g[0]),this.mat4[0]*=g,this.mat4[1]*=g,this.mat4[2]*=g,this.mat4[3]*=g,this.mat4[4]*=x,this.mat4[5]*=x,this.mat4[6]*=x,this.mat4[7]*=x,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(L,K,X,E){K instanceof o.default.Vector?(X=K.y,E=K.z,K=K.x):K instanceof Array&&(X=K[1],E=K[2],K=K[0]);var S=Math.sqrt(K*K+X*X+E*E),S=(K*=1/S,X*=1/S,E*=1/S,this.mat4[0]),k=this.mat4[1],T=this.mat4[2],j=this.mat4[3],A=this.mat4[4],C=this.mat4[5],N=this.mat4[6],V=this.mat4[7],I=this.mat4[8],G=this.mat4[9],R=this.mat4[10],q=this.mat4[11],M=Math.sin(L),L=Math.cos(L),H=1-L,O=K*K*H+L,U=X*K*H+E*M,J=E*K*H-X*M,Z=K*X*H-E*M,z=X*X*H+L,B=E*X*H+K*M,D=K*E*H+X*M,X=X*E*H-K*M,K=E*E*H+L;return this.mat4[0]=S*O+A*U+I*J,this.mat4[1]=k*O+C*U+G*J,this.mat4[2]=T*O+N*U+R*J,this.mat4[3]=j*O+V*U+q*J,this.mat4[4]=S*Z+A*z+I*B,this.mat4[5]=k*Z+C*z+G*B,this.mat4[6]=T*Z+N*z+R*B,this.mat4[7]=j*Z+V*z+q*B,this.mat4[8]=S*D+A*X+I*K,this.mat4[9]=k*D+C*X+G*K,this.mat4[10]=T*D+N*X+R*K,this.mat4[11]=j*D+V*X+q*K,this}},{key:"translate",value:function(E){var x=E[0],b=E[1],E=E[2]||0;this.mat4[12]+=this.mat4[0]*x+this.mat4[4]*b+this.mat4[8]*E,this.mat4[13]+=this.mat4[1]*x+this.mat4[5]*b+this.mat4[9]*E,this.mat4[14]+=this.mat4[2]*x+this.mat4[6]*b+this.mat4[10]*E,this.mat4[15]+=this.mat4[3]*x+this.mat4[7]*b+this.mat4[11]*E}},{key:"rotateX",value:function(g){this.rotate(g,1,0,0)}},{key:"rotateY",value:function(g){this.rotate(g,0,1,0)}},{key:"rotateZ",value:function(g){this.rotate(g,0,0,1)}},{key:"perspective",value:function(S,x,b,E){var S=1/Math.tan(S/2),k=1/(b-E);return this.mat4[0]=S/x,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=S,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(E+b)*k,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*E*b*k,this.mat4[15]=0,this}},{key:"ortho",value:function(g,x,b,E,S,k){var T=1/(g-x),j=1/(b-E),A=1/(S-k);return this.mat4[0]=-2*T,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*j,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*A,this.mat4[11]=0,this.mat4[12]=(g+x)*T,this.mat4[13]=(E+b)*j,this.mat4[14]=(k+S)*A,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(g,x,b,E){var S=new Array(4),k=this.mat4;return S[0]=k[0]*g+k[4]*x+k[8]*b+k[12]*E,S[1]=k[1]*g+k[5]*x+k[9]*b+k[13]*E,S[2]=k[2]*g+k[6]*x+k[10]*b+k[14]*E,S[3]=k[3]*g+k[7]*x+k[11]*b+k[15]*E,S}},{key:"multiplyPoint",value:function(b){var E=b.x,x=b.y,b=b.z,E=this.multiplyVec4(E,x,b,1);return new o.default.Vector(E[0],E[1],E[2])}},{key:"multiplyAndNormalizePoint",value:function(b){var E=b.x,x=b.y,b=b.z,E=this.multiplyVec4(E,x,b,1);return E[0]/=E[3],E[1]/=E[3],E[2]/=E[3],new o.default.Vector(E[0],E[1],E[2])}},{key:"multiplyDirection",value:function(b){var E=b.x,x=b.y,b=b.z,E=this.multiplyVec4(E,x,b,0);return new o.default.Vector(E[0],E[1],E[2])}},{key:"mult3x3",value:function(b){var x;if(b===this||b===this.mat3)x=this.copy().mat3;else if(b instanceof o.default.Matrix)x=b.mat3;else if(f(b))x=b;else{if(arguments.length!==9)return;x=arguments}var b=this.mat3[0],E=this.mat3[1],S=this.mat3[2];return this.mat3[0]=b*x[0]+E*x[3]+S*x[6],this.mat3[1]=b*x[1]+E*x[4]+S*x[7],this.mat3[2]=b*x[2]+E*x[5]+S*x[8],b=this.mat3[3],E=this.mat3[4],S=this.mat3[5],this.mat3[3]=b*x[0]+E*x[3]+S*x[6],this.mat3[4]=b*x[1]+E*x[4]+S*x[7],this.mat3[5]=b*x[2]+E*x[5]+S*x[8],b=this.mat3[6],E=this.mat3[7],S=this.mat3[8],this.mat3[6]=b*x[0]+E*x[3]+S*x[6],this.mat3[7]=b*x[1]+E*x[4]+S*x[7],this.mat3[8]=b*x[2]+E*x[5]+S*x[8],this}},{key:"column",value:function(g){return new o.default.Vector(this.mat3[3*g],this.mat3[3*g+1],this.mat3[3*g+2])}},{key:"row",value:function(g){return new o.default.Vector(this.mat3[g],this.mat3[g+3],this.mat3[g+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(g,x){return(x=x===void 0?g.copy():x).x=this.row(0).dot(g),x.y=this.row(1).dot(g),x.z=this.row(2).dot(g),x}},{key:"createSubMatrix3x3",value:function(){var g=new o.default.Matrix("mat3");return g.mat3[0]=this.mat4[0],g.mat3[1]=this.mat4[1],g.mat3[2]=this.mat4[2],g.mat3[3]=this.mat4[4],g.mat3[4]=this.mat4[5],g.mat3[5]=this.mat4[6],g.mat3[6]=this.mat4[8],g.mat3[7]=this.mat4[9],g.mat3[8]=this.mat4[10],g}}])&&c(u.prototype,m),p&&c(u,p),_}(),o.default.Matrix);l.default=y},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],329:[function(t,a,l){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,i){for(var f=0;f<i.length;f++){var y=i[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}t.default.RenderBuffer=function(){function c(y,_,u,m,p,g){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.size=y,this.src=_,this.dst=u,this.attr=m,this._renderer=p,this.map=g}var i,f;return i=c,(f=[{key:"_prepareBuffer",value:function(y,_){var u,m,p,b=_.attributes,g=this._renderer.GL,x=y.model||y,b=b[this.attr];b&&(u=y[this.dst],0<(m=x[this.src]).length?((p=!u)&&(y[this.dst]=u=g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,u),!p&&x.dirtyFlags[this.src]===!1||(p=(y=this.map)?y(m):m,this._renderer._bindBuffer(u,g.ARRAY_BUFFER,p),x.dirtyFlags[this.src]=!1),_.enableAttrib(b,this.size)):(y=b.location)!==-1&&this._renderer.registerEnabled.has(y)&&(g.disableVertexAttribArray(y),this._renderer.registerEnabled.delete(y)))}}])&&o(i.prototype,f),c}(),t=t.default.RenderBuffer,l.default=t},{"../core/main":275,"core-js/modules/es.array.map":164}],330:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(m=t("../core/main"))&&m.__esModule?m:{default:m},f=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=y();if(g&&g.has(p))return g.get(p);var x,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in p){var S;Object.prototype.hasOwnProperty.call(p,x)&&((S=E?Object.getOwnPropertyDescriptor(p,x):null)&&(S.get||S.set)?Object.defineProperty(b,x,S):b[x]=p[x])}return b.default=p,g&&g.set(p,b),b}(t("../core/constants"));function y(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,y=function(){return p},p)}function _(p){return function(g){if(Array.isArray(g)){for(var x=0,b=new Array(g.length);x<g.length;x++)b[x]=g[x];return b}}(p)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(p){return this.immediateMode.shapeMode=p!==void 0?p:f.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var u={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},m=(i.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==f.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},i.default.RendererGL.prototype.vertex=function(p,g){if(this.immediateMode.shapeMode===f.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var x in u){var b=u[x],x=this.immediateMode.geometry[x];x.push.apply(x,_(x.slice(x.length-3*b,x.length-2*b)).concat(_(x.slice(x.length-b,x.length))))}var E,S,k=E=S=0,T=(arguments.length===3?k=arguments[2]:arguments.length===4?(E=arguments[2],S=arguments[3]):arguments.length===5&&(k=arguments[2],E=arguments[3],S=arguments[4]),new i.default.Vector(p,g,k)),T=(this.immediateMode.geometry.vertices.push(T),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),T=(this.immediateMode.geometry.vertexColors.push(T[0],T[1],T[2],T[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(T[0],T[1],T[2],T[3]),this.textureMode!==f.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(E/=this._tex.width,S/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(E,S),this.immediateMode._bezierVertex[0]=p,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=k,this.immediateMode._quadraticVertex[0]=p,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=k,this},i.default.RendererGL.prototype.normal=function(p,g,x){return p instanceof i.default.Vector?this._currentNormal=p:this._currentNormal=new i.default.Vector(p,g,x),this},i.default.RendererGL.prototype.endShape=function(p,g,x,b,E,S){var k=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===f.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===f.TESS&&(this.immediateMode.shapeMode,f.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this.immediateMode.shapeMode!==f.LINE_STRIP&&this.immediateMode.shapeMode!==f.LINES||(this.immediateMode.shapeMode=f.TRIANGLE_FAN),this.immediateMode.shapeMode===f.QUADS?this.immediateMode.shapeMode=f.TRIANGLES:this.immediateMode.shapeMode===f.QUAD_STRIP&&(this.immediateMode.shapeMode=f.TRIANGLE_STRIP),this._doFill&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(k),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(p){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,p=p===f.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,p),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===f.TESS,p=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g||p)&&this.immediateMode.shapeMode!==f.LINES&&this._tesselateShape())},i.default.RendererGL.prototype._calculateEdges=function(p,g,x){var b=[],E=0,S=this.immediateMode.contourIndices.slice(),k=0;switch(p){case f.TRIANGLE_STRIP:for(E=0;E<g.length-2;E++)b.push([E,E+1]),b.push([E,E+2]);b.push([E,E+1]);break;case f.TRIANGLE_FAN:for(E=1;E<g.length-1;E++)b.push([0,E]),b.push([E,E+1]);b.push([0,g.length-1]);break;case f.TRIANGLES:for(E=0;E<g.length-2;E+=3)b.push([E,E+1]),b.push([E+1,E+2]),b.push([E+2,E]);break;case f.LINES:for(E=0;E<g.length-1;E+=2)b.push([E,E+1]);break;case f.QUADS:for(E=0;E<g.length-5;E+=6)b.push([E,E+1]),b.push([E+1,E+2]),b.push([E+3,E+5]),b.push([E+4,E+5]);break;case f.QUAD_STRIP:for(E=0;E<g.length-2;E+=2)b.push([E,E+1]),b.push([E,E+2]),b.push([E+1,E+3]);b.push([E,E+1]);break;default:for(E=0;E<g.length;E++)E+1<g.length&&E+1!==S[0]?b.push([E,E+1]):((x||k)&&b.push([E,k]),0<S.length&&(k=S.shift()))}return p!==f.TESS&&x&&b.push([g.length-1,0]),b},i.default.RendererGL.prototype._tesselateShape=function(){for(var p=this,g=(this.immediateMode.shapeMode=f.TRIANGLES,[[]]),x=0;x<this.immediateMode.geometry.vertices.length;x++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===x&&(this.immediateMode.contourIndices.shift(),g.push([])),g[g.length-1].push(this.immediateMode.geometry.vertices[x].x,this.immediateMode.geometry.vertices[x].y,this.immediateMode.geometry.vertices[x].z,this.immediateMode.geometry.uvs[2*x],this.immediateMode.geometry.uvs[2*x+1],this.immediateMode.geometry.vertexColors[4*x],this.immediateMode.geometry.vertexColors[4*x+1],this.immediateMode.geometry.vertexColors[4*x+2],this.immediateMode.geometry.vertexColors[4*x+3],this.immediateMode.geometry.vertexNormals[x].x,this.immediateMode.geometry.vertexNormals[x].y,this.immediateMode.geometry.vertexNormals[x].z);for(var b,E=this._triangulate(g),S=this.immediateMode.geometry.vertices,k=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),T=0,j=E.length;T<j;T+=i.default.RendererGL.prototype.tessyVertexSize)k.push.apply(k,_(E.slice(T+5,T+9))),this.normal.apply(this,_(E.slice(T+9,T+12))),this.vertex.apply(this,_(E.slice(T,T+5)));this.geometryBuilder&&(b=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(A){return A.map(function(C){if(!b.has(C)){var N=S[C],V=p.immediateMode.geometry.vertices.findIndex(function(H){return N.x===H.x&&N.y===H.y&&N.z===H.z});if(V===-1){for(var I=1/0,G=0,R=0;R<p.immediateMode.geometry.vertices.length;R++){var M=p.immediateMode.geometry.vertices[R],L=N.x-M.x,q=N.y-M.y,M=N.z-M.z,L=L*L+q*q+M*M;L<I&&(I=L,G=R)}V=G}b.set(C,V)}return b.get(C)})})),this.immediateMode.geometry.vertexColors=k},i.default.RendererGL.prototype._drawImmediateFill=function(){var p,g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,x=this.GL,b=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,p=this._getImmediateFillShader(),this._setFillUniforms(p),!0),E=!1,S=void 0;try{for(var k,T=this.immediateMode.buffers.fill[Symbol.iterator]();!(b=(k=T.next()).done);b=!0)k.value._prepareBuffer(this.immediateMode.geometry,p)}catch(j){E=!0,S=j}finally{try{b||T.return==null||T.return()}finally{if(E)throw S}}if(p.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor),g===1)x.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{x.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,g)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}p.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var p=this.GL,g=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),x=(this._setStrokeUniforms(g),!0),b=!1,E=void 0;try{for(var S,k=this.immediateMode.buffers.stroke[Symbol.iterator]();!(x=(S=k.next()).done);x=!0)S.value._prepareBuffer(this.immediateMode.geometry,g)}catch(T){b=!0,E=T}finally{try{x||k.return==null||k.return()}finally{if(b)throw E}}g.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),p.drawArrays(p.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),g.unbindShader()},i.default.RendererGL);l.default=m},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.find-index":156,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],331:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var m=y();if(m&&m.has(u))return m.get(u);var p,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in u){var b;Object.prototype.hasOwnProperty.call(u,p)&&((b=x?Object.getOwnPropertyDescriptor(u,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=u[p])}return g.default=u,m&&m.set(u,g),g}(t("../core/constants")));function y(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,y=function(){return u},u)}i.default.RendererGL.prototype.freeGeometry=function(u){u.gid?this._freeBuffers(u.gid):console.warn("The model you passed to freeGeometry does not have an id!")},i.default.RendererGL.prototype._initBufferDefaults=function(u){var m;return this._freeBuffers(u),1e3<Object.keys(this.retainedMode.geometry).length&&(m=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(m)),this.retainedMode.geometry[u]={}},i.default.RendererGL.prototype._freeBuffers=function(u){var m,p=this.retainedMode.geometry[u];function g(x){var b=!0,E=!1,S=void 0;try{for(var k,T=x[Symbol.iterator]();!(b=(k=T.next()).done);b=!0){var j=k.value;p[j.dst]&&(m.deleteBuffer(p[j.dst]),p[j.dst]=null)}}catch(A){E=!0,S=A}finally{try{b||T.return==null||T.return()}finally{if(E)throw S}}}p&&(delete this.retainedMode.geometry[u],m=this.GL,p.indexBuffer&&m.deleteBuffer(p.indexBuffer),g(this.retainedMode.buffers.stroke),g(this.retainedMode.buffers.fill))},i.default.RendererGL.prototype.createBuffers=function(E,m){var p,g,x,b=this.GL,E=this._initBufferDefaults(E),S=(E.model=m,E.indexBuffer);return m.faces.length?(S=S||(E.indexBuffer=b.createBuffer()),x=(g=(p=i.default.RendererGL.prototype._flatten(m.faces)).some(function(k){return 65535<k}))?Uint32Array:Uint16Array,this._bindBuffer(S,b.ELEMENT_ARRAY_BUFFER,p,x),E.indexBufferType=g?b.UNSIGNED_INT:b.UNSIGNED_SHORT,E.vertexCount=3*m.faces.length):(S&&(b.deleteBuffer(S),E.indexBuffer=null),E.vertexCount=m.vertices?m.vertices.length:0),E.lineVertexCount=m.lineVertices?m.lineVertices.length/3:0,E},i.default.RendererGL.prototype.drawBuffers=function(u){var m=this.GL,p=this.retainedMode.geometry[u];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[u].vertexCount){this._useVertexColor=0<p.model.vertexColors.length;var g=this._getRetainedFillShader(),x=(this._setFillUniforms(g),!0),b=!1,E=void 0;try{for(var S,k=this.retainedMode.buffers.fill[Symbol.iterator]();!(x=(S=k.next()).done);x=!0)S.value._prepareBuffer(p,g)}catch(N){b=!0,E=N}finally{try{x||k.return==null||k.return()}finally{if(b)throw E}}g.disableRemainingAttributes(),p.indexBuffer&&this._bindBuffer(p.indexBuffer,m.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(m.TRIANGLES,u),g.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<p.lineVertexCount){this._useLineColor=0<p.model.vertexStrokeColors.length;var T=this._getRetainedStrokeShader(),j=(this._setStrokeUniforms(T),!0),b=!1,E=void 0;try{for(var A,C=this.retainedMode.buffers.stroke[Symbol.iterator]();!(j=(A=C.next()).done);j=!0)A.value._prepareBuffer(p,T)}catch(I){b=!0,E=I}finally{try{j||C.return==null||C.return()}finally{if(b)throw E}}T.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),this._drawArrays(m.TRIANGLES,u),T.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(p),this},i.default.RendererGL.prototype.drawBuffersScaled=function(u,m,p,g){var x=this.uMVMatrix.copy();try{this.uMVMatrix.scale(m,p,g),this.drawBuffers(u)}finally{this.uMVMatrix=x}},i.default.RendererGL.prototype._drawArrays=function(u,m){return this.GL.drawArrays(u,0,this.retainedMode.geometry[m].lineVertexCount),this},i.default.RendererGL.prototype._drawElements=function(u,p){var p=this.retainedMode.geometry[p],g=this.GL;if(p.indexBuffer){if(this._pInst.webglVersion!==f.WEBGL2&&p.indexBufferType===g.UNSIGNED_INT&&!g.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");g.drawElements(g.TRIANGLES,p.vertexCount,p.indexBufferType,0)}else g.drawArrays(u||g.TRIANGLES,0,p.vertexCount)},i.default.RendererGL.prototype._drawPoints=function(u,m){var p=this.GL,g=this._getImmediatePointShader();this._setPointUniforms(g),this._bindBuffer(m,p.ARRAY_BUFFER,this._vToNArray(u),Float32Array,p.STATIC_DRAW),g.enableAttrib(g.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),p.drawArrays(p.Points,0,u.length),g.unbindShader()};var _=i.default.RendererGL;l.default=_},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"./p5.RendererGL":332,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.some":166,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],332:[function(R,a,l){function o(O){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(O)}function c(O){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(U){return o(U)}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":o(U)})(O)}R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.concat"),R("core-js/modules/es.array.copy-within"),R("core-js/modules/es.array.every"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.from"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.array.slice"),R("core-js/modules/es.array.some"),R("core-js/modules/es.map"),R("core-js/modules/es.object.assign"),R("core-js/modules/es.object.get-own-property-descriptor"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.reflect.construct"),R("core-js/modules/es.reflect.get"),R("core-js/modules/es.regexp.to-string"),R("core-js/modules/es.set"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.float64-array"),R("core-js/modules/es.typed-array.int16-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint16-array"),R("core-js/modules/es.typed-array.uint32-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/es.weak-map"),R("core-js/modules/web.dom-collections.iterator"),R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.concat"),R("core-js/modules/es.array.copy-within"),R("core-js/modules/es.array.every"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.from"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.array.slice"),R("core-js/modules/es.array.some"),R("core-js/modules/es.map"),R("core-js/modules/es.object.assign"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.set"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.float64-array"),R("core-js/modules/es.typed-array.int16-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint16-array"),R("core-js/modules/es.typed-array.uint32-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.readPixelsWebGL=L,l.readPixelWebGL=H,l.default=void 0;var i=p(R("../core/main")),f=function(O){if(O&&O.__esModule)return O;if(O===null||c(O)!=="object"&&typeof O!="function")return{default:O};var U=m();if(U&&U.has(O))return U.get(O);var J,Z={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(J in O){var B;Object.prototype.hasOwnProperty.call(O,J)&&((B=z?Object.getOwnPropertyDescriptor(O,J):null)&&(B.get||B.set)?Object.defineProperty(Z,J,B):Z[J]=O[J])}return Z.default=O,U&&U.set(O,Z),Z}(R("../core/constants")),y=p(R("./GeometryBuilder")),_=p(R("libtess")),u=(R("./p5.Shader"),R("./p5.Camera"),R("../core/p5.Renderer"),R("./p5.Matrix"),R("./p5.Framebuffer"),R("path"),R("./p5.Texture"));function m(){var O;return typeof WeakMap!="function"?null:(O=new WeakMap,m=function(){return O},O)}function p(O){return O&&O.__esModule?O:{default:O}}function g(O){return function(U){if(Array.isArray(U)){for(var J=0,Z=new Array(U.length);J<U.length;J++)Z[J]=U[J];return Z}}(O)||function(U){if(Symbol.iterator in Object(U)||Object.prototype.toString.call(U)==="[object Arguments]")return Array.from(U)}(O)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(O,U){for(var J=0;J<U.length;J++){var Z=U[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(O,Z.key,Z)}}function b(O,U,J){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(D,z,B){var D=function(X,K){for(;!Object.prototype.hasOwnProperty.call(X,K)&&(X=T(X))!==null;);return X}(D,z);if(D)return(D=Object.getOwnPropertyDescriptor(D,z)).get?D.get.call(B):D.value})(O,U,J||O)}function E(O,U){return(E=Object.setPrototypeOf||function(J,Z){return J.__proto__=Z,J})(O,U)}function S(O){return function(){var U,J,Z=T(O);return U=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(U=T(this).constructor,Reflect.construct(Z,arguments,U)):Z.apply(this,arguments),Z=this,!(J=U)||c(J)!=="object"&&typeof J!="function"?k(Z):J}}function k(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function T(O){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(O)}function j(O,U,J){U in O?Object.defineProperty(O,U,{value:J,enumerable:!0,configurable:!0,writable:!0}):O[U]=J}function A(O,U){G+="#define STROKE_CAP_".concat(O," ").concat(U,`
`),V[f[O]]=U}function C(O,U){G+="#define STROKE_JOIN_".concat(O," ").concat(U,`
`),I[f[O]]=U}var N,V={},I={},G="",R=(A("ROUND",0),A("PROJECT",1),A("SQUARE",2),C("ROUND",0),C("MITER",1),C("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return smoothstep(vec3(0.0), vec3(0.8), texture.xyz);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal);
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return pow(outColor.xyz, vec3(10.0));
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),q={immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:R+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:R+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:G+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:G+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.025;
	float nrSamples = 0.0;
  
	for(float phi = 0.0; phi < 2.0 * PI; phi += sampleDelta)
	{
    for(float theta = 0.0; theta < ( 0.5 ) * PI; theta += sampleDelta)
    {
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 1024; // 4096\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
	if (n > 0)\r
	{\r
  	denom = mod(float(n), 2.0);\r
  	result += denom * invBase;\r
  	invBase = invBase / 2.0;\r
  	n = int(float(n) / 2.0);\r
	}\r
  }\r
\r
  return result;\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`};for(N in q)q[N]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+q[N];j(R={},f.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),j(R,f.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),j(R,f.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),j(R,f.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),j(R,f.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),j(R,f.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),j(R,f.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),j(R,f.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var M=R;function L(O,U,fe,Z,z,B,D,X,K,re){var se=U.getParameter(U.FRAMEBUFFER_BINDING),fe=(U.bindFramebuffer(U.FRAMEBUFFER,fe),X===U.RGBA?4:3),xe=B*D*fe,he=K===U.UNSIGNED_BYTE?Uint8Array:Float32Array;if(O instanceof he&&O.length===xe||(O=new he(xe)),U.readPixels(Z,re?re-z-D:z,B,D,X,K,O),U.bindFramebuffer(U.FRAMEBUFFER,se),re)for(var _e=Math.floor(D/2),ye=new he(B*fe),ue=0;ue<_e;ue++){var pe=ue*B*4,ke=(D-ue-1)*B*4;ye.set(O.subarray(pe,pe+4*B)),O.copyWithin(pe,ke,ke+4*B),O.set(ye,ke)}return O}function H(O,K,J,Z,z,B,D){var X=O.getParameter(O.FRAMEBUFFER_BINDING),K=(O.bindFramebuffer(O.FRAMEBUFFER,K),z===O.RGBA?4:3),K=new(B===O.UNSIGNED_BYTE?Uint8Array:Float32Array)(K);return O.readPixels(J,D?D-Z-1:Z,1,1,z,B,K),O.bindFramebuffer(O.FRAMEBUFFER,X),Array.from(K)}i.default.prototype.setAttributes=function(O,U){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var J=!0;if(U!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[O]!==U&&(this._glAttributes[O]=U,J=!1)):O instanceof Object&&this._glAttributes!==O&&(this._glAttributes=O,J=!1),this._renderer.isP3D&&!J){if(!this._setupDone){for(var Z in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(Z))return void i.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},i.default.RendererGL=function(O){var U=Z;if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(O&&O.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),O&&E(U,O);var J=S(Z);function Z(z,B,D,X){if(this instanceof Z)return(z=J.call(this,z,B,D))._setAttributeDefaults(B),z._initContext(),z.isP3D=!0,z.geometryBuilder=void 0,z.GL=z.drawingContext,z._pInst._setProperty("drawingContext",z.drawingContext),z._isErasing=!1,z._clipDepths=[],z._isClipApplied=!1,z._stencilTestOn=!1,z._enableLighting=!1,z.ambientLightColors=[],z.specularColors=[1,1,1],z.directionalLightDirections=[],z.directionalLightDiffuseColors=[],z.directionalLightSpecularColors=[],z.pointLightPositions=[],z.pointLightDiffuseColors=[],z.pointLightSpecularColors=[],z.spotLightPositions=[],z.spotLightDirections=[],z.spotLightDiffuseColors=[],z.spotLightSpecularColors=[],z.spotLightAngle=[],z.spotLightConc=[],z.activeImageLight=null,z.diffusedTextures=new Map,z.specularTextures=new Map,z.drawMode=f.FILL,z.curFillColor=z._cachedFillStyle=[1,1,1,1],z.curAmbientColor=z._cachedFillStyle=[1,1,1,1],z.curSpecularColor=z._cachedFillStyle=[0,0,0,0],z.curEmissiveColor=z._cachedFillStyle=[0,0,0,0],z.curStrokeColor=z._cachedStrokeStyle=[0,0,0,1],z.curBlendMode=f.BLEND,z._cachedBlendMode=void 0,z.webglVersion===f.WEBGL2?z.blendExt=z.GL:z.blendExt=z.GL.getExtension("EXT_blend_minmax"),z._isBlending=!1,z._hasSetAmbient=!1,z._useSpecularMaterial=!1,z._useEmissiveMaterial=!1,z._useNormalMaterial=!1,z._useShininess=1,z._useLineColor=!1,z._useVertexColor=!1,z.registerEnabled=new Set,z._tint=[255,255,255,255],z.constantAttenuation=1,z.linearAttenuation=0,z.quadraticAttenuation=0,z.uMVMatrix=new i.default.Matrix,z.uPMatrix=new i.default.Matrix,z.uNMatrix=new i.default.Matrix("mat3"),z._currentNormal=new i.default.Vector(0,0,1),z._curCamera=new i.default.Camera(k(z)),z._curCamera._computeCameraDefaultSettings(),z._curCamera._setDefaultCamera(),z.filterCamera=new i.default.Camera(k(z)),z.filterCamera._computeCameraDefaultSettings(),z.filterCamera._setDefaultCamera(),z.prevTouches=[],z.zoomVelocity=0,z.rotateVelocity=new i.default.Vector(0,0),z.moveVelocity=new i.default.Vector(0,0),z.executeZoom=!1,z.executeRotateAndMove=!1,z._defaultLightShader=void 0,z._defaultImmediateModeShader=void 0,z._defaultNormalShader=void 0,z._defaultColorShader=void 0,z._defaultPointShader=void 0,z.userFillShader=void 0,z.userStrokeShader=void 0,z.userPointShader=void 0,z.retainedMode={geometry:{},buffers:{stroke:[new i.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",k(z)),new i.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",k(z)),new i.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",k(z)),new i.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",k(z)),new i.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",k(z))],fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",k(z),z._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",k(z),z._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",k(z)),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",k(z)),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",k(z),z._flatten)],text:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",k(z),z._vToNArray),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",k(z),z._flatten)]}},z.immediateMode={geometry:new i.default.Geometry,shapeMode:f.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",k(z),z._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",k(z),z._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",k(z)),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",k(z)),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",k(z),z._flatten)],stroke:[new i.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",k(z)),new i.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",k(z)),new i.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",k(z)),new i.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",k(z)),new i.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",k(z))],point:z.GL.createBuffer()}},z.pointSize=5,z.curStrokeWeight=1,z.curStrokeCap=f.ROUND,z.curStrokeJoin=f.ROUND,z.textures=new Map,z.framebuffers=new Set,z.activeFramebuffers=[],z.filterShader=void 0,z.filterLayer=void 0,z.filterLayerTemp=void 0,z.defaultFilterShaders={},z.textureMode=f.IMAGE,z.textureWrapX=f.CLAMP,z.textureWrapY=f.CLAMP,z._tex=null,z._curveTightness=6,z._lookUpTableBezier=[],z._lookUpTableQuadratic=[],z._lutBezierDetail=0,z._lutQuadraticDetail=0,z.isProcessingVertices=!1,z._tessy=z._initTessy(),z.fontInfos={},z._curShader=void 0,z;throw new TypeError("Cannot call a class as a function")}return U=Z,(O=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new y.default(this)}},{key:"endGeometry",value:function(){var z;if(this.geometryBuilder)return z=this.geometryBuilder.finish(),this.geometryBuilder=void 0,z;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(z){return this.beginGeometry(),z(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(z){var B={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};z._glAttributes===null?z._glAttributes=B:z._glAttributes=Object.assign(B,z._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?f.WEBGL2:f.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var z=this.drawingContext;z.enable(z.DEPTH_TEST),z.depthFunc(z.LEQUAL),z.viewport(0,0,z.drawingBufferWidth,z.drawingBufferHeight),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(z,B){var D,X=this.width,K=this.height,se=this.canvas.id,re=this._pInst instanceof i.default.Graphics,se=(re?((D=this._pInst).canvas.parentNode.removeChild(D.canvas),D.canvas=document.createElement("canvas"),(D._pInst._userNode||document.body).appendChild(D.canvas),i.default.Element.call(D,D.canvas,D._pInst),D.width=X,D.height=K):((D=this.canvas)&&D.parentNode.removeChild(D),(D=document.createElement("canvas")).id=se,(this._pInst._userNode||document.body).appendChild(D),this._pInst.canvas=D,this.canvas=D),new i.default.RendererGL(this._pInst.canvas,this._pInst,!re));this._pInst._setProperty("_renderer",se),se.resize(X,K),se._applyDefaults(),re||this._pInst._elements.push(se),typeof B=="function"&&setTimeout(function(){B.apply(window._renderer,z)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var X=(X=this._pInst).color.apply(X,arguments),z=X.levels[0]/255,B=X.levels[1]/255,D=X.levels[2]/255,X=X.levels[3]/255;this.clear(z,B,D,X)}},{key:"fill",value:function(z,B,D,X){var K=i.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=K._array,this.drawMode=f.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(z,B,D,X){var K=i.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=K._array}},{key:"strokeCap",value:function(z){this.curStrokeCap=z}},{key:"strokeJoin",value:function(z){this.curStrokeJoin=z}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(z,B){z.width===B.width&&z.height===B.height||z.resize(B.width,B.height),z.pixelDensity()!==B.pixelDensity()&&z.pixelDensity(B.pixelDensity())}},{key:"filter",value:function(){var z,B,D=this,X=this.getFilterLayer(),K=void 0,re=void 0,se=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(re=arguments.length<=0?void 0:arguments[0],j(z={},f.BLUR,3),j(z,f.POSTERIZE,4),j(z,f.THRESHOLD,.5),K=re in(z=z)&&(arguments.length<=1?void 0:arguments[1])===void 0?z[re]:arguments.length<=1?void 0:arguments[1],re in this.defaultFilterShaders||(this.defaultFilterShaders[re]=new i.default.Shader(X._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,M[re])),this.filterShader=this.defaultFilterShaders[re]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),fe=(this.matchSize(X,se),se!==this&&(this.filterCamera=this.getFilterLayer().createCamera()),X.draw(function(){return D._pInst.clear()}),[1/(se.width*se.pixelDensity()),1/(se.height*se.pixelDensity())]);re===f.BLUR?(B=this.getFilterLayerTemp(),this.matchSize(B,se),this._pInst.push(),this._pInst.noStroke(),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",fe),this.filterShader.setUniform("canvasSize",[se.width,se.height]),this.filterShader.setUniform("radius",Math.max(1,K)),B.draw(function(){D.filterShader.setUniform("direction",[1,0]),D.filterShader.setUniform("tex0",se),D._pInst.clear(),D._pInst.shader(D.filterShader),D._pInst.rect(-se.width/2,-se.height/2,se.width,se.height)}),X.draw(function(){D.filterShader.setUniform("direction",[0,1]),D.filterShader.setUniform("tex0",B),D._pInst.clear(),D._pInst.shader(D.filterShader),D._pInst.rect(-se.width/2,-se.height/2,se.width,se.height)}),this._pInst.pop()):X.draw(function(){D._pInst.noStroke(),D._pInst.shader(D.filterShader),D.filterShader.setUniform("tex0",se),D.filterShader.setUniform("texelSize",fe),D.filterShader.setUniform("canvasSize",[se.width,se.height]),D.filterShader.setUniform("filterParameter",K),D._pInst.rect(-se.width/2,-se.height/2,se.width,se.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(f.CORNER),this._pInst.blendMode(f.BLEND),this.filterCamera._resize(),this._pInst.setCamera(this.filterCamera),this._pInst.resetMatrix(),this._pInst.image(X,-this.width/2,-this.height/2,this.width,this.height),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(z){return z?this._pInst.pixelDensity(z):this._pInst.pixelDensity()}},{key:"blendMode",value:function(z){z===f.DARKEST||z===f.LIGHTEST||z===f.ADD||z===f.BLEND||z===f.SUBTRACT||z===f.SCREEN||z===f.EXCLUSION||z===f.REPLACE||z===f.MULTIPLY||z===f.REMOVE?this.curBlendMode=z:z!==f.BURN&&z!==f.OVERLAY&&z!==f.HARD_LIGHT&&z!==f.SOFT_LIGHT&&z!==f.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(z,B){this._isErasing||(this._cachedBlendMode=this.curBlendMode,this._isErasing=!0,this.blendMode(f.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,z/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,B/255])}},{key:"noErase",value:function(){var z;this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),z=this.curBlendMode,this.blendMode(this._cachedBlendMode),this._cachedBlendMode=z,this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},z=(b(T(Z.prototype),"beginClip",this).call(this,z),this.drawTarget()._isClipApplied=!0,this.GL);z.clearStencil(0),z.clear(z.STENCIL_BUFFER_BIT),z.enable(z.STENCIL_TEST),this._stencilTestOn=!0,z.stencilFunc(z.ALWAYS,1,255),z.stencilOp(z.KEEP,z.KEEP,z.REPLACE),z.disable(z.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var z=this.GL;z.stencilOp(z.KEEP,z.KEEP,z.KEEP),z.stencilFunc(this._clipInvert?z.EQUAL:z.NOTEQUAL,0,255),z.enable(z.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),b(T(Z.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(z){this.curStrokeWeight!==z&&(this.pointSize=z,this.curStrokeWeight=z)}},{key:"_getPixel",value:function(z,B){var D=this.GL;return H(D,null,z,B,D.RGBA,D.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var z,B,D=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(z=this._pInst._pixelDensity,B=this.GL,D._setProperty("pixels",L(D.pixels,B,null,0,0,this.width*z,this.height*z,B.RGBA,B.UNSIGNED_BYTE,this.height*z)))}},{key:"updatePixels",value:function(){var z=this._getTempFramebuffer();z.pixels=this._pixelsState.pixels,z.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(f.CENTER),this._pInst.image(z,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:f.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:f.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(z){return this.retainedMode.geometry[z]!==void 0}},{key:"viewport",value:function(z,B){this._viewport=[0,0,z,B],this.GL.viewport(0,0,z,B)}},{key:"resize",value:function(K,X){i.default.Renderer.prototype.resize.call(this,K,X),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var K=this._pixelsState,D=(K.pixels!==void 0&&K._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),X=!1,K=void 0;try{for(var re,se=this.framebuffers[Symbol.iterator]();!(D=(re=se.next()).done);D=!0)re.value._canvasSizeChanged()}catch(fe){X=!0,K=fe}finally{try{D||se.return==null||se.return()}finally{if(X)throw K}}}},{key:"clear",value:function(){var z=(arguments.length<=0?void 0:arguments[0])||0,B=(arguments.length<=1?void 0:arguments[1])||0,D=(arguments.length<=2?void 0:arguments[2])||0,X=(arguments.length<=3?void 0:arguments[3])||0,K=this.activeFramebuffer();K&&K.format===f.UNSIGNED_BYTE&&!K.antialias&&X===0&&(X=1e-10),this.GL.clearColor(z*X,B*X,D*X,X),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(z,B,D,X,K,re){arguments.length===16?i.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([z,B,0,0,D,X,0,0,0,0,1,0,K,re,0,1])}},{key:"translate",value:function(z,B,D){return z instanceof i.default.Vector&&(D=z.z,B=z.y,z=z.x),this.uMVMatrix.translate([z,B,D]),this}},{key:"scale",value:function(z,B,D){return this.uMVMatrix.scale(z,B,D),this}},{key:"rotate",value:function(z,B){return B===void 0?this.rotateZ(z):(i.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(z){return this.rotate(z,1,0,0),this}},{key:"rotateY",value:function(z){return this.rotate(z,0,1,0),this}},{key:"rotateZ",value:function(z){return this.rotate(z,0,0,1),this}},{key:"push",value:function(){var z=i.default.Renderer.prototype.push.apply(this),B=z.properties;return B.uMVMatrix=this.uMVMatrix.copy(),B.uPMatrix=this.uPMatrix.copy(),B._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),B.ambientLightColors=this.ambientLightColors.slice(),B.specularColors=this.specularColors.slice(),B.directionalLightDirections=this.directionalLightDirections.slice(),B.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),B.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),B.pointLightPositions=this.pointLightPositions.slice(),B.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),B.pointLightSpecularColors=this.pointLightSpecularColors.slice(),B.spotLightPositions=this.spotLightPositions.slice(),B.spotLightDirections=this.spotLightDirections.slice(),B.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),B.spotLightSpecularColors=this.spotLightSpecularColors.slice(),B.spotLightAngle=this.spotLightAngle.slice(),B.spotLightConc=this.spotLightConc.slice(),B.userFillShader=this.userFillShader,B.userStrokeShader=this.userStrokeShader,B.userPointShader=this.userPointShader,B.pointSize=this.pointSize,B.curStrokeWeight=this.curStrokeWeight,B.curStrokeColor=this.curStrokeColor,B.curFillColor=this.curFillColor,B.curAmbientColor=this.curAmbientColor,B.curSpecularColor=this.curSpecularColor,B.curEmissiveColor=this.curEmissiveColor,B._hasSetAmbient=this._hasSetAmbient,B._useSpecularMaterial=this._useSpecularMaterial,B._useEmissiveMaterial=this._useEmissiveMaterial,B._useShininess=this._useShininess,B.constantAttenuation=this.constantAttenuation,B.linearAttenuation=this.linearAttenuation,B.quadraticAttenuation=this.quadraticAttenuation,B._enableLighting=this._enableLighting,B._useNormalMaterial=this._useNormalMaterial,B._tex=this._tex,B.drawMode=this.drawMode,B._currentNormal=this._currentNormal,B.curBlendMode=this.curBlendMode,B.activeImageLight=this.activeImageLight,z}},{key:"pop",value:function(){var z;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var B=arguments.length,D=new Array(B),X=0;X<B;X++)D[X]=arguments[X];(z=b(T(Z.prototype),"pop",this)).call.apply(z,[this].concat(D)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var z=this.drawTarget();z._isClipApplied!==this._stencilTestOn&&(z._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var z=this.userStrokeShader;return z&&z.isStrokeShader()?z:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var z=this.userFillShader;if(this._useNormalMaterial&&(!z||!z.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!z||!z.isLightShader())return this._getLightShader()}else if(this._tex){if(!z||!z.isTextureShader())return this._getLightShader()}else if(!z)return this._getImmediateModeShader();return z}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var z=this.userFillShader;if(this._enableLighting){if(!z||!z.isLightShader())return this._getLightShader()}else if(this._tex){if(!z||!z.isTextureShader())return this._getLightShader()}else if(!z)return this._getColorShader();return z}},{key:"_getImmediatePointShader",value:function(){var z=this.userPointShader;return z&&z.isPointShader()?z:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+q.phongFrag):this._defaultLightShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+q.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===f.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(z,B){var D="";return this.webglVersion===f.WEBGL2&&(D+=`#version 300 es
#define WEBGL2
`),z==="vert"?D+=`#define VERTEX_SHADER
`:z==="frag"&&(D+=`#define FRAGMENT_SHADER
`),B&&(D+="precision ".concat(B,` float;
`)),D}},{key:"_getEmptyTexture",value:function(){var z;return this._emptyTexture||((z=new i.default.Image(1,1)).set(0,0,255),this._emptyTexture=new i.default.Texture(this,z)),this._emptyTexture}},{key:"getTexture",value:function(z){z instanceof i.default.Framebuffer&&(z=z.color);var B=this.textures.get(z);return B||(B=new i.default.Texture(this,z),this.textures.set(z,B),B)}},{key:"getDiffusedTexture",value:function(z){var B,D;return this.diffusedTextures.get(z)!=null?this.diffusedTextures.get(z):(B=Math.floor(z.height/z.width*200),D=(B=this._pInst.createGraphics(200,B,f.WEBGL)).createShader(q.imageLightVert,q.imageLightDiffusedFrag),B.shader(D),D.setUniform("environmentMap",z),B.noStroke(),B.rectMode(B.CENTER),B.rect(0,0,B.width,B.height),this.diffusedTextures.set(z,B),B)}},{key:"getSpecularTexture",value:function(z){if(this.specularTextures.get(z)!=null)return this.specularTextures.get(z);var B,D=[],X=this._pInst.createGraphics(512,512,f.WEBGL),K=Math.log(512)/Math.log(2);X.pixelDensity(1);for(var re=512;1<=re;re/=2){X.resizeCanvas(re,re);var se=1-Math.log(re)/Math.log(2)/K,fe=X.createShader(q.imageLightVert,q.imageLightSpecularFrag);X.shader(fe),X.clear(),fe.setUniform("environmentMap",z),fe.setUniform("roughness",se),X.noStroke(),X.plane(re,re),D.push(X.get().drawingContext.getImageData(0,0,re,re))}return X.remove(),B=new u.MipmapTexture(this,D,{}),this.specularTextures.set(z,B),B}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(z){return new i.default.Framebuffer(this,z)}},{key:"_setStrokeUniforms",value:function(z){z.bindShader(),z.setUniform("uUseLineColor",this._useLineColor),z.setUniform("uMaterialColor",this.curStrokeColor),z.setUniform("uStrokeWeight",this.curStrokeWeight),z.setUniform("uStrokeCap",V[this.curStrokeCap]),z.setUniform("uStrokeJoin",I[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(z){z.bindShader(),z.setUniform("uUseVertexColor",this._useVertexColor),z.setUniform("uMaterialColor",this.curFillColor),z.setUniform("isTexture",!!this._tex),this._tex&&z.setUniform("uSampler",this._tex),z.setUniform("uTint",this._tint),z.setUniform("uHasSetAmbient",this._hasSetAmbient),z.setUniform("uAmbientMatColor",this.curAmbientColor),z.setUniform("uSpecularMatColor",this.curSpecularColor),z.setUniform("uEmissiveMatColor",this.curEmissiveColor),z.setUniform("uSpecular",this._useSpecularMaterial),z.setUniform("uEmissive",this._useEmissiveMaterial),z.setUniform("uShininess",this._useShininess),this._setImageLightUniforms(z),z.setUniform("uUseLighting",this._enableLighting);var B=this.pointLightDiffuseColors.length/3,B=(z.setUniform("uPointLightCount",B),z.setUniform("uPointLightLocation",this.pointLightPositions),z.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),z.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),B=(z.setUniform("uDirectionalLightCount",B),z.setUniform("uLightingDirection",this.directionalLightDirections),z.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),z.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),B=(z.setUniform("uAmbientLightCount",B),z.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);z.setUniform("uSpotLightCount",B),z.setUniform("uSpotLightAngle",this.spotLightAngle),z.setUniform("uSpotLightConc",this.spotLightConc),z.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),z.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),z.setUniform("uSpotLightLocation",this.spotLightPositions),z.setUniform("uSpotLightDirection",this.spotLightDirections),z.setUniform("uConstantAttenuation",this.constantAttenuation),z.setUniform("uLinearAttenuation",this.linearAttenuation),z.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),z.bindTextures()}},{key:"_setImageLightUniforms",value:function(z){var B,D;z.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(B=this.getDiffusedTexture(this.activeImageLight),z.setUniform("environmentMapDiffused",B),B=this.getSpecularTexture(this.activeImageLight),D=20/this._useShininess,z.setUniform("levelOfDetail",8*D),z.setUniform("environmentMapSpecular",B))}},{key:"_setPointUniforms",value:function(z){z.bindShader(),z.setUniform("uMaterialColor",this.curStrokeColor),z.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(z,B,D,X,K){B=B||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(B,z),D!==void 0&&((z=D)instanceof i.default.DataArray?z=D.dataArray():z instanceof(X||Float32Array)||(z=new(X||Float32Array)(z)),this.GL.bufferData(B,z,K||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(z,B){return z.length===B.length&&z.every(function(D,X){return D===B[X]})}},{key:"_isTypedArray",value:function(z){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(B){return z instanceof B})}},{key:"_flatten",value:function(z){if(z.length===0)return[];var B;if(2e4<z.length){for(var D=[],X=z.slice(),K=X.pop();Array.isArray(K)?X.push.apply(X,g(K)):D.push(K),X.length&&(K=X.pop())!==void 0;);return D.reverse(),D}return(B=[]).concat.apply(B,g(z))}},{key:"_vToNArray",value:function(z){var B=[],D=!0,X=!1,K=void 0;try{for(var re,se=z[Symbol.iterator]();!(D=(re=se.next()).done);D=!0){var fe=re.value;B.push(fe.x,fe.y,fe.z)}}catch(xe){X=!0,K=xe}finally{try{D||se.return==null||se.return()}finally{if(X)throw K}}return B}},{key:"_bezierCoefficients",value:function(z){var B=z*z,D=1-z,X=D*D;return[X*D,3*X*z,3*D*B,B*z]}},{key:"_quadraticCoefficients",value:function(z){var B=1-z;return[B*B,2*B*z,z*z]}},{key:"_bezierToCatmull",value:function(z){return[z[1],z[1]+(z[2]-z[0])/this._curveTightness,z[2]-(z[3]-z[1])/this._curveTightness,z[2]]}},{key:"_initTessy",value:function(){var z=new _.default.GluTesselator;return z.gluTessCallback(_.default.gluEnum.GLU_TESS_VERTEX_DATA,function(B,D){for(var X=0;X<B.length;X++)D.push(B[X])}),z.gluTessCallback(_.default.gluEnum.GLU_TESS_BEGIN,function(B){B!==_.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(B))}),z.gluTessCallback(_.default.gluEnum.GLU_TESS_ERROR,function(B){console.log("error callback"),console.log("error number: ".concat(B))}),z.gluTessCallback(_.default.gluEnum.GLU_TESS_COMBINE,function(B,D,X){for(var K=new Array(i.default.RendererGL.prototype.tessyVertexSize).fill(0),re=0;re<X.length;re++)for(var se=0;se<K.length;se++)X[re]!==0&&D[re]&&(K[se]+=D[re][se]*X[re]);return K}),z.gluTessCallback(_.default.gluEnum.GLU_TESS_EDGE_FLAG,function(B){}),z.gluTessProperty(_.default.gluEnum.GLU_TESS_WINDING_RULE,_.default.windingRule.GLU_TESS_WINDING_NONZERO),z}},{key:"_triangulate",value:function(z){var B=z[0]?z[0][2]:void 0,D=!0,X=!0,xe=!1,_e=void 0;try{for(var K,re=z[Symbol.iterator]();!(X=(K=re.next()).done);X=!0)for(var se=K.value,fe=0;fe<se.length;fe+=i.default.RendererGL.prototype.tessyVertexSize)if(se[fe+2]!==B){D=!1;break}}catch(te){xe=!0,_e=te}finally{try{X||re.return==null||re.return()}finally{if(xe)throw _e}}D?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var xe=[],he=(this._tessy.gluTessBeginPolygon(xe),!0),_e=!1,ye=void 0;try{for(var ue,pe=z[Symbol.iterator]();!(he=(ue=pe.next()).done);he=!0){var ke=ue.value;this._tessy.gluTessBeginContour();for(var Ie=0;Ie<ke.length;Ie+=i.default.RendererGL.prototype.tessyVertexSize){var $=ke.slice(Ie,Ie+i.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex($,$)}this._tessy.gluTessEndContour()}}catch(te){_e=!0,ye=te}finally{try{he||pe.return==null||pe.return()}finally{if(_e)throw ye}}return this._tessy.gluTessEndPolygon(),xe}}])&&x(U.prototype,O),Z}(i.default.Renderer),i.default.prototype._assert3d=function(O){if(!this._renderer.isP3D)throw new Error("".concat(O,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},i.default.RendererGL.prototype.tessyVertexSize=12,R=i.default.RendererGL,l.default=R},{"../core/constants":264,"../core/main":275,"../core/p5.Renderer":278,"./GeometryBuilder":319,"./p5.Camera":324,"./p5.Framebuffer":326,"./p5.Matrix":328,"./p5.Shader":333,"./p5.Texture":334,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.map":169,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.float64-array":212,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int16-array":216,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,libtess:247,path:250}],333:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(i,f){for(var y=0;y<f.length;y++){var _=f[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.Shader=function(){function i(_,u,m){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._renderer=_,this._vertSrc=u,this._fragSrc=m,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var f,y;return f=i,(y=[{key:"init",value:function(){if(this._glProgram===0){var _=this._renderer.GL;if(this._vertShader=_.createShader(_.VERTEX_SHADER),_.shaderSource(this._vertShader,this._vertSrc),_.compileShader(this._vertShader),!_.getShaderParameter(this._vertShader,_.COMPILE_STATUS))return o.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(_.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=_.createShader(_.FRAGMENT_SHADER),_.shaderSource(this._fragShader,this._fragSrc),_.compileShader(this._fragShader),!_.getShaderParameter(this._fragShader,_.COMPILE_STATUS))return o.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(_.getShaderInfoLog(this._fragShader))),null;this._glProgram=_.createProgram(),_.attachShader(this._glProgram,this._vertShader),_.attachShader(this._glProgram,this._fragShader),_.linkProgram(this._glProgram),_.getProgramParameter(this._glProgram,_.LINK_STATUS)||o.default._friendlyError("Snap! Error linking shader program: ".concat(_.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(_){var u=new o.default.Shader(_._renderer,this._vertSrc,this._fragSrc);return u.ensureCompiledOnContext(_),u}},{key:"ensureCompiledOnContext",value:function(_){if(this._glProgram!==0&&this._renderer!==_._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=_._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var _=this._renderer.GL,u=_.getProgramParameter(this._glProgram,_.ACTIVE_ATTRIBUTES),m=0;m<u;++m){var p=_.getActiveAttrib(this._glProgram,m),g=p.name,x=_.getAttribLocation(this._glProgram,g),b={};b.name=g,b.location=x,b.index=m,b.type=p.type,b.size=p.size,this.attributes[g]=b}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var _=this._renderer.GL,u=_.getProgramParameter(this._glProgram,_.ACTIVE_UNIFORMS),m=0,p=0;p<u;++p){var g=_.getActiveUniform(this._glProgram,p),x={},b=(x.location=_.getUniformLocation(this._glProgram,g.name),x.size=g.size,g.name);1<g.size&&(b=b.substring(0,b.indexOf("[0]"))),x.name=b,x.type=g.type,x._cachedData=void 0,x.type===_.SAMPLER_2D&&(x.samplerIndex=m,m++,this.samplers.push(x)),x.isArray=1<g.size||x.type===_.FLOAT_MAT3||x.type===_.FLOAT_MAT4||x.type===_.FLOAT_VEC2||x.type===_.FLOAT_VEC3||x.type===_.FLOAT_VEC4||x.type===_.INT_VEC2||x.type===_.INT_VEC4||x.type===_.INT_VEC3,this.uniforms[b]=x}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var _=this._renderer.GL,u=!0,m=!1,p=void 0;try{for(var g,x=this.samplers[Symbol.iterator]();!(u=(g=x.next()).done);u=!0){var b=g.value,E=b.texture;E===void 0&&(E=this._renderer._getEmptyTexture()),_.activeTexture(_.TEXTURE0+b.samplerIndex),E.bindTexture(),E.update(),_.uniform1i(b.location,b.samplerIndex)}}catch(S){m=!0,p=S}finally{try{u||x.return==null||x.return()}finally{if(m)throw p}}}},{key:"updateTextures",value:function(){var _=!0,u=!1,m=void 0;try{for(var p,g=this.samplers[Symbol.iterator]();!(_=(p=g.next()).done);_=!0){var x=p.value.texture;x&&x.update()}}catch(b){u=!0,m=b}finally{try{_||g.return==null||g.return()}finally{if(u)throw m}}}},{key:"unbindTextures",value:function(){var _=!0,u=!1,m=void 0;try{for(var p,g=this.samplers[Symbol.iterator]();!(_=(p=g.next()).done);_=!0){var x=p.value;this.setUniform(x.name,this._renderer._getEmptyTexture())}}catch(b){u=!0,m=b}finally{try{_||g.return==null||g.return()}finally{if(u)throw m}}}},{key:"_setMatrixUniforms",value:function(){var _=this._renderer._curCamera.cameraMatrix,u=this._renderer.uPMatrix,m=this._renderer.uMVMatrix,p=m.copy();p.mult(u),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",_.mat4),this.setUniform("uProjectionMatrix",u.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",p.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var _=this._renderer.GL;return this._renderer._curShader!==this&&(_.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(_,u){var m=this.uniforms[_];if(m){var p=this._renderer.GL;if(m.isArray){if(m._cachedData&&this._renderer._arraysEqual(m._cachedData,u))return;m._cachedData=u.slice(0)}else{if(m._cachedData&&m._cachedData===u)return;Array.isArray(u)?m._cachedData=u.slice(0):m._cachedData=u}var g=m.location;switch(this.useProgram(),m.type){case p.BOOL:u===!0?p.uniform1i(g,1):p.uniform1i(g,0);break;case p.INT:1<m.size?u.length&&p.uniform1iv(g,u):p.uniform1i(g,u);break;case p.FLOAT:1<m.size?u.length&&p.uniform1fv(g,u):p.uniform1f(g,u);break;case p.FLOAT_MAT3:p.uniformMatrix3fv(g,!1,u);break;case p.FLOAT_MAT4:p.uniformMatrix4fv(g,!1,u);break;case p.FLOAT_VEC2:1<m.size?u.length&&p.uniform2fv(g,u):p.uniform2f(g,u[0],u[1]);break;case p.FLOAT_VEC3:1<m.size?u.length&&p.uniform3fv(g,u):p.uniform3f(g,u[0],u[1],u[2]);break;case p.FLOAT_VEC4:1<m.size?u.length&&p.uniform4fv(g,u):p.uniform4f(g,u[0],u[1],u[2],u[3]);break;case p.INT_VEC2:1<m.size?u.length&&p.uniform2iv(g,u):p.uniform2i(g,u[0],u[1]);break;case p.INT_VEC3:1<m.size?u.length&&p.uniform3iv(g,u):p.uniform3i(g,u[0],u[1],u[2]);break;case p.INT_VEC4:1<m.size?u.length&&p.uniform4iv(g,u):p.uniform4i(g,u[0],u[1],u[2],u[3]);break;case p.SAMPLER_2D:p.activeTexture(p.TEXTURE0+m.samplerIndex),m.texture=u instanceof o.default.Texture?u:this._renderer.getTexture(u),p.uniform1i(g,m.samplerIndex),m.texture.src.gifProperties&&m.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(_,u,m,p,g,x){var b;return _&&(_=_.location)!==-1&&(b=this._renderer.GL,this._renderer.registerEnabled.has(_)||(b.enableVertexAttribArray(_),this._renderer.registerEnabled.add(_)),this._renderer.GL.vertexAttribPointer(_,u,m||b.FLOAT,p||!1,g||0,x||0)),this}},{key:"disableRemainingAttributes",value:function(){var _=this,u=!0,m=!1,p=void 0;try{for(var g,x=this._renderer.registerEnabled.values()[Symbol.iterator]();!(u=(g=x.next()).done);u=!0)(function(){var b=g.value;Object.keys(_.attributes).some(function(E){return _.attributes[E].location===b})||(_._renderer.GL.disableVertexAttribArray(b),_._renderer.registerEnabled.delete(b))})()}catch(b){m=!0,p=b}finally{try{u||x.return==null||x.return()}finally{if(m)throw p}}}}])&&c(f.prototype,y),i}(),t=o.default.Shader,l.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],334:[function(t,a,l){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}function c(S){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.checkWebGLCapabilities=E,l.default=l.MipmapTexture=void 0;var i=(b=t("../core/main"))&&b.__esModule?b:{default:b},f=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var k=y();if(k&&k.has(S))return k.get(S);var T,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in S){var C;Object.prototype.hasOwnProperty.call(S,T)&&((C=A?Object.getOwnPropertyDescriptor(S,T):null)&&(C.get||C.set)?Object.defineProperty(j,T,C):j[T]=S[T])}return j.default=S,k&&k.set(S,j),j}(t("../core/constants"));function y(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,y=function(){return S},S)}function _(S,k){return(_=Object.setPrototypeOf||function(T,j){return T.__proto__=j,T})(S,k)}function u(S){return function(){var k,T=m(S),T=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=m(this).constructor,Reflect.construct(T,arguments,k)):T.apply(this,arguments),this);if(!k||c(k)!=="object"&&typeof k!="function"){if(T!==void 0)return T;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function m(S){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(S)}function p(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function g(S,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(S,j.key,j)}}function x(S,k,T){k&&g(S.prototype,k),T&&g(S,T)}i.default.Texture=function(){function S(N,T,C){p(this,S),this._renderer=N;var A=this._renderer.GL,C=(C=C||{},this.src=T,this.glTex=void 0,this.glTarget=A.TEXTURE_2D,this.glFormat=C.format||A.RGBA,this.mipmaps=!1,this.glMinFilter=C.minFilter||A.LINEAR,this.glMagFilter=C.magFilter||A.LINEAR,this.glWrapS=C.wrapS||A.CLAMP_TO_EDGE,this.glWrapT=C.wrapT||A.CLAMP_TO_EDGE,this.glDataType=C.dataType||A.UNSIGNED_BYTE,E(N)),N=(this.glFormat!==A.HALF_FLOAT||C.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=A.FLOAT),this.glFormat!==A.HALF_FLOAT||this.glMinFilter!==A.LINEAR&&this.glMagFilter!==A.LINEAR||C.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===A.LINEAR&&(this.glMinFilter=A.NEAREST),this.glMagFilter===A.LINEAR&&(this.glMagFilter=A.NEAREST)),this.glFormat!==A.FLOAT||C.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=A.UNSIGNED_BYTE),this.glFormat!==A.FLOAT||this.glMinFilter!==A.LINEAR&&this.glMagFilter!==A.LINEAR||C.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===A.LINEAR&&(this.glMinFilter=A.NEAREST),this.glMagFilter===A.LINEAR&&(this.glMagFilter=A.NEAREST)),this.isSrcMediaElement=i.default.MediaElement!==void 0&&T instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=i.default.Element!==void 0&&T instanceof i.default.Element&&!(T instanceof i.default.Graphics)&&!(T instanceof i.default.Renderer),this.isSrcP5Image=T instanceof i.default.Image,this.isSrcP5Graphics=T instanceof i.default.Graphics,this.isSrcP5Renderer=T instanceof i.default.Renderer,this.isImageData=typeof ImageData<"u"&&T instanceof ImageData,this.isFramebufferTexture=T instanceof i.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=N.width,this.height=N.height,this.init(N),this}return x(S,[{key:"_getTextureDataFromSource",value:function(){var k;return this.isFramebufferTexture?k=this.src.rawTexture():this.isSrcP5Image?k=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?k=this.src.elt:this.isImageData&&(k=this.src),k}},{key:"init",value:function(k){var T,j=this._renderer.GL;this.isFramebufferTexture||(this.glTex=j.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,this.glMagFilter),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(T=new Uint8Array([1,1,1,1]),j.texImage2D(this.glTarget,0,j.RGBA,1,1,0,this.glFormat,this.glDataType,T)):j.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,k))}},{key:"update",value:function(){var k,T,j,A=this.src;return A.width!==0&&A.height!==0&&!this.isFramebufferTexture&&(k=this._getTextureDataFromSource(),T=!1,j=this._renderer.GL,k.width!==this.width||k.height!==this.height?(T=!0,this.width=k.width||A.width,this.height=k.height||A.height,this.isSrcP5Image?A.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&A.setModified(!0)):this.isSrcP5Image?A.isModified()&&A.setModified(!(T=!0)):this.isSrcMediaElement?A.isModified()?A.setModified(!(T=!0)):A.loadedmetadata&&this._videoPrevUpdateTime!==A.time()&&(this._videoPrevUpdateTime=A.time(),T=!0):this.isImageData?A._dirty&&(T=!(A._dirty=!1)):T=!0,T&&(this.bindTexture(),j.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,k)),T)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(k,T){var j=this._renderer.GL;this.glMinFilter=this.glFilter(k),this.glMagFilter=this.glFilter(T),this.bindTexture(),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,this.glMinFilter),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(k){var T=this._renderer.GL;return k===f.NEAREST?T.NEAREST:T.LINEAR}},{key:"setWrapMode",value:function(k,T){function j(V){return(V&V-1)==0}var A=this._renderer.GL,N=this._getTextureDataFromSource(),N=N.naturalWidth&&N.naturalHeight?(C=N.naturalWidth,N.naturalHeight):(C=this.width,this.height),C=j(C),N=j(N);k===f.REPEAT?this._renderer.webglVersion===f.WEBGL2||C&&N?this.glWrapS=A.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=A.CLAMP_TO_EDGE):k===f.MIRROR?this._renderer.webglVersion===f.WEBGL2||C&&N?this.glWrapS=A.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=A.CLAMP_TO_EDGE):this.glWrapS=A.CLAMP_TO_EDGE,T===f.REPEAT?this._renderer.webglVersion===f.WEBGL2||C&&N?this.glWrapT=A.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=A.CLAMP_TO_EDGE):T===f.MIRROR?this._renderer.webglVersion===f.WEBGL2||C&&N?this.glWrapT=A.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=A.CLAMP_TO_EDGE):this.glWrapT=A.CLAMP_TO_EDGE,this.bindTexture(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,this.glWrapS),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),S}();var b=function(S){var k=j;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),S&&_(k,S);var T=u(j);function j(A,C,N){return p(this,j),C=(A=T.call(this,A,C,N))._renderer.GL,A.glMinFilter===C.LINEAR&&(A.glMinFilter=C.LINEAR_MIPMAP_LINEAR),A}return x(j,[{key:"glFilter",value:function(A){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(A){var C=this._renderer.GL;this.glTex=C.createTexture(),this.bindTexture();for(var N=0;N<A.length;N++)C.texImage2D(this.glTarget,N,this.glFormat,this.glFormat,this.glDataType,A[N]);this.glMinFilter=C.LINEAR_MIPMAP_LINEAR,C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),j}(i.default.Texture);function E(A){var k=A.GL,A=A.webglVersion,T=A===f.WEBGL2?k.getExtension("EXT_color_buffer_float")&&k.getExtension("EXT_float_blend"):k.getExtension("OES_texture_float"),j=T&&k.getExtension("OES_texture_float_linear"),A=A===f.WEBGL2?k.getExtension("EXT_color_buffer_float"):k.getExtension("OES_texture_half_float");return{float:T,floatLinear:j,halfFloat:A,halfFloatLinear:A&&k.getExtension("OES_texture_half_float_linear")}}l.MipmapTexture=b,t=i.default.Texture,l.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],335:[function(t,a,l){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(S)}function c(S){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var i,f=(i=t("../core/main"))&&i.__esModule?i:{default:i},y=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var k=_();if(k&&k.has(S))return k.get(S);var T,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in S){var C;Object.prototype.hasOwnProperty.call(S,T)&&((C=A?Object.getOwnPropertyDescriptor(S,T):null)&&(C.get||C.set)?Object.defineProperty(j,T,C):j[T]=S[T])}return j.default=S,k&&k.set(S,j),j}(t("../core/constants"));function _(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,_=function(){return S},S)}function u(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function m(S,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(S,j.key,j)}}function p(S,k,T){k&&m(S.prototype,k),T&&m(S,T)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),f.default.RendererGL.prototype._applyTextProperties=function(){},f.default.RendererGL.prototype.textWidth=function(S){return this._isOpenType()?this._textFont._textWidth(S,this._textSize):0};var g=function(){function S(k,T){u(this,S),this.width=k,this.height=T,this.infos=[]}return p(S,[{key:"findImage",value:function(k){var T,j,A=this.width*this.height;if(A<k)throw new Error("font is too complex to render in 3D");for(var C=this.infos.length-1;0<=C;--C){var N=this.infos[C];if(N.index+k<A){j=(T=N).imageData;break}}if(!T){try{j=new ImageData(this.width,this.height)}catch{var V=document.getElementsByTagName("canvas")[0],I=!V,G=(V||((V=document.createElement("canvas")).style.display="none",document.body.appendChild(V)),V.getContext("2d"));G&&(j=G.createImageData(this.width,this.height)),I&&document.body.removeChild(V)}this.infos.push(T={index:0,imageData:j})}return G=T.index,T.index+=k,j._dirty=!0,{imageData:j,index:G}}}]),S}();function x(N,k,T,j,A){var C=N.imageData.data,N=4*N.index++;C[N++]=k,C[N++]=T,C[N++]=j,C[+N]=A}var b=Math.sqrt(3),E=function(){function S(k){u(this,S),this.font=k,this.strokeImageInfos=new g(64,64),this.colDimImageInfos=new g(64,64),this.rowDimImageInfos=new g(64,64),this.colCellImageInfos=new g(64,64),this.rowCellImageInfos=new g(64,64),this.glyphInfos={}}return p(S,[{key:"getGlyphInfo",value:function(k){var T=this.glyphInfos[k.index];if(!T){var j=k.getBoundingBox(),A=j.x1,C=j.y1,N=j.x2-A,V=j.y2-C,I=k.path.commands;if(N==0||V==0||!I.length)return this.glyphInfos[k.index]={};for(var G=[],R=[],q=[],M=8;0<=M;--M)q.push([]);for(M=8;0<=M;--M)R.push([]);var L,H,O,U,J=function(){function Re(Ge,Xe,Ke,Pe){u(this,Re),this.p0=Ge,this.c0=Xe,this.c1=Ke,this.p1=Pe}return p(Re,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return f.default.Vector.sub(f.default.Vector.sub(this.p1,this.p0),f.default.Vector.mult(f.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(We){var Xe=f.default.Vector.lerp(this.p0,this.c0,We),Pe=f.default.Vector.lerp(this.c0,this.c1,We),Ke=f.default.Vector.lerp(Xe,Pe,We),Pe=(this.c1=f.default.Vector.lerp(this.c1,this.p1,We),this.c0=f.default.Vector.lerp(Pe,this.c1,We),f.default.Vector.lerp(Ke,this.c0,We)),We=new Re(this.p0,Xe,Ke,Pe);return this.p0=Pe,We}},{key:"splitInflections",value:function(){var Ge=f.default.Vector.sub(this.c0,this.p0),Xe=f.default.Vector.sub(f.default.Vector.sub(this.c1,this.c0),Ge),Ke=f.default.Vector.sub(f.default.Vector.sub(f.default.Vector.sub(this.p1,this.c1),Ge),f.default.Vector.mult(Xe,2)),Pe=[],We=Xe.x*Ke.y-Xe.y*Ke.x;return We!==0&&0<=(Ge=(Ke=Ge.x*Ke.y-Ge.y*Ke.x)*Ke-4*We*(Ge.x*Xe.y-Ge.y*Xe.x))&&(We<0&&(We=-We,Ke=-Ke),Ge=(-Ke+(Xe=Math.sqrt(Ge)))/(2*We),0<(Ke=(-Ke-Xe)/(2*We))&&Ke<1&&(Pe.push(this.split(Ke)),Ge=1-(1-Ge)/(1-Ke)),0<Ge&&Ge<1&&Pe.push(this.split(Ge))),Pe.push(this),Pe}}]),Re}(),Z=!0,z=!1,B=void 0;try{for(var D,X=I[Symbol.iterator]();!(Z=(D=X.next()).done);Z=!0){var K=D.value,re=(K.x-A)/N,se=(K.y-C)/V;if(!ve(L,H,re,se)){switch(K.type){case"M":O=re,U=se;break;case"L":be(L,H,re,se);break;case"Q":var fe=(K.x1-A)/N,xe=(K.y1-C)/V;te([L,re,fe],[H,se,xe],{x:L,y:H,cx:fe,cy:xe});break;case"Z":ve(L,H,O,U)?G.push({x:L,y:H}):(be(L,H,O,U),G.push({x:O,y:U}));break;case"C":for(var he=function(ge,Le,qe,Ke,Pe,We,Fe,de){var ge=new J(new f.default.Vector(ge,Le),new f.default.Vector(qe,Ke),new f.default.Vector(Pe,We),new f.default.Vector(Fe,de)).splitInflections(),ce=[],we=30/b,Oe=!0,Le=!1,qe=void 0;try{for(var Qe,rt=ge[Symbol.iterator]();!(Oe=(Qe=rt.next()).done);Oe=!0){for(var tt=Qe.value,ot=[],gt=void 0;!(.125<=(gt=we/tt.quadError()));){var mt=Math.pow(gt,.3333333333333333),lt=tt.split(mt),vt=tt.split(1-mt/(1-mt));ce.push(lt),ot.push(tt),tt=vt}gt<1&&ce.push(tt.split(.5)),ce.push(tt),Array.prototype.push.apply(ce,ot.reverse())}}catch(pt){Le=!0,qe=pt}finally{try{Oe||rt.return==null||rt.return()}finally{if(Le)throw qe}}return ce}(L,H,(K.x1-A)/N,(K.y1-C)/V,(K.x2-A)/N,(K.y2-C)/V,re,se),_e=0;_e<he.length;_e++){var ye=he[_e].toQuadratic();te([ye.x,ye.x1,ye.cx],[ye.y,ye.y1,ye.cy],ye)}break;default:throw new Error("unknown command type: ".concat(K.type))}L=re,H=se}}}catch(Re){z=!0,B=Re}finally{try{Z||X.return==null||X.return()}finally{if(z)throw B}}for(var ue=G.length,pe=this.strokeImageInfos.findImage(ue),ke=pe.index,Ie=0;Ie<ue;++Ie){var $=G[Ie];x(pe,ne($.x),ne($.y),ne($.cx),ne($.cy))}(T=this.glyphInfos[k.index]={glyph:k,uGlyphRect:[j.x1,-j.y1,j.x2,-j.y2],strokeImageInfo:pe,strokes:G,colInfo:je(q,this.colDimImageInfos,this.colCellImageInfos),rowInfo:je(R,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[T.colInfo.dimOffset,T.rowInfo.dimOffset]}return T;function te(Re,Ge,Xe){var Ke=G.length;function Pe(ce,we,Oe){for(var Le=ce.length;0<Le--;){var qe=ce[Le];qe<we&&(we=qe),Oe<qe&&(Oe=qe)}return{min:we,max:Oe}}G.push(Xe);for(var Xe=Pe(Re,1,0),Re=Math.max(Math.floor(9*Xe.min-.5),0),We=Math.min(Math.ceil(9*Xe.max+.5),9),Fe=Re;Fe<We;++Fe)q[Fe].push(Ke);for(var Xe=Pe(Ge,1,0),Re=Math.max(Math.floor(9*Xe.min-.5),0),de=Math.min(Math.ceil(9*Xe.max+.5),9),ge=Re;ge<de;++ge)R[ge].push(Ke)}function ne(Re){return(Re=(Xe=255)*Re)<(Ge=0)?Ge:Xe<Re?Xe:Re;var Ge,Xe}function be(Re,Ge,Xe,Ke){te([Re,Xe],[Ge,Ke],{x:Re,y:Ge,cx:(Re+Xe)/2,cy:(Ge+Ke)/2})}function ve(Re,Ge,Xe,Ke){return Math.abs(Xe-Re)<1e-5&&Math.abs(Ke-Ge)<1e-5}function je(Re,Ge,Xe){for(var Ke=Re.length,Pe=Ge.findImage(Ke),Ge=Pe.index,We=0,Fe=0;Fe<Ke;++Fe)We+=Re[Fe].length;for(var de=Xe.findImage(We),ge=0;ge<Ke;++ge){var ce=Re[ge],we=ce.length,Oe=de.index;x(Pe,Oe>>7,127&Oe,we>>7,127&we);for(var Le=0;Le<we;++Le){var qe=ce[Le]+ke;x(de,qe>>7,127&qe,0,0)}}return{cellImageInfo:de,dimOffset:Ge,dimImageInfo:Pe}}}}]),S}();f.default.RendererGL.prototype._renderText=function(S,k,T,j,A){if(this._textFont&&typeof this._textFont!="string"){if(!(A<=j)&&this._doFill){if(this._isOpenType()){S.push();var A=this._doStroke,C=this.drawMode,N=(this._doStroke=!1,this.drawMode=y.TEXTURE,this._textFont.font),V=(V=this._textFont._fontInfo)||(this._textFont._fontInfo=new E(N)),T=this._textFont._handleAlignment(this,k,T,j),j=this._textSize/N.unitsPerEm,I=(this.translate(T.x,T.y,0),this.scale(j,j,1),this.GL),T=!this._defaultFontShader,G=this._getFontShader(),R=(G.init(),G.bindShader(),T&&(G.setUniform("uGridImageSize",[64,64]),G.setUniform("uCellsImageSize",[64,64]),G.setUniform("uStrokeImageSize",[64,64]),G.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),q=(R||((j=this._textGeom=new f.default.Geometry(1,1,function(){for(var _e=0;_e<=1;_e++)for(var ye=0;ye<=1;ye++)this.vertices.push(new f.default.Vector(ye,_e,0)),this.uvs.push(ye,_e)})).computeFaces().computeNormals(),R=this.createBuffers("glyph",j)),!0),T=!1,j=void 0;try{for(var M,L=this.retainedMode.buffers.text[Symbol.iterator]();!(q=(M=L.next()).done);q=!0)M.value._prepareBuffer(R,G)}catch(_e){T=!0,j=_e}finally{try{q||L.return==null||L.return()}finally{if(T)throw j}}this._bindBuffer(R.indexBuffer,I.ELEMENT_ARRAY_BUFFER),G.setUniform("uMaterialColor",this.curFillColor),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var H=0,O=null,U=N.stringToGlyphs(k),J=!0,Z=!1,z=void 0;try{for(var B,D=U[Symbol.iterator]();!(J=(B=D.next()).done);J=!0){var X,K,re=B.value,se=(O&&(H+=N.getKerningValue(O,re)),V.getGlyphInfo(re));se.uGlyphRect&&(X=se.rowInfo,K=se.colInfo,G.setUniform("uSamplerStrokes",se.strokeImageInfo.imageData),G.setUniform("uSamplerRowStrokes",X.cellImageInfo.imageData),G.setUniform("uSamplerRows",X.dimImageInfo.imageData),G.setUniform("uSamplerColStrokes",K.cellImageInfo.imageData),G.setUniform("uSamplerCols",K.dimImageInfo.imageData),G.setUniform("uGridOffset",se.uGridOffset),G.setUniform("uGlyphRect",se.uGlyphRect),G.setUniform("uGlyphOffset",H),G.bindTextures(),I.drawElements(I.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),H+=re.advanceWidth,O=re}}catch(_e){Z=!0,z=_e}finally{try{J||D.return==null||D.return()}finally{if(Z)throw z}}}finally{G.unbindShader(),this._doStroke=A,this.drawMode=C,I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),S.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return S}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":264,"../core/main":275,"./p5.RendererGL.Retained":331,"./p5.Shader":333,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}]},{},[259])(259)})})(p5_min$2);var p5_minExports=p5_min$2.exports;const p5_min=getDefaultExportFromCjs(p5_minExports),p5_min$1=_mergeNamespaces({__proto__:null,default:p5_min},[p5_minExports]),Qubit_svelte_svelte_type_style_lang="";function create_fragment$b(s){let r,n,t;return n=new P5({props:{sketch:s[3]}}),n.$on("instance",s[2]),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(a){r=claim_element(a,"DIV",{class:!0});var l=children(r);claim_component(n.$$.fragment,l),l.forEach(detach),this.h()},h(){attr(r,"class","qubit svelte-8wldun"),toggle_class(r,"disabled",s[0])},m(a,l){insert_hydration(a,r,l),mount_component(n,r,null),s[5](r),t=!0},p(a,[l]){(!t||l&1)&&toggle_class(r,"disabled",a[0])},i(a){t||(transition_in(n.$$.fragment,a),t=!0)},o(a){transition_out(n.$$.fragment,a),t=!1},d(a){a&&detach(r),destroy_component(n),s[5](null)}}}function instance$b(s,r,n){let{axes:t}=r,a=0,l=0,o=0,{disabled:c=!1}=r,i,f=null,y=100,_=y/3,u;onMount(async()=>{window.addEventListener("resize",u);let x;const b=qubits.subscribe(()=>{f&&(x&&clearTimeout(x),x=setTimeout(u,100))});for(;!f;)await new Promise(S=>setTimeout(S,100));const E=t.subscribe(([S,k,T])=>{f&&(a=T,l=k,o=S,f&&f.draw())});return()=>{x&&clearTimeout(x),window.removeEventListener("resize",u),b(),E(),f==null||f.remove(),f=null}});const m=x=>{f=x.detail},p=x=>{function b(T,j){return T>0&&T<x.height&&j>0&&j<x.height}function E(){if(!i)return;const T=i.getBoundingClientRect();y=min(T.width-100,500),_=y/3}function S(){E(),x.resizeCanvas(y,y),redrawCables()}x.mouseIsPressed=!1,x.mousePressed=T=>{const j=T.target instanceof HTMLCanvasElement;x.mouseIsPressed=j&&b(x.mouseX,x.mouseY)},x.mouseReleased=T=>x.mouseIsPressed=!1,x.setup=()=>{E(),x.createCanvas(y,y,x.WEBGL),x.smooth(),x.noLoop(),u=debounce(S,100)};const k=throttle(()=>!b(x.mouseX,x.mouseY)||!x.mouseIsPressed?void 0:(x.keyIsPressed&&x.key==="Shift"?o=clamp$1(x.mouseX/(x.width*.95)):(l=clamp$1(x.mouseX/(x.width*.95)),a=clamp$1(x.mouseY/(x.height*.95))),t.set([o,l,a]),!1),25);x.mouseDragged=()=>{c||k()},x.draw=()=>{x.smooth(),x.background("#404040");const T=p5_minExports.Vector.fromAngles(x.radians(a*180),x.radians(l*180),_);x.push(),x.rotateY(x.radians(90)),x.ambientMaterial(194);let j=x.color("rgb(209, 206, 199)");j.setAlpha(50),x.stroke(j),x.strokeWeight(.25),x.noFill();const A=x.cos(x.radians(-l*180)),C=x.sin(x.radians(-l*180));x.applyMatrix(A,0,C,0,0,1,0,0,-C,0,A,0,0,0,0,1);const N=x.cos(x.radians(-a*180)),V=x.sin(x.radians(-a*180));x.applyMatrix(N,V,-V,N,0,0);const I=x.cos(x.radians(o*180)),G=x.sin(x.radians(o*180));x.applyMatrix(I,0,G,0,0,1,0,0,-G,0,I,0,0,0,0,1),x.sphere(_-2,20,20),x.pop(),x.push(),x.stroke("white"),x.translate(T.x,T.y,T.z),x.sphere(4),x.pop(),x.push(),x.noFill(),x.stroke("#FF695A"),x.strokeWeight(4),x.rotateY(x.radians(90)),x.rotateY(x.radians(l*180)),x.circle(0,0,_*2),x.pop(),x.push(),x.noFill(),x.stroke("#E5007F"),x.strokeWeight(4),x.rotateX(x.radians(90)),x.translate(0,0,-T.y),x.circle(0,0,x.sin(x.radians(a*180))*_*2),x.pop()}};function g(x){binding_callbacks[x?"unshift":"push"](()=>{i=x,n(1,i)})}return s.$$set=x=>{"axes"in x&&n(4,t=x.axes),"disabled"in x&&n(0,c=x.disabled)},[c,i,m,p,t,g]}class Qubit extends SvelteComponent{constructor(r){super(),init(this,r,instance$b,create_fragment$b,safe_not_equal,{axes:4,disabled:0})}}const Patchbay_svelte_svelte_type_style_lang="";function get_each_context$3(s,r,n){const t=s.slice();return t[4]=r[n],t[6]=n,t}function create_each_block$3(s){let r,n,t=s[1][s[6]]+"",a,l,o,c,i;return o=new Socket({props:{id:s[4],type:"remote",colour:s[2][s[6]],offset:s[3][s[6]]}}),{c(){r=element("div"),n=element("h3"),a=text(t),l=space(),create_component(o.$$.fragment),c=space(),this.h()},l(f){r=claim_element(f,"DIV",{class:!0});var y=children(r);n=claim_element(y,"H3",{style:!0,class:!0});var _=children(n);a=claim_text(_,t),_.forEach(detach),l=claim_space(y),claim_component(o.$$.fragment,y),c=claim_space(y),y.forEach(detach),this.h()},h(){set_style(n,"color",s[2][s[6]]),attr(n,"class","svelte-147su5n"),attr(r,"class","socket svelte-147su5n")},m(f,y){insert_hydration(f,r,y),append_hydration(r,n),append_hydration(n,a),append_hydration(r,l),mount_component(o,r,null),append_hydration(r,c),i=!0},p(f,y){(!i||y&2)&&t!==(t=f[1][f[6]]+"")&&set_data(a,t);const _={};y&1&&(_.id=f[4]),o.$set(_)},i(f){i||(transition_in(o.$$.fragment,f),i=!0)},o(f){transition_out(o.$$.fragment,f),i=!1},d(f){f&&detach(r),destroy_component(o)}}}function create_fragment$a(s){let r,n,t=s[0],a=[];for(let o=0;o<t.length;o+=1)a[o]=create_each_block$3(get_each_context$3(s,t,o));const l=o=>transition_out(a[o],1,1,()=>{a[o]=null});return{c(){r=element("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<a.length;i+=1)a[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","patchbay svelte-147su5n")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,null);n=!0},p(o,[c]){if(c&15){t=o[0];let i;for(i=0;i<t.length;i+=1){const f=get_each_context$3(o,t,i);a[i]?(a[i].p(f,c),transition_in(a[i],1)):(a[i]=create_each_block$3(f),a[i].c(),transition_in(a[i],1),a[i].m(r,null))}for(group_outros(),i=t.length;i<a.length;i+=1)l(i);check_outros()}},i(o){if(!n){for(let c=0;c<t.length;c+=1)transition_in(a[c]);n=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);n=!1},d(o){o&&detach(r),destroy_each(a,o)}}}function instance$a(s,r,n){let{ids:t}=r,{labels:a}=r;const l=["#FF695A","#E5007F","#00A399"],o=[5,0,-5];return s.$$set=c=>{"ids"in c&&n(0,t=c.ids),"labels"in c&&n(1,a=c.labels)},[t,a,l,o]}class Patchbay extends SvelteComponent{constructor(r){super(),init(this,r,instance$a,create_fragment$a,safe_not_equal,{ids:0,labels:1})}}const Qubits_svelte_svelte_type_style_lang="",{window:window_1$1}=globals;function get_each_context$2(s,r,n){const t=s.slice();return t[16]=r[n],t[18]=n,t}function get_each_context_1(s,r,n){const t=s.slice();return t[19]=r[n],t[21]=n,t}function create_if_block$6(s){let r,n,t=(s[18]+1).toString().padStart(2,"0")+"",a,l,o,c=getUserName(s[16].user)+"",i;return{c(){r=element("h3"),n=element("span"),a=text(t),l=space(),o=element("span"),i=text(c),this.h()},l(f){r=claim_element(f,"H3",{class:!0});var y=children(r);n=claim_element(y,"SPAN",{style:!0,class:!0});var _=children(n);a=claim_text(_,t),_.forEach(detach),l=claim_space(y),o=claim_element(y,"SPAN",{style:!0,class:!0});var u=children(o);i=claim_text(u,c),u.forEach(detach),y.forEach(detach),this.h()},h(){set_style(n,"background-color",getUserColour(s[16].user)),attr(n,"class","svelte-hjih4o"),set_style(o,"background-color",getUserColour(s[16].user)),attr(o,"class","svelte-hjih4o"),attr(r,"class","qubit__info svelte-hjih4o")},m(f,y){insert_hydration(f,r,y),append_hydration(r,n),append_hydration(n,a),append_hydration(r,l),append_hydration(r,o),append_hydration(o,i)},p(f,y){y&32&&set_style(n,"background-color",getUserColour(f[16].user)),y&32&&c!==(c=getUserName(f[16].user)+"")&&set_data(i,c),y&32&&set_style(o,"background-color",getUserColour(f[16].user))},d(f){f&&detach(r)}}}function create_each_block_1(s){let r,n;function t(...a){return s[14](s[18],s[21],...a)}return r=new Slider({props:{disabled:s[16].user!=="you"||s[6],name:s[8][2-s[21]],colour:`var(--color-theme-${3-s[21]})`,value:s[19]}}),r.$on("change",t),{c(){create_component(r.$$.fragment)},l(a){claim_component(r.$$.fragment,a)},m(a,l){mount_component(r,a,l),n=!0},p(a,l){s=a;const o={};l&96&&(o.disabled=s[16].user!=="you"||s[6]),r.$set(o)},i(a){n||(transition_in(r.$$.fragment,a),n=!0)},o(a){transition_out(r.$$.fragment,a),n=!1},d(a){destroy_component(r,a)}}}function create_each_block$2(s){let r,n=isApp(),t,a,l,o,c,i,f,y,_,u,m=n&&create_if_block$6(s);l=new Qubit({props:{axes:axes[s[18]],disabled:s[16].user!=="you"||s[6]}});function p(...E){return s[13](s[18],...E)}i=new Patchbay({props:{ids:s[7].map(p).reverse(),labels:s[8].reverse()}});let g=get_store_value(axes[s[18]]).reverse(),x=[];for(let E=0;E<g.length;E+=1)x[E]=create_each_block_1(get_each_context_1(s,g,E));const b=E=>transition_out(x[E],1,1,()=>{x[E]=null});return{c(){r=element("div"),m&&m.c(),t=space(),a=element("div"),create_component(l.$$.fragment),o=space(),c=element("div"),create_component(i.$$.fragment),f=space(),y=element("div");for(let E=0;E<x.length;E+=1)x[E].c();_=space(),this.h()},l(E){r=claim_element(E,"DIV",{class:!0,style:!0});var S=children(r);m&&m.l(S),t=claim_space(S),a=claim_element(S,"DIV",{class:!0});var k=children(a);claim_component(l.$$.fragment,k),k.forEach(detach),o=claim_space(S),c=claim_element(S,"DIV",{class:!0});var T=children(c);claim_component(i.$$.fragment,T),T.forEach(detach),f=claim_space(S),y=claim_element(S,"DIV",{class:!0});var j=children(y);for(let A=0;A<x.length;A+=1)x[A].l(j);j.forEach(detach),_=claim_space(S),S.forEach(detach),this.h()},h(){attr(a,"class","qubit__qubit svelte-hjih4o"),attr(c,"class","qubit__patchbay svelte-hjih4o"),attr(y,"class","qubit__sliders svelte-hjih4o"),attr(r,"class","qubit svelte-hjih4o"),set_style(r,"border-color",getUserColour(s[16].user)),toggle_class(r,"qubit--single",s[2]),toggle_class(r,"qubit--double",s[1]),toggle_class(r,"qubit--triple",s[4]),toggle_class(r,"qubit--full-height",s[3]),toggle_class(r,"qubit--border",s[16].user!=="you")},m(E,S){insert_hydration(E,r,S),m&&m.m(r,null),append_hydration(r,t),append_hydration(r,a),mount_component(l,a,null),append_hydration(r,o),append_hydration(r,c),mount_component(i,c,null),append_hydration(r,f),append_hydration(r,y);for(let k=0;k<x.length;k+=1)x[k]&&x[k].m(y,null);append_hydration(r,_),u=!0},p(E,S){s=E,n&&m.p(s,S);const k={};if(S&96&&(k.disabled=s[16].user!=="you"||s[6]),l.$set(k),S&1376){g=get_store_value(axes[s[18]]).reverse();let T;for(T=0;T<g.length;T+=1){const j=get_each_context_1(s,g,T);x[T]?(x[T].p(j,S),transition_in(x[T],1)):(x[T]=create_each_block_1(j),x[T].c(),transition_in(x[T],1),x[T].m(y,null))}for(group_outros(),T=g.length;T<x.length;T+=1)b(T);check_outros()}(!u||S&32)&&set_style(r,"border-color",getUserColour(s[16].user)),(!u||S&4)&&toggle_class(r,"qubit--single",s[2]),(!u||S&2)&&toggle_class(r,"qubit--double",s[1]),(!u||S&16)&&toggle_class(r,"qubit--triple",s[4]),(!u||S&8)&&toggle_class(r,"qubit--full-height",s[3]),(!u||S&32)&&toggle_class(r,"qubit--border",s[16].user!=="you")},i(E){if(!u){transition_in(l.$$.fragment,E),transition_in(i.$$.fragment,E);for(let S=0;S<g.length;S+=1)transition_in(x[S]);u=!0}},o(E){transition_out(l.$$.fragment,E),transition_out(i.$$.fragment,E),x=x.filter(Boolean);for(let S=0;S<x.length;S+=1)transition_out(x[S]);u=!1},d(E){E&&detach(r),m&&m.d(),destroy_component(l),destroy_component(i),destroy_each(x,E)}}}function create_fragment$9(s){let r,n,t,a,l=s[5].filter(func),o=[];for(let i=0;i<l.length;i+=1)o[i]=create_each_block$2(get_each_context$2(s,l,i));const c=i=>transition_out(o[i],1,1,()=>{o[i]=null});return{c(){r=element("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);for(let y=0;y<o.length;y+=1)o[y].l(f);f.forEach(detach),this.h()},h(){attr(r,"class","qubits svelte-hjih4o")},m(i,f){insert_hydration(i,r,f);for(let y=0;y<o.length;y+=1)o[y]&&o[y].m(r,null);n=!0,t||(a=[listen$1(window_1$1,"resize",s[12]),listen$1(r,"scroll",s[15])],t=!0)},p(i,[f]){if(f&1534){l=i[5].filter(func);let y;for(y=0;y<l.length;y+=1){const _=get_each_context$2(i,l,y);o[y]?(o[y].p(_,f),transition_in(o[y],1)):(o[y]=create_each_block$2(_),o[y].c(),transition_in(o[y],1),o[y].m(r,null))}for(group_outros(),y=l.length;y<o.length;y+=1)c(y);check_outros()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)transition_in(o[f]);n=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)transition_out(o[f]);n=!1},d(i){i&&detach(r),destroy_each(o,i),t=!1,run_all(a)}}}const func=s=>s.active;function instance$9(s,r,n){let t,a,l,o,c,i,f;component_subscribe(s,activeQubitCount,S=>n(11,c=S)),component_subscribe(s,qubits,S=>n(5,i=S)),component_subscribe(s,isMeasuring,S=>n(6,f=S));let y=["x","y","z"],_=["","",""],u;const m=debounce(()=>redrawCables(),1),p=(S,k,T)=>{axes[k].update(j=>(j[T]=S.detail,j))};onMount(()=>{n(0,u=window.innerWidth)});const g=()=>n(0,u=window.innerWidth),x=(S,k)=>`${k}${S}`,b=(S,k,T)=>p(T,S,k),E=()=>m();return s.$$.update=()=>{s.$$.dirty&2049&&n(2,t=c===1||u<1e3),s.$$.dirty&2053&&n(1,a=(c%2===0||c===3||u<1500)&&!t),s.$$.dirty&6&&n(4,l=!t&&!a),s.$$.dirty&2049&&n(3,o=c===1&&u>1e3||c===2&&u>1e3)},[u,a,t,o,l,i,f,y,_,m,p,c,g,x,b,E]}class Qubits extends SvelteComponent{constructor(r){super(),init(this,r,instance$9,create_fragment$9,safe_not_equal,{})}}const index_svelte_svelte_type_style_lang="";function get_each_context$1(s,r,n){const t=s.slice();return t[4]=r[n].name,t}function create_each_block$1(s){let r,n;function t(){return s[3](s[4])}return r=new Button({props:{onClick:t,active:s[1]===s[4],disabled:s[1]!==s[4],colour:"yellow",text:s[4],icon:s[2][s[4]],classes:s[0]==="horizontal"?"mr-2":"mb-2"}}),{c(){create_component(r.$$.fragment)},l(a){claim_component(r.$$.fragment,a)},m(a,l){mount_component(r,a,l),n=!0},p(a,l){s=a;const o={};l&2&&(o.active=s[1]===s[4]),l&2&&(o.disabled=s[1]!==s[4]),l&1&&(o.classes=s[0]==="horizontal"?"mr-2":"mb-2"),r.$set(o)},i(a){n||(transition_in(r.$$.fragment,a),n=!0)},o(a){transition_out(r.$$.fragment,a),n=!1},d(a){destroy_component(r,a)}}}function create_fragment$8(s){let r,n,t,a=instruments$1,l=[];for(let c=0;c<a.length;c+=1)l[c]=create_each_block$1(get_each_context$1(s,a,c));const o=c=>transition_out(l[c],1,1,()=>{l[c]=null});return{c(){r=element("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);for(let f=0;f<l.length;f+=1)l[f].l(i);i.forEach(detach),this.h()},h(){attr(r,"class",n=null_to_empty(`instrument-buttons instrument-buttons--${s[0]}`)+" svelte-1r8c0w4")},m(c,i){insert_hydration(c,r,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(r,null);t=!0},p(c,[i]){if(i&7){a=instruments$1;let f;for(f=0;f<a.length;f+=1){const y=get_each_context$1(c,a,f);l[f]?(l[f].p(y,i),transition_in(l[f],1)):(l[f]=create_each_block$1(y),l[f].c(),transition_in(l[f],1),l[f].m(r,null))}for(group_outros(),f=a.length;f<l.length;f+=1)o(f);check_outros()}(!t||i&1&&n!==(n=null_to_empty(`instrument-buttons instrument-buttons--${c[0]}`)+" svelte-1r8c0w4"))&&attr(r,"class",n)},i(c){if(!t){for(let i=0;i<a.length;i+=1)transition_in(l[i]);t=!0}},o(c){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)transition_out(l[i]);t=!1},d(c){c&&detach(r),destroy_each(l,c)}}}function instance$8(s,r,n){let t;component_subscribe(s,instrument,c=>n(1,t=c)),library$1.add(faSmileWink,faNetworkWired,faCompactDisc,faBraille,faTable);const a={synth:faNetworkWired,sampler:faCompactDisc,granular:faBraille,wavetable:faTable};let{orientation:l="horizontal"}=r;const o=c=>instrument.set(c);return s.$$set=c=>{"orientation"in c&&n(0,l=c.orientation)},[l,t,a,o]}class InstrumentButtons extends SvelteComponent{constructor(r){super(),init(this,r,instance$8,create_fragment$8,safe_not_equal,{orientation:0})}}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var r={}.hasOwnProperty;function n(){for(var l="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(l=a(l,t(c)))}return l}function t(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var o="";for(var c in l)r.call(l,c)&&l[c]&&(o=a(o,c));return o}function a(l,o){return o?l?l+" "+o:l+o:l}s.exports?(n.default=n,s.exports=n):window.classNames=n})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);function create_else_block$1(s){let r=s[1],n,t,a=s[1]&&create_dynamic_element_1(s);return{c(){a&&a.c(),n=empty()},l(l){a&&a.l(l),n=empty()},m(l,o){a&&a.m(l,o),insert_hydration(l,n,o),t=!0},p(l,o){l[1]?r?safe_not_equal(r,l[1])?(a.d(1),a=create_dynamic_element_1(l),r=l[1],a.c(),a.m(n.parentNode,n)):a.p(l,o):(a=create_dynamic_element_1(l),r=l[1],a.c(),a.m(n.parentNode,n)):r&&(a.d(1),a=null,r=l[1])},i(l){t||(transition_in(a),t=!0)},o(l){transition_out(a),t=!1},d(l){l&&detach(n),a&&a.d(l)}}}function create_if_block$5(s){let r=s[1],n,t=!1,a,l=s[1]&&create_dynamic_element(s);return{c(){l&&l.c(),n=empty()},l(o){l&&l.l(o),n=empty()},m(o,c){l&&l.m(o,c),insert_hydration(o,n,c),a=!0},p(o,c){o[1]?r?safe_not_equal(r,o[1])?(l.d(1),l=create_dynamic_element(o),r=o[1],l.c(),t&&(t=!1,transition_in(l)),l.m(n.parentNode,n)):(t&&(t=!1,transition_in(l)),l.p(o,c)):(l=create_dynamic_element(o),r=o[1],l.c(),transition_in(l),l.m(n.parentNode,n)):r&&(t=!0,group_outros(),transition_out(l,1,1,()=>{l=null,r=o[1],t=!1}),check_outros())},i(o){a||(transition_in(l),a=!0)},o(o){transition_out(l),a=!1},d(o){o&&detach(n),l&&l.d(o)}}}function create_dynamic_element_1(s){let r,n,t,a,l;const o=s[13].default,c=create_slot(o,s,s[12],null);let i=[s[7],{class:s[6]}],f={};for(let y=0;y<i.length;y+=1)f=assign(f,i[y]);return{c(){r=element(s[1]),c&&c.c(),this.h()},l(y){r=claim_element(y,(s[1]||"null").toUpperCase(),{class:!0});var _=children(r);c&&c.l(_),_.forEach(detach),this.h()},h(){set_dynamic_element_data(s[1])(r,f)},m(y,_){insert_hydration(y,r,_),c&&c.m(r,null),s[23](r),t=!0,a||(l=[action_destroyer(n=s[4].call(null,r,s[5])),listen$1(r,"mouseenter",s[18]),listen$1(r,"mouseleave",s[19]),listen$1(r,"focusin",s[20]),listen$1(r,"focusout",s[21])],a=!0)},p(y,_){c&&c.p&&(!t||_&4096)&&update_slot_base(c,o,y,y[12],t?get_slot_changes(o,y[12],_,null):get_all_dirty_from_scope(y[12]),null),set_dynamic_element_data(y[1])(r,f=get_spread_update(i,[_&128&&y[7],(!t||_&64)&&{class:y[6]}])),n&&is_function(n.update)&&_&32&&n.update.call(null,y[5])},i(y){t||(transition_in(c,y),t=!0)},o(y){transition_out(c,y),t=!1},d(y){y&&detach(r),c&&c.d(y),s[23](null),a=!1,run_all(l)}}}function create_dynamic_element(s){let r,n,t,a,l,o;const c=s[13].default,i=create_slot(c,s,s[12],null);let f=[s[7],{class:s[6]}],y={};for(let _=0;_<f.length;_+=1)y=assign(y,f[_]);return{c(){r=element(s[1]),i&&i.c(),this.h()},l(_){r=claim_element(_,(s[1]||"null").toUpperCase(),{class:!0});var u=children(r);i&&i.l(u),u.forEach(detach),this.h()},h(){set_dynamic_element_data(s[1])(r,y)},m(_,u){insert_hydration(_,r,u),i&&i.m(r,null),s[22](r),a=!0,l||(o=[action_destroyer(n=s[4].call(null,r,s[5])),listen$1(r,"mouseenter",s[14]),listen$1(r,"mouseleave",s[15]),listen$1(r,"focusin",s[16]),listen$1(r,"focusout",s[17])],l=!0)},p(_,u){s=_,i&&i.p&&(!a||u&4096)&&update_slot_base(i,c,s,s[12],a?get_slot_changes(c,s[12],u,null):get_all_dirty_from_scope(s[12]),null),set_dynamic_element_data(s[1])(r,y=get_spread_update(f,[u&128&&s[7],(!a||u&64)&&{class:s[6]}])),n&&is_function(n.update)&&u&32&&n.update.call(null,s[5])},i(_){a||(transition_in(i,_),add_render_callback(()=>{a&&(t||(t=create_bidirectional_transition(r,s[2],s[3],!0)),t.run(1))}),a=!0)},o(_){transition_out(i,_),t||(t=create_bidirectional_transition(r,s[2],s[3],!1)),t.run(0),a=!1},d(_){_&&detach(r),i&&i.d(_),s[22](null),_&&t&&t.end(),l=!1,run_all(o)}}}function create_fragment$7(s){let r,n,t,a;const l=[create_if_block$5,create_else_block$1],o=[];function c(i,f){return i[2]?0:1}return r=c(s),n=o[r]=l[r](s),{c(){n.c(),t=empty()},l(i){n.l(i),t=empty()},m(i,f){o[r].m(i,f),insert_hydration(i,t,f),a=!0},p(i,[f]){let y=r;r=c(i),r===y?o[r].p(i,f):(group_outros(),transition_out(o[y],1,1,()=>{o[y]=null}),check_outros(),n=o[r],n?n.p(i,f):(n=o[r]=l[r](i),n.c()),transition_in(n,1),n.m(t.parentNode,t))},i(i){a||(transition_in(n),a=!0)},o(i){transition_out(n),a=!1},d(i){o[r].d(i),i&&detach(t)}}}function instance$7(s,r,n){const t=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r;setContext$1("background",!0);let{tag:c="div"}=r,{color:i="default"}=r,{rounded:f=!1}=r,{border:y=!1}=r,{shadow:_=!1}=r,{transition:u=void 0}=r,{params:m={}}=r,{node:p=void 0}=r,{use:g=noop}=r,{options:x={}}=r;const b={gray:"bg-gray-50 dark:bg-gray-800",red:"bg-red-50 dark:bg-gray-800",yellow:"bg-yellow-50 dark:bg-gray-800 ",green:"bg-green-50 dark:bg-gray-800 ",indigo:"bg-indigo-50 dark:bg-gray-800 ",purple:"bg-purple-50 dark:bg-gray-800 ",pink:"bg-pink-50 dark:bg-gray-800 ",blue:"bg-blue-50 dark:bg-gray-800 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-50 dark:bg-gray-800",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-50 dark:bg-gray-800 ",none:""},E={gray:"text-gray-800 dark:text-gray-300",red:"text-red-800 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-300",green:"text-green-800 dark:text-green-400",indigo:"text-indigo-800 dark:text-indigo-400",purple:"text-purple-800 dark:text-purple-400",pink:"text-pink-800 dark:text-pink-400",blue:"text-blue-800 dark:text-blue-400",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-800 dark:text-primary-400",none:""},S={gray:"border-gray-300 dark:border-gray-800",red:"border-red-300 dark:border-red-800",yellow:"border-yellow-300 dark:border-yellow-800",green:"border-green-300 dark:border-green-800",indigo:"border-indigo-300 dark:border-indigo-800",purple:"border-purple-300 dark:border-purple-800",pink:"border-pink-300 dark:border-pink-800",blue:"border-blue-300 dark:border-blue-800",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let k;function T(M){bubble.call(this,s,M)}function j(M){bubble.call(this,s,M)}function A(M){bubble.call(this,s,M)}function C(M){bubble.call(this,s,M)}function N(M){bubble.call(this,s,M)}function V(M){bubble.call(this,s,M)}function I(M){bubble.call(this,s,M)}function G(M){bubble.call(this,s,M)}function R(M){binding_callbacks[M?"unshift":"push"](()=>{p=M,n(0,p)})}function q(M){binding_callbacks[M?"unshift":"push"](()=>{p=M,n(0,p)})}return s.$$set=M=>{n(27,r=assign(assign({},r),exclude_internal_props(M))),n(7,a=compute_rest_props(r,t)),"tag"in M&&n(1,c=M.tag),"color"in M&&n(8,i=M.color),"rounded"in M&&n(9,f=M.rounded),"border"in M&&n(10,y=M.border),"shadow"in M&&n(11,_=M.shadow),"transition"in M&&n(2,u=M.transition),"params"in M&&n(3,m=M.params),"node"in M&&n(0,p=M.node),"use"in M&&n(4,g=M.use),"options"in M&&n(5,x=M.options),"$$scope"in M&&n(12,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&256&&setContext$1("color",i),n(6,k=classNames(b[i],E[i],f&&(i==="dropdown"?"rounded":"rounded-lg"),y&&"border",S[i],_&&"shadow-md",r.class))},r=exclude_internal_props(r),[p,c,u,m,g,x,k,a,i,f,y,_,o,l,T,j,A,C,N,V,I,G,R,q]}class Frame extends SvelteComponent{constructor(r){super(),init(this,r,instance$7,create_fragment$7,safe_not_equal,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}function blur(s,{delay:r=0,duration:n=400,easing:t=cubicInOut,amount:a=5,opacity:l=0}={}){const o=getComputedStyle(s),c=+o.opacity,i=o.filter==="none"?"":o.filter,f=c*(1-l),[y,_]=split_css_unit(a);return{delay:r,duration:n,easing:t,css:(u,m)=>`opacity: ${c-f*m}; filter: ${i} blur(${m*y}${_});`}}function fade(s,{delay:r=0,duration:n=400,easing:t=identity}={}){const a=+getComputedStyle(s).opacity;return{delay:r,duration:n,easing:t,css:l=>`opacity: ${l*a}`}}function fly(s,{delay:r=0,duration:n=400,easing:t=cubicOut,x:a=0,y:l=0,opacity:o=0}={}){const c=getComputedStyle(s),i=+c.opacity,f=c.transform==="none"?"":c.transform,y=i*(1-o),[_,u]=split_css_unit(a),[m,p]=split_css_unit(l);return{delay:r,duration:n,easing:t,css:(g,x)=>`
			transform: ${f} translate(${(1-g)*_}${u}, ${(1-g)*m}${p});
			opacity: ${i-y*x}`}}function slide(s,{delay:r=0,duration:n=400,easing:t=cubicOut,axis:a="y"}={}){const l=getComputedStyle(s),o=+l.opacity,c=a==="y"?"height":"width",i=parseFloat(l[c]),f=a==="y"?["top","bottom"]:["left","right"],y=f.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),_=parseFloat(l[`padding${y[0]}`]),u=parseFloat(l[`padding${y[1]}`]),m=parseFloat(l[`margin${y[0]}`]),p=parseFloat(l[`margin${y[1]}`]),g=parseFloat(l[`border${y[0]}Width`]),x=parseFloat(l[`border${y[1]}Width`]);return{delay:r,duration:n,easing:t,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*o};${c}: ${b*i}px;padding-${f[0]}: ${b*_}px;padding-${f[1]}: ${b*u}px;margin-${f[0]}: ${b*m}px;margin-${f[1]}: ${b*p}px;border-${f[0]}-width: ${b*g}px;border-${f[1]}-width: ${b*x}px;`}}const get_default_slot_changes$1=s=>({svgSize:s&4}),get_default_slot_context$1=s=>({svgSize:s[4][s[2]]});function create_if_block$4(s){let r,n;return{c(){r=element("span"),n=text(s[0]),this.h()},l(t){r=claim_element(t,"SPAN",{class:!0});var a=children(r);n=claim_text(a,s[0]),a.forEach(detach),this.h()},h(){attr(r,"class","sr-only")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},p(t,a){a&1&&set_data(n,t[0])},d(t){t&&detach(r)}}}function create_fragment$6(s){let r,n,t,a,l,o,c=s[0]&&create_if_block$4(s);const i=s[8].default,f=create_slot(i,s,s[7],get_default_slot_context$1);let y=[{type:"button"},s[5],{class:s[3]},{"aria-label":t=s[1]??s[0]}],_={};for(let u=0;u<y.length;u+=1)_=assign(_,y[u]);return{c(){r=element("button"),c&&c.c(),n=space(),f&&f.c(),this.h()},l(u){r=claim_element(u,"BUTTON",{type:!0,class:!0,"aria-label":!0});var m=children(r);c&&c.l(m),n=claim_space(m),f&&f.l(m),m.forEach(detach),this.h()},h(){set_attributes(r,_)},m(u,m){insert_hydration(u,r,m),c&&c.m(r,null),append_hydration(r,n),f&&f.m(r,null),r.autofocus&&r.focus(),a=!0,l||(o=listen$1(r,"click",s[9]),l=!0)},p(u,[m]){u[0]?c?c.p(u,m):(c=create_if_block$4(u),c.c(),c.m(r,n)):c&&(c.d(1),c=null),f&&f.p&&(!a||m&132)&&update_slot_base(f,i,u,u[7],a?get_slot_changes(i,u[7],m,get_default_slot_changes$1):get_all_dirty_from_scope(u[7]),get_default_slot_context$1),set_attributes(r,_=get_spread_update(y,[{type:"button"},m&32&&u[5],(!a||m&8)&&{class:u[3]},(!a||m&3&&t!==(t=u[1]??u[0]))&&{"aria-label":t}]))},i(u){a||(transition_in(f,u),a=!0)},o(u){transition_out(f,u),a=!1},d(u){u&&detach(r),c&&c.d(),f&&f.d(u),l=!1,o()}}}function instance$6(s,r,n){const t=["color","name","ariaLabel","size"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r;const c=getContext$1("background");let{color:i="default"}=r,{name:f=void 0}=r,{ariaLabel:y=void 0}=r,{size:_="md"}=r;const u={dark:"text-gray-500 hover:text-gray-900 hover:bg-gray-200 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700",gray:"text-gray-500 focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",red:"text-red-500 focus:ring-red-400 hover:bg-red-200 dark:hover:bg-gray-700",yellow:"text-yellow-500 focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-gray-700",green:"text-green-500 focus:ring-green-400 hover:bg-green-200 dark:hover:bg-gray-700",indigo:"text-indigo-500 focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-gray-700",purple:"text-purple-500 focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-gray-700",pink:"text-pink-500 focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-gray-700",blue:"text-blue-500 focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-gray-700",default:"focus:ring-gray-400 "},m={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let p;const g={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function x(b){bubble.call(this,s,b)}return s.$$set=b=>{n(13,r=assign(assign({},r),exclude_internal_props(b))),n(5,a=compute_rest_props(r,t)),"color"in b&&n(6,i=b.color),"name"in b&&n(0,f=b.name),"ariaLabel"in b&&n(1,y=b.ariaLabel),"size"in b&&n(2,_=b.size),"$$scope"in b&&n(7,o=b.$$scope)},s.$$.update=()=>{n(3,p=classNames("focus:outline-none whitespace-normal",m[_],u[i],i==="default"&&(c?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),r.class))},r=exclude_internal_props(r),[f,y,_,p,g,a,i,o,l,x]}class ToolbarButton extends SvelteComponent{constructor(r){super(),init(this,r,instance$6,create_fragment$6,safe_not_equal,{color:6,name:0,ariaLabel:1,size:2})}}function create_default_slot$3(s){let r,n,t;return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(a){r=claim_svg_element(a,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var l=children(r);n=claim_svg_element(l,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),l.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),attr(n,"clip-rule","evenodd"),attr(r,"class",t=s[4]),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg")},m(a,l){insert_hydration(a,r,l),append_hydration(r,n)},p(a,l){l&16&&t!==(t=a[4])&&attr(r,"class",t)},d(a){a&&detach(r)}}}function create_fragment$5(s){let r,n;const t=[{name:s[0]},s[1],{class:classNames("ml-auto",s[2].class)}];let a={$$slots:{default:[create_default_slot$3,({svgSize:l})=>({4:l}),({svgSize:l})=>l?16:0]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return r=new ToolbarButton({props:a}),r.$on("click",s[3]),{c(){create_component(r.$$.fragment)},l(l){claim_component(r.$$.fragment,l)},m(l,o){mount_component(r,l,o),n=!0},p(l,[o]){const c=o&7?get_spread_update(t,[o&1&&{name:l[0]},o&2&&get_spread_object(l[1]),o&4&&{class:classNames("ml-auto",l[2].class)}]):{};o&48&&(c.$$scope={dirty:o,ctx:l}),r.$set(c)},i(l){n||(transition_in(r.$$.fragment,l),n=!0)},o(l){transition_out(r.$$.fragment,l),n=!1},d(l){destroy_component(r,l)}}}function instance$5(s,r,n){const t=["name"];let a=compute_rest_props(r,t),{name:l="Close"}=r;function o(c){bubble.call(this,s,c)}return s.$$set=c=>{n(2,r=assign(assign({},r),exclude_internal_props(c))),n(1,a=compute_rest_props(r,t)),"name"in c&&n(0,l=c.name)},r=exclude_internal_props(r),[l,a,r,o]}class CloseButton extends SvelteComponent{constructor(r){super(),init(this,r,instance$5,create_fragment$5,safe_not_equal,{name:0})}}const Thumbnail_svelte_svelte_type_style_lang="",Indicator_svelte_svelte_type_style_lang="",clickOutside=(s,r)=>{const n=t=>{t!=null&&t.target&&s&&!s.contains(t.target)&&!t.defaultPrevented&&r()};return document.addEventListener("click",n,!0),{destroy(){document.removeEventListener("click",n,!0)}}},get_default_slot_changes_1=s=>({hidden:s&1}),get_default_slot_context_1=s=>({hidden:s[0]}),get_default_slot_changes=s=>({hidden:s&1}),get_default_slot_context=s=>({hidden:s[0]});function create_if_block$3(s){let r,n,t,a,l;function o(u,m){if(u[4]&&u[1])return create_if_block_2$2;if(u[4]&&!u[1])return create_if_block_3}let c=o(s),i=c&&c(s);const f=[create_if_block_1$2,create_else_block],y=[];function _(u,m){return u[1]?0:1}return n=_(s),t=y[n]=f[n](s),{c(){i&&i.c(),r=space(),t.c(),a=empty()},l(u){i&&i.l(u),r=claim_space(u),t.l(u),a=empty()},m(u,m){i&&i.m(u,m),insert_hydration(u,r,m),y[n].m(u,m),insert_hydration(u,a,m),l=!0},p(u,m){c===(c=o(u))&&i?i.p(u,m):(i&&i.d(1),i=c&&c(u),i&&(i.c(),i.m(r.parentNode,r)));let p=n;n=_(u),n===p?y[n].p(u,m):(group_outros(),transition_out(y[p],1,1,()=>{y[p]=null}),check_outros(),t=y[n],t?t.p(u,m):(t=y[n]=f[n](u),t.c()),transition_in(t,1),t.m(a.parentNode,a))},i(u){l||(transition_in(t),l=!0)},o(u){transition_out(t),l=!1},d(u){i&&i.d(u),u&&detach(r),y[n].d(u),u&&detach(a)}}}function create_if_block_3(s){let r;return{c(){r=element("div"),this.h()},l(n){r=claim_element(n,"DIV",{role:!0,class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"role","presentation"),attr(r,"class",s[12])},m(n,t){insert_hydration(n,r,t)},p:noop,d(n){n&&detach(r)}}}function create_if_block_2$2(s){let r,n,t;return{c(){r=element("div"),this.h()},l(a){r=claim_element(a,"DIV",{role:!0,class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"role","presentation"),attr(r,"class",s[12])},m(a,l){insert_hydration(a,r,l),n||(t=listen$1(r,"click",s[24]),n=!0)},p:noop,d(a){a&&detach(r),n=!1,t()}}}function create_else_block(s){let r,n,t,a;const l=s[23].default,o=create_slot(l,s,s[22],get_default_slot_context_1);let c=[{id:s[6]},s[13],{class:n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)},{tabindex:"-1"},{"aria-controls":s[6]},{"aria-labelledby":s[6]}],i={};for(let f=0;f<c.length;f+=1)i=assign(i,c[f]);return{c(){r=element("div"),o&&o.c(),this.h()},l(f){r=claim_element(f,"DIV",{id:!0,class:!0,tabindex:!0,"aria-controls":!0,"aria-labelledby":!0});var y=children(r);o&&o.l(y),y.forEach(detach),this.h()},h(){set_attributes(r,i)},m(f,y){insert_hydration(f,r,y),o&&o.m(r,null),a=!0},p(f,y){s=f,o&&o.p&&(!a||y&4194305)&&update_slot_base(o,l,s,s[22],a?get_slot_changes(l,s[22],y,get_default_slot_changes_1):get_all_dirty_from_scope(s[22]),get_default_slot_context_1),set_attributes(r,i=get_spread_update(c,[(!a||y&64)&&{id:s[6]},y&8192&&s[13],(!a||y&16556&&n!==(n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)))&&{class:n},{tabindex:"-1"},(!a||y&64)&&{"aria-controls":s[6]},(!a||y&64)&&{"aria-labelledby":s[6]}]))},i(f){a||(transition_in(o,f),add_render_callback(()=>{a&&(t||(t=create_bidirectional_transition(r,s[9],s[8],!0)),t.run(1))}),a=!0)},o(f){transition_out(o,f),t||(t=create_bidirectional_transition(r,s[9],s[8],!1)),t.run(0),a=!1},d(f){f&&detach(r),o&&o.d(f),f&&t&&t.end()}}}function create_if_block_1$2(s){let r,n,t,a,l,o,c;const i=s[23].default,f=create_slot(i,s,s[22],get_default_slot_context);let y=[{id:s[6]},s[13],{class:n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)},{tabindex:"-1"},{"aria-controls":s[6]},{"aria-labelledby":s[6]}],_={};for(let u=0;u<y.length;u+=1)_=assign(_,y[u]);return{c(){r=element("div"),f&&f.c(),this.h()},l(u){r=claim_element(u,"DIV",{id:!0,class:!0,tabindex:!0,"aria-controls":!0,"aria-labelledby":!0});var m=children(r);f&&f.l(m),m.forEach(detach),this.h()},h(){set_attributes(r,_)},m(u,m){insert_hydration(u,r,m),f&&f.m(r,null),l=!0,o||(c=action_destroyer(t=clickOutside.call(null,r,s[25])),o=!0)},p(u,m){s=u,f&&f.p&&(!l||m&4194305)&&update_slot_base(f,i,s,s[22],l?get_slot_changes(i,s[22],m,get_default_slot_changes):get_all_dirty_from_scope(s[22]),get_default_slot_context),set_attributes(r,_=get_spread_update(y,[(!l||m&64)&&{id:s[6]},m&8192&&s[13],(!l||m&16556&&n!==(n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)))&&{class:n},{tabindex:"-1"},(!l||m&64)&&{"aria-controls":s[6]},(!l||m&64)&&{"aria-labelledby":s[6]}])),t&&is_function(t.update)&&m&1&&t.update.call(null,s[25])},i(u){l||(transition_in(f,u),add_render_callback(()=>{l&&(a||(a=create_bidirectional_transition(r,s[9],s[8],!0)),a.run(1))}),l=!0)},o(u){transition_out(f,u),a||(a=create_bidirectional_transition(r,s[9],s[8],!1)),a.run(0),l=!1},d(u){u&&detach(r),f&&f.d(u),u&&a&&a.end(),o=!1,c()}}}function create_fragment$4(s){let r,n,t=!s[0]&&create_if_block$3(s);return{c(){t&&t.c(),r=empty()},l(a){t&&t.l(a),r=empty()},m(a,l){t&&t.m(a,l),insert_hydration(a,r,l),n=!0},p(a,[l]){a[0]?t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros()):t?(t.p(a,l),l&1&&transition_in(t,1)):(t=create_if_block$3(a),t.c(),transition_in(t,1),t.m(r.parentNode,r))},i(a){n||(transition_in(t),n=!0)},o(a){transition_out(t),n=!1},d(a){t&&t.d(a),a&&detach(r)}}}function instance$4(s,r,n){const t=["activateClickOutside","hidden","position","leftOffset","rightOffset","topOffset","bottomOffset","width","backdrop","bgColor","bgOpacity","placement","id","divClass","transitionParams","transitionType"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r,{activateClickOutside:c=!0}=r,{hidden:i=!0}=r,{position:f="fixed"}=r,{leftOffset:y="inset-y-0 left-0"}=r,{rightOffset:_="inset-y-0 right-0"}=r,{topOffset:u="inset-x-0 top-0"}=r,{bottomOffset:m="inset-x-0 bottom-0"}=r,{width:p="w-80"}=r,{backdrop:g=!0}=r,{bgColor:x="bg-gray-900"}=r,{bgOpacity:b="bg-opacity-75"}=r,{placement:E="left"}=r,{id:S="drawer-example"}=r,{divClass:k="overflow-y-auto z-50 p-4 bg-white dark:bg-gray-800"}=r,{transitionParams:T={}}=r,{transitionType:j="fly"}=r;function A(R,q){switch(j){case"slide":return slide(R,q);case"blur":return blur(R,q);case"fade":return fade(R,q);default:return fly(R,q)}}const C={left:y,right:_,top:u,bottom:m},N=()=>{n(0,i=!i)};let V=classNames("fixed top-0 left-0 z-50 w-full h-full",g&&x,g&&b);const I=()=>!i&&N(),G=()=>!i&&N();return s.$$set=R=>{n(14,r=assign(assign({},r),exclude_internal_props(R))),n(13,a=compute_rest_props(r,t)),"activateClickOutside"in R&&n(1,c=R.activateClickOutside),"hidden"in R&&n(0,i=R.hidden),"position"in R&&n(2,f=R.position),"leftOffset"in R&&n(15,y=R.leftOffset),"rightOffset"in R&&n(16,_=R.rightOffset),"topOffset"in R&&n(17,u=R.topOffset),"bottomOffset"in R&&n(18,m=R.bottomOffset),"width"in R&&n(3,p=R.width),"backdrop"in R&&n(4,g=R.backdrop),"bgColor"in R&&n(19,x=R.bgColor),"bgOpacity"in R&&n(20,b=R.bgOpacity),"placement"in R&&n(5,E=R.placement),"id"in R&&n(6,S=R.id),"divClass"in R&&n(7,k=R.divClass),"transitionParams"in R&&n(8,T=R.transitionParams),"transitionType"in R&&n(21,j=R.transitionType),"$$scope"in R&&n(22,o=R.$$scope)},r=exclude_internal_props(r),[i,c,f,p,g,E,S,k,T,A,C,N,V,a,r,y,_,u,m,x,b,j,o,l,I,G]}class Drawer extends SvelteComponent{constructor(r){super(),init(this,r,instance$4,create_fragment$4,safe_not_equal,{activateClickOutside:1,hidden:0,position:2,leftOffset:15,rightOffset:16,topOffset:17,bottomOffset:18,width:3,backdrop:4,bgColor:19,bgOpacity:20,placement:5,id:6,divClass:7,transitionParams:8,transitionType:21})}}const get_extra_slot_changes=s=>({}),get_extra_slot_context=s=>({}),get_icon_slot_changes=s=>({}),get_icon_slot_context=s=>({});function create_if_block$2(s){let r,n;const t=[{rounded:!0},{border:!0},{transition:fade},s[5],{class:s[3]},{role:"alert"}];let a={$$slots:{default:[create_default_slot$2]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return r=new Frame({props:a}),{c(){create_component(r.$$.fragment)},l(l){claim_component(r.$$.fragment,l)},m(l,o){mount_component(r,l,o),n=!0},p(l,o){const c=o&40?get_spread_update(t,[t[0],t[1],o&0&&{transition:fade},o&32&&get_spread_object(l[5]),o&8&&{class:l[3]},t[5]]):{};o&2135&&(c.$$scope={dirty:o,ctx:l}),r.$set(c)},i(l){n||(transition_in(r.$$.fragment,l),n=!0)},o(l){transition_out(r.$$.fragment,l),n=!1},d(l){destroy_component(r,l)}}}function create_if_block_2$1(s){let r,n;return r=new Frame({props:{color:s[1],rounded:!0,class:s[4],$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:s}}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&2&&(l.color=t[1]),a&16&&(l.class=t[4]),a&2048&&(l.$$scope={dirty:a,ctx:t}),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot_1$1(s){let r;const n=s[9].icon,t=create_slot(n,s,s[11],get_icon_slot_context);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,l){t&&t.m(a,l),r=!0},p(a,l){t&&t.p&&(!r||l&2048)&&update_slot_base(t,n,a,a[11],r?get_slot_changes(n,a[11],l,get_icon_slot_changes):get_all_dirty_from_scope(a[11]),get_icon_slot_context)},i(a){r||(transition_in(t,a),r=!0)},o(a){transition_out(t,a),r=!1},d(a){t&&t.d(a)}}}function create_if_block_1$1(s){let r,n;return r=new CloseButton({}),r.$on("click",s[10]),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p:noop,i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot$2(s){let r,n,t,a,l,o,c,i=s[6].icon&&create_if_block_2$1(s);const f=s[9].default,y=create_slot(f,s,s[11],null),_=s[9].extra,u=create_slot(_,s,s[11],get_extra_slot_context);let m=!s[2]&&create_if_block_1$1(s);return{c(){r=element("div"),i&&i.c(),n=space(),t=element("div"),y&&y.c(),a=space(),u&&u.c(),l=space(),m&&m.c(),this.h()},l(p){r=claim_element(p,"DIV",{class:!0});var g=children(r);i&&i.l(g),n=claim_space(g),t=claim_element(g,"DIV",{class:!0});var x=children(t);y&&y.l(x),a=claim_space(x),u&&u.l(x),x.forEach(detach),l=claim_space(g),m&&m.l(g),g.forEach(detach),this.h()},h(){attr(t,"class","text-sm font-normal w-full"),attr(r,"class",o="flex "+(s[6].extra?"items-start":"items-center"))},m(p,g){insert_hydration(p,r,g),i&&i.m(r,null),append_hydration(r,n),append_hydration(r,t),y&&y.m(t,null),append_hydration(t,a),u&&u.m(t,null),append_hydration(r,l),m&&m.m(r,null),c=!0},p(p,g){p[6].icon?i?(i.p(p,g),g&64&&transition_in(i,1)):(i=create_if_block_2$1(p),i.c(),transition_in(i,1),i.m(r,n)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros()),y&&y.p&&(!c||g&2048)&&update_slot_base(y,f,p,p[11],c?get_slot_changes(f,p[11],g,null):get_all_dirty_from_scope(p[11]),null),u&&u.p&&(!c||g&2048)&&update_slot_base(u,_,p,p[11],c?get_slot_changes(_,p[11],g,get_extra_slot_changes):get_all_dirty_from_scope(p[11]),get_extra_slot_context),p[2]?m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()):m?(m.p(p,g),g&4&&transition_in(m,1)):(m=create_if_block_1$1(p),m.c(),transition_in(m,1),m.m(r,null)),(!c||g&64&&o!==(o="flex "+(p[6].extra?"items-start":"items-center")))&&attr(r,"class",o)},i(p){c||(transition_in(i),transition_in(y,p),transition_in(u,p),transition_in(m),c=!0)},o(p){transition_out(i),transition_out(y,p),transition_out(u,p),transition_out(m),c=!1},d(p){p&&detach(r),i&&i.d(),y&&y.d(p),u&&u.d(p),m&&m.d()}}}function create_fragment$3(s){let r,n,t=s[0]&&create_if_block$2(s);return{c(){t&&t.c(),r=empty()},l(a){t&&t.l(a),r=empty()},m(a,l){t&&t.m(a,l),insert_hydration(a,r,l),n=!0},p(a,[l]){a[0]?t?(t.p(a,l),l&1&&transition_in(t,1)):(t=create_if_block$2(a),t.c(),transition_in(t,1),t.m(r.parentNode,r)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(a){n||(transition_in(t),n=!0)},o(a){transition_out(t),n=!1},d(a){t&&t.d(a),a&&detach(r)}}}function instance$3(s,r,n){const t=["color","simple","position","open","divClass"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r;const c=compute_slots(l);let{color:i="blue"}=r,{simple:f=!1}=r,{position:y="none"}=r,{open:_=!0}=r,{divClass:u="w-full max-w-xs p-4"}=r;const m={"top-left":"absolute top-5 left-5","top-right":"absolute top-5 right-5","bottom-left":"absolute bottom-5 left-5","bottom-right":"absolute bottom-5 right-5",none:""};let p,g;const x=()=>n(0,_=!1);return s.$$set=b=>{n(13,r=assign(assign({},r),exclude_internal_props(b))),n(5,a=compute_rest_props(r,t)),"color"in b&&n(1,i=b.color),"simple"in b&&n(2,f=b.simple),"position"in b&&n(7,y=b.position),"open"in b&&n(0,_=b.open),"divClass"in b&&n(8,u=b.divClass),"$$scope"in b&&n(11,o=b.$$scope)},s.$$.update=()=>{n(3,p=classNames(u,m[y],r.class))},n(4,g=classNames("inline-flex items-center justify-center flex-shrink-0 w-8 h-8 mr-3")),r=exclude_internal_props(r),[_,i,f,p,g,a,c,y,u,l,x,o]}class Toast extends SvelteComponent{constructor(r){super(),init(this,r,instance$3,create_fragment$3,safe_not_equal,{color:1,simple:2,position:7,open:0,divClass:8})}}function create_if_block_2(s){let r,n,t;function a(o){s[8](o)}let l={color:"pink",class:"mb-2",$$slots:{icon:[create_icon_slot_2],default:[create_default_slot_2]},$$scope:{ctx:s}};return s[2]!==void 0&&(l.open=s[2]),r=new Toast({props:l}),binding_callbacks.push(()=>bind(r,"open",a)),r.$on("close",s[9]),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){const i={};c&4097&&(i.$$scope={dirty:c,ctx:o}),!n&&c&4&&(n=!0,i.open=o[2],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_if_block_1(s){let r,n,t;function a(o){s[6](o)}let l={color:"red",class:"mb-2",$$slots:{icon:[create_icon_slot_1],default:[create_default_slot_1]},$$scope:{ctx:s}};return s[2]!==void 0&&(l.open=s[2]),r=new Toast({props:l}),binding_callbacks.push(()=>bind(r,"open",a)),r.$on("close",s[7]),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){const i={};c&4097&&(i.$$scope={dirty:c,ctx:o}),!n&&c&4&&(n=!0,i.open=o[2],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_if_block$1(s){let r,n,t;function a(o){s[4](o)}let l={color:"green",class:"mb-2",$$slots:{icon:[create_icon_slot],default:[create_default_slot$1]},$$scope:{ctx:s}};return s[2]!==void 0&&(l.open=s[2]),r=new Toast({props:l}),binding_callbacks.push(()=>bind(r,"open",a)),r.$on("close",s[5]),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){const i={};c&4097&&(i.$$scope={dirty:c,ctx:o}),!n&&c&4&&(n=!0,i.open=o[2],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_default_slot_2(s){let r;return{c(){r=text(s[0])},l(n){r=claim_text(n,s[0])},m(n,t){insert_hydration(n,r,t)},p(n,t){t&1&&set_data(r,n[0])},d(n){n&&detach(r)}}}function create_icon_slot_2(s){let r,n,t,a,l;return{c(){r=svg_element("svg"),n=svg_element("path"),t=space(),a=element("span"),l=text("Warning icon"),this.h()},l(o){r=claim_svg_element(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=children(r);n=claim_svg_element(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),c.forEach(detach),t=claim_space(o),a=claim_element(o,"SPAN",{class:!0});var i=children(a);l=claim_text(i,"Warning icon"),i.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"),attr(n,"clip-rule","evenodd"),attr(r,"aria-hidden","true"),attr(r,"class","w-5 h-5"),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(a,"class","sr-only")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),insert_hydration(o,t,c),insert_hydration(o,a,c),append_hydration(a,l)},p:noop,d(o){o&&detach(r),o&&detach(t),o&&detach(a)}}}function create_default_slot_1(s){let r;return{c(){r=text(s[0])},l(n){r=claim_text(n,s[0])},m(n,t){insert_hydration(n,r,t)},p(n,t){t&1&&set_data(r,n[0])},d(n){n&&detach(r)}}}function create_icon_slot_1(s){let r,n,t,a,l;return{c(){r=svg_element("svg"),n=svg_element("path"),t=space(),a=element("span"),l=text("Error icon"),this.h()},l(o){r=claim_svg_element(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=children(r);n=claim_svg_element(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),c.forEach(detach),t=claim_space(o),a=claim_element(o,"SPAN",{class:!0});var i=children(a);l=claim_text(i,"Error icon"),i.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),attr(n,"clip-rule","evenodd"),attr(r,"aria-hidden","true"),attr(r,"class","w-5 h-5"),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(a,"class","sr-only")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),insert_hydration(o,t,c),insert_hydration(o,a,c),append_hydration(a,l)},p:noop,d(o){o&&detach(r),o&&detach(t),o&&detach(a)}}}function create_default_slot$1(s){let r;return{c(){r=text(s[0])},l(n){r=claim_text(n,s[0])},m(n,t){insert_hydration(n,r,t)},p(n,t){t&1&&set_data(r,n[0])},d(n){n&&detach(r)}}}function create_icon_slot(s){let r,n,t,a,l;return{c(){r=svg_element("svg"),n=svg_element("path"),t=space(),a=element("span"),l=text("Check icon"),this.h()},l(o){r=claim_svg_element(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=children(r);n=claim_svg_element(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),c.forEach(detach),t=claim_space(o),a=claim_element(o,"SPAN",{class:!0});var i=children(a);l=claim_text(i,"Check icon"),i.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),attr(n,"clip-rule","evenodd"),attr(r,"aria-hidden","true"),attr(r,"class","w-5 h-5"),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(a,"class","sr-only")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),insert_hydration(o,t,c),insert_hydration(o,a,c),append_hydration(a,l)},p:noop,d(o){o&&detach(r),o&&detach(t),o&&detach(a)}}}function create_fragment$2(s){let r,n,t,a;const l=[create_if_block$1,create_if_block_1,create_if_block_2],o=[];function c(i,f){return i[1]==="success"?0:i[1]==="error"?1:i[1]==="warning"?2:-1}return~(r=c(s))&&(n=o[r]=l[r](s)),{c(){n&&n.c(),t=empty()},l(i){n&&n.l(i),t=empty()},m(i,f){~r&&o[r].m(i,f),insert_hydration(i,t,f),a=!0},p(i,[f]){let y=r;r=c(i),r===y?~r&&o[r].p(i,f):(n&&(group_outros(),transition_out(o[y],1,1,()=>{o[y]=null}),check_outros()),~r?(n=o[r],n?n.p(i,f):(n=o[r]=l[r](i),n.c()),transition_in(n,1),n.m(t.parentNode,t)):n=null)},i(i){a||(transition_in(n),a=!0)},o(i){transition_out(n),a=!1},d(i){~r&&o[r].d(i),i&&detach(t)}}}function instance$2(s,r,n){let{message:t}=r,{type:a}=r,{onClose:l=()=>{}}=r,o=!0,c=5;function i(){if(--c>0&&o)return setTimeout(i,1e3);n(2,o=!1),l()}onMount(()=>{i()});function f(g){o=g,n(2,o)}const y=()=>n(2,o=!1);function _(g){o=g,n(2,o)}const u=()=>n(2,o=!1);function m(g){o=g,n(2,o)}const p=()=>n(2,o=!1);return s.$$set=g=>{"message"in g&&n(0,t=g.message),"type"in g&&n(1,a=g.type),"onClose"in g&&n(3,l=g.onClose)},[t,a,o,l,f,y,_,u,m,p]}class Toast_1 extends SvelteComponent{constructor(r){super(),init(this,r,instance$2,create_fragment$2,safe_not_equal,{message:0,type:1,onClose:3})}}const toasts=writable$1([]);function addToast(s,r="success"){toasts.update(n=>[...n,{message:s,type:r}])}isChrome()||addToast("Please use Chrome for optimum audio performance","warning");const Toasts_svelte_svelte_type_style_lang="";function get_each_context(s,r,n){const t=s.slice();return t[1]=r[n].message,t[2]=r[n].type,t}function create_each_block(s){let r,n;return r=new Toast_1({props:{message:s[1],type:s[2]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&1&&(l.message=t[1]),a&1&&(l.type=t[2]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_fragment$1(s){let r,n,t=s[0],a=[];for(let o=0;o<t.length;o+=1)a[o]=create_each_block(get_each_context(s,t,o));const l=o=>transition_out(a[o],1,1,()=>{a[o]=null});return{c(){r=element("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<a.length;i+=1)a[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","toasts svelte-1eqygg0")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,null);n=!0},p(o,[c]){if(c&1){t=o[0];let i;for(i=0;i<t.length;i+=1){const f=get_each_context(o,t,i);a[i]?(a[i].p(f,c),transition_in(a[i],1)):(a[i]=create_each_block(f),a[i].c(),transition_in(a[i],1),a[i].m(r,null))}for(group_outros(),i=t.length;i<a.length;i+=1)l(i);check_outros()}},i(o){if(!n){for(let c=0;c<t.length;c+=1)transition_in(a[c]);n=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);n=!1},d(o){o&&detach(r),destroy_each(a,o)}}}function instance$1(s,r,n){let t;return component_subscribe(s,toasts,a=>n(0,t=a)),[t]}class Toasts extends SvelteComponent{constructor(r){super(),init(this,r,instance$1,create_fragment$1,safe_not_equal,{})}}const login=async()=>{const s=localStorage.getItem("q.id")||"",r=localStorage.getItem("q.name")||"",n=localStorage.getItem("q.location")||"";id.set(+s),name.set(r||"Quantum Explorer "+Math.random().toString(36).substring(2,10)),location$1.set(n||"Outer Space");const t=get_store_value(id)?`/api/app-user/${get_store_value(id)}/login`:"/api/app-user/register",a=get_store_value(id)?"GET":"POST";let l={headers:get_store_value(headers),method:a};return a==="POST"&&(l={...l,body:JSON.stringify({name:get_store_value(name),location:get_store_value(location$1)})}),fetch(`${get_store_value(apiDomain)}${t}`,l).then(o=>o.json()).then(({user:o})=>{id.set(o.id),localStorage.setItem("q.id",o.id),isLoggedIn.set(!0)}).catch(o=>console.error("Error:",o))},logout$1=()=>{const s=`/api/app-user/${get_store_value(id)}/logout`;return fetch(`${get_store_value(apiDomain)}${s}`,{headers:get_store_value(headers),method:"GET"})},sendPosition=s=>{get_store_value(isLoggedIn)&&fetch(`${get_store_value(apiDomain)}/api/app-user/${get_store_value(id)}/position`,{method:"POST",headers:get_store_value(headers),body:JSON.stringify({coords:{x:s[0],y:s[1],z:s[2]}})}).catch(r=>console.error("Error:",r))},broadcast=()=>{const s=axes[0].subscribe(throttle(sendPosition,100));return()=>{s()}};function _typeof(s){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(s)}function _classCallCheck(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function _createClass(s,r,n){return r&&_defineProperties(s.prototype,r),n&&_defineProperties(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function _extends(){return _extends=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},_extends.apply(this,arguments)}function _inherits(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&_setPrototypeOf(s,r)}function _getPrototypeOf(s){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(s)}function _setPrototypeOf(s,r){return _setPrototypeOf=Object.setPrototypeOf||function(t,a){return t.__proto__=a,t},_setPrototypeOf(s,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _assertThisInitialized(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _possibleConstructorReturn(s,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(s)}function _createSuper(s){var r=_isNativeReflectConstruct();return function(){var t=_getPrototypeOf(s),a;if(r){var l=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}var Channel=function(){function s(){_classCallCheck(this,s)}return _createClass(s,[{key:"listenForWhisper",value:function(n,t){return this.listen(".client-"+n,t)}},{key:"notification",value:function(n){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",n)}},{key:"stopListeningForWhisper",value:function(n,t){return this.stopListening(".client-"+n,t)}}]),s}(),EventFormatter=function(){function s(r){_classCallCheck(this,s),this.namespace=r}return _createClass(s,[{key:"format",value:function(n){return[".","\\"].includes(n.charAt(0))?n.substring(1):(this.namespace&&(n=this.namespace+"."+n),n.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(n){this.namespace=n}}]),s}(),PusherChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(t,a,l){var o;return _classCallCheck(this,n),o=r.call(this),o.name=a,o.pusher=t,o.options=l,o.eventFormatter=new EventFormatter(o.options.namespace),o.subscribe(),o}return _createClass(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(a,l){return this.on(this.eventFormatter.format(a),l),this}},{key:"listenToAll",value:function(a){var l=this;return this.subscription.bind_global(function(o,c){if(!o.startsWith("pusher:")){var i=l.options.namespace.replace(/\./g,"\\"),f=o.startsWith(i)?o.substring(i.length+1):"."+o;a(f,c)}}),this}},{key:"stopListening",value:function(a,l){return l?this.subscription.unbind(this.eventFormatter.format(a),l):this.subscription.unbind(this.eventFormatter.format(a)),this}},{key:"stopListeningToAll",value:function(a){return a?this.subscription.unbind_global(a):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(a){return this.on("pusher:subscription_succeeded",function(){a()}),this}},{key:"error",value:function(a){return this.on("pusher:subscription_error",function(l){a(l)}),this}},{key:"on",value:function(a,l){return this.subscription.bind(a,l),this}}]),n}(Channel),PusherPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),l),this}}]),n}(PusherChannel),PusherEncryptedPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),l),this}}]),n}(PusherChannel),PusherPresenceChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"here",value:function(a){return this.on("pusher:subscription_succeeded",function(l){a(Object.keys(l.members).map(function(o){return l.members[o]}))}),this}},{key:"joining",value:function(a){return this.on("pusher:member_added",function(l){a(l.info)}),this}},{key:"whisper",value:function(a,l){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),l),this}},{key:"leaving",value:function(a){return this.on("pusher:member_removed",function(l){a(l.info)}),this}}]),n}(PusherChannel),SocketIoChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(t,a,l){var o;return _classCallCheck(this,n),o=r.call(this),o.events={},o.listeners={},o.name=a,o.socket=t,o.options=l,o.eventFormatter=new EventFormatter(o.options.namespace),o.subscribe(),o}return _createClass(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(a,l){return this.on(this.eventFormatter.format(a),l),this}},{key:"stopListening",value:function(a,l){return this.unbindEvent(this.eventFormatter.format(a),l),this}},{key:"subscribed",value:function(a){return this.on("connect",function(l){a(l)}),this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,l){var o=this;return this.listeners[a]=this.listeners[a]||[],this.events[a]||(this.events[a]=function(c,i){o.name===c&&o.listeners[a]&&o.listeners[a].forEach(function(f){return f(i)})},this.socket.on(a,this.events[a])),this.listeners[a].push(l),this}},{key:"unbind",value:function(){var a=this;Object.keys(this.events).forEach(function(l){a.unbindEvent(l)})}},{key:"unbindEvent",value:function(a,l){this.listeners[a]=this.listeners[a]||[],l&&(this.listeners[a]=this.listeners[a].filter(function(o){return o!==l})),(!l||this.listeners[a].length===0)&&(this.events[a]&&(this.socket.removeListener(a,this.events[a]),delete this.events[a]),delete this.listeners[a])}}]),n}(Channel),SocketIoPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:l}),this}}]),n}(SocketIoChannel),SocketIoPresenceChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"here",value:function(a){return this.on("presence:subscribed",function(l){a(l.map(function(o){return o.user_info}))}),this}},{key:"joining",value:function(a){return this.on("presence:joining",function(l){return a(l.user_info)}),this}},{key:"whisper",value:function(a,l){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:l}),this}},{key:"leaving",value:function(a){return this.on("presence:leaving",function(l){return a(l.user_info)}),this}}]),n}(SocketIoPrivateChannel),NullChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(a,l){return this}},{key:"listenToAll",value:function(a){return this}},{key:"stopListening",value:function(a,l){return this}},{key:"subscribed",value:function(a){return this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,l){return this}}]),n}(Channel),NullPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this}}]),n}(NullChannel),NullPresenceChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"here",value:function(a){return this}},{key:"joining",value:function(a){return this}},{key:"whisper",value:function(a,l){return this}},{key:"leaving",value:function(a){return this}}]),n}(NullChannel),Connector=function(){function s(r){_classCallCheck(this,s),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(r),this.connect()}return _createClass(s,[{key:"setOptions",value:function(n){this.options=_extends(this._defaultOptions,n);var t=this.csrfToken();return t&&(this.options.auth.headers["X-CSRF-TOKEN"]=t,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=t),t=this.options.bearerToken,t&&(this.options.auth.headers.Authorization="Bearer "+t,this.options.userAuthentication.headers.Authorization="Bearer "+t),n}},{key:"csrfToken",value:function(){var n;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(n=document.querySelector('meta[name="csrf-token"]'))?n.getAttribute("content"):null}}]),s}(),PusherConnector=function(s){_inherits(n,s);var r=_createSuper(n);function n(){var t;return _classCallCheck(this,n),t=r.apply(this,arguments),t.channels={},t}return _createClass(n,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(a,l,o){return this.channel(a).listen(l,o)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new PusherChannel(this.pusher,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new PusherPrivateChannel(this.pusher,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"encryptedPrivateChannel",value:function(a){return this.channels["private-encrypted-"+a]||(this.channels["private-encrypted-"+a]=new PusherEncryptedPrivateChannel(this.pusher,"private-encrypted-"+a,this.options)),this.channels["private-encrypted-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new PusherPresenceChannel(this.pusher,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var l=this,o=[a,"private-"+a,"private-encrypted-"+a,"presence-"+a];o.forEach(function(c,i){l.leaveChannel(c)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(Connector),SocketIoConnector=function(s){_inherits(n,s);var r=_createSuper(n);function n(){var t;return _classCallCheck(this,n),t=r.apply(this,arguments),t.channels={},t}return _createClass(n,[{key:"connect",value:function(){var a=this,l=this.getSocketIO();return this.socket=l(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(a.channels).forEach(function(o){o.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(a,l,o){return this.channel(a).listen(l,o)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new SocketIoChannel(this.socket,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new SocketIoPrivateChannel(this.socket,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new SocketIoPresenceChannel(this.socket,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var l=this,o=[a,"private-"+a,"presence-"+a];o.forEach(function(c){l.leaveChannel(c)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(Connector),NullConnector=function(s){_inherits(n,s);var r=_createSuper(n);function n(){var t;return _classCallCheck(this,n),t=r.apply(this,arguments),t.channels={},t}return _createClass(n,[{key:"connect",value:function(){}},{key:"listen",value:function(a,l,o){return new NullChannel}},{key:"channel",value:function(a){return new NullChannel}},{key:"privateChannel",value:function(a){return new NullPrivateChannel}},{key:"encryptedPrivateChannel",value:function(a){return new NullPrivateChannel}},{key:"presenceChannel",value:function(a){return new NullPresenceChannel}},{key:"leave",value:function(a){}},{key:"leaveChannel",value:function(a){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(Connector),Echo=function(){function s(r){_classCallCheck(this,s),this.options=r,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return _createClass(s,[{key:"channel",value:function(n){return this.connector.channel(n)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new PusherConnector(_extends(_extends({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new PusherConnector(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new SocketIoConnector(this.options);else if(this.options.broadcaster=="null")this.connector=new NullConnector(this.options);else if(typeof this.options.broadcaster=="function")this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(_typeof(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(n){return this.connector.presenceChannel(n)}},{key:"leave",value:function(n){this.connector.leave(n)}},{key:"leaveChannel",value:function(n){this.connector.leaveChannel(n)}},{key:"leaveAllChannels",value:function(){for(var n in this.connector.channels)this.leaveChannel(n)}},{key:"listen",value:function(n,t,a){return this.connector.listen(n,t,a)}},{key:"private",value:function(n){return this.connector.privateChannel(n)}},{key:"encryptedPrivate",value:function(n){return this.connector.encryptedPrivateChannel(n)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":_typeof(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var n=this;Vue.http.interceptors.push(function(t,a){n.socketId()&&t.headers.set("X-Socket-ID",n.socketId()),a()})}},{key:"registerAxiosRequestInterceptor",value:function(){var n=this;axios.interceptors.request.use(function(t){return n.socketId()&&(t.headers["X-Socket-Id"]=n.socketId()),t})}},{key:"registerjQueryAjaxSetup",value:function(){var n=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(t,a,l){n.socketId()&&l.setRequestHeader("X-Socket-Id",n.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var n=this;document.addEventListener("turbo:before-fetch-request",function(t){t.detail.fetchOptions.headers["X-Socket-Id"]=n.socketId()})}}]),s}(),pusher={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0-rc2
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(s,r){(function(t,a){s.exports=a()})(window,function(){return function(n){var t={};function a(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return n[l].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=t,a.d=function(l,o,c){a.o(l,o)||Object.defineProperty(l,o,{enumerable:!0,get:c})},a.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},a.t=function(l,o){if(o&1&&(l=a(l)),o&8||o&4&&typeof l=="object"&&l&&l.__esModule)return l;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),o&2&&typeof l!="string")for(var i in l)a.d(c,i,(function(f){return l[f]}).bind(null,i));return c},a.n=function(l){var o=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(o,"a",o),o},a.o=function(l,o){return Object.prototype.hasOwnProperty.call(l,o)},a.p="",a(a.s=2)}([function(n,t,a){var l=this&&this.__extends||function(){var g=function(x,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,S){E.__proto__=S}||function(E,S){for(var k in S)S.hasOwnProperty(k)&&(E[k]=S[k])},g(x,b)};return function(x,b){g(x,b);function E(){this.constructor=x}x.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=256,c=function(){function g(x){x===void 0&&(x="="),this._paddingCharacter=x}return g.prototype.encodedLength=function(x){return this._paddingCharacter?(x+2)/3*4|0:(x*8+5)/6|0},g.prototype.encode=function(x){for(var b="",E=0;E<x.length-2;E+=3){var S=x[E]<<16|x[E+1]<<8|x[E+2];b+=this._encodeByte(S>>>3*6&63),b+=this._encodeByte(S>>>2*6&63),b+=this._encodeByte(S>>>1*6&63),b+=this._encodeByte(S>>>0*6&63)}var k=x.length-E;if(k>0){var S=x[E]<<16|(k===2?x[E+1]<<8:0);b+=this._encodeByte(S>>>3*6&63),b+=this._encodeByte(S>>>2*6&63),k===2?b+=this._encodeByte(S>>>1*6&63):b+=this._paddingCharacter||"",b+=this._paddingCharacter||""}return b},g.prototype.maxDecodedLength=function(x){return this._paddingCharacter?x/4*3|0:(x*6+7)/8|0},g.prototype.decodedLength=function(x){return this.maxDecodedLength(x.length-this._getPaddingLength(x))},g.prototype.decode=function(x){if(x.length===0)return new Uint8Array(0);for(var b=this._getPaddingLength(x),E=x.length-b,S=new Uint8Array(this.maxDecodedLength(E)),k=0,T=0,j=0,A=0,C=0,N=0,V=0;T<E-4;T+=4)A=this._decodeChar(x.charCodeAt(T+0)),C=this._decodeChar(x.charCodeAt(T+1)),N=this._decodeChar(x.charCodeAt(T+2)),V=this._decodeChar(x.charCodeAt(T+3)),S[k++]=A<<2|C>>>4,S[k++]=C<<4|N>>>2,S[k++]=N<<6|V,j|=A&o,j|=C&o,j|=N&o,j|=V&o;if(T<E-1&&(A=this._decodeChar(x.charCodeAt(T)),C=this._decodeChar(x.charCodeAt(T+1)),S[k++]=A<<2|C>>>4,j|=A&o,j|=C&o),T<E-2&&(N=this._decodeChar(x.charCodeAt(T+2)),S[k++]=C<<4|N>>>2,j|=N&o),T<E-3&&(V=this._decodeChar(x.charCodeAt(T+3)),S[k++]=N<<6|V,j|=V&o),j!==0)throw new Error("Base64Coder: incorrect characters for decoding");return S},g.prototype._encodeByte=function(x){var b=x;return b+=65,b+=25-x>>>8&0-65-26+97,b+=51-x>>>8&26-97-52+48,b+=61-x>>>8&52-48-62+43,b+=62-x>>>8&62-43-63+47,String.fromCharCode(b)},g.prototype._decodeChar=function(x){var b=o;return b+=(42-x&x-44)>>>8&-o+x-43+62,b+=(46-x&x-48)>>>8&-o+x-47+63,b+=(47-x&x-58)>>>8&-o+x-48+52,b+=(64-x&x-91)>>>8&-o+x-65+0,b+=(96-x&x-123)>>>8&-o+x-97+26,b},g.prototype._getPaddingLength=function(x){var b=0;if(this._paddingCharacter){for(var E=x.length-1;E>=0&&x[E]===this._paddingCharacter;E--)b++;if(x.length<4||b>2)throw new Error("Base64Coder: incorrect padding")}return b},g}();t.Coder=c;var i=new c;function f(g){return i.encode(g)}t.encode=f;function y(g){return i.decode(g)}t.decode=y;var _=function(g){l(x,g);function x(){return g!==null&&g.apply(this,arguments)||this}return x.prototype._encodeByte=function(b){var E=b;return E+=65,E+=25-b>>>8&0-65-26+97,E+=51-b>>>8&26-97-52+48,E+=61-b>>>8&52-48-62+45,E+=62-b>>>8&62-45-63+95,String.fromCharCode(E)},x.prototype._decodeChar=function(b){var E=o;return E+=(44-b&b-46)>>>8&-o+b-45+62,E+=(94-b&b-96)>>>8&-o+b-95+63,E+=(47-b&b-58)>>>8&-o+b-48+52,E+=(64-b&b-91)>>>8&-o+b-65+0,E+=(96-b&b-123)>>>8&-o+b-97+26,E},x}(c);t.URLSafeCoder=_;var u=new _;function m(g){return u.encode(g)}t.encodeURLSafe=m;function p(g){return u.decode(g)}t.decodeURLSafe=p,t.encodedLength=function(g){return i.encodedLength(g)},t.maxDecodedLength=function(g){return i.maxDecodedLength(g)},t.decodedLength=function(g){return i.decodedLength(g)}},function(n,t,a){Object.defineProperty(t,"__esModule",{value:!0});var l="utf8: invalid string",o="utf8: invalid source encoding";function c(y){for(var _=new Uint8Array(i(y)),u=0,m=0;m<y.length;m++){var p=y.charCodeAt(m);p<128?_[u++]=p:p<2048?(_[u++]=192|p>>6,_[u++]=128|p&63):p<55296?(_[u++]=224|p>>12,_[u++]=128|p>>6&63,_[u++]=128|p&63):(m++,p=(p&1023)<<10,p|=y.charCodeAt(m)&1023,p+=65536,_[u++]=240|p>>18,_[u++]=128|p>>12&63,_[u++]=128|p>>6&63,_[u++]=128|p&63)}return _}t.encode=c;function i(y){for(var _=0,u=0;u<y.length;u++){var m=y.charCodeAt(u);if(m<128)_+=1;else if(m<2048)_+=2;else if(m<55296)_+=3;else if(m<=57343){if(u>=y.length-1)throw new Error(l);u++,_+=4}else throw new Error(l)}return _}t.encodedLength=i;function f(y){for(var _=[],u=0;u<y.length;u++){var m=y[u];if(m&128){var p=void 0;if(m<224){if(u>=y.length)throw new Error(o);var g=y[++u];if((g&192)!==128)throw new Error(o);m=(m&31)<<6|g&63,p=128}else if(m<240){if(u>=y.length-1)throw new Error(o);var g=y[++u],x=y[++u];if((g&192)!==128||(x&192)!==128)throw new Error(o);m=(m&15)<<12|(g&63)<<6|x&63,p=2048}else if(m<248){if(u>=y.length-2)throw new Error(o);var g=y[++u],x=y[++u],b=y[++u];if((g&192)!==128||(x&192)!==128||(b&192)!==128)throw new Error(o);m=(m&15)<<18|(g&63)<<12|(x&63)<<6|b&63,p=65536}else throw new Error(o);if(m<p||m>=55296&&m<=57343)throw new Error(o);if(m>=65536){if(m>1114111)throw new Error(o);m-=65536,_.push(String.fromCharCode(55296|m>>10)),m=56320|m&1023}}_.push(String.fromCharCode(m))}return _.join("")}t.decode=f},function(n,t,a){n.exports=a(3).default},function(n,t,a){a.r(t);class l{constructor(ee,ae){this.lastId=0,this.prefix=ee,this.name=ae}create(ee){this.lastId++;var ae=this.lastId,Te=this.prefix+ae,Me=this.name+"["+ae+"]",$e=!1,nt=function(){$e||(ee.apply(null,arguments),$e=!0)};return this[ae]=nt,{number:ae,id:Te,name:Me,callback:nt}}remove(ee){delete this[ee.number]}}var o=new l("_pusher_script_","Pusher.ScriptReceivers"),c={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},i=c;class f{constructor(ee){this.options=ee,this.receivers=ee.receivers||o,this.loading={}}load(ee,ae,Te){var Me=this;if(Me.loading[ee]&&Me.loading[ee].length>0)Me.loading[ee].push(Te);else{Me.loading[ee]=[Te];var $e=bt.createScriptRequest(Me.getPath(ee,ae)),nt=Me.receivers.create(function(ht){if(Me.receivers.remove(nt),Me.loading[ee]){var wt=Me.loading[ee];delete Me.loading[ee];for(var yt=function(P){P||$e.cleanup()},Ct=0;Ct<wt.length;Ct++)wt[Ct](ht,yt)}});$e.send(nt)}}getRoot(ee){var ae,Te=bt.getDocument().location.protocol;return ee&&ee.useTLS||Te==="https:"?ae=this.options.cdn_https:ae=this.options.cdn_http,ae.replace(/\/*$/,"")+"/"+this.options.version}getPath(ee,ae){return this.getRoot(ae)+"/"+ee+this.options.suffix+".js"}}var y=new l("_pusher_dependencies","Pusher.DependenciesReceivers"),_=new f({cdn_http:i.cdn_http,cdn_https:i.cdn_https,version:i.VERSION,suffix:i.dependency_suffix,receivers:y});const u={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var p={buildLogSuffix:function(le){const ee="See:",ae=u.urls[le];if(!ae)return"";let Te;return ae.fullUrl?Te=ae.fullUrl:ae.path&&(Te=u.baseUrl+ae.path),Te?`${ee} ${Te}`:""}},g;(function(le){le.UserAuthentication="user-authentication",le.ChannelAuthorization="channel-authorization"})(g||(g={}));class x extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class k extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class j extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class A extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(ee,ae){super(ae),this.status=ee,Object.setPrototypeOf(this,new.target.prototype)}}var V=function(le,ee,ae,Te,Me){const $e=bt.createXHR();$e.open("POST",ae.endpoint,!0),$e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var nt in ae.headers)$e.setRequestHeader(nt,ae.headers[nt]);if(ae.headersProvider!=null){let ht=ae.headersProvider();for(var nt in ht)$e.setRequestHeader(nt,ht[nt])}return $e.onreadystatechange=function(){if($e.readyState===4)if($e.status===200){let ht,wt=!1;try{ht=JSON.parse($e.responseText),wt=!0}catch{Me(new C(200,`JSON returned from ${Te.toString()} endpoint was invalid, yet status code was 200. Data was: ${$e.responseText}`),null)}wt&&Me(null,ht)}else{let ht="";switch(Te){case g.UserAuthentication:ht=p.buildLogSuffix("authenticationEndpoint");break;case g.ChannelAuthorization:ht=`Clients must be authorized to join private or presence channels. ${p.buildLogSuffix("authorizationEndpoint")}`;break}Me(new C($e.status,`Unable to retrieve auth string from ${Te.toString()} endpoint - received status: ${$e.status} from ${ae.endpoint}. ${ht}`),null)}},$e.send(ee),$e};function I(le){return H(M(le))}var G=String.fromCharCode,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=function(le){var ee=le.charCodeAt(0);return ee<128?le:ee<2048?G(192|ee>>>6)+G(128|ee&63):G(224|ee>>>12&15)+G(128|ee>>>6&63)+G(128|ee&63)},M=function(le){return le.replace(/[^\x00-\x7F]/g,q)},L=function(le){var ee=[0,2,1][le.length%3],ae=le.charCodeAt(0)<<16|(le.length>1?le.charCodeAt(1):0)<<8|(le.length>2?le.charCodeAt(2):0),Te=[R.charAt(ae>>>18),R.charAt(ae>>>12&63),ee>=2?"=":R.charAt(ae>>>6&63),ee>=1?"=":R.charAt(ae&63)];return Te.join("")},H=window.btoa||function(le){return le.replace(/[\s\S]{1,3}/g,L)};class O{constructor(ee,ae,Te,Me){this.clear=ae,this.timer=ee(()=>{this.timer&&(this.timer=Me(this.timer))},Te)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var U=O;function J(le){window.clearTimeout(le)}function Z(le){window.clearInterval(le)}class z extends U{constructor(ee,ae){super(setTimeout,J,ee,function(Te){return ae(),null})}}class B extends U{constructor(ee,ae){super(setInterval,Z,ee,function(Te){return ae(),Te})}}var D={now(){return Date.now?Date.now():new Date().valueOf()},defer(le){return new z(0,le)},method(le,...ee){var ae=Array.prototype.slice.call(arguments,1);return function(Te){return Te[le].apply(Te,ae.concat(arguments))}}},X=D;function K(le,...ee){for(var ae=0;ae<ee.length;ae++){var Te=ee[ae];for(var Me in Te)Te[Me]&&Te[Me].constructor&&Te[Me].constructor===Object?le[Me]=K(le[Me]||{},Te[Me]):le[Me]=Te[Me]}return le}function re(){for(var le=["Pusher"],ee=0;ee<arguments.length;ee++)typeof arguments[ee]=="string"?le.push(arguments[ee]):le.push(je(arguments[ee]));return le.join(" : ")}function se(le,ee){var ae=Array.prototype.indexOf;if(le===null)return-1;if(ae&&le.indexOf===ae)return le.indexOf(ee);for(var Te=0,Me=le.length;Te<Me;Te++)if(le[Te]===ee)return Te;return-1}function fe(le,ee){for(var ae in le)Object.prototype.hasOwnProperty.call(le,ae)&&ee(le[ae],ae,le)}function xe(le){var ee=[];return fe(le,function(ae,Te){ee.push(Te)}),ee}function he(le){var ee=[];return fe(le,function(ae){ee.push(ae)}),ee}function _e(le,ee,ae){for(var Te=0;Te<le.length;Te++)ee.call(ae||window,le[Te],Te,le)}function ye(le,ee){for(var ae=[],Te=0;Te<le.length;Te++)ae.push(ee(le[Te],Te,le,ae));return ae}function ue(le,ee){var ae={};return fe(le,function(Te,Me){ae[Me]=ee(Te)}),ae}function pe(le,ee){ee=ee||function(Me){return!!Me};for(var ae=[],Te=0;Te<le.length;Te++)ee(le[Te],Te,le,ae)&&ae.push(le[Te]);return ae}function ke(le,ee){var ae={};return fe(le,function(Te,Me){(ee&&ee(Te,Me,le,ae)||Te)&&(ae[Me]=Te)}),ae}function Ie(le){var ee=[];return fe(le,function(ae,Te){ee.push([Te,ae])}),ee}function $(le,ee){for(var ae=0;ae<le.length;ae++)if(ee(le[ae],ae,le))return!0;return!1}function te(le,ee){for(var ae=0;ae<le.length;ae++)if(!ee(le[ae],ae,le))return!1;return!0}function ne(le){return ue(le,function(ee){return typeof ee=="object"&&(ee=je(ee)),encodeURIComponent(I(ee.toString()))})}function be(le){var ee=ke(le,function(Te){return Te!==void 0}),ae=ye(Ie(ne(ee)),X.method("join","=")).join("&");return ae}function ve(le){var ee=[],ae=[];return function Te(Me,$e){var nt,ht,wt;switch(typeof Me){case"object":if(!Me)return null;for(nt=0;nt<ee.length;nt+=1)if(ee[nt]===Me)return{$ref:ae[nt]};if(ee.push(Me),ae.push($e),Object.prototype.toString.apply(Me)==="[object Array]")for(wt=[],nt=0;nt<Me.length;nt+=1)wt[nt]=Te(Me[nt],$e+"["+nt+"]");else{wt={};for(ht in Me)Object.prototype.hasOwnProperty.call(Me,ht)&&(wt[ht]=Te(Me[ht],$e+"["+JSON.stringify(ht)+"]"))}return wt;case"number":case"string":case"boolean":return Me}}(le,"$")}function je(le){try{return JSON.stringify(le)}catch{return JSON.stringify(ve(le))}}class Re{constructor(){this.globalLog=ee=>{window.console&&window.console.log&&window.console.log(ee)}}debug(...ee){this.log(this.globalLog,ee)}warn(...ee){this.log(this.globalLogWarn,ee)}error(...ee){this.log(this.globalLogError,ee)}globalLogWarn(ee){window.console&&window.console.warn?window.console.warn(ee):this.globalLog(ee)}globalLogError(ee){window.console&&window.console.error?window.console.error(ee):this.globalLogWarn(ee)}log(ee,...ae){var Te=re.apply(this,arguments);jt.log?jt.log(Te):jt.logToConsole&&ee.bind(this)(Te)}}var Ge=new Re,Xe=function(le,ee,ae,Te,Me){(ae.headers!==void 0||ae.headersProvider!=null)&&Ge.warn(`To send headers with the ${Te.toString()} request, you must use AJAX, rather than JSONP.`);var $e=le.nextAuthCallbackID.toString();le.nextAuthCallbackID++;var nt=le.getDocument(),ht=nt.createElement("script");le.auth_callbacks[$e]=function(Ct){Me(null,Ct)};var wt="Pusher.auth_callbacks['"+$e+"']";ht.src=ae.endpoint+"?callback="+encodeURIComponent(wt)+"&"+ee;var yt=nt.getElementsByTagName("head")[0]||nt.documentElement;yt.insertBefore(ht,yt.firstChild)},Ke=Xe;class Pe{constructor(ee){this.src=ee}send(ee){var ae=this,Te="Error loading "+ae.src;ae.script=document.createElement("script"),ae.script.id=ee.id,ae.script.src=ae.src,ae.script.type="text/javascript",ae.script.charset="UTF-8",ae.script.addEventListener?(ae.script.onerror=function(){ee.callback(Te)},ae.script.onload=function(){ee.callback(null)}):ae.script.onreadystatechange=function(){(ae.script.readyState==="loaded"||ae.script.readyState==="complete")&&ee.callback(null)},ae.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(ae.errorScript=document.createElement("script"),ae.errorScript.id=ee.id+"_error",ae.errorScript.text=ee.name+"('"+Te+"');",ae.script.async=ae.errorScript.async=!1):ae.script.async=!0;var Me=document.getElementsByTagName("head")[0];Me.insertBefore(ae.script,Me.firstChild),ae.errorScript&&Me.insertBefore(ae.errorScript,ae.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class We{constructor(ee,ae){this.url=ee,this.data=ae}send(ee){if(!this.request){var ae=be(this.data),Te=this.url+"/"+ee.number+"?"+ae;this.request=bt.createScriptRequest(Te),this.request.send(ee)}}cleanup(){this.request&&this.request.cleanup()}}var Fe=function(le,ee){return function(ae,Te){var Me="http"+(ee?"s":"")+"://",$e=Me+(le.host||le.options.host)+le.options.path,nt=bt.createJSONPRequest($e,ae),ht=bt.ScriptReceivers.create(function(wt,yt){o.remove(ht),nt.cleanup(),yt&&yt.host&&(le.host=yt.host),Te&&Te(wt,yt)});nt.send(ht)}},de={name:"jsonp",getAgent:Fe},ge=de;function ce(le,ee,ae){var Te=le+(ee.useTLS?"s":""),Me=ee.useTLS?ee.hostTLS:ee.hostNonTLS;return Te+"://"+Me+ae}function we(le,ee){var ae="/app/"+le,Te="?protocol="+i.PROTOCOL+"&client=js&version="+i.VERSION+(ee?"&"+ee:"");return ae+Te}var Oe={getInitial:function(le,ee){var ae=(ee.httpPath||"")+we(le,"flash=false");return ce("ws",ee,ae)}},Le={getInitial:function(le,ee){var ae=(ee.httpPath||"/pusher")+we(le);return ce("http",ee,ae)}},qe={getInitial:function(le,ee){return ce("http",ee,ee.httpPath||"/pusher")},getPath:function(le,ee){return we(le)}};class Qe{constructor(){this._callbacks={}}get(ee){return this._callbacks[rt(ee)]}add(ee,ae,Te){var Me=rt(ee);this._callbacks[Me]=this._callbacks[Me]||[],this._callbacks[Me].push({fn:ae,context:Te})}remove(ee,ae,Te){if(!ee&&!ae&&!Te){this._callbacks={};return}var Me=ee?[rt(ee)]:xe(this._callbacks);ae||Te?this.removeCallback(Me,ae,Te):this.removeAllCallbacks(Me)}removeCallback(ee,ae,Te){_e(ee,function(Me){this._callbacks[Me]=pe(this._callbacks[Me]||[],function($e){return ae&&ae!==$e.fn||Te&&Te!==$e.context}),this._callbacks[Me].length===0&&delete this._callbacks[Me]},this)}removeAllCallbacks(ee){_e(ee,function(ae){delete this._callbacks[ae]},this)}}function rt(le){return"_"+le}class tt{constructor(ee){this.callbacks=new Qe,this.global_callbacks=[],this.failThrough=ee}bind(ee,ae,Te){return this.callbacks.add(ee,ae,Te),this}bind_global(ee){return this.global_callbacks.push(ee),this}unbind(ee,ae,Te){return this.callbacks.remove(ee,ae,Te),this}unbind_global(ee){return ee?(this.global_callbacks=pe(this.global_callbacks||[],ae=>ae!==ee),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(ee,ae,Te){for(var Me=0;Me<this.global_callbacks.length;Me++)this.global_callbacks[Me](ee,ae);var $e=this.callbacks.get(ee),nt=[];if(Te?nt.push(ae,Te):ae&&nt.push(ae),$e&&$e.length>0)for(var Me=0;Me<$e.length;Me++)$e[Me].fn.apply($e[Me].context||window,nt);else this.failThrough&&this.failThrough(ee,ae);return this}}class ot extends tt{constructor(ee,ae,Te,Me,$e){super(),this.initialize=bt.transportConnectionInitializer,this.hooks=ee,this.name=ae,this.priority=Te,this.key=Me,this.options=$e,this.state="new",this.timeline=$e.timeline,this.activityTimeout=$e.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var ee=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(ee,this.options)}catch(ae){return X.defer(()=>{this.onError(ae),this.changeState("closed")}),!1}return this.bindListeners(),Ge.debug("Connecting",{transport:this.name,url:ee}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(ee){return this.state==="open"?(X.defer(()=>{this.socket&&this.socket.send(ee)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(ee){this.emit("error",{type:"WebSocketError",error:ee}),this.timeline.error(this.buildTimelineMessage({error:ee.toString()}))}onClose(ee){ee?this.changeState("closed",{code:ee.code,reason:ee.reason,wasClean:ee.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(ee){this.emit("message",ee)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=ee=>{this.onError(ee)},this.socket.onclose=ee=>{this.onClose(ee)},this.socket.onmessage=ee=>{this.onMessage(ee)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(ee,ae){this.state=ee,this.timeline.info(this.buildTimelineMessage({state:ee,params:ae})),this.emit(ee,ae)}buildTimelineMessage(ee){return K({cid:this.id},ee)}}class gt{constructor(ee){this.hooks=ee}isSupported(ee){return this.hooks.isSupported(ee)}createConnection(ee,ae,Te,Me){return new ot(this.hooks,ee,ae,Te,Me)}}var mt=new gt({urls:Oe,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!bt.getWebSocketAPI()},isSupported:function(){return!!bt.getWebSocketAPI()},getSocket:function(le){return bt.createWebSocket(le)}}),lt={urls:Le,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},vt=K({getSocket:function(le){return bt.HTTPFactory.createStreamingSocket(le)}},lt),pt=K({getSocket:function(le){return bt.HTTPFactory.createPollingSocket(le)}},lt),It={isSupported:function(){return bt.isXHRSupported()}},Jt=new gt(K({},vt,It)),Ut=new gt(K({},pt,It)),At={ws:mt,xhr_streaming:Jt,xhr_polling:Ut},Pt=At,kt=new gt({file:"sockjs",urls:qe,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(le,ee){return new window.SockJS(le,null,{js_path:_.getPath("sockjs",{useTLS:ee.useTLS}),ignore_null_origin:ee.ignoreNullOrigin})},beforeOpen:function(le,ee){le.send(JSON.stringify({path:ee}))}}),qt={isSupported:function(le){var ee=bt.isXDRSupported(le.useTLS);return ee}},Ht=new gt(K({},vt,qt)),Mt=new gt(K({},pt,qt));Pt.xdr_streaming=Ht,Pt.xdr_polling=Mt,Pt.sockjs=kt;var Zt=Pt;class Sr extends tt{constructor(){super();var ee=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){ee.emit("online")},!1),window.addEventListener("offline",function(){ee.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var Er=new Sr;class kr{constructor(ee,ae,Te){this.manager=ee,this.transport=ae,this.minPingDelay=Te.minPingDelay,this.maxPingDelay=Te.maxPingDelay,this.pingDelay=void 0}createConnection(ee,ae,Te,Me){Me=K({},Me,{activityTimeout:this.pingDelay});var $e=this.transport.createConnection(ee,ae,Te,Me),nt=null,ht=function(){$e.unbind("open",ht),$e.bind("closed",wt),nt=X.now()},wt=yt=>{if($e.unbind("closed",wt),yt.code===1002||yt.code===1003)this.manager.reportDeath();else if(!yt.wasClean&&nt){var Ct=X.now()-nt;Ct<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Ct/2,this.minPingDelay))}};return $e.bind("open",ht),$e}isSupported(ee){return this.manager.isAlive()&&this.transport.isSupported(ee)}}const Tr={decodeMessage:function(le){try{var ee=JSON.parse(le.data),ae=ee.data;if(typeof ae=="string")try{ae=JSON.parse(ee.data)}catch{}var Te={event:ee.event,channel:ee.channel,data:ae};return ee.user_id&&(Te.user_id=ee.user_id),Te}catch(Me){throw{type:"MessageParseError",error:Me,data:le.data}}},encodeMessage:function(le){return JSON.stringify(le)},processHandshake:function(le){var ee=Tr.decodeMessage(le);if(ee.event==="pusher:connection_established"){if(!ee.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:ee.data.socket_id,activityTimeout:ee.data.activity_timeout*1e3}}else{if(ee.event==="pusher:error")return{action:this.getCloseAction(ee.data),error:this.getCloseError(ee.data)};throw"Invalid handshake"}},getCloseAction:function(le){return le.code<4e3?le.code>=1002&&le.code<=1004?"backoff":null:le.code===4e3?"tls_only":le.code<4100?"refused":le.code<4200?"backoff":le.code<4300?"retry":"refused"},getCloseError:function(le){return le.code!==1e3&&le.code!==1001?{type:"PusherError",data:{code:le.code,message:le.reason||le.message}}:null}};var lr=Tr;class Cr extends tt{constructor(ee,ae){super(),this.id=ee,this.transport=ae,this.activityTimeout=ae.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(ee){return this.transport.send(ee)}send_event(ee,ae,Te){var Me={event:ee,data:ae};return Te&&(Me.channel=Te),Ge.debug("Event sent",Me),this.send(lr.encodeMessage(Me))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var ee={message:Te=>{var Me;try{Me=lr.decodeMessage(Te)}catch($e){this.emit("error",{type:"MessageParseError",error:$e,data:Te.data})}if(Me!==void 0){switch(Ge.debug("Event recd",Me),Me.event){case"pusher:error":this.emit("error",{type:"PusherError",data:Me.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",Me)}},activity:()=>{this.emit("activity")},error:Te=>{this.emit("error",Te)},closed:Te=>{ae(),Te&&Te.code&&this.handleCloseEvent(Te),this.transport=null,this.emit("closed")}},ae=()=>{fe(ee,(Te,Me)=>{this.transport.unbind(Me,Te)})};fe(ee,(Te,Me)=>{this.transport.bind(Me,Te)})}handleCloseEvent(ee){var ae=lr.getCloseAction(ee),Te=lr.getCloseError(ee);Te&&this.emit("error",Te),ae&&this.emit(ae,{action:ae,error:Te})}}class Ae{constructor(ee,ae){this.transport=ee,this.callback=ae,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=ee=>{this.unbindListeners();var ae;try{ae=lr.processHandshake(ee)}catch(Te){this.finish("error",{error:Te}),this.transport.close();return}ae.action==="connected"?this.finish("connected",{connection:new Cr(ae.id,this.transport),activityTimeout:ae.activityTimeout}):(this.finish(ae.action,{error:ae.error}),this.transport.close())},this.onClosed=ee=>{this.unbindListeners();var ae=lr.getCloseAction(ee)||"backoff",Te=lr.getCloseError(ee);this.finish(ae,{error:Te})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(ee,ae){this.callback(K({transport:this.transport,action:ee},ae))}}class et{constructor(ee,ae){this.timeline=ee,this.options=ae||{}}send(ee,ae){this.timeline.isEmpty()||this.timeline.send(bt.TimelineTransport.getAgent(this,ee),ae)}}class it extends tt{constructor(ee,ae){super(function(Te,Me){Ge.debug("No callbacks on "+ee+" for "+Te)}),this.name=ee,this.pusher=ae,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(ee,ae){return ae(null,{auth:""})}trigger(ee,ae){if(ee.indexOf("client-")!==0)throw new x("Event '"+ee+"' does not start with 'client-'");if(!this.subscribed){var Te=p.buildLogSuffix("triggeringClientEvents");Ge.warn(`Client event triggered before channel 'subscription_succeeded' event . ${Te}`)}return this.pusher.send_event(ee,ae,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(ee){var ae=ee.event,Te=ee.data;if(ae==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(ee);else if(ae==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(ee);else if(ae.indexOf("pusher_internal:")!==0){var Me={};this.emit(ae,Te,Me)}}handleSubscriptionSucceededEvent(ee){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",ee.data)}handleSubscriptionCountEvent(ee){ee.data.subscription_count&&(this.subscriptionCount=ee.data.subscription_count),this.emit("pusher:subscription_count",ee.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(ee,ae)=>{ee?(this.subscriptionPending=!1,Ge.error(ee.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:ee.message},ee instanceof C?{status:ee.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:ae.auth,channel_data:ae.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Je extends it{authorize(ee,ae){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:ee},ae)}}class St{constructor(){this.reset()}get(ee){return Object.prototype.hasOwnProperty.call(this.members,ee)?{id:ee,info:this.members[ee]}:null}each(ee){fe(this.members,(ae,Te)=>{ee(this.get(Te))})}setMyID(ee){this.myID=ee}onSubscription(ee){this.members=ee.presence.hash,this.count=ee.presence.count,this.me=this.get(this.myID)}addMember(ee){return this.get(ee.user_id)===null&&this.count++,this.members[ee.user_id]=ee.user_info,this.get(ee.user_id)}removeMember(ee){var ae=this.get(ee.user_id);return ae&&(delete this.members[ee.user_id],this.count--),ae}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Ze=function(le,ee,ae,Te){function Me($e){return $e instanceof ae?$e:new ae(function(nt){nt($e)})}return new(ae||(ae=Promise))(function($e,nt){function ht(Ct){try{yt(Te.next(Ct))}catch(P){nt(P)}}function wt(Ct){try{yt(Te.throw(Ct))}catch(P){nt(P)}}function yt(Ct){Ct.done?$e(Ct.value):Me(Ct.value).then(ht,wt)}yt((Te=Te.apply(le,ee||[])).next())})};class Tt extends Je{constructor(ee,ae){super(ee,ae),this.members=new St}authorize(ee,ae){super.authorize(ee,(Te,Me)=>Ze(this,void 0,void 0,function*(){if(!Te)if(Me=Me,Me.channel_data!=null){var $e=JSON.parse(Me.channel_data);this.members.setMyID($e.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let nt=p.buildLogSuffix("authorizationEndpoint");Ge.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${nt}, or the user should be signed in.`),ae("Invalid auth response");return}ae(Te,Me)}))}handleEvent(ee){var ae=ee.event;if(ae.indexOf("pusher_internal:")===0)this.handleInternalEvent(ee);else{var Te=ee.data,Me={};ee.user_id&&(Me.user_id=ee.user_id),this.emit(ae,Te,Me)}}handleInternalEvent(ee){var ae=ee.event,Te=ee.data;switch(ae){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(ee);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(ee);break;case"pusher_internal:member_added":var Me=this.members.addMember(Te);this.emit("pusher:member_added",Me);break;case"pusher_internal:member_removed":var $e=this.members.removeMember(Te);$e&&this.emit("pusher:member_removed",$e);break}}handleSubscriptionSucceededEvent(ee){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(ee.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var st=a(1),Et=a(0);class at extends Je{constructor(ee,ae,Te){super(ee,ae),this.key=null,this.nacl=Te}authorize(ee,ae){super.authorize(ee,(Te,Me)=>{if(Te){ae(Te,Me);return}let $e=Me.shared_secret;if(!$e){ae(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Et.decode)($e),delete Me.shared_secret,ae(null,Me)})}trigger(ee,ae){throw new T("Client events are not currently supported for encrypted channels")}handleEvent(ee){var ae=ee.event,Te=ee.data;if(ae.indexOf("pusher_internal:")===0||ae.indexOf("pusher:")===0){super.handleEvent(ee);return}this.handleEncryptedEvent(ae,Te)}handleEncryptedEvent(ee,ae){if(!this.key){Ge.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!ae.ciphertext||!ae.nonce){Ge.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+ae);return}let Te=Object(Et.decode)(ae.ciphertext);if(Te.length<this.nacl.secretbox.overheadLength){Ge.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${Te.length}`);return}let Me=Object(Et.decode)(ae.nonce);if(Me.length<this.nacl.secretbox.nonceLength){Ge.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${Me.length}`);return}let $e=this.nacl.secretbox.open(Te,Me,this.key);if($e===null){Ge.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(nt,ht)=>{if(nt){Ge.error(`Failed to make a request to the authEndpoint: ${ht}. Unable to fetch new key, so dropping encrypted event`);return}if($e=this.nacl.secretbox.open(Te,Me,this.key),$e===null){Ge.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(ee,this.getDataToEmit($e))});return}this.emit(ee,this.getDataToEmit($e))}getDataToEmit(ee){let ae=Object(st.decode)(ee);try{return JSON.parse(ae)}catch{return ae}}}class Bt extends tt{constructor(ee,ae){super(),this.state="initialized",this.connection=null,this.key=ee,this.options=ae,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var Te=bt.getNetwork();Te.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),Te.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}switchCluster(ee){this.key=ee,this.updateStrategy(),this.retryIn(0)}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(ee){return this.connection?this.connection.send(ee):!1}send_event(ee,ae,Te){return this.connection?this.connection.send_event(ee,ae,Te):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var ee=(ae,Te)=>{ae?this.runner=this.strategy.connect(0,ee):Te.action==="error"?(this.emit("error",{type:"HandshakeError",error:Te.error}),this.timeline.error({handshakeError:Te.error})):(this.abortConnecting(),this.handshakeCallbacks[Te.action](Te))};this.runner=this.strategy.connect(0,ee)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var ee=this.abandonConnection();ee.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(ee){this.timeline.info({action:"retry",delay:ee}),ee>0&&this.emit("connecting_in",Math.round(ee/1e3)),this.retryTimer=new z(ee||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new z(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new z(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new z(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(ee){return K({},ee,{message:ae=>{this.resetActivityCheck(),this.emit("message",ae)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:ae=>{this.emit("error",ae)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(ee){return K({},ee,{connected:ae=>{this.activityTimeout=Math.min(this.options.activityTimeout,ae.activityTimeout,ae.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(ae.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let ee=ae=>Te=>{Te.error&&this.emit("error",{type:"WebSocketError",error:Te.error}),ae(Te)};return{tls_only:ee(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:ee(()=>{this.disconnect()}),backoff:ee(()=>{this.retryIn(1e3)}),retry:ee(()=>{this.retryIn(0)})}}setConnection(ee){this.connection=ee;for(var ae in this.connectionCallbacks)this.connection.bind(ae,this.connectionCallbacks[ae]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var ee in this.connectionCallbacks)this.connection.unbind(ee,this.connectionCallbacks[ee]);var ae=this.connection;return this.connection=null,ae}}updateState(ee,ae){var Te=this.state;if(this.state=ee,Te!==ee){var Me=ee;Me==="connected"&&(Me+=" with new socket ID "+ae.socket_id),Ge.debug("State changed",Te+" -> "+Me),this.timeline.info({state:ee,params:ae}),this.emit("state_change",{previous:Te,current:ee}),this.emit(ee,ae)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class Wt{constructor(){this.channels={}}add(ee,ae){return this.channels[ee]||(this.channels[ee]=Ft(ee,ae)),this.channels[ee]}all(){return he(this.channels)}find(ee){return this.channels[ee]}remove(ee){var ae=this.channels[ee];return delete this.channels[ee],ae}disconnect(){fe(this.channels,function(ee){ee.disconnect()})}}function Ft(le,ee){if(le.indexOf("private-encrypted-")===0){if(ee.config.nacl)return Yt.createEncryptedChannel(le,ee,ee.config.nacl);let ae="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",Te=p.buildLogSuffix("encryptedChannelSupport");throw new T(`${ae}. ${Te}`)}else{if(le.indexOf("private-")===0)return Yt.createPrivateChannel(le,ee);if(le.indexOf("presence-")===0)return Yt.createPresenceChannel(le,ee);if(le.indexOf("#")===0)throw new b('Cannot create a channel with name "'+le+'".');return Yt.createChannel(le,ee)}}var Xt={createChannels(){return new Wt},createConnectionManager(le,ee){return new Bt(le,ee)},createChannel(le,ee){return new it(le,ee)},createPrivateChannel(le,ee){return new Je(le,ee)},createPresenceChannel(le,ee){return new Tt(le,ee)},createEncryptedChannel(le,ee,ae){return new at(le,ee,ae)},createTimelineSender(le,ee){return new et(le,ee)},createHandshake(le,ee){return new Ae(le,ee)},createAssistantToTheTransportManager(le,ee,ae){return new kr(le,ee,ae)}},Yt=Xt;class rr{constructor(ee){this.options=ee||{},this.livesLeft=this.options.lives||1/0}getAssistant(ee){return Yt.createAssistantToTheTransportManager(this,ee,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Qt{constructor(ee,ae){this.strategies=ee,this.loop=!!ae.loop,this.failFast=!!ae.failFast,this.timeout=ae.timeout,this.timeoutLimit=ae.timeoutLimit}isSupported(){return $(this.strategies,X.method("isSupported"))}connect(ee,ae){var Te=this.strategies,Me=0,$e=this.timeout,nt=null,ht=(wt,yt)=>{yt?ae(null,yt):(Me=Me+1,this.loop&&(Me=Me%Te.length),Me<Te.length?($e&&($e=$e*2,this.timeoutLimit&&($e=Math.min($e,this.timeoutLimit))),nt=this.tryStrategy(Te[Me],ee,{timeout:$e,failFast:this.failFast},ht)):ae(!0))};return nt=this.tryStrategy(Te[Me],ee,{timeout:$e,failFast:this.failFast},ht),{abort:function(){nt.abort()},forceMinPriority:function(wt){ee=wt,nt&&nt.forceMinPriority(wt)}}}tryStrategy(ee,ae,Te,Me){var $e=null,nt=null;return Te.timeout>0&&($e=new z(Te.timeout,function(){nt.abort(),Me(!0)})),nt=ee.connect(ae,function(ht,wt){ht&&$e&&$e.isRunning()&&!Te.failFast||($e&&$e.ensureAborted(),Me(ht,wt))}),{abort:function(){$e&&$e.ensureAborted(),nt.abort()},forceMinPriority:function(ht){nt.forceMinPriority(ht)}}}}class Gt{constructor(ee){this.strategies=ee}isSupported(){return $(this.strategies,X.method("isSupported"))}connect(ee,ae){return Jr(this.strategies,ee,function(Te,Me){return function($e,nt){if(Me[Te].error=$e,$e){cr(Me)&&ae(!0);return}_e(Me,function(ht){ht.forceMinPriority(nt.transport.priority)}),ae(null,nt)}})}}function Jr(le,ee,ae){var Te=ye(le,function(Me,$e,nt,ht){return Me.connect(ee,ae($e,ht))});return{abort:function(){_e(Te,_r)},forceMinPriority:function(Me){_e(Te,function($e){$e.forceMinPriority(Me)})}}}function cr(le){return te(le,function(ee){return!!ee.error})}function _r(le){!le.error&&!le.aborted&&(le.abort(),le.aborted=!0)}class Mr{constructor(ee,ae,Te){this.strategy=ee,this.transports=ae,this.ttl=Te.ttl||1800*1e3,this.usingTLS=Te.useTLS,this.timeline=Te.timeline}isSupported(){return this.strategy.isSupported()}connect(ee,ae){var Te=this.usingTLS,Me=Qr(Te),$e=Me&&Me.cacheSkipCount?Me.cacheSkipCount:0,nt=[this.strategy];if(Me&&Me.timestamp+this.ttl>=X.now()){var ht=this.transports[Me.transport];ht&&(["ws","wss"].includes(Me.transport)||$e>3?(this.timeline.info({cached:!0,transport:Me.transport,latency:Me.latency}),nt.push(new Qt([ht],{timeout:Me.latency*2+1e3,failFast:!0}))):$e++)}var wt=X.now(),yt=nt.pop().connect(ee,function Ct(P,F){P?(Or(Te),nt.length>0?(wt=X.now(),yt=nt.pop().connect(ee,Ct)):ae(P)):(en(Te,F.transport.name,X.now()-wt,$e),ae(null,F))});return{abort:function(){yt.abort()},forceMinPriority:function(Ct){ee=Ct,yt&&yt.forceMinPriority(Ct)}}}}function Ir(le){return"pusherTransport"+(le?"TLS":"NonTLS")}function Qr(le){var ee=bt.getLocalStorage();if(ee)try{var ae=ee[Ir(le)];if(ae)return JSON.parse(ae)}catch{Or(le)}return null}function en(le,ee,ae,Te){var Me=bt.getLocalStorage();if(Me)try{Me[Ir(le)]=je({timestamp:X.now(),transport:ee,latency:ae,cacheSkipCount:Te})}catch{}}function Or(le){var ee=bt.getLocalStorage();if(ee)try{delete ee[Ir(le)]}catch{}}class Ar{constructor(ee,{delay:ae}){this.strategy=ee,this.options={delay:ae}}isSupported(){return this.strategy.isSupported()}connect(ee,ae){var Te=this.strategy,Me,$e=new z(this.options.delay,function(){Me=Te.connect(ee,ae)});return{abort:function(){$e.ensureAborted(),Me&&Me.abort()},forceMinPriority:function(nt){ee=nt,Me&&Me.forceMinPriority(nt)}}}}class br{constructor(ee,ae,Te){this.test=ee,this.trueBranch=ae,this.falseBranch=Te}isSupported(){var ee=this.test()?this.trueBranch:this.falseBranch;return ee.isSupported()}connect(ee,ae){var Te=this.test()?this.trueBranch:this.falseBranch;return Te.connect(ee,ae)}}class tn{constructor(ee){this.strategy=ee}isSupported(){return this.strategy.isSupported()}connect(ee,ae){var Te=this.strategy.connect(ee,function(Me,$e){$e&&Te.abort(),ae(Me,$e)});return Te}}function jr(le){return function(){return le.isSupported()}}var Ur=function(le,ee,ae){var Te={};function Me(ze,He,Ve,Ue,ut){var _t=ae(le,ze,He,Ve,Ue,ut);return Te[ze]=_t,_t}var $e=Object.assign({},ee,{hostNonTLS:le.wsHost+":"+le.wsPort,hostTLS:le.wsHost+":"+le.wssPort,httpPath:le.wsPath}),nt=Object.assign({},$e,{useTLS:!0}),ht=Object.assign({},ee,{hostNonTLS:le.httpHost+":"+le.httpPort,hostTLS:le.httpHost+":"+le.httpsPort,httpPath:le.httpPath}),wt={loop:!0,timeout:15e3,timeoutLimit:6e4},yt=new rr({minPingDelay:1e4,maxPingDelay:le.activityTimeout}),Ct=new rr({lives:2,minPingDelay:1e4,maxPingDelay:le.activityTimeout}),P=Me("ws","ws",3,$e,yt),F=Me("wss","ws",3,nt,yt),W=Me("sockjs","sockjs",1,ht),Y=Me("xhr_streaming","xhr_streaming",1,ht,Ct),Q=Me("xdr_streaming","xdr_streaming",1,ht,Ct),ie=Me("xhr_polling","xhr_polling",1,ht),oe=Me("xdr_polling","xdr_polling",1,ht),me=new Qt([P],wt),Ee=new Qt([F],wt),Se=new Qt([W],wt),Ne=new Qt([new br(jr(Y),Y,Q)],wt),Be=new Qt([new br(jr(ie),ie,oe)],wt),De=new Qt([new br(jr(Ne),new Gt([Ne,new Ar(Be,{delay:4e3})]),Be)],wt),Ce=new br(jr(De),De,Se),Ye;return ee.useTLS?Ye=new Gt([me,new Ar(Ce,{delay:2e3})]):Ye=new Gt([me,new Ar(Ee,{delay:2e3}),new Ar(Ce,{delay:5e3})]),new Mr(new tn(new br(jr(P),Ye,Ce)),Te,{ttl:18e5,timeline:ee.timeline,useTLS:ee.useTLS})},rn=Ur,nn=function(){var le=this;le.timeline.info(le.buildTimelineMessage({transport:le.name+(le.options.useTLS?"s":"")})),le.hooks.isInitialized()?le.changeState("initialized"):le.hooks.file?(le.changeState("initializing"),_.load(le.hooks.file,{useTLS:le.options.useTLS},function(ee,ae){le.hooks.isInitialized()?(le.changeState("initialized"),ae(!0)):(ee&&le.onError(ee),le.onClose(),ae(!1))})):le.onClose()},Nr={getRequest:function(le){var ee=new window.XDomainRequest;return ee.ontimeout=function(){le.emit("error",new E),le.close()},ee.onerror=function(ae){le.emit("error",ae),le.close()},ee.onprogress=function(){ee.responseText&&ee.responseText.length>0&&le.onChunk(200,ee.responseText)},ee.onload=function(){ee.responseText&&ee.responseText.length>0&&le.onChunk(200,ee.responseText),le.emit("finished",200),le.close()},ee},abortRequest:function(le){le.ontimeout=le.onerror=le.onprogress=le.onload=null,le.abort()}},Rr=Nr;const hr=256*1024;class sn extends tt{constructor(ee,ae,Te){super(),this.hooks=ee,this.method=ae,this.url=Te}start(ee){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},bt.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(ee)}close(){this.unloader&&(bt.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(ee,ae){for(;;){var Te=this.advanceBuffer(ae);if(Te)this.emit("chunk",{status:ee,data:Te});else break}this.isBufferTooLong(ae)&&this.emit("buffer_too_long")}advanceBuffer(ee){var ae=ee.slice(this.position),Te=ae.indexOf(`
`);return Te!==-1?(this.position+=Te+1,ae.slice(0,Te)):null}isBufferTooLong(ee){return this.position===ee.length&&ee.length>hr}}var Dr;(function(le){le[le.CONNECTING=0]="CONNECTING",le[le.OPEN=1]="OPEN",le[le.CLOSED=3]="CLOSED"})(Dr||(Dr={}));var ar=Dr,on=1;class kn{constructor(ee,ae){this.hooks=ee,this.session=zr(1e3)+"/"+Tn(8),this.location=Gr(ae),this.readyState=ar.CONNECTING,this.openStream()}send(ee){return this.sendRaw(JSON.stringify([ee]))}ping(){this.hooks.sendHeartbeat(this)}close(ee,ae){this.onClose(ee,ae,!0)}sendRaw(ee){if(this.readyState===ar.OPEN)try{return bt.createSocketRequest("POST",ln(an(this.location,this.session))).start(ee),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(ee,ae,Te){this.closeStream(),this.readyState=ar.CLOSED,this.onclose&&this.onclose({code:ee,reason:ae,wasClean:Te})}onChunk(ee){if(ee.status===200){this.readyState===ar.OPEN&&this.onActivity();var ae,Te=ee.data.slice(0,1);switch(Te){case"o":ae=JSON.parse(ee.data.slice(1)||"{}"),this.onOpen(ae);break;case"a":ae=JSON.parse(ee.data.slice(1)||"[]");for(var Me=0;Me<ae.length;Me++)this.onEvent(ae[Me]);break;case"m":ae=JSON.parse(ee.data.slice(1)||"null"),this.onEvent(ae);break;case"h":this.hooks.onHeartbeat(this);break;case"c":ae=JSON.parse(ee.data.slice(1)||"[]"),this.onClose(ae[0],ae[1],!0);break}}}onOpen(ee){this.readyState===ar.CONNECTING?(ee&&ee.hostname&&(this.location.base=cn(this.location.base,ee.hostname)),this.readyState=ar.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(ee){this.readyState===ar.OPEN&&this.onmessage&&this.onmessage({data:ee})}onActivity(){this.onactivity&&this.onactivity()}onError(ee){this.onerror&&this.onerror(ee)}openStream(){this.stream=bt.createSocketRequest("POST",ln(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",ee=>{this.onChunk(ee)}),this.stream.bind("finished",ee=>{this.hooks.onFinished(this,ee)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(ee){X.defer(()=>{this.onError(ee),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Gr(le){var ee=/([^\?]*)\/*(\??.*)/.exec(le);return{base:ee[1],queryString:ee[2]}}function an(le,ee){return le.base+"/"+ee+"/xhr_send"}function ln(le){var ee=le.indexOf("?")===-1?"?":"&";return le+ee+"t="+ +new Date+"&n="+on++}function cn(le,ee){var ae=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(le);return ae[1]+ee+ae[3]}function zr(le){return bt.randomInt(le)}function Tn(le){for(var ee=[],ae=0;ae<le;ae++)ee.push(zr(32).toString(32));return ee.join("")}var un=kn,Cn={getReceiveURL:function(le,ee){return le.base+"/"+ee+"/xhr_streaming"+le.queryString},onHeartbeat:function(le){le.sendRaw("[]")},sendHeartbeat:function(le){le.sendRaw("[]")},onFinished:function(le,ee){le.onClose(1006,"Connection interrupted ("+ee+")",!1)}},An=Cn,jn={getReceiveURL:function(le,ee){return le.base+"/"+ee+"/xhr"+le.queryString},onHeartbeat:function(){},sendHeartbeat:function(le){le.sendRaw("[]")},onFinished:function(le,ee){ee===200?le.reconnect():le.onClose(1006,"Connection interrupted ("+ee+")",!1)}},Pn=jn,hn={getRequest:function(le){var ee=bt.getXHRAPI(),ae=new ee;return ae.onreadystatechange=ae.onprogress=function(){switch(ae.readyState){case 3:ae.responseText&&ae.responseText.length>0&&le.onChunk(ae.status,ae.responseText);break;case 4:ae.responseText&&ae.responseText.length>0&&le.onChunk(ae.status,ae.responseText),le.emit("finished",ae.status),le.close();break}},ae},abortRequest:function(le){le.onreadystatechange=null,le.abort()}},dr=hn,pr={createStreamingSocket(le){return this.createSocket(An,le)},createPollingSocket(le){return this.createSocket(Pn,le)},createSocket(le,ee){return new un(le,ee)},createXHR(le,ee){return this.createRequest(dr,le,ee)},createRequest(le,ee,ae){return new sn(le,ee,ae)}},wr=pr;wr.createXDR=function(le,ee){return this.createRequest(Rr,le,ee)};var Pr=wr,mr={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:y,getDefaultStrategy:rn,Transports:Zt,transportConnectionInitializer:nn,HTTPFactory:Pr,TimelineTransport:ge,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(le){window.Pusher=le;var ee=()=>{this.onDocumentBody(le.ready)};window.JSON?ee():_.load("json2",{},ee)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:V,jsonp:Ke}},onDocumentBody(le){document.body?le():setTimeout(()=>{this.onDocumentBody(le)},0)},createJSONPRequest(le,ee){return new We(le,ee)},createScriptRequest(le){return new Pe(le)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var le=this.getXHRAPI();return new le},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return Er},createWebSocket(le){var ee=this.getWebSocketAPI();return new ee(le)},createSocketRequest(le,ee){if(this.isXHRSupported())return this.HTTPFactory.createXHR(le,ee);if(this.isXDRSupported(ee.indexOf("https:")===0))return this.HTTPFactory.createXDR(le,ee);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var le=this.getXHRAPI();return!!le&&new le().withCredentials!==void 0},isXDRSupported(le){var ee=le?"https:":"http:",ae=this.getProtocol();return!!window.XDomainRequest&&ae===ee},addUnloadListener(le){window.addEventListener!==void 0?window.addEventListener("unload",le,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",le)},removeUnloadListener(le){window.addEventListener!==void 0?window.removeEventListener("unload",le,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",le)},randomInt(le){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*le)}},bt=mr,Wr;(function(le){le[le.ERROR=3]="ERROR",le[le.INFO=6]="INFO",le[le.DEBUG=7]="DEBUG"})(Wr||(Wr={}));var ur=Wr;class Lr{constructor(ee,ae,Te){this.key=ee,this.session=ae,this.events=[],this.options=Te||{},this.sent=0,this.uniqueID=0}log(ee,ae){ee<=this.options.level&&(this.events.push(K({},ae,{timestamp:X.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(ee){this.log(ur.ERROR,ee)}info(ee){this.log(ur.INFO,ee)}debug(ee){this.log(ur.DEBUG,ee)}isEmpty(){return this.events.length===0}send(ee,ae){var Te=K({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],ee(Te,(Me,$e)=>{Me||this.sent++,ae&&ae(Me,$e)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class dn{constructor(ee,ae,Te,Me){this.name=ee,this.priority=ae,this.transport=Te,this.options=Me||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(ee,ae){if(this.isSupported()){if(this.priority<ee)return qr(new S,ae)}else return qr(new A,ae);var Te=!1,Me=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),$e=null,nt=function(){Me.unbind("initialized",nt),Me.connect()},ht=function(){$e=Yt.createHandshake(Me,function(P){Te=!0,Ct(),ae(null,P)})},wt=function(P){Ct(),ae(P)},yt=function(){Ct();var P;P=je(Me),ae(new k(P))},Ct=function(){Me.unbind("initialized",nt),Me.unbind("open",ht),Me.unbind("error",wt),Me.unbind("closed",yt)};return Me.bind("initialized",nt),Me.bind("open",ht),Me.bind("error",wt),Me.bind("closed",yt),Me.initialize(),{abort:()=>{Te||(Ct(),$e?$e.close():Me.close())},forceMinPriority:P=>{Te||this.priority<P&&($e?$e.close():Me.close())}}}}function qr(le,ee){return X.defer(function(){ee(le)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:fn}=bt;var pn=function(le,ee,ae,Te,Me,$e){var nt=fn[ae];if(!nt)throw new j(ae);var ht=(!le.enabledTransports||se(le.enabledTransports,ee)!==-1)&&(!le.disabledTransports||se(le.disabledTransports,ee)===-1),wt;return ht?(Me=Object.assign({ignoreNullOrigin:le.ignoreNullOrigin},Me),wt=new dn(ee,Te,$e?$e.getAssistant(nt):nt,Me)):wt=mn,wt},mn={isSupported:function(){return!1},connect:function(le,ee){var ae=X.defer(function(){ee(new A)});return{abort:function(){ae.ensureAborted()},forceMinPriority:function(){}}}};function gn(le){if(le==null)throw"You must pass an options object";if(le.cluster==null)throw"Options object must provide a cluster";"disableStats"in le&&Ge.warn("The disableStats option is deprecated in favor of enableStats")}const Hr=(le,ee)=>{var ae="socket_id="+encodeURIComponent(le.socketId);for(var Te in ee.params)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(ee.params[Te]);if(ee.paramsProvider!=null){let Me=ee.paramsProvider();for(var Te in Me)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(Me[Te])}return ae};var yn=le=>{if(typeof bt.getAuthorizers()[le.transport]>"u")throw`'${le.transport}' is not a recognized auth transport`;return(ee,ae)=>{const Te=Hr(ee,le);bt.getAuthorizers()[le.transport](bt,Te,le,g.UserAuthentication,ae)}};const vn=(le,ee)=>{var ae="socket_id="+encodeURIComponent(le.socketId);ae+="&channel_name="+encodeURIComponent(le.channelName);for(var Te in ee.params)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(ee.params[Te]);if(ee.paramsProvider!=null){let Me=ee.paramsProvider();for(var Te in Me)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(Me[Te])}return ae};var _n=le=>{if(typeof bt.getAuthorizers()[le.transport]>"u")throw`'${le.transport}' is not a recognized auth transport`;return(ee,ae)=>{const Te=vn(ee,le);bt.getAuthorizers()[le.transport](bt,Te,le,g.ChannelAuthorization,ae)}};const bn=(le,ee,ae)=>{const Te={authTransport:ee.transport,authEndpoint:ee.endpoint,auth:{params:ee.params,headers:ee.headers}};return(Me,$e)=>{const nt=le.channel(Me.channelName);ae(nt,Te).authorize(Me.socketId,$e)}};function Xr(le,ee){let ae={activityTimeout:le.activityTimeout||i.activityTimeout,cluster:le.cluster,httpPath:le.httpPath||i.httpPath,httpPort:le.httpPort||i.httpPort,httpsPort:le.httpsPort||i.httpsPort,pongTimeout:le.pongTimeout||i.pongTimeout,statsHost:le.statsHost||i.stats_host,unavailableTimeout:le.unavailableTimeout||i.unavailableTimeout,wsPath:le.wsPath||i.wsPath,wsPort:le.wsPort||i.wsPort,wssPort:le.wssPort||i.wssPort,enableStats:$r(le),httpHost:wn(le),useTLS:Fr(le),wsHost:xn(le),userAuthenticator:yr(le),channelAuthorizer:ct(le,ee)};return"disabledTransports"in le&&(ae.disabledTransports=le.disabledTransports),"enabledTransports"in le&&(ae.enabledTransports=le.enabledTransports),"ignoreNullOrigin"in le&&(ae.ignoreNullOrigin=le.ignoreNullOrigin),"timelineParams"in le&&(ae.timelineParams=le.timelineParams),"nacl"in le&&(ae.nacl=le.nacl),ae}function wn(le){return le.httpHost?le.httpHost:le.cluster?`sockjs-${le.cluster}.pusher.com`:i.httpHost}function xn(le){return le.wsHost?le.wsHost:Yr(le.cluster)}function Yr(le){return`ws-${le}.pusher.com`}function Fr(le){return bt.getProtocol()==="https:"?!0:le.forceTLS!==!1}function $r(le){return"enableStats"in le?le.enableStats:"disableStats"in le?!le.disableStats:!1}const Zr=le=>"customHandler"in le&&le.customHandler!=null;function yr(le){const ee=Object.assign(Object.assign({},i.userAuthentication),le.userAuthentication);return Zr(ee)?ee.customHandler:yn(ee)}function vr(le,ee){let ae;if("channelAuthorization"in le)ae=Object.assign(Object.assign({},i.channelAuthorization),le.channelAuthorization);else if(ae={transport:le.authTransport||i.authTransport,endpoint:le.authEndpoint||i.authEndpoint},"auth"in le&&("params"in le.auth&&(ae.params=le.auth.params),"headers"in le.auth&&(ae.headers=le.auth.headers)),"authorizer"in le)return{customHandler:bn(ee,ae,le.authorizer)};return ae}function ct(le,ee){const ae=vr(le,ee);return Zr(ae)?ae.customHandler:_n(ae)}class On extends tt{constructor(ee){super(function(ae,Te){Ge.debug(`No callbacks on watchlist events for ${ae}`)}),this.pusher=ee,this.bindWatchlistInternalEvent()}handleEvent(ee){ee.data.events.forEach(ae=>{this.emit(ae.name,ae)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",ee=>{var ae=ee.event;ae==="pusher_internal:watchlist_events"&&this.handleEvent(ee)})}}function Sn(){let le,ee;return{promise:new Promise((Te,Me)=>{le=Te,ee=Me}),resolve:le,reject:ee}}var xr=Sn;class Nn extends tt{constructor(ee){super(function(ae,Te){Ge.debug("No callbacks on user for "+ae)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(ae,Te)=>{if(ae){Ge.warn(`Error during signin: ${ae}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:Te.auth,user_data:Te.user_data})},this.pusher=ee,this.pusher.connection.bind("state_change",({previous:ae,current:Te})=>{ae!=="connected"&&Te==="connected"&&this._signin(),ae==="connected"&&Te!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new On(ee),this.pusher.connection.bind("message",ae=>{var Te=ae.event;Te==="pusher:signin_success"&&this._onSigninSuccess(ae.data),this.serverToUserChannel&&this.serverToUserChannel.name===ae.channel&&this.serverToUserChannel.handleEvent(ae)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(ee){try{this.user_data=JSON.parse(ee.user_data)}catch{Ge.error(`Failed parsing user data after signin: ${ee.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Ge.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const ee=ae=>{ae.subscriptionPending&&ae.subscriptionCancelled?ae.reinstateSubscription():!ae.subscriptionPending&&this.pusher.connection.state==="connected"&&ae.subscribe()};this.serverToUserChannel=new it(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((ae,Te)=>{ae.indexOf("pusher_internal:")===0||ae.indexOf("pusher:")===0||this.emit(ae,Te)}),ee(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:ee,resolve:ae,reject:Te}=xr();ee.done=!1;const Me=()=>{ee.done=!0};ee.then(Me).catch(Me),this.signinDonePromise=ee,this._signinDoneResolve=ae}}class Kt{static ready(){Kt.isReady=!0;for(var ee=0,ae=Kt.instances.length;ee<ae;ee++)Kt.instances[ee].connect()}static getClientFeatures(){return xe(ke({ws:bt.Transports.ws},function(ee){return ee.isSupported({})}))}constructor(ee,ae){En(ee),gn(ae),this.key=ee,this.options=ae,this.config=Xr(this.options,this),this.channels=Yt.createChannels(),this.global_emitter=new tt,this.sessionID=bt.randomInt(1e9),this.timeline=new Lr(this.key,this.sessionID,{cluster:this.config.cluster,features:Kt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ur.INFO,version:i.VERSION}),this.config.enableStats&&(this.timelineSender=Yt.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+bt.TimelineTransport.name}));var Te=Me=>bt.getDefaultStrategy(this.config,Me,pn);this.connection=Yt.createConnectionManager(this.key,{getStrategy:Te,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",Me=>{var $e=Me.event,nt=$e.indexOf("pusher_internal:")===0;if(Me.channel){var ht=this.channel(Me.channel);ht&&ht.handleEvent(Me)}nt||this.global_emitter.emit(Me.event,Me.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",Me=>{Ge.warn(Me)}),Kt.instances.push(this),this.timeline.info({instances:Kt.instances.length}),this.user=new Nn(this),Kt.isReady&&this.connect()}switchCluster(ee){const{appKey:ae,cluster:Te}=ee;this.key=ae,this.options=Object.assign(Object.assign({},this.options),{cluster:Te}),this.config=Xr(this.options,this),this.connection.switchCluster(this.key)}channel(ee){return this.channels.find(ee)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var ee=this.connection.isUsingTLS(),ae=this.timelineSender;this.timelineSenderTimer=new B(6e4,function(){ae.send(ee)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(ee,ae,Te){return this.global_emitter.bind(ee,ae,Te),this}unbind(ee,ae,Te){return this.global_emitter.unbind(ee,ae,Te),this}bind_global(ee){return this.global_emitter.bind_global(ee),this}unbind_global(ee){return this.global_emitter.unbind_global(ee),this}unbind_all(ee){return this.global_emitter.unbind_all(),this}subscribeAll(){var ee;for(ee in this.channels.channels)this.channels.channels.hasOwnProperty(ee)&&this.subscribe(ee)}subscribe(ee){var ae=this.channels.add(ee,this);return ae.subscriptionPending&&ae.subscriptionCancelled?ae.reinstateSubscription():!ae.subscriptionPending&&this.connection.state==="connected"&&ae.subscribe(),ae}unsubscribe(ee){var ae=this.channels.find(ee);ae&&ae.subscriptionPending?ae.cancelSubscription():(ae=this.channels.remove(ee),ae&&ae.subscribed&&ae.unsubscribe())}send_event(ee,ae,Te){return this.connection.send_event(ee,ae,Te)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Kt.instances=[],Kt.isReady=!1,Kt.logToConsole=!1,Kt.Runtime=bt,Kt.ScriptReceivers=bt.ScriptReceivers,Kt.DependenciesReceivers=bt.DependenciesReceivers,Kt.auth_callbacks=bt.auth_callbacks;var jt=t.default=Kt;function En(le){if(le==null)throw"You must pass your app key when you instantiate Pusher."}bt.setup(Kt)}])})})(pusher);var pusherExports=pusher.exports;const Pusher$1=getDefaultExportFromCjs(pusherExports),listen=()=>{const s=get_store_value(id);return window.Pusher=Pusher$1,window.Echo=new Echo({broadcaster:"reverb",cluster:"eu",key:get_store_value(pusherKey),wsHost:get_store_value(apiWsDomain),wsPort:"8080",wssPort:"8080",forceTLS:!1,enabledTransports:["ws","wss"],disableStats:!0}),window.Echo.channel("userStatus").listen("UserStatusChange",r=>{const{id:n,isActive:t}=r;users.update(a=>a.map(l=>l.id===+n?{...l,isActive:!!t}:l))}),window.Echo.channel("userPositions."+s).listen("UserPositionChange",r=>{var a;const n=(a=r.sender)==null?void 0:a.id;if(!n)return;const t=get_store_value(qubits).reduce((l,o,c)=>o.active&&o.user===n?[...l,c]:l,[]);axes.filter((l,o)=>t.includes(o)).forEach(l=>{l.set(Object.values(r.coords))})}),()=>{window.Echo.leave("userStatus"),window.Echo.leave("userPositions."+s)}},updateProfile=()=>{const s=`${get_store_value(apiDomain)}/api/app-user/${get_store_value(id)}/update`,r="PATCH",n=name.subscribe(debounce(a=>{localStorage.setItem("q.name",a);const l=JSON.stringify({name:a});fetch(s,{method:r,headers:get_store_value(headers),body:l}).catch(o=>console.error("Error:",o))},500)),t=location$1.subscribe(debounce(a=>{localStorage.setItem("q.location",a);const l=JSON.stringify({location:a});fetch(s,{method:r,headers:get_store_value(headers),body:l}).catch(o=>console.error("Error:",o))},500));return()=>{n(),t()}},logout=()=>{const s=`/api/app-user/${get_store_value(id)}/logout`;return fetch(`${get_store_value(apiDomain)}${s}`,{headers:get_store_value(headers),method:"GET"}).then(r=>{console.log(r)})};function initElectronAPI(){typeof document>"u"||typeof window>"u"||(apiDomain.set(window.apiDomain),apiWsDomain.set(window.apiWsDomain),apiToken.set(window.apiToken),pusherKey.set(window.apiPusherKey),window.electronAPI.onSetPreset(s=>activePreset.set(s)),window.electronAPI.onSavePreset(()=>{const s=new CustomEvent("showSavePresetDialog");document.dispatchEvent(s)}),presets.subscribe(s=>window.electronAPI.syncUserPresets(s)),window.electronAPI.onExportPreset(()=>{window.electronAPI.exportPresetResponse(getAppState())}),window.electronAPI.onImportPreset(s=>{console.log(s)}),window.electronAPI.onUpdateSamples(updateSamples),window.electronAPI.onQuit(logout))}const _page_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_default_slot(s){let r,n,t,a,l,o,c,i,f,y,_,u;return c=new InstrumentButtons({props:{orientation:"vertical"}}),f=new Parameters({props:{showSockets:!1}}),{c(){r=element("div"),n=element("button"),t=svg_element("svg"),a=svg_element("path"),l=space(),o=element("div"),create_component(c.$$.fragment),i=space(),create_component(f.$$.fragment),this.h()},l(m){r=claim_element(m,"DIV",{class:!0});var p=children(r);n=claim_element(p,"BUTTON",{});var g=children(n);t=claim_svg_element(g,"svg",{class:!0,viewBox:!0,xmlns:!0});var x=children(t);a=claim_svg_element(x,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(a).forEach(detach),x.forEach(detach),g.forEach(detach),l=claim_space(p),o=claim_element(p,"DIV",{class:!0});var b=children(o);claim_component(c.$$.fragment,b),b.forEach(detach),i=claim_space(p),claim_component(f.$$.fragment,p),p.forEach(detach),this.h()},h(){attr(a,"fill-rule","evenodd"),attr(a,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),attr(a,"clip-rule","evenodd"),attr(t,"class","sidebar__close w-5 h-5 mb-4 svelte-1kn3k"),attr(t,"viewBox","0 0 20 20"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(o,"class","sidebar__instruments svelte-1kn3k"),attr(r,"class","sidebar")},m(m,p){insert_hydration(m,r,p),append_hydration(r,n),append_hydration(n,t),append_hydration(t,a),append_hydration(r,l),append_hydration(r,o),mount_component(c,o,null),append_hydration(r,i),mount_component(f,r,null),y=!0,_||(u=listen$1(n,"click",s[8]),_=!0)},p:noop,i(m){y||(transition_in(c.$$.fragment,m),transition_in(f.$$.fragment,m),y=!0)},o(m){transition_out(c.$$.fragment,m),transition_out(f.$$.fragment,m),y=!1},d(m){m&&detach(r),destroy_component(c),destroy_component(f),_=!1,u()}}}function create_if_block(s){let r,n,t,a,l,o,c;return t=new Controls$1({}),o=new Measure({}),{c(){r=element("div"),n=element("div"),create_component(t.$$.fragment),a=space(),l=element("div"),create_component(o.$$.fragment),this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);n=claim_element(f,"DIV",{class:!0});var y=children(n);claim_component(t.$$.fragment,y),y.forEach(detach),a=claim_space(f),l=claim_element(f,"DIV",{class:!0});var _=children(l);claim_component(o.$$.fragment,_),_.forEach(detach),f.forEach(detach),this.h()},h(){attr(n,"class","keyboard svelte-1kn3k"),attr(l,"class","measure"),attr(r,"class","controls svelte-1kn3k")},m(i,f){insert_hydration(i,r,f),append_hydration(r,n),mount_component(t,n,null),append_hydration(r,a),append_hydration(r,l),mount_component(o,l,null),c=!0},i(i){c||(transition_in(t.$$.fragment,i),transition_in(o.$$.fragment,i),c=!0)},o(i){transition_out(t.$$.fragment,i),transition_out(o.$$.fragment,i),c=!1},d(i){i&&detach(r),destroy_component(t),destroy_component(o)}}}function create_fragment(s){let r,n,t,a,l,o,c,i,f,y,_,u,m,p,g,x,b,E,S,k,T,j,A,C,N,V,I,G,R,q,M;function L(U){s[9](U)}let H={transitionType:"fly",transitionParams:s[6],id:"sidebar",$$slots:{default:[create_default_slot]},$$scope:{ctx:s}};s[0]!==void 0&&(H.hidden=s[0]),t=new Drawer({props:H}),binding_callbacks.push(()=>bind(t,"hidden",L)),o=new Toasts({}),_=new Button({props:{colour:"grey",border:!0,active:s[1],narrow:!0,onClick:s[10],icon:faBars,classes:"mr-2"}}),m=new InstrumentButtons({}),x=new Button({props:{onClick:s[11],active:!s[0],colour:"yellow",text:"Parameters"}}),E=new Presets({props:{type:"instrument",keys:s[2],savePreset,deletePreset,editPreset,active:activePreset}}),j=new Parameters({}),V=new Qubits({});let O=s[5]&&create_if_block();return{c(){r=element("meta"),n=space(),create_component(t.$$.fragment),l=space(),create_component(o.$$.fragment),c=space(),i=element("section"),f=element("div"),y=element("div"),create_component(_.$$.fragment),u=space(),create_component(m.$$.fragment),p=space(),g=element("div"),create_component(x.$$.fragment),b=space(),create_component(E.$$.fragment),S=space(),k=element("section"),T=element("div"),create_component(j.$$.fragment),A=space(),C=element("div"),N=element("div"),create_component(V.$$.fragment),I=space(),O&&O.c(),this.h()},l(U){const J=head_selector("svelte-17uodp2",document.head);r=claim_element(J,"META",{name:!0,content:!0}),J.forEach(detach),n=claim_space(U),claim_component(t.$$.fragment,U),l=claim_space(U),claim_component(o.$$.fragment,U),c=claim_space(U),i=claim_element(U,"SECTION",{class:!0});var Z=children(i);f=claim_element(Z,"DIV",{class:!0});var z=children(f);y=claim_element(z,"DIV",{class:!0});var B=children(y);claim_component(_.$$.fragment,B),u=claim_space(B),claim_component(m.$$.fragment,B),B.forEach(detach),p=claim_space(z),g=claim_element(z,"DIV",{class:!0});var D=children(g);claim_component(x.$$.fragment,D),D.forEach(detach),b=claim_space(z),claim_component(E.$$.fragment,z),z.forEach(detach),Z.forEach(detach),S=claim_space(U),k=claim_element(U,"SECTION",{class:!0});var X=children(k);T=claim_element(X,"DIV",{class:!0});var K=children(T);claim_component(j.$$.fragment,K),K.forEach(detach),A=claim_space(X),C=claim_element(X,"DIV",{class:!0});var re=children(C);N=claim_element(re,"DIV",{class:!0,style:!0});var se=children(N);claim_component(V.$$.fragment,se),se.forEach(detach),I=claim_space(re),O&&O.l(re),re.forEach(detach),X.forEach(detach),this.h()},h(){document.title="Home",attr(r,"name","description"),attr(r,"content","TODO: please write a description"),attr(y,"class","buttons__instruments svelte-1kn3k"),attr(g,"class","buttons__parameters svelte-1kn3k"),attr(f,"class","buttons__inner svelte-1kn3k"),attr(i,"class","buttons container mx-auto svelte-1kn3k"),attr(T,"class","parameters svelte-1kn3k"),attr(N,"class","qubits svelte-1kn3k"),set_style(N,"max-height",s[5]?"34rem":"none"),toggle_class(N,"qubits--full",s[4]<3),attr(C,"class","interface svelte-1kn3k"),attr(k,"class",G=null_to_empty(`container synth ${s[3]?"synth--fullscreen":""}`)+" svelte-1kn3k")},m(U,J){append_hydration(document.head,r),insert_hydration(U,n,J),mount_component(t,U,J),insert_hydration(U,l,J),mount_component(o,U,J),insert_hydration(U,c,J),insert_hydration(U,i,J),append_hydration(i,f),append_hydration(f,y),mount_component(_,y,null),append_hydration(y,u),mount_component(m,y,null),append_hydration(f,p),append_hydration(f,g),mount_component(x,g,null),append_hydration(f,b),mount_component(E,f,null),insert_hydration(U,S,J),insert_hydration(U,k,J),append_hydration(k,T),mount_component(j,T,null),append_hydration(k,A),append_hydration(k,C),append_hydration(C,N),mount_component(V,N,null),append_hydration(C,I),O&&O.m(C,null),R=!0,q||(M=[listen$1(window_1,"click",startAudio),listen$1(window_1,"touchstart",startAudio),listen$1(window_1,"keydown",startAudio),listen$1(window_1,"resize",s[7])],q=!0)},p(U,[J]){const Z={};J&8193&&(Z.$$scope={dirty:J,ctx:U}),!a&&J&1&&(a=!0,Z.hidden=U[0],add_flush_callback(()=>a=!1)),t.$set(Z);const z={};J&2&&(z.active=U[1]),_.$set(z);const B={};J&1&&(B.onClick=U[11]),J&1&&(B.active=!U[0]),x.$set(B);const D={};J&4&&(D.keys=U[2]),E.$set(D),(!R||J&32)&&set_style(N,"max-height",U[5]?"34rem":"none"),(!R||J&16)&&toggle_class(N,"qubits--full",U[4]<3),U[5]?O?J&32&&transition_in(O,1):(O=create_if_block(),O.c(),transition_in(O,1),O.m(C,null)):O&&(group_outros(),transition_out(O,1,1,()=>{O=null}),check_outros()),(!R||J&8&&G!==(G=null_to_empty(`container synth ${U[3]?"synth--fullscreen":""}`)+" svelte-1kn3k"))&&attr(k,"class",G)},i(U){R||(transition_in(t.$$.fragment,U),transition_in(o.$$.fragment,U),transition_in(_.$$.fragment,U),transition_in(m.$$.fragment,U),transition_in(x.$$.fragment,U),transition_in(E.$$.fragment,U),transition_in(j.$$.fragment,U),transition_in(V.$$.fragment,U),transition_in(O),R=!0)},o(U){transition_out(t.$$.fragment,U),transition_out(o.$$.fragment,U),transition_out(_.$$.fragment,U),transition_out(m.$$.fragment,U),transition_out(x.$$.fragment,U),transition_out(E.$$.fragment,U),transition_out(j.$$.fragment,U),transition_out(V.$$.fragment,U),transition_out(O),R=!1},d(U){detach(r),U&&detach(n),destroy_component(t,U),U&&detach(l),destroy_component(o,U),U&&detach(c),U&&detach(i),destroy_component(_),destroy_component(m),destroy_component(x),destroy_component(E),U&&detach(S),U&&detach(k),destroy_component(j),destroy_component(V),O&&O.d(),q=!1,run_all(M)}}}function instance(s,r,n){let t,a,l,o,c;component_subscribe(s,showSideMenu,g=>n(1,t=g)),component_subscribe(s,presetKeys,g=>n(2,a=g)),component_subscribe(s,fullscreen,g=>n(3,l=g)),component_subscribe(s,activeQubitCount,g=>n(4,o=g)),component_subscribe(s,showKeyboard,g=>n(5,c=g)),library$1.add(faBars);let i=!0,f={x:-320,duration:200,easing:sineIn};const y=()=>{n(0,i=!0)};onMount(async()=>{if(redrawCables(500),!isApp())return;initElectronAPI(),await login();const g=updateProfile();await getUsers();const x=broadcast(),b=listen();return window.addEventListener("beforeunload",logout$1),()=>{x(),b(),g(),window.removeEventListener("beforeunload",logout$1)}});const _=()=>n(0,i=!0);function u(g){i=g,n(0,i)}return[i,t,a,l,o,c,f,y,_,u,()=>showSideMenu.update(g=>!g),()=>n(0,i=!1)]}class Page extends SvelteComponent{constructor(r){super(),init(this,r,instance,create_fragment,safe_not_equal,{})}}export{Page as component,_page as universal};
