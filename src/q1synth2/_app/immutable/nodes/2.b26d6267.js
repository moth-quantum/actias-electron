var Vn=Object.defineProperty;var Un=(s,r,n)=>r in s?Vn(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var or=(s,r,n)=>(Un(s,typeof r!="symbol"?r+"":r,n),n);import{N as get_store_value,S as SvelteComponent,i as init,s as safe_not_equal,e as empty,b as insert_hydration,v as group_outros,d as transition_out,f as check_outros,g as transition_in,h as detach,G as component_subscribe,O as create_slot,P as update_slot_base,Q as get_all_dirty_from_scope,R as get_slot_changes,k as element,q as text,a as space,l as claim_element,m as children,r as claim_text,c as claim_space,n as attr,E as append_hydration,J as listen$1,L as run_all,y as create_component,z as claim_component,A as mount_component,X as set_input_value,B as destroy_component,u as set_data,Y as to_number,Z as svg_element,_ as claim_svg_element,F as noop,K as destroy_each,o as onMount,$ as onDestroy,D as toggle_class,a0 as null_to_empty,T as action_destroyer,U as is_function,a1 as update_keyed_each,a2 as outro_and_destroy_block,t as tick,W as globals,w as binding_callbacks,a3 as destroy_block,p as set_style,H as bind,I as add_flush_callback,a4 as set_store_value,M as createEventDispatcher,a5 as bubble,a6 as assign,a7 as set_svg_attributes,a8 as add_render_callback,a9 as add_iframe_resize_listener,aa as prevent_default,ab as compute_rest_props,ac as setContext$1,ad as exclude_internal_props,ae as set_dynamic_element_data,af as get_spread_update,ag as create_bidirectional_transition,ah as split_css_unit,ai as identity,aj as set_attributes,ak as getContext$1,al as get_spread_object,am as compute_slots,V as head_selector}from"../chunks/index.ae544eaf.js";import{W as volume,X as samples$1,Y as synthValues,Z as throttle,_ as drone,$ as envelopeValues,a0 as mapToStepRange,a1 as mute,T as menuItems,a2 as Learnable,H as d,a3 as sockets,a4 as focusedQubit,a5 as instrumentParameters,a6 as connections,a7 as connectSockets,a8 as activateSocket,a9 as deactivateSockets,aa as disconnectSocket,ab as keys,ac as paramValues,ad as globalParameters,ae as fxParameters,F as FontAwesomeIcon,af as faShuffle,ag as faLock,ah as randomiseConnections,ai as randomise,S as Select,Q as clamp$1,aj as getDefaultExportFromCjs,y as inputs,ak as wm,al as learn,am as envelopes,G as Button,an as midi,ao as faSignal,ap as commonjsGlobal,aq as seconds,ar as bpm,as as beats,at as isMeasuring,i as isApp,au as source,av as measure,aw as commonjsRequire,q as qubits,ax as debounce,ay as redrawCables,az as min,M as axes,aA as activeQubitCount,p as performanceMode,aB as axesValues,r as getUserColour,aC as getUserName,N as Slider,aD as instruments$1,aE as instrument,m as library$1,aF as faSmileWink,aG as faNetworkWired,aH as faCompactDisc,aI as faBraille,aJ as faTable,aK as cubicInOut,aL as cubicOut,aM as toasts,a as id,n as name,l as location$1,aN as headers,aO as apiDomain,aP as addToast,aQ as isLoggedIn,aR as pusherKey,aS as apiWsDomain,aT as users,aU as apiToken,aV as activePreset,aW as presets,aX as getAppState,aY as updateSamples,aZ as faBars,P as Presets,a_ as savePreset,a$ as deletePreset,b0 as editPreset,b1 as isChrome,g as getUsers,s as showSideMenu,b2 as presetKeys,b3 as showKeyboard,b4 as sineIn}from"../chunks/Slider.905e9b97.js";import{d as derived,w as writable$1}from"../chunks/index.232ab201.js";import{_ as __vitePreload}from"../chunks/preload-helper.a4192956.js";function _mergeNamespaces(s,r){for(var n=0;n<r.length;n++){const t=r[n];if(typeof t!="string"&&!Array.isArray(t)){for(const a in t)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(t,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>t[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}const prerender=!0,_page=Object.freeze(Object.defineProperty({__proto__:null,prerender},Symbol.toStringTag,{value:"Module"})),version="14.7.77",createExtendedExponentialRampToValueAutomationEvent=(s,r,n)=>({endTime:r,insertTime:n,type:"exponentialRampToValue",value:s}),createExtendedLinearRampToValueAutomationEvent=(s,r,n)=>({endTime:r,insertTime:n,type:"linearRampToValue",value:s}),createSetValueAutomationEvent=(s,r)=>({startTime:r,type:"setValue",value:s}),createSetValueCurveAutomationEvent=(s,r,n)=>({duration:n,startTime:r,type:"setValueCurve",values:s}),getTargetValueAtTime=(s,r,{startTime:n,target:t,timeConstant:a})=>t+(r-t)*Math.exp((n-s)/a),isExponentialRampToValueAutomationEvent=s=>s.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=s=>s.type==="linearRampToValue",isAnyRampToValueAutomationEvent=s=>isExponentialRampToValueAutomationEvent(s)||isLinearRampToValueAutomationEvent(s),isSetValueAutomationEvent=s=>s.type==="setValue",isSetValueCurveAutomationEvent=s=>s.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(s,r,n,t)=>{const a=s[r];return a===void 0?t:isAnyRampToValueAutomationEvent(a)||isSetValueAutomationEvent(a)?a.value:isSetValueCurveAutomationEvent(a)?a.values[a.values.length-1]:getTargetValueAtTime(n,getValueOfAutomationEventAtIndexAtTime(s,r-1,a.startTime,t),a)},getEndTimeAndValueOfPreviousAutomationEvent=(s,r,n,t,a)=>n===void 0?[t.insertTime,a]:isAnyRampToValueAutomationEvent(n)?[n.endTime,n.value]:isSetValueAutomationEvent(n)?[n.startTime,n.value]:isSetValueCurveAutomationEvent(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,getValueOfAutomationEventAtIndexAtTime(s,r-1,n.startTime,a)],isCancelAndHoldAutomationEvent=s=>s.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=s=>s.type==="cancelScheduledValues",getEventTime=s=>isCancelAndHoldAutomationEvent(s)||isCancelScheduledValuesAutomationEvent(s)?s.cancelTime:isExponentialRampToValueAutomationEvent(s)||isLinearRampToValueAutomationEvent(s)?s.endTime:s.startTime,getExponentialRampValueAtTime=(s,r,n,{endTime:t,value:a})=>n===a?a:0<n&&0<a||n<0&&a<0?n*(a/n)**((s-r)/(t-r)):0,getLinearRampValueAtTime=(s,r,n,{endTime:t,value:a})=>n+(s-r)/(t-r)*(a-n),interpolateValue=(s,r)=>{const n=Math.floor(r),t=Math.ceil(r);return n===t?s[n]:(1-(r-n))*s[n]+(1-(t-r))*s[t]},getValueCurveValueAtTime=(s,{duration:r,startTime:n,values:t})=>{const a=(s-n)/r*(t.length-1);return interpolateValue(t,a)},isSetTargetAutomationEvent=s=>s.type==="setTarget";class AutomationEventList{constructor(r){this._automationEvents=[],this._currenTime=0,this._defaultValue=r}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(r){const n=getEventTime(r);if(isCancelAndHoldAutomationEvent(r)||isCancelScheduledValuesAutomationEvent(r)){const t=this._automationEvents.findIndex(l=>isCancelScheduledValuesAutomationEvent(r)&&isSetValueCurveAutomationEvent(l)?l.startTime+l.duration>=n:getEventTime(l)>=n),a=this._automationEvents[t];if(t!==-1&&(this._automationEvents=this._automationEvents.slice(0,t)),isCancelAndHoldAutomationEvent(r)){const l=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&isAnyRampToValueAutomationEvent(a)){if(l!==void 0&&isSetTargetAutomationEvent(l))throw new Error("The internal list is malformed.");const o=l===void 0?a.insertTime:isSetValueCurveAutomationEvent(l)?l.startTime+l.duration:getEventTime(l),c=l===void 0?this._defaultValue:isSetValueCurveAutomationEvent(l)?l.values[l.values.length-1]:l.value,i=isExponentialRampToValueAutomationEvent(a)?getExponentialRampValueAtTime(n,o,c,a):getLinearRampValueAtTime(n,o,c,a),f=isExponentialRampToValueAutomationEvent(a)?createExtendedExponentialRampToValueAutomationEvent(i,n,this._currenTime):createExtendedLinearRampToValueAutomationEvent(i,n,this._currenTime);this._automationEvents.push(f)}if(l!==void 0&&isSetTargetAutomationEvent(l)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(n),n)),l!==void 0&&isSetValueCurveAutomationEvent(l)&&l.startTime+l.duration>n){const o=n-l.startTime,c=(l.values.length-1)/l.duration,i=Math.max(2,1+Math.ceil(o*c)),f=o/(i-1)*c,m=l.values.slice(0,i);if(f<1)for(let _=1;_<i;_+=1){const u=f*_%1;m[_]=l.values[_-1]*(1-u)+l.values[_]*u}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(m,l.startTime,o)}}}else{const t=this._automationEvents.findIndex(o=>getEventTime(o)>n),a=t===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[t-1];if(a!==void 0&&isSetValueCurveAutomationEvent(a)&&getEventTime(a)+a.duration>n)return!1;const l=isExponentialRampToValueAutomationEvent(r)?createExtendedExponentialRampToValueAutomationEvent(r.value,r.endTime,this._currenTime):isLinearRampToValueAutomationEvent(r)?createExtendedLinearRampToValueAutomationEvent(r.value,n,this._currenTime):r;if(t===-1)this._automationEvents.push(l);else{if(isSetValueCurveAutomationEvent(r)&&n+r.duration>getEventTime(this._automationEvents[t]))return!1;this._automationEvents.splice(t,0,l)}}return!0}flush(r){const n=this._automationEvents.findIndex(t=>getEventTime(t)>r);if(n>1){const t=this._automationEvents.slice(n-1),a=t[0];isSetTargetAutomationEvent(a)&&t.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,n-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=t}}getValue(r){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>getEventTime(o)>r),t=this._automationEvents[n],a=(n===-1?this._automationEvents.length:n)-1,l=this._automationEvents[a];if(l!==void 0&&isSetTargetAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)||t.insertTime>r))return getTargetValueAtTime(r,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,a-1,l.startTime,this._defaultValue),l);if(l!==void 0&&isSetValueAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)))return l.value;if(l!==void 0&&isSetValueCurveAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)||l.startTime+l.duration>r))return r<l.startTime+l.duration?getValueCurveValueAtTime(r,l):l.values[l.values.length-1];if(l!==void 0&&isAnyRampToValueAutomationEvent(l)&&(t===void 0||!isAnyRampToValueAutomationEvent(t)))return l.value;if(t!==void 0&&isExponentialRampToValueAutomationEvent(t)){const[o,c]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,a,l,t,this._defaultValue);return getExponentialRampValueAtTime(r,o,c,t)}if(t!==void 0&&isLinearRampToValueAutomationEvent(t)){const[o,c]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,a,l,t,this._defaultValue);return getLinearRampValueAtTime(r,o,c,t)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=s=>({cancelTime:s,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=s=>({cancelTime:s,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(s,r)=>({endTime:r,type:"exponentialRampToValue",value:s}),createLinearRampToValueAutomationEvent=(s,r)=>({endTime:r,type:"linearRampToValue",value:s}),createSetTargetAutomationEvent=(s,r,n)=>({startTime:r,target:s,timeConstant:n,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=s=>(r,n,[t,a,l],o)=>{s(r[a],[n,t,l],c=>c[0]===n&&c[1]===t,o)},createAddAudioNodeConnections=s=>(r,n,t)=>{const a=[];for(let l=0;l<t.numberOfInputs;l+=1)a.push(new Set);s.set(r,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},createAddAudioParamConnections=s=>(r,n)=>{s.set(r,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=s=>{try{const r=new Proxy(s,handler);new r}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(s,r)=>{const n=[];let t=s.replace(/^[\s]+/,""),a=t.match(IMPORT_STATEMENT_REGEX);for(;a!==null;){const l=a[1].slice(1,-1),o=a[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,r).toString());n.push(o),t=t.slice(a[0].length).replace(/^[\s]+/,""),a=t.match(IMPORT_STATEMENT_REGEX)}return[n.join(";"),t]},verifyParameterDescriptors=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=s=>{if(!isConstructible(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(s,r,n,t,a,l,o,c,i,f,m,_,u)=>{let p=0;return(g,y,S={credentials:"omit"})=>{const b=m.get(g);if(b!==void 0&&b.has(y))return Promise.resolve();const E=f.get(g);if(E!==void 0){const T=E.get(y);if(T!==void 0)return T}const x=l(g),k=x.audioWorklet===void 0?a(y).then(([T,j])=>{const[A,C]=splitImportStatements(T,j),I=`${A};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return n(I)}).then(()=>{const T=u._AWGS.pop();if(T===void 0)throw new SyntaxError;t(x.currentTime,x.sampleRate,()=>T(class{},void 0,(j,A)=>{if(j.trim()==="")throw r();const C=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(x);if(C!==void 0){if(C.has(j))throw r();verifyProcessorCtor(A),verifyParameterDescriptors(A.parameterDescriptors),C.set(j,A)}else verifyProcessorCtor(A),verifyParameterDescriptors(A.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(x,new Map([[j,A]]))},x.sampleRate,void 0,void 0))}):Promise.all([a(y),Promise.resolve(s(_,_))]).then(([[T,j],A])=>{const C=p+1;p=C;const[I,F]=splitImportStatements(T,j),q=`${I};((AudioWorkletProcessor,registerProcessor)=>{${F}
})(${A?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${A?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${A?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,M=new Blob([q],{type:"application/javascript; charset=utf-8"}),D=URL.createObjectURL(M);return x.audioWorklet.addModule(D,S).then(()=>{if(c(x))return x;const X=o(x);return X.audioWorklet.addModule(D,S).then(()=>X)}).then(X=>{if(i===null)throw new SyntaxError;try{new i(X,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(D))});return E===void 0?f.set(g,new Map([[y,k]])):E.set(y,k),k.then(()=>{const T=m.get(g);T===void 0?m.set(g,new Set([y])):T.add(y)}).finally(()=>{const T=f.get(g);T!==void 0&&T.delete(y)}),k}},getValueForKey=(s,r)=>{const n=s.get(r);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},pickElementFromSet=(s,r)=>{const n=Array.from(s).filter(r);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[t]=n;return s.delete(t),t},deletePassiveInputConnectionToAudioNode=(s,r,n,t)=>{const a=getValueForKey(s,r),l=pickElementFromSet(a,o=>o[0]===n&&o[1]===t);return a.size===0&&s.delete(r),l},getEventListenersOfAudioNode=s=>getValueForKey(EVENT_LISTENERS,s),setInternalStateToActive=s=>{if(ACTIVE_AUDIO_NODE_STORE.has(s))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(s),getEventListenersOfAudioNode(s).forEach(r=>r(!0))},isAudioWorkletNode=s=>"port"in s,setInternalStateToPassive=s=>{if(!ACTIVE_AUDIO_NODE_STORE.has(s))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(s),getEventListenersOfAudioNode(s).forEach(r=>r(!1))},setInternalStateToPassiveWhenNecessary=(s,r)=>{!isAudioWorkletNode(s)&&r.every(n=>n.size===0)&&setInternalStateToPassive(s)},createAddConnectionToAudioNode=(s,r,n,t,a,l,o,c,i,f,m,_,u)=>{const p=new WeakMap;return(g,y,S,b,E)=>{const{activeInputs:x,passiveInputs:k}=l(y),{outputs:T}=l(g),j=c(g),A=C=>{const I=i(y),F=i(g);if(C){const N=deletePassiveInputConnectionToAudioNode(k,g,S,b);s(x,g,N,!1),!E&&!_(g)&&n(F,I,S,b),u(y)&&setInternalStateToActive(y)}else{const N=t(x,g,S,b);r(k,b,N,!1),!E&&!_(g)&&a(F,I,S,b);const z=o(y);if(z===0)m(y)&&setInternalStateToPassiveWhenNecessary(y,x);else{const R=p.get(y);R!==void 0&&clearTimeout(R),p.set(y,setTimeout(()=>{m(y)&&setInternalStateToPassiveWhenNecessary(y,x)},z*1e3))}}};return f(T,[y,S,b],C=>C[0]===y&&C[1]===S&&C[2]===b,!0)?(j.add(A),m(g)?s(x,g,[S,b,A],!0):r(k,b,[g,S,A],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=s=>(r,n,[t,a,l],o)=>{const c=r.get(t);c===void 0?r.set(t,new Set([[a,n,l]])):s(c,[a,n,l],i=>i[0]===a&&i[1]===n,o)},createAddSilentConnection=s=>(r,n)=>{const t=s(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(t).connect(r.destination);const a=()=>{n.removeEventListener("ended",a),n.disconnect(t),t.disconnect()};n.addEventListener("ended",a)},createAddUnrenderedAudioWorkletNode=s=>(r,n)=>{s(r).add(n)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=a(c),m={...DEFAULT_OPTIONS$j,...i},_=t(f,m),u=l(f)?r():null;super(c,!1,_,u),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const i=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=i,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const i=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=i,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},isOwnedByContext=(s,r)=>s.context===r,createAnalyserNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=s(o,f)}return t.set(o,c),await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=s=>{s.getChannelData=(r=>n=>{try{return r.call(s,n)}catch(t){throw t.code===12?createIndexSizeError():t}})(s.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(s,r,n,t,a,l,o,c)=>{let i=null;return class Fn{constructor(m){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:u,sampleRate:p}={...DEFAULT_OPTIONS$i,...m};i===null&&(i=new a(1,1,44100));const g=t!==null&&r(l,l)?new t({length:_,numberOfChannels:u,sampleRate:p}):i.createBuffer(u,_,p);if(g.numberOfChannels===0)throw n();return typeof g.copyFromChannel!="function"?(o(g),wrapAudioBufferGetChannelDataMethod(g)):r(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(g))||c(g),s.add(g),g}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===Fn.prototype||s.has(m)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=s=>ACTIVE_AUDIO_NODE_STORE.has(s),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,m){const _=l(f),u={...DEFAULT_OPTIONS$h,...m},p=a(_,u),g=o(_),y=g?r():null;super(f,!1,p,y),this._audioBufferSourceNodeRenderer=y,this._isBufferNullified=!1,this._isBufferSet=u.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=n(this,g,p.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw t();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?c(this,f):null;this._nativeAudioBufferSourceNode.onended=m;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===m?f:_}get playbackRate(){return this._playbackRate}start(f=0,m=0,_){if(this._nativeAudioBufferSourceNode.start(f,m,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[f,m]:[f,m,_]),this.context.state!=="closed"){setInternalStateToActive(this);const u=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",u),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",u)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},createAudioBufferSourceNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap;let o=null,c=null;const i=async(f,m)=>{let _=n(f);const u=isOwnedByContext(_,m);if(!u){const p={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=r(m,p),o!==null&&_.start(...o),c!==null&&_.stop(c)}return l.set(m,_),u?await s(m,f.playbackRate,_.playbackRate):await t(m,f.playbackRate,_.playbackRate),await a(f,m,_),_};return{set start(f){o=f},set stop(f){c=f},render(f,m){const _=l.get(m);return _!==void 0?Promise.resolve(_):i(f,m)}}},isAudioBufferSourceNode=s=>"playbackRate"in s,isBiquadFilterNode=s=>"frequency"in s&&"gain"in s,isConstantSourceNode=s=>"offset"in s,isGainNode=s=>!("frequency"in s)&&"gain"in s,isOscillatorNode=s=>"detune"in s&&"frequency"in s,isStereoPannerNode=s=>"pan"in s,getAudioNodeConnections=s=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,s),getAudioParamConnections=s=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,s),deactivateActiveAudioNodeInputConnections=(s,r)=>{const{activeInputs:n}=getAudioNodeConnections(s);n.forEach(a=>a.forEach(([l])=>{r.includes(s)||deactivateActiveAudioNodeInputConnections(l,[...r,s])}));const t=isAudioBufferSourceNode(s)?[s.playbackRate]:isAudioWorkletNode(s)?Array.from(s.parameters.values()):isBiquadFilterNode(s)?[s.Q,s.detune,s.frequency,s.gain]:isConstantSourceNode(s)?[s.offset]:isGainNode(s)?[s.gain]:isOscillatorNode(s)?[s.detune,s.frequency]:isStereoPannerNode(s)?[s.pan]:[];for(const a of t){const l=getAudioParamConnections(a);l!==void 0&&l.activeInputs.forEach(([o])=>deactivateActiveAudioNodeInputConnections(o,r))}isActiveAudioNode(s)&&setInternalStateToPassive(s)},deactivateAudioGraph=s=>{deactivateActiveAudioNodeInputConnections(s.destination,[])},isValidLatencyHint=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),createAudioContextConstructor=(s,r,n,t,a,l,o,c,i)=>class extends s{constructor(m={}){if(i===null)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new i(m)}catch(g){throw g.code===12&&g.message==="sampleRate is not in range"?n():g}if(_===null)throw t();if(!isValidLatencyHint(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&_.sampleRate!==m.sampleRate)throw n();super(_,2);const{latencyHint:u}=m,{sampleRate:p}=_;if(this._baseLatency=typeof _.baseLatency=="number"?_.baseLatency:u==="balanced"?512/p:u==="interactive"||u===void 0?256/p:u==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(u*p/128)))*128/p,this._nativeAudioContext=_,i.name==="webkitAudioContext"?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,_.state==="running"){this._state="suspended";const g=()=>{this._state==="suspended"&&(this._state=null),_.removeEventListener("statechange",g)};_.addEventListener("statechange",g)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw r()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(m){return new a(this,{mediaElement:m})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(m){return new o(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new c(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,_)=>{const u=()=>{this._nativeAudioContext.removeEventListener("statechange",u),this._nativeAudioContext.state==="running"?m():this.resume().then(m,_)};this._nativeAudioContext.addEventListener("statechange",u)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?r():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?r():m})}},createAudioDestinationNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,m){const _=l(f),u=o(_),p=a(_,m,u),g=u?r(c):null;super(f,!1,p,g),this._isNodeOfNativeOfflineAudioContext=u,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw t();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw t();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=s=>{const r=new WeakMap,n=async(t,a)=>{const l=a.destination;return r.set(a,l),await s(t,a,l),l};return{render(t,a){const l=r.get(a);return l!==void 0?Promise.resolve(l):n(t,a)}}},createAudioListenerFactory=(s,r,n,t,a,l,o,c)=>(i,f)=>{const m=f.listener,_=()=>{const T=new Float32Array(1),j=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=o(f);let C=!1,I=[0,0,-1,0,1,0],F=[0,0,0];const N=()=>{if(C)return;C=!0;const M=t(f,256,9,0);M.onaudioprocess=({inputBuffer:D})=>{const X=[l(D,T,0),l(D,T,1),l(D,T,2),l(D,T,3),l(D,T,4),l(D,T,5)];X.some((G,K)=>G!==I[K])&&(m.setOrientation(...X),I=X);const O=[l(D,T,6),l(D,T,7),l(D,T,8)];O.some((G,K)=>G!==F[K])&&(m.setPosition(...O),F=O)},j.connect(M)},z=M=>D=>{D!==I[M]&&(I[M]=D,m.setOrientation(...I))},R=M=>D=>{D!==F[M]&&(F[M]=D,m.setPosition(...F))},q=(M,D,X)=>{const O=n(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D});O.connect(j,0,M),O.start(),Object.defineProperty(O.offset,"defaultValue",{get(){return D}});const G=s({context:i},A,O.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return c(G,"value",K=>()=>K.call(G),K=>Z=>{try{K.call(G,Z)}catch(U){if(U.code!==9)throw U}N(),A&&X(Z)}),G.cancelAndHoldAtTime=(K=>A?()=>{throw a()}:(...Z)=>{const U=K.apply(G,Z);return N(),U})(G.cancelAndHoldAtTime),G.cancelScheduledValues=(K=>A?()=>{throw a()}:(...Z)=>{const U=K.apply(G,Z);return N(),U})(G.cancelScheduledValues),G.exponentialRampToValueAtTime=(K=>A?()=>{throw a()}:(...Z)=>{const U=K.apply(G,Z);return N(),U})(G.exponentialRampToValueAtTime),G.linearRampToValueAtTime=(K=>A?()=>{throw a()}:(...Z)=>{const U=K.apply(G,Z);return N(),U})(G.linearRampToValueAtTime),G.setTargetAtTime=(K=>A?()=>{throw a()}:(...Z)=>{const U=K.apply(G,Z);return N(),U})(G.setTargetAtTime),G.setValueAtTime=(K=>A?()=>{throw a()}:(...Z)=>{const U=K.apply(G,Z);return N(),U})(G.setValueAtTime),G.setValueCurveAtTime=(K=>A?()=>{throw a()}:(...Z)=>{const U=K.apply(G,Z);return N(),U})(G.setValueCurveAtTime),G};return{forwardX:q(0,0,z(0)),forwardY:q(1,0,z(1)),forwardZ:q(2,-1,z(2)),positionX:q(6,0,R(0)),positionY:q(7,0,R(1)),positionZ:q(8,0,R(2)),upX:q(3,0,z(3)),upY:q(4,1,z(4)),upZ:q(5,0,z(5))}},{forwardX:u,forwardY:p,forwardZ:g,positionX:y,positionY:S,positionZ:b,upX:E,upY:x,upZ:k}=m.forwardX===void 0?_():m;return{get forwardX(){return u},get forwardY(){return p},get forwardZ(){return g},get positionX(){return y},get positionY(){return S},get positionZ(){return b},get upX(){return E},get upY(){return x},get upZ(){return k}}},isAudioNode$1=s=>"context"in s,isAudioNodeOutputConnection=s=>isAudioNode$1(s[0]),insertElementInSet=(s,r,n,t)=>{for(const a of s)if(n(a)){if(t)return!1;throw Error("The set contains at least one similar element.")}return s.add(r),!0},addActiveInputConnectionToAudioParam=(s,r,[n,t],a)=>{insertElementInSet(s,[r,n,t],l=>l[0]===r&&l[1]===n,a)},addPassiveInputConnectionToAudioParam=(s,[r,n,t],a)=>{const l=s.get(r);l===void 0?s.set(r,new Set([[n,t]])):insertElementInSet(l,[n,t],o=>o[0]===n,a)},isNativeAudioNodeFaker=s=>"inputs"in s,connectNativeAudioNodeToNativeAudioNode=(s,r,n,t)=>{if(isNativeAudioNodeFaker(r)){const a=r.inputs[t];return s.connect(a,n,0),[a,n,0]}return s.connect(r,n,t),[r,n,t]},deleteActiveInputConnection=(s,r,n)=>{for(const t of s)if(t[0]===r&&t[1]===n)return s.delete(t),t;return null},deleteActiveInputConnectionToAudioParam=(s,r,n)=>pickElementFromSet(s,t=>t[0]===r&&t[1]===n),deleteEventListenerOfAudioNode=(s,r)=>{if(!getEventListenersOfAudioNode(s).delete(r))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(s,r,n)=>{const t=getValueForKey(s,r),a=pickElementFromSet(t,l=>l[0]===n);return t.size===0&&s.delete(r),a},disconnectNativeAudioNodeFromNativeAudioNode=(s,r,n,t)=>{isNativeAudioNodeFaker(r)?s.disconnect(r.inputs[t],n,0):s.disconnect(r,n,t)},getNativeAudioNode=s=>getValueForKey(AUDIO_NODE_STORE,s),getNativeAudioParam=s=>getValueForKey(AUDIO_PARAM_STORE,s),isPartOfACycle=s=>CYCLE_COUNTERS.has(s),isPassiveAudioNode=s=>!ACTIVE_AUDIO_NODE_STORE.has(s),testAudioNodeDisconnectMethodSupport=(s,r)=>new Promise(n=>{if(r!==null)n(!0);else{const t=s.createScriptProcessor(256,1,1),a=s.createGain(),l=s.createBuffer(1,2,44100),o=l.getChannelData(0);o[0]=1,o[1]=1;const c=s.createBufferSource();c.buffer=l,c.loop=!0,c.connect(t).connect(s.destination),c.connect(a),c.disconnect(a),t.onaudioprocess=i=>{const f=i.inputBuffer.getChannelData(0);Array.prototype.some.call(f,m=>m===1)?n(!0):n(!1),c.stop(),t.onaudioprocess=null,c.disconnect(t),t.disconnect(s.destination)},c.start()}}),visitEachAudioNodeOnce=(s,r)=>{const n=new Map;for(const t of s)for(const a of t){const l=n.get(a);n.set(a,l===void 0?1:l+1)}n.forEach((t,a)=>r(a,t))},isNativeAudioNode$1=s=>"context"in s,wrapAudioNodeDisconnectMethod=s=>{const r=new Map;s.connect=(n=>(t,a=0,l=0)=>{const o=isNativeAudioNode$1(t)?n(t,a,l):n(t,a),c=r.get(t);return c===void 0?r.set(t,[{input:l,output:a}]):c.every(i=>i.input!==l||i.output!==a)&&c.push({input:l,output:a}),o})(s.connect.bind(s)),s.disconnect=(n=>(t,a,l)=>{if(n.apply(s),t===void 0)r.clear();else if(typeof t=="number")for(const[o,c]of r){const i=c.filter(f=>f.output!==t);i.length===0?r.delete(o):r.set(o,i)}else if(r.has(t))if(a===void 0)r.delete(t);else{const o=r.get(t);if(o!==void 0){const c=o.filter(i=>i.output!==a&&(i.input!==l||l===void 0));c.length===0?r.delete(t):r.set(t,c)}}for(const[o,c]of r)c.forEach(i=>{isNativeAudioNode$1(o)?s.connect(o,i.output,i.input):s.connect(o,i.output)})})(s.disconnect)},addConnectionToAudioParamOfAudioContext=(s,r,n,t)=>{const{activeInputs:a,passiveInputs:l}=getAudioParamConnections(r),{outputs:o}=getAudioNodeConnections(s),c=getEventListenersOfAudioNode(s),i=f=>{const m=getNativeAudioNode(s),_=getNativeAudioParam(r);if(f){const u=deletePassiveInputConnectionToAudioParam(l,s,n);addActiveInputConnectionToAudioParam(a,s,u,!1),!t&&!isPartOfACycle(s)&&m.connect(_,n)}else{const u=deleteActiveInputConnectionToAudioParam(a,s,n);addPassiveInputConnectionToAudioParam(l,u,!1),!t&&!isPartOfACycle(s)&&m.disconnect(_,n)}};return insertElementInSet(o,[r,n],f=>f[0]===r&&f[1]===n,!0)?(c.add(i),isActiveAudioNode(s)?addActiveInputConnectionToAudioParam(a,s,[n,i],!0):addPassiveInputConnectionToAudioParam(l,[s,n,i],!0),!0):!1},deleteInputConnectionOfAudioNode=(s,r,n,t)=>{const{activeInputs:a,passiveInputs:l}=getAudioNodeConnections(r),o=deleteActiveInputConnection(a[t],s,n);return o===null?[deletePassiveInputConnectionToAudioNode(l,s,n,t)[2],!1]:[o[2],!0]},deleteInputConnectionOfAudioParam=(s,r,n)=>{const{activeInputs:t,passiveInputs:a}=getAudioParamConnections(r),l=deleteActiveInputConnection(t,s,n);return l===null?[deletePassiveInputConnectionToAudioParam(a,s,n)[1],!1]:[l[2],!0]},deleteInputsOfAudioNode=(s,r,n,t,a)=>{const[l,o]=deleteInputConnectionOfAudioNode(s,n,t,a);if(l!==null&&(deleteEventListenerOfAudioNode(s,l),o&&!r&&!isPartOfACycle(s)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(s),getNativeAudioNode(n),t,a)),isActiveAudioNode(n)){const{activeInputs:c}=getAudioNodeConnections(n);setInternalStateToPassiveWhenNecessary(n,c)}},deleteInputsOfAudioParam=(s,r,n,t)=>{const[a,l]=deleteInputConnectionOfAudioParam(s,n,t);a!==null&&(deleteEventListenerOfAudioNode(s,a),l&&!r&&!isPartOfACycle(s)&&getNativeAudioNode(s).disconnect(getNativeAudioParam(n),t))},deleteAnyConnection=(s,r)=>{const n=getAudioNodeConnections(s),t=[];for(const a of n.outputs)isAudioNodeOutputConnection(a)?deleteInputsOfAudioNode(s,r,...a):deleteInputsOfAudioParam(s,r,...a),t.push(a[0]);return n.outputs.clear(),t},deleteConnectionAtOutput=(s,r,n)=>{const t=getAudioNodeConnections(s),a=[];for(const l of t.outputs)l[1]===n&&(isAudioNodeOutputConnection(l)?deleteInputsOfAudioNode(s,r,...l):deleteInputsOfAudioParam(s,r,...l),a.push(l[0]),t.outputs.delete(l));return a},deleteConnectionToDestination=(s,r,n,t,a)=>{const l=getAudioNodeConnections(s);return Array.from(l.outputs).filter(o=>o[0]===n&&(t===void 0||o[1]===t)&&(a===void 0||o[2]===a)).map(o=>(isAudioNodeOutputConnection(o)?deleteInputsOfAudioNode(s,r,...o):deleteInputsOfAudioParam(s,r,...o),l.outputs.delete(o),o[0]))},createAudioNodeConstructor=(s,r,n,t,a,l,o,c,i,f,m,_,u,p,g,y)=>class extends f{constructor(b,E,x,k){super(x),this._context=b,this._nativeAudioNode=x;const T=m(b);_(T)&&n(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(T,y))!==!0&&wrapAudioNodeDisconnectMethod(x),AUDIO_NODE_STORE.set(this,x),EVENT_LISTENERS.set(this,new Set),b.state!=="closed"&&E&&setInternalStateToActive(this),s(this,k,x)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(b){this._nativeAudioNode.channelCount=b}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(b){this._nativeAudioNode.channelCountMode=b}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(b){this._nativeAudioNode.channelInterpretation=b}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(b,E=0,x=0){if(E<0||E>=this._nativeAudioNode.numberOfOutputs)throw a();const k=m(this._context),T=g(k);if(u(b)||p(b))throw l();if(isAudioNode$1(b)){const C=getNativeAudioNode(b);try{const F=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,C,E,x),N=isPassiveAudioNode(this);(T||N)&&this._nativeAudioNode.disconnect(...F),this.context.state!=="closed"&&!N&&isPassiveAudioNode(b)&&setInternalStateToActive(b)}catch(F){throw F.code===12?l():F}if(r(this,b,E,x,T)){const F=i([this],b);visitEachAudioNodeOnce(F,t(T))}return b}const j=getNativeAudioParam(b);if(j.name==="playbackRate"&&j.maxValue===1024)throw o();try{this._nativeAudioNode.connect(j,E),(T||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(j,E)}catch(C){throw C.code===12?l():C}if(addConnectionToAudioParamOfAudioContext(this,b,E,T)){const C=i([this],b);visitEachAudioNodeOnce(C,t(T))}}disconnect(b,E,x){let k;const T=m(this._context),j=g(T);if(b===void 0)k=deleteAnyConnection(this,j);else if(typeof b=="number"){if(b<0||b>=this.numberOfOutputs)throw a();k=deleteConnectionAtOutput(this,j,b)}else{if(E!==void 0&&(E<0||E>=this.numberOfOutputs)||isAudioNode$1(b)&&x!==void 0&&(x<0||x>=b.numberOfInputs))throw a();if(k=deleteConnectionToDestination(this,j,b,E,x),k.length===0)throw l()}for(const A of k){const C=i([this],A);visitEachAudioNodeOnce(C,c)}}},createAudioParamFactory=(s,r,n,t,a,l,o,c,i,f,m,_,u)=>(p,g,y,S=null,b=null)=>{const E=y.value,x=new AutomationEventList(E),k=g?t(x):null,T={get defaultValue(){return E},get maxValue(){return S===null?y.maxValue:S},get minValue(){return b===null?y.minValue:b},get value(){return y.value},set value(j){y.value=j,T.setValueAtTime(j,p.context.currentTime)},cancelAndHoldAtTime(j){if(typeof y.cancelAndHoldAtTime=="function")k===null&&x.flush(p.context.currentTime),x.add(a(j)),y.cancelAndHoldAtTime(j);else{const A=Array.from(x).pop();k===null&&x.flush(p.context.currentTime),x.add(a(j));const C=Array.from(x).pop();y.cancelScheduledValues(j),A!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?y.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?y.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&y.setValueCurveAtTime(C.values,C.startTime,C.duration))}return T},cancelScheduledValues(j){return k===null&&x.flush(p.context.currentTime),x.add(l(j)),y.cancelScheduledValues(j),T},exponentialRampToValueAtTime(j,A){if(j===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;const C=p.context.currentTime;return k===null&&x.flush(C),Array.from(x).length===0&&(x.add(f(E,C)),y.setValueAtTime(E,C)),x.add(o(j,A)),y.exponentialRampToValueAtTime(j,A),T},linearRampToValueAtTime(j,A){const C=p.context.currentTime;return k===null&&x.flush(C),Array.from(x).length===0&&(x.add(f(E,C)),y.setValueAtTime(E,C)),x.add(c(j,A)),y.linearRampToValueAtTime(j,A),T},setTargetAtTime(j,A,C){return k===null&&x.flush(p.context.currentTime),x.add(i(j,A,C)),y.setTargetAtTime(j,A,C),T},setValueAtTime(j,A){return k===null&&x.flush(p.context.currentTime),x.add(f(j,A)),y.setValueAtTime(j,A),T},setValueCurveAtTime(j,A,C){const I=j instanceof Float32Array?j:new Float32Array(j);if(_!==null&&_.name==="webkitAudioContext"){const F=A+C,N=p.context.sampleRate,z=Math.ceil(A*N),R=Math.floor(F*N),q=R-z,M=new Float32Array(q);for(let X=0;X<q;X+=1){const O=(I.length-1)/C*((z+X)/N-A),G=Math.floor(O),K=Math.ceil(O);M[X]=G===K?I[G]:(1-(O-G))*I[G]+(1-(K-O))*I[K]}k===null&&x.flush(p.context.currentTime),x.add(m(M,A,C)),y.setValueCurveAtTime(M,A,C);const D=R/N;D<F&&u(T,M[M.length-1],D),u(T,I[I.length-1],F)}else k===null&&x.flush(p.context.currentTime),x.add(m(I,A,C)),y.setValueCurveAtTime(I,A,C);return T}};return n.set(T,y),r.set(T,p),s(T,k),T},createAudioParamRenderer=s=>({replay(r){for(const n of s)if(n.type==="exponentialRampToValue"){const{endTime:t,value:a}=n;r.exponentialRampToValueAtTime(a,t)}else if(n.type==="linearRampToValue"){const{endTime:t,value:a}=n;r.linearRampToValueAtTime(a,t)}else if(n.type==="setTarget"){const{startTime:t,target:a,timeConstant:l}=n;r.setTargetAtTime(a,t,l)}else if(n.type==="setValue"){const{startTime:t,value:a}=n;r.setValueAtTime(a,t)}else if(n.type==="setValueCurve"){const{duration:t,startTime:a,values:l}=n;r.setValueCurveAtTime(l,a,t)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(r){this._map=new Map(r)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(r,n=null){return this._map.forEach((t,a)=>r.call(n,t,a,this))}get(r){return this._map.get(r)}has(r){return this._map.has(r)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(s,r,n,t,a,l,o,c,i,f,m,_,u,p)=>class extends r{constructor(y,S,b){var E;const x=c(y),k=i(x),T=m({...DEFAULT_OPTIONS$g,...b});u(T);const j=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(x),A=j==null?void 0:j.get(S),C=k||x.state!=="closed"?x:(E=o(x))!==null&&E!==void 0?E:x,I=a(C,k?null:y.baseLatency,f,S,A,T),F=k?t(S,T,A):null;super(y,!0,I,F);const N=[];I.parameters.forEach((R,q)=>{const M=n(this,k,R);N.push([q,M])}),this._nativeAudioWorkletNode=I,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(N),k&&s(x,this);const{activeInputs:z}=l(this);_(I,z)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(y){const S=typeof y=="function"?p(this,y):null;this._nativeAudioWorkletNode.onprocessorerror=S;const b=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=b!==null&&b===S?y:b}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(s,r,n,t,a){if(typeof s.copyFromChannel=="function")r[n].byteLength===0&&(r[n]=new Float32Array(128)),s.copyFromChannel(r[n],t,a);else{const l=s.getChannelData(t);if(r[n].byteLength===0)r[n]=l.slice(a,a+128);else{const o=new Float32Array(l.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);r[n].set(o)}}}const copyToChannel=(s,r,n,t,a)=>{typeof s.copyToChannel=="function"?r[n].byteLength!==0&&s.copyToChannel(r[n],t,a):r[n].byteLength!==0&&s.getChannelData(t).set(r[n],a)},createNestedArrays=(s,r)=>{const n=[];for(let t=0;t<s;t+=1){const a=[],l=typeof r=="number"?r:r[t];for(let o=0;o<l;o+=1)a.push(new Float32Array(128));n.push(a)}return n},getAudioWorkletProcessor=(s,r)=>{const n=getValueForKey(NODE_TO_PROCESSOR_MAPS,s),t=getNativeAudioNode(r);return getValueForKey(n,t)},processBuffer=async(s,r,n,t,a,l,o)=>{const c=r===null?Math.ceil(s.context.length/128)*128:r.length,i=t.channelCount*t.numberOfInputs,f=a.reduce((S,b)=>S+b,0),m=f===0?null:n.createBuffer(f,c,n.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const _=getAudioNodeConnections(s),u=await getAudioWorkletProcessor(n,s),p=createNestedArrays(t.numberOfInputs,t.channelCount),g=createNestedArrays(t.numberOfOutputs,a),y=Array.from(s.parameters.keys()).reduce((S,b)=>({...S,[b]:new Float32Array(128)}),{});for(let S=0;S<c;S+=128){if(t.numberOfInputs>0&&r!==null)for(let b=0;b<t.numberOfInputs;b+=1)for(let E=0;E<t.channelCount;E+=1)copyFromChannel(r,p[b],E,E,S);l.parameterDescriptors!==void 0&&r!==null&&l.parameterDescriptors.forEach(({name:b},E)=>{copyFromChannel(r,y,b,i+E,S)});for(let b=0;b<t.numberOfInputs;b+=1)for(let E=0;E<a[b];E+=1)g[b][E].byteLength===0&&(g[b][E]=new Float32Array(128));try{const b=p.map((x,k)=>_.activeInputs[k].size===0?[]:x),E=o(S/n.sampleRate,n.sampleRate,()=>u.process(b,g,y));if(m!==null)for(let x=0,k=0;x<t.numberOfOutputs;x+=1){for(let T=0;T<a[x];T+=1)copyToChannel(m,g[x],T,k+T,S);k+=a[x]}if(!E)break}catch(b){s.dispatchEvent(new ErrorEvent("processorerror",{colno:b.colno,filename:b.filename,lineno:b.lineno,message:b.message}));break}}return m},createAudioWorkletNodeRendererFactory=(s,r,n,t,a,l,o,c,i,f,m,_,u,p,g,y)=>(S,b,E)=>{const x=new WeakMap;let k=null;const T=async(j,A)=>{let C=m(j),I=null;const F=isOwnedByContext(C,A),N=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(_===null){const z=N.reduce((D,X)=>D+X,0),R=a(A,{channelCount:Math.max(1,z),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,z)}),q=[];for(let D=0;D<j.numberOfOutputs;D+=1)q.push(t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[D]}));const M=o(A,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1});M.connect=r.bind(null,q),M.disconnect=i.bind(null,q),I=[R,q,M]}else F||(C=new _(A,S));if(x.set(A,I===null?C:I[2]),I!==null){if(k===null){if(E===void 0)throw new Error("Missing the processor constructor.");if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const X=j.channelCount*j.numberOfInputs,O=E.parameterDescriptors===void 0?0:E.parameterDescriptors.length,G=X+O;k=processBuffer(j,G===0?null:await(async()=>{const Z=new u(G,Math.ceil(j.context.length/128)*128,A.sampleRate),U=[],V=[];for(let J=0;J<b.numberOfInputs;J+=1)U.push(o(Z,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),V.push(a(Z,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const L=await Promise.all(Array.from(j.parameters.values()).map(async J=>{const ne=l(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:J.value});return await p(Z,J,ne.offset),ne})),H=t(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,X+O)});for(let J=0;J<b.numberOfInputs;J+=1){U[J].connect(V[J]);for(let ne=0;ne<b.channelCount;ne+=1)V[J].connect(H,ne,J*b.channelCount+ne)}for(const[J,ne]of L.entries())ne.connect(H,0,X+J),ne.start(0);return H.connect(Z.destination),await Promise.all(U.map(J=>g(j,Z,J))),y(Z)})(),A,b,N,E,f)}const z=await k,R=n(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[q,M,D]=I;z!==null&&(R.buffer=z,R.start(0)),R.connect(q);for(let X=0,O=0;X<j.numberOfOutputs;X+=1){const G=M[X];for(let K=0;K<N[X];K+=1)q.connect(G,O+K,K);O+=N[X]}return D}if(F)for(const[z,R]of j.parameters.entries())await s(A,R,C.parameters.get(z));else for(const[z,R]of j.parameters.entries())await p(A,R,C.parameters.get(z));return await g(j,A,C),C};return{render(j,A){c(A,j);const C=x.get(A);return C!==void 0?Promise.resolve(C):T(j,A)}}},createBaseAudioContextConstructor=(s,r,n,t,a,l,o,c,i,f,m,_,u,p,g,y,S,b,E,x)=>class extends g{constructor(T,j){super(T,j),this._nativeContext=T,this._audioWorklet=s===void 0?void 0:{addModule:(A,C)=>s(this,A,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new r(this)}createBiquadFilter(){return new a(this)}createBuffer(T,j,A){return new n({length:j,numberOfChannels:T,sampleRate:A})}createBufferSource(){return new t(this)}createChannelMerger(T=6){return new l(this,{numberOfInputs:T})}createChannelSplitter(T=6){return new o(this,{numberOfOutputs:T})}createConstantSource(){return new c(this)}createConvolver(){return new i(this)}createDelay(T=1){return new m(this,{maxDelayTime:T})}createDynamicsCompressor(){return new _(this)}createGain(){return new u(this)}createIIRFilter(T,j){return new p(this,{feedback:j,feedforward:T})}createOscillator(){return new y(this)}createPanner(){return new S(this)}createPeriodicWave(T,j,A={disableNormalization:!1}){return new b(this,{...A,imag:j,real:T})}createStereoPanner(){return new E(this)}createWaveShaper(){return new x(this)}decodeAudioData(T,j,A){return f(this._nativeContext,T).then(C=>(typeof j=="function"&&j(C),C),C=>{throw typeof A=="function"&&A(C),C})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,m){const _=l(f),u={...DEFAULT_OPTIONS$f,...m},p=a(_,u),g=o(_),y=g?n():null;super(f,!1,p,y),this._Q=r(this,g,p.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=r(this,g,p.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=r(this,g,p.frequency,f.sampleRate/2,0),this._gain=r(this,g,p.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=p,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,m,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,m,_)}catch(u){throw u.code===11?t():u}if(f.length!==m.length||m.length!==_.length)throw t()}},createBiquadFilterNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const m=isOwnedByContext(f,i);if(!m){const _={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=r(i,_)}return l.set(i,f),m?(await s(i,c.Q,f.Q),await s(i,c.detune,f.detune),await s(i,c.frequency,f.frequency),await s(i,c.gain,f.gain)):(await t(i,c.Q,f.Q),await t(i,c.detune,f.detune),await t(i,c.frequency,f.frequency),await t(i,c.gain,f.gain)),await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createCacheTestResult=(s,r)=>(n,t)=>{const a=r.get(n);if(a!==void 0)return a;const l=s.get(n);if(l!==void 0)return l;try{const o=t();return o instanceof Promise?(s.set(n,o),o.catch(()=>!1).then(c=>(s.delete(n),r.set(n,c),c))):(r.set(n,o),o)}catch{return r.set(n,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(s,r,n,t,a)=>class extends s{constructor(o,c){const i=t(o),f={...DEFAULT_OPTIONS$e,...c},m=n(i,f),_=a(i)?r():null;super(o,!1,m,_)}},createChannelMergerNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=s(o,f)}return t.set(o,c),await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=t(c),m=l({...DEFAULT_OPTIONS$d,...i}),_=n(f,m),u=a(f)?r():null;super(c,!1,_,u)}},createChannelSplitterNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=s(o,f)}return t.set(o,c),await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},createConnectAudioParam=s=>(r,n,t)=>s(n,r,t),createConnectMultipleOutputs=s=>(r,n,t=0,a=0)=>{const l=r[t];if(l===void 0)throw s();return isNativeAudioNode$1(n)?l.connect(n,0,a):l.connect(n,0)},createConnectedNativeAudioBufferSourceNodeFactory=s=>(r,n)=>{const t=s(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=r.createBuffer(1,2,44100);return t.buffer=a,t.loop=!0,t.connect(n),t.start(),()=>{t.stop(),t.disconnect(n)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const m=a(i),_={...DEFAULT_OPTIONS$c,...f},u=t(m,_),p=l(m),g=p?n():null;super(i,!1,u,g),this._constantSourceNodeRenderer=g,this._nativeConstantSourceNode=u,this._offset=r(this,p,u.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(i){const f=typeof i=="function"?o(this,i):null;this._nativeConstantSourceNode.onended=f;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===f?i:m}start(i=0){if(this._nativeConstantSourceNode.start(i),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=i),this.context.state!=="closed"){setInternalStateToActive(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(i=0){this._nativeConstantSourceNode.stop(i),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=i)}},createConstantSourceNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap;let o=null,c=null;const i=async(f,m)=>{let _=n(f);const u=isOwnedByContext(_,m);if(!u){const p={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=r(m,p),o!==null&&_.start(o),c!==null&&_.stop(c)}return l.set(m,_),u?await s(m,f.offset,_.offset):await t(m,f.offset,_.offset),await a(f,m,_),_};return{set start(f){o=f},set stop(f){c=f},render(f,m){const _=l.get(m);return _!==void 0?Promise.resolve(_):i(f,m)}}},createConvertNumberToUnsignedLong=s=>r=>(s[0]=r,s[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=t(c),m={...DEFAULT_OPTIONS$b,...i},_=n(f,m),p=a(f)?r():null;super(c,!1,_,p),this._isBufferNullified=!1,this._nativeConvolverNode=_,m.buffer!==null&&l(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const i=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=i.createBuffer(1,1,i.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},createConvolverNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=s(o,f)}return t.set(o,c),isNativeAudioNodeFaker(c)?await n(l,o,c.inputs[0]):await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},createCreateNativeOfflineAudioContext=(s,r)=>(n,t,a)=>{if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new r(n,t,a)}catch(l){throw l.name==="SyntaxError"?s():l}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=s=>{const{port1:r,port2:n}=new MessageChannel;return new Promise(t=>{const a=()=>{n.onmessage=null,r.close(),n.close(),t()};n.onmessage=()=>a();try{r.postMessage(s,[s])}catch{}finally{a()}})},createDecodeAudioData=(s,r,n,t,a,l,o,c,i,f,m)=>(_,u)=>{const p=o(_)?_:l(_);if(a.has(u)){const g=n();return Promise.reject(g)}try{a.add(u)}catch{}return r(i,()=>i(p))?p.decodeAudioData(u).then(g=>(detachArrayBuffer(u).catch(()=>{}),r(c,()=>c(g))||m(g),s.add(g),g)):new Promise((g,y)=>{const S=async()=>{try{await detachArrayBuffer(u)}catch{}},b=E=>{y(E),S()};try{p.decodeAudioData(u,E=>{typeof E.copyFromChannel!="function"&&(f(E),wrapAudioBufferGetChannelDataMethod(E)),s.add(E),S().then(()=>g(E))},E=>{b(E===null?t():E)})}catch(E){b(E)}})},createDecrementCycleCounter=(s,r,n,t,a,l,o,c)=>(i,f)=>{const m=r.get(i);if(m===void 0)throw new Error("Missing the expected cycle count.");const _=l(i.context),u=c(_);if(m===f){if(r.delete(i),!u&&o(i)){const p=t(i),{outputs:g}=n(i);for(const y of g)if(isAudioNodeOutputConnection(y)){const S=t(y[0]);s(p,S,y[1],y[2])}else{const S=a(y[0]);p.connect(S,y[1])}}}else r.set(i,m-f)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const m=a(i),_={...DEFAULT_OPTIONS$a,...f},u=t(m,_),p=l(m),g=p?n(_.maxDelayTime):null;super(i,!1,u,g),this._delayTime=r(this,p,u.delayTime),o(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(s,r,n,t,a)=>l=>{const o=new WeakMap,c=async(i,f)=>{let m=n(i);const _=isOwnedByContext(m,f);if(!_){const u={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:l};m=r(f,u)}return o.set(f,m),_?await s(f,i.delayTime,m.delayTime):await t(f,i.delayTime,m.delayTime),await a(i,f,m),m};return{render(i,f){const m=o.get(f);return m!==void 0?Promise.resolve(m):c(i,f)}}},createDeleteActiveInputConnectionToAudioNode=s=>(r,n,t,a)=>s(r[a],l=>l[0]===n&&l[1]===t),createDeleteUnrenderedAudioWorkletNode=s=>(r,n)=>{s(r).delete(n)},isDelayNode=s=>"delayTime"in s,createDetectCycles=(s,r,n)=>function t(a,l){const o=isAudioNode$1(l)?l:n(s,l);if(isDelayNode(o))return[];if(a[0]===o)return[a];if(a.includes(o))return[];const{outputs:c}=r(o);return Array.from(c).map(i=>t([...a,o],i[0])).reduce((i,f)=>i.concat(f),[])},getOutputAudioNodeAtIndex=(s,r,n)=>{const t=r[n];if(t===void 0)throw s();return t},createDisconnectMultipleOutputs=s=>(r,n=void 0,t=void 0,a=0)=>n===void 0?r.forEach(l=>l.disconnect()):typeof n=="number"?getOutputAudioNodeAtIndex(s,r,n).disconnect():isNativeAudioNode$1(n)?t===void 0?r.forEach(l=>l.disconnect(n)):a===void 0?getOutputAudioNodeAtIndex(s,r,t).disconnect(n,0):getOutputAudioNodeAtIndex(s,r,t).disconnect(n,0,a):t===void 0?r.forEach(l=>l.disconnect(n)):getOutputAudioNodeAtIndex(s,r,t).disconnect(n,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(s,r,n,t,a,l,o,c)=>class extends s{constructor(f,m){const _=l(f),u={...DEFAULT_OPTIONS$9,...m},p=t(_,u),g=o(_),y=g?n():null;super(f,!1,p,y),this._attack=r(this,g,p.attack),this._knee=r(this,g,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=r(this,g,p.ratio),this._release=r(this,g,p.release),this._threshold=r(this,g,p.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=m,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const m=isOwnedByContext(f,i);if(!m){const _={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=r(i,_)}return l.set(i,f),m?(await s(i,c.attack,f.attack),await s(i,c.knee,f.knee),await s(i,c.ratio,f.ratio),await s(i,c.release,f.release),await s(i,c.threshold,f.threshold)):(await t(i,c.attack,f.attack),await t(i,c.knee,f.knee),await t(i,c.ratio,f.ratio),await t(i,c.release,f.release),await t(i,c.threshold,f.threshold)),await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=s=>r=>new Promise((n,t)=>{if(s===null){t(new SyntaxError);return}const a=s.document.head;if(a===null)t(new SyntaxError);else{const l=s.document.createElement("script"),o=new Blob([r],{type:"application/javascript"}),c=URL.createObjectURL(o),i=s.onerror,f=()=>{s.onerror=i,URL.revokeObjectURL(c)};s.onerror=(m,_,u,p,g)=>{if(_===c||_===s.location.href&&u===1&&p===1)return f(),t(g),!1;if(i!==null)return i(m,_,u,p,g)},l.onerror=()=>{f(),t(new SyntaxError)},l.onload=()=>{f(),n()},l.src=c,l.type="module",a.appendChild(l)}}),createEventTargetConstructor=s=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,t,a){if(t!==null){let l=this._listeners.get(t);l===void 0&&(l=s(this,t),typeof t=="function"&&this._listeners.set(t,l)),this._nativeEventTarget.addEventListener(n,l,a)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,t,a){const l=t===null?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(n,l===void 0?null:l,a)}},createExposeCurrentFrameAndCurrentTime=s=>(r,n,t)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(r*n)}},currentTime:{configurable:!0,get(){return r}}});try{return t()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},createFetchSource=s=>async r=>{try{const n=await fetch(r);if(n.ok)return[await n.text(),n.url]}catch{}throw s()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=a(c),m={...DEFAULT_OPTIONS$8,...i},_=t(f,m),u=l(f),p=u?n():null;super(c,!1,_,p),this._gain=r(this,u,_.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const m=isOwnedByContext(f,i);if(!m){const _={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=r(i,_)}return l.set(i,f),m?await s(i,c.gain,f.gain):await t(i,c.gain,f.gain),await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createGetActiveAudioWorkletNodeInputs=(s,r)=>n=>r(s,n),createGetAudioNodeRenderer=s=>r=>{const n=s(r);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},createGetAudioNodeTailTime=s=>r=>{var n;return(n=s.get(r))!==null&&n!==void 0?n:0},createGetAudioParamRenderer=s=>r=>{const n=s(r);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},createGetBackupOfflineAudioContext=s=>r=>s.get(r),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=s=>r=>{const n=s.get(r);if(n===void 0)throw createInvalidStateError();return n},createGetOrCreateBackupOfflineAudioContext=(s,r)=>n=>{let t=s.get(n);if(t!==void 0)return t;if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");return t=new r(1,1,44100),s.set(n,t),t},createGetUnrenderedAudioWorkletNodes=s=>r=>{const n=s.get(r);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=s=>{s.getFrequencyResponse=(r=>(n,t,a)=>{if(n.length!==t.length||t.length!==a.length)throw createInvalidAccessError();return r.call(s,n,t,a)})(s.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=t(c),m=a(f),_={...DEFAULT_OPTIONS$7,...i},u=r(f,m?null:c.baseLatency,_),p=m?n(_.feedback,_.feedforward):null;super(c,!1,u,p),wrapIIRFilterNodeGetFrequencyResponseMethod(u),this._nativeIIRFilterNode=u,l(this,1)}getFrequencyResponse(c,i,f){return this._nativeIIRFilterNode.getFrequencyResponse(c,i,f)}},filterBuffer=(s,r,n,t,a,l,o,c,i,f,m)=>{const _=f.length;let u=c;for(let p=0;p<_;p+=1){let g=n[0]*f[p];for(let y=1;y<a;y+=1){const S=u-y&i-1;g+=n[y]*l[S],g-=s[y]*o[S]}for(let y=a;y<t;y+=1)g+=n[y]*l[u-y&i-1];for(let y=a;y<r;y+=1)g-=s[y]*o[u-y&i-1];l[u]=f[p],o[u]=g,u=u+1&i-1,m[p]=g}return u},filterFullBuffer=(s,r,n,t)=>{const a=n instanceof Float64Array?n:new Float64Array(n),l=t instanceof Float64Array?t:new Float64Array(t),o=a.length,c=l.length,i=Math.min(o,c);if(a[0]!==1){for(let g=0;g<o;g+=1)l[g]/=a[0];for(let g=1;g<c;g+=1)a[g]/=a[0]}const f=32,m=new Float32Array(f),_=new Float32Array(f),u=r.createBuffer(s.numberOfChannels,s.length,s.sampleRate),p=s.numberOfChannels;for(let g=0;g<p;g+=1){const y=s.getChannelData(g),S=u.getChannelData(g);m.fill(0),_.fill(0),filterBuffer(a,o,l,c,i,m,_,0,f,y,S)}return u},createIIRFilterNodeRendererFactory=(s,r,n,t,a)=>(l,o)=>{const c=new WeakMap;let i=null;const f=async(m,_)=>{let u=null,p=r(m);const g=isOwnedByContext(p,_);if(_.createIIRFilter===void 0?u=s(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(p=_.createIIRFilter(o,l)),c.set(_,u===null?p:u),u!==null){if(i===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const S=new n(m.context.destination.channelCount,m.context.length,_.sampleRate);i=(async()=>{await t(m,S,S.destination);const b=await a(S);return filterFullBuffer(b,_,l,o)})()}const y=await i;return u.buffer=y,u.start(0),u}return await t(m,_,p),p};return{render(m,_){const u=c.get(_);return u!==void 0?Promise.resolve(u):f(m,_)}}},createIncrementCycleCounterFactory=(s,r,n,t,a,l)=>o=>(c,i)=>{const f=s.get(c);if(f===void 0){if(!o&&l(c)){const m=t(c),{outputs:_}=n(c);for(const u of _)if(isAudioNodeOutputConnection(u)){const p=t(u[0]);r(m,p,u[1],u[2])}else{const p=a(u[0]);m.disconnect(p,u[1])}}s.set(c,i)}else s.set(c,f+i)},createIsAnyAudioContext=(s,r)=>n=>{const t=s.get(n);return r(t)||r(n)},createIsAnyAudioNode=(s,r)=>n=>s.has(n)||r(n),createIsAnyAudioParam=(s,r)=>n=>s.has(n)||r(n),createIsAnyOfflineAudioContext=(s,r)=>n=>{const t=s.get(n);return r(t)||r(n)},createIsNativeAudioContext=s=>r=>s!==null&&r instanceof s,createIsNativeAudioNode=s=>r=>s!==null&&typeof s.AudioNode=="function"&&r instanceof s.AudioNode,createIsNativeAudioParam=s=>r=>s!==null&&typeof s.AudioParam=="function"&&r instanceof s.AudioParam,createIsNativeContext=(s,r)=>n=>s(n)||r(n),createIsNativeOfflineAudioContext=s=>r=>s!==null&&r instanceof s,createIsSecureContext=s=>s!==null&&s.isSecureContext,createMediaElementAudioSourceNodeConstructor=(s,r,n,t)=>class extends s{constructor(l,o){const c=n(l),i=r(c,o);if(t(c))throw TypeError();super(l,!0,i,null),this._nativeMediaElementAudioSourceNode=i}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(s,r,n,t)=>class extends s{constructor(l,o){const c=n(l);if(t(c))throw new TypeError;const i={...DEFAULT_OPTIONS$6,...o},f=r(c,i);super(l,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(s,r,n,t)=>class extends s{constructor(l,o){const c=n(l),i=r(c,o);if(t(c))throw new TypeError;super(l,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(s,r,n)=>class extends s{constructor(a,l){const o=n(a),c=r(o,l);super(a,!0,c,null)}},createMinimalBaseAudioContextConstructor=(s,r,n,t,a,l)=>class extends n{constructor(c,i){super(c),this._nativeContext=c,CONTEXT_STORE.set(this,c),t(c)&&a.set(c,new Set),this._destination=new s(this,i),this._listener=r(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const i=typeof c=="function"?l(this,c):null;this._nativeContext.onstatechange=i;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===i?c:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=s=>{const r=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=s.decodeAudioData(r.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(s,r)=>(n,t,a)=>{const l=new Set;return n.connect=(o=>(c,i=0,f=0)=>{const m=l.size===0;if(r(c))return o.call(n,c,i,f),s(l,[c,i,f],_=>_[0]===c&&_[1]===i&&_[2]===f,!0),m&&t(),c;o.call(n,c,i),s(l,[c,i],_=>_[0]===c&&_[1]===i,!0),m&&t()})(n.connect),n.disconnect=(o=>(c,i,f)=>{const m=l.size>0;if(c===void 0)o.apply(n),l.clear();else if(typeof c=="number"){o.call(n,c);for(const u of l)u[1]===c&&l.delete(u)}else{r(c)?o.call(n,c,i,f):o.call(n,c,i);for(const u of l)u[0]===c&&(i===void 0||u[1]===i)&&(f===void 0||u[2]===f)&&l.delete(u)}const _=l.size===0;m&&_&&a()})(n.disconnect),n},assignNativeAudioNodeOption=(s,r,n)=>{const t=r[n];t!==void 0&&t!==s[n]&&(s[n]=t)},assignNativeAudioNodeOptions=(s,r)=>{assignNativeAudioNodeOption(s,r,"channelCount"),assignNativeAudioNodeOption(s,r,"channelCountMode"),assignNativeAudioNodeOption(s,r,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=s=>typeof s.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=s=>{s.getFloatTimeDomainData=r=>{const n=new Uint8Array(r.length);s.getByteTimeDomainData(n);const t=Math.max(n.length,s.fftSize);for(let a=0;a<t;a+=1)r[a]=(n[a]-128)*.0078125;return r}},createNativeAnalyserNodeFactory=(s,r)=>(n,t)=>{const a=n.createAnalyser();if(assignNativeAudioNodeOptions(a,t),!(t.maxDecibels>t.minDecibels))throw r();return assignNativeAudioNodeOption(a,t,"fftSize"),assignNativeAudioNodeOption(a,t,"maxDecibels"),assignNativeAudioNodeOption(a,t,"minDecibels"),assignNativeAudioNodeOption(a,t,"smoothingTimeConstant"),s(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(a))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(a),a},createNativeAudioBufferConstructor=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(s,r,n)=>{const t=r[n];t!==void 0&&t!==s[n].value&&(s[n].value=t)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=s=>{s.start=(r=>{let n=!1;return(t=0,a=0,l)=>{if(n)throw createInvalidStateError();r.call(s,t,a,l),n=!0}})(s.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=s=>{s.start=(r=>(n=0,t=0,a)=>{if(typeof a=="number"&&a<0||t<0||n<0)throw new RangeError("The parameters can't be negative.");r.call(s,n,t,a)})(s.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=s=>{s.stop=(r=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");r.call(s,n)})(s.stop)},createNativeAudioBufferSourceNodeFactory=(s,r,n,t,a,l,o,c,i,f,m)=>(_,u)=>{const p=_.createBufferSource();return assignNativeAudioNodeOptions(p,u),assignNativeAudioNodeAudioParamValue(p,u,"playbackRate"),assignNativeAudioNodeOption(p,u,"buffer"),assignNativeAudioNodeOption(p,u,"loop"),assignNativeAudioNodeOption(p,u,"loopEnd"),assignNativeAudioNodeOption(p,u,"loopStart"),r(n,()=>n(_))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(p),r(t,()=>t(_))||i(p),r(a,()=>a(_))||f(p,_),r(l,()=>l(_))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(p),r(o,()=>o(_))||m(p,_),r(c,()=>c(_))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(p),s(_,p),p},createNativeAudioContextConstructor=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(s,r)=>(n,t,a)=>{const l=n.destination;if(l.channelCount!==t)try{l.channelCount=t}catch{}a&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:t});const o=s(n,{channelCount:t,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return r(o,"channelCount",c=>()=>c.call(o),c=>i=>{c.call(o,i);try{l.channelCount=i}catch(f){if(i>l.maxChannelCount)throw f}}),r(o,"channelCountMode",c=>()=>c.call(o),c=>i=>{c.call(o,i),l.channelCountMode=i}),r(o,"channelInterpretation",c=>()=>c.call(o),c=>i=>{c.call(o,i),l.channelInterpretation=i}),Object.defineProperty(o,"maxChannelCount",{get:()=>l.maxChannelCount}),o.connect(l),o},createNativeAudioWorkletNodeConstructor=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=s=>{const{port1:r}=new MessageChannel;try{r.postMessage(s)}finally{r.close()}},createNativeAudioWorkletNodeFactory=(s,r,n,t,a)=>(l,o,c,i,f,m)=>{if(c!==null)try{const _=new c(l,i,m),u=new Map;let p=null;if(Object.defineProperties(_,{channelCount:{get:()=>m.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>p,set:g=>{typeof p=="function"&&_.removeEventListener("processorerror",p),p=typeof g=="function"?g:null,typeof p=="function"&&_.addEventListener("processorerror",p)}}}),_.addEventListener=(g=>(...y)=>{if(y[0]==="processorerror"){const S=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(S!==null){const b=u.get(y[1]);b!==void 0?y[1]=b:(y[1]=E=>{E.type==="error"?(Object.defineProperties(E,{type:{value:"processorerror"}}),S(E)):S(new ErrorEvent(y[0],{...E}))},u.set(S,y[1]))}}return g.call(_,"error",y[1],y[2]),g.call(_,...y)})(_.addEventListener),_.removeEventListener=(g=>(...y)=>{if(y[0]==="processorerror"){const S=u.get(y[1]);S!==void 0&&(u.delete(y[1]),y[1]=S)}return g.call(_,"error",y[1],y[2]),g.call(_,y[0],y[1],y[2])})(_.removeEventListener),m.numberOfOutputs!==0){const g=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(g).connect(l.destination),a(_,()=>g.disconnect(),()=>g.connect(l.destination))}return _}catch(_){throw _.code===11?t():_}if(f===void 0)throw t();return testClonabilityOfAudioWorkletNodeOptions(m),r(l,o,f,m)},computeBufferSize=(s,r)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*r))))),cloneAudioWorkletNodeOptions=s=>new Promise((r,n)=>{const{port1:t,port2:a}=new MessageChannel;t.onmessage=({data:l})=>{t.close(),a.close(),r(l)},t.onmessageerror=({data:l})=>{t.close(),a.close(),n(l)},a.postMessage(s)}),createAudioWorkletProcessorPromise=async(s,r)=>{const n=await cloneAudioWorkletNodeOptions(r);return new s(n)},createAudioWorkletProcessor=(s,r,n,t)=>{let a=NODE_TO_PROCESSOR_MAPS.get(s);a===void 0&&(a=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(s,a));const l=createAudioWorkletProcessorPromise(n,t);return a.set(r,l),l},createNativeAudioWorkletNodeFakerFactory=(s,r,n,t,a,l,o,c,i,f,m,_,u)=>(p,g,y,S)=>{if(S.numberOfInputs===0&&S.numberOfOutputs===0)throw i();const b=Array.isArray(S.outputChannelCount)?S.outputChannelCount:Array.from(S.outputChannelCount);if(b.some(pe=>pe<1))throw i();if(b.length!==S.numberOfOutputs)throw r();if(S.channelCountMode!=="explicit")throw i();const E=S.channelCount*S.numberOfInputs,x=b.reduce((pe,ke)=>pe+ke,0),k=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(E+k>6||x>6)throw i();const T=new MessageChannel,j=[],A=[];for(let pe=0;pe<S.numberOfInputs;pe+=1)j.push(o(p,{channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,gain:1})),A.push(a(p,{channelCount:S.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:S.channelCount}));const C=[];if(y.parameterDescriptors!==void 0)for(const{defaultValue:pe,maxValue:ke,minValue:Ie,name:Y}of y.parameterDescriptors){const te=l(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:S.parameterData[Y]!==void 0?S.parameterData[Y]:pe===void 0?0:pe});Object.defineProperties(te.offset,{defaultValue:{get:()=>pe===void 0?0:pe},maxValue:{get:()=>ke===void 0?MOST_POSITIVE_SINGLE_FLOAT:ke},minValue:{get:()=>Ie===void 0?MOST_NEGATIVE_SINGLE_FLOAT:Ie}}),C.push(te)}const I=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,E+k)}),F=computeBufferSize(g,p.sampleRate),N=c(p,F,E+k,Math.max(1,x)),z=a(p,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),R=[];for(let pe=0;pe<S.numberOfOutputs;pe+=1)R.push(t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b[pe]}));for(let pe=0;pe<S.numberOfInputs;pe+=1){j[pe].connect(A[pe]);for(let ke=0;ke<S.channelCount;ke+=1)A[pe].connect(I,ke,pe*S.channelCount+ke)}const q=new ReadOnlyMap(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:pe},ke)=>{const Ie=C[ke];return Ie.connect(I,0,E+ke),Ie.start(0),[pe,Ie.offset]}));I.connect(N);let M=S.channelInterpretation,D=null;const X=S.numberOfOutputs===0?[N]:R,O={get bufferSize(){return F},get channelCount(){return S.channelCount},set channelCount(pe){throw n()},get channelCountMode(){return S.channelCountMode},set channelCountMode(pe){throw n()},get channelInterpretation(){return M},set channelInterpretation(pe){for(const ke of j)ke.channelInterpretation=pe;M=pe},get context(){return N.context},get inputs(){return j},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get onprocessorerror(){return D},set onprocessorerror(pe){typeof D=="function"&&O.removeEventListener("processorerror",D),D=typeof pe=="function"?pe:null,typeof D=="function"&&O.addEventListener("processorerror",D)},get parameters(){return q},get port(){return T.port2},addEventListener(...pe){return N.addEventListener(pe[0],pe[1],pe[2])},connect:s.bind(null,X),disconnect:f.bind(null,X),dispatchEvent(...pe){return N.dispatchEvent(pe[0])},removeEventListener(...pe){return N.removeEventListener(pe[0],pe[1],pe[2])}},G=new Map;T.port1.addEventListener=(pe=>(...ke)=>{if(ke[0]==="message"){const Ie=typeof ke[1]=="function"?ke[1]:typeof ke[1]=="object"&&ke[1]!==null&&typeof ke[1].handleEvent=="function"?ke[1].handleEvent:null;if(Ie!==null){const Y=G.get(ke[1]);Y!==void 0?ke[1]=Y:(ke[1]=te=>{m(p.currentTime,p.sampleRate,()=>Ie(te))},G.set(Ie,ke[1]))}}return pe.call(T.port1,ke[0],ke[1],ke[2])})(T.port1.addEventListener),T.port1.removeEventListener=(pe=>(...ke)=>{if(ke[0]==="message"){const Ie=G.get(ke[1]);Ie!==void 0&&(G.delete(ke[1]),ke[1]=Ie)}return pe.call(T.port1,ke[0],ke[1],ke[2])})(T.port1.removeEventListener);let K=null;Object.defineProperty(T.port1,"onmessage",{get:()=>K,set:pe=>{typeof K=="function"&&T.port1.removeEventListener("message",K),K=typeof pe=="function"?pe:null,typeof K=="function"&&(T.port1.addEventListener("message",K),T.port1.start())}}),y.prototype.port=T.port1;let Z=null;createAudioWorkletProcessor(p,O,y,S).then(pe=>Z=pe);const V=createNestedArrays(S.numberOfInputs,S.channelCount),L=createNestedArrays(S.numberOfOutputs,b),H=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((pe,{name:ke})=>({...pe,[ke]:new Float32Array(128)}),{});let J=!0;const ne=()=>{S.numberOfOutputs>0&&N.disconnect(z);for(let pe=0,ke=0;pe<S.numberOfOutputs;pe+=1){const Ie=R[pe];for(let Y=0;Y<b[pe];Y+=1)z.disconnect(Ie,ke+Y,Y);ke+=b[pe]}},se=new Map;N.onaudioprocess=({inputBuffer:pe,outputBuffer:ke})=>{if(Z!==null){const Ie=_(O);for(let Y=0;Y<F;Y+=128){for(let te=0;te<S.numberOfInputs;te+=1)for(let re=0;re<S.channelCount;re+=1)copyFromChannel(pe,V[te],re,re,Y);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:te},re)=>{copyFromChannel(pe,H,te,E+re,Y)});for(let te=0;te<S.numberOfInputs;te+=1)for(let re=0;re<b[te];re+=1)L[te][re].byteLength===0&&(L[te][re]=new Float32Array(128));try{const te=V.map((be,ve)=>{if(Ie[ve].size>0)return se.set(ve,F/128),be;const Re=se.get(ve);return Re===void 0?[]:(be.every(Ge=>Ge.every(Xe=>Xe===0))&&(Re===1?se.delete(ve):se.set(ve,Re-1)),be)});J=m(p.currentTime+Y/p.sampleRate,p.sampleRate,()=>Z.process(te,L,H));for(let be=0,ve=0;be<S.numberOfOutputs;be+=1){for(let je=0;je<b[be];je+=1)copyToChannel(ke,L[be],je,ve+je,Y);ve+=b[be]}}catch(te){J=!1,O.dispatchEvent(new ErrorEvent("processorerror",{colno:te.colno,filename:te.filename,lineno:te.lineno,message:te.message}))}if(!J){for(let te=0;te<S.numberOfInputs;te+=1){j[te].disconnect(A[te]);for(let re=0;re<S.channelCount;re+=1)A[Y].disconnect(I,re,te*S.channelCount+re)}if(y.parameterDescriptors!==void 0){const te=y.parameterDescriptors.length;for(let re=0;re<te;re+=1){const be=C[re];be.disconnect(I,0,E+re),be.stop()}}I.disconnect(N),N.onaudioprocess=null,fe?ne():_e();break}}}};let fe=!1;const xe=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),he=()=>N.connect(xe).connect(p.destination),_e=()=>{N.disconnect(xe),xe.disconnect()},ye=()=>{if(J){_e(),S.numberOfOutputs>0&&N.connect(z);for(let pe=0,ke=0;pe<S.numberOfOutputs;pe+=1){const Ie=R[pe];for(let Y=0;Y<b[pe];Y+=1)z.connect(Ie,ke+Y,Y);ke+=b[pe]}}fe=!0},ue=()=>{J&&(he(),ne()),fe=!1};return he(),u(O,ye,ue)},createNativeBiquadFilterNode=(s,r)=>{const n=s.createBiquadFilter();return assignNativeAudioNodeOptions(n,r),assignNativeAudioNodeAudioParamValue(n,r,"Q"),assignNativeAudioNodeAudioParamValue(n,r,"detune"),assignNativeAudioNodeAudioParamValue(n,r,"frequency"),assignNativeAudioNodeAudioParamValue(n,r,"gain"),assignNativeAudioNodeOption(n,r,"type"),n},createNativeChannelMergerNodeFactory=(s,r)=>(n,t)=>{const a=n.createChannelMerger(t.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&r(n,a),assignNativeAudioNodeOptions(a,t),a},wrapChannelSplitterNode=s=>{const r=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>r,set:n=>{if(n!==r)throw createInvalidStateError()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(s,r)=>{const n=s.createChannelSplitter(r.numberOfOutputs);return assignNativeAudioNodeOptions(n,r),wrapChannelSplitterNode(n),n},createNativeConstantSourceNodeFactory=(s,r,n,t,a)=>(l,o)=>{if(l.createConstantSource===void 0)return n(l,o);const c=l.createConstantSource();return assignNativeAudioNodeOptions(c,o),assignNativeAudioNodeAudioParamValue(c,o,"offset"),r(t,()=>t(l))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(c),r(a,()=>a(l))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(c),s(l,c),c},interceptConnections=(s,r)=>(s.connect=r.connect.bind(r),s.disconnect=r.disconnect.bind(r),s),createNativeConstantSourceNodeFakerFactory=(s,r,n,t)=>(a,{offset:l,...o})=>{const c=a.createBuffer(1,2,44100),i=r(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=n(a,{...o,gain:l}),m=c.getChannelData(0);m[0]=1,m[1]=1,i.buffer=c,i.loop=!0;const _={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(g){f.channelCount=g},get channelCountMode(){return f.channelCountMode},set channelCountMode(g){f.channelCountMode=g},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(g){f.channelInterpretation=g},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return i.onended},set onended(g){i.onended=g},addEventListener(...g){return i.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return i.dispatchEvent(g[0])},removeEventListener(...g){return i.removeEventListener(g[0],g[1],g[2])},start(g=0){i.start.call(i,g)},stop(g=0){i.stop.call(i,g)}},u=()=>i.connect(f),p=()=>i.disconnect(f);return s(a,i),t(interceptConnections(_,f),u,p)},createNativeConvolverNodeFactory=(s,r)=>(n,t)=>{const a=n.createConvolver();if(assignNativeAudioNodeOptions(a,t),t.disableNormalization===a.normalize&&(a.normalize=!t.disableNormalization),assignNativeAudioNodeOption(a,t,"buffer"),t.channelCount>2||(r(a,"channelCount",l=>()=>l.call(a),l=>o=>{if(o>2)throw s();return l.call(a,o)}),t.channelCountMode==="max"))throw s();return r(a,"channelCountMode",l=>()=>l.call(a),l=>o=>{if(o==="max")throw s();return l.call(a,o)}),a},createNativeDelayNode=(s,r)=>{const n=s.createDelay(r.maxDelayTime);return assignNativeAudioNodeOptions(n,r),assignNativeAudioNodeAudioParamValue(n,r,"delayTime"),n},createNativeDynamicsCompressorNodeFactory=s=>(r,n)=>{const t=r.createDynamicsCompressor();if(assignNativeAudioNodeOptions(t,n),n.channelCount>2||n.channelCountMode==="max")throw s();return assignNativeAudioNodeAudioParamValue(t,n,"attack"),assignNativeAudioNodeAudioParamValue(t,n,"knee"),assignNativeAudioNodeAudioParamValue(t,n,"ratio"),assignNativeAudioNodeAudioParamValue(t,n,"release"),assignNativeAudioNodeAudioParamValue(t,n,"threshold"),t},createNativeGainNode=(s,r)=>{const n=s.createGain();return assignNativeAudioNodeOptions(n,r),assignNativeAudioNodeAudioParamValue(n,r,"gain"),n},createNativeIIRFilterNodeFactory=s=>(r,n,t)=>{if(r.createIIRFilter===void 0)return s(r,n,t);const a=r.createIIRFilter(t.feedforward,t.feedback);return assignNativeAudioNodeOptions(a,t),a};function divide(s,r){const n=r[0]*r[0]+r[1]*r[1];return[(s[0]*r[0]+s[1]*r[1])/n,(s[1]*r[0]-s[0]*r[1])/n]}function multiply(s,r){return[s[0]*r[0]-s[1]*r[1],s[0]*r[1]+s[1]*r[0]]}function evaluatePolynomial(s,r){let n=[0,0];for(let t=s.length-1;t>=0;t-=1)n=multiply(n,r),n[0]+=s[t];return n}const createNativeIIRFilterNodeFakerFactory=(s,r,n,t)=>(a,l,{channelCount:o,channelCountMode:c,channelInterpretation:i,feedback:f,feedforward:m})=>{const _=computeBufferSize(l,a.sampleRate),u=f instanceof Float64Array?f:new Float64Array(f),p=m instanceof Float64Array?m:new Float64Array(m),g=u.length,y=p.length,S=Math.min(g,y);if(g===0||g>20)throw t();if(u[0]===0)throw r();if(y===0||y>20)throw t();if(p[0]===0)throw r();if(u[0]!==1){for(let C=0;C<y;C+=1)p[C]/=u[0];for(let C=1;C<g;C+=1)u[C]/=u[0]}const b=n(a,_,o,o);b.channelCount=o,b.channelCountMode=c,b.channelInterpretation=i;const E=32,x=[],k=[],T=[];for(let C=0;C<o;C+=1){x.push(0);const I=new Float32Array(E),F=new Float32Array(E);I.fill(0),F.fill(0),k.push(I),T.push(F)}b.onaudioprocess=C=>{const I=C.inputBuffer,F=C.outputBuffer,N=I.numberOfChannels;for(let z=0;z<N;z+=1){const R=I.getChannelData(z),q=F.getChannelData(z);x[z]=filterBuffer(u,g,p,y,S,k[z],T[z],x[z],E,R,q)}};const j=a.sampleRate/2;return interceptConnections({get bufferSize(){return _},get channelCount(){return b.channelCount},set channelCount(C){b.channelCount=C},get channelCountMode(){return b.channelCountMode},set channelCountMode(C){b.channelCountMode=C},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(C){b.channelInterpretation=C},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},addEventListener(...C){return b.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return b.dispatchEvent(C[0])},getFrequencyResponse(C,I,F){if(C.length!==I.length||I.length!==F.length)throw s();const N=C.length;for(let z=0;z<N;z+=1){const R=-Math.PI*(C[z]/j),q=[Math.cos(R),Math.sin(R)],M=evaluatePolynomial(p,q),D=evaluatePolynomial(u,q),X=divide(M,D);I[z]=Math.sqrt(X[0]*X[0]+X[1]*X[1]),F[z]=Math.atan2(X[1],X[0])}},removeEventListener(...C){return b.removeEventListener(C[0],C[1],C[2])}},b)},createNativeMediaElementAudioSourceNode=(s,r)=>s.createMediaElementSource(r.mediaElement),createNativeMediaStreamAudioDestinationNode=(s,r)=>{const n=s.createMediaStreamDestination();return assignNativeAudioNodeOptions(n,r),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},createNativeMediaStreamAudioSourceNode=(s,{mediaStream:r})=>{const n=r.getAudioTracks();n.sort((l,o)=>l.id<o.id?-1:l.id>o.id?1:0);const t=n.slice(0,1),a=s.createMediaStreamSource(new MediaStream(t));return Object.defineProperty(a,"mediaStream",{value:r}),a},createNativeMediaStreamTrackAudioSourceNodeFactory=(s,r)=>(n,{mediaStreamTrack:t})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(t);const a=new MediaStream([t]),l=n.createMediaStreamSource(a);if(t.kind!=="audio")throw s();if(r(n))throw new TypeError;return l},createNativeOfflineAudioContextConstructor=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(s,r,n,t,a,l)=>(o,c)=>{const i=o.createOscillator();return assignNativeAudioNodeOptions(i,c),assignNativeAudioNodeAudioParamValue(i,c,"detune"),assignNativeAudioNodeAudioParamValue(i,c,"frequency"),c.periodicWave!==void 0?i.setPeriodicWave(c.periodicWave):assignNativeAudioNodeOption(i,c,"type"),r(n,()=>n(o))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(i),r(t,()=>t(o))||l(i,o),r(a,()=>a(o))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(i),s(o,i),i},createNativePannerNodeFactory=s=>(r,n)=>{const t=r.createPanner();return t.orientationX===void 0?s(r,n):(assignNativeAudioNodeOptions(t,n),assignNativeAudioNodeAudioParamValue(t,n,"orientationX"),assignNativeAudioNodeAudioParamValue(t,n,"orientationY"),assignNativeAudioNodeAudioParamValue(t,n,"orientationZ"),assignNativeAudioNodeAudioParamValue(t,n,"positionX"),assignNativeAudioNodeAudioParamValue(t,n,"positionY"),assignNativeAudioNodeAudioParamValue(t,n,"positionZ"),assignNativeAudioNodeOption(t,n,"coneInnerAngle"),assignNativeAudioNodeOption(t,n,"coneOuterAngle"),assignNativeAudioNodeOption(t,n,"coneOuterGain"),assignNativeAudioNodeOption(t,n,"distanceModel"),assignNativeAudioNodeOption(t,n,"maxDistance"),assignNativeAudioNodeOption(t,n,"panningModel"),assignNativeAudioNodeOption(t,n,"refDistance"),assignNativeAudioNodeOption(t,n,"rolloffFactor"),t)},createNativePannerNodeFakerFactory=(s,r,n,t,a,l,o,c,i,f)=>(m,{coneInnerAngle:_,coneOuterAngle:u,coneOuterGain:p,distanceModel:g,maxDistance:y,orientationX:S,orientationY:b,orientationZ:E,panningModel:x,positionX:k,positionY:T,positionZ:j,refDistance:A,rolloffFactor:C,...I})=>{const F=m.createPanner();if(I.channelCount>2||I.channelCountMode==="max")throw o();assignNativeAudioNodeOptions(F,I);const N={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},z=n(m,{...N,channelInterpretation:"speakers",numberOfInputs:6}),R=t(m,{...I,gain:1}),q=t(m,{...N,gain:1}),M=t(m,{...N,gain:0}),D=t(m,{...N,gain:0}),X=t(m,{...N,gain:0}),O=t(m,{...N,gain:0}),G=t(m,{...N,gain:0}),K=a(m,256,6,1),Z=l(m,{...N,curve:new Float32Array([1,1]),oversample:"none"});let U=[S,b,E],V=[k,T,j];const L=new Float32Array(1);K.onaudioprocess=({inputBuffer:se})=>{const fe=[i(se,L,0),i(se,L,1),i(se,L,2)];fe.some((he,_e)=>he!==U[_e])&&(F.setOrientation(...fe),U=fe);const xe=[i(se,L,3),i(se,L,4),i(se,L,5)];xe.some((he,_e)=>he!==V[_e])&&(F.setPosition(...xe),V=xe)},Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0});const H={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(se){if(se>2)throw o();R.channelCount=se,F.channelCount=se},get channelCountMode(){return F.channelCountMode},set channelCountMode(se){if(se==="max")throw o();R.channelCountMode=se,F.channelCountMode=se},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(se){R.channelInterpretation=se,F.channelInterpretation=se},get coneInnerAngle(){return F.coneInnerAngle},set coneInnerAngle(se){F.coneInnerAngle=se},get coneOuterAngle(){return F.coneOuterAngle},set coneOuterAngle(se){F.coneOuterAngle=se},get coneOuterGain(){return F.coneOuterGain},set coneOuterGain(se){if(se<0||se>1)throw r();F.coneOuterGain=se},get context(){return F.context},get distanceModel(){return F.distanceModel},set distanceModel(se){F.distanceModel=se},get inputs(){return[R]},get maxDistance(){return F.maxDistance},set maxDistance(se){if(se<0)throw new RangeError;F.maxDistance=se},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get orientationX(){return q.gain},get orientationY(){return M.gain},get orientationZ(){return D.gain},get panningModel(){return F.panningModel},set panningModel(se){F.panningModel=se},get positionX(){return X.gain},get positionY(){return O.gain},get positionZ(){return G.gain},get refDistance(){return F.refDistance},set refDistance(se){if(se<0)throw new RangeError;F.refDistance=se},get rolloffFactor(){return F.rolloffFactor},set rolloffFactor(se){if(se<0)throw new RangeError;F.rolloffFactor=se},addEventListener(...se){return R.addEventListener(se[0],se[1],se[2])},dispatchEvent(...se){return R.dispatchEvent(se[0])},removeEventListener(...se){return R.removeEventListener(se[0],se[1],se[2])}};_!==H.coneInnerAngle&&(H.coneInnerAngle=_),u!==H.coneOuterAngle&&(H.coneOuterAngle=u),p!==H.coneOuterGain&&(H.coneOuterGain=p),g!==H.distanceModel&&(H.distanceModel=g),y!==H.maxDistance&&(H.maxDistance=y),S!==H.orientationX.value&&(H.orientationX.value=S),b!==H.orientationY.value&&(H.orientationY.value=b),E!==H.orientationZ.value&&(H.orientationZ.value=E),x!==H.panningModel&&(H.panningModel=x),k!==H.positionX.value&&(H.positionX.value=k),T!==H.positionY.value&&(H.positionY.value=T),j!==H.positionZ.value&&(H.positionZ.value=j),A!==H.refDistance&&(H.refDistance=A),C!==H.rolloffFactor&&(H.rolloffFactor=C),(U[0]!==1||U[1]!==0||U[2]!==0)&&F.setOrientation(...U),(V[0]!==0||V[1]!==0||V[2]!==0)&&F.setPosition(...V);const J=()=>{R.connect(F),s(R,Z,0,0),Z.connect(q).connect(z,0,0),Z.connect(M).connect(z,0,1),Z.connect(D).connect(z,0,2),Z.connect(X).connect(z,0,3),Z.connect(O).connect(z,0,4),Z.connect(G).connect(z,0,5),z.connect(K).connect(m.destination)},ne=()=>{R.disconnect(F),c(R,Z,0,0),Z.disconnect(q),q.disconnect(z),Z.disconnect(M),M.disconnect(z),Z.disconnect(D),D.disconnect(z),Z.disconnect(X),X.disconnect(z),Z.disconnect(O),O.disconnect(z),Z.disconnect(G),G.disconnect(z),z.disconnect(K),K.disconnect(m.destination)};return f(interceptConnections(H,F),J,ne)},createNativePeriodicWaveFactory=s=>(r,{disableNormalization:n,imag:t,real:a})=>{const l=t instanceof Float32Array?t:new Float32Array(t),o=a instanceof Float32Array?a:new Float32Array(a),c=r.createPeriodicWave(o,l,{disableNormalization:n});if(Array.from(t).length<2)throw s();return c},createNativeScriptProcessorNode=(s,r,n,t)=>s.createScriptProcessor(r,n,t),createNativeStereoPannerNodeFactory=(s,r)=>(n,t)=>{const a=t.channelCountMode;if(a==="clamped-max")throw r();if(n.createStereoPanner===void 0)return s(n,t);const l=n.createStereoPanner();return assignNativeAudioNodeOptions(l,t),assignNativeAudioNodeAudioParamValue(l,t,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>a,set:o=>{if(o!==a)throw r()}}),l},createNativeStereoPannerNodeFakerFactory=(s,r,n,t,a,l)=>{const c=new Float32Array([1,1]),i=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...f,oversample:"none"},_=(g,y,S,b)=>{const E=new Float32Array(16385),x=new Float32Array(16385);for(let I=0;I<16385;I+=1){const F=I/16384*i;E[I]=Math.cos(F),x[I]=Math.sin(F)}const k=n(g,{...f,gain:0}),T=t(g,{...m,curve:E}),j=t(g,{...m,curve:c}),A=n(g,{...f,gain:0}),C=t(g,{...m,curve:x});return{connectGraph(){y.connect(k),y.connect(j.inputs===void 0?j:j.inputs[0]),y.connect(A),j.connect(S),S.connect(T.inputs===void 0?T:T.inputs[0]),S.connect(C.inputs===void 0?C:C.inputs[0]),T.connect(k.gain),C.connect(A.gain),k.connect(b,0,0),A.connect(b,0,1)},disconnectGraph(){y.disconnect(k),y.disconnect(j.inputs===void 0?j:j.inputs[0]),y.disconnect(A),j.disconnect(S),S.disconnect(T.inputs===void 0?T:T.inputs[0]),S.disconnect(C.inputs===void 0?C:C.inputs[0]),T.disconnect(k.gain),C.disconnect(A.gain),k.disconnect(b,0,0),A.disconnect(b,0,1)}}},u=(g,y,S,b)=>{const E=new Float32Array(16385),x=new Float32Array(16385),k=new Float32Array(16385),T=new Float32Array(16385),j=Math.floor(16385/2);for(let X=0;X<16385;X+=1)if(X>j){const O=(X-j)/(16384-j)*i;E[X]=Math.cos(O),x[X]=Math.sin(O),k[X]=0,T[X]=1}else{const O=X/(16384-j)*i;E[X]=1,x[X]=0,k[X]=Math.cos(O),T[X]=Math.sin(O)}const A=r(g,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=n(g,{...f,gain:0}),I=t(g,{...m,curve:E}),F=n(g,{...f,gain:0}),N=t(g,{...m,curve:x}),z=t(g,{...m,curve:c}),R=n(g,{...f,gain:0}),q=t(g,{...m,curve:k}),M=n(g,{...f,gain:0}),D=t(g,{...m,curve:T});return{connectGraph(){y.connect(A),y.connect(z.inputs===void 0?z:z.inputs[0]),A.connect(C,0),A.connect(F,0),A.connect(R,1),A.connect(M,1),z.connect(S),S.connect(I.inputs===void 0?I:I.inputs[0]),S.connect(N.inputs===void 0?N:N.inputs[0]),S.connect(q.inputs===void 0?q:q.inputs[0]),S.connect(D.inputs===void 0?D:D.inputs[0]),I.connect(C.gain),N.connect(F.gain),q.connect(R.gain),D.connect(M.gain),C.connect(b,0,0),R.connect(b,0,0),F.connect(b,0,1),M.connect(b,0,1)},disconnectGraph(){y.disconnect(A),y.disconnect(z.inputs===void 0?z:z.inputs[0]),A.disconnect(C,0),A.disconnect(F,0),A.disconnect(R,1),A.disconnect(M,1),z.disconnect(S),S.disconnect(I.inputs===void 0?I:I.inputs[0]),S.disconnect(N.inputs===void 0?N:N.inputs[0]),S.disconnect(q.inputs===void 0?q:q.inputs[0]),S.disconnect(D.inputs===void 0?D:D.inputs[0]),I.disconnect(C.gain),N.disconnect(F.gain),q.disconnect(R.gain),D.disconnect(M.gain),C.disconnect(b,0,0),R.disconnect(b,0,0),F.disconnect(b,0,1),M.disconnect(b,0,1)}}},p=(g,y,S,b,E)=>{if(y===1)return _(g,S,b,E);if(y===2)return u(g,S,b,E);throw a()};return(g,{channelCount:y,channelCountMode:S,pan:b,...E})=>{if(S==="max")throw a();const x=s(g,{...E,channelCount:1,channelCountMode:S,numberOfInputs:2}),k=n(g,{...E,channelCount:y,channelCountMode:S,gain:1}),T=n(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:b});let{connectGraph:j,disconnectGraph:A}=p(g,y,k,T,x);Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"maxValue",{get:()=>1}),Object.defineProperty(T.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(z){k.channelCount!==z&&(I&&A(),{connectGraph:j,disconnectGraph:A}=p(g,z,k,T,x),I&&j()),k.channelCount=z},get channelCountMode(){return k.channelCountMode},set channelCountMode(z){if(z==="clamped-max"||z==="max")throw a();k.channelCountMode=z},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(z){k.channelInterpretation=z},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get pan(){return T.gain},addEventListener(...z){return k.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return k.dispatchEvent(z[0])},removeEventListener(...z){return k.removeEventListener(z[0],z[1],z[2])}};let I=!1;const F=()=>{j(),I=!0},N=()=>{A(),I=!1};return l(interceptConnections(C,x),F,N)}},createNativeWaveShaperNodeFactory=(s,r,n,t,a,l,o)=>(c,i)=>{const f=c.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return n(c,i);assignNativeAudioNodeOptions(f,i);const m=i.curve===null||i.curve instanceof Float32Array?i.curve:new Float32Array(i.curve);if(m!==null&&m.length<2)throw r();assignNativeAudioNodeOption(f,{curve:m},"curve"),assignNativeAudioNodeOption(f,i,"oversample");let _=null,u=!1;return o(f,"curve",y=>()=>y.call(f),y=>S=>(y.call(f,S),u&&(t(S)&&_===null?_=s(c,f):!t(S)&&_!==null&&(_(),_=null)),S)),a(f,()=>{u=!0,t(f.curve)&&(_=s(c,f))},()=>{u=!1,_!==null&&(_(),_=null)})},createNativeWaveShaperNodeFakerFactory=(s,r,n,t,a)=>(l,{curve:o,oversample:c,...i})=>{const f=l.createWaveShaper(),m=l.createWaveShaper();assignNativeAudioNodeOptions(f,i),assignNativeAudioNodeOptions(m,i);const _=n(l,{...i,gain:1}),u=n(l,{...i,gain:-1}),p=n(l,{...i,gain:1}),g=n(l,{...i,gain:-1});let y=null,S=!1,b=null;const E={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(T){_.channelCount=T,u.channelCount=T,f.channelCount=T,p.channelCount=T,m.channelCount=T,g.channelCount=T},get channelCountMode(){return f.channelCountMode},set channelCountMode(T){_.channelCountMode=T,u.channelCountMode=T,f.channelCountMode=T,p.channelCountMode=T,m.channelCountMode=T,g.channelCountMode=T},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(T){_.channelInterpretation=T,u.channelInterpretation=T,f.channelInterpretation=T,p.channelInterpretation=T,m.channelInterpretation=T,g.channelInterpretation=T},get context(){return f.context},get curve(){return b},set curve(T){if(T!==null&&T.length<2)throw r();if(T===null)f.curve=T,m.curve=T;else{const j=T.length,A=new Float32Array(j+2-j%2),C=new Float32Array(j+2-j%2);A[0]=T[0],C[0]=-T[j-1];const I=Math.ceil((j+1)/2),F=(j+1)/2-1;for(let N=1;N<I;N+=1){const z=N/I*F,R=Math.floor(z),q=Math.ceil(z);A[N]=R===q?T[R]:(1-(z-R))*T[R]+(1-(q-z))*T[q],C[N]=R===q?-T[j-1-R]:-((1-(z-R))*T[j-1-R])-(1-(q-z))*T[j-1-q]}A[I]=j%2===1?T[I-1]:(T[I-2]+T[I-1])/2,f.curve=A,m.curve=C}b=T,S&&(t(b)&&y===null?y=s(l,_):y!==null&&(y(),y=null))},get inputs(){return[_]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(T){f.oversample=T,m.oversample=T},addEventListener(...T){return _.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return _.dispatchEvent(T[0])},removeEventListener(...T){return _.removeEventListener(T[0],T[1],T[2])}};o!==null&&(E.curve=o instanceof Float32Array?o:new Float32Array(o)),c!==E.oversample&&(E.oversample=c);const x=()=>{_.connect(f).connect(p),_.connect(u).connect(m).connect(g).connect(p),S=!0,t(b)&&(y=s(l,_))},k=()=>{_.disconnect(f),f.disconnect(p),_.disconnect(u),u.disconnect(m),m.disconnect(g),g.disconnect(p),S=!1,y!==null&&(y(),y=null)};return a(interceptConnections(E,p),x,k)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(s,r,n,t,a)=>class extends s{constructor(o,c,i){let f;if(typeof o=="number"&&c!==void 0&&i!==void 0)f={length:c,numberOfChannels:o,sampleRate:i};else if(typeof o=="object")f=o;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:_,sampleRate:u}={...DEFAULT_OPTIONS$5,...f},p=t(_,m,u);r(testPromiseSupport,()=>testPromiseSupport(p))||p.addEventListener("statechange",(()=>{let g=0;const y=S=>{this._state==="running"&&(g>0?(p.removeEventListener("statechange",y),S.stopImmediatePropagation(),this._waitForThePromiseToSettle(S)):g+=1)};return y})()),super(p,_),this._length=m,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const m=a(i),_={...DEFAULT_OPTIONS$4,...f},u=n(m,_),p=l(m),g=p?t():null,y=i.sampleRate/2;super(i,!1,u,g),this._detune=r(this,p,u.detune,153600,-153600),this._frequency=r(this,p,u.frequency,y,-y),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=g,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(i){const f=typeof i=="function"?o(this,i):null;this._nativeOscillatorNode.onended=f;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===f?i:m}get type(){return this._nativeOscillatorNode.type}set type(i){this._nativeOscillatorNode.type=i,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(i){this._nativeOscillatorNode.setPeriodicWave(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=i)}start(i=0){if(this._nativeOscillatorNode.start(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=i),this.context.state!=="closed"){setInternalStateToActive(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(i=0){this._nativeOscillatorNode.stop(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=i)}},createOscillatorNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap;let o=null,c=null,i=null;const f=async(m,_)=>{let u=n(m);const p=isOwnedByContext(u,_);if(!p){const g={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,periodicWave:o===null?void 0:o,type:u.type};u=r(_,g),c!==null&&u.start(c),i!==null&&u.stop(i)}return l.set(_,u),p?(await s(_,m.detune,u.detune),await s(_,m.frequency,u.frequency)):(await t(_,m.detune,u.detune),await t(_,m.frequency,u.frequency)),await a(m,_,u),u};return{set periodicWave(m){o=m},set start(m){c=m},set stop(m){i=m},render(m,_){const u=l.get(_);return u!==void 0?Promise.resolve(u):f(m,_)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const m=a(i),_={...DEFAULT_OPTIONS$3,...f},u=n(m,_),p=l(m),g=p?t():null;super(i,!1,u,g),this._nativePannerNode=u,this._orientationX=r(this,p,u.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=r(this,p,u.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=r(this,p,u.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=r(this,p,u.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=r(this,p,u.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=r(this,p,u.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(i){this._nativePannerNode.coneInnerAngle=i}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(i){this._nativePannerNode.coneOuterAngle=i}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(i){this._nativePannerNode.coneOuterGain=i}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(i){this._nativePannerNode.distanceModel=i}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(i){this._nativePannerNode.maxDistance=i}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(i){this._nativePannerNode.panningModel=i}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(i){this._nativePannerNode.refDistance=i}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(i){this._nativePannerNode.rolloffFactor=i}},createPannerNodeRendererFactory=(s,r,n,t,a,l,o,c,i,f)=>()=>{const m=new WeakMap;let _=null;const u=async(p,g)=>{let y=null,S=l(p);const b={channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation},E={...b,coneInnerAngle:S.coneInnerAngle,coneOuterAngle:S.coneOuterAngle,coneOuterGain:S.coneOuterGain,distanceModel:S.distanceModel,maxDistance:S.maxDistance,panningModel:S.panningModel,refDistance:S.refDistance,rolloffFactor:S.rolloffFactor},x=isOwnedByContext(S,g);if("bufferSize"in S)y=t(g,{...b,gain:1});else if(!x){const k={...E,orientationX:S.orientationX.value,orientationY:S.orientationY.value,orientationZ:S.orientationZ.value,positionX:S.positionX.value,positionY:S.positionY.value,positionZ:S.positionZ.value};S=a(g,k)}if(m.set(g,y===null?S:y),y!==null){if(_===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const N=new o(6,p.context.length,g.sampleRate),z=r(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});z.connect(N.destination),_=(async()=>{const R=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(q,M)=>{const D=n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:M===0?1:0});return await c(N,q,D.offset),D}));for(let q=0;q<6;q+=1)R[q].connect(z,0,q),R[q].start(0);return f(N)})()}const k=await _,T=t(g,{...b,gain:1});await i(p,g,T);const j=[];for(let N=0;N<k.numberOfChannels;N+=1)j.push(k.getChannelData(N));let A=[j[0][0],j[1][0],j[2][0]],C=[j[3][0],j[4][0],j[5][0]],I=t(g,{...b,gain:1}),F=a(g,{...E,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:C[0],positionY:C[1],positionZ:C[2]});T.connect(I).connect(F.inputs[0]),F.connect(y);for(let N=128;N<k.length;N+=128){const z=[j[0][N],j[1][N],j[2][N]],R=[j[3][N],j[4][N],j[5][N]];if(z.some((q,M)=>q!==A[M])||R.some((q,M)=>q!==C[M])){A=z,C=R;const q=N/g.sampleRate;I.gain.setValueAtTime(0,q),I=t(g,{...b,gain:0}),F=a(g,{...E,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),I.gain.setValueAtTime(1,q),T.connect(I).connect(F.inputs[0]),F.connect(y)}}return y}return x?(await s(g,p.orientationX,S.orientationX),await s(g,p.orientationY,S.orientationY),await s(g,p.orientationZ,S.orientationZ),await s(g,p.positionX,S.positionX),await s(g,p.positionY,S.positionY),await s(g,p.positionZ,S.positionZ)):(await c(g,p.orientationX,S.orientationX),await c(g,p.orientationY,S.orientationY),await c(g,p.orientationZ,S.orientationZ),await c(g,p.positionX,S.positionX),await c(g,p.positionY,S.positionY),await c(g,p.positionZ,S.positionZ)),isNativeAudioNodeFaker(S)?await i(p,g,S.inputs[0]):await i(p,g,S),S};return{render(p,g){const y=m.get(g);return y!==void 0?Promise.resolve(y):u(p,g)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(s,r,n,t)=>class Bn{constructor(l,o){const c=r(l),i=t({...DEFAULT_OPTIONS$2,...o}),f=s(c,i);return n.add(f),f}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===Bn.prototype||n.has(l)}},createRenderAutomation=(s,r)=>(n,t,a)=>(s(t).replay(a),r(t,n,a)),createRenderInputsOfAudioNode=(s,r,n)=>async(t,a,l)=>{const o=s(t);await Promise.all(o.activeInputs.map((c,i)=>Array.from(c).map(async([f,m])=>{const u=await r(f).render(f,a),p=t.context.destination;!n(f)&&(t!==p||!n(t))&&u.connect(l,m,i)})).reduce((c,i)=>[...c,...i],[]))},createRenderInputsOfAudioParam=(s,r,n)=>async(t,a,l)=>{const o=r(t);await Promise.all(Array.from(o.activeInputs).map(async([c,i])=>{const m=await s(c).render(c,a);n(c)||m.connect(l,i)}))},createRenderNativeOfflineAudioContext=(s,r,n,t)=>a=>s(testPromiseSupport,()=>testPromiseSupport(a))?Promise.resolve(s(t,t)).then(l=>{if(!l){const o=n(a,512,0,1);a.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>a.currentTime,o.connect(a.destination)}return a.startRendering()}):new Promise(l=>{const o=r(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{o.disconnect(),l(c.renderedBuffer)},o.connect(a.destination),a.startRendering()}),createSetActiveAudioWorkletNodeInputs=s=>(r,n)=>{s.set(r,n)},createSetAudioNodeTailTime=s=>(r,n)=>s.set(r,n),createStartRendering=(s,r,n,t,a,l,o,c)=>(i,f)=>n(i).render(i,f).then(()=>Promise.all(Array.from(t(f)).map(m=>n(m).render(m,f)))).then(()=>a(f)).then(m=>(typeof m.copyFromChannel!="function"?(o(m),wrapAudioBufferGetChannelDataMethod(m)):r(l,()=>l(m))||c(m),s.add(m),m)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(s,r,n,t,a,l)=>class extends s{constructor(c,i){const f=a(c),m={...DEFAULT_OPTIONS$1,...i},_=n(f,m),u=l(f),p=u?t():null;super(c,!1,_,p),this._pan=r(this,u,_.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(s,r,n,t,a)=>()=>{const l=new WeakMap,o=async(c,i)=>{let f=n(c);const m=isOwnedByContext(f,i);if(!m){const _={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=r(i,_)}return l.set(i,f),m?await s(i,c.pan,f.pan):await t(i,c.pan,f.pan),isNativeAudioNodeFaker(f)?await a(c,i,f.inputs[0]):await a(c,i,f),f};return{render(c,i){const f=l.get(i);return f!==void 0?Promise.resolve(f):o(c,i)}}},createTestAudioBufferConstructorSupport=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioWorkletProcessorPostMessageSupport=(s,r)=>async()=>{if(s===null)return!0;if(r===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),t=new r(1,128,44100),a=URL.createObjectURL(n);let l=!1,o=!1;try{await t.audioWorklet.addModule(a);const c=new s(t,"a",{numberOfOutputs:0}),i=t.createOscillator();c.port.onmessage=()=>l=!0,c.onprocessorerror=()=>o=!0,i.connect(c),i.start(0),await t.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(a)}return l&&!o},createTestOfflineAudioContextCurrentTimeSupport=(s,r)=>()=>{if(r===null)return Promise.resolve(!1);const n=new r(1,1,44100),t=s(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{n.oncomplete=()=>{t.disconnect(),a(n.currentTime!==0)},n.startRendering()})},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(s,r,n,t,a,l,o)=>class extends s{constructor(i,f){const m=a(i),_={...DEFAULT_OPTIONS,...f},u=n(m,_),g=l(m)?t():null;super(i,!0,u,g),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(i){if(i===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(i.length<2)throw r();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=i}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(i){this._nativeWaveShaperNode.oversample=i}},createWaveShaperNodeRendererFactory=(s,r,n)=>()=>{const t=new WeakMap,a=async(l,o)=>{let c=r(l);if(!isOwnedByContext(c,o)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=s(o,f)}return t.set(o,c),isNativeAudioNodeFaker(c)?await n(l,o,c.inputs[0]):await n(l,o,c),c};return{render(l,o){const c=t.get(o);return c!==void 0?Promise.resolve(c):a(l,o)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(s,r)=>n=>{n.copyFromChannel=(t,a,l=0)=>{const o=s(l),c=s(a);if(c>=n.numberOfChannels)throw r();const i=n.length,f=n.getChannelData(c),m=t.length;for(let _=o<0?-o:0;_+o<i&&_<m;_+=1)t[_]=f[_+o]},n.copyToChannel=(t,a,l=0)=>{const o=s(l),c=s(a);if(c>=n.numberOfChannels)throw r();const i=n.length,f=n.getChannelData(c),m=t.length;for(let _=o<0?-o:0;_+o<i&&_<m;_+=1)f[_+o]=t[_]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=s=>r=>{r.copyFromChannel=(n=>(t,a,l=0)=>{const o=s(l),c=s(a);if(o<r.length)return n.call(r,t,c,o)})(r.copyFromChannel),r.copyToChannel=(n=>(t,a,l=0)=>{const o=s(l),c=s(a);if(o<r.length)return n.call(r,t,c,o)})(r.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=s=>(r,n)=>{const t=n.createBuffer(1,1,44100);r.buffer===null&&(r.buffer=t),s(r,"buffer",a=>()=>{const l=a.call(r);return l===t?null:l},a=>l=>a.call(r,l===null?t:l))},createWrapChannelMergerNode=(s,r)=>(n,t)=>{t.channelCount=1,t.channelCountMode="explicit",Object.defineProperty(t,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const a=n.createBufferSource();r(t,()=>{const c=t.numberOfInputs;for(let i=0;i<c;i+=1)a.connect(t,0,i)},()=>a.disconnect(t))},getFirstSample=(s,r,n)=>s.copyFromChannel===void 0?s.getChannelData(n)[0]:(s.copyFromChannel(r,n),r[0]),isDCCurve=s=>{if(s===null)return!1;const r=s.length;return r%2!==0?s[Math.floor(r/2)]!==0:s[r/2-1]+s[r/2]!==0},overwriteAccessors=(s,r,n,t)=>{let a=s;for(;!a.hasOwnProperty(r);)a=Object.getPrototypeOf(a);const{get:l,set:o}=Object.getOwnPropertyDescriptor(a,r);Object.defineProperty(s,r,{get:n(l),set:t(o)})},sanitizeAudioWorkletNodeOptions=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=s=>({...s,channelCount:s.numberOfOutputs}),sanitizePeriodicWaveOptions=s=>{const{imag:r,real:n}=s;return r===void 0?n===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(n,()=>0),real:n}:n===void 0?{...s,imag:r,real:Array.from(r,()=>0)}:{...s,imag:r,real:n}},setValueAtTimeUntilPossible=(s,r,n)=>{try{s.setValueAtTime(r,n)}catch(t){if(t.code!==9)throw t;setValueAtTimeUntilPossible(s,r,n+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=s=>{const r=s.createBufferSource();r.start();try{r.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=s=>{const r=s.createBufferSource(),n=s.createBuffer(1,1,44100);r.buffer=n;try{r.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=s=>{const r=s.createBufferSource();r.start();try{r.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=s=>{const r=s.createOscillator();try{r.start(-1)}catch(n){return n instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=s=>{const r=s.createBuffer(1,1,44100),n=s.createBufferSource();n.buffer=r,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=s=>{const r=s.createOscillator();try{r.stop(-1)}catch(n){return n instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=s=>{const{port1:r,port2:n}=new MessageChannel;try{r.postMessage(s)}finally{r.close(),n.close()}},wrapAudioBufferSourceNodeStartMethodOffsetClamping=s=>{s.start=(r=>(n=0,t=0,a)=>{const l=s.buffer,o=l===null?t:Math.min(l.duration,t);l!==null&&o>l.duration-.5/s.context.sampleRate?r.call(s,n,0,0):r.call(s,n,o,a)})(s.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(s,r)=>{const n=r.createGain();s.connect(n);const t=(a=>()=>{a.call(s,n),s.removeEventListener("ended",t)})(s.disconnect);s.addEventListener("ended",t),interceptConnections(s,n),s.stop=(a=>{let l=!1;return(o=0)=>{if(l)try{a.call(s,o)}catch{n.gain.setValueAtTime(0,o)}else a.call(s,o),l=!0}})(s.stop)},wrapEventListener=(s,r)=>n=>{const t={value:s};return Object.defineProperties(n,{currentTarget:t,target:t}),typeof r=="function"?r.call(s,n):r.handleEvent.call(s,n)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext$1=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext$1?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext$1?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext);function assert(s,r){if(!s)throw new Error(r)}function assertRange(s,r,n=1/0){if(!(r<=s&&s<=n))throw new RangeError(`Value must be within [${r}, ${n}], got: ${s}`)}function assertContextRunning(s){!s.isOffline&&s.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let defaultLogger=console;function log(...s){defaultLogger.log(...s)}function warn(...s){defaultLogger.warn(...s)}function isUndef(s){return typeof s>"u"}function isDefined(s){return!isUndef(s)}function isFunction(s){return typeof s=="function"}function isNumber(s){return typeof s=="number"}function isObject(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function isBoolean(s){return typeof s=="boolean"}function isArray(s){return Array.isArray(s)}function isString(s){return typeof s=="string"}function isNote(s){return isString(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function createAudioContext(s){return new audioContextConstructor(s)}function createOfflineAudioContext(s,r,n){return new offlineAudioContextConstructor(s,r,n)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(s,r,n){return assert(isDefined(audioWorkletNodeConstructor),"This node only works in a secure context (https or localhost)"),new audioWorkletNodeConstructor(s,r,n)}function __decorate(s,r,n,t){var a=arguments.length,l=a<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,n):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(s,r,n,t);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(l=(a<3?o(l):a>3?o(r,n,l):o(r,n))||l);return a>3&&l&&Object.defineProperty(r,n,l),l}function __awaiter(s,r,n,t){function a(l){return l instanceof n?l:new n(function(o){o(l)})}return new(n||(n=Promise))(function(l,o){function c(m){try{f(t.next(m))}catch(_){o(_)}}function i(m){try{f(t.throw(m))}catch(_){o(_)}}function f(m){m.done?l(m.value):a(m.value).then(c,i)}f((t=t.apply(s,r||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;class Ticker{constructor(r,n,t){this._callback=r,this._type=n,this._updateInterval=t,this._createClock()}_createWorker(){const r=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(r),t=new Worker(n);t.onmessage=this._callback.bind(this),this._worker=t}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(r){this._updateInterval=Math.max(r,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(r*1e3,1))}get type(){return this._type}set type(r){this._disposeClock(),this._type=r,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(s){return isAnyAudioParam(s)}function isAudioNode(s){return isAnyAudioNode(s)}function isOfflineAudioContext(s){return isAnyOfflineAudioContext(s)}function isAudioContext(s){return isAnyAudioContext(s)}function isAudioBuffer(s){return s instanceof AudioBuffer}function noCopy(s,r){return s==="value"||isAudioParam(r)||isAudioNode(r)||isAudioBuffer(r)}function deepMerge(s,...r){if(!r.length)return s;const n=r.shift();if(isObject(s)&&isObject(n))for(const t in n)noCopy(t,n[t])?s[t]=n[t]:isObject(n[t])?(s[t]||Object.assign(s,{[t]:{}}),deepMerge(s[t],n[t])):Object.assign(s,{[t]:n[t]});return deepMerge(s,...r)}function deepEquals(s,r){return s.length===r.length&&s.every((n,t)=>r[t]===n)}function optionsFromArguments(s,r,n=[],t){const a={},l=Array.from(r);if(isObject(l[0])&&t&&!Reflect.has(l[0],t)&&(Object.keys(l[0]).some(c=>Reflect.has(s,c))||(deepMerge(a,{[t]:l[0]}),n.splice(n.indexOf(t),1),l.shift())),l.length===1&&isObject(l[0]))deepMerge(a,l[0]);else for(let o=0;o<n.length;o++)isDefined(l[o])&&(a[n[o]]=l[o]);return deepMerge(s,a)}function getDefaultsFromInstance(s){return s.constructor.getDefaults()}function defaultArg(s,r){return isUndef(s)?r:s}function omitFromObject(s,r){return r.forEach(n=>{Reflect.has(s,n)&&delete s[n]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Tone{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...r){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...r)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Tone.version=version;const EPSILON=1e-6;function GT(s,r){return s>r+EPSILON}function GTE(s,r){return GT(s,r)||EQ(s,r)}function LT(s,r){return s+EPSILON<r}function EQ(s,r){return Math.abs(s-r)<EPSILON}function clamp(s,r,n){return Math.max(Math.min(s,n),r)}class Timeline extends Tone{constructor(){super(),this.name="Timeline",this._timeline=[];const r=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=r.memory,this.increasing=r.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(r){if(assert(Reflect.has(r,"time"),"Timeline: events must have a time attribute"),r.time=r.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];assert(GTE(r.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(r)}else{const n=this._search(r.time);this._timeline.splice(n+1,0,r)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(r){const n=this._timeline.indexOf(r);return n!==-1&&this._timeline.splice(n,1),this}get(r,n="time"){const t=this._search(r,n);return t!==-1?this._timeline[t]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(r,n="time"){const t=this._search(r,n);return t+1<this._timeline.length?this._timeline[t+1]:null}getBefore(r){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<r)return this._timeline[n-1];const t=this._search(r);return t-1>=0?this._timeline[t-1]:null}cancel(r){if(this._timeline.length>1){let n=this._search(r);if(n>=0)if(EQ(this._timeline[n].time,r)){for(let t=n;t>=0&&EQ(this._timeline[t].time,r);t--)n=t;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,r)&&(this._timeline=[]);return this}cancelBefore(r){const n=this._search(r);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(r){const n=this._timeline.indexOf(r);return n>0?this._timeline[n-1]:null}_search(r,n="time"){if(this._timeline.length===0)return-1;let t=0;const a=this._timeline.length;let l=a;if(a>0&&this._timeline[a-1][n]<=r)return a-1;for(;t<l;){let o=Math.floor(t+(l-t)/2);const c=this._timeline[o],i=this._timeline[o+1];if(EQ(c[n],r)){for(let f=o;f<this._timeline.length;f++){const m=this._timeline[f];if(EQ(m[n],r))o=f;else break}return o}else{if(LT(c[n],r)&&GT(i[n],r))return o;GT(c[n],r)?l=o:t=o+1}}return-1}_iterate(r,n=0,t=this._timeline.length-1){this._timeline.slice(n,t+1).forEach(r)}forEach(r){return this._iterate(r),this}forEachBefore(r,n){const t=this._search(r);return t!==-1&&this._iterate(n,0,t),this}forEachAfter(r,n){const t=this._search(r);return this._iterate(n,t+1),this}forEachBetween(r,n,t){let a=this._search(r),l=this._search(n);return a!==-1&&l!==-1?(this._timeline[a].time!==r&&(a+=1),this._timeline[l].time===n&&(l-=1),this._iterate(t,a,l)):a===-1&&this._iterate(t,0,l),this}forEachFrom(r,n){let t=this._search(r);for(;t>=0&&this._timeline[t].time>=r;)t--;return this._iterate(n,t+1),this}forEachAtTime(r,n){const t=this._search(r);if(t!==-1&&EQ(this._timeline[t].time,r)){let a=t;for(let l=t;l>=0&&EQ(this._timeline[l].time,r);l--)a=l;this._iterate(l=>{n(l)},a,t)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(s){notifyNewContext.push(s)}function initializeContext(s){notifyNewContext.forEach(r=>r(s))}const notifyCloseContext=[];function onContextClose(s){notifyCloseContext.push(s)}function closeContext(s){notifyCloseContext.forEach(r=>r(s))}class Emitter extends Tone{constructor(){super(...arguments),this.name="Emitter"}on(r,n){return r.split(/\W+/).forEach(a=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(n)}),this}once(r,n){const t=(...a)=>{n(...a),this.off(r,t)};return this.on(r,t),this}off(r,n){return r.split(/\W+/).forEach(a=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(isUndef(n))this._events[r]=[];else{const l=this._events[r];for(let o=l.length-1;o>=0;o--)l[o]===n&&l.splice(o,1)}}),this}emit(r,...n){if(this._events&&this._events.hasOwnProperty(r)){const t=this._events[r].slice(0);for(let a=0,l=t.length;a<l;a++)t[a].apply(this,n)}return this}static mixin(r){["on","once","off","emit"].forEach(n=>{const t=Object.getOwnPropertyDescriptor(Emitter.prototype,n);Object.defineProperty(r.prototype,n,t)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const r=optionsFromArguments(Context.getDefaults(),arguments,["context"]);r.context?this._context=r.context:this._context=createAudioContext({latencyHint:r.latencyHint}),this._ticker=new Ticker(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(r.latencyHint),this.lookAhead=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(r,n,t){return this._context.createBuffer(r,n,t)}createChannelMerger(r){return this._context.createChannelMerger(r)}createChannelSplitter(r){return this._context.createChannelSplitter(r)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(r){return this._context.createDelay(r)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(r,n){return this._context.createIIRFilter(r,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(r,n,t){return this._context.createPeriodicWave(r,n,t)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(r){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(r)}createMediaElementSource(r){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(r)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(r){return this._context.decodeAudioData(r)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(r){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=r}get transport(){return this.initialize(),this._transport}set transport(r){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=r}get draw(){return this.initialize(),this._draw}set draw(r){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=r}get destination(){return this.initialize(),this._destination}set destination(r){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=r}createAudioWorkletNode(r,n){return createAudioWorkletNode(this.rawContext,r,n)}addAudioWorkletModule(r,n){return __awaiter(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(r)),yield this._workletModules.get(n)})}workletsAreReady(){return __awaiter(this,void 0,void 0,function*(){const r=[];this._workletModules.forEach(n=>r.push(n)),yield Promise.all(r)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(r){this._ticker.updateInterval=r}get clockSource(){return this._ticker.type}set clockSource(r){this._ticker.type=r}get latencyHint(){return this._latencyHint}_setLatencyHint(r){let n=0;if(this._latencyHint=r,isString(r))switch(r){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter(this,void 0,void 0,function*(){isAudioContext(this._context)&&(yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(r){if(this._constants.has(r))return this._constants.get(r);{const n=this._context.createBuffer(1,128,this._context.sampleRate),t=n.getChannelData(0);for(let l=0;l<t.length;l++)t[l]=r;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=n,a.loop=!0,a.start(0),this._constants.set(r,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(r=>this._constants[r].disconnect()),this}_timeoutLoop(){const r=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=r;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(r,n){this._timeoutIds++;const t=this.now();return this._timeouts.add({callback:r,id:this._timeoutIds,time:t+n}),this._timeoutIds}clearTimeout(r){return this._timeouts.forEach(n=>{n.id===r&&this._timeouts.remove(n)}),this}clearInterval(r){return this.clearTimeout(r)}setInterval(r,n){const t=++this._timeoutIds,a=()=>{const l=this.now();this._timeouts.add({callback:()=>{r(),a()},id:t,time:l+n})};return a(),t}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(r,n,t){return{}}createChannelMerger(r){return{}}createChannelSplitter(r){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(r){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(r,n){return{}}createPanner(){return{}}createPeriodicWave(r,n,t){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(r){return{}}createMediaElementSource(r){return{}}createMediaStreamDestination(){return{}}decodeAudioData(r){return Promise.resolve({})}createAudioWorkletNode(r,n){return{}}get rawContext(){return{}}addAudioWorkletModule(r,n){return __awaiter(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(r,n){return 0}clearTimeout(r){return this}setInterval(r,n){return 0}clearInterval(r){return this}getConstant(r){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(r){}get destination(){return{}}set destination(r){}now(){return 0}immediate(){return 0}}function readOnly(s,r){isArray(r)?r.forEach(n=>readOnly(s,n)):Object.defineProperty(s,r,{enumerable:!0,writable:!1})}function writable(s,r){isArray(r)?r.forEach(n=>writable(s,n)):Object.defineProperty(s,r,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const r=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=r.reverse,this.onload=r.onload,r.url&&isAudioBuffer(r.url)||r.url instanceof ToneAudioBuffer?this.set(r.url):isString(r.url)&&this.load(r.url).catch(r.onerror)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(r){return r instanceof ToneAudioBuffer?r.loaded?this._buffer=r.get():r.onload=()=>{this.set(r),this.onload(this)}:this._buffer=r,this._reversed&&this._reverse(),this}get(){return this._buffer}load(r){return __awaiter(this,void 0,void 0,function*(){const n=ToneAudioBuffer.load(r).then(t=>{this.set(t),this.onload(this)});ToneAudioBuffer.downloads.push(n);try{yield n}finally{const t=ToneAudioBuffer.downloads.indexOf(n);ToneAudioBuffer.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(r){const n=isArray(r)&&r[0].length>0,t=n?r.length:1,a=n?r[0].length:r.length,l=getContext(),o=l.createBuffer(t,a,l.sampleRate),c=!n&&t===1?[r]:r;for(let i=0;i<t;i++)o.copyToChannel(c[i],i);return this._buffer=o,this}toMono(r){if(isNumber(r))this.fromArray(this.toArray(r));else{let n=new Float32Array(this.length);const t=this.numberOfChannels;for(let a=0;a<t;a++){const l=this.toArray(a);for(let o=0;o<l.length;o++)n[o]+=l[o]}n=n.map(a=>a/t),this.fromArray(n)}return this}toArray(r){if(isNumber(r))return this.getChannelData(r);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let t=0;t<this.numberOfChannels;t++)n[t]=this.getChannelData(t);return n}}getChannelData(r){return this._buffer?this._buffer.getChannelData(r):new Float32Array(0)}slice(r,n=this.duration){const t=Math.floor(r*this.sampleRate),a=Math.floor(n*this.sampleRate);assert(t<a,"The start time must be less than the end time");const l=a-t,o=getContext().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)o.copyToChannel(this.getChannelData(c).subarray(t,a),c);return new ToneAudioBuffer(o)}_reverse(){if(this.loaded)for(let r=0;r<this.numberOfChannels;r++)this.getChannelData(r).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(r){this._reversed!==r&&(this._reversed=r,this._reverse())}static fromArray(r){return new ToneAudioBuffer().fromArray(r)}static fromUrl(r){return __awaiter(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(r)})}static load(r){return __awaiter(this,void 0,void 0,function*(){const n=r.match(/\[([^\]\[]+\|.+)\]$/);if(n){const c=n[1].split("|");let i=c[0];for(const f of c)if(ToneAudioBuffer.supportsType(f)){i=f;break}r=r.replace(n[0],i)}const t=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",a=yield fetch(t+r);if(!a.ok)throw new Error(`could not load url: ${r}`);const l=yield a.arrayBuffer();return yield getContext().decodeAudioData(l)})}static supportsType(r){const n=r.split("."),t=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+t)!==""}static loaded(){return __awaiter(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(r){return __awaiter(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const t=Math.floor(this.sampleRate/128);r&&n%t===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(r=!0){return __awaiter(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(r);const n=yield this._context.startRendering();return new ToneAudioBuffer(n)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(s){isAudioContext(s)?globalContext=new Context(s):isOfflineAudioContext(s)?globalContext=new OfflineContext(s):globalContext=s}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const r=` * Tone.js v${version} * `;console.log(`%c${r}`,"background: #000; color: #fff")}function dbToGain(s){return Math.pow(10,s/20)}function gainToDb(s){return 20*(Math.log(s)/Math.LN10)}function intervalToFrequencyRatio(s){return Math.pow(2,s/12)}let A4=440;function getA4(){return A4}function setA4(s){A4=s}function ftom(s){return Math.round(ftomf(s))}function ftomf(s){return 69+12*Math.log2(s/A4)}function mtof(s){return A4*Math.pow(2,(s-69)/12)}class TimeBaseClass extends Tone{constructor(r,n,t){super(),this.defaultUnits="s",this._val=n,this._units=t,this.context=r,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:r=>this._frequencyToUnits(parseFloat(r)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:r=>this._ticksToUnits(parseInt(r,10)),regexp:/^(\d+)i$/i},m:{method:r=>this._beatsToUnits(parseInt(r,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(r,n)=>{const t=parseInt(r,10),a=n==="."?1.5:1;return t===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/t)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:r=>this._expressions[this.defaultUnits].method.call(this,r),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:r=>this._secondsToUnits(parseFloat(r)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:r=>parseInt(r,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:r=>{const n=parseInt(r,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(r,n,t)=>{let a=0;return r&&r!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(r))),n&&n!=="0"&&(a+=this._beatsToUnits(parseFloat(n))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString(this._val)&&isUndef(this._units)){for(const r in this._expressions)if(this._expressions[r].regexp.test(this._val.trim())){this._units=r;break}}else if(isObject(this._val)){let r=0;for(const n in this._val)if(isDefined(this._val[n])){const t=this._val[n],a=new this.constructor(this.context,n).valueOf()*t;r+=a}return r}if(isDefined(this._units)){const r=this._expressions[this._units],n=this._val.toString().trim().match(r.regexp);return n?r.method.apply(this,n.slice(1)):r.method.call(this,this._val)}else return isString(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(r){return 1/r}_beatsToUnits(r){return 60/this._getBpm()*r}_secondsToUnits(r){return r}_ticksToUnits(r){return r*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(r){switch(this._units=void 0,this.defaultUnits){case"s":this._val=r.toSeconds();break;case"i":this._val=r.toTicks();break;case"hz":this._val=r.toFrequency();break;case"midi":this._val=r.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:r=>this._now()+new this.constructor(this.context,r).valueOf(),regexp:/^\+(.+)/},quantize:{method:r=>{const n=new TimeClass(this.context,r).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(r,n=1){const t=new this.constructor(this.context,r).valueOf(),a=this.valueOf(),c=Math.round(a/t)*t-a;return a+c*n}toNotation(){const r=this.toSeconds(),n=["1m"];for(let l=1;l<9;l++){const o=Math.pow(2,l);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let t=n[0],a=new TimeClass(this.context,n[0]).toSeconds();return n.forEach(l=>{const o=new TimeClass(this.context,l).toSeconds();Math.abs(o-r)<Math.abs(a-r)&&(t=l,a=o)}),t}toBarsBeatsSixteenths(){const r=this._beatsToUnits(1);let n=this.valueOf()/r;n=parseFloat(n.toFixed(4));const t=Math.floor(n/this._getTimeSignature());let a=n%1*4;n=Math.floor(n)%this._getTimeSignature();const l=a.toString();return l.length>3&&(a=parseFloat(parseFloat(l).toFixed(3))),[t,n,a].join(":")}toTicks(){const r=this._beatsToUnits(1),n=this.valueOf()/r;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(r){setA4(r)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(r){return this.defaultUnits==="midi"?r:FrequencyClass.mtof(r)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(r,n){const a=noteToScaleIndex[r.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?a:FrequencyClass.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(r,n,t){let a=1;return r&&r!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(r))),n&&n!=="0"&&(a*=this._beatsToUnits(parseFloat(n))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t)/4)),a}}})}transpose(r){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(r))}harmonize(r){return r.map(n=>this.transpose(n))}toMidi(){return ftom(this.valueOf())}toNote(){const r=this.toFrequency(),n=Math.log2(r/FrequencyClass.A4);let t=Math.round(12*n)+57;const a=Math.floor(t/12);return a<0&&(t+=-12*a),scaleIndexToNote[t%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const r=this._beatsToUnits(1),n=this.valueOf()/r;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(r){return r}_ticksToUnits(r){return 1/(r*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(r){return 1/super._beatsToUnits(r)}_secondsToUnits(r){return 1/r}static mtof(r){return mtof(r)}static ftom(r){return ftom(r)}}const noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ToneWithContext extends Tone{constructor(){super();const r=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=r.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(r){return new TimeClass(this.context,r).toSeconds()}toFrequency(r){return new FrequencyClass(this.context,r).toFrequency()}toTicks(r){return new TransportTimeClass(this.context,r).toTicks()}_getPartialProperties(r){const n=this.get();return Object.keys(n).forEach(t=>{isUndef(r[t])&&delete n[t]}),n}get(){const r=getDefaultsFromInstance(this);return Object.keys(r).forEach(n=>{if(Reflect.has(this,n)){const t=this[n];isDefined(t)&&isDefined(t.value)&&isDefined(t.setValueAtTime)?r[n]=t.value:t instanceof ToneWithContext?r[n]=t._getPartialProperties(r[n]):isArray(t)||isNumber(t)||isString(t)||isBoolean(t)?r[n]=t:delete r[n]}}),r}set(r){return Object.keys(r).forEach(n=>{Reflect.has(this,n)&&isDefined(this[n])&&(this[n]&&isDefined(this[n].value)&&isDefined(this[n].setValueAtTime)?this[n].value!==r[n]&&(this[n].value=r[n]):this[n]instanceof ToneWithContext?this[n].set(r[n]):this[n]=r[n])}),this}}class StateTimeline extends Timeline{constructor(r="stopped"){super(),this.name="StateTimeline",this._initial=r,this.setStateAtTime(this._initial,0)}getValueAtTime(r){const n=this.get(r);return n!==null?n.state:this._initial}setStateAtTime(r,n,t){return assertRange(n,0),this.add(Object.assign({},t,{state:r,time:n})),this}getLastState(r,n){const t=this._search(n);for(let a=t;a>=0;a--){const l=this._timeline[a];if(l.state===r)return l}}getNextState(r,n){const t=this._search(n);if(t!==-1)for(let a=t;a<this._timeline.length;a++){const l=this._timeline[a];if(l.state===r)return l}}}class Param extends ToneWithContext{constructor(){super(optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const r=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(assert(isDefined(r.param)&&(isAudioParam(r.param)||r.param instanceof Param),"param must be an AudioParam");!isAudioParam(r.param);)r.param=r.param._param;this._swappable=isDefined(r.swappable)?r.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=r.param,this.input.connect(this._param)):this._param=this.input=r.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=r.units,this.convert=r.convert,this._minValue=r.minValue,this._maxValue=r.maxValue,isDefined(r.value)&&r.value!==this._toType(this._initialValue)&&this.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const r=this.now();return this.getValueAtTime(r)}set value(r){this.cancelScheduledValues(this.now()),this.setValueAtTime(r,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(r,n){return this.units===n}_assertRange(r){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(r,this._fromType(this.minValue),this._fromType(this.maxValue)),r}_fromType(r){return this.convert&&!this.overridden?this._is(r,"time")?this.toSeconds(r):this._is(r,"decibels")?dbToGain(r):this._is(r,"frequency")?this.toFrequency(r):r:this.overridden?0:r}_toType(r){return this.convert&&this.units==="decibels"?gainToDb(r):r}setValueAtTime(r,n){const t=this.toSeconds(n),a=this._fromType(r);return assert(isFinite(a)&&isFinite(t),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",r,t),this._events.add({time:t,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,t),this}getValueAtTime(r){const n=Math.max(this.toSeconds(r),0),t=this._events.getAfter(n),a=this._events.get(n);let l=this._initialValue;if(a===null)l=this._initialValue;else if(a.type==="setTargetAtTime"&&(t===null||t.type==="setValueAtTime")){const o=this._events.getBefore(a.time);let c;o===null?c=this._initialValue:c=o.value,a.type==="setTargetAtTime"&&(l=this._exponentialApproach(a.time,c,a.value,a.constant,n))}else if(t===null)l=a.value;else if(t.type==="linearRampToValueAtTime"||t.type==="exponentialRampToValueAtTime"){let o=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?o=this._initialValue:o=c.value}t.type==="linearRampToValueAtTime"?l=this._linearInterpolate(a.time,o,t.time,t.value,n):l=this._exponentialInterpolate(a.time,o,t.time,t.value,n)}else l=a.value;return this._toType(l)}setRampPoint(r){r=this.toSeconds(r);let n=this.getValueAtTime(r);return this.cancelAndHoldAtTime(r),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,r),this}linearRampToValueAtTime(r,n){const t=this._fromType(r),a=this.toSeconds(n);return assert(isFinite(t)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._assertRange(t),this._events.add({time:a,type:"linearRampToValueAtTime",value:t}),this.log(this.units,"linearRampToValueAtTime",r,a),this._param.linearRampToValueAtTime(t,a),this}exponentialRampToValueAtTime(r,n){let t=this._fromType(r);t=EQ(t,0)?this._minOutput:t,this._assertRange(t);const a=this.toSeconds(n);return assert(isFinite(t)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:t}),this.log(this.units,"exponentialRampToValueAtTime",r,a),this._param.exponentialRampToValueAtTime(t,a),this}exponentialRampTo(r,n,t){return t=this.toSeconds(t),this.setRampPoint(t),this.exponentialRampToValueAtTime(r,t+this.toSeconds(n)),this}linearRampTo(r,n,t){return t=this.toSeconds(t),this.setRampPoint(t),this.linearRampToValueAtTime(r,t+this.toSeconds(n)),this}targetRampTo(r,n,t){return t=this.toSeconds(t),this.setRampPoint(t),this.exponentialApproachValueAtTime(r,t,n),this}exponentialApproachValueAtTime(r,n,t){n=this.toSeconds(n),t=this.toSeconds(t);const a=Math.log(t+1)/Math.log(200);return this.setTargetAtTime(r,n,a),this.cancelAndHoldAtTime(n+t*.9),this.linearRampToValueAtTime(r,n+t),this}setTargetAtTime(r,n,t){const a=this._fromType(r);assert(isFinite(t)&&t>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(n);return this._assertRange(a),assert(isFinite(a)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(r)}, ${JSON.stringify(n)}`),this._events.add({constant:t,time:l,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",r,l,t),this._param.setTargetAtTime(a,l,t),this}setValueCurveAtTime(r,n,t,a=1){t=this.toSeconds(t),n=this.toSeconds(n);const l=this._fromType(r[0])*a;this.setValueAtTime(this._toType(l),n);const o=t/(r.length-1);for(let c=1;c<r.length;c++){const i=this._fromType(r[c])*a;this.linearRampToValueAtTime(this._toType(i),n+c*o)}return this}cancelScheduledValues(r){const n=this.toSeconds(r);return assert(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(r)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(r){const n=this.toSeconds(r),t=this._fromType(this.getValueAtTime(n));assert(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(r)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+t);const a=this._events.get(n),l=this._events.getAfter(n);return a&&EQ(a.time,n)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(t),n):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(t),n)),this._events.add({time:n,type:"setValueAtTime",value:t}),this._param.setValueAtTime(t,n),this}rampTo(r,n=.1,t){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(r,n,t):this.linearRampTo(r,n,t),this}apply(r){const n=this.context.currentTime;r.setValueAtTime(this.getValueAtTime(n),n);const t=this._events.get(n);if(t&&t.type==="setTargetAtTime"){const a=this._events.getAfter(t.time),l=a?a.time:n+2,o=(l-n)/10;for(let c=n;c<l;c+=o)r.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?r.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?r.setTargetAtTime(a.value,a.time,a.constant):r[a.type](a.value,a.time)}),this}setParam(r){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(r),this._param=r,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(r,n,t,a,l){return t+(n-t)*Math.exp(-(l-r)/a)}_linearInterpolate(r,n,t,a,l){return n+(a-n)*((l-r)/(t-r))}_exponentialInterpolate(r,n,t,a,l){return n*Math.pow(a/n,(l-r)/(t-r))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(r){return isDefined(r)&&(r instanceof ToneAudioNode||isAudioNode(r))}_getInternalNodes(){const r=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&r.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&r.push(this.output),r}_setChannelProperties(r){this._getInternalNodes().forEach(t=>{t.channelCount=r.channelCount,t.channelCountMode=r.channelCountMode,t.channelInterpretation=r.channelInterpretation})}_getChannelProperties(){const r=this._getInternalNodes();assert(r.length>0,"ToneAudioNode does not have any internal nodes");const n=r[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(r){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:r}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(r){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:r}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(r){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:r}))}connect(r,n=0,t=0){return connect(this,r,n,t),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(r,n=0,t=0){return disconnect(this,r,n,t),this}chain(...r){return connectSeries(this,...r),this}fan(...r){return r.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...s){const r=s.shift();s.reduce((n,t)=>(n instanceof ToneAudioNode?n.connect(t):isAudioNode(n)&&connect(n,t),t),r)}function connect(s,r,n=0,t=0){for(assert(isDefined(s),"Cannot connect from undefined node"),assert(isDefined(r),"Cannot connect to undefined node"),(r instanceof ToneAudioNode||isAudioNode(r))&&assert(r.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(s.numberOfOutputs>0,"Cannot connect from node with no outputs");r instanceof ToneAudioNode||r instanceof Param;)isDefined(r.input)&&(r=r.input);for(;s instanceof ToneAudioNode;)isDefined(s.output)&&(s=s.output);isAudioParam(r)?s.connect(r,n):s.connect(r,n,t)}function disconnect(s,r,n=0,t=0){if(isDefined(r))for(;r instanceof ToneAudioNode;)r=r.input;for(;!isAudioNode(s);)isDefined(s.output)&&(s=s.output);isAudioParam(r)?s.disconnect(r,n):isAudioNode(r)?s.disconnect(r,n,t):s.disconnect()}class Gain extends ToneAudioNode{constructor(){super(optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const r=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);this.gain=new Param({context:this.context,convert:r.convert,param:this._gainNode.gain,units:r.units,value:r.gain,minValue:r.minValue,maxValue:r.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(r){super(r),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const t=this.toSeconds(n);return this._startTime!==-1&&t>=this._startTime&&(this._stopTime===-1||t<=this._stopTime)?"started":"stopped"},this._fadeIn=r.fadeIn,this._fadeOut=r.fadeOut,this._curve=r.curve,this.onended=r.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(r,n=1){assert(this._startTime===-1,"Source cannot be started more than once");const t=this.toSeconds(this._fadeIn);return this._startTime=r+t,this._startTime=Math.max(this._startTime,this.context.currentTime),t>0?(this._gainNode.gain.setValueAtTime(0,r),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,r+t):this._gainNode.gain.exponentialApproachValueAtTime(n,r,t)):this._gainNode.gain.setValueAtTime(n,r),this}stop(r){return this.log("stop",r),this._stopGain(this.toSeconds(r)),this}_stopGain(r){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(r)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,r):this._gainNode.gain.targetRampTo(0,n,r):(this._gainNode.gain.cancelAndHoldAtTime(r),this._gainNode.gain.setValueAtTime(0,r)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const t=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const r=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(r):setTimeout(r,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ToneConstantSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const r=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:r.convert,param:this._source.offset,units:r.units,value:r.offset,minValue:r.minValue,maxValue:r.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(r){const n=this.toSeconds(r);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(r){this._source.stop(r)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const r=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:r.convert,offset:r.value,units:r.units,minValue:r.minValue,maxValue:r.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(r,n=0,t=0){return connectSignal(this,r,n,t),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(r,n){return this._param.setValueAtTime(r,n),this}getValueAtTime(r){return this._param.getValueAtTime(r)}setRampPoint(r){return this._param.setRampPoint(r),this}linearRampToValueAtTime(r,n){return this._param.linearRampToValueAtTime(r,n),this}exponentialRampToValueAtTime(r,n){return this._param.exponentialRampToValueAtTime(r,n),this}exponentialRampTo(r,n,t){return this._param.exponentialRampTo(r,n,t),this}linearRampTo(r,n,t){return this._param.linearRampTo(r,n,t),this}targetRampTo(r,n,t){return this._param.targetRampTo(r,n,t),this}exponentialApproachValueAtTime(r,n,t){return this._param.exponentialApproachValueAtTime(r,n,t),this}setTargetAtTime(r,n,t){return this._param.setTargetAtTime(r,n,t),this}setValueCurveAtTime(r,n,t,a){return this._param.setValueCurveAtTime(r,n,t,a),this}cancelScheduledValues(r){return this._param.cancelScheduledValues(r),this}cancelAndHoldAtTime(r){return this._param.cancelAndHoldAtTime(r),this}rampTo(r,n,t){return this._param.rampTo(r,n,t),this}get value(){return this._param.value}set value(r){this._param.value=r}get convert(){return this._param.convert}set convert(r){this._param.convert=r}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(r){this._param.overridden=r}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(r){return this._param.apply(r),this}}function connectSignal(s,r,n,t){(r instanceof Param||isAudioParam(r)||r instanceof Signal&&r.override)&&(r.cancelScheduledValues(0),r.setValueAtTime(0,0),r instanceof Signal&&(r.overridden=!0)),connect(s,r,n,t)}class TickParam extends Param{constructor(){super(optionsFromArguments(TickParam.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1;const r=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);this._multiplier=r.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(r.value)}),this.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(r,n,t){n=this.toSeconds(n),this.setRampPoint(n);const a=this._fromType(r),l=this._events.get(n),o=Math.round(Math.max(1/t,1));for(let c=0;c<=o;c++){const i=t*c+n,f=this._exponentialApproach(l.time,l.value,a,t,i);this.linearRampToValueAtTime(this._toType(f),i)}return this}setValueAtTime(r,n){const t=this.toSeconds(n);super.setValueAtTime(r,n);const a=this._events.get(t),l=this._events.previousEvent(a),o=this._getTicksUntilEvent(l,t);return a.ticks=Math.max(o,0),this}linearRampToValueAtTime(r,n){const t=this.toSeconds(n);super.linearRampToValueAtTime(r,n);const a=this._events.get(t),l=this._events.previousEvent(a),o=this._getTicksUntilEvent(l,t);return a.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(r,n){n=this.toSeconds(n);const t=this._fromType(r),a=this._events.get(n),l=Math.round(Math.max((n-a.time)*10,1)),o=(n-a.time)/l;for(let c=0;c<=l;c++){const i=o*c+a.time,f=this._exponentialInterpolate(a.time,a.value,n,t,i);this.linearRampToValueAtTime(this._toType(f),i)}return this}_getTicksUntilEvent(r,n){if(r===null)r={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(r.ticks)){const o=this._events.previousEvent(r);r.ticks=this._getTicksUntilEvent(o,r.time)}const t=this._fromType(this.getValueAtTime(r.time));let a=this._fromType(this.getValueAtTime(n));const l=this._events.get(n);return l&&l.time===n&&l.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-r.time)*(t+a)+r.ticks}getTicksAtTime(r){const n=this.toSeconds(r),t=this._events.get(n);return Math.max(this._getTicksUntilEvent(t,n),0)}getDurationOfTicks(r,n){const t=this.toSeconds(n),a=this.getTicksAtTime(n);return this.getTimeOfTick(a+r)-t}getTimeOfTick(r){const n=this._events.get(r,"ticks"),t=this._events.getAfter(r,"ticks");if(n&&n.ticks===r)return n.time;if(n&&t&&t.type==="linearRampToValueAtTime"&&n.value!==t.value){const a=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(t.time))-a)/(t.time-n.time),c=Math.sqrt(Math.pow(a,2)-2*o*(n.ticks-r)),i=(-a+c)/o,f=(-a-c)/o;return(i>0?i:f)+n.time}else return n?n.value===0?1/0:n.time+(r-n.ticks)/n.value:r/this._initialValue}ticksToTime(r,n){return this.getDurationOfTicks(r,n)}timeToTicks(r,n){const t=this.toSeconds(n),a=this.toSeconds(r),l=this.getTicksAtTime(t);return this.getTicksAtTime(t+a)-l}_fromType(r){return this.units==="bpm"&&this.multiplier?1/(60/r/this.multiplier):super._fromType(r)}_toType(r){return this.units==="bpm"&&this.multiplier?r/this.multiplier*60:super._toType(r)}get multiplier(){return this._multiplier}set multiplier(r){const n=this.value;this._multiplier=r,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class TickSignal extends Signal{constructor(){super(optionsFromArguments(TickSignal.getDefaults(),arguments,["value"])),this.name="TickSignal";const r=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);this.input=this._param=new TickParam({context:this.context,convert:r.convert,multiplier:r.multiplier,param:this._constantSource.offset,units:r.units,value:r.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(r,n){return this._param.ticksToTime(r,n)}timeToTicks(r,n){return this._param.timeToTicks(r,n)}getTimeOfTick(r){return this._param.getTimeOfTick(r)}getDurationOfTicks(r,n){return this._param.getDurationOfTicks(r,n)}getTicksAtTime(r){return this._param.getTicksAtTime(r)}get multiplier(){return this._param.multiplier}set multiplier(r){this._param.multiplier=r}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){super(optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline;const r=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);this.frequency=new TickSignal({context:this.context,units:r.units,value:r.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(r,n){const t=this.toSeconds(r);return this._state.getValueAtTime(t)!=="started"&&(this._state.setStateAtTime("started",t),isDefined(n)&&this.setTicksAtTime(n,t)),this}stop(r){const n=this.toSeconds(r);if(this._state.getValueAtTime(n)==="stopped"){const t=this._state.get(n);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(r){const n=this.toSeconds(r);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(r){return r=this.toSeconds(r),this._state.cancel(r),this._tickOffset.cancel(r),this}getTicksAtTime(r){const n=this.toSeconds(r),t=this._state.getLastState("stopped",n),a={state:"paused",time:n};this._state.add(a);let l=t,o=0;return this._state.forEachBetween(t.time,n+this.sampleTime,c=>{let i=l.time;const f=this._tickOffset.get(c.time);f&&f.time>=l.time&&(o=f.ticks,i=f.time),l.state==="started"&&c.state!=="started"&&(o+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(i)),l=c}),this._state.remove(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(r){this.setTicksAtTime(r,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(r){const n=this.now(),t=this.frequency.timeToTicks(r,n);this.setTicksAtTime(t,n)}getSecondsAtTime(r){r=this.toSeconds(r);const n=this._state.getLastState("stopped",r),t={state:"paused",time:r};this._state.add(t);let a=n,l=0;return this._state.forEachBetween(n.time,r+this.sampleTime,o=>{let c=a.time;const i=this._tickOffset.get(o.time);i&&i.time>=a.time&&(l=i.seconds,c=i.time),a.state==="started"&&o.state!=="started"&&(l+=o.time-c),a=o}),this._state.remove(t),l}setTicksAtTime(r,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(r,n),ticks:r,time:n}),this}getStateAtTime(r){return r=this.toSeconds(r),this._state.getValueAtTime(r)}getTimeOfTick(r,n=this.now()){const t=this._tickOffset.get(n),a=this._state.get(n),l=Math.max(t.time,a.time),o=this.frequency.getTicksAtTime(l)+r-t.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(r,n,t){let a=this._state.get(r);this._state.forEachBetween(r,n,o=>{a&&a.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(a.time,r),o.time-this.sampleTime,t),a=o});let l=null;if(a&&a.state==="started"){const o=Math.max(a.time,r),c=this.frequency.getTicksAtTime(o),i=this.frequency.getTicksAtTime(a.time),f=c-i;let m=Math.ceil(f)-f;m=EQ(m,1)?0:m;let _=this.frequency.getTimeOfTick(c+m);for(;_<n;){try{t(_,Math.round(this.getTicksAtTime(_)))}catch(u){l=u;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){super(optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this);const r=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);this.callback=r.callback,this._tickSource=new TickSource({context:this.context,frequency:r.frequency,units:r.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(r,n){assertContextRunning(this.context);const t=this.toSeconds(r);return this.log("start",t),this._state.getValueAtTime(t)!=="started"&&(this._state.setStateAtTime("started",t),this._tickSource.start(t,n),t<this._lastUpdate&&this.emit("start",t,n)),this}stop(r){const n=this.toSeconds(r);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(r){const n=this.toSeconds(r);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(r){this._tickSource.ticks=r}get seconds(){return this._tickSource.seconds}set seconds(r){this._tickSource.seconds=r}getSecondsAtTime(r){return this._tickSource.getSecondsAtTime(r)}setTicksAtTime(r,n){return this._tickSource.setTicksAtTime(r,n),this}getTimeOfTick(r,n=this.now()){return this._tickSource.getTimeOfTick(r,n)}getTicksAtTime(r){return this._tickSource.getTicksAtTime(r)}nextTickTime(r,n){const t=this.toSeconds(n),a=this.getTicksAtTime(t);return this._tickSource.getTimeOfTick(a+r,t)}_loop(){const r=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",r,n),r!==n&&(this._state.forEachBetween(r,n,t=>{switch(t.state){case"started":const a=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,a);break;case"stopped":t.time!==0&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time);break}}),this._tickSource.forEachTickBetween(r,n,(t,a)=>{this.callback(t,a)}))}getStateAtTime(r){const n=this.toSeconds(r);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class ToneAudioBuffers extends Tone{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const r=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=r.baseUrl,Object.keys(r.urls).forEach(n=>{this._loadingCount++;const t=r.urls[n];this.add(n,t,this._bufferLoaded.bind(this,r.onload),r.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(r){return this._buffers.has(r.toString())}get(r){return assert(this.has(r),`ToneAudioBuffers has no buffer named: ${r}`),this._buffers.get(r.toString())}_bufferLoaded(r){this._loadingCount--,this._loadingCount===0&&r&&r()}get loaded(){return Array.from(this._buffers).every(([r,n])=>n.loaded)}add(r,n,t=noOp,a=noOp){return isString(n)?this._buffers.set(r.toString(),new ToneAudioBuffer(this.baseUrl+n,t,a)):this._buffers.set(r.toString(),new ToneAudioBuffer(n,t,a)),this}dispose(){return super.dispose(),this._buffers.forEach(r=>r.dispose()),this._buffers.clear(),this}}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(r){return this._getPPQ()*r}_secondsToUnits(r){return Math.floor(r/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(r){return r}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Draw extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(r,n){return this._events.add({callback:r,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(r){return this._events.cancel(this.toSeconds(r)),this}_drawLoop(){const r=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=r;){const n=this._events.shift();n&&r-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}onContextInit(s=>{s.draw=new Draw({context:s})});onContextClose(s=>{s.draw.dispose()});class IntervalTimeline extends Tone{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(r){assert(isDefined(r.time),"Events must have a time property"),assert(isDefined(r.duration),"Events must have a duration parameter"),r.time=r.time.valueOf();let n=new IntervalNode(r.time,r.time+r.duration,r);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(r){if(this._root!==null){const n=[];this._root.search(r.time,n);for(const t of n)if(t.event===r){this._removeNode(t),this._length--;break}}return this}get length(){return this._length}cancel(r){return this.forEachFrom(r,n=>this.remove(n)),this}_setRoot(r){this._root=r,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(r,n){r.parent!==null?(r.isLeftChild()?r.parent.left=n:r.parent.right=n,this._rebalance(r.parent)):this._setRoot(n)}_removeNode(r){if(r.left===null&&r.right===null)this._replaceNodeInParent(r,null);else if(r.right===null)this._replaceNodeInParent(r,r.left);else if(r.left===null)this._replaceNodeInParent(r,r.right);else{const n=r.getBalance();let t,a=null;if(n>0)if(r.left.right===null)t=r.left,t.right=r.right,a=t;else{for(t=r.left.right;t.right!==null;)t=t.right;t.parent&&(t.parent.right=t.left,a=t.parent,t.left=r.left,t.right=r.right)}else if(r.right.left===null)t=r.right,t.left=r.left,a=t;else{for(t=r.right.left;t.left!==null;)t=t.left;t.parent&&(t.parent.left=t.right,a=t.parent,t.left=r.left,t.right=r.right)}r.parent!==null?r.isLeftChild()?r.parent.left=t:r.parent.right=t:this._setRoot(t),a&&this._rebalance(a)}r.dispose()}_rotateLeft(r){const n=r.parent,t=r.isLeftChild(),a=r.right;a&&(r.right=a.left,a.left=r),n!==null?t?n.left=a:n.right=a:this._setRoot(a)}_rotateRight(r){const n=r.parent,t=r.isLeftChild(),a=r.left;a&&(r.left=a.right,a.right=r),n!==null?t?n.left=a:n.right=a:this._setRoot(a)}_rebalance(r){const n=r.getBalance();n>1&&r.left?r.left.getBalance()<0?this._rotateLeft(r.left):this._rotateRight(r):n<-1&&r.right&&(r.right.getBalance()>0?this._rotateRight(r.right):this._rotateLeft(r))}get(r){if(this._root!==null){const n=[];if(this._root.search(r,n),n.length>0){let t=n[0];for(let a=1;a<n.length;a++)n[a].low>t.low&&(t=n[a]);return t.event}}return null}forEach(r){if(this._root!==null){const n=[];this._root.traverse(t=>n.push(t)),n.forEach(t=>{t.event&&r(t.event)})}return this}forEachAtTime(r,n){if(this._root!==null){const t=[];this._root.search(r,t),t.forEach(a=>{a.event&&n(a.event)})}return this}forEachFrom(r,n){if(this._root!==null){const t=[];this._root.searchAfter(r,t),t.forEach(a=>{a.event&&n(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(r=>r.dispose()),this._root=null,this}}class IntervalNode{constructor(r,n,t){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=t,this.low=r,this.high=n,this.max=this.high}insert(r){r.low<=this.low?this.left===null?this.left=r:this.left.insert(r):this.right===null?this.right=r:this.right.insert(r)}search(r,n){r>this.max||(this.left!==null&&this.left.search(r,n),this.low<=r&&this.high>r&&n.push(this),!(this.low>r)&&this.right!==null&&this.right.search(r,n))}searchAfter(r,n){this.low>=r&&(n.push(this),this.left!==null&&this.left.searchAfter(r,n)),this.right!==null&&this.right.searchAfter(r,n)}traverse(r){r(this),this.left!==null&&this.left.traverse(r),this.right!==null&&this.right.traverse(r)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let r=0;return this.left!==null&&this.right!==null?r=this.left.height-this.right.height:this.left!==null?r=this.left.height+1:this.right!==null&&(r=-(this.right.height+1)),r}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(r){this._left=r,r!==null&&(r.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(r){this._right=r,r!==null&&(r.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Volume extends ToneAudioNode{constructor(){super(optionsFromArguments(Volume.getDefaults(),arguments,["volume"])),this.name="Volume";const r=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);this.input=this.output=new Gain({context:this.context,gain:r.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=r.volume,this.mute=r.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(r){!this.mute&&r?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!r&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Destination extends ToneAudioNode{constructor(){super(optionsFromArguments(Destination.getDefaults(),arguments)),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume;const r=optionsFromArguments(Destination.getDefaults(),arguments);connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=r.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(r){this.input.mute=r}chain(...r){return this.input.disconnect(),r.unshift(this.input),r.push(this.output),connectSeries(...r),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}onContextInit(s=>{s.destination=new Destination({context:s})});onContextClose(s=>{s.destination.dispose()});class TimelineValue extends Tone{constructor(r){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=r}set(r,n){return this._timeline.add({value:r,time:n}),this}get(r){const n=this._timeline.get(r);return n?n.value:this._initialValue}}class TransportEvent{constructor(r,n){this.id=TransportEvent._eventId++;const t=Object.assign(TransportEvent.getDefaults(),n);this.transport=r,this.callback=t.callback,this._once=t.once,this.time=t.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}invoke(r){this.callback&&(this.callback(r),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(r,n){super(r,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const t=Object.assign(TransportRepeatEvent.getDefaults(),n);this.duration=new TicksClass(r.context,t.duration).valueOf(),this._interval=new TicksClass(r.context,t.interval).valueOf(),this._nextTick=t.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(r){this._createEvents(r),super.invoke(r)}_createEvents(r){const n=this.transport.getTicksAtTime(r);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(r){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(r);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Transport extends ToneWithContext{constructor(){super(optionsFromArguments(Transport.getDefaults(),arguments)),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0;const r=optionsFromArguments(Transport.getDefaults(),arguments);this._ppq=r.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=r.ppq,this.bpm.setValueAtTime(r.bpm,0),readOnly(this,"bpm"),this._timeSignature=r.timeSignature,this._swingTicks=r.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(r,n){if(this._loop.get(r)&&n>=this._loopEnd&&(this.emit("loopEnd",r),this._clock.setTicksAtTime(this._loopStart,r),n=this._loopStart,this.emit("loopStart",r,this._clock.getSecondsAtTime(r)),this.emit("loop",r)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const t=n%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(t*Math.PI)*this._swingAmount;r+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*a}this._timeline.forEachAtTime(n,t=>t.invoke(r))}schedule(r,n){const t=new TransportEvent(this,{callback:r,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(t,this._timeline)}scheduleRepeat(r,n,t,a=1/0){const l=new TransportRepeatEvent(this,{callback:r,duration:new TimeClass(this.context,a).toTicks(),interval:new TimeClass(this.context,n).toTicks(),time:new TransportTimeClass(this.context,t).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(r,n){const t=new TransportEvent(this,{callback:r,once:!0,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(t,this._timeline)}clear(r){if(this._scheduledEvents.hasOwnProperty(r)){const n=this._scheduledEvents[r.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[r.toString()]}return this}_addEvent(r,n){return this._scheduledEvents[r.id.toString()]={event:r,timeline:n},n.add(r),r.id}cancel(r=0){const n=this.toTicks(r);return this._timeline.forEachFrom(n,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(n,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(r,n)=>{n=new TicksClass(this.context,n).toSeconds(),this.emit("start",r,n)}),this._clock.on("stop",r=>{this.emit("stop",r)}),this._clock.on("pause",r=>{this.emit("pause",r)})}get state(){return this._clock.getStateAtTime(this.now())}start(r,n){let t;return isDefined(n)&&(t=this.toTicks(n)),this._clock.start(r,t),this}stop(r){return this._clock.stop(r),this}pause(r){return this._clock.pause(r),this}toggle(r){return r=this.toSeconds(r),this._clock.getStateAtTime(r)!=="started"?this.start(r):this.stop(r),this}get timeSignature(){return this._timeSignature}set timeSignature(r){isArray(r)&&(r=r[0]/r[1]*4),this._timeSignature=r}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(r){this._loopStart=this.toTicks(r)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(r){this._loopEnd=this.toTicks(r)}get loop(){return this._loop.get(this.now())}set loop(r){this._loop.set(r,this.now())}setLoopPoints(r,n){return this.loopStart=r,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(r){this._swingAmount=r}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(r){this._swingTicks=this.toTicks(r)}get position(){const r=this.now(),n=this._clock.getTicksAtTime(r);return new TicksClass(this.context,n).toBarsBeatsSixteenths()}set position(r){const n=this.toTicks(r);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(r){const n=this.now(),t=this._clock.frequency.timeToTicks(r,n);this.ticks=t}get progress(){if(this.loop){const r=this.now();return(this._clock.getTicksAtTime(r)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(r){if(this._clock.ticks!==r){const n=this.now();if(this.state==="started"){const t=this._clock.getTicksAtTime(n),a=this._clock.frequency.getDurationOfTicks(Math.ceil(t)-t,n),l=n+a;this.emit("stop",l),this._clock.setTicksAtTime(r,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this._clock.setTicksAtTime(r,n)}}getTicksAtTime(r){return Math.round(this._clock.getTicksAtTime(r))}getSecondsAtTime(r){return this._clock.getSecondsAtTime(r)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(r){this._clock.frequency.multiplier=r}nextSubdivision(r){if(r=this.toTicks(r),this.state!=="started")return 0;{const n=this.now(),t=this.getTicksAtTime(n),a=r-t%r;return this._clock.nextTickTime(a,n)}}syncSignal(r,n){if(!n){const a=this.now();if(r.getValueAtTime(a)!==0){const o=1/(60/this.bpm.getValueAtTime(a)/this.PPQ);n=r.getValueAtTime(a)/o}else n=0}const t=new Gain(n);return this.bpm.connect(t),t.connect(r._param),this._syncedSignals.push({initial:r.value,ratio:t,signal:r}),r.value=0,this}unsyncSignal(r){for(let n=this._syncedSignals.length-1;n>=0;n--){const t=this._syncedSignals[n];t.signal===r&&(t.ratio.dispose(),t.signal.value=t.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Emitter.mixin(Transport);onContextInit(s=>{s.transport=new Transport({context:s})});onContextClose(s=>{s.transport.dispose()});class Source extends ToneAudioNode{constructor(r){super(r),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:r.mute,volume:r.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=r.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}_clampToCurrentTime(r){return this._synced?r:Math.max(r,this.context.currentTime)}start(r,n,t){let a=isUndef(r)&&this._synced?this.context.transport.seconds:this.toSeconds(r);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")assert(GT(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,n,t);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const l=this._state.get(a);l&&(l.offset=this.toSeconds(defaultArg(n,0)),l.duration=t?this.toSeconds(t):void 0);const o=this.context.transport.schedule(c=>{this._start(c,n,t)},a);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(a,n,t);return this}stop(r){let n=isUndef(r)&&this._synced?this.context.transport.seconds:this.toSeconds(r);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||isDefined(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const t=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(t)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(r,n,t){return r=this.toSeconds(r),this._state.getValueAtTime(r)==="started"&&(this._state.cancel(r),this._restart(r,n,t)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(r,n)=>{if(n>0){const t=this._state.get(n);if(t&&t.state==="started"&&t.time!==n){const a=n-this.toSeconds(t.time);let l;t.duration&&(l=this.toSeconds(t.duration)-a),this._start(r,this.toSeconds(t.offset)+a,l)}}},this._syncedStop=r=>{const n=this.context.transport.getSecondsAtTime(Math.max(r-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(r)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(r=>this.context.transport.clear(r)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const r=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:r.playbackRate}),this.loop=r.loop,this.loopStart=r.loopStart,this.loopEnd=r.loopEnd,this._buffer=new ToneAudioBuffer(r.url,r.onload,r.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(r){this._fadeIn=r}get fadeOut(){return this._fadeOut}set fadeOut(r){this._fadeOut=r}get curve(){return this._curve}set curve(r){this._curve=r}start(r,n,t,a=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(r);this._startGain(l,a),this.loop?n=defaultArg(n,this.loopStart):n=defaultArg(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,i=this.toSeconds(this.loopStart),f=c-i;GTE(o,c)&&(o=(o-i)%f+i),EQ(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,o)),isDefined(t)){let c=this.toSeconds(t);c=Math.max(c,0),this.stop(l+c)}return this}_stopSource(r){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(r)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(r){this._source.loopStart=this.toSeconds(r)}get loopEnd(){return this._source.loopEnd}set loopEnd(r){this._source.loopEnd=this.toSeconds(r)}get buffer(){return this._buffer}set buffer(r){this._buffer.set(r)}get loop(){return this._source.loop}set loop(r){this._source.loop=r,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function generateWaveform(s,r){return __awaiter(this,void 0,void 0,function*(){const n=r/s.context.sampleRate,t=new OfflineContext(1,n,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/n,detune:0,context:t})).toDestination().start(0),(yield t.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){super(optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const r=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);connect(this._oscillator,this._gainNode),this.type=r.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:r.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:r.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(r){const n=this.toSeconds(r);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(r){this._oscillator.stop(r)}setPeriodicWave(r){return this._oscillator.setPeriodicWave(r),this}get type(){return this._oscillator.type}set type(r){this._oscillator.type=r}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){super(optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const r=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:r.detune}),readOnly(this,"detune"),this._partials=r.partials,this._partialCount=r.partialCount,this._type=r.type,r.partialCount&&r.type!=="custom"&&(this._type=this.baseType+r.partialCount.toString()),this.phase=r.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(r){const n=this.toSeconds(r),t=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=t,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(r){const n=this.toSeconds(r);this._oscillator&&this._oscillator.stop(n)}_restart(r){const n=this.toSeconds(r);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(n=>n.phase===this._phase&&deepEquals(n.partials,this._partials));{const r=Oscillator._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=r?r.partialCount:this._partialCount,r}}get type(){return this._type}set type(r){this._type=r;const n=["sine","square","sawtooth","triangle"].indexOf(r)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=r);else{const t=this._getCachedPeriodicWave();if(isDefined(t)){const{partials:a,wave:l}=t;this._wave=l,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,l]=this._getRealImaginary(r,this._phase),o=this.context.createPeriodicWave(a,l);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(r){this.partialCount&&this._type!=="custom"&&r!=="custom"?this.type=r+this.partialCount:this.type=r}get partialCount(){return this._partialCount}set partialCount(r){assertRange(r,0);let n=this._type;const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(t&&(n=t[1]),this._type!=="custom")r===0?this.type=n:this.type=n+r.toString();else{const a=new Float32Array(r);this._partials.forEach((l,o)=>a[o]=l),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(r,n){let a=2048;const l=new Float32Array(a),o=new Float32Array(a);let c=1;if(r==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[l,o]}else{const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(r);i?(c=parseInt(i[2],10)+1,this._partialCount=parseInt(i[2],10),r=i[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let i=1;i<a;++i){const f=2/(i*Math.PI);let m;switch(r){case"sine":m=i<=c?1:0,this._partials[i-1]=m;break;case"square":m=i&1?2*f:0,this._partials[i-1]=m;break;case"sawtooth":m=f*(i&1?1:-1),this._partials[i-1]=m;break;case"triangle":i&1?m=2*(f*f)*(i-1>>1&1?-1:1):m=0,this._partials[i-1]=m;break;case"custom":m=this._partials[i-1];break;default:throw new TypeError("Oscillator: invalid type: "+r)}m!==0?(l[i]=-m*Math.sin(n*i),o[i]=m*Math.cos(n*i)):(l[i]=0,o[i]=0)}return[l,o]}_inverseFFT(r,n,t){let a=0;const l=r.length;for(let o=0;o<l;o++)a+=r[o]*Math.cos(o*t)+n[o]*Math.sin(o*t);return a}getInitialValue(){const[r,n]=this._getRealImaginary(this._type,0);let t=0;const a=Math.PI*2,l=32;for(let o=0;o<l;o++)t=Math.max(this._inverseFFT(r,n,o/l*a),t);return clamp(-this._inverseFFT(r,n,this._phase)/t,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(r){this._partials=r,this._partialCount=this._partials.length,r.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(r){this._phase=r*Math.PI/180,this.type=this._type}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class SignalOperator extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"])))}connect(r,n=0,t=0){return connectSignal(this,r,n,t),this}}class WaveShaper extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const r=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);isArray(r.mapping)||r.mapping instanceof Float32Array?this.curve=Float32Array.from(r.mapping):isFunction(r.mapping)&&this.setMap(r.mapping,r.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(r,n=1024){const t=new Float32Array(n);for(let a=0,l=n;a<l;a++){const o=a/(l-1)*2-1;t[a]=r(o,a)}return this.curve=t,this}get curve(){return this._shaper.curve}set curve(r){this._shaper.curve=r}get oversample(){return this._shaper.oversample}set oversample(r){const n=["none","2x","4x"].some(t=>t.includes(r));assert(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=r}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:r=>(r+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){super(Object.assign(optionsFromArguments(Multiply.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const r=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Gain({context:this.context,minValue:r.minValue,maxValue:r.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){super(optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context});const r=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase,type:r.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:r.phase,type:r.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:r.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(r){this._modulator.start(r),this._carrier.start(r)}_stop(r){this._modulator.stop(r),this._carrier.stop(r)}_restart(r){this._modulator.restart(r),this._carrier.restart(r)}get type(){return this._carrier.type}set type(r){this._carrier.type=r}get baseType(){return this._carrier.baseType}set baseType(r){this._carrier.baseType=r}get partialCount(){return this._carrier.partialCount}set partialCount(r){this._carrier.partialCount=r}get modulationType(){return this._modulator.type}set modulationType(r){this._modulator.type=r}get phase(){return this._carrier.phase}set phase(r){this._carrier.phase=r,this._modulator.phase=r}get partials(){return this._carrier.partials}set partials(r){this._carrier.partials=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){super(optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0});const r=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:r.detune,frequency:0,onstop:()=>this.onstop(this),phase:r.phase,type:r.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),this._modulator=new Oscillator({context:this.context,phase:r.phase,type:r.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:r.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:r.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(r){this._modulator.start(r),this._carrier.start(r)}_stop(r){this._modulator.stop(r),this._carrier.stop(r)}_restart(r){return this._modulator.restart(r),this._carrier.restart(r),this}get type(){return this._carrier.type}set type(r){this._carrier.type=r}get baseType(){return this._carrier.baseType}set baseType(r){this._carrier.baseType=r}get partialCount(){return this._carrier.partialCount}set partialCount(r){this._carrier.partialCount=r}get modulationType(){return this._modulator.type}set modulationType(r){this._modulator.type=r}get phase(){return this._carrier.phase}set phase(r){this._carrier.phase=r,this._modulator.phase=r}get partials(){return this._carrier.partials}set partials(r){this._carrier.partials=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){super(optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:n=>n<=0?-1:1});const r=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);this.width=new Signal({context:this.context,units:"audioRange",value:r.width}),this._triangle=new Oscillator({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(r){r=this.toSeconds(r),this._triangle.start(r),this._widthGate.gain.setValueAtTime(1,r)}_stop(r){r=this.toSeconds(r),this._triangle.stop(r),this._widthGate.gain.cancelScheduledValues(r),this._widthGate.gain.setValueAtTime(0,r)}_restart(r){this._triangle.restart(r),this._widthGate.gain.cancelScheduledValues(r),this._widthGate.gain.setValueAtTime(1,r)}get phase(){return this._triangle.phase}set phase(r){this._triangle.phase=r}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(r){this._triangle.type=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){super(optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const r=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:r.detune}),this._spread=r.spread,this._type=r.type,this._phase=r.phase,this._partials=r.partials,this._partialCount=r.partialCount,this.count=r.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(r){r=this.toSeconds(r),this._forEach(n=>n.start(r))}_stop(r){r=this.toSeconds(r),this._forEach(n=>n.stop(r))}_restart(r){this._forEach(n=>n.restart(r))}_forEach(r){for(let n=0;n<this._oscillators.length;n++)r(this._oscillators[n],n)}get type(){return this._type}set type(r){this._type=r,this._forEach(n=>n.type=r)}get spread(){return this._spread}set spread(r){if(this._spread=r,this._oscillators.length>1){const n=-r/2,t=r/(this._oscillators.length-1);this._forEach((a,l)=>a.detune.value=n+t*l)}}get count(){return this._oscillators.length}set count(r){if(assertRange(r,1),this._oscillators.length!==r){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<r;n++){const t=new Oscillator({context:this.context,volume:-6-r*1.1,type:this._type,phase:this._phase+n/r*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):noOp});this.type==="custom"&&(t.partials=this._partials),this.frequency.connect(t.frequency),this.detune.connect(t.detune),t.detune.overridden=!1,t.connect(this.output),this._oscillators[n]=t}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(r){this._phase=r,this._forEach((n,t)=>n.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(r){this._forEach(n=>n.baseType=r),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(r){this._partials=r,this._partialCount=this._partials.length,r.length&&(this._type="custom",this._forEach(n=>n.partials=r))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(r){this._partialCount=r,this._forEach(n=>n.partialCount=r),this._type=this._oscillators[0].type}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(r=>r.dispose()),this}}class PWMOscillator extends Source{constructor(){super(optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2});const r=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new PulseOscillator({context:this.context,frequency:r.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(r){r=this.toSeconds(r),this._modulator.start(r),this._pulse.start(r)}_stop(r){r=this.toSeconds(r),this._modulator.stop(r),this._pulse.stop(r)}_restart(r){this._modulator.restart(r),this._pulse.restart(r)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(r){this._modulator.phase=r}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){super(optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const r=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:r.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:r.detune}),readOnly(this,["frequency","detune"]),this.set(r)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(r){this._oscillator.start(r)}_stop(r){this._oscillator.stop(r)}_restart(r){return this._oscillator.restart(r),this}get type(){let r="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(r=this._sourceType),r+this._oscillator.type}set type(r){r.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(2)):r.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(2)):r.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(3)):r==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):r==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=r)}get partials(){return this._oscillator.partials}set partials(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=r)}get partialCount(){return this._oscillator.partialCount}set partialCount(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=r)}set(r){return Reflect.has(r,"type")&&r.type&&(this.type=r.type),super.set(r),this}_createNewOscillator(r){if(r!==this._sourceType){this._sourceType=r;const n=OmniOscillatorSourceMap[r],t=this.now();if(this._oscillator){const a=this._oscillator;a.stop(t),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(t)}}get phase(){return this._oscillator.phase}set phase(r){this._oscillator.phase=r}get sourceType(){return this._sourceType}set sourceType(r){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),r==="fm"?this.type="fm"+n:r==="am"?this.type="am"+n:r==="fat"?this.type="fat"+n:r==="oscillator"?this.type=n:r==="pulse"?this.type="pulse":r==="pwm"&&(this.type="pwm")}_getOscType(r,n){return r instanceof OmniOscillatorSourceMap[n]}get baseType(){return this._oscillator.baseType}set baseType(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&r!=="pulse"&&r!=="pwm"&&(this._oscillator.baseType=r)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(r){this._getOscType(this._oscillator,"fat")&&isNumber(r)&&(this._oscillator.count=r)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(r){this._getOscType(this._oscillator,"fat")&&isNumber(r)&&(this._oscillator.spread=r)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(r){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString(r)&&(this._oscillator.modulationType=r)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){return generateWaveform(this,r)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function range(s,r=1/0){const n=new WeakMap;return function(t,a){Reflect.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(l){assertRange(l,s,r),n.set(this,l)}})}}function timeRange(s,r=1/0){const n=new WeakMap;return function(t,a){Reflect.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(l){assertRange(this.toSeconds(l),s,r),n.set(this,l)}})}}class Player extends Source{constructor(){super(optionsFromArguments(Player.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const r=optionsFromArguments(Player.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,r.onload),onerror:r.onerror,reverse:r.reverse,url:r.url}),this.autostart=r.autostart,this._loop=r.loop,this._loopStart=r.loopStart,this._loopEnd=r.loopEnd,this._playbackRate=r.playbackRate,this.fadeIn=r.fadeIn,this.fadeOut=r.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(r){return __awaiter(this,void 0,void 0,function*(){return yield this._buffer.load(r),this._onload(),this})}_onload(r=noOp){r(),this.autostart&&this.start()}_onSourceEnd(r){this.onstop(this),this._activeSources.delete(r),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(r,n,t){return super.start(r,n,t),this}_start(r,n,t){this._loop?n=defaultArg(n,this._loopStart):n=defaultArg(n,0);const a=this.toSeconds(n),l=t;t=defaultArg(t,Math.max(this._buffer.duration-a,0));let o=this.toSeconds(t);o=o/this._playbackRate,r=this.toSeconds(r);const c=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(r+o),this._state.setStateAtTime("stopped",r+o,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&isUndef(l)?c.start(r,a):c.start(r,a,o-this.toSeconds(this.fadeOut))}_stop(r){const n=this.toSeconds(r);this._activeSources.forEach(t=>t.stop(n))}restart(r,n,t){return super.restart(r,n,t),this}_restart(r,n,t){this._stop(r),this._start(r,n,t)}seek(r,n){const t=this.toSeconds(n);if(this._state.getValueAtTime(t)==="started"){const a=this.toSeconds(r);this._stop(t),this._start(t,a)}return this}setLoopPoints(r,n){return this.loopStart=r,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(r){this._loopStart=r,this.buffer.loaded&&assertRange(this.toSeconds(r),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=r})}get loopEnd(){return this._loopEnd}set loopEnd(r){this._loopEnd=r,this.buffer.loaded&&assertRange(this.toSeconds(r),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=r})}get buffer(){return this._buffer}set buffer(r){this._buffer.set(r)}get loop(){return this._loop}set loop(r){if(this._loop!==r&&(this._loop=r,this._activeSources.forEach(n=>{n.loop=r}),r)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(r){this._playbackRate=r;const n=this.now(),t=this._state.getNextState("stopped",n);t&&t.implicitEnd&&(this._state.cancel(t.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(r,n)})}get reverse(){return this._buffer.reverse}set reverse(r){this._buffer.reverse=r}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(r=>r.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}__decorate([timeRange(0)],Player.prototype,"fadeIn",void 0);__decorate([timeRange(0)],Player.prototype,"fadeOut",void 0);class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:r=>Math.abs(r)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){super(optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const r=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=r.attack,this.decay=r.decay,this.sustain=r.sustain,this.release=r.release,this.attackCurve=r.attackCurve,this.releaseCurve=r.releaseCurve,this.decayCurve=r.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(r,n){if(isString(r))return r;{let t;for(t in EnvelopeCurves)if(EnvelopeCurves[t][n]===r)return t;return r}}_setCurve(r,n,t){if(isString(t)&&Reflect.has(EnvelopeCurves,t)){const a=EnvelopeCurves[t];isObject(a)?r!=="_decayCurve"&&(this[r]=a[n]):this[r]=a}else if(isArray(t)&&r!=="_decayCurve")this[r]=t;else throw new Error("Envelope: invalid curve: "+t)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(r){this._setCurve("_attackCurve","In",r)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(r){this._setCurve("_releaseCurve","Out",r)}get decayCurve(){return this._decayCurve}set decayCurve(r){assert(["linear","exponential"].some(n=>n===r),`Invalid envelope curve: ${r}`),this._decayCurve=r}triggerAttack(r,n=1){this.log("triggerAttack",r,n),r=this.toSeconds(r);let a=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),o=this.getValueAtTime(r);if(o>0){const c=1/a;a=(1-o)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(r),this._sig.setValueAtTime(n,r);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,a,r);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,a,r);else{this._sig.cancelAndHoldAtTime(r);let c=this._attackCurve;for(let i=1;i<c.length;i++)if(c[i-1]<=o&&o<=c[i]){c=this._attackCurve.slice(i),c[0]=o;break}this._sig.setValueCurveAtTime(c,r,a,n)}if(l&&this.sustain<1){const c=n*this.sustain,i=r+a;this.log("decay",i),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,l+i):this._sig.exponentialApproachValueAtTime(c,i,l)}return this}triggerRelease(r){this.log("triggerRelease",r),r=this.toSeconds(r);const n=this.getValueAtTime(r);if(n>0){const t=this.toSeconds(this.release);t<this.sampleTime?this._sig.setValueAtTime(0,r):this._releaseCurve==="linear"?this._sig.linearRampTo(0,t,r):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,t,r):(assert(isArray(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(r),this._sig.setValueCurveAtTime(this._releaseCurve,r,t,n))}return this}getValueAtTime(r){return this._sig.getValueAtTime(r)}triggerAttackRelease(r,n,t=1){return n=this.toSeconds(n),this.triggerAttack(n,t),this.triggerRelease(n+this.toSeconds(r)),this}cancel(r){return this._sig.cancelScheduledValues(this.toSeconds(r)),this}connect(r,n=0,t=0){return connectSignal(this,r,n,t),this}asArray(r=1024){return __awaiter(this,void 0,void 0,function*(){const n=r/this.context.sampleRate,t=new OfflineContext(1,n,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=a+this.toSeconds(this.release),o=l*.1,c=l+o,i=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/c,decay:n*this.toSeconds(this.decay)/c,release:n*this.toSeconds(this.release)/c,context:t}));return i._sig.toDestination(),i.triggerAttackRelease(n*(a+o)/c,0),(yield t.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let r,n;const t=[];for(r=0;r<128;r++)t[r]=Math.sin(r/(128-1)*(Math.PI/2));const a=[],l=6.4;for(r=0;r<128-1;r++){n=r/(128-1);const u=Math.sin(n*(Math.PI*2)*l-Math.PI/2)+1;a[r]=u/10+n*.83}a[128-1]=1;const o=[],c=5;for(r=0;r<128;r++)o[r]=Math.ceil(r/(128-1)*c)/c;const i=[];for(r=0;r<128;r++)n=r/(128-1),i[r]=.5*(1-Math.cos(Math.PI*n));const f=[];for(r=0;r<128;r++){n=r/(128-1);const u=Math.pow(n,3)*4+.2,p=Math.cos(u*Math.PI*2*n);f[r]=Math.abs(p*(1-n))}function m(u){const p=new Array(u.length);for(let g=0;g<u.length;g++)p[g]=1-u[g];return p}function _(u){return u.slice(0).reverse()}return{bounce:{In:m(f),Out:f},cosine:{In:t,Out:_(t)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:m(a)},sine:{In:i,Out:m(i)},step:{In:o,Out:m(o)}}})();class Instrument extends ToneAudioNode{constructor(){super(optionsFromArguments(Instrument.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const r=optionsFromArguments(Instrument.getDefaults(),arguments);this._volume=this.output=new Volume({context:this.context,volume:r.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let r=!1;return this._synced||(this._synced=!0,r=!0),r}_syncMethod(r,n){const t=this["_original_"+r]=this[r];this[r]=(...a)=>{const l=a[n],o=this.context.transport.schedule(c=>{a[n]=c,t.apply(this,a)},l);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(r=>this.context.transport.clear(r)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(r,n,t,a){const l=this.toSeconds(t),o=this.toSeconds(n);return this.triggerAttack(r,l,a),this.triggerRelease(l+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Monophonic extends Instrument{constructor(){super(optionsFromArguments(Monophonic.getDefaults(),arguments));const r=optionsFromArguments(Monophonic.getDefaults(),arguments);this.portamento=r.portamento,this.onsilence=r.onsilence}static getDefaults(){return Object.assign(Instrument.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(r,n,t=1){this.log("triggerAttack",r,n,t);const a=this.toSeconds(n);return this._triggerEnvelopeAttack(a,t),this.setNote(r,a),this}triggerRelease(r){this.log("triggerRelease",r);const n=this.toSeconds(r);return this._triggerEnvelopeRelease(n),this}setNote(r,n){const t=this.toSeconds(n),a=r instanceof FrequencyClass?r.toFrequency():r;if(this.portamento>0&&this.getLevelAtTime(t)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,l,t)}else this.frequency.setValueAtTime(a,t);return this}}__decorate([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}let Synth$1=class Rn extends Monophonic{constructor(){super(optionsFromArguments(Rn.getDefaults(),arguments)),this.name="Synth";const r=optionsFromArguments(Rn.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:r.detune,onstop:()=>this.onsilence(this)},r.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},r.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(r,n){if(this.envelope.triggerAttack(r,n),this.oscillator.start(r),this.envelope.sustain===0){const t=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(r+t+a)}}_triggerEnvelopeRelease(r){this.envelope.triggerRelease(r),this.oscillator.stop(r+this.toSeconds(this.envelope.release))}getLevelAtTime(r){return r=this.toSeconds(r),this.envelope.getValueAtTime(r)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};class MembraneSynth extends Synth$1{constructor(){super(optionsFromArguments(MembraneSynth.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const r=optionsFromArguments(MembraneSynth.getDefaults(),arguments);this.pitchDecay=r.pitchDecay,this.octaves=r.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth$1.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(r,n){const t=this.toSeconds(n),a=this.toFrequency(r instanceof FrequencyClass?r.toFrequency():r),l=a*this.octaves;return this.oscillator.frequency.setValueAtTime(l,t),this.oscillator.frequency.exponentialRampToValueAtTime(a,t+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);const workletContext=new Set;function addToWorklet(s){workletContext.add(s)}function registerProcessor(s,r){const n=`registerProcessor("${s}", ${r})`;workletContext.add(n)}function getWorkletGlobalScope(){return Array.from(workletContext).join(`
`)}class ToneAudioWorklet extends ToneAudioNode{constructor(r){super(r),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=noOp;const n=URL.createObjectURL(new Blob([getWorkletGlobalScope()],{type:"text/javascript"})),t=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(n,t).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(t,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);let Sampler$1=class Dn extends Instrument{constructor(){super(optionsFromArguments(Dn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const r=optionsFromArguments(Dn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(r.urls).forEach(t=>{const a=parseInt(t,10);if(assert(isNote(t)||isNumber(a)&&isFinite(a),`url key is neither a note or midi pitch: ${t}`),isNote(t)){const l=new FrequencyClass(this.context,t).toMidi();n[l]=r.urls[t]}else isNumber(a)&&isFinite(a)&&(n[a]=r.urls[a])}),this._buffers=new ToneAudioBuffers({urls:n,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),this.attack=r.attack,this.release=r.release,this.curve=r.curve,this._buffers.loaded&&Promise.resolve().then(r.onload)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(r){let t=0;for(;t<96;){if(this._buffers.has(r+t))return-t;if(this._buffers.has(r-t))return t;t++}throw new Error(`No available buffers for note: ${r}`)}triggerAttack(r,n,t=1){return this.log("triggerAttack",r,n,t),Array.isArray(r)||(r=[r]),r.forEach(a=>{const l=ftomf(new FrequencyClass(this.context,a).toFrequency()),o=Math.round(l),c=l-o,i=this._findClosest(o),f=o-i,m=this._buffers.get(f),_=intervalToFrequencyRatio(i+c),u=new ToneBufferSource({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);u.start(n,0,m.duration/_,t),isArray(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),g=p.indexOf(u);g!==-1&&p.splice(g,1)}}}),this}triggerRelease(r,n){return this.log("triggerRelease",r,n),Array.isArray(r)||(r=[r]),r.forEach(t=>{const a=new FrequencyClass(this.context,t).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const l=this._activeSources.get(a);n=this.toSeconds(n),l.forEach(o=>{o.stop(n)}),this._activeSources.set(a,[])}}),this}releaseAll(r){const n=this.toSeconds(r);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(r,n,t,a=1){const l=this.toSeconds(t);return this.triggerAttack(r,l,a),isArray(n)?(assert(isArray(r),"notes must be an array when duration is array"),r.forEach((o,c)=>{const i=n[Math.min(c,n.length-1)];this.triggerRelease(o,l+this.toSeconds(i))})):this.triggerRelease(r,l+this.toSeconds(n)),this}add(r,n,t){if(assert(isNote(r)||isFinite(r),`note must be a pitch or midi: ${r}`),isNote(r)){const a=new FrequencyClass(this.context,r).toMidi();this._buffers.add(a,n,t)}else this._buffers.add(r,n,t);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(r=>{r.forEach(n=>n.dispose())}),this._activeSources.clear(),this}};__decorate([timeRange(0)],Sampler$1.prototype,"attack",void 0);__decorate([timeRange(0)],Sampler$1.prototype,"release",void 0);class CrossFade extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b];const r=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);this.fade=new Signal({context:this.context,units:"normalRange",value:r.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(r){super(r),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(r.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(r){return this._internalChannels.push(r),this.effectSend.chain(r,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Panner extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Panner.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const r=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);this.pan=new Param({context:this.context,param:this._panner.pan,value:r.pan,minValue:-1,maxValue:1}),this._panner.channelCount=r.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class BitCrusher extends Effect{constructor(){super(optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const r=optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new BitCrusherWorklet({context:this.context,bits:r.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class BitCrusherWorklet extends ToneAudioWorklet{constructor(){super(optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments)),this.name="BitCrusherWorklet";const r=optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.bits=new Param({context:this.context,value:r.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return workletName}onReady(r){connectSeries(this.input,r,this.output);const n=r.parameters.get("bits");this.bits.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Solo extends ToneAudioNode{constructor(){super(optionsFromArguments(Solo.getDefaults(),arguments,["solo"])),this.name="Solo";const r=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=r.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(r){r?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){super(optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const r=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Panner({context:this.context,pan:r.pan,channelCount:r.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:r.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=r.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}let Channel$1=class Vr extends ToneAudioNode{constructor(){super(optionsFromArguments(Vr.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const r=optionsFromArguments(Vr.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Solo({solo:r.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:r.pan,volume:r.volume,mute:r.mute,channelCount:r.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(r){this._solo.solo=r}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(r){this._panVol.mute=r}_getBus(r){return Vr.buses.has(r)||Vr.buses.set(r,new Gain({context:this.context})),Vr.buses.get(r)}send(r,n=0){const t=this._getBus(r),a=new Gain({context:this.context,units:"decibels",gain:n});return this.connect(a),a.connect(t),a}receive(r){return this._getBus(r).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};Channel$1.buses=new Map;class Listener extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}onContextInit(s=>{s.listener=new Listener({context:s})});onContextClose(s=>{s.listener.dispose()});class Compressor extends ToneAudioNode{constructor(){super(optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const r=optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:r.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:r.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:r.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:r.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:r.ratio}),readOnly(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const r=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Compressor({context:this.context,ratio:20,attack:.003,release:.01,threshold:r.threshold}),this.threshold=this._compressor.threshold,readOnly(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}function immediate(){return getContext().immediate()}getContext().transport;getContext().destination;getContext().destination;getContext().listener;getContext().draw;const context=getContext();var rnbo_webaudio={exports:{}};/*!
 * 
 * Copyright (c) 2022 Cycling '74
 *
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * v1.2.5
 *
 */(function(module,exports){var factory;factory=function(){return(()=>{var __webpack_modules__={133:(module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__(852).Float32Buffer,__webpack_require__(852).Float64Buffer,__webpack_require__(852).Float32MultiBuffer,__webpack_require__(852).Float64MultiBuffer,__webpack_require__(852).IntBuffer,__webpack_require__(852).UInt8Buffer,__webpack_require__(126).ExternalLoaderFactory;let Xoshiro=__webpack_require__(925);var ParameterTypeNumber=0,ParameterTypeBang=1,ParameterTypeList=2,ParameterTypeSignal=3,ParameterTypeCount=4,IOTypeInput=0,IOTypeOutput=1,IOTypeUndefined=2;function nextpoweroftwo(s){return s===0?1:(s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,1+(s|=s>>16))}function TAG(s){let r=0;for(let n=0;n<s.length;n++)r=s.charCodeAt(n)+(r<<6)+(r<<16)-r;return 0|r}function _evalSrc(src){var rnboObj;return eval(src),rnboObj}Xoshiro.reset,Xoshiro.next,module.exports={deserializeSrc:function(s){return _evalSrc(s)},deserializeJSON:function(s){var r=s;return typeof r=="string"&&(r={src:s}),_evalSrc(r.src)},extractOptionsFromJSON:function(s){var r=s;return typeof r=="string"&&(r=JSON.parse(s)),r.options?r.options:{}},evalFunction(functionAsString){var tmpFunction,functionAsString="tmpFunction = "+functionAsString;return eval(functionAsString),tmpFunction},nextpoweroftwo,ParameterTypeNumber,ParameterTypeBang,ParameterTypeList,ParameterTypeSignal,ParameterTypeCount,IOTypeInput,IOTypeOutput,IOTypeUndefined:IOTypeUndefined.length,TAG}},852:s=>{function r(){let q=this.dataRef.getSizeInBytes()/this.BASEARRAYVIEW.BYTES_PER_ELEMENT,M=this.getChannels();return M?q/M:0}function n(q,M){let D=q*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*M;this.requestedChannels=M,this.dataRef.requestSizeInBytes(D,!1)}function t(q,M){return this[this.getChannels()*Math.floor(M)+q]}function a(q,M){const D=this.getChannels();return q<0||q>=D||M<0||M>=this.getSize()?0:this[D*Math.floor(M)+q]}function l(q,M,D){this[this.getChannels()*Math.floor(M)+q]=D}function o(q,M,D){const X=this.getChannels();q<0||q>=X||M<0||M>=this.getSize()||(this[X*Math.floor(M)+q]=D)}function c(){return this.dataRef.channels}function i(){return this.dataRef.sampleRate}function f(q){this.dataRef.sampleRate=q}function m(){this.dataRef.clear()}function _(q){if(q!==this.dataRef.channels){let M=this.getSize();return this.clear(),this.dataRef.channels=q,this.setSize(M)}return this}function u(){if(this.isAudioBuffer&&this.requestedChannels!==this.getChannels()&&this.requestedChannels!==0&&(this.getChannels()>0&&this.setZero(),this.dataRef.channels=this.requestedChannels,this.requestedChannels=0),this.dataRef.bytesToAllocate>0&&(this.dataRef.bytesToAllocate!==this.dataRef.getSizeInBytes()||!this.dataRef.isInternallyAllocated)){let q;if(this.dataRef.isInternallyAllocated){let D=Math.min(this.dataRef.arrayBuffer.byteLength,this.dataRef.bytesToAllocate);D/=this.BASEARRAYVIEW.BYTES_PER_ELEMENT,q=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer,0,D)}this.dataRef.arrayBuffer=new ArrayBuffer(this.dataRef.bytesToAllocate),this.dataRef.isInternallyAllocated=!0;let M=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer);return q?M.set(q):this.dataRef.wantsFillFlag=!0,x(M,this.dataRef,this.BASEARRAYVIEW),this.isAudioBuffer&&k(M),M}return this}function p(q){let M=this.getChannels();return this.requestedChannels=M,this.dataRef.requestSizeInBytes(q*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*M,!0),this.allocateIfNeeded()}function g(){this.fill&&this.fill(0)}function y(){return this.touched}function S(q){this.touched=q}function b(q){this.dataRef.setWantsFill(q)}function E(){return this.dataRef.getIndex()}function x(q,M,D){q.dataRef=M,q.BASEARRAYVIEW=D,q.getSize=r,q.requestSize=n,q.setSize=p,q.allocateIfNeeded=u,q.setZero=g,q.clear=m,q.getChannels=c,q.getSampleRate=i,q.setWantsFill=b,q.getIndex=E,M.setZero=function(){q.setZero()},q.touched=!1,q.getTouched=y,q.setTouched=S}function k(q){q.getSample=t,q.getSampleSafe=a,q.setSample=l,q.setSampleSafe=o,q.setChannels=_,q.setSampleRate=f,q.isAudioBuffer=!0,q.requestedChannels=0}let T=function(q,M){let D;return D=q.arrayBuffer?new M(q.arrayBuffer):{},x(D,q,M),D};(T.prototype=Object.create(null)).constructor=T;let j=function(q,M){let D=T.call(this,q,M);return k(D),D};(j.prototype=Object.create(T)).constructor=j;let A=function(q){return j.call(this,q,Float32Array)};(A.prototype=Object.create(j.prototype)).constructor=A;let C=function(q){return j.call(this,q,Float64Array)};(C.prototype=Object.create(j.prototype)).constructor=C;let I=function(q,M){let D=new M(q.dataRefs[q.current]);return D.multiRef=q,D.setCurrent=function(X){this.multiRef.setCurrent(Math.round(X))},D.getIndex=function(){return this.multiRef.getIndex()},D};I.prototype=Object.create(null),I.constructor=I;let F=function(q){return I.call(this,q,A)};(F.prototype=Object.create(I.prototype)).constructor=F;let N=function(q){return I.call(this,q,C)};(N.prototype=Object.create(I.prototype)).constructor=N;let z=function(q){return T.call(this,q,Int32Array)};(z.prototype=Object.create(T.prototype)).constructor=z;let R=function(q){return T.call(this,q,Uint8Array)};(R.prototype=Object.create(T.prototype)).constructor=R,s.exports={Float32Buffer:A,Float64Buffer:C,Float32MultiBuffer:F,Float64MultiBuffer:N,IntBuffer:z,UInt8Buffer:R}},126:s=>{var r=function(){};(r.prototype=Object.create(null)).constructor=r,r.prototype.setEngineAndPatcher=function(){},r.prototype.initialize=function(){},r.prototype.getNumParameters=function(){return 0},r.prototype.setParameterValue=function(){},r.prototype.prepareToProcess=function(){},r.prototype.process=function(){},s.exports={ExternalLoaderFactory:function(){return console.log("WARNING: Externals are not yet supported in Javascript"),new r}}},925:s=>{function r(n,t,a,l){a[l]=n[t]+0x9e3779b97f4a7c15n,a[l]=0xbf58476d1ce4e5b9n*(a[l]^a[l]>>30n),a[l]=0x94d049bb133111ebn*(a[l]^a[l]>>27n),a[l]=a[l]^a[l]>>31n}s.exports={reset:function(n,t){let a=new BigUint64Array(1);a[0]=BigInt(Math.trunc(1e6*n)),r(a,0,t,0),r(t,0,t,1),r(t,1,t,2),r(t,2,t,3)},next:function(n){let t=new BigUint64Array(1),a=new BigUint64Array(1);return a[0]=n[0]+n[3],t[0]=n[1]<<17n,n[2]^=n[0],n[3]^=n[1],n[1]^=n[2],n[0]^=n[3],n[2]^=t[0],n[3]=n[3]<<45n|n[3]>>19n,a[0]=a[0]>>11n,2220446049250313e-31*Number(a[0])-1}}},766:(s,r)=>{r.byteLength=function(m){var _=i(m),u=_[0],p=_[1];return 3*(u+p)/4-p},r.toByteArray=function(m){var _,u,p=i(m),g=p[0],y=p[1],S=new a(function(x,k,T){return 3*(k+T)/4-T}(0,g,y)),b=0,E=y>0?g-4:g;for(u=0;u<E;u+=4)_=t[m.charCodeAt(u)]<<18|t[m.charCodeAt(u+1)]<<12|t[m.charCodeAt(u+2)]<<6|t[m.charCodeAt(u+3)],S[b++]=_>>16&255,S[b++]=_>>8&255,S[b++]=255&_;return y===2&&(_=t[m.charCodeAt(u)]<<2|t[m.charCodeAt(u+1)]>>4,S[b++]=255&_),y===1&&(_=t[m.charCodeAt(u)]<<10|t[m.charCodeAt(u+1)]<<4|t[m.charCodeAt(u+2)]>>2,S[b++]=_>>8&255,S[b++]=255&_),S},r.fromByteArray=function(m){for(var _,u=m.length,p=u%3,g=[],y=16383,S=0,b=u-p;S<b;S+=y)g.push(f(m,S,S+y>b?b:S+y));return p===1?(_=m[u-1],g.push(n[_>>2]+n[_<<4&63]+"==")):p===2&&(_=(m[u-2]<<8)+m[u-1],g.push(n[_>>10]+n[_>>4&63]+n[_<<2&63]+"=")),g.join("")};for(var n=[],t=[],a=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=l.length;o<c;++o)n[o]=l[o],t[l.charCodeAt(o)]=o;function i(m){var _=m.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=m.indexOf("=");return u===-1&&(u=_),[u,u===_?0:4-u%4]}function f(m,_,u){for(var p,g,y=[],S=_;S<u;S+=3)p=(m[S]<<16&16711680)+(m[S+1]<<8&65280)+(255&m[S+2]),y.push(n[(g=p)>>18&63]+n[g>>12&63]+n[g>>6&63]+n[63&g]);return y.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63},834:(s,r,n)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const t=n(766),a=n(181),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=i,r.SlowBuffer=function(Y){return+Y!=Y&&(Y=0),i.alloc(+Y)},r.INSPECT_MAX_BYTES=50;const o=2147483647;function c(Y){if(Y>o)throw new RangeError('The value "'+Y+'" is invalid for option "size"');const te=new Uint8Array(Y);return Object.setPrototypeOf(te,i.prototype),te}function i(Y,te,re){if(typeof Y=="number"){if(typeof te=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(Y)}return f(Y,te,re)}function f(Y,te,re){if(typeof Y=="string")return function(je,Re){if(typeof Re=="string"&&Re!==""||(Re="utf8"),!i.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);const Ge=0|y(je,Re);let Xe=c(Ge);const Ke=Xe.write(je,Re);return Ke!==Ge&&(Xe=Xe.slice(0,Ke)),Xe}(Y,te);if(ArrayBuffer.isView(Y))return function(je){if(ye(je,Uint8Array)){const Re=new Uint8Array(je);return p(Re.buffer,Re.byteOffset,Re.byteLength)}return u(je)}(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(ye(Y,ArrayBuffer)||Y&&ye(Y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(Y,SharedArrayBuffer)||Y&&ye(Y.buffer,SharedArrayBuffer)))return p(Y,te,re);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const be=Y.valueOf&&Y.valueOf();if(be!=null&&be!==Y)return i.from(be,te,re);const ve=function(je){if(i.isBuffer(je)){const Re=0|g(je.length),Ge=c(Re);return Ge.length===0||je.copy(Ge,0,0,Re),Ge}return je.length!==void 0?typeof je.length!="number"||ue(je.length)?c(0):u(je):je.type==="Buffer"&&Array.isArray(je.data)?u(je.data):void 0}(Y);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return i.from(Y[Symbol.toPrimitive]("string"),te,re);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}function m(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function _(Y){return m(Y),c(Y<0?0:0|g(Y))}function u(Y){const te=Y.length<0?0:0|g(Y.length),re=c(te);for(let be=0;be<te;be+=1)re[be]=255&Y[be];return re}function p(Y,te,re){if(te<0||Y.byteLength<te)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<te+(re||0))throw new RangeError('"length" is outside of buffer bounds');let be;return be=te===void 0&&re===void 0?new Uint8Array(Y):re===void 0?new Uint8Array(Y,te):new Uint8Array(Y,te,re),Object.setPrototypeOf(be,i.prototype),be}function g(Y){if(Y>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|Y}function y(Y,te){if(i.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||ye(Y,ArrayBuffer))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);const re=Y.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&re===0)return 0;let ve=!1;for(;;)switch(te){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return xe(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*re;case"hex":return re>>>1;case"base64":return he(Y).length;default:if(ve)return be?-1:xe(Y).length;te=(""+te).toLowerCase(),ve=!0}}function S(Y,te,re){let be=!1;if((te===void 0||te<0)&&(te=0),te>this.length||((re===void 0||re>this.length)&&(re=this.length),re<=0)||(re>>>=0)<=(te>>>=0))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return q(this,te,re);case"utf8":case"utf-8":return F(this,te,re);case"ascii":return z(this,te,re);case"latin1":case"binary":return R(this,te,re);case"base64":return I(this,te,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,te,re);default:if(be)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),be=!0}}function b(Y,te,re){const be=Y[te];Y[te]=Y[re],Y[re]=be}function E(Y,te,re,be,ve){if(Y.length===0)return-1;if(typeof re=="string"?(be=re,re=0):re>2147483647?re=2147483647:re<-2147483648&&(re=-2147483648),ue(re=+re)&&(re=ve?0:Y.length-1),re<0&&(re=Y.length+re),re>=Y.length){if(ve)return-1;re=Y.length-1}else if(re<0){if(!ve)return-1;re=0}if(typeof te=="string"&&(te=i.from(te,be)),i.isBuffer(te))return te.length===0?-1:x(Y,te,re,be,ve);if(typeof te=="number")return te&=255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call(Y,te,re):Uint8Array.prototype.lastIndexOf.call(Y,te,re):x(Y,[te],re,be,ve);throw new TypeError("val must be string, number or Buffer")}function x(Y,te,re,be,ve){let je,Re=1,Ge=Y.length,Xe=te.length;if(be!==void 0&&((be=String(be).toLowerCase())==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(Y.length<2||te.length<2)return-1;Re=2,Ge/=2,Xe/=2,re/=2}function Ke(Pe,We){return Re===1?Pe[We]:Pe.readUInt16BE(We*Re)}if(ve){let Pe=-1;for(je=re;je<Ge;je++)if(Ke(Y,je)===Ke(te,Pe===-1?0:je-Pe)){if(Pe===-1&&(Pe=je),je-Pe+1===Xe)return Pe*Re}else Pe!==-1&&(je-=je-Pe),Pe=-1}else for(re+Xe>Ge&&(re=Ge-Xe),je=re;je>=0;je--){let Pe=!0;for(let We=0;We<Xe;We++)if(Ke(Y,je+We)!==Ke(te,We)){Pe=!1;break}if(Pe)return je}return-1}function k(Y,te,re,be){re=Number(re)||0;const ve=Y.length-re;be?(be=Number(be))>ve&&(be=ve):be=ve;const je=te.length;let Re;for(be>je/2&&(be=je/2),Re=0;Re<be;++Re){const Ge=parseInt(te.substr(2*Re,2),16);if(ue(Ge))return Re;Y[re+Re]=Ge}return Re}function T(Y,te,re,be){return _e(xe(te,Y.length-re),Y,re,be)}function j(Y,te,re,be){return _e(function(ve){const je=[];for(let Re=0;Re<ve.length;++Re)je.push(255&ve.charCodeAt(Re));return je}(te),Y,re,be)}function A(Y,te,re,be){return _e(he(te),Y,re,be)}function C(Y,te,re,be){return _e(function(ve,je){let Re,Ge,Xe;const Ke=[];for(let Pe=0;Pe<ve.length&&!((je-=2)<0);++Pe)Re=ve.charCodeAt(Pe),Ge=Re>>8,Xe=Re%256,Ke.push(Xe),Ke.push(Ge);return Ke}(te,Y.length-re),Y,re,be)}function I(Y,te,re){return te===0&&re===Y.length?t.fromByteArray(Y):t.fromByteArray(Y.slice(te,re))}function F(Y,te,re){re=Math.min(Y.length,re);const be=[];let ve=te;for(;ve<re;){const je=Y[ve];let Re=null,Ge=je>239?4:je>223?3:je>191?2:1;if(ve+Ge<=re){let Xe,Ke,Pe,We;switch(Ge){case 1:je<128&&(Re=je);break;case 2:Xe=Y[ve+1],(192&Xe)==128&&(We=(31&je)<<6|63&Xe,We>127&&(Re=We));break;case 3:Xe=Y[ve+1],Ke=Y[ve+2],(192&Xe)==128&&(192&Ke)==128&&(We=(15&je)<<12|(63&Xe)<<6|63&Ke,We>2047&&(We<55296||We>57343)&&(Re=We));break;case 4:Xe=Y[ve+1],Ke=Y[ve+2],Pe=Y[ve+3],(192&Xe)==128&&(192&Ke)==128&&(192&Pe)==128&&(We=(15&je)<<18|(63&Xe)<<12|(63&Ke)<<6|63&Pe,We>65535&&We<1114112&&(Re=We))}}Re===null?(Re=65533,Ge=1):Re>65535&&(Re-=65536,be.push(Re>>>10&1023|55296),Re=56320|1023&Re),be.push(Re),ve+=Ge}return function(je){const Re=je.length;if(Re<=N)return String.fromCharCode.apply(String,je);let Ge="",Xe=0;for(;Xe<Re;)Ge+=String.fromCharCode.apply(String,je.slice(Xe,Xe+=N));return Ge}(be)}r.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=function(){try{const Y=new Uint8Array(1),te={foo:function(){return 42}};return Object.setPrototypeOf(te,Uint8Array.prototype),Object.setPrototypeOf(Y,te),Y.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(Y,te,re){return f(Y,te,re)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(Y,te,re){return function(be,ve,je){return m(be),be<=0?c(be):ve!==void 0?typeof je=="string"?c(be).fill(ve,je):c(be).fill(ve):c(be)}(Y,te,re)},i.allocUnsafe=function(Y){return _(Y)},i.allocUnsafeSlow=function(Y){return _(Y)},i.isBuffer=function(Y){return Y!=null&&Y.t===!0&&Y!==i.prototype},i.compare=function(Y,te){if(ye(Y,Uint8Array)&&(Y=i.from(Y,Y.offset,Y.byteLength)),ye(te,Uint8Array)&&(te=i.from(te,te.offset,te.byteLength)),!i.isBuffer(Y)||!i.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Y===te)return 0;let re=Y.length,be=te.length;for(let ve=0,je=Math.min(re,be);ve<je;++ve)if(Y[ve]!==te[ve]){re=Y[ve],be=te[ve];break}return re<be?-1:be<re?1:0},i.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(Y,te){if(!Array.isArray(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(Y.length===0)return i.alloc(0);let re;if(te===void 0)for(te=0,re=0;re<Y.length;++re)te+=Y[re].length;const be=i.allocUnsafe(te);let ve=0;for(re=0;re<Y.length;++re){let je=Y[re];if(ye(je,Uint8Array))ve+je.length>be.length?(i.isBuffer(je)||(je=i.from(je)),je.copy(be,ve)):Uint8Array.prototype.set.call(be,je,ve);else{if(!i.isBuffer(je))throw new TypeError('"list" argument must be an Array of Buffers');je.copy(be,ve)}ve+=je.length}return be},i.byteLength=y,i.prototype.t=!0,i.prototype.swap16=function(){const Y=this.length;if(Y%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let te=0;te<Y;te+=2)b(this,te,te+1);return this},i.prototype.swap32=function(){const Y=this.length;if(Y%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let te=0;te<Y;te+=4)b(this,te,te+3),b(this,te+1,te+2);return this},i.prototype.swap64=function(){const Y=this.length;if(Y%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let te=0;te<Y;te+=8)b(this,te,te+7),b(this,te+1,te+6),b(this,te+2,te+5),b(this,te+3,te+4);return this},i.prototype.toString=function(){const Y=this.length;return Y===0?"":arguments.length===0?F(this,0,Y):S.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(Y){if(!i.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y||i.compare(this,Y)===0},i.prototype.inspect=function(){let Y="";const te=r.INSPECT_MAX_BYTES;return Y=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(Y+=" ... "),"<Buffer "+Y+">"},l&&(i.prototype[l]=i.prototype.inspect),i.prototype.compare=function(Y,te,re,be,ve){if(ye(Y,Uint8Array)&&(Y=i.from(Y,Y.offset,Y.byteLength)),!i.isBuffer(Y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Y);if(te===void 0&&(te=0),re===void 0&&(re=Y?Y.length:0),be===void 0&&(be=0),ve===void 0&&(ve=this.length),te<0||re>Y.length||be<0||ve>this.length)throw new RangeError("out of range index");if(be>=ve&&te>=re)return 0;if(be>=ve)return-1;if(te>=re)return 1;if(this===Y)return 0;let je=(ve>>>=0)-(be>>>=0),Re=(re>>>=0)-(te>>>=0);const Ge=Math.min(je,Re),Xe=this.slice(be,ve),Ke=Y.slice(te,re);for(let Pe=0;Pe<Ge;++Pe)if(Xe[Pe]!==Ke[Pe]){je=Xe[Pe],Re=Ke[Pe];break}return je<Re?-1:Re<je?1:0},i.prototype.includes=function(Y,te,re){return this.indexOf(Y,te,re)!==-1},i.prototype.indexOf=function(Y,te,re){return E(this,Y,te,re,!0)},i.prototype.lastIndexOf=function(Y,te,re){return E(this,Y,te,re,!1)},i.prototype.write=function(Y,te,re,be){if(te===void 0)be="utf8",re=this.length,te=0;else if(re===void 0&&typeof te=="string")be=te,re=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(re)?(re>>>=0,be===void 0&&(be="utf8")):(be=re,re=void 0)}const ve=this.length-te;if((re===void 0||re>ve)&&(re=ve),Y.length>0&&(re<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");let je=!1;for(;;)switch(be){case"hex":return k(this,Y,te,re);case"utf8":case"utf-8":return T(this,Y,te,re);case"ascii":case"latin1":case"binary":return j(this,Y,te,re);case"base64":return A(this,Y,te,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,Y,te,re);default:if(je)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),je=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.i||this,0)}};const N=4096;function z(Y,te,re){let be="";re=Math.min(Y.length,re);for(let ve=te;ve<re;++ve)be+=String.fromCharCode(127&Y[ve]);return be}function R(Y,te,re){let be="";re=Math.min(Y.length,re);for(let ve=te;ve<re;++ve)be+=String.fromCharCode(Y[ve]);return be}function q(Y,te,re){const be=Y.length;(!te||te<0)&&(te=0),(!re||re<0||re>be)&&(re=be);let ve="";for(let je=te;je<re;++je)ve+=pe[Y[je]];return ve}function M(Y,te,re){const be=Y.slice(te,re);let ve="";for(let je=0;je<be.length-1;je+=2)ve+=String.fromCharCode(be[je]+256*be[je+1]);return ve}function D(Y,te,re){if(Y%1!=0||Y<0)throw new RangeError("offset is not uint");if(Y+te>re)throw new RangeError("Trying to access beyond buffer length")}function X(Y,te,re,be,ve,je){if(!i.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ve||te<je)throw new RangeError('"value" argument is out of bounds');if(re+be>Y.length)throw new RangeError("Index out of range")}function O(Y,te,re,be,ve){J(te,be,ve,Y,re,7);let je=Number(te&BigInt(4294967295));Y[re++]=je,je>>=8,Y[re++]=je,je>>=8,Y[re++]=je,je>>=8,Y[re++]=je;let Re=Number(te>>BigInt(32)&BigInt(4294967295));return Y[re++]=Re,Re>>=8,Y[re++]=Re,Re>>=8,Y[re++]=Re,Re>>=8,Y[re++]=Re,re}function G(Y,te,re,be,ve){J(te,be,ve,Y,re,7);let je=Number(te&BigInt(4294967295));Y[re+7]=je,je>>=8,Y[re+6]=je,je>>=8,Y[re+5]=je,je>>=8,Y[re+4]=je;let Re=Number(te>>BigInt(32)&BigInt(4294967295));return Y[re+3]=Re,Re>>=8,Y[re+2]=Re,Re>>=8,Y[re+1]=Re,Re>>=8,Y[re]=Re,re+8}function K(Y,te,re,be,ve,je){if(re+be>Y.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function Z(Y,te,re,be,ve){return te=+te,re>>>=0,ve||K(Y,0,re,4),a.write(Y,te,re,be,23,4),re+4}function U(Y,te,re,be,ve){return te=+te,re>>>=0,ve||K(Y,0,re,8),a.write(Y,te,re,be,52,8),re+8}i.prototype.slice=function(Y,te){const re=this.length;(Y=~~Y)<0?(Y+=re)<0&&(Y=0):Y>re&&(Y=re),(te=te===void 0?re:~~te)<0?(te+=re)<0&&(te=0):te>re&&(te=re),te<Y&&(te=Y);const be=this.subarray(Y,te);return Object.setPrototypeOf(be,i.prototype),be},i.prototype.readUintLE=i.prototype.readUIntLE=function(Y,te,re){Y>>>=0,te>>>=0,re||D(Y,te,this.length);let be=this[Y],ve=1,je=0;for(;++je<te&&(ve*=256);)be+=this[Y+je]*ve;return be},i.prototype.readUintBE=i.prototype.readUIntBE=function(Y,te,re){Y>>>=0,te>>>=0,re||D(Y,te,this.length);let be=this[Y+--te],ve=1;for(;te>0&&(ve*=256);)be+=this[Y+--te]*ve;return be},i.prototype.readUint8=i.prototype.readUInt8=function(Y,te){return Y>>>=0,te||D(Y,1,this.length),this[Y]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(Y,te){return Y>>>=0,te||D(Y,2,this.length),this[Y]|this[Y+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(Y,te){return Y>>>=0,te||D(Y,2,this.length),this[Y]<<8|this[Y+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(Y,te){return Y>>>=0,te||D(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+16777216*this[Y+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(Y,te){return Y>>>=0,te||D(Y,4,this.length),16777216*this[Y]+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},i.prototype.readBigUInt64LE=ke(function(Y){ne(Y>>>=0,"offset");const te=this[Y],re=this[Y+7];te!==void 0&&re!==void 0||se(Y,this.length-8);const be=te+256*this[++Y]+65536*this[++Y]+this[++Y]*2**24,ve=this[++Y]+256*this[++Y]+65536*this[++Y]+re*2**24;return BigInt(be)+(BigInt(ve)<<BigInt(32))}),i.prototype.readBigUInt64BE=ke(function(Y){ne(Y>>>=0,"offset");const te=this[Y],re=this[Y+7];te!==void 0&&re!==void 0||se(Y,this.length-8);const be=te*2**24+65536*this[++Y]+256*this[++Y]+this[++Y],ve=this[++Y]*2**24+65536*this[++Y]+256*this[++Y]+re;return(BigInt(be)<<BigInt(32))+BigInt(ve)}),i.prototype.readIntLE=function(Y,te,re){Y>>>=0,te>>>=0,re||D(Y,te,this.length);let be=this[Y],ve=1,je=0;for(;++je<te&&(ve*=256);)be+=this[Y+je]*ve;return ve*=128,be>=ve&&(be-=Math.pow(2,8*te)),be},i.prototype.readIntBE=function(Y,te,re){Y>>>=0,te>>>=0,re||D(Y,te,this.length);let be=te,ve=1,je=this[Y+--be];for(;be>0&&(ve*=256);)je+=this[Y+--be]*ve;return ve*=128,je>=ve&&(je-=Math.pow(2,8*te)),je},i.prototype.readInt8=function(Y,te){return Y>>>=0,te||D(Y,1,this.length),128&this[Y]?-1*(255-this[Y]+1):this[Y]},i.prototype.readInt16LE=function(Y,te){Y>>>=0,te||D(Y,2,this.length);const re=this[Y]|this[Y+1]<<8;return 32768&re?4294901760|re:re},i.prototype.readInt16BE=function(Y,te){Y>>>=0,te||D(Y,2,this.length);const re=this[Y+1]|this[Y]<<8;return 32768&re?4294901760|re:re},i.prototype.readInt32LE=function(Y,te){return Y>>>=0,te||D(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},i.prototype.readInt32BE=function(Y,te){return Y>>>=0,te||D(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},i.prototype.readBigInt64LE=ke(function(Y){ne(Y>>>=0,"offset");const te=this[Y],re=this[Y+7];te!==void 0&&re!==void 0||se(Y,this.length-8);const be=this[Y+4]+256*this[Y+5]+65536*this[Y+6]+(re<<24);return(BigInt(be)<<BigInt(32))+BigInt(te+256*this[++Y]+65536*this[++Y]+this[++Y]*16777216)}),i.prototype.readBigInt64BE=ke(function(Y){ne(Y>>>=0,"offset");const te=this[Y],re=this[Y+7];te!==void 0&&re!==void 0||se(Y,this.length-8);const be=(te<<24)+65536*this[++Y]+256*this[++Y]+this[++Y];return(BigInt(be)<<BigInt(32))+BigInt(this[++Y]*16777216+65536*this[++Y]+256*this[++Y]+re)}),i.prototype.readFloatLE=function(Y,te){return Y>>>=0,te||D(Y,4,this.length),a.read(this,Y,!0,23,4)},i.prototype.readFloatBE=function(Y,te){return Y>>>=0,te||D(Y,4,this.length),a.read(this,Y,!1,23,4)},i.prototype.readDoubleLE=function(Y,te){return Y>>>=0,te||D(Y,8,this.length),a.read(this,Y,!0,52,8)},i.prototype.readDoubleBE=function(Y,te){return Y>>>=0,te||D(Y,8,this.length),a.read(this,Y,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(Y,te,re,be){Y=+Y,te>>>=0,re>>>=0,be||X(this,Y,te,re,Math.pow(2,8*re)-1,0);let ve=1,je=0;for(this[te]=255&Y;++je<re&&(ve*=256);)this[te+je]=Y/ve&255;return te+re},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(Y,te,re,be){Y=+Y,te>>>=0,re>>>=0,be||X(this,Y,te,re,Math.pow(2,8*re)-1,0);let ve=re-1,je=1;for(this[te+ve]=255&Y;--ve>=0&&(je*=256);)this[te+ve]=Y/je&255;return te+re},i.prototype.writeUint8=i.prototype.writeUInt8=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,1,255,0),this[te]=255&Y,te+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,2,65535,0),this[te]=255&Y,this[te+1]=Y>>>8,te+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,2,65535,0),this[te]=Y>>>8,this[te+1]=255&Y,te+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,4,4294967295,0),this[te+3]=Y>>>24,this[te+2]=Y>>>16,this[te+1]=Y>>>8,this[te]=255&Y,te+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,4,4294967295,0),this[te]=Y>>>24,this[te+1]=Y>>>16,this[te+2]=Y>>>8,this[te+3]=255&Y,te+4},i.prototype.writeBigUInt64LE=ke(function(Y,te=0){return O(this,Y,te,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=ke(function(Y,te=0){return G(this,Y,te,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(Y,te,re,be){if(Y=+Y,te>>>=0,!be){const Ge=Math.pow(2,8*re-1);X(this,Y,te,re,Ge-1,-Ge)}let ve=0,je=1,Re=0;for(this[te]=255&Y;++ve<re&&(je*=256);)Y<0&&Re===0&&this[te+ve-1]!==0&&(Re=1),this[te+ve]=(Y/je>>0)-Re&255;return te+re},i.prototype.writeIntBE=function(Y,te,re,be){if(Y=+Y,te>>>=0,!be){const Ge=Math.pow(2,8*re-1);X(this,Y,te,re,Ge-1,-Ge)}let ve=re-1,je=1,Re=0;for(this[te+ve]=255&Y;--ve>=0&&(je*=256);)Y<0&&Re===0&&this[te+ve+1]!==0&&(Re=1),this[te+ve]=(Y/je>>0)-Re&255;return te+re},i.prototype.writeInt8=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,1,127,-128),Y<0&&(Y=255+Y+1),this[te]=255&Y,te+1},i.prototype.writeInt16LE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,2,32767,-32768),this[te]=255&Y,this[te+1]=Y>>>8,te+2},i.prototype.writeInt16BE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,2,32767,-32768),this[te]=Y>>>8,this[te+1]=255&Y,te+2},i.prototype.writeInt32LE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,4,2147483647,-2147483648),this[te]=255&Y,this[te+1]=Y>>>8,this[te+2]=Y>>>16,this[te+3]=Y>>>24,te+4},i.prototype.writeInt32BE=function(Y,te,re){return Y=+Y,te>>>=0,re||X(this,Y,te,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),this[te]=Y>>>24,this[te+1]=Y>>>16,this[te+2]=Y>>>8,this[te+3]=255&Y,te+4},i.prototype.writeBigInt64LE=ke(function(Y,te=0){return O(this,Y,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=ke(function(Y,te=0){return G(this,Y,te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(Y,te,re){return Z(this,Y,te,!0,re)},i.prototype.writeFloatBE=function(Y,te,re){return Z(this,Y,te,!1,re)},i.prototype.writeDoubleLE=function(Y,te,re){return U(this,Y,te,!0,re)},i.prototype.writeDoubleBE=function(Y,te,re){return U(this,Y,te,!1,re)},i.prototype.copy=function(Y,te,re,be){if(!i.isBuffer(Y))throw new TypeError("argument should be a Buffer");if(re||(re=0),be||be===0||(be=this.length),te>=Y.length&&(te=Y.length),te||(te=0),be>0&&be<re&&(be=re),be===re||Y.length===0||this.length===0)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(re<0||re>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),Y.length-te<be-re&&(be=Y.length-te+re);const ve=be-re;return this===Y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(te,re,be):Uint8Array.prototype.set.call(Y,this.subarray(re,be),te),ve},i.prototype.fill=function(Y,te,re,be){if(typeof Y=="string"){if(typeof te=="string"?(be=te,te=0,re=this.length):typeof re=="string"&&(be=re,re=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!i.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(Y.length===1){const je=Y.charCodeAt(0);(be==="utf8"&&je<128||be==="latin1")&&(Y=je)}}else typeof Y=="number"?Y&=255:typeof Y=="boolean"&&(Y=Number(Y));if(te<0||this.length<te||this.length<re)throw new RangeError("Out of range index");if(re<=te)return this;let ve;if(te>>>=0,re=re===void 0?this.length:re>>>0,Y||(Y=0),typeof Y=="number")for(ve=te;ve<re;++ve)this[ve]=Y;else{const je=i.isBuffer(Y)?Y:i.from(Y,be),Re=je.length;if(Re===0)throw new TypeError('The value "'+Y+'" is invalid for argument "value"');for(ve=0;ve<re-te;++ve)this[ve+te]=je[ve%Re]}return this};const V={};function L(Y,te,re){V[Y]=class extends re{constructor(){super(),Object.defineProperty(this,"message",{value:te.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Y}]`,this.stack,delete this.name}get code(){return Y}set code(be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:be,writable:!0})}toString(){return`${this.name} [${Y}]: ${this.message}`}}}function H(Y){let te="",re=Y.length;const be=Y[0]==="-"?1:0;for(;re>=be+4;re-=3)te=`_${Y.slice(re-3,re)}${te}`;return`${Y.slice(0,re)}${te}`}function J(Y,te,re,be,ve,je){if(Y>re||Y<te){const Re=typeof te=="bigint"?"n":"";let Ge;throw Ge=je>3?te===0||te===BigInt(0)?`>= 0${Re} and < 2${Re} ** ${8*(je+1)}${Re}`:`>= -(2${Re} ** ${8*(je+1)-1}${Re}) and < 2 ** ${8*(je+1)-1}${Re}`:`>= ${te}${Re} and <= ${re}${Re}`,new V.ERR_OUT_OF_RANGE("value",Ge,Y)}(function(Re,Ge,Xe){ne(Ge,"offset"),Re[Ge]!==void 0&&Re[Ge+Xe]!==void 0||se(Ge,Re.length-(Xe+1))})(be,ve,je)}function ne(Y,te){if(typeof Y!="number")throw new V.ERR_INVALID_ARG_TYPE(te,"number",Y)}function se(Y,te,re){throw Math.floor(Y)!==Y?(ne(Y,re),new V.ERR_OUT_OF_RANGE(re||"offset","an integer",Y)):te<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE(re||"offset",`>= ${re?1:0} and <= ${te}`,Y)}L("ERR_BUFFER_OUT_OF_BOUNDS",function(Y){return Y?`${Y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(Y,te){return`The "${Y}" argument must be of type number. Received type ${typeof te}`},TypeError),L("ERR_OUT_OF_RANGE",function(Y,te,re){let be=`The value of "${Y}" is out of range.`,ve=re;return Number.isInteger(re)&&Math.abs(re)>4294967296?ve=H(String(re)):typeof re=="bigint"&&(ve=String(re),(re>BigInt(2)**BigInt(32)||re<-(BigInt(2)**BigInt(32)))&&(ve=H(ve)),ve+="n"),be+=` It must be ${te}. Received ${ve}`,be},RangeError);const fe=/[^+/0-9A-Za-z-_]/g;function xe(Y,te){let re;te=te||1/0;const be=Y.length;let ve=null;const je=[];for(let Re=0;Re<be;++Re){if(re=Y.charCodeAt(Re),re>55295&&re<57344){if(!ve){if(re>56319){(te-=3)>-1&&je.push(239,191,189);continue}if(Re+1===be){(te-=3)>-1&&je.push(239,191,189);continue}ve=re;continue}if(re<56320){(te-=3)>-1&&je.push(239,191,189),ve=re;continue}re=65536+(ve-55296<<10|re-56320)}else ve&&(te-=3)>-1&&je.push(239,191,189);if(ve=null,re<128){if((te-=1)<0)break;je.push(re)}else if(re<2048){if((te-=2)<0)break;je.push(re>>6|192,63&re|128)}else if(re<65536){if((te-=3)<0)break;je.push(re>>12|224,re>>6&63|128,63&re|128)}else{if(!(re<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;je.push(re>>18|240,re>>12&63|128,re>>6&63|128,63&re|128)}}return je}function he(Y){return t.toByteArray(function(te){if((te=(te=te.split("=")[0]).trim().replace(fe,"")).length<2)return"";for(;te.length%4!=0;)te+="=";return te}(Y))}function _e(Y,te,re,be){let ve;for(ve=0;ve<be&&!(ve+re>=te.length||ve>=Y.length);++ve)te[ve+re]=Y[ve];return ve}function ye(Y,te){return Y instanceof te||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===te.name}function ue(Y){return Y!=Y}const pe=function(){const Y="0123456789abcdef",te=new Array(256);for(let re=0;re<16;++re){const be=16*re;for(let ve=0;ve<16;++ve)te[be+ve]=Y[re]+Y[ve]}return te}();function ke(Y){return typeof BigInt>"u"?Ie:Y}function Ie(){throw new Error("BigInt not supported")}},181:(s,r)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */r.read=function(n,t,a,l,o){var c,i,f=8*o-l-1,m=(1<<f)-1,_=m>>1,u=-7,p=a?o-1:0,g=a?-1:1,y=n[t+p];for(p+=g,c=y&(1<<-u)-1,y>>=-u,u+=f;u>0;c=256*c+n[t+p],p+=g,u-=8);for(i=c&(1<<-u)-1,c>>=-u,u+=l;u>0;i=256*i+n[t+p],p+=g,u-=8);if(c===0)c=1-_;else{if(c===m)return i?NaN:1/0*(y?-1:1);i+=Math.pow(2,l),c-=_}return(y?-1:1)*i*Math.pow(2,c-l)},r.write=function(n,t,a,l,o,c){var i,f,m,_=8*c-o-1,u=(1<<_)-1,p=u>>1,g=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=l?0:c-1,S=l?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(m=Math.pow(2,-i))<1&&(i--,m*=2),(t+=i+p>=1?g/m:g*Math.pow(2,1-p))*m>=2&&(i++,m/=2),i+p>=u?(f=0,i=u):i+p>=1?(f=(t*m-1)*Math.pow(2,o),i+=p):(f=t*Math.pow(2,p-1)*Math.pow(2,o),i=0));o>=8;n[a+y]=255&f,y+=S,f/=256,o-=8);for(i=i<<o|f,_+=o;_>0;n[a+y]=255&i,y+=S,i/=256,_-=8);n[a+y-S]|=128*b}},845:(s,r,n)=>{var t={};(0,n(761).assign)(t,n(880),n(380),n(271)),s.exports=t},880:(s,r,n)=>{var t=n(789),a=n(761),l=n(944),o=n(950),c=n(744),i=Object.prototype.toString;function f(_){if(!(this instanceof f))return new f(_);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},_||{});var u=this.options;u.raw&&u.windowBits>0?u.windowBits=-u.windowBits:u.gzip&&u.windowBits>0&&u.windowBits<16&&(u.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var p=t.deflateInit2(this.strm,u.level,u.method,u.windowBits,u.memLevel,u.strategy);if(p!==0)throw new Error(o[p]);if(u.header&&t.deflateSetHeader(this.strm,u.header),u.dictionary){var g;if(g=typeof u.dictionary=="string"?l.string2buf(u.dictionary):i.call(u.dictionary)==="[object ArrayBuffer]"?new Uint8Array(u.dictionary):u.dictionary,(p=t.deflateSetDictionary(this.strm,g))!==0)throw new Error(o[p]);this.u=!0}}function m(_,u){var p=new f(u);if(p.push(_,!0),p.err)throw p.msg||o[p.err];return p.result}f.prototype.push=function(_,u){var p,g,y=this.strm,S=this.options.chunkSize;if(this.ended)return!1;g=u===~~u?u:u===!0?4:0,typeof _=="string"?y.input=l.string2buf(_):i.call(_)==="[object ArrayBuffer]"?y.input=new Uint8Array(_):y.input=_,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new a.Buf8(S),y.next_out=0,y.avail_out=S),(p=t.deflate(y,g))!==1&&p!==0)return this.onEnd(p),this.ended=!0,!1;y.avail_out!==0&&(y.avail_in!==0||g!==4&&g!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(a.shrinkBuf(y.output,y.next_out))):this.onData(a.shrinkBuf(y.output,y.next_out)))}while((y.avail_in>0||y.avail_out===0)&&p!==1);return g===4?(p=t.deflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===0):g!==2||(this.onEnd(0),y.avail_out=0,!0)},f.prototype.onData=function(_){this.chunks.push(_)},f.prototype.onEnd=function(_){_===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},r.Deflate=f,r.deflate=m,r.deflateRaw=function(_,u){return(u=u||{}).raw=!0,m(_,u)},r.gzip=function(_,u){return(u=u||{}).gzip=!0,m(_,u)}},380:(s,r,n)=>{var t=n(20),a=n(761),l=n(944),o=n(271),c=n(950),i=n(744),f=n(357),m=Object.prototype.toString;function _(p){if(!(this instanceof _))return new _(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(g.windowBits>=0&&g.windowBits<16)||p&&p.windowBits||(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var y=t.inflateInit2(this.strm,g.windowBits);if(y!==o.Z_OK)throw new Error(c[y]);if(this.header=new f,t.inflateGetHeader(this.strm,this.header),g.dictionary&&(typeof g.dictionary=="string"?g.dictionary=l.string2buf(g.dictionary):m.call(g.dictionary)==="[object ArrayBuffer]"&&(g.dictionary=new Uint8Array(g.dictionary)),g.raw&&(y=t.inflateSetDictionary(this.strm,g.dictionary))!==o.Z_OK))throw new Error(c[y])}function u(p,g){var y=new _(g);if(y.push(p,!0),y.err)throw y.msg||c[y.err];return y.result}_.prototype.push=function(p,g){var y,S,b,E,x,k=this.strm,T=this.options.chunkSize,j=this.options.dictionary,A=!1;if(this.ended)return!1;S=g===~~g?g:g===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof p=="string"?k.input=l.binstring2buf(p):m.call(p)==="[object ArrayBuffer]"?k.input=new Uint8Array(p):k.input=p,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(T),k.next_out=0,k.avail_out=T),(y=t.inflate(k,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&j&&(y=t.inflateSetDictionary(this.strm,j)),y===o.Z_BUF_ERROR&&A===!0&&(y=o.Z_OK,A=!1),y!==o.Z_STREAM_END&&y!==o.Z_OK)return this.onEnd(y),this.ended=!0,!1;k.next_out&&(k.avail_out!==0&&y!==o.Z_STREAM_END&&(k.avail_in!==0||S!==o.Z_FINISH&&S!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=l.utf8border(k.output,k.next_out),E=k.next_out-b,x=l.buf2string(k.output,b),k.next_out=E,k.avail_out=T-E,E&&a.arraySet(k.output,k.output,b,E,0),this.onData(x)):this.onData(a.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(A=!0)}while((k.avail_in>0||k.avail_out===0)&&y!==o.Z_STREAM_END);return y===o.Z_STREAM_END&&(S=o.Z_FINISH),S===o.Z_FINISH?(y=t.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===o.Z_OK):S!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),k.avail_out=0,!0)},_.prototype.onData=function(p){this.chunks.push(p)},_.prototype.onEnd=function(p){p===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},r.Inflate=_,r.inflate=u,r.inflateRaw=function(p,g){return(g=g||{}).raw=!0,u(p,g)},r.ungzip=u},761:(s,r)=>{var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(o,c){return Object.prototype.hasOwnProperty.call(o,c)}r.assign=function(o){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var i=c.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(var f in i)t(i,f)&&(o[f]=i[f])}}return o},r.shrinkBuf=function(o,c){return o.length===c?o:o.subarray?o.subarray(0,c):(o.length=c,o)};var a={arraySet:function(o,c,i,f,m){if(c.subarray&&o.subarray)o.set(c.subarray(i,i+f),m);else for(var _=0;_<f;_++)o[m+_]=c[i+_]},flattenChunks:function(o){var c,i,f,m,_,u;for(f=0,c=0,i=o.length;c<i;c++)f+=o[c].length;for(u=new Uint8Array(f),m=0,c=0,i=o.length;c<i;c++)_=o[c],u.set(_,m),m+=_.length;return u}},l={arraySet:function(o,c,i,f,m){for(var _=0;_<f;_++)o[m+_]=c[i+_]},flattenChunks:function(o){return[].concat.apply([],o)}};r.setTyped=function(o){o?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,l))},r.setTyped(n)},944:(s,r,n)=>{var t=n(761),a=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var o=new t.Buf8(256),c=0;c<256;c++)o[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;function i(f,m){if(m<65534&&(f.subarray&&l||!f.subarray&&a))return String.fromCharCode.apply(null,t.shrinkBuf(f,m));for(var _="",u=0;u<m;u++)_+=String.fromCharCode(f[u]);return _}o[254]=o[254]=1,r.string2buf=function(f){var m,_,u,p,g,y=f.length,S=0;for(p=0;p<y;p++)(64512&(_=f.charCodeAt(p)))==55296&&p+1<y&&(64512&(u=f.charCodeAt(p+1)))==56320&&(_=65536+(_-55296<<10)+(u-56320),p++),S+=_<128?1:_<2048?2:_<65536?3:4;for(m=new t.Buf8(S),g=0,p=0;g<S;p++)(64512&(_=f.charCodeAt(p)))==55296&&p+1<y&&(64512&(u=f.charCodeAt(p+1)))==56320&&(_=65536+(_-55296<<10)+(u-56320),p++),_<128?m[g++]=_:_<2048?(m[g++]=192|_>>>6,m[g++]=128|63&_):_<65536?(m[g++]=224|_>>>12,m[g++]=128|_>>>6&63,m[g++]=128|63&_):(m[g++]=240|_>>>18,m[g++]=128|_>>>12&63,m[g++]=128|_>>>6&63,m[g++]=128|63&_);return m},r.buf2binstring=function(f){return i(f,f.length)},r.binstring2buf=function(f){for(var m=new t.Buf8(f.length),_=0,u=m.length;_<u;_++)m[_]=f.charCodeAt(_);return m},r.buf2string=function(f,m){var _,u,p,g,y=m||f.length,S=new Array(2*y);for(u=0,_=0;_<y;)if((p=f[_++])<128)S[u++]=p;else if((g=o[p])>4)S[u++]=65533,_+=g-1;else{for(p&=g===2?31:g===3?15:7;g>1&&_<y;)p=p<<6|63&f[_++],g--;g>1?S[u++]=65533:p<65536?S[u++]=p:(p-=65536,S[u++]=55296|p>>10&1023,S[u++]=56320|1023&p)}return i(S,u)},r.utf8border=function(f,m){var _;for((m=m||f.length)>f.length&&(m=f.length),_=m-1;_>=0&&(192&f[_])==128;)_--;return _<0||_===0?m:_+o[f[_]]>m?_:m}},562:s=>{s.exports=function(r,n,t,a){for(var l=65535&r|0,o=r>>>16&65535|0,c=0;t!==0;){t-=c=t>2e3?2e3:t;do o=o+(l=l+n[a++]|0)|0;while(--c);l%=65521,o%=65521}return l|o<<16|0}},271:s=>{s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},299:s=>{var r=function(){for(var n,t=[],a=0;a<256;a++){n=a;for(var l=0;l<8;l++)n=1&n?3988292384^n>>>1:n>>>1;t[a]=n}return t}();s.exports=function(n,t,a,l){var o=r,c=l+a;n^=-1;for(var i=l;i<c;i++)n=n>>>8^o[255&(n^t[i])];return-1^n}},789:(s,r,n)=>{var t,a=n(761),l=n(564),o=n(562),c=n(299),i=n(950),f=-2,m=258,_=262,u=103,p=113,g=666;function y(M,D){return M.msg=i[D],D}function S(M){return(M<<1)-(M>4?9:0)}function b(M){for(var D=M.length;--D>=0;)M[D]=0}function E(M){var D=M.state,X=D.pending;X>M.avail_out&&(X=M.avail_out),X!==0&&(a.arraySet(M.output,D.pending_buf,D.pending_out,X,M.next_out),M.next_out+=X,D.pending_out+=X,M.total_out+=X,M.avail_out-=X,D.pending-=X,D.pending===0&&(D.pending_out=0))}function x(M,D){l.h(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,D),M.block_start=M.strstart,E(M.strm)}function k(M,D){M.pending_buf[M.pending++]=D}function T(M,D){M.pending_buf[M.pending++]=D>>>8&255,M.pending_buf[M.pending++]=255&D}function j(M,D){var X,O,G=M.max_chain_length,K=M.strstart,Z=M.prev_length,U=M.nice_match,V=M.strstart>M.w_size-_?M.strstart-(M.w_size-_):0,L=M.window,H=M.w_mask,J=M.prev,ne=M.strstart+m,se=L[K+Z-1],fe=L[K+Z];M.prev_length>=M.good_match&&(G>>=2),U>M.lookahead&&(U=M.lookahead);do if(L[(X=D)+Z]===fe&&L[X+Z-1]===se&&L[X]===L[K]&&L[++X]===L[K+1]){K+=2,X++;do;while(L[++K]===L[++X]&&L[++K]===L[++X]&&L[++K]===L[++X]&&L[++K]===L[++X]&&L[++K]===L[++X]&&L[++K]===L[++X]&&L[++K]===L[++X]&&L[++K]===L[++X]&&K<ne);if(O=m-(ne-K),K=ne-m,O>Z){if(M.match_start=D,Z=O,O>=U)break;se=L[K+Z-1],fe=L[K+Z]}}while((D=J[D&H])>V&&--G!=0);return Z<=M.lookahead?Z:M.lookahead}function A(M){var D,X,O,G,K,Z,U,V,L,H,J=M.w_size;do{if(G=M.window_size-M.lookahead-M.strstart,M.strstart>=J+(J-_)){a.arraySet(M.window,M.window,J,J,0),M.match_start-=J,M.strstart-=J,M.block_start-=J,D=X=M.hash_size;do O=M.head[--D],M.head[D]=O>=J?O-J:0;while(--X);D=X=J;do O=M.prev[--D],M.prev[D]=O>=J?O-J:0;while(--X);G+=J}if(M.strm.avail_in===0)break;if(Z=M.strm,U=M.window,V=M.strstart+M.lookahead,L=G,H=void 0,(H=Z.avail_in)>L&&(H=L),X=H===0?0:(Z.avail_in-=H,a.arraySet(U,Z.input,Z.next_in,H,V),Z.state.wrap===1?Z.adler=o(Z.adler,U,H,V):Z.state.wrap===2&&(Z.adler=c(Z.adler,U,H,V)),Z.next_in+=H,Z.total_in+=H,H),M.lookahead+=X,M.lookahead+M.insert>=3)for(K=M.strstart-M.insert,M.ins_h=M.window[K],M.ins_h=(M.ins_h<<M.hash_shift^M.window[K+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[K+3-1])&M.hash_mask,M.prev[K&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=K,K++,M.insert--,!(M.lookahead+M.insert<3)););}while(M.lookahead<_&&M.strm.avail_in!==0)}function C(M,D){for(var X,O;;){if(M.lookahead<_){if(A(M),M.lookahead<_&&D===0)return 1;if(M.lookahead===0)break}if(X=0,M.lookahead>=3&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,X=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),X!==0&&M.strstart-X<=M.w_size-_&&(M.match_length=j(M,X)),M.match_length>=3)if(O=l.l(M,M.strstart-M.match_start,M.match_length-3),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=3){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,X=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!=0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else O=l.l(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(O&&(x(M,!1),M.strm.avail_out===0))return 1}return M.insert=M.strstart<2?M.strstart:2,D===4?(x(M,!0),M.strm.avail_out===0?3:4):M.last_lit&&(x(M,!1),M.strm.avail_out===0)?1:2}function I(M,D){for(var X,O,G;;){if(M.lookahead<_){if(A(M),M.lookahead<_&&D===0)return 1;if(M.lookahead===0)break}if(X=0,M.lookahead>=3&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,X=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=2,X!==0&&M.prev_length<M.max_lazy_match&&M.strstart-X<=M.w_size-_&&(M.match_length=j(M,X),M.match_length<=5&&(M.strategy===1||M.match_length===3&&M.strstart-M.match_start>4096)&&(M.match_length=2)),M.prev_length>=3&&M.match_length<=M.prev_length){G=M.strstart+M.lookahead-3,O=l.l(M,M.strstart-1-M.prev_match,M.prev_length-3),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=G&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+3-1])&M.hash_mask,X=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!=0);if(M.match_available=0,M.match_length=2,M.strstart++,O&&(x(M,!1),M.strm.avail_out===0))return 1}else if(M.match_available){if((O=l.l(M,0,M.window[M.strstart-1]))&&x(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return 1}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(O=l.l(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<2?M.strstart:2,D===4?(x(M,!0),M.strm.avail_out===0?3:4):M.last_lit&&(x(M,!1),M.strm.avail_out===0)?1:2}function F(M,D,X,O,G){this.good_length=M,this.max_lazy=D,this.nice_length=X,this.max_chain=O,this.func=G}function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),b(this.dyn_ltree),b(this.dyn_dtree),b(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),b(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),b(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(M){var D;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=2,(D=M.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?42:p,M.adler=D.wrap===2?0:1,D.last_flush=0,l.p(D),0):y(M,f)}function R(M){var D,X=z(M);return X===0&&((D=M.state).window_size=2*D.w_size,b(D.head),D.max_lazy_match=t[D.level].max_lazy,D.good_match=t[D.level].good_length,D.nice_match=t[D.level].nice_length,D.max_chain_length=t[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=2,D.match_available=0,D.ins_h=0),X}function q(M,D,X,O,G,K){if(!M)return f;var Z=1;if(D===-1&&(D=6),O<0?(Z=0,O=-O):O>15&&(Z=2,O-=16),G<1||G>9||X!==8||O<8||O>15||D<0||D>9||K<0||K>4)return y(M,f);O===8&&(O=9);var U=new N;return M.state=U,U.strm=M,U.wrap=Z,U.gzhead=null,U.w_bits=O,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=G+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+3-1)/3),U.window=new a.Buf8(2*U.w_size),U.head=new a.Buf16(U.hash_size),U.prev=new a.Buf16(U.w_size),U.lit_bufsize=1<<G+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new a.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=D,U.strategy=K,U.method=X,R(M)}t=[new F(0,0,0,0,function(M,D){var X=65535;for(X>M.pending_buf_size-5&&(X=M.pending_buf_size-5);;){if(M.lookahead<=1){if(A(M),M.lookahead===0&&D===0)return 1;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var O=M.block_start+X;if((M.strstart===0||M.strstart>=O)&&(M.lookahead=M.strstart-O,M.strstart=O,x(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-_&&(x(M,!1),M.strm.avail_out===0))return 1}return M.insert=0,D===4?(x(M,!0),M.strm.avail_out===0?3:4):(M.strstart>M.block_start&&(x(M,!1),M.strm.avail_out),1)}),new F(4,4,8,4,C),new F(4,5,16,8,C),new F(4,6,32,32,C),new F(4,4,16,16,I),new F(8,16,32,32,I),new F(8,16,128,128,I),new F(8,32,128,256,I),new F(32,128,258,1024,I),new F(32,258,258,4096,I)],r.deflateInit=function(M,D){return q(M,D,8,15,8,0)},r.deflateInit2=q,r.deflateReset=R,r.deflateResetKeep=z,r.deflateSetHeader=function(M,D){return M&&M.state?M.state.wrap!==2?f:(M.state.gzhead=D,0):f},r.deflate=function(M,D){var X,O,G,K;if(!M||!M.state||D>5||D<0)return M?y(M,f):f;if(O=M.state,!M.output||!M.input&&M.avail_in!==0||O.status===g&&D!==4)return y(M,M.avail_out===0?-5:f);if(O.strm=M,X=O.last_flush,O.last_flush=D,O.status===42)if(O.wrap===2)M.adler=0,k(O,31),k(O,139),k(O,8),O.gzhead?(k(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),k(O,255&O.gzhead.time),k(O,O.gzhead.time>>8&255),k(O,O.gzhead.time>>16&255),k(O,O.gzhead.time>>24&255),k(O,O.level===9?2:O.strategy>=2||O.level<2?4:0),k(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(k(O,255&O.gzhead.extra.length),k(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(M.adler=c(M.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(k(O,0),k(O,0),k(O,0),k(O,0),k(O,0),k(O,O.level===9?2:O.strategy>=2||O.level<2?4:0),k(O,3),O.status=p);else{var Z=8+(O.w_bits-8<<4)<<8;Z|=(O.strategy>=2||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(Z|=32),Z+=31-Z%31,O.status=p,T(O,Z),O.strstart!==0&&(T(O,M.adler>>>16),T(O,65535&M.adler)),M.adler=1}if(O.status===69)if(O.gzhead.extra){for(G=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>G&&(M.adler=c(M.adler,O.pending_buf,O.pending-G,G)),E(M),G=O.pending,O.pending!==O.pending_buf_size));)k(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>G&&(M.adler=c(M.adler,O.pending_buf,O.pending-G,G)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){G=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>G&&(M.adler=c(M.adler,O.pending_buf,O.pending-G,G)),E(M),G=O.pending,O.pending===O.pending_buf_size)){K=1;break}K=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,k(O,K)}while(K!==0);O.gzhead.hcrc&&O.pending>G&&(M.adler=c(M.adler,O.pending_buf,O.pending-G,G)),K===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){G=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>G&&(M.adler=c(M.adler,O.pending_buf,O.pending-G,G)),E(M),G=O.pending,O.pending===O.pending_buf_size)){K=1;break}K=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,k(O,K)}while(K!==0);O.gzhead.hcrc&&O.pending>G&&(M.adler=c(M.adler,O.pending_buf,O.pending-G,G)),K===0&&(O.status=u)}else O.status=u;if(O.status===u&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&E(M),O.pending+2<=O.pending_buf_size&&(k(O,255&M.adler),k(O,M.adler>>8&255),M.adler=0,O.status=p)):O.status=p),O.pending!==0){if(E(M),M.avail_out===0)return O.last_flush=-1,0}else if(M.avail_in===0&&S(D)<=S(X)&&D!==4)return y(M,-5);if(O.status===g&&M.avail_in!==0)return y(M,-5);if(M.avail_in!==0||O.lookahead!==0||D!==0&&O.status!==g){var U=O.strategy===2?function(V,L){for(var H;;){if(V.lookahead===0&&(A(V),V.lookahead===0)){if(L===0)return 1;break}if(V.match_length=0,H=l.l(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,H&&(x(V,!1),V.strm.avail_out===0))return 1}return V.insert=0,L===4?(x(V,!0),V.strm.avail_out===0?3:4):V.last_lit&&(x(V,!1),V.strm.avail_out===0)?1:2}(O,D):O.strategy===3?function(V,L){for(var H,J,ne,se,fe=V.window;;){if(V.lookahead<=m){if(A(V),V.lookahead<=m&&L===0)return 1;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=3&&V.strstart>0&&(J=fe[ne=V.strstart-1])===fe[++ne]&&J===fe[++ne]&&J===fe[++ne]){se=V.strstart+m;do;while(J===fe[++ne]&&J===fe[++ne]&&J===fe[++ne]&&J===fe[++ne]&&J===fe[++ne]&&J===fe[++ne]&&J===fe[++ne]&&J===fe[++ne]&&ne<se);V.match_length=m-(se-ne),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=3?(H=l.l(V,1,V.match_length-3),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(H=l.l(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),H&&(x(V,!1),V.strm.avail_out===0))return 1}return V.insert=0,L===4?(x(V,!0),V.strm.avail_out===0?3:4):V.last_lit&&(x(V,!1),V.strm.avail_out===0)?1:2}(O,D):t[O.level].func(O,D);if(U!==3&&U!==4||(O.status=g),U===1||U===3)return M.avail_out===0&&(O.last_flush=-1),0;if(U===2&&(D===1?l.g(O):D!==5&&(l.m(O,0,0,!1),D===3&&(b(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),E(M),M.avail_out===0))return O.last_flush=-1,0}return D!==4?0:O.wrap<=0?1:(O.wrap===2?(k(O,255&M.adler),k(O,M.adler>>8&255),k(O,M.adler>>16&255),k(O,M.adler>>24&255),k(O,255&M.total_in),k(O,M.total_in>>8&255),k(O,M.total_in>>16&255),k(O,M.total_in>>24&255)):(T(O,M.adler>>>16),T(O,65535&M.adler)),E(M),O.wrap>0&&(O.wrap=-O.wrap),O.pending!==0?0:1)},r.deflateEnd=function(M){var D;return M&&M.state?(D=M.state.status)!==42&&D!==69&&D!==73&&D!==91&&D!==u&&D!==p&&D!==g?y(M,f):(M.state=null,D===p?y(M,-3):0):f},r.deflateSetDictionary=function(M,D){var X,O,G,K,Z,U,V,L,H=D.length;if(!M||!M.state||(K=(X=M.state).wrap)===2||K===1&&X.status!==42||X.lookahead)return f;for(K===1&&(M.adler=o(M.adler,D,H,0)),X.wrap=0,H>=X.w_size&&(K===0&&(b(X.head),X.strstart=0,X.block_start=0,X.insert=0),L=new a.Buf8(X.w_size),a.arraySet(L,D,H-X.w_size,X.w_size,0),D=L,H=X.w_size),Z=M.avail_in,U=M.next_in,V=M.input,M.avail_in=H,M.next_in=0,M.input=D,A(X);X.lookahead>=3;){O=X.strstart,G=X.lookahead-2;do X.ins_h=(X.ins_h<<X.hash_shift^X.window[O+3-1])&X.hash_mask,X.prev[O&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=O,O++;while(--G);X.strstart=O,X.lookahead=2,A(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=2,X.match_available=0,M.next_in=U,M.input=V,M.avail_in=Z,X.wrap=K,0},r.deflateInfo="pako deflate (from Nodeca project)"},357:s=>{s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},980:s=>{s.exports=function(r,n){var t,a,l,o,c,i,f,m,_,u,p,g,y,S,b,E,x,k,T,j,A,C,I,F,N;t=r.state,a=r.next_in,F=r.input,l=a+(r.avail_in-5),o=r.next_out,N=r.output,c=o-(n-r.avail_out),i=o+(r.avail_out-257),f=t.dmax,m=t.wsize,_=t.whave,u=t.wnext,p=t.window,g=t.hold,y=t.bits,S=t.lencode,b=t.distcode,E=(1<<t.lenbits)-1,x=(1<<t.distbits)-1;e:do{y<15&&(g+=F[a++]<<y,y+=8,g+=F[a++]<<y,y+=8),k=S[g&E];t:for(;;){if(g>>>=T=k>>>24,y-=T,(T=k>>>16&255)==0)N[o++]=65535&k;else{if(!(16&T)){if(!(64&T)){k=S[(65535&k)+(g&(1<<T)-1)];continue t}if(32&T){t.mode=12;break e}r.msg="invalid literal/length code",t.mode=30;break e}j=65535&k,(T&=15)&&(y<T&&(g+=F[a++]<<y,y+=8),j+=g&(1<<T)-1,g>>>=T,y-=T),y<15&&(g+=F[a++]<<y,y+=8,g+=F[a++]<<y,y+=8),k=b[g&x];r:for(;;){if(g>>>=T=k>>>24,y-=T,!(16&(T=k>>>16&255))){if(!(64&T)){k=b[(65535&k)+(g&(1<<T)-1)];continue r}r.msg="invalid distance code",t.mode=30;break e}if(A=65535&k,y<(T&=15)&&(g+=F[a++]<<y,(y+=8)<T&&(g+=F[a++]<<y,y+=8)),(A+=g&(1<<T)-1)>f){r.msg="invalid distance too far back",t.mode=30;break e}if(g>>>=T,y-=T,A>(T=o-c)){if((T=A-T)>_&&t.sane){r.msg="invalid distance too far back",t.mode=30;break e}if(C=0,I=p,u===0){if(C+=m-T,T<j){j-=T;do N[o++]=p[C++];while(--T);C=o-A,I=N}}else if(u<T){if(C+=m+u-T,(T-=u)<j){j-=T;do N[o++]=p[C++];while(--T);if(C=0,u<j){j-=T=u;do N[o++]=p[C++];while(--T);C=o-A,I=N}}}else if(C+=u-T,T<j){j-=T;do N[o++]=p[C++];while(--T);C=o-A,I=N}for(;j>2;)N[o++]=I[C++],N[o++]=I[C++],N[o++]=I[C++],j-=3;j&&(N[o++]=I[C++],j>1&&(N[o++]=I[C++]))}else{C=o-A;do N[o++]=N[C++],N[o++]=N[C++],N[o++]=N[C++],j-=3;while(j>2);j&&(N[o++]=N[C++],j>1&&(N[o++]=N[C++]))}break}}break}}while(a<l&&o<i);a-=j=y>>3,g&=(1<<(y-=j<<3))-1,r.next_in=a,r.next_out=o,r.avail_in=a<l?l-a+5:5-(a-l),r.avail_out=o<i?i-o+257:257-(o-i),t.hold=g,t.bits=y}},20:(s,r,n)=>{var t=n(761),a=n(562),l=n(299),o=n(980),c=n(881),i=-2,f=12,m=30;function _(j){return(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(j){var A;return j&&j.state?(A=j.state,j.total_in=j.total_out=A.total=0,j.msg="",A.wrap&&(j.adler=1&A.wrap),A.mode=1,A.last=0,A.havedict=0,A.dmax=32768,A.head=null,A.hold=0,A.bits=0,A.lencode=A.lendyn=new t.Buf32(852),A.distcode=A.distdyn=new t.Buf32(592),A.sane=1,A.back=-1,0):i}function g(j){var A;return j&&j.state?((A=j.state).wsize=0,A.whave=0,A.wnext=0,p(j)):i}function y(j,A){var C,I;return j&&j.state?(I=j.state,A<0?(C=0,A=-A):(C=1+(A>>4),A<48&&(A&=15)),A&&(A<8||A>15)?i:(I.window!==null&&I.wbits!==A&&(I.window=null),I.wrap=C,I.wbits=A,g(j))):i}function S(j,A){var C,I;return j?(I=new u,j.state=I,I.window=null,(C=y(j,A))!==0&&(j.state=null),C):i}var b,E,x=!0;function k(j){if(x){var A;for(b=new t.Buf32(512),E=new t.Buf32(32),A=0;A<144;)j.lens[A++]=8;for(;A<256;)j.lens[A++]=9;for(;A<280;)j.lens[A++]=7;for(;A<288;)j.lens[A++]=8;for(c(1,j.lens,0,288,b,0,j.work,{bits:9}),A=0;A<32;)j.lens[A++]=5;c(2,j.lens,0,32,E,0,j.work,{bits:5}),x=!1}j.lencode=b,j.lenbits=9,j.distcode=E,j.distbits=5}function T(j,A,C,I){var F,N=j.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new t.Buf8(N.wsize)),I>=N.wsize?(t.arraySet(N.window,A,C-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):((F=N.wsize-N.wnext)>I&&(F=I),t.arraySet(N.window,A,C-I,F,N.wnext),(I-=F)?(t.arraySet(N.window,A,C-I,I,0),N.wnext=I,N.whave=N.wsize):(N.wnext+=F,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=F))),0}r.inflateReset=g,r.inflateReset2=y,r.inflateResetKeep=p,r.inflateInit=function(j){return S(j,15)},r.inflateInit2=S,r.inflate=function(j,A){var C,I,F,N,z,R,q,M,D,X,O,G,K,Z,U,V,L,H,J,ne,se,fe,xe,he,_e=0,ye=new t.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return i;(C=j.state).mode===f&&(C.mode=13),z=j.next_out,F=j.output,q=j.avail_out,N=j.next_in,I=j.input,R=j.avail_in,M=C.hold,D=C.bits,X=R,O=q,fe=0;e:for(;;)switch(C.mode){case 1:if(C.wrap===0){C.mode=13;break}for(;D<16;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(2&C.wrap&&M===35615){C.check=0,ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0),M=0,D=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&M)<<8)+(M>>8))%31){j.msg="incorrect header check",C.mode=m;break}if((15&M)!=8){j.msg="unknown compression method",C.mode=m;break}if(D-=4,se=8+(15&(M>>>=4)),C.wbits===0)C.wbits=se;else if(se>C.wbits){j.msg="invalid window size",C.mode=m;break}C.dmax=1<<se,j.adler=C.check=1,C.mode=512&M?10:f,M=0,D=0;break;case 2:for(;D<16;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(C.flags=M,(255&C.flags)!=8){j.msg="unknown compression method",C.mode=m;break}if(57344&C.flags){j.msg="unknown header flags set",C.mode=m;break}C.head&&(C.head.text=M>>8&1),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0)),M=0,D=0,C.mode=3;case 3:for(;D<32;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}C.head&&(C.head.time=M),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,ye[2]=M>>>16&255,ye[3]=M>>>24&255,C.check=l(C.check,ye,4,0)),M=0,D=0,C.mode=4;case 4:for(;D<16;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}C.head&&(C.head.xflags=255&M,C.head.os=M>>8),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0)),M=0,D=0,C.mode=5;case 5:if(1024&C.flags){for(;D<16;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}C.length=M,C.head&&(C.head.extra_len=M),512&C.flags&&(ye[0]=255&M,ye[1]=M>>>8&255,C.check=l(C.check,ye,2,0)),M=0,D=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&((G=C.length)>R&&(G=R),G&&(C.head&&(se=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),t.arraySet(C.head.extra,I,N,G,se)),512&C.flags&&(C.check=l(C.check,I,G,N)),R-=G,N+=G,C.length-=G),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(R===0)break e;G=0;do se=I[N+G++],C.head&&se&&C.length<65536&&(C.head.name+=String.fromCharCode(se));while(se&&G<R);if(512&C.flags&&(C.check=l(C.check,I,G,N)),R-=G,N+=G,se)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(R===0)break e;G=0;do se=I[N+G++],C.head&&se&&C.length<65536&&(C.head.comment+=String.fromCharCode(se));while(se&&G<R);if(512&C.flags&&(C.check=l(C.check,I,G,N)),R-=G,N+=G,se)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;D<16;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(M!==(65535&C.check)){j.msg="header crc mismatch",C.mode=m;break}M=0,D=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),j.adler=C.check=0,C.mode=f;break;case 10:for(;D<32;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}j.adler=C.check=_(M),M=0,D=0,C.mode=11;case 11:if(C.havedict===0)return j.next_out=z,j.avail_out=q,j.next_in=N,j.avail_in=R,C.hold=M,C.bits=D,2;j.adler=C.check=1,C.mode=f;case f:if(A===5||A===6)break e;case 13:if(C.last){M>>>=7&D,D-=7&D,C.mode=27;break}for(;D<3;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}switch(C.last=1&M,D-=1,3&(M>>>=1)){case 0:C.mode=14;break;case 1:if(k(C),C.mode=20,A===6){M>>>=2,D-=2;break e}break;case 2:C.mode=17;break;case 3:j.msg="invalid block type",C.mode=m}M>>>=2,D-=2;break;case 14:for(M>>>=7&D,D-=7&D;D<32;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if((65535&M)!=(M>>>16^65535)){j.msg="invalid stored block lengths",C.mode=m;break}if(C.length=65535&M,M=0,D=0,C.mode=15,A===6)break e;case 15:C.mode=16;case 16:if(G=C.length){if(G>R&&(G=R),G>q&&(G=q),G===0)break e;t.arraySet(F,I,N,G,z),R-=G,N+=G,q-=G,z+=G,C.length-=G;break}C.mode=f;break;case 17:for(;D<14;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(C.nlen=257+(31&M),M>>>=5,D-=5,C.ndist=1+(31&M),M>>>=5,D-=5,C.ncode=4+(15&M),M>>>=4,D-=4,C.nlen>286||C.ndist>30){j.msg="too many length or distance symbols",C.mode=m;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;D<3;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}C.lens[ue[C.have++]]=7&M,M>>>=3,D-=3}for(;C.have<19;)C.lens[ue[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,xe={bits:C.lenbits},fe=c(0,C.lens,0,19,C.lencode,0,C.work,xe),C.lenbits=xe.bits,fe){j.msg="invalid code lengths set",C.mode=m;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;V=(_e=C.lencode[M&(1<<C.lenbits)-1])>>>16&255,L=65535&_e,!((U=_e>>>24)<=D);){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(L<16)M>>>=U,D-=U,C.lens[C.have++]=L;else{if(L===16){for(he=U+2;D<he;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(M>>>=U,D-=U,C.have===0){j.msg="invalid bit length repeat",C.mode=m;break}se=C.lens[C.have-1],G=3+(3&M),M>>>=2,D-=2}else if(L===17){for(he=U+3;D<he;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}D-=U,se=0,G=3+(7&(M>>>=U)),M>>>=3,D-=3}else{for(he=U+7;D<he;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}D-=U,se=0,G=11+(127&(M>>>=U)),M>>>=7,D-=7}if(C.have+G>C.nlen+C.ndist){j.msg="invalid bit length repeat",C.mode=m;break}for(;G--;)C.lens[C.have++]=se}}if(C.mode===m)break;if(C.lens[256]===0){j.msg="invalid code -- missing end-of-block",C.mode=m;break}if(C.lenbits=9,xe={bits:C.lenbits},fe=c(1,C.lens,0,C.nlen,C.lencode,0,C.work,xe),C.lenbits=xe.bits,fe){j.msg="invalid literal/lengths set",C.mode=m;break}if(C.distbits=6,C.distcode=C.distdyn,xe={bits:C.distbits},fe=c(2,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,xe),C.distbits=xe.bits,fe){j.msg="invalid distances set",C.mode=m;break}if(C.mode=20,A===6)break e;case 20:C.mode=21;case 21:if(R>=6&&q>=258){j.next_out=z,j.avail_out=q,j.next_in=N,j.avail_in=R,C.hold=M,C.bits=D,o(j,O),z=j.next_out,F=j.output,q=j.avail_out,N=j.next_in,I=j.input,R=j.avail_in,M=C.hold,D=C.bits,C.mode===f&&(C.back=-1);break}for(C.back=0;V=(_e=C.lencode[M&(1<<C.lenbits)-1])>>>16&255,L=65535&_e,!((U=_e>>>24)<=D);){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(V&&!(240&V)){for(H=U,J=V,ne=L;V=(_e=C.lencode[ne+((M&(1<<H+J)-1)>>H)])>>>16&255,L=65535&_e,!(H+(U=_e>>>24)<=D);){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}M>>>=H,D-=H,C.back+=H}if(M>>>=U,D-=U,C.back+=U,C.length=L,V===0){C.mode=26;break}if(32&V){C.back=-1,C.mode=f;break}if(64&V){j.msg="invalid literal/length code",C.mode=m;break}C.extra=15&V,C.mode=22;case 22:if(C.extra){for(he=C.extra;D<he;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}C.length+=M&(1<<C.extra)-1,M>>>=C.extra,D-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;V=(_e=C.distcode[M&(1<<C.distbits)-1])>>>16&255,L=65535&_e,!((U=_e>>>24)<=D);){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(!(240&V)){for(H=U,J=V,ne=L;V=(_e=C.distcode[ne+((M&(1<<H+J)-1)>>H)])>>>16&255,L=65535&_e,!(H+(U=_e>>>24)<=D);){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}M>>>=H,D-=H,C.back+=H}if(M>>>=U,D-=U,C.back+=U,64&V){j.msg="invalid distance code",C.mode=m;break}C.offset=L,C.extra=15&V,C.mode=24;case 24:if(C.extra){for(he=C.extra;D<he;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}C.offset+=M&(1<<C.extra)-1,M>>>=C.extra,D-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){j.msg="invalid distance too far back",C.mode=m;break}C.mode=25;case 25:if(q===0)break e;if(G=O-q,C.offset>G){if((G=C.offset-G)>C.whave&&C.sane){j.msg="invalid distance too far back",C.mode=m;break}G>C.wnext?(G-=C.wnext,K=C.wsize-G):K=C.wnext-G,G>C.length&&(G=C.length),Z=C.window}else Z=F,K=z-C.offset,G=C.length;G>q&&(G=q),q-=G,C.length-=G;do F[z++]=Z[K++];while(--G);C.length===0&&(C.mode=21);break;case 26:if(q===0)break e;F[z++]=C.length,q--,C.mode=21;break;case 27:if(C.wrap){for(;D<32;){if(R===0)break e;R--,M|=I[N++]<<D,D+=8}if(O-=q,j.total_out+=O,C.total+=O,O&&(j.adler=C.check=C.flags?l(C.check,F,O,z-O):a(C.check,F,O,z-O)),O=q,(C.flags?M:_(M))!==C.check){j.msg="incorrect data check",C.mode=m;break}M=0,D=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;D<32;){if(R===0)break e;R--,M+=I[N++]<<D,D+=8}if(M!==(4294967295&C.total)){j.msg="incorrect length check",C.mode=m;break}M=0,D=0}C.mode=29;case 29:fe=1;break e;case m:fe=-3;break e;case 31:return-4;default:return i}return j.next_out=z,j.avail_out=q,j.next_in=N,j.avail_in=R,C.hold=M,C.bits=D,(C.wsize||O!==j.avail_out&&C.mode<m&&(C.mode<27||A!==4))&&T(j,j.output,j.next_out,O-j.avail_out)?(C.mode=31,-4):(X-=j.avail_in,O-=j.avail_out,j.total_in+=X,j.total_out+=O,C.total+=O,C.wrap&&O&&(j.adler=C.check=C.flags?l(C.check,F,O,j.next_out-O):a(C.check,F,O,j.next_out-O)),j.data_type=C.bits+(C.last?64:0)+(C.mode===f?128:0)+(C.mode===20||C.mode===15?256:0),(X===0&&O===0||A===4)&&fe===0&&(fe=-5),fe)},r.inflateEnd=function(j){if(!j||!j.state)return i;var A=j.state;return A.window&&(A.window=null),j.state=null,0},r.inflateGetHeader=function(j,A){var C;return j&&j.state&&2&(C=j.state).wrap?(C.head=A,A.done=!1,0):i},r.inflateSetDictionary=function(j,A){var C,I=A.length;return j&&j.state?(C=j.state).wrap!==0&&C.mode!==11?i:C.mode===11&&a(1,A,I,0)!==C.check?-3:T(j,A,I,I)?(C.mode=31,-4):(C.havedict=1,0):i},r.inflateInfo="pako inflate (from Nodeca project)"},881:(s,r,n)=>{var t=n(761),a=15,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],i=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(f,m,_,u,p,g,y,S){var b,E,x,k,T,j,A,C,I,F=S.bits,N=0,z=0,R=0,q=0,M=0,D=0,X=0,O=0,G=0,K=0,Z=null,U=0,V=new t.Buf16(16),L=new t.Buf16(16),H=null,J=0;for(N=0;N<=a;N++)V[N]=0;for(z=0;z<u;z++)V[m[_+z]]++;for(M=F,q=a;q>=1&&V[q]===0;q--);if(M>q&&(M=q),q===0)return p[g++]=20971520,p[g++]=20971520,S.bits=1,0;for(R=1;R<q&&V[R]===0;R++);for(M<R&&(M=R),O=1,N=1;N<=a;N++)if(O<<=1,(O-=V[N])<0)return-1;if(O>0&&(f===0||q!==1))return-1;for(L[1]=0,N=1;N<a;N++)L[N+1]=L[N]+V[N];for(z=0;z<u;z++)m[_+z]!==0&&(y[L[m[_+z]]++]=z);if(f===0?(Z=H=y,j=19):f===1?(Z=l,U-=257,H=o,J-=257,j=256):(Z=c,H=i,j=-1),K=0,z=0,N=R,T=g,D=M,X=0,x=-1,k=(G=1<<M)-1,f===1&&G>852||f===2&&G>592)return 1;for(;;){A=N-X,y[z]<j?(C=0,I=y[z]):y[z]>j?(C=H[J+y[z]],I=Z[U+y[z]]):(C=96,I=0),b=1<<N-X,R=E=1<<D;do p[T+(K>>X)+(E-=b)]=A<<24|C<<16|I|0;while(E!==0);for(b=1<<N-1;K&b;)b>>=1;if(b!==0?(K&=b-1,K+=b):K=0,z++,--V[N]==0){if(N===q)break;N=m[_+y[z]]}if(N>M&&(K&k)!==x){for(X===0&&(X=M),T+=R,O=1<<(D=N-X);D+X<q&&!((O-=V[D+X])<=0);)D++,O<<=1;if(G+=1<<D,f===1&&G>852||f===2&&G>592)return 1;p[x=K&k]=M<<24|D<<16|T-g|0}}return K!==0&&(p[T+K]=N-X<<24|4194304|0),S.bits=M,0}},950:s=>{s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},564:(s,r,n)=>{var t=n(761);function a(L){for(var H=L.length;--H>=0;)L[H]=0}var l=256,o=286,c=30,i=15,f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);a(p);var g=new Array(60);a(g);var y=new Array(512);a(y);var S=new Array(256);a(S);var b=new Array(29);a(b);var E,x,k,T=new Array(c);function j(L,H,J,ne,se){this.static_tree=L,this.extra_bits=H,this.extra_base=J,this.elems=ne,this.max_length=se,this.has_stree=L&&L.length}function A(L,H){this.dyn_tree=L,this.max_code=0,this.stat_desc=H}function C(L){return L<256?y[L]:y[256+(L>>>7)]}function I(L,H){L.pending_buf[L.pending++]=255&H,L.pending_buf[L.pending++]=H>>>8&255}function F(L,H,J){L.bi_valid>16-J?(L.bi_buf|=H<<L.bi_valid&65535,I(L,L.bi_buf),L.bi_buf=H>>16-L.bi_valid,L.bi_valid+=J-16):(L.bi_buf|=H<<L.bi_valid&65535,L.bi_valid+=J)}function N(L,H,J){F(L,J[2*H],J[2*H+1])}function z(L,H){var J=0;do J|=1&L,L>>>=1,J<<=1;while(--H>0);return J>>>1}function R(L,H,J){var ne,se,fe=new Array(16),xe=0;for(ne=1;ne<=i;ne++)fe[ne]=xe=xe+J[ne-1]<<1;for(se=0;se<=H;se++){var he=L[2*se+1];he!==0&&(L[2*se]=z(fe[he]++,he))}}function q(L){var H;for(H=0;H<o;H++)L.dyn_ltree[2*H]=0;for(H=0;H<c;H++)L.dyn_dtree[2*H]=0;for(H=0;H<19;H++)L.bl_tree[2*H]=0;L.dyn_ltree[512]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function M(L){L.bi_valid>8?I(L,L.bi_buf):L.bi_valid>0&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function D(L,H,J,ne){var se=2*H,fe=2*J;return L[se]<L[fe]||L[se]===L[fe]&&ne[H]<=ne[J]}function X(L,H,J){for(var ne=L.heap[J],se=J<<1;se<=L.heap_len&&(se<L.heap_len&&D(H,L.heap[se+1],L.heap[se],L.depth)&&se++,!D(H,ne,L.heap[se],L.depth));)L.heap[J]=L.heap[se],J=se,se<<=1;L.heap[J]=ne}function O(L,H,J){var ne,se,fe,xe,he=0;if(L.last_lit!==0)do ne=L.pending_buf[L.d_buf+2*he]<<8|L.pending_buf[L.d_buf+2*he+1],se=L.pending_buf[L.l_buf+he],he++,ne===0?N(L,se,H):(N(L,(fe=S[se])+l+1,H),(xe=f[fe])!==0&&F(L,se-=b[fe],xe),N(L,fe=C(--ne),J),(xe=m[fe])!==0&&F(L,ne-=T[fe],xe));while(he<L.last_lit);N(L,256,H)}function G(L,H){var J,ne,se,fe=H.dyn_tree,xe=H.stat_desc.static_tree,he=H.stat_desc.has_stree,_e=H.stat_desc.elems,ye=-1;for(L.heap_len=0,L.heap_max=573,J=0;J<_e;J++)fe[2*J]!==0?(L.heap[++L.heap_len]=ye=J,L.depth[J]=0):fe[2*J+1]=0;for(;L.heap_len<2;)fe[2*(se=L.heap[++L.heap_len]=ye<2?++ye:0)]=1,L.depth[se]=0,L.opt_len--,he&&(L.static_len-=xe[2*se+1]);for(H.max_code=ye,J=L.heap_len>>1;J>=1;J--)X(L,fe,J);se=_e;do J=L.heap[1],L.heap[1]=L.heap[L.heap_len--],X(L,fe,1),ne=L.heap[1],L.heap[--L.heap_max]=J,L.heap[--L.heap_max]=ne,fe[2*se]=fe[2*J]+fe[2*ne],L.depth[se]=(L.depth[J]>=L.depth[ne]?L.depth[J]:L.depth[ne])+1,fe[2*J+1]=fe[2*ne+1]=se,L.heap[1]=se++,X(L,fe,1);while(L.heap_len>=2);L.heap[--L.heap_max]=L.heap[1],function(ue,pe){var ke,Ie,Y,te,re,be,ve=pe.dyn_tree,je=pe.max_code,Re=pe.stat_desc.static_tree,Ge=pe.stat_desc.has_stree,Xe=pe.stat_desc.extra_bits,Ke=pe.stat_desc.extra_base,Pe=pe.stat_desc.max_length,We=0;for(te=0;te<=i;te++)ue.bl_count[te]=0;for(ve[2*ue.heap[ue.heap_max]+1]=0,ke=ue.heap_max+1;ke<573;ke++)(te=ve[2*ve[2*(Ie=ue.heap[ke])+1]+1]+1)>Pe&&(te=Pe,We++),ve[2*Ie+1]=te,Ie>je||(ue.bl_count[te]++,re=0,Ie>=Ke&&(re=Xe[Ie-Ke]),be=ve[2*Ie],ue.opt_len+=be*(te+re),Ge&&(ue.static_len+=be*(Re[2*Ie+1]+re)));if(We!==0){do{for(te=Pe-1;ue.bl_count[te]===0;)te--;ue.bl_count[te]--,ue.bl_count[te+1]+=2,ue.bl_count[Pe]--,We-=2}while(We>0);for(te=Pe;te!==0;te--)for(Ie=ue.bl_count[te];Ie!==0;)(Y=ue.heap[--ke])>je||(ve[2*Y+1]!==te&&(ue.opt_len+=(te-ve[2*Y+1])*ve[2*Y],ve[2*Y+1]=te),Ie--)}}(L,H),R(fe,ye,L.bl_count)}function K(L,H,J){var ne,se,fe=-1,xe=H[1],he=0,_e=7,ye=4;for(xe===0&&(_e=138,ye=3),H[2*(J+1)+1]=65535,ne=0;ne<=J;ne++)se=xe,xe=H[2*(ne+1)+1],++he<_e&&se===xe||(he<ye?L.bl_tree[2*se]+=he:se!==0?(se!==fe&&L.bl_tree[2*se]++,L.bl_tree[32]++):he<=10?L.bl_tree[34]++:L.bl_tree[36]++,he=0,fe=se,xe===0?(_e=138,ye=3):se===xe?(_e=6,ye=3):(_e=7,ye=4))}function Z(L,H,J){var ne,se,fe=-1,xe=H[1],he=0,_e=7,ye=4;for(xe===0&&(_e=138,ye=3),ne=0;ne<=J;ne++)if(se=xe,xe=H[2*(ne+1)+1],!(++he<_e&&se===xe)){if(he<ye)do N(L,se,L.bl_tree);while(--he!=0);else se!==0?(se!==fe&&(N(L,se,L.bl_tree),he--),N(L,16,L.bl_tree),F(L,he-3,2)):he<=10?(N(L,17,L.bl_tree),F(L,he-3,3)):(N(L,18,L.bl_tree),F(L,he-11,7));he=0,fe=se,xe===0?(_e=138,ye=3):se===xe?(_e=6,ye=3):(_e=7,ye=4)}}a(T);var U=!1;function V(L,H,J,ne){F(L,0+(ne?1:0),3),function(se,fe,xe,he){M(se),he&&(I(se,xe),I(se,~xe)),t.arraySet(se.pending_buf,se.window,fe,xe,se.pending),se.pending+=xe}(L,H,J,!0)}r.p=function(L){U||(function(){var H,J,ne,se,fe,xe=new Array(16);for(ne=0,se=0;se<28;se++)for(b[se]=ne,H=0;H<1<<f[se];H++)S[ne++]=se;for(S[ne-1]=se,fe=0,se=0;se<16;se++)for(T[se]=fe,H=0;H<1<<m[se];H++)y[fe++]=se;for(fe>>=7;se<c;se++)for(T[se]=fe<<7,H=0;H<1<<m[se]-7;H++)y[256+fe++]=se;for(J=0;J<=i;J++)xe[J]=0;for(H=0;H<=143;)p[2*H+1]=8,H++,xe[8]++;for(;H<=255;)p[2*H+1]=9,H++,xe[9]++;for(;H<=279;)p[2*H+1]=7,H++,xe[7]++;for(;H<=287;)p[2*H+1]=8,H++,xe[8]++;for(R(p,287,xe),H=0;H<c;H++)g[2*H+1]=5,g[2*H]=z(H,5);E=new j(p,f,257,o,i),x=new j(g,m,0,c,i),k=new j(new Array(0),_,0,19,7)}(),U=!0),L.l_desc=new A(L.dyn_ltree,E),L.d_desc=new A(L.dyn_dtree,x),L.bl_desc=new A(L.bl_tree,k),L.bi_buf=0,L.bi_valid=0,q(L)},r.m=V,r.h=function(L,H,J,ne){var se,fe,xe=0;L.level>0?(L.strm.data_type===2&&(L.strm.data_type=function(he){var _e,ye=4093624447;for(_e=0;_e<=31;_e++,ye>>>=1)if(1&ye&&he.dyn_ltree[2*_e]!==0)return 0;if(he.dyn_ltree[18]!==0||he.dyn_ltree[20]!==0||he.dyn_ltree[26]!==0)return 1;for(_e=32;_e<l;_e++)if(he.dyn_ltree[2*_e]!==0)return 1;return 0}(L)),G(L,L.l_desc),G(L,L.d_desc),xe=function(he){var _e;for(K(he,he.dyn_ltree,he.l_desc.max_code),K(he,he.dyn_dtree,he.d_desc.max_code),G(he,he.bl_desc),_e=18;_e>=3&&he.bl_tree[2*u[_e]+1]===0;_e--);return he.opt_len+=3*(_e+1)+5+5+4,_e}(L),se=L.opt_len+3+7>>>3,(fe=L.static_len+3+7>>>3)<=se&&(se=fe)):se=fe=J+5,J+4<=se&&H!==-1?V(L,H,J,ne):L.strategy===4||fe===se?(F(L,2+(ne?1:0),3),O(L,p,g)):(F(L,4+(ne?1:0),3),function(he,_e,ye,ue){var pe;for(F(he,_e-257,5),F(he,ye-1,5),F(he,ue-4,4),pe=0;pe<ue;pe++)F(he,he.bl_tree[2*u[pe]+1],3);Z(he,he.dyn_ltree,_e-1),Z(he,he.dyn_dtree,ye-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,xe+1),O(L,L.dyn_ltree,L.dyn_dtree)),q(L),ne&&M(L)},r.l=function(L,H,J){return L.pending_buf[L.d_buf+2*L.last_lit]=H>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&H,L.pending_buf[L.l_buf+L.last_lit]=255&J,L.last_lit++,H===0?L.dyn_ltree[2*J]++:(L.matches++,H--,L.dyn_ltree[2*(S[J]+l+1)]++,L.dyn_dtree[2*C(H)]++),L.last_lit===L.lit_bufsize-1},r.g=function(L){F(L,2,3),N(L,256,p),function(H){H.bi_valid===16?(I(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):H.bi_valid>=8&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(L)}},744:s=>{s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},347:(s,r,n)=>{var t,a;n.d(r,{s:()=>t,S:()=>a}),function(l){l[l.Inport=0]="Inport",l[l.Outport=1]="Outport",l[l.Undefined=2]="Undefined"}(t||(t={})),function(l){l[l.STOPPED=0]="STOPPED",l[l.RUNNING=1]="RUNNING"}(a||(a={}))},676:(s,r,n)=>{n.d(r,{D:()=>t});const t=0},641:(s,r,n)=>{var t;n.d(r,{OM:()=>o,Le:()=>l,nc:()=>a,n_:()=>c}),function(i){i[i.Float32Audio=0]="Float32Audio",i[i.TypedArray=1]="TypedArray"}(t||(t={}));class a{constructor(){this.type=t.TypedArray}serialize(){return{type:this.type}}}class l{constructor(f,m){this.channels=0,this.sampleRate=0,this.type=t.Float32Audio,this.channels=f,this.sampleRate=m}static fromAudioBuffer(f){return new l(f.numberOfChannels,f.sampleRate)}get isInterleaved(){return!0}serialize(){return{channels:this.channels,sampleRate:this.sampleRate,type:this.type}}}class o{constructor(f,m){this.buffer=f,this._=m}getAsAudioBuffer(f){if(this._ instanceof l&&this._.channels>0){const u=new Float32Array(this.buffer),p=u.length/this._.channels,g=f.createBuffer(this._.channels,p,this._.sampleRate);for(let y=0;y<this._.channels;y++){const S=g.getChannelData(y);for(let b=0,E=S.length;b<E;b++)S[b]=u[b*g.numberOfChannels+y]}return g}const m=new Float32Array(this.buffer),_=f.createBuffer(1,m.length,f.sampleRate);return _.copyToChannel(m,0),_}}const c=i=>{switch(i.type){case t.Float32Audio:return new l(i.channels,i.sampleRate);case t.TypedArray:return new a;default:throw new Error(`Unable to deserialize RNBODataDesc of type ${i.type}`)}}},191:(s,r,n)=>{n.d(r,{v:()=>c});var t=n(163),a=n(347),l=n(389),o=n(133);class c{constructor(){this.I=0,this.M=44100,this.A=64,this.outgoingEvent=new l.BM,this.parameterChangeEvent=new l.BM,this.B=this.sampsToMs(this.A)}static getNonConversionObject(){return{applyStepsToNormalizedParameterValue:function(f){return f},convertToNormalizedParameterValue:function(f){return f},convertFromNormalizedParameterValue:function(f){return f},getNumParameters:function(){return 0},constrainParameterValue:function(f){return f},isPolyphonic:!1,subpatches:[]}}static deserializeConversion(f){if(f){const m={},_=Object.keys(f);for(let u=0;u<_.length;u++){const p=_[u];if(p==="subpatches"){const g=Object.keys(f.subpatches);for(let y=0;y<g.length;y++){const S=g[y],b=f.subpatches[S],E=c.deserializeConversion(b);b.isPolyphonic?m[S]=[E]:m[S]=E}}else m[p]=o.evalFunction(f[p])}return m}return this.getNonConversionObject()}getSampleRate(){return this.M}getSamplesPerBlock(){return this.A}sampsToMs(f){return f/this.M*1e3}getNumInputChannels(){return this.T?this.T.numInputChannels:0}getNumOutputChannels(){return this.T?this.T.numOutputChannels:0}getNumMIDIInputPorts(){return this.T?this.T.numMidiInputPorts:0}getNumMIDIOutputPorts(){return this.T?this.T.numMidiOutputPorts:0}getNumParameters(){return this.T?this.T.numParameters:0}getNumSignalInParameters(){return this.T?this.T.numSignalInParameters:0}getNumSignalOutParameters(){return this.T?this.T.numSignalOutParameters:0}getPatcherSerial(){return this.T!==void 0?this.T.patcherSerial:0}getParameterName(f){if(!this.T||f>=this.T.parameters.length)throw new Error(`Parameter index ${f} out of bounds.`);return this.T.parameters[f].name}getParameterId(f){if(!this.T||f>=this.T.parameters.length)throw new Error(`Parameter index ${f} out of bounds.`);return this.T.parameters[f].paramId}getParameterToNormalizedFunction(f){return m=>this.P.convertToNormalizedParameterValue(f,m)}getParameterFromNormalizedFunction(f){return m=>this.P.convertFromNormalizedParameterValue(f,m)}constrainParameterValue(f){return m=>this.P.constrainParameterValue(f,m)}getParameterInfo(f){if(!this.T||f>=this.T.parameters.length)throw new Error(`Parameter index ${f} out of bounds.`);const m=this.T.parameters[f];let _,u;switch(m.type){case"ParameterTypeBang":u=o.ParameterTypeBang;break;case"ParameterTypeCount":u=o.ParameterTypeCount;break;case"ParameterTypeList":u=o.ParameterTypeList;break;case"ParameterTypeNumber":u=o.ParameterTypeNumber;break;case"ParameterTypeSignal":u=o.ParameterTypeSignal;break;default:throw new Error(`Unknown Parameter Type from patcher description ${m.type}`)}switch(m.ioType){case"IOTypeInput":_=o.IOTypeInput;break;case"IOTypeOutput":_=o.IOTypeOutput;break;case"IOTypeUndefined":_=o.IOTypeUndefined;break;default:throw new Error(`Unknown Parameter IOType from patcher description ${m.type}`)}return{displayName:m.displayName,enumValues:m.enumValues,exponent:m.exponent,id:m.paramId,index:f,initialValue:m.initialValue,ioType:_,isEnum:m.isEnum,max:m.maximum,min:m.minimum,name:m.name,signalIndex:m.signalIndex,steps:m.steps,type:u,unit:m.unit,visible:m.visible}}getNumExternalDataRefs(){return this.T!==void 0?this.T.externalDataRefs.length:0}getExternalDataId(f){return this.T!==void 0?this.T.externalDataRefs[f].id:""}getExternalDataRefIds(){let f;return this.T&&(f=[],Object.keys(this.T.externalDataRefs).forEach(m=>{let _=this.T.externalDataRefs[m];f.push(_.id)})),f}getExternalDataRefInfos(){return this.T!==void 0?this.T.externalDataRefs:[]}getNumMessages(){return this.T!==void 0?this.T.inports.length+this.T.outports.length:0}getMessageInfos(){let f=[];return this.T!==void 0&&(Object.keys(this.T.outports).forEach(m=>{f.push({tag:this.T.outports[m].tag,type:a.s.Outport,meta:this.T.outports[m].meta})}),Object.keys(this.T.inports).forEach(m=>{f.push({tag:this.T.inports[m].tag,type:a.s.Inport,meta:this.T.inports[m].meta})})),f}removeAllSubscriptions(){this.outgoingEvent.removeAllSubscriptions(),this.parameterChangeEvent.removeAllSubscriptions()}setPatcherDesc(f){return(0,t.mG)(this,void 0,void 0,function*(){this.T=f,this.P=c.deserializeConversion(this.T.paramConversion)})}}},916:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>WASMEngine});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(163),_baseEngine__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(191),_wasmHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(158),_event__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(555);class WASMEngine extends _baseEngine__WEBPACK_IMPORTED_MODULE_0__.v{getCurrentTime(){return this.R.getCurrentTime()}setCurrentTime(s){this.R.isReady()&&this.R.setCurrentTime(s)}prepareToProcess(s,r,n){(n||s!==this.M||r!==this.A)&&this.R.prepareToProcess(s,r)}process(s,r,n,t,a,l,o){this.R.process(s,r,n,t,a)}scheduleMidiEvent(s,r){this.scheduleEvent(new _event__WEBPACK_IMPORTED_MODULE_2__.Ym(this.I,s,r))}handleParameterEvent(s){this.parameterChangeEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.DB(s.time,s.index,s.value,s.source))}handleMidiEvent(s){this.outgoingEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.Ym(s.time,s.port,[s.b1,s.b2,s.b3],void 0))}handleMessageEvent(s){this.outgoingEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.f3(s.time,this.R.resolveTag(s.tag),s.type===0?s.numValue:s.type===1?this.R.retrieveArray(s.listValue):void 0,this.R.resolveTag(s.objectId)))}handlePresetEvent(s){this.outgoingEvent.emit(new _event__WEBPACK_IMPORTED_MODULE_2__.bt(s.time,_event__WEBPACK_IMPORTED_MODULE_2__.l0.Touched))}getParameterValue(s){return this.R.getParameterValue(s)}get isSync(){return!0}scheduleEvent(s){this.R.scheduleEvent(s)}setPatcherCode(code){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){return new Promise((resolve,reject)=>{let restoredRnboModule;const restoredWASM=code+"restoredRnboModule = rnbo_module;";eval(restoredWASM),restoredRnboModule().then(s=>(delete s.then,this.R=new _wasmHelper__WEBPACK_IMPORTED_MODULE_1__.z(this,s),resolve()))})})}setExternalData(s,r,n){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){this.R.setExternalData(s,r,n)})}releaseExternalData(s){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){const[r,n]=this.R.releaseExternalData(s);return{data:r,typeDesc:n}})}getPreset(){return(0,tslib__WEBPACK_IMPORTED_MODULE_3__.mG)(this,void 0,void 0,function*(){return JSON.parse(this.R.getPreset())})}setPreset(s){this.R.setPreset(JSON.stringify(s))}}},158:(s,r,n)=>{n.d(r,{z:()=>o});var t=n(641),a=n(555),l=n(856);class o{constructor(i,f){this.O=0,this.C=0,this.N=!1,this.k=new l.aO,this.U=f;let m=new this.U.CoreObject;this.j=m;let _={handleParameterEvent:i.handleParameterEvent.bind(i),handleMidiEvent:i.handleMidiEvent.bind(i),handleMessageEvent:i.handleMessageEvent.bind(i),handlePresetEvent:i.handlePresetEvent.bind(i)},u=this.U.EventHandler.implement(_);this.F=m.createParameterInterface(u);for(let p=0;p<m.getNumParameters();p++){let g=m.getParameterInfo(p);this.k.addParam(g,m.getParameterName(p))}this.O=m.getNumInputChannels()+m.getNumSignalInParameters(),this.C=m.getNumOutputChannels(),this.N=!0}isReady(){return this.N}pushArray(i){let f=this.j.getArrayPassingHEAP(i.length);return this.U.HEAPF64.set(i,f>>3),f}retrieveArray(i){let f=[];for(let m=0;m<i.size();m++)f.push(i.get(m));return f}setExternalData(i,f,m){const _=new Uint8Array(f),u=this.j.getNewMemoryBuffer(_.byteLength);this.U.HEAPU8.set(_,u),m instanceof t.Le?this.j.setExternalAudioBuffer(i,u,_.byteLength,m.channels,m.sampleRate):m instanceof t.nc&&this.j.setExternalUntypedBuffer(i,u,_.byteLength)}releaseExternalData(i){let f,m=this.j.getDataRefIndex(i),_=this.j.getDataRefType(m),u=this.j.getDataRefData(m),p=new Uint8Array(u.sizeInBytes);return p.set(this.U.HEAPU8.subarray(u.data,u.data+u.sizeInBytes)),f=_.type==1?new t.Le(_.channels,_.sampleRate):new t.nc,this.j.releaseDataRef(m),[p.buffer,f]}getCurrentTime(){return this.j.getCurrentTime()}setCurrentTime(i){this.j.setCurrentTime(i)}prepareToProcess(i,f){this.j.prepareToProcess(i,f)}process(i,f,m,_,u,p){let g=0,y=0;for(let S=0;S<f&&g<this.O;S++){let b=i[S],E=this.j.getInputChannel(g);this.U.HEAPF64.set(b,E>>3),g++}if(p)for(let S=g;S<this.O;S++){let b=this.k.getParamName(S);if(b!==void 0){let E=this.j.getInputChannel(S);this.U.HEAPF64.set(this.k.getParamArray(S,p[b],u),E>>3),g++}}this.j.process(g,this.C,u);for(let S=0;S<_&&y<this.C;S++){let b=m[S],E=this.j.getOutputChannel(y)>>3;b.set(this.U.HEAPF64.subarray(E,E+b.length)),y++}}resolveTag(i){return this.j.resolveTag(i)}scheduleEvent(i){i.type===a.m5.MIDIEvent?this.j.scheduleMidiEvent(i.time,i.port,i.data[0],i.data[1],i.data[2]):i.type===a.m5.ParameterEvent?this.j.scheduleParameterEvent(i.target,i.time,i.value,i.source):i.type===a.m5.MessageEvent?Array.isArray(i.payload)?this.j.sendListMessage(i.tag,i.objectId,this.pushArray(i.payload),i.payload.length,i.time):typeof i.payload=="number"?this.j.sendNumMessage(i.tag,i.objectId,i.payload,i.time):i.payload===void 0&&this.j.sendBangMessage(i.tag,i.objectId,i.time):i.type===a.m5.TransportEvent?this.j.scheduleTransportEvent(i.time,i.state):i.type===a.m5.TempoEvent?this.j.scheduleTempoEvent(i.time,i.tempo):i.type===a.m5.BeatTimeEvent?this.j.scheduleBeatTimeEvent(i.time,i.beattime):i.type===a.m5.TimeSignatureEvent&&this.j.scheduleTimeSignatureEvent(i.time,i.numerator,i.denominator)}getNumParameters(){return this.j.getNumParameters()}getParameterValue(i){return this.j.getParameterValue(i)}numIns(){return this.O}numOuts(){return this.C}getPreset(){return this.j.getPreset()}setPreset(i){this.j.setPreset(i)}}},555:(s,r,n)=>{n.d(r,{j4:()=>i,J0:()=>b,J9:()=>f,Lk:()=>m,VH:()=>a,m5:()=>t,Ym:()=>u,f3:()=>_,DB:()=>p,bt:()=>g,l0:()=>l,j6:()=>x,gs:()=>S,QU:()=>E,cr:()=>y,gA:()=>o,f4:()=>k});var t,a,l,o,c=n(676);(function(T){T[T.BufferTransfer=0]="BufferTransfer",T[T.ClockEvent=1]="ClockEvent",T[T.DataRefEvent=2]="DataRefEvent",T[T.MessageEvent=3]="MessageEvent",T[T.MIDIEvent=4]="MIDIEvent",T[T.ParameterEvent=5]="ParameterEvent",T[T.PresetEvent=6]="PresetEvent",T[T.StartupEvent=7]="StartupEvent",T[T.TransportEvent=8]="TransportEvent",T[T.TempoEvent=9]="TempoEvent",T[T.BeatTimeEvent=10]="BeatTimeEvent",T[T.TimeSignatureEvent=11]="TimeSignatureEvent"})(t||(t={}));class i{constructor(j=c.D,A){this.invalid=!1,this.time=j,this.eventTarget=A}serialize(){return{eventTarget:this.eventTarget,invalid:this.invalid,source:this.source,time:this.time}}}class f extends i{constructor(j,A,C,I){super(j,I),this.type=t.ClockEvent,this.clockIndex=A,this.value=C}get hasValue(){return this.value!==void 0}serialize(){return Object.assign(super.serialize(),{clockIndex:this.clockIndex,type:this.type,value:this.value})}}(function(T){T[T.Update=1]="Update"})(a||(a={}));class m extends i{constructor(j,A,C,I){super(j,I),this.type=t.DataRefEvent,this.dataRefIndex=A,this.action=C}serialize(){return Object.assign(super.serialize(),{action:this.action,dataRefIndex:this.dataRefIndex,type:this.type})}}class _ extends i{constructor(j,A,C,I="",F){super(j,F),this.type=t.MessageEvent,this.objectId=I,this.tag=A,this.payload=C}serialize(){return Object.assign(super.serialize(),{payload:this.payload,objectId:this.objectId,tag:this.tag,type:this.type})}}class u extends i{constructor(j,A,C,I){if(super(j,I),this.type=t.MIDIEvent,C.length>3)throw new Error(`MIDIData can only contain a maximum of 3 bytes. Received ${C.length}`);if(this.data=C,this.data.length<3){const N=C.length;this.data.length=3,this.data=this.data.fill(void 0,N,3)}let F=0;for(let N=0;N<3;N++)C[N]!==void 0&&F++;if(F<1)throw new Error("MIDIData must at least have the first byte set.");this.length=F,this.status=240&C[0],this.channel=15&C[0],this.port=A}serialize(){return Object.assign(super.serialize(),{channel:this.channel,data:this.data,port:this.port,type:this.type})}}class p extends i{constructor(j,A,C,I,F){super(j,F),this.type=t.ParameterEvent,this.target=A,this.value=C,this.source=I}serialize(){return Object.assign(super.serialize(),{target:this.target,type:this.type,value:this.value})}}(function(T){T[T.Set=1]="Set",T[T.Touched=2]="Touched"})(l||(l={}));class g extends i{constructor(j,A,C){super(j,void 0),this.type=t.PresetEvent,this.action=A,this.preset=C}serialize(){return Object.assign(super.serialize(),{action:this.action,type:this.type,preset:this.preset})}}class y extends i{constructor(j,A){super(j,void 0),this.type=t.TransportEvent,this.state=A}serialize(){return Object.assign(super.serialize(),{state:this.state,type:this.type})}}class S extends i{constructor(j,A){super(j,void 0),this.type=t.TempoEvent,this.tempo=A}serialize(){return Object.assign(super.serialize(),{tempo:this.tempo,type:this.type})}}class b extends i{constructor(j,A){super(j,void 0),this.type=t.BeatTimeEvent,this.beattime=A}serialize(){return Object.assign(super.serialize(),{beattime:this.beattime,type:this.type})}}class E extends i{constructor(j,A,C){super(j,void 0),this.type=t.TimeSignatureEvent,this.numerator=A,this.denominator=C}serialize(){return Object.assign(super.serialize(),{numerator:this.numerator,denominator:this.denominator,type:this.type})}}(function(T){T[T.BEGIN=0]="BEGIN",T[T.END=1]="END"})(o||(o={}));class x extends i{constructor(j,A){super(j,void 0),this.type=t.StartupEvent,this.phase=A}serialize(){return Object.assign(super.serialize(),{phase:this.phase,type:this.type})}}const k=T=>{switch(T.type){case t.ClockEvent:return new f(T.time,T.clockIndex,T.value,T.eventTarget);case t.DataRefEvent:return new m(T.time,T.dataRefIndex,T.action,T.eventTarget);case t.MessageEvent:return new _(T.time,T.tag,T.payload,T.objectId,T.eventTarget);case t.MIDIEvent:return new u(T.time,T.port,T.data,T.eventTarget);case t.ParameterEvent:return new p(T.time,T.target,T.value,T.source,T.eventTarget);case t.PresetEvent:return new g(T.time,T.action,T.preset);case t.TransportEvent:return new y(T.time,T.state);case t.TempoEvent:return new S(T.time,T.tempo);case t.BeatTimeEvent:return new b(T.time,T.beattime);case t.TimeSignatureEvent:return new E(T.time,T.numerator,T.denominator);case t.StartupEvent:return new x(T.time,T.phase);default:throw new Error(`Unable to deserialize RNBOEvent of type ${T.type}`)}}},400:(s,r,n)=>{var t,a;n.d(r,{r:()=>t,E:()=>a}),function(l){l[l.Number=0]="Number",l[l.Bang=1]="Bang",l[l.List=2]="List",l[l.Signal=3]="Signal",l[l.Count=4]="Count",l[l.Enum=5]="Enum"}(t||(t={})),function(l){l[l.All=0]="All",l[l.Internal=1]="Internal"}(a||(a={}))},856:(s,r,n)=>{n.d(r,{jN:()=>i,IR:()=>l,V2:()=>c,BX:()=>o,EX:()=>t.E,rH:()=>t.r,aO:()=>_,zT:()=>m});var t=n(400),a=n(389);function l(u){return class extends u{constructor(...p){super(),this.changeEvent=new a.BM,this.L=new a.BM;const g=p[0];this.X=g.notificationSetting,this.convertFromNormalizedValue=g.scaling.convertFromNormalized,this.convertToNormalizedValue=g.scaling.convertToNormalized,this.constrainParameterValue=g.scaling.constrainParameterValue,this.initialValue=g.initialValue,this.V=g.initialValue,this.displayName=g.displayName||g.name,this.exponent=g.exponent,this.id=g.id,this.index=g.index,this.min=g.min,this.max=g.max,this.name=g.name,this.steps=g.steps,this.unit=g.unit||""}get notificationSetting(){return this.X}get normalizedValue(){return this.convertToNormalizedValue(this.V)}set normalizedValue(p){this.q(this.convertFromNormalizedValue(p))}$(p){this.X=p}q(p){p=this.constrainParameterValue(p),this.V!==p&&(this.V=p,this.L.emit(this),this.notificationSetting===t.E.All&&this.changeEvent.emit(p))}W(p){this.V=p,this.changeEvent.emit(p)}}}class o extends l(Object){constructor(p){super(p),this.type=t.r.Number}get value(){return this.V}set value(p){this.q(p)}}class c extends l(Object){constructor(p){super(p),this.type=t.r.Enum,this.G=p.enumValues}get enumValues(){return this.G.slice()}get enumValue(){return this.G[this.value]}set enumValue(p){const g=this.G.indexOf(p);if(g<0)throw new Error(`Invalid EnumValue. ${p} is not an available value on the enum parameter ${this.name}`);this.value=g}get value(){return this.V}set value(p){this.q(p)}}class i extends l(Object){constructor(){super(...arguments),this.type=t.r.Bang}get isActive(){return this.V===1}bang(){this.q(1)}}var f=n(133);const m=(u,p,g,y)=>u.type===t.r.Number&&u.enumValues.length?new c(Object.assign(Object.assign({},u),{scaling:y,index:p,notificationSetting:g})):u.type===t.r.Bang?new i(Object.assign(Object.assign({},u),{scaling:y,index:p,notificationSetting:g})):(u.type,t.r.Number,new o(Object.assign(Object.assign({},u),{scaling:y,index:p,notificationSetting:g})));class _{constructor(){this.K={},this.Y=new Float32Array(128)}addParam(p,g){p.type==f.ParameterTypeSignal&&p.ioType===f.IOTypeInput&&(this.K[p.signalIndex]={name:g,param:new Float32Array(128)})}getParamName(p){let g=this.K[p];return g!==void 0?g.name:void 0}getParamArray(p,g,y){if(g.length==y)return g;{let S=this.K[p];return S.param.length!=y&&(S.param=new Float32Array(y)),S.param.fill(g[0])}}}},389:(s,r,n)=>{n.d(r,{f8:()=>t,e1:()=>a,I7:()=>l,EL:()=>c,BM:()=>f});const t=(()=>{try{if(typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"){const m=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(m instanceof WebAssembly.Module)return new WebAssembly.Instance(m)instanceof WebAssembly.Instance}}catch{}return!1})();class a{fromRNBOtime(_){return .001*_}toRNBOtime(_){return 1e3*_}}const l=typeof isSecureContext<"u"&&isSecureContext&&typeof AudioWorkletNode<"u";let o=Math.pow(10,4);const c=()=>(o>=Number.MAX_SAFE_INTEGER&&(o=Math.pow(10,4)),parseInt(`${Date.now().toString(10).slice(-3)}${(o++).toString(10).slice(-4)}`,10)),i=m=>m.slice();class f{constructor(){this.Z=[],this.H=[]}get listenerCount(){return this.Z.length+this.H.length}emit(_){if(this.Z.length){const u=i(this.Z);for(let p=0,g=u.length;p<g;p++)u[p](_)}if(this.H.length){const u=i(this.H);for(let p=0,g=u.length;p<g;p++)u[p](_);u.forEach(p=>this.unsubscribe(p))}}once(_){return this.H.push(_),{unsubscribe:()=>this.unsubscribe(_)}}subscribe(_){return this.Z.push(_),{unsubscribe:()=>this.unsubscribe(_)}}unsubscribe(_){const u=this.Z.indexOf(_);u>=0&&this.Z.splice(u,1);const p=this.H.indexOf(_);p>=0&&this.H.splice(p,1)}removeAllSubscriptions(){this.Z=[],this.H=[]}}},163:(s,r,n)=>{function t(a,l,o,c){return new(o||(o=Promise))(function(i,f){function m(p){try{u(c.next(p))}catch(g){f(g)}}function _(p){try{u(c.throw(p))}catch(g){f(g)}}function u(p){var g;p.done?i(p.value):(g=p.value,g instanceof o?g:new o(function(y){y(g)})).then(m,_)}u((c=c.apply(a,l||[])).next())})}n.d(r,{mG:()=>t})},264:s=>{s.exports={src:[{code:'class RNBOPatcher{constructor(){this._currentTime=0,this.audioProcessSampleCount=0,this.sampleOffsetIntoNextAudioBuffer=0,this.vs=0,this.maxvs=0,this.sr=44100,this.invsr=2267573696e-14,this.zeroBuffer=0,this.dummyBuffer=0,this.voiceIndex=0,this.noteNumber=0}getParameterIndexForID(e){return-1}getNumMidiInputPorts(){return 0}processMidiEvent(e,t,s,r){this.updateTime(e)}getNumMidiOutputPorts(){return 0}process(e,t,s,r,i){this.vs=i,this.updateTime(this.getEngine().getCurrentTime()),this.audioProcessSampleCount=this.msToSamps(this._currentTime,this.sr)}prepareToProcess(e,t){this.vs=t,this.maxvs=t,this.zeroBuffer=resizeSignal(this.zeroBuffer,0,t),this.dummyBuffer=resizeSignal(this.dummyBuffer,0,t),this.sr=e,this.invsr=1/e}msToSamps(e,t){return rnbo_floor(e*t*.001)}sampsToMs(e){return e*(1e3*this.invsr)}getNumInputChannels(){return 0}getNumOutputChannels(){return 0}getDataRef(e){return 0}getNumDataRefs(){return 0}fillDataRef(e,t){e}processDataViewUpdate(e,t){this.updateTime(t)}initialize(e){this.assign_defaults(),this.setState(e),this.initializeObjects(e),this.allocateDataRefs(),this.startup(e)}initializeObjects(e){}allocateDataRefs(){}startup(e){}setIsMuted(e){}getPatcherSerial(){return 7}getState(e){e[eventTargetKey]=this,e[patcherSerialKey]=this.getPatcherSerial(),e.p7=1,e.p7_noteNumber=this.noteNumber}setState(e){e[patcherSerialKey]==this.getPatcherSerial()&&(containsValue(e[eventTargetKey])&&this.getEngine().updatePatcherEventTarget(e[eventTargetKey],this),containsValue(e.p7_noteNumber)&&(this.noteNumber=e.p7_noteNumber))}setParameterValue(e,t,s){this.updateTime(s)}processParameterEvent(e,t,s){this.setParameterValue(e,t,s)}processNormalizedParameterEvent(e,t,s){this.setParameterValueNormalized(e,t,s)}getParameterValue(e){return 0}getNumSignalInParameters(){return 0}getNumParameters(){return 0}getParameterName(e){return"bogus"}getParameterId(e){return"bogus"}getParameterInfo(e,t){e}sendParameter(e){this.getEngine().notifyParameterValueChanged(e,this.getParameterValue(e))}processClockEvent(e,t,s,r){this.updateTime(e)}processOutletAtCurrentTime(e,t,s){}processOutletEvent(e,t,s,r){this.updateTime(r),this.processOutletAtCurrentTime(e,t,s)}sendOutlet(e,t){this.getEngine().sendOutlet(this,e,t)}schedule(e,t){this.getEngine().scheduleClockEvent(this,e,t+this._currentTime)}scheduleValue(e,t,s){this.getEngine().scheduleClockEventWithValue(this,e,t+this._currentTime,s)}stop(e){this.getEngine().flushClockEvents(this,e,!1)}stopWithValue(e,v){this.getEngine().flushClockEventsWithValue(this,e,v,!1)}processNumMessage(e,o,t,s){this.updateTime(t)}processListMessage(e,o,t,s){this.updateTime(t)}resolveTag(e){return""}sendMidiEvent(e,t,s,r){this.getEngine().sendMidiEvent(e,t,s,r)}sendMidiEventList(e,t){this.getEngine().sendMidiEventList(e,t)}updateTime(e){this._currentTime=e,this.sampleOffsetIntoNextAudioBuffer=this.msToSamps(e,this.sr)-this.vs-this.audioProcessSampleCount}assign_defaults(){}setEngineAndPatcher(e,t){this._engineInterface=e,this._parentPatcher=t}getEngine(){return this._engineInterface}getPatcher(){return this._parentPatcher}}rnboObj=new RNBOPatcher;',encoding:"utf-8",type:"js"}],options:{classname:"rnbomatic",minifyOutput:!0},desc:{parameters:[],numParameters:0,numSignalInParameters:0,layouts:[{name:"layout",boxes:[]}],numInputChannels:0,numOutputChannels:0,patcherSerial:0,externalDataRefs:[]}}}},__webpack_module_cache__={};function __webpack_require__(s){var r=__webpack_module_cache__[s];if(r!==void 0)return r.exports;var n=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=s=>{var r=s&&s.J?()=>s.default:()=>s;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(s,r)=>{for(var n in r)__webpack_require__.o(r,n)&&!__webpack_require__.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:r[n]})},__webpack_require__.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r),__webpack_require__.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"J",{value:!0})};var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BangParameter:()=>o.jN,BaseDevice:()=>S,BaseEvent:()=>i.j4,BeatTimeEvent:()=>i.J0,CommonParameterMixin:()=>o.IR,DataBuffer:()=>a.OM,DeviceType:()=>g,EnumParameter:()=>o.V2,EventSubject:()=>l.BM,EventType:()=>i.m5,MIDIEvent:()=>i.Ym,MessageEvent:()=>i.f3,MessagePortType:()=>t.s,NumberParameter:()=>o.BX,ParameterNotificationSetting:()=>o.EX,ParameterType:()=>o.rH,PresetEvent:()=>i.bt,RNBOPresetEventAction:()=>i.l0,ScriptDevice:()=>F,TempoEvent:()=>i.gs,TimeNow:()=>X.D,TimeSignatureEvent:()=>i.QU,TransportEvent:()=>i.cr,TransportState:()=>t.S,WorkletDevice:()=>D,createDevice:()=>K,version:()=>O});var s=__webpack_require__(163),r=__webpack_require__(845),n=__webpack_require__.n(r),t=__webpack_require__(347),a=__webpack_require__(641),l=__webpack_require__(389),o=__webpack_require__(856),c=__webpack_require__(400),i=__webpack_require__(555);const f={notificationSetting:c.E.All};class m{constructor(U){this.tt=new Map,this.et=new Map,this.id=(0,l.EL)(),this.parameterChangeEvent=new l.BM,this.rt=L=>{const H=this.tt.get(L.target);if(!H)return;const J=L.value;H.type!==c.r.Bang&&J===H.value||(H.W(J),this.parameterChangeEvent.emit(H))},this.nt=L=>{const H=L.index,J=L.type===c.r.Bang?1:L.value,ne=new i.DB(0,H,J,this.id,void 0);this.it&&this.it.scheduleEvent(ne),this.notificationSetting===c.E.All&&this.parameterChangeEvent.emit(L)};const V=Object.assign({},f,U);this.X=V.notificationSetting}st(U){return this.tt.get(U)||void 0}ot(){for(const U of this.tt.values())U.L.removeAllSubscriptions(),U.changeEvent.removeAllSubscriptions();this.tt.clear(),this.et.clear()}ut(){if(!this.it)throw new Error("Cannot populate ParameterInterface without setting engine first.");this.ot();for(let U=0,V=this.it.getNumParameters();U<V;U++){const L=this.it.getParameterInfo(U);if(!L||!L.visible)continue;const H=(0,o.zT)(L,U,this.notificationSetting,{convertFromNormalized:this.it.getParameterFromNormalizedFunction(U),convertToNormalized:this.it.getParameterToNormalizedFunction(U),constrainParameterValue:this.it.constrainParameterValue(U)});H.L.subscribe(this.nt),this.tt.set(U,H),this.et.set(L.id,H)}}setEngine(U){if(this.it)throw new Error("ParamInterface already has an engine, which can't be overridden.");this.it=U,this.it.parameterChangeEvent.subscribe(this.rt),this.ut()}get notificationSetting(){return this.X}set notificationSetting(U){for(const V of this.tt.values())V.$(U);this.X=U}get numParameters(){return this.tt.size}get parameters(){return Array.from(this.tt.values())}get parametersById(){return this.et}getParameterName(U){const V=this.st(U);return V?V.name:void 0}destroy(){this.it.parameterChangeEvent.unsubscribe(this.rt),this.it=void 0,this.ot(),this.parameterChangeEvent.removeAllSubscriptions()}}var _;function u(Z){return Z.file!==void 0}function p(Z){return Z.url!==void 0}(function(Z){Z[Z.AudioBuffer=1]="AudioBuffer",Z[Z.DataBuffer=2]="DataBuffer",Z[Z.ReferenceBuffer=3]="ReferenceBuffer"})(_||(_={}));var g,y=__webpack_require__(834).Buffer;(function(Z){Z.Script="script",Z.Worklet="worklet",Z.Invalid="invalid"})(g||(g={}));class S{constructor({context:U,parameterNotificationSetting:V,type:L}){this.ht=!1,this.ft="wasm",this.ct=new l.e1,this.lt=!0,this.midiEvent=new l.BM,this.messageEvent=new l.BM,this.parameterChangeEvent=new l.BM,this.invalidateEvent=new l.BM,this.presetTouchedEvent=new l.BM,this.dt=H=>{switch(H.type){case i.m5.ClockEvent:case i.m5.DataRefEvent:case i.m5.StartupEvent:break;case i.m5.MIDIEvent:return void this.midiEvent.emit(H);case i.m5.MessageEvent:return void this.messageEvent.emit(H);case i.m5.PresetEvent:if(H.action==i.l0.Touched)return void this.presetTouchedEvent.emit();default:throw console.error(H),new Error(`Unknown or unsupported RNBOEvent type "${H.type}"`)}},this.gt=H=>{this.parameterChangeEvent.emit(H)},this._t=U,this.yt=L,this.F=new m({notificationSetting:V})}vt(){if(this.ht)throw new Error("Error while trying to overwrite immutable patcher of an existing device. Please create a new Device using RNBO.createDevice instead.")}It(U,V,L){this.it&&this.it.prepareToProcess(U,V,L)}wt(){if(this.isInvalid)throw new Error("Error: This device has become invalid due to creating a new device from it and is therefore unusable.")}Et(U){const V=y.from(U.code,U.encoding);return U.compression==="zlib"?n().inflate(V.toString("binary"),{to:"string"}):V.toString("utf-8")}get context(){return this.wt(),this._t}get inports(){return this.wt(),this.it.getMessageInfos().filter(U=>U.type===t.s.Inport)}get isValid(){return this.lt}get isInvalid(){return!this.lt}get numInputChannels(){return this.wt(),this.it?this.it.getNumInputChannels():0}get numOutputChannels(){return this.wt(),this.it?this.it.getNumOutputChannels():0}get numMIDIInputPorts(){return this.wt(),this.it?this.it.getNumMIDIInputPorts():0}get numMIDIOutputPorts(){return this.wt(),this.it?this.it.getNumMIDIOutputPorts():0}get numParameters(){return this.wt(),this.F.numParameters}get outports(){return this.wt(),this.it.getMessageInfos().filter(U=>U.type===t.s.Outport)}get parameters(){return this.wt(),this.F.parameters}get messages(){return this.wt(),this.it.getMessageInfos()}get parametersById(){return this.wt(),this.F.parametersById}get parameterNotificationSetting(){return this.wt(),this.F.notificationSetting}set parameterNotificationSetting(U){this.wt(),this.F.notificationSetting=U}get sourceType(){return this.ft}get type(){return this.isInvalid?g.Invalid:this.yt}get dataBufferIds(){return this.it.getExternalDataRefIds()}get dataBufferDescriptions(){return this.it.getExternalDataRefInfos()}setDataBuffer(U,V,L,H){return(0,s.mG)(this,void 0,void 0,function*(){if(!this.dataBufferDescriptions.find(se=>se.id===U))throw new Error(`Unknown DataBuffer id. A DataBuffer with the id "${U}" does not exist within the device.`);let J,ne;if(V instanceof AudioBuffer){ne=a.Le.fromAudioBuffer(V);const se=V.numberOfChannels,fe=new Float32Array(V.length*V.numberOfChannels),xe=[];for(let he=0;he<se;he++){const _e=new Float32Array(V.length);V.copyFromChannel(_e,he,0),xe.push(_e)}for(let he=0;he<se;he++)for(let _e=0,ye=V.length;_e<ye;_e++)fe[_e*se+he]=xe[he][_e];J=fe.buffer}else{if(!L||L<0||isNaN(L))throw new Error("Invalid channel count. Expecting a numeric value >= 1");if(!H||H<0||isNaN(H))throw new Error("Invalid sample rate. Expecting a numeric value >= 1");J=ArrayBuffer.isView(V)?V.buffer.slice(0):V.slice(0),ne=new a.Le(L,H)}yield this.it.setExternalData(U,J,ne)})}releaseDataBuffer(U){return(0,s.mG)(this,void 0,void 0,function*(){if(!this.dataBufferDescriptions.find(H=>H.id===U))throw new Error(`Unknown DataBuffer id. A DataBuffer with the id "${U}" does not exist within the device.`);const{data:V,typeDesc:L}=yield this.it.releaseExternalData(U);return new a.OM(V,L)})}static fetchAudioData(U,V){return(0,s.mG)(this,void 0,void 0,function*(){let L=yield fetch(U),H=yield L.arrayBuffer();return new Promise((J,ne)=>{V.decodeAudioData(H,J,ne)})})}static bufferDescriptionHasRemoteURL(U){return!!p(U)||!(!u(U)||!U.file.startsWith("http:")&&!U.file.startsWith("https:"))}loadDataBufferDependencies(U){return(0,s.mG)(this,void 0,void 0,function*(){return Promise.all(U.map(V=>(0,s.mG)(this,void 0,void 0,function*(){try{let L;if(p(V)?L=V.url:u(V)&&(L=V.file),L){const H=yield S.fetchAudioData(L,this.context);return this.setDataBuffer(V.id,H),{type:"success",id:V.id}}throw new Error(`Skipping invalid buffer info id: ${V.id}, type: ${V.type}`)}catch(L){return{type:"fail",error:L,id:V.id}}})))})}scheduleEvent(U){this.wt(),this.it&&this.it.scheduleEvent(U)}destroy(){this.wt(),this.F.destroy(),this.it&&this.it.removeAllSubscriptions(),this.it=void 0,this.Mt&&this.Mt.disconnect(),this.Mt=void 0,delete this.F,delete this.ct,delete this._t,this.lt=!1,this.invalidateEvent.emit(),this.invalidateEvent.removeAllSubscriptions(),this.messageEvent.removeAllSubscriptions(),this.midiEvent.removeAllSubscriptions(),this.parameterChangeEvent.removeAllSubscriptions()}getPreset(){return(0,s.mG)(this,void 0,void 0,function*(){return this.it.getPreset()})}setPreset(U){return this.it.setPreset(U)}}var b=__webpack_require__(191),E=__webpack_require__(133);const x=__webpack_require__(264);function k(Z,U){return Z.time-U.time}function T(Z){Z.sort(k)}class j extends b.v{constructor(){super(),this.At=!1,this.Bt=!1,this.Tt=void 0,this.St=-1,this.Pt=[],this.At=!1,this.setPatcherDesc(x.desc),this.setPatcherCode(x.src[0].code)}Rt(U){const V=U.eventTarget||this.Dt;if(U.time=Math.max(U.time,this.I),this.Tt=U,U.type===i.m5.ParameterEvent){const L=U;V.setParameterValue(L.target,L.value,U.time)}else if(U.type===i.m5.MIDIEvent){const L=U;V.processMidiEvent(L.time,L.port,L.data,L.length)}else if(U.type===i.m5.ClockEvent){const L=U;V.processClockEvent(L.time,L.clockIndex,L.hasValue,L.value)}else if(U.type===i.m5.DataRefEvent){const L=U;L.action===i.VH.Update&&V.processDataViewUpdate(L.dataRefIndex,L.time)}else if(U.type===i.m5.MessageEvent){const L=U;Array.isArray(L.payload)?V.processListMessage(E.TAG(L.tag),E.TAG(L.objectId),L.time,L.payload):L.payload===void 0?V.processBangMessage(E.TAG(L.tag),E.TAG(L.objectId),L.time):V.processNumMessage(E.TAG(L.tag),E.TAG(L.objectId),L.time,L.payload)}else if(U.type===i.m5.PresetEvent){const L=U;L.action===i.l0.Set&&(this.Bt=!0,this.Dt.setPreset(L.time,L.preset),this.Bt=!1)}else if(U.type===i.m5.TransportEvent){const L=U;this.Dt.processTransportEvent(L.time,L.state)}else if(U.type===i.m5.TempoEvent){const L=U;this.Dt.processTempoEvent(L.time,L.tempo)}else if(U.type===i.m5.BeatTimeEvent){const L=U;this.Dt.processBeatTimeEvent(L.time,L.beattime)}else if(U.type===i.m5.TimeSignatureEvent){const L=U;this.Dt.processTimeSignatureEvent(L.time,L.numerator,L.denominator)}else if(U.type===i.m5.StartupEvent){const L=U;this.Bt=L.phase===i.gA.BEGIN}this.Tt=void 0}getCurrentTime(){return this.I}setCurrentTime(U){this.I=U}prepareToProcess(U,V,L){(L||U!==this.M||V!==this.A)&&(this.M=U,this.A=V,this.B=this.sampsToMs(this.A),this.isSync&&this.Dt.prepareToProcess(this.M,this.A))}process(U,V,L,H,J,ne,se){const fe=Math.min(V,this.getNumInputChannels()+this.getNumSignalInParameters()),xe=Math.min(H,this.getNumOutputChannels()),he=Math.min(J,this.A);for(this.St=this.I+this.B,this.midiInput!==void 0&&(this.Pt.push.apply(this.Pt,ne),this.At=!0),this.At&&(T(this.Pt),this.At=!1);this.Pt.length>0&&this.Pt[0].time<this.St;)this.Rt(this.Pt.shift());this.Dt.process(U,fe,L,xe,he),this.I=this.St,this.St=-1}scheduleMidiEvent(U,V){this.scheduleEvent(new i.Ym(this.I,U,V,this.Dt))}notifyParameterValueChanged(U,V){let L=this.Tt?this.Tt.source:void 0;this.parameterChangeEvent.emit(new i.DB(this.getCurrentTime(),U,V,L))}scheduleParameterChange(U,V,L){this.scheduleEvent(new i.DB(this.getCurrentTime(),U,V,void 0))}sendNumMessage(U,V,L){const H=new i.f3(this.I,this.Dt.resolveTag(U),L,this.Dt.resolveTag(V));this.outgoingEvent.emit(H)}sendBangMessage(U,V){const L=new i.f3(this.I,this.Dt.resolveTag(U),void 0,this.Dt.resolveTag(V));this.outgoingEvent.emit(L)}sendListMessage(U,V,L){const H=new i.f3(this.I,this.Dt.resolveTag(U),L,this.Dt.resolveTag(V));this.outgoingEvent.emit(H)}getParameterValue(U){return this.Dt.getParameterValue(U)}flushClockEvents(U,V,L){this.flushClockEventsWithValue(U,V,void 0,L)}flushClockEventsWithValue(U,V,L,H){for(let J=0;J<this.Pt.length;J++)if(this.Pt[J]instanceof i.J9){const ne=this.Pt[J];ne.eventTarget!==U||ne.clockIndex!==V&&ne.clockIndex!==void 0||L!==void 0&&ne.value!==L||(this.Pt.splice(J,1),H&&this.Rt(ne),J--)}}deleteClockEvents(U){this.flushClockEvents(U,void 0,!1)}scheduleClockEvent(U,V,L){this.scheduleClockEventWithValue(U,V,L,void 0)}scheduleClockEventWithValue(U,V,L,H){this.scheduleEvent(new i.J9(L,V,H,U))}sendMidiEvent(U,V,L,H){const J=new i.Ym(this.getCurrentTime(),U,[V,L,H],void 0);this.outgoingEvent.emit(J)}sendMidiEventList(U,V){let L;for(L=2;L<V.length;L+=3)this.sendMidiEvent(U,V[L-2],V[L-1],V[L]);if(L-=3,L<V.length){var H=L-V.length;this.sendMidiEvent(U,V[L],H>1?V[L+1]:void 0,H>2?V[L+2]:void 0)}}sendOutlet(U,V,L){console.log("sendOutlet",U,V,L)}updatePatcherEventTarget(U,V){for(let L=0;L<this.Pt.length;L++)this.Pt[L].eventTarget===U&&(this.Pt[L].eventTarget=V,this.Pt[L].invalid=!1)}rescheduleEventTarget(U){for(let V=0;V<this.Pt.length;V++)this.Pt[V].eventTarget===U&&(this.Pt[V].invalid=!1)}isInProcess(){return this.St>-1}sendDataRefUpdated(U){this.scheduleEvent(new i.Lk(this.getCurrentTime(),U,i.VH.Update,this.Dt))}get isSync(){return!0}scheduleEvent(U){this.Pt.push(U),this.isInProcess()?T(this.Pt):this.At=!0}setPatcherCode(U){return(0,s.mG)(this,void 0,void 0,function*(){const V={};this.Dt&&this.Dt.getState(V),this.Dt=E.deserializeSrc(U);for(let L=0;L<this.Pt.length;L++)this.Pt[L].eventTarget&&(this.Pt[L].invalid=!0);this.Dt.setEngineAndPatcher(this,null),this.scheduleEvent(new i.j6(this.I,i.gA.BEGIN)),this.Dt.initialize(V),this.scheduleEvent(new i.j6(this.I,i.gA.END)),this.Dt.prepareToProcess(this.M,this.A,!0);for(let L=this.Pt.length-1;L>=0;L--)this.Pt[L].invalid&&this.Pt.splice(L,1)})}setExternalData(U,V,L){return(0,s.mG)(this,void 0,void 0,function*(){const H=this.Dt.getNumDataRefs();for(let J=0;J<H;J++){const ne=this.Dt.getDataRef(J);if(ne.name==U){ne.arrayBuffer=V,L instanceof a.Le&&(ne.channels=L.channels,ne.sampleRate=L.sampleRate),this.sendDataRefUpdated(J);break}}})}releaseExternalData(U){return(0,s.mG)(this,void 0,void 0,function*(){const V=this.Dt.getNumDataRefs();let L,H;for(let J=0;J<V;J++){const ne=this.Dt.getDataRef(J);if(ne.name==U){L=ne.arrayBuffer,ne.arrayBuffer=new ArrayBuffer(0),ne.channels?(H=new a.Le(ne.channels,ne.sampleRate),ne.channels=0,ne.sampleRate=0):H=new a.nc,this.sendDataRefUpdated(J);break}}if(!L)throw new Error(`Invalid DataBuffer. No DataBuffer with id ${U} found.`);return{data:L,typeDesc:H}})}getPreset(){return(0,s.mG)(this,void 0,void 0,function*(){let U={};return this.Dt.getPreset(U),U})}setPreset(U){this.scheduleEvent(new i.bt(this.I,i.l0.Set,U))}presetTouched(){this.Bt||this.outgoingEvent.emit(new i.bt(this.I,i.l0.Touched,void 0))}}var A,C,I=__webpack_require__(916);class F extends S{constructor({bufferSize:U=1024,context:V,parameterNotificationSetting:L},H){super({context:V,parameterNotificationSetting:L,type:g.Script}),this.bufferSize=U,this.it=H&&H.sourceType!=="wasm"?H.it:void 0}Ot(U){const V=[],L=[],H=U.inputBuffer,J=U.outputBuffer,ne=H?H.numberOfChannels:0,se=J?J.numberOfChannels:0;for(let fe=0;fe<Math.max(ne,se);fe++)fe<ne&&(V[fe]=H.getChannelData(fe)),fe<se&&(L[fe]=J.getChannelData(fe));this.Ct(1e3*U.playbackTime),this.It(U.outputBuffer.sampleRate,this.bufferSize,!1),this.Nt(V,ne,L,se,this.bufferSize,null,null)}Nt(U,V,L,H,J,ne,se){this.it&&this.it.process(U,V,L,H,J,ne||void 0,se||void 0)}Ct(U){this.it&&this.it.setCurrentTime(U)}get node(){return this.wt(),this.Mt}setPatcher(U,V){return(0,s.mG)(this,void 0,void 0,function*(){this.vt(),this.it||(this.it=V.type==="wasm"?new I.s:new j),this.ft=V.type,yield this.it.setPatcherDesc(U),yield this.it.setPatcherCode(this.Et(V)),this.F.setEngine(this.it),this.F.parameterChangeEvent.subscribe(this.gt),this.it.outgoingEvent.subscribe(this.dt),this.Mt=this.context.createScriptProcessor(this.bufferSize,this.numInputChannels,Math.max(this.numOutputChannels,1)),this.node.onaudioprocess=this.Ot.bind(this)})}}(function(Z){Z[Z.LoadPatcher=0]="LoadPatcher",Z[Z.ScheduleEvent=1]="ScheduleEvent",Z[Z.TransferBuffer=2]="TransferBuffer",Z[Z.ReleaseBuffer=3]="ReleaseBuffer",Z[Z.SetPreset=4]="SetPreset",Z[Z.GetPreset=5]="GetPreset"})(A||(A={})),function(Z){Z[Z.LoadPatcherFinished=1e3]="LoadPatcherFinished",Z[Z.OutgoingEvent=1002]="OutgoingEvent",Z[Z.ReleasedBuffer=1003]="ReleasedBuffer",Z[Z.TransferBufferFinished=1004]="TransferBufferFinished",Z[Z.GetPresetResponse=1005]="GetPresetResponse"}(C||(C={}));class N extends b.v{constructor(){super(),this.kt=new l.BM,this.xt=new l.BM,this.Ut=U=>{if(U.id!==C.OutgoingEvent||U.payload.type!==i.m5.ParameterEvent)if(U.id!==C.OutgoingEvent){if(U.id!==C.LoadPatcherFinished&&U.id!==C.TransferBufferFinished&&U.id!==C.ReleasedBuffer&&U.id!==C.GetPresetResponse)throw new Error(`Unhandled RNBOProcessor event with type ${U.id}`)}else this.outgoingEvent.emit(U.payload);else this.parameterChangeEvent.emit(U.payload)},this.kt.subscribe(this.Ut)}get eventSubjects(){return{fromProcessorEvent:this.kt,toProcessorEvent:this.xt}}notifyParameterValueChanged(U,V,L,H){this.parameterChangeEvent.emit(new i.DB(U,V,L,H,void 0))}prepareToProcess(U,V,L){}process(U,V,L,H,J,ne,se){throw new Error}get isSync(){return!1}scheduleEvent(U){this.xt.emit({id:A.ScheduleEvent,payload:U})}setExternalData(U,V,L){return new Promise((H,J)=>{const ne=this.kt.subscribe(se=>{se.id===C.TransferBufferFinished&&se.payload.memoryId===U&&(ne.unsubscribe(),H())});this.xt.emit({id:A.TransferBuffer,payload:{memoryId:U,data:V,typeDesc:L}})})}releaseExternalData(U){return new Promise((V,L)=>{const H=this.kt.subscribe(J=>{J.id===C.ReleasedBuffer&&J.payload.memoryId===U&&(H.unsubscribe(),V({data:J.payload.data,typeDesc:(0,a.n_)(J.payload.typeDesc)}))});this.xt.emit({id:A.ReleaseBuffer,payload:{memoryId:U}})})}getPreset(){return(0,s.mG)(this,void 0,void 0,function*(){return new Promise((U,V)=>{const L=this.kt.subscribe(H=>{H.id===C.GetPresetResponse&&(L.unsubscribe(),U(H.payload.preset))});this.xt.emit({id:A.GetPreset})})})}setPreset(U){this.xt.emit({id:A.SetPreset,payload:{preset:U}})}setPatcherCode(U){return(0,s.mG)(this,void 0,void 0,function*(){})}}const z=()=>{if(!l.I7)throw new Error("Missing AudioWorklet Support");return class extends AudioWorkletNode{constructor(Z,U,V,L){super(Z,U,L),this.jt=H=>{const[J,ne]=H.data;if(J!==C.OutgoingEvent)if(J!==C.LoadPatcherFinished)if(J!==C.TransferBufferFinished)if(J!==C.ReleasedBuffer){if(J!==C.GetPresetResponse)throw new Error(`Unable to handle received processor message of type ${J}`);this.zt.fromProcessorEvent.emit({id:J,payload:ne})}else this.zt.fromProcessorEvent.emit({id:J,payload:ne});else this.zt.fromProcessorEvent.emit({id:J,payload:ne});else this.zt.fromProcessorEvent.emit({id:J,payload:ne});else this.zt.fromProcessorEvent.emit({id:J,payload:(0,i.f4)(ne)})},this.Ft=H=>{H.id!==A.ScheduleEvent?H.id!==A.TransferBuffer?H.id!==A.ReleaseBuffer?H.id!==A.GetPreset?H.id!==A.SetPreset||this.port.postMessage([H.id,{preset:H.payload.preset}]):this.port.postMessage([H.id]):this.port.postMessage([H.id,{memoryId:H.payload.memoryId}]):this.port.postMessage([H.id,{data:H.payload.data,memoryId:H.payload.memoryId,typeDesc:H.payload.typeDesc.serialize()}],[H.payload.data]):this.port.postMessage([H.id,H.payload.serialize()])},this.zt=V,this.zt.toProcessorEvent.subscribe(this.Ft),this.port.onmessage=this.jt,this.port.start()}loadPatcher(){return(0,s.mG)(this,void 0,void 0,function*(){return new Promise(Z=>{const U=this.zt.fromProcessorEvent.subscribe(V=>{V.id===C.LoadPatcherFinished&&(U.unsubscribe(),Z())});this.port.postMessage([A.LoadPatcher])})})}}};var R=__webpack_require__(834).Buffer;const q=__webpack_require__(264),M={js:'(()=>{var __webpack_modules__={133:(module,__unused_webpack_exports,__webpack_require__)=>{var Float32Buffer=__webpack_require__(852).Float32Buffer,Float64Buffer=__webpack_require__(852).Float64Buffer,Float32MultiBuffer=__webpack_require__(852).Float32MultiBuffer,Float64MultiBuffer=__webpack_require__(852).Float64MultiBuffer,IntBuffer=__webpack_require__(852).IntBuffer,UInt8Buffer=__webpack_require__(852).UInt8Buffer,ExternalLoaderFactory=__webpack_require__(126).ExternalLoaderFactory;let Xoshiro=__webpack_require__(925);var patcherSerialKey="XX__PatcherSerialKey__XX",eventTargetKey="XX__EventTargetKey__XX",ParameterTypeNumber=0,ParameterTypeBang=1,ParameterTypeList=2,ParameterTypeSignal=3,ParameterTypeCount=4,IOTypeInput=0,IOTypeOutput=1,IOTypeUndefined=2,INVALID_INDEX=Number.MAX_SAFE_INTEGER;function rand01(){return Math.random()}function pi01(){return Math.PI}var rnbo_abs=Math.abs,rnbo_fabs=Math.abs,rnbo_acos=Math.acos,rnbo_acosh=Math.acosh,rnbo_asin=Math.asin,rnbo_asinh=Math.asinh,rnbo_atan=Math.atan,rnbo_atan2=Math.atan2,rnbo_atanh=Math.atanh,rnbo_cbrt=Math.cbrt,rnbo_ceil=Math.ceil,rnbo_cos=Math.cos,rnbo_cosh=Math.cosh,rnbo_exp=Math.exp,rnbo_expm1=Math.expm1,rnbo_floor=Math.floor,rnbo_fround=Math.round,rnbo_imul=Math.imul,rnbo_log=Math.log,rnbo_log10=Math.log10,rnbo_log1p=Math.log1p,rnbo_log2=Math.log2,rnbo_pow=Math.pow,rnbo_round=rnbo_fround,rnbo_sign=Math.sign,rnbo_sin=Math.sin,rnbo_sinh=Math.sinh,rnbo_sqrt=Math.sqrt,rnbo_tan=Math.tan,rnbo_tanh=Math.tanh,trunc=Math.trunc,rnbo_trunc=Math.trunc,rnbo_number_max=()=>Math.MAX_VALUE,rnbo_isnan=isNaN;function fixnan(t){return isNaN(t)?0:t}function fract(t){return t%1}function fixdenorm(t){return t}function isdenorm(t){return!1}var fastsin=Math.sin,fastcos=Math.cos,fastexp=Math.exp,fastpow=Math.pow,fasttan=Math.tan;function nextpoweroftwo(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1)}var MAX_32BIT_INT=Math.pow(2,32);function uint32_add(t,e){var r=t+e;return r>=MAX_32BIT_INT&&(r-=MAX_32BIT_INT),Math.trunc(r)}function uint32_trunc(t){return t>>>0}function uint32_rshift(t,e){return t>>>e}function imod(t,e){return(0|t)%(0|e)}function imod_nocast(t,e){return t%e}function getArrayValueAtIndex(t,e){return t[e]}function allocateArray(t,e){return new Array(t)}function createListCopy(t){return t.slice(0)}function jsCreateListCopy(t){return createListCopy(t)}function list(){let t=[];for(let e=0;e<arguments.length;e++){let r=arguments[e];if(Array.isArray(r))for(let e=0;e<r.length;e++)t.push(r[e]);else t.push(r)}return t}function resizeSignal(t,e,r){for(var n=t||[],i=e;i<r;i++)n[i]=0;return n}function zeroSignal(t,e){t&&t.fill(0)}function fillSignal(t,e,r,n){t&&t.fill(r,n)}function copySignal(t,e,r){for(let n=0;n<r;n++)t[n]=e[n]}function containsValue(t){return void 0!==t}function addressOf(t){return t}function systemticks(){return Date.now()}function bitwiseFloat(t){var e=new Uint32Array(1);return e[0]=t,new DataView(e.buffer).getFloat32(0,!0)}function imul(t,e){return Math.imul(t,e)}var MIDI_StatusByteReceived=1,MIDI_SecondByteReceived=2,MIDI_NoteOff=3,MIDI_NoteOn=4,MIDI_Aftertouch=5,MIDI_CC=6,MIDI_ProgramChange=7,MIDI_ChannelPressure=8,MIDI_PitchBend=9,MIDI_Sysex_Started=10,MIDI_Sysex_Complete=11,MIDI_Generic=99,MIDI_InvalidByte=-1,MIDI_NoteOffMask=128,MIDI_NoteOnMask=144,MIDI_AfterTouchMask=160,MIDI_CCMask=176,MIDI_ProgramChangeMask=192,MIDI_ChannelPressureMask=208,MIDI_PitchBendMask=224,MIDI_QuarterFrame=241,MIDI_SongPos=242,MIDI_SongSel=243,MIDI_TuneRequest=246,MIDI_SysexStart=240,MIDI_SysexEnd=247,MIDI_Clock=248,MIDI_Start=250,MIDI_Continue=251,MIDI_Stop=252,MIDI_ActiveSense=254,MIDI_Reset=255,MIDI_CC_Sustain=64,MIDI_CC_Sostenuto=66,MIDI_CC_AllNotesOff=123,MIDI_CC_PressureMSB=70,MIDI_CC_PressureLSB=102,MIDI_CC_TimbreMSB=74,MIDI_CC_TimbreLSB=106,MIDI_NoteState_Off=0,MIDI_NoteState_On=1,MIDI_NoteState_Sustained=2,CLOCKS_PER_SEC=1;function parseMidi(t,e,r){if(240==e)return MIDI_Sysex_Started;if(t==MIDI_Sysex_Started)return 247==e?MIDI_Sysex_Complete:e<=127?t:MIDI_InvalidByte;if(e>127)return MIDI_StatusByteReceived;var n=240&r;return t==MIDI_StatusByteReceived?n==MIDI_ProgramChangeMask?MIDI_ProgramChange:n==MIDI_ChannelPressureMask?MIDI_ChannelPressure:MIDI_SecondByteReceived:t==MIDI_SecondByteReceived?n==MIDI_NoteOffMask||n==MIDI_NoteOnMask&&0==e?MIDI_NoteOff:n==MIDI_NoteOnMask?MIDI_NoteOn:n==MIDI_AfterTouchMask?MIDI_Aftertouch:n==MIDI_CCMask?MIDI_CC:n==MIDI_PitchBendMask?MIDI_PitchBend:MIDI_Generic:t}function getMIDIChannel(t){var e=240&t;return e>=128&&e<=224?15&t:0}function initDataRef(t,e){var r={};return r.name=t,r.isValid=!1,r.wantsFillFlag=!1,r.bytesToAllocate=0,r.channels=0,r.sampleRate=0,r.internal=e,r.index=-1,r.wantsFill=function(){return this.wantsFillFlag},r.setWantsFill=function(t){this.wantsFillFlag=t},r.requestSizeInBytes=function(t,e){(t>this.bytesToAllocate||e)&&(this.bytesToAllocate=t)},r.getRequestedSizeInBytes=function(){return this.bytesToAllocate},r.resetRequestedSizeInByte=function(){this.bytesToAllocate=0},r.getSizeInBytes=function(){return this.arrayBuffer.byteLength},r.hasRequestedSize=function(){return this.bytesToAllocate>0},r.isInternal=function(){return this.internal},r.getIndex=function(){return this.index},r.setIndex=function(t){this.index=t},r.clear=function(){r.arrayBuffer=new ArrayBuffer(0)},r.clear(),r}function initMultiRef(){var t={index:0,current:0,dataRefs:[],count:0};for(let e=0;e<arguments.length;e++)t.dataRefs.push(arguments[e]),t.count++;return t.setCurrent=function(t){t>=0&&t<this.count&&(this.current=t)},t.getIndex=function(){return this.index},t.setIndex=function(t){this.index=t},t}function updateMultiRef(t,e,r){e.setCurrent&&e.getIndex&&(e.setCurrent(r),t.getEngine().sendDataRefUpdated(e.getIndex()))}function updateDataRef(t,e){t.getEngine().sendDataRefUpdated(e.getIndex())}function FIXEDSIZEARRAYINIT(){let t=arguments[0];if(void 0!==t){let e=new Array(t);if(e.fill(0),void 0!==arguments[1]){let r=Array.from(arguments);r.splice(0,1);for(let n=0;n<t;n++)e[n]=FIXEDSIZEARRAYINIT.apply(null,r)}return e}return new Array}function TAG(t){let e=0;for(let r=0;r<t.length;r++){e=t.charCodeAt(r)+(e<<6)+(e<<16)-e}return 0|e}function serializeArrayToList(t,e){return t}function deserializeArrayFromList(t,e,r){t}function serializeDataRef(t){return t.resetRequestedSizeInByte(),t}function _evalSrc(src){var rnboObj;return eval(src),rnboObj}function getSubState(t,e){return void 0===t[e]&&(t[e]={}),t[e]}function getSubStateAt(t,e,r){return void 0===t[e]&&(t[e]=[]),void 0===t[e][r]&&(t[e][r]={}),t[e][r]}function stateIsEmpty(t){return 0===Object.keys(t).length}function TransportState(t){return t}function RNBO_UNUSED(){}let xoshiro_reset=Xoshiro.reset,xoshiro_next=Xoshiro.next;module.exports={deserializeSrc:function(t){return _evalSrc(t)},deserializeJSON:function(t){var e=t;return"string"==typeof e&&(e={src:t}),_evalSrc(e.src)},extractOptionsFromJSON:function(t){var e=t;return"string"==typeof e&&(e=JSON.parse(t)),e.options?e.options:{}},evalFunction(functionAsString){var tmpFunction,functionAsString="tmpFunction = "+functionAsString;return eval(functionAsString),tmpFunction},nextpoweroftwo,ParameterTypeNumber,ParameterTypeBang,ParameterTypeList,ParameterTypeSignal,ParameterTypeCount,IOTypeInput,IOTypeOutput,IOTypeUndefined:IOTypeUndefined.length,TAG}},852:t=>{function e(){let t=this.dataRef.getSizeInBytes()/this.BASEARRAYVIEW.BYTES_PER_ELEMENT,e=this.getChannels();return e?t/e:0}function r(t,e){let r=t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e;this.requestedChannels=e,this.dataRef.requestSizeInBytes(r,!1)}function n(t,e){return this[this.getChannels()*Math.floor(e)+t]}function i(t,e){const r=this.getChannels();return t<0||t>=r||e<0||e>=this.getSize()?0:this[r*Math.floor(e)+t]}function s(t,e,r){this[this.getChannels()*Math.floor(e)+t]=r}function o(t,e,r){const n=this.getChannels();t<0||t>=n||e<0||e>=this.getSize()||(this[n*Math.floor(e)+t]=r)}function u(){return this.dataRef.channels}function a(){return this.dataRef.sampleRate}function h(t){this.dataRef.sampleRate=t}function f(){this.dataRef.clear()}function c(t){if(t!==this.dataRef.channels){let e=this.getSize();return this.clear(),this.dataRef.channels=t,this.setSize(e)}return this}function l(){if(this.isAudioBuffer&&this.requestedChannels!==this.getChannels()&&0!==this.requestedChannels&&(this.getChannels()>0&&this.setZero(),this.dataRef.channels=this.requestedChannels,this.requestedChannels=0),this.dataRef.bytesToAllocate>0&&(this.dataRef.bytesToAllocate!==this.dataRef.getSizeInBytes()||!this.dataRef.isInternallyAllocated)){let t;if(this.dataRef.isInternallyAllocated){let e=Math.min(this.dataRef.arrayBuffer.byteLength,this.dataRef.bytesToAllocate);e/=this.BASEARRAYVIEW.BYTES_PER_ELEMENT,t=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer,0,e)}this.dataRef.arrayBuffer=new ArrayBuffer(this.dataRef.bytesToAllocate),this.dataRef.isInternallyAllocated=!0;let e=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer);return t?e.set(t):this.dataRef.wantsFillFlag=!0,b(e,this.dataRef,this.BASEARRAYVIEW),this.isAudioBuffer&&I(e),e}return this}function d(t){let e=this.getChannels();return this.requestedChannels=e,this.dataRef.requestSizeInBytes(t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e,!0),this.allocateIfNeeded()}function p(){this.fill&&this.fill(0)}function m(){return this.touched}function g(t){this.touched=t}function _(t){this.dataRef.setWantsFill(t)}function y(){return this.dataRef.getIndex()}function b(t,n,i){t.dataRef=n,t.BASEARRAYVIEW=i,t.getSize=e,t.requestSize=r,t.setSize=d,t.allocateIfNeeded=l,t.setZero=p,t.clear=f,t.getChannels=u,t.getSampleRate=a,t.setWantsFill=_,t.getIndex=y,n.setZero=function(){t.setZero()},t.touched=!1,t.getTouched=m,t.setTouched=g}function I(t){t.getSample=n,t.getSampleSafe=i,t.setSample=s,t.setSampleSafe=o,t.setChannels=c,t.setSampleRate=h,t.isAudioBuffer=!0,t.requestedChannels=0}let w=function(t,e){let r;return r=t.arrayBuffer?new e(t.arrayBuffer):{},b(r,t,e),r};(w.prototype=Object.create(null)).constructor=w;let v=function(t,e){let r=w.call(this,t,e);return I(r),r};(v.prototype=Object.create(w)).constructor=v;let M=function(t){return v.call(this,t,Float32Array)};(M.prototype=Object.create(v.prototype)).constructor=M;let E=function(t){return v.call(this,t,Float64Array)};(E.prototype=Object.create(v.prototype)).constructor=E;let T=function(t,e){let r=new e(t.dataRefs[t.current]);return r.multiRef=t,r.setCurrent=function(t){this.multiRef.setCurrent(Math.round(t))},r.getIndex=function(){return this.multiRef.getIndex()},r};T.prototype=Object.create(null),T.constructor=T;let B=function(t){return T.call(this,t,M)};(B.prototype=Object.create(T.prototype)).constructor=B;let S=function(t){return T.call(this,t,E)};(S.prototype=Object.create(T.prototype)).constructor=S;let A=function(t){return w.call(this,t,Int32Array)};(A.prototype=Object.create(w.prototype)).constructor=A;let P=function(t){return w.call(this,t,Uint8Array)};(P.prototype=Object.create(w.prototype)).constructor=P,t.exports={Float32Buffer:M,Float64Buffer:E,Float32MultiBuffer:B,Float64MultiBuffer:S,IntBuffer:A,UInt8Buffer:P}},126:t=>{var e=function(){};(e.prototype=Object.create(null)).constructor=e,e.prototype.setEngineAndPatcher=function(){},e.prototype.initialize=function(){},e.prototype.getNumParameters=function(){return 0},e.prototype.setParameterValue=function(){},e.prototype.prepareToProcess=function(){},e.prototype.process=function(){},t.exports={ExternalLoaderFactory:function(){return console.log("WARNING: Externals are not yet supported in Javascript"),new e}}},925:t=>{function e(t,e,r,n){r[n]=t[e]+0x9e3779b97f4a7c15n,r[n]=0xbf58476d1ce4e5b9n*(r[n]^r[n]>>30n),r[n]=0x94d049bb133111ebn*(r[n]^r[n]>>27n),r[n]=r[n]^r[n]>>31n}t.exports={reset:function(t,r){let n=new BigUint64Array(1);n[0]=BigInt(Math.trunc(1e6*t)),e(n,0,r,0),e(r,0,r,1),e(r,1,r,2),e(r,2,r,3)},next:function(t){let e=new BigUint64Array(1),r=new BigUint64Array(1);return r[0]=t[0]+t[3],e[0]=t[1]<<17n,t[2]^=t[0],t[3]^=t[1],t[1]^=t[2],t[0]^=t[3],t[2]^=e[0],t[3]=t[3]<<45n|t[3]>>19n,r[0]=r[0]>>11n,2220446049250313e-31*Number(r[0])-1}}},766:(t,e)=>{e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,s=a(t),o=s[0],u=s[1],h=new i(function(t,e,r){return 3*(e+r)/4-r}(0,o,u)),f=0,c=u>0?o-4:o;for(r=0;r<c;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],h[f++]=e>>16&255,h[f++]=e>>8&255,h[f++]=255&e;2===u&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,h[f++]=255&e);1===u&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,h[f++]=e>>8&255,h[f++]=255&e);return h},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,s=[],o=16383,u=0,a=n-i;u<a;u+=o)s.push(h(t,u,u+o>a?a:u+o));1===i?(e=t[n-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,n){for(var i,s,o=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},834:(t,e,r)=>{\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\nconst n=r(766),i=r(181),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function u(t){if(t>o)throw new RangeError(\'The value "\'+t+\'" is invalid for option "size"\');const e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError(\'The "string" argument must be of type string. Received type number\');return c(t)}return h(t,e,r)}function h(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|m(t,e);let n=u(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(J(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(J(t,ArrayBuffer)||t&&J(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(J(t,SharedArrayBuffer)||t&&J(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError(\'The "value" argument must not be of type number. Received type number\');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return a.from(n,e,r);const i=function(t){if(a.isBuffer(t)){const e=0|p(t.length),r=u(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?u(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!=typeof t)throw new TypeError(\'"size" argument must be of type number\');if(t<0)throw new RangeError(\'The value "\'+t+\'" is invalid for option "size"\')}function c(t){return f(t),u(t<0?0:0|p(t))}function l(t){const e=t.length<0?0:0|p(t.length),r=u(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError(\'"offset" is outside of buffer bounds\');if(t.byteLength<e+(r||0))throw new RangeError(\'"length" is outside of buffer bounds\');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,a.prototype),n}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function m(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||J(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError(\'The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type \'+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(i)return n?-1:W(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){let s,o=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,a/=2,r/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<u;s++)if(h(t,s)===h(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===a)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+a>u&&(r=u-a),s=r;s>=0;s--){let r=!0;for(let n=0;n<a;n++)if(h(t,s+n)!==h(e,n)){r=!1;break}if(r)return s}return-1}function I(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Y(n))return o;t[r+o]=n}return o}function w(t,e,r,n){return K(W(e,t.length-r),t,r,n)}function v(t,e,r,n){return K(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function M(t,e,r,n){return K(G(e),t,r,n)}function E(t,e,r,n){return K(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,u,a;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(a=(31&e)<<6|63&r,a>127&&(s=a));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(a=(15&e)<<12|(63&r)<<6|63&n,a>2047&&(a<55296||a>57343)&&(s=a));break;case 4:r=t[i+1],n=t[i+2],u=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(a=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&u,a>65535&&a<1114112&&(s=a))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=S));return r}(n)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,r){return h(t,e,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,r){return function(t,e,r){return f(t),t<=0?u(t):void 0!==e?"string"==typeof r?u(t).fill(e,r):u(t).fill(e):u(t)}(t,e,r)},a.allocUnsafe=function(t){return c(t)},a.allocUnsafeSlow=function(t){return c(t)},a.isBuffer=function(t){return null!=t&&!0===t.t&&t!==a.prototype},a.compare=function(t,e){if(J(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),J(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError(\'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array\');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError(\'"list" argument must be an Array of Buffers\');if(0===t.length)return a.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=a.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(J(e,Uint8Array))i+e.length>n.length?(a.isBuffer(e)||(e=a.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!a.isBuffer(e))throw new TypeError(\'"list" argument must be an Array of Buffers\');e.copy(n,i)}i+=e.length}return n},a.byteLength=m,a.prototype.t=!0,a.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)_(this,e,e+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},a.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(t,e,r,n,i){if(J(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError(\'The "target" argument must be one of type Buffer or Uint8Array. Received type \'+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const u=Math.min(s,o),h=this.slice(n,i),f=t.slice(e,r);for(let t=0;t<u;++t)if(h[t]!==f[t]){s=h[t],o=f[t];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return I(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":case"latin1":case"binary":return v(this,t,e,r);case"base64":return M(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.i||this,0)}};const S=4096;function A(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function O(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=Z[t[n]];return i}function D(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function N(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,r,n,i,s){if(!a.isBuffer(t))throw new TypeError(\'"buffer" argument must be a Buffer instance\');if(e>i||e<s)throw new RangeError(\'"value" argument is out of bounds\');if(r+n>t.length)throw new RangeError("Index out of range")}function x(t,e,r,n,i){$(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function C(t,e,r,n,i){$(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function k(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,s){return e=+e,r>>>=0,s||k(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function j(t,e,r,n,s){return e=+e,r>>>=0,s||k(t,0,r,8),i.write(t,e,r,n,52,8),r+8}a.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},a.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),a.prototype.readBigInt64BE=H((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||L(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),a.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){R(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){R(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigUInt64LE=H((function(t,e=0){return x(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=H((function(t,e=0){return C(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigInt64LE=H((function(t,e=0){return x(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=H((function(t,e=0){return C(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=a.isBuffer(t)?t:a.from(t,n),o=s.length;if(0===o)throw new TypeError(\'The value "\'+t+\'" is invalid for argument "value"\');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const X={};function z(t,e,r){X[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function $(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new X.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){V(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||L(e,t.length-(r+1))}(n,i,s)}function V(t,e){if("number"!=typeof t)throw new X.ERR_INVALID_ARG_TYPE(e,"number",t)}function L(t,e,r){if(Math.floor(t)!==t)throw V(t,r),new X.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new X.ERR_BUFFER_OUT_OF_BOUNDS;throw new X.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=F(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function W(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function G(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function J(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const Z=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function H(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},181:(t,e)=>{\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\ne.read=function(t,e,r,n,i){var s,o,u=8*i-n-1,a=(1<<u)-1,h=a>>1,f=-7,c=r?i-1:0,l=r?-1:1,d=t[e+c];for(c+=l,s=d&(1<<-f)-1,d>>=-f,f+=u;f>0;s=256*s+t[e+c],c+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=256*o+t[e+c],c+=l,f-=8);if(0===s)s=1-h;else{if(s===a)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=h}return(d?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,u,a,h=8*s-i-1,f=(1<<h)-1,c=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),(e+=o+c>=1?l/a:l*Math.pow(2,1-c))*a>=2&&(o++,a/=2),o+c>=f?(u=0,o=f):o+c>=1?(u=(e*a-1)*Math.pow(2,i),o+=c):(u=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&u,d+=p,u/=256,i-=8);for(o=o<<i|u,h+=i;h>0;t[r+d]=255&o,d+=p,o/=256,h-=8);t[r+d-p]|=128*m}},264:t=>{t.exports={src:[{code:\'class RNBOPatcher{constructor(){this._currentTime=0,this.audioProcessSampleCount=0,this.sampleOffsetIntoNextAudioBuffer=0,this.vs=0,this.maxvs=0,this.sr=44100,this.invsr=2267573696e-14,this.zeroBuffer=0,this.dummyBuffer=0,this.voiceIndex=0,this.noteNumber=0}getParameterIndexForID(e){return-1}getNumMidiInputPorts(){return 0}processMidiEvent(e,t,s,r){this.updateTime(e)}getNumMidiOutputPorts(){return 0}process(e,t,s,r,i){this.vs=i,this.updateTime(this.getEngine().getCurrentTime()),this.audioProcessSampleCount=this.msToSamps(this._currentTime,this.sr)}prepareToProcess(e,t){this.vs=t,this.maxvs=t,this.zeroBuffer=resizeSignal(this.zeroBuffer,0,t),this.dummyBuffer=resizeSignal(this.dummyBuffer,0,t),this.sr=e,this.invsr=1/e}msToSamps(e,t){return rnbo_floor(e*t*.001)}sampsToMs(e){return e*(1e3*this.invsr)}getNumInputChannels(){return 0}getNumOutputChannels(){return 0}getDataRef(e){return 0}getNumDataRefs(){return 0}fillDataRef(e,t){e}processDataViewUpdate(e,t){this.updateTime(t)}initialize(e){this.assign_defaults(),this.setState(e),this.initializeObjects(e),this.allocateDataRefs(),this.startup(e)}initializeObjects(e){}allocateDataRefs(){}startup(e){}setIsMuted(e){}getPatcherSerial(){return 7}getState(e){e[eventTargetKey]=this,e[patcherSerialKey]=this.getPatcherSerial(),e.p7=1,e.p7_noteNumber=this.noteNumber}setState(e){e[patcherSerialKey]==this.getPatcherSerial()&&(containsValue(e[eventTargetKey])&&this.getEngine().updatePatcherEventTarget(e[eventTargetKey],this),containsValue(e.p7_noteNumber)&&(this.noteNumber=e.p7_noteNumber))}setParameterValue(e,t,s){this.updateTime(s)}processParameterEvent(e,t,s){this.setParameterValue(e,t,s)}processNormalizedParameterEvent(e,t,s){this.setParameterValueNormalized(e,t,s)}getParameterValue(e){return 0}getNumSignalInParameters(){return 0}getNumParameters(){return 0}getParameterName(e){return"bogus"}getParameterId(e){return"bogus"}getParameterInfo(e,t){e}sendParameter(e){this.getEngine().notifyParameterValueChanged(e,this.getParameterValue(e))}processClockEvent(e,t,s,r){this.updateTime(e)}processOutletAtCurrentTime(e,t,s){}processOutletEvent(e,t,s,r){this.updateTime(r),this.processOutletAtCurrentTime(e,t,s)}sendOutlet(e,t){this.getEngine().sendOutlet(this,e,t)}schedule(e,t){this.getEngine().scheduleClockEvent(this,e,t+this._currentTime)}scheduleValue(e,t,s){this.getEngine().scheduleClockEventWithValue(this,e,t+this._currentTime,s)}stop(e){this.getEngine().flushClockEvents(this,e,!1)}stopWithValue(e,v){this.getEngine().flushClockEventsWithValue(this,e,v,!1)}processNumMessage(e,o,t,s){this.updateTime(t)}processListMessage(e,o,t,s){this.updateTime(t)}resolveTag(e){return""}sendMidiEvent(e,t,s,r){this.getEngine().sendMidiEvent(e,t,s,r)}sendMidiEventList(e,t){this.getEngine().sendMidiEventList(e,t)}updateTime(e){this._currentTime=e,this.sampleOffsetIntoNextAudioBuffer=this.msToSamps(e,this.sr)-this.vs-this.audioProcessSampleCount}assign_defaults(){}setEngineAndPatcher(e,t){this._engineInterface=e,this._parentPatcher=t}getEngine(){return this._engineInterface}getPatcher(){return this._parentPatcher}}rnboObj=new RNBOPatcher;\',encoding:"utf-8",type:"js"}],options:{classname:"rnbomatic",minifyOutput:!0},desc:{parameters:[],numParameters:0,numSignalInParameters:0,layouts:[{name:"layout",boxes:[]}],numInputChannels:0,numOutputChannels:0,patcherSerial:0,externalDataRefs:[]}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{var t;function e(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{a(n.next(t))}catch(t){s(t)}}function u(t){try{a(n.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,u)}a((n=n.apply(t,e||[])).next())}))}!function(t){t[t.Float32Audio=0]="Float32Audio",t[t.TypedArray=1]="TypedArray"}(t||(t={}));class r{constructor(){this.type=t.TypedArray}serialize(){return{type:this.type}}}class n{constructor(e,r){this.channels=0,this.sampleRate=0,this.type=t.Float32Audio,this.channels=e,this.sampleRate=r}static fromAudioBuffer(t){return new n(t.numberOfChannels,t.sampleRate)}get isInterleaved(){return!0}serialize(){return{channels:this.channels,sampleRate:this.sampleRate,type:this.type}}}var i,s;!function(t){t[t.Inport=0]="Inport",t[t.Outport=1]="Outport",t[t.Undefined=2]="Undefined"}(i||(i={})),function(t){t[t.STOPPED=0]="STOPPED",t[t.RUNNING=1]="RUNNING"}(s||(s={}));(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}})();"undefined"!=typeof isSecureContext&&isSecureContext;Math.pow(10,4);const o=t=>t.slice();class u{constructor(){this.o=[],this.u=[]}get listenerCount(){return this.o.length+this.u.length}emit(t){if(this.o.length){const e=o(this.o);for(let r=0,n=e.length;r<n;r++)e[r](t)}if(this.u.length){const e=o(this.u);for(let r=0,n=e.length;r<n;r++)e[r](t);e.forEach((t=>this.unsubscribe(t)))}}once(t){return this.u.push(t),{unsubscribe:()=>this.unsubscribe(t)}}subscribe(t){return this.o.push(t),{unsubscribe:()=>this.unsubscribe(t)}}unsubscribe(t){const e=this.o.indexOf(t);e>=0&&this.o.splice(e,1);const r=this.u.indexOf(t);r>=0&&this.u.splice(r,1)}removeAllSubscriptions(){this.o=[],this.u=[]}}var a=__webpack_require__(133);class h{constructor(){this.h=0,this.l=44100,this.p=64,this.outgoingEvent=new u,this.parameterChangeEvent=new u,this.m=this.sampsToMs(this.p)}static getNonConversionObject(){return{applyStepsToNormalizedParameterValue:function(t){return t},convertToNormalizedParameterValue:function(t){return t},convertFromNormalizedParameterValue:function(t){return t},getNumParameters:function(){return 0},constrainParameterValue:function(t){return t},isPolyphonic:!1,subpatches:[]}}static deserializeConversion(t){if(t){const e={},r=Object.keys(t);for(let n=0;n<r.length;n++){const i=r[n];if("subpatches"===i){const r=Object.keys(t.subpatches);for(let n=0;n<r.length;n++){const i=r[n],s=t.subpatches[i],o=h.deserializeConversion(s);s.isPolyphonic?e[i]=[o]:e[i]=o}}else e[i]=a.evalFunction(t[i])}return e}return this.getNonConversionObject()}getSampleRate(){return this.l}getSamplesPerBlock(){return this.p}sampsToMs(t){return t/this.l*1e3}getNumInputChannels(){return this.g?this.g.numInputChannels:0}getNumOutputChannels(){return this.g?this.g.numOutputChannels:0}getNumMIDIInputPorts(){return this.g?this.g.numMidiInputPorts:0}getNumMIDIOutputPorts(){return this.g?this.g.numMidiOutputPorts:0}getNumParameters(){return this.g?this.g.numParameters:0}getNumSignalInParameters(){return this.g?this.g.numSignalInParameters:0}getNumSignalOutParameters(){return this.g?this.g.numSignalOutParameters:0}getPatcherSerial(){return void 0!==this.g?this.g.patcherSerial:0}getParameterName(t){if(!this.g||t>=this.g.parameters.length)throw new Error(`Parameter index ${t} out of bounds.`);return this.g.parameters[t].name}getParameterId(t){if(!this.g||t>=this.g.parameters.length)throw new Error(`Parameter index ${t} out of bounds.`);return this.g.parameters[t].paramId}getParameterToNormalizedFunction(t){return e=>this._.convertToNormalizedParameterValue(t,e)}getParameterFromNormalizedFunction(t){return e=>this._.convertFromNormalizedParameterValue(t,e)}constrainParameterValue(t){return e=>this._.constrainParameterValue(t,e)}getParameterInfo(t){if(!this.g||t>=this.g.parameters.length)throw new Error(`Parameter index ${t} out of bounds.`);const e=this.g.parameters[t];let r,n;switch(e.type){case"ParameterTypeBang":n=a.ParameterTypeBang;break;case"ParameterTypeCount":n=a.ParameterTypeCount;break;case"ParameterTypeList":n=a.ParameterTypeList;break;case"ParameterTypeNumber":n=a.ParameterTypeNumber;break;case"ParameterTypeSignal":n=a.ParameterTypeSignal;break;default:throw new Error(`Unknown Parameter Type from patcher description ${e.type}`)}switch(e.ioType){case"IOTypeInput":r=a.IOTypeInput;break;case"IOTypeOutput":r=a.IOTypeOutput;break;case"IOTypeUndefined":r=a.IOTypeUndefined;break;default:throw new Error(`Unknown Parameter IOType from patcher description ${e.type}`)}return{displayName:e.displayName,enumValues:e.enumValues,exponent:e.exponent,id:e.paramId,index:t,initialValue:e.initialValue,ioType:r,isEnum:e.isEnum,max:e.maximum,min:e.minimum,name:e.name,signalIndex:e.signalIndex,steps:e.steps,type:n,unit:e.unit,visible:e.visible}}getNumExternalDataRefs(){return void 0!==this.g?this.g.externalDataRefs.length:0}getExternalDataId(t){return void 0!==this.g?this.g.externalDataRefs[t].id:""}getExternalDataRefIds(){let t;return this.g&&(t=[],Object.keys(this.g.externalDataRefs).forEach((e=>{let r=this.g.externalDataRefs[e];t.push(r.id)}))),t}getExternalDataRefInfos(){return void 0!==this.g?this.g.externalDataRefs:[]}getNumMessages(){return void 0!==this.g?this.g.inports.length+this.g.outports.length:0}getMessageInfos(){let t=[];return void 0!==this.g&&(Object.keys(this.g.outports).forEach((e=>{t.push({tag:this.g.outports[e].tag,type:i.Outport,meta:this.g.outports[e].meta})})),Object.keys(this.g.inports).forEach((e=>{t.push({tag:this.g.inports[e].tag,type:i.Inport,meta:this.g.inports[e].meta})}))),t}removeAllSubscriptions(){this.outgoingEvent.removeAllSubscriptions(),this.parameterChangeEvent.removeAllSubscriptions()}setPatcherDesc(t){return e(this,void 0,void 0,(function*(){this.g=t,this._=h.deserializeConversion(this.g.paramConversion)}))}}var f,c,l,d;!function(t){t[t.BufferTransfer=0]="BufferTransfer",t[t.ClockEvent=1]="ClockEvent",t[t.DataRefEvent=2]="DataRefEvent",t[t.MessageEvent=3]="MessageEvent",t[t.MIDIEvent=4]="MIDIEvent",t[t.ParameterEvent=5]="ParameterEvent",t[t.PresetEvent=6]="PresetEvent",t[t.StartupEvent=7]="StartupEvent",t[t.TransportEvent=8]="TransportEvent",t[t.TempoEvent=9]="TempoEvent",t[t.BeatTimeEvent=10]="BeatTimeEvent",t[t.TimeSignatureEvent=11]="TimeSignatureEvent"}(f||(f={}));class p{constructor(t=0,e){this.invalid=!1,this.time=t,this.eventTarget=e}serialize(){return{eventTarget:this.eventTarget,invalid:this.invalid,source:this.source,time:this.time}}}class m extends p{constructor(t,e,r,n){super(t,n),this.type=f.ClockEvent,this.clockIndex=e,this.value=r}get hasValue(){return void 0!==this.value}serialize(){return Object.assign(super.serialize(),{clockIndex:this.clockIndex,type:this.type,value:this.value})}}!function(t){t[t.Update=1]="Update"}(c||(c={}));class g extends p{constructor(t,e,r,n){super(t,n),this.type=f.DataRefEvent,this.dataRefIndex=e,this.action=r}serialize(){return Object.assign(super.serialize(),{action:this.action,dataRefIndex:this.dataRefIndex,type:this.type})}}class _ extends p{constructor(t,e,r,n="",i){super(t,i),this.type=f.MessageEvent,this.objectId=n,this.tag=e,this.payload=r}serialize(){return Object.assign(super.serialize(),{payload:this.payload,objectId:this.objectId,tag:this.tag,type:this.type})}}class y extends p{constructor(t,e,r,n){if(super(t,n),this.type=f.MIDIEvent,r.length>3)throw new Error(`MIDIData can only contain a maximum of 3 bytes. Received ${r.length}`);if(this.data=r,this.data.length<3){const t=r.length;this.data.length=3,this.data=this.data.fill(void 0,t,3)}let i=0;for(let t=0;t<3;t++)void 0!==r[t]&&i++;if(i<1)throw new Error("MIDIData must at least have the first byte set.");this.length=i,this.status=240&r[0],this.channel=15&r[0],this.port=e}serialize(){return Object.assign(super.serialize(),{channel:this.channel,data:this.data,port:this.port,type:this.type})}}class b extends p{constructor(t,e,r,n,i){super(t,i),this.type=f.ParameterEvent,this.target=e,this.value=r,this.source=n}serialize(){return Object.assign(super.serialize(),{target:this.target,type:this.type,value:this.value})}}!function(t){t[t.Set=1]="Set",t[t.Touched=2]="Touched"}(l||(l={}));class I extends p{constructor(t,e,r){super(t,void 0),this.type=f.PresetEvent,this.action=e,this.preset=r}serialize(){return Object.assign(super.serialize(),{action:this.action,type:this.type,preset:this.preset})}}class w extends p{constructor(t,e){super(t,void 0),this.type=f.TransportEvent,this.state=e}serialize(){return Object.assign(super.serialize(),{state:this.state,type:this.type})}}class v extends p{constructor(t,e){super(t,void 0),this.type=f.TempoEvent,this.tempo=e}serialize(){return Object.assign(super.serialize(),{tempo:this.tempo,type:this.type})}}class M extends p{constructor(t,e){super(t,void 0),this.type=f.BeatTimeEvent,this.beattime=e}serialize(){return Object.assign(super.serialize(),{beattime:this.beattime,type:this.type})}}class E extends p{constructor(t,e,r){super(t,void 0),this.type=f.TimeSignatureEvent,this.numerator=e,this.denominator=r}serialize(){return Object.assign(super.serialize(),{numerator:this.numerator,denominator:this.denominator,type:this.type})}}!function(t){t[t.BEGIN=0]="BEGIN",t[t.END=1]="END"}(d||(d={}));class T extends p{constructor(t,e){super(t,void 0),this.type=f.StartupEvent,this.phase=e}serialize(){return Object.assign(super.serialize(),{phase:this.phase,type:this.type})}}const B=__webpack_require__(264);function S(t,e){return t.time-e.time}function A(t){t.sort(S)}class P extends h{constructor(){super(),this.I=!1,this.v=!1,this.M=void 0,this.T=-1,this.B=[],this.I=!1,this.setPatcherDesc(B.desc),this.setPatcherCode(B.src[0].code)}S(t){const e=t.eventTarget||this.A;if(t.time=Math.max(t.time,this.h),this.M=t,t.type===f.ParameterEvent){const r=t;e.setParameterValue(r.target,r.value,t.time)}else if(t.type===f.MIDIEvent){const r=t;e.processMidiEvent(r.time,r.port,r.data,r.length)}else if(t.type===f.ClockEvent){const r=t;e.processClockEvent(r.time,r.clockIndex,r.hasValue,r.value)}else if(t.type===f.DataRefEvent){const r=t;r.action===c.Update&&e.processDataViewUpdate(r.dataRefIndex,r.time)}else if(t.type===f.MessageEvent){const r=t;Array.isArray(r.payload)?e.processListMessage(a.TAG(r.tag),a.TAG(r.objectId),r.time,r.payload):void 0===r.payload?e.processBangMessage(a.TAG(r.tag),a.TAG(r.objectId),r.time):e.processNumMessage(a.TAG(r.tag),a.TAG(r.objectId),r.time,r.payload)}else if(t.type===f.PresetEvent){const e=t;e.action===l.Set&&(this.v=!0,this.A.setPreset(e.time,e.preset),this.v=!1)}else if(t.type===f.TransportEvent){const e=t;this.A.processTransportEvent(e.time,e.state)}else if(t.type===f.TempoEvent){const e=t;this.A.processTempoEvent(e.time,e.tempo)}else if(t.type===f.BeatTimeEvent){const e=t;this.A.processBeatTimeEvent(e.time,e.beattime)}else if(t.type===f.TimeSignatureEvent){const e=t;this.A.processTimeSignatureEvent(e.time,e.numerator,e.denominator)}else if(t.type===f.StartupEvent){const e=t;this.v=e.phase===d.BEGIN}this.M=void 0}getCurrentTime(){return this.h}setCurrentTime(t){this.h=t}prepareToProcess(t,e,r){(r||t!==this.l||e!==this.p)&&(this.l=t,this.p=e,this.m=this.sampsToMs(this.p),this.isSync&&this.A.prepareToProcess(this.l,this.p))}process(t,e,r,n,i,s,o){const u=Math.min(e,this.getNumInputChannels()+this.getNumSignalInParameters()),a=Math.min(n,this.getNumOutputChannels()),h=Math.min(i,this.p);for(this.T=this.h+this.m,void 0!==this.midiInput&&(this.B.push.apply(this.B,s),this.I=!0),this.I&&(A(this.B),this.I=!1);this.B.length>0&&this.B[0].time<this.T;)this.S(this.B.shift());this.A.process(t,u,r,a,h),this.h=this.T,this.T=-1}scheduleMidiEvent(t,e){this.scheduleEvent(new y(this.h,t,e,this.A))}notifyParameterValueChanged(t,e){let r=this.M?this.M.source:void 0;this.parameterChangeEvent.emit(new b(this.getCurrentTime(),t,e,r))}scheduleParameterChange(t,e,r){this.scheduleEvent(new b(this.getCurrentTime(),t,e,void 0))}sendNumMessage(t,e,r){const n=new _(this.h,this.A.resolveTag(t),r,this.A.resolveTag(e));this.outgoingEvent.emit(n)}sendBangMessage(t,e){const r=new _(this.h,this.A.resolveTag(t),void 0,this.A.resolveTag(e));this.outgoingEvent.emit(r)}sendListMessage(t,e,r){const n=new _(this.h,this.A.resolveTag(t),r,this.A.resolveTag(e));this.outgoingEvent.emit(n)}getParameterValue(t){return this.A.getParameterValue(t)}flushClockEvents(t,e,r){this.flushClockEventsWithValue(t,e,void 0,r)}flushClockEventsWithValue(t,e,r,n){for(let i=0;i<this.B.length;i++)if(this.B[i]instanceof m){const s=this.B[i];s.eventTarget!==t||s.clockIndex!==e&&void 0!==s.clockIndex||void 0!==r&&s.value!==r||(this.B.splice(i,1),n&&this.S(s),i--)}}deleteClockEvents(t){this.flushClockEvents(t,void 0,!1)}scheduleClockEvent(t,e,r){this.scheduleClockEventWithValue(t,e,r,void 0)}scheduleClockEventWithValue(t,e,r,n){this.scheduleEvent(new m(r,e,n,t))}sendMidiEvent(t,e,r,n){const i=new y(this.getCurrentTime(),t,[e,r,n],void 0);this.outgoingEvent.emit(i)}sendMidiEventList(t,e){let r;for(r=2;r<e.length;r+=3)this.sendMidiEvent(t,e[r-2],e[r-1],e[r]);if(r-=3,r<e.length){var n=r-e.length;this.sendMidiEvent(t,e[r],n>1?e[r+1]:void 0,n>2?e[r+2]:void 0)}}sendOutlet(t,e,r){console.log("sendOutlet",t,e,r)}updatePatcherEventTarget(t,e){for(let r=0;r<this.B.length;r++)this.B[r].eventTarget===t&&(this.B[r].eventTarget=e,this.B[r].invalid=!1)}rescheduleEventTarget(t){for(let e=0;e<this.B.length;e++)this.B[e].eventTarget===t&&(this.B[e].invalid=!1)}isInProcess(){return this.T>-1}sendDataRefUpdated(t){this.scheduleEvent(new g(this.getCurrentTime(),t,c.Update,this.A))}get isSync(){return!0}scheduleEvent(t){this.B.push(t),this.isInProcess()?A(this.B):this.I=!0}setPatcherCode(t){return e(this,void 0,void 0,(function*(){const e={};this.A&&this.A.getState(e),this.A=a.deserializeSrc(t);for(let t=0;t<this.B.length;t++)this.B[t].eventTarget&&(this.B[t].invalid=!0);this.A.setEngineAndPatcher(this,null),this.scheduleEvent(new T(this.h,d.BEGIN)),this.A.initialize(e),this.scheduleEvent(new T(this.h,d.END)),this.A.prepareToProcess(this.l,this.p,!0);for(let t=this.B.length-1;t>=0;t--)this.B[t].invalid&&this.B.splice(t,1)}))}setExternalData(t,r,i){return e(this,void 0,void 0,(function*(){const e=this.A.getNumDataRefs();for(let s=0;s<e;s++){const e=this.A.getDataRef(s);if(e.name==t){e.arrayBuffer=r,i instanceof n&&(e.channels=i.channels,e.sampleRate=i.sampleRate),this.sendDataRefUpdated(s);break}}}))}releaseExternalData(t){return e(this,void 0,void 0,(function*(){const e=this.A.getNumDataRefs();let i,s;for(let o=0;o<e;o++){const e=this.A.getDataRef(o);if(e.name==t){i=e.arrayBuffer,e.arrayBuffer=new ArrayBuffer(0),e.channels?(s=new n(e.channels,e.sampleRate),e.channels=0,e.sampleRate=0):s=new r,this.sendDataRefUpdated(o);break}}if(!i)throw new Error(`Invalid DataBuffer. No DataBuffer with id ${t} found.`);return{data:i,typeDesc:s}}))}getPreset(){return e(this,void 0,void 0,(function*(){let t={};return this.A.getPreset(t),t}))}setPreset(t){this.scheduleEvent(new I(this.h,l.Set,t))}presetTouched(){this.v||this.outgoingEvent.emit(new I(this.h,l.Touched,void 0))}}var O,D;function N(t){return class extends t{constructor(...t){super(),this.changeEvent=new u,this.P=new u;const e=t[0];this.O=e.notificationSetting,this.convertFromNormalizedValue=e.scaling.convertFromNormalized,this.convertToNormalizedValue=e.scaling.convertToNormalized,this.constrainParameterValue=e.scaling.constrainParameterValue,this.initialValue=e.initialValue,this.D=e.initialValue,this.displayName=e.displayName||e.name,this.exponent=e.exponent,this.id=e.id,this.index=e.index,this.min=e.min,this.max=e.max,this.name=e.name,this.steps=e.steps,this.unit=e.unit||""}get notificationSetting(){return this.O}get normalizedValue(){return this.convertToNormalizedValue(this.D)}set normalizedValue(t){this.N(this.convertFromNormalizedValue(t))}R(t){this.O=t}N(t){t=this.constrainParameterValue(t),this.D!==t&&(this.D=t,this.P.emit(this),this.notificationSetting===D.All&&this.changeEvent.emit(t))}C(t){this.D=t,this.changeEvent.emit(t)}}}!function(t){t[t.Number=0]="Number",t[t.Bang=1]="Bang",t[t.List=2]="List",t[t.Signal=3]="Signal",t[t.Count=4]="Count",t[t.Enum=5]="Enum"}(O||(O={})),function(t){t[t.All=0]="All",t[t.Internal=1]="Internal"}(D||(D={}));N(Object);N(Object);N(Object);class R{constructor(){this.k={},this.U=new Float32Array(128)}addParam(t,e){t.type==a.ParameterTypeSignal&&t.ioType===a.IOTypeInput&&(this.k[t.signalIndex]={name:e,param:new Float32Array(128)})}getParamName(t){let e=this.k[t];return void 0!==e?e.name:void 0}getParamArray(t,e,r){if(e.length==r)return e;{let n=this.k[t];return n.param.length!=r&&(n.param=new Float32Array(r)),n.param.fill(e[0])}}}var x,C;!function(t){t[t.LoadPatcher=0]="LoadPatcher",t[t.ScheduleEvent=1]="ScheduleEvent",t[t.TransferBuffer=2]="TransferBuffer",t[t.ReleaseBuffer=3]="ReleaseBuffer",t[t.SetPreset=4]="SetPreset",t[t.GetPreset=5]="GetPreset"}(x||(x={})),function(t){t[t.LoadPatcherFinished=1e3]="LoadPatcherFinished",t[t.OutgoingEvent=1002]="OutgoingEvent",t[t.ReleasedBuffer=1003]="ReleasedBuffer",t[t.TransferBufferFinished=1004]="TransferBufferFinished",t[t.GetPresetResponse=1005]="GetPresetResponse"}(C||(C={}));var k=__webpack_require__(834).Buffer;const U=JSON.parse(k.from("XXXX___RNBOPATCHERDESC_REPLACE___XXXX","base64").toString("utf-8")),j=k.from("XXXX___RNBOPATCHERSRC_REPLACE___XXXX","base64").toString("utf-8");class X extends AudioWorkletProcessor{constructor(i){super(i),this.j=new P,this.X=[],this.F=[],this.$=new R,this.V=i=>e(this,void 0,void 0,(function*(){switch(i.data[0]){case x.LoadPatcher:yield this.j.setPatcherDesc(U),yield this.j.setPatcherCode(j);for(let t=0;t<this.j.getNumParameters();t++){const e=this.j.getParameterInfo(t);this.$.addParam(e,this.j.getParameterName(t))}this.X=new Array(this.j.getNumInputChannels()+this.j.getNumSignalInParameters()),this.F=new Array(this.j.getNumOutputChannels()+this.j.getNumSignalOutParameters()),this.j.process([],0,[[]],1,0),this.port.postMessage([C.LoadPatcherFinished]);break;case x.ScheduleEvent:this.j.scheduleEvent((t=>{switch(t.type){case f.ClockEvent:return new m(t.time,t.clockIndex,t.value,t.eventTarget);case f.DataRefEvent:return new g(t.time,t.dataRefIndex,t.action,t.eventTarget);case f.MessageEvent:return new _(t.time,t.tag,t.payload,t.objectId,t.eventTarget);case f.MIDIEvent:return new y(t.time,t.port,t.data,t.eventTarget);case f.ParameterEvent:return new b(t.time,t.target,t.value,t.source,t.eventTarget);case f.PresetEvent:return new I(t.time,t.action,t.preset);case f.TransportEvent:return new w(t.time,t.state);case f.TempoEvent:return new v(t.time,t.tempo);case f.BeatTimeEvent:return new M(t.time,t.beattime);case f.TimeSignatureEvent:return new E(t.time,t.numerator,t.denominator);case f.StartupEvent:return new T(t.time,t.phase);default:throw new Error(`Unable to deserialize RNBOEvent of type ${t.type}`)}})(i.data[1]));break;case x.TransferBuffer:{const e=i.data[1];this.j.setExternalData(e.memoryId,e.data,(e=>{switch(e.type){case t.Float32Audio:return new n(e.channels,e.sampleRate);case t.TypedArray:return new r;default:throw new Error(`Unable to deserialize RNBODataDesc of type ${e.type}`)}})(e.typeDesc)),this.port.postMessage([C.TransferBufferFinished,{memoryId:e.memoryId}]);break}case x.ReleaseBuffer:{const t=i.data[1],{data:e,typeDesc:r}=yield this.j.releaseExternalData(t.memoryId);this.port.postMessage([C.ReleasedBuffer,{memoryId:t.memoryId,data:e,typeDesc:r.serialize()}],[e]);break}case x.GetPreset:{const t=yield this.j.getPreset();this.port.postMessage([C.GetPresetResponse,{preset:t}]);break}case x.SetPreset:{const t=i.data[1];this.j.setPreset(t.preset)}}})),this.L=t=>{this.port.postMessage([C.OutgoingEvent,t.serialize()])},this.q=t=>{this.port.postMessage([C.OutgoingEvent,t.serialize()])},this.j.outgoingEvent.subscribe(this.L),this.j.parameterChangeEvent.subscribe(this.q),this.port.onmessage=this.V,this.port.start()}static get parameterDescriptors(){return XXXX___RNBOPARAMDESCRIPTORS_REPLACE___XXXX}process(t,e,r){let n,i,s=0,o=0;for(n=0;n<t.length;n++){const e=t[n];for(i=0;i<e.length&&(s<this.X.length&&e[i].length);i++)this.X[s]=e[i],s++}for(n=0;n<e.length;n++){const t=e[n];for(i=0;i<t.length&&o<this.F.length;i++)this.F[o]=t[i],o++}let u=0;o>0&&this.F.length&&this.F[0]?u=this.F[0].length:e.length&&e[0]&&e[0].length&&e[0][0]?u=e[0][0].length:s>0&&this.X.length&&this.X[0]?u=this.X[0].length:t.length&&t[0]&&t[0].length&&t[0][0]&&(u=t[0][0].length),u||(u=128);for(let t=s;t<this.X.length;t++){const e=this.$.getParamName(t);void 0!==e&&(this.X[t]=this.$.getParamArray(t,r[e],u),s++)}return this.j.setCurrentTime(1e3*currentTime),this.j.prepareToProcess(sampleRate,u),this.j.process(this.X,s,this.F,o,u),!0}}let z="XXXX---RNBOPROCESSORNAME_REPLACE---XXXX";z.startsWith("XXXX---RNBOPROCESSORNAME_REPLACE---")&&(z="RNBOProcessor"),registerProcessor(z,X)})()})();',wasm:'(()=>{var __webpack_modules__={133:(module,__unused_webpack_exports,__webpack_require__)=>{var Float32Buffer=__webpack_require__(852).Float32Buffer,Float64Buffer=__webpack_require__(852).Float64Buffer,Float32MultiBuffer=__webpack_require__(852).Float32MultiBuffer,Float64MultiBuffer=__webpack_require__(852).Float64MultiBuffer,IntBuffer=__webpack_require__(852).IntBuffer,UInt8Buffer=__webpack_require__(852).UInt8Buffer,ExternalLoaderFactory=__webpack_require__(126).ExternalLoaderFactory;let Xoshiro=__webpack_require__(925);var patcherSerialKey="XX__PatcherSerialKey__XX",eventTargetKey="XX__EventTargetKey__XX",ParameterTypeNumber=0,ParameterTypeBang=1,ParameterTypeList=2,ParameterTypeSignal=3,ParameterTypeCount=4,IOTypeInput=0,IOTypeOutput=1,IOTypeUndefined=2,INVALID_INDEX=Number.MAX_SAFE_INTEGER;function rand01(){return Math.random()}function pi01(){return Math.PI}var rnbo_abs=Math.abs,rnbo_fabs=Math.abs,rnbo_acos=Math.acos,rnbo_acosh=Math.acosh,rnbo_asin=Math.asin,rnbo_asinh=Math.asinh,rnbo_atan=Math.atan,rnbo_atan2=Math.atan2,rnbo_atanh=Math.atanh,rnbo_cbrt=Math.cbrt,rnbo_ceil=Math.ceil,rnbo_cos=Math.cos,rnbo_cosh=Math.cosh,rnbo_exp=Math.exp,rnbo_expm1=Math.expm1,rnbo_floor=Math.floor,rnbo_fround=Math.round,rnbo_imul=Math.imul,rnbo_log=Math.log,rnbo_log10=Math.log10,rnbo_log1p=Math.log1p,rnbo_log2=Math.log2,rnbo_pow=Math.pow,rnbo_round=rnbo_fround,rnbo_sign=Math.sign,rnbo_sin=Math.sin,rnbo_sinh=Math.sinh,rnbo_sqrt=Math.sqrt,rnbo_tan=Math.tan,rnbo_tanh=Math.tanh,trunc=Math.trunc,rnbo_trunc=Math.trunc,rnbo_number_max=()=>Math.MAX_VALUE,rnbo_isnan=isNaN;function fixnan(t){return isNaN(t)?0:t}function fract(t){return t%1}function fixdenorm(t){return t}function isdenorm(t){return!1}var fastsin=Math.sin,fastcos=Math.cos,fastexp=Math.exp,fastpow=Math.pow,fasttan=Math.tan;function nextpoweroftwo(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1)}var MAX_32BIT_INT=Math.pow(2,32);function uint32_add(t,e){var n=t+e;return n>=MAX_32BIT_INT&&(n-=MAX_32BIT_INT),Math.trunc(n)}function uint32_trunc(t){return t>>>0}function uint32_rshift(t,e){return t>>>e}function imod(t,e){return(0|t)%(0|e)}function imod_nocast(t,e){return t%e}function getArrayValueAtIndex(t,e){return t[e]}function allocateArray(t,e){return new Array(t)}function createListCopy(t){return t.slice(0)}function jsCreateListCopy(t){return createListCopy(t)}function list(){let t=[];for(let e=0;e<arguments.length;e++){let n=arguments[e];if(Array.isArray(n))for(let e=0;e<n.length;e++)t.push(n[e]);else t.push(n)}return t}function resizeSignal(t,e,n){for(var r=t||[],i=e;i<n;i++)r[i]=0;return r}function zeroSignal(t,e){t&&t.fill(0)}function fillSignal(t,e,n,r){t&&t.fill(n,r)}function copySignal(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function containsValue(t){return void 0!==t}function addressOf(t){return t}function systemticks(){return Date.now()}function bitwiseFloat(t){var e=new Uint32Array(1);return e[0]=t,new DataView(e.buffer).getFloat32(0,!0)}function imul(t,e){return Math.imul(t,e)}var MIDI_StatusByteReceived=1,MIDI_SecondByteReceived=2,MIDI_NoteOff=3,MIDI_NoteOn=4,MIDI_Aftertouch=5,MIDI_CC=6,MIDI_ProgramChange=7,MIDI_ChannelPressure=8,MIDI_PitchBend=9,MIDI_Sysex_Started=10,MIDI_Sysex_Complete=11,MIDI_Generic=99,MIDI_InvalidByte=-1,MIDI_NoteOffMask=128,MIDI_NoteOnMask=144,MIDI_AfterTouchMask=160,MIDI_CCMask=176,MIDI_ProgramChangeMask=192,MIDI_ChannelPressureMask=208,MIDI_PitchBendMask=224,MIDI_QuarterFrame=241,MIDI_SongPos=242,MIDI_SongSel=243,MIDI_TuneRequest=246,MIDI_SysexStart=240,MIDI_SysexEnd=247,MIDI_Clock=248,MIDI_Start=250,MIDI_Continue=251,MIDI_Stop=252,MIDI_ActiveSense=254,MIDI_Reset=255,MIDI_CC_Sustain=64,MIDI_CC_Sostenuto=66,MIDI_CC_AllNotesOff=123,MIDI_CC_PressureMSB=70,MIDI_CC_PressureLSB=102,MIDI_CC_TimbreMSB=74,MIDI_CC_TimbreLSB=106,MIDI_NoteState_Off=0,MIDI_NoteState_On=1,MIDI_NoteState_Sustained=2,CLOCKS_PER_SEC=1;function parseMidi(t,e,n){if(240==e)return MIDI_Sysex_Started;if(t==MIDI_Sysex_Started)return 247==e?MIDI_Sysex_Complete:e<=127?t:MIDI_InvalidByte;if(e>127)return MIDI_StatusByteReceived;var r=240&n;return t==MIDI_StatusByteReceived?r==MIDI_ProgramChangeMask?MIDI_ProgramChange:r==MIDI_ChannelPressureMask?MIDI_ChannelPressure:MIDI_SecondByteReceived:t==MIDI_SecondByteReceived?r==MIDI_NoteOffMask||r==MIDI_NoteOnMask&&0==e?MIDI_NoteOff:r==MIDI_NoteOnMask?MIDI_NoteOn:r==MIDI_AfterTouchMask?MIDI_Aftertouch:r==MIDI_CCMask?MIDI_CC:r==MIDI_PitchBendMask?MIDI_PitchBend:MIDI_Generic:t}function getMIDIChannel(t){var e=240&t;return e>=128&&e<=224?15&t:0}function initDataRef(t,e){var n={};return n.name=t,n.isValid=!1,n.wantsFillFlag=!1,n.bytesToAllocate=0,n.channels=0,n.sampleRate=0,n.internal=e,n.index=-1,n.wantsFill=function(){return this.wantsFillFlag},n.setWantsFill=function(t){this.wantsFillFlag=t},n.requestSizeInBytes=function(t,e){(t>this.bytesToAllocate||e)&&(this.bytesToAllocate=t)},n.getRequestedSizeInBytes=function(){return this.bytesToAllocate},n.resetRequestedSizeInByte=function(){this.bytesToAllocate=0},n.getSizeInBytes=function(){return this.arrayBuffer.byteLength},n.hasRequestedSize=function(){return this.bytesToAllocate>0},n.isInternal=function(){return this.internal},n.getIndex=function(){return this.index},n.setIndex=function(t){this.index=t},n.clear=function(){n.arrayBuffer=new ArrayBuffer(0)},n.clear(),n}function initMultiRef(){var t={index:0,current:0,dataRefs:[],count:0};for(let e=0;e<arguments.length;e++)t.dataRefs.push(arguments[e]),t.count++;return t.setCurrent=function(t){t>=0&&t<this.count&&(this.current=t)},t.getIndex=function(){return this.index},t.setIndex=function(t){this.index=t},t}function updateMultiRef(t,e,n){e.setCurrent&&e.getIndex&&(e.setCurrent(n),t.getEngine().sendDataRefUpdated(e.getIndex()))}function updateDataRef(t,e){t.getEngine().sendDataRefUpdated(e.getIndex())}function FIXEDSIZEARRAYINIT(){let t=arguments[0];if(void 0!==t){let e=new Array(t);if(e.fill(0),void 0!==arguments[1]){let n=Array.from(arguments);n.splice(0,1);for(let r=0;r<t;r++)e[r]=FIXEDSIZEARRAYINIT.apply(null,n)}return e}return new Array}function TAG(t){let e=0;for(let n=0;n<t.length;n++){e=t.charCodeAt(n)+(e<<6)+(e<<16)-e}return 0|e}function serializeArrayToList(t,e){return t}function deserializeArrayFromList(t,e,n){t}function serializeDataRef(t){return t.resetRequestedSizeInByte(),t}function _evalSrc(src){var rnboObj;return eval(src),rnboObj}function getSubState(t,e){return void 0===t[e]&&(t[e]={}),t[e]}function getSubStateAt(t,e,n){return void 0===t[e]&&(t[e]=[]),void 0===t[e][n]&&(t[e][n]={}),t[e][n]}function stateIsEmpty(t){return 0===Object.keys(t).length}function TransportState(t){return t}function RNBO_UNUSED(){}let xoshiro_reset=Xoshiro.reset,xoshiro_next=Xoshiro.next;module.exports={deserializeSrc:function(t){return _evalSrc(t)},deserializeJSON:function(t){var e=t;return"string"==typeof e&&(e={src:t}),_evalSrc(e.src)},extractOptionsFromJSON:function(t){var e=t;return"string"==typeof e&&(e=JSON.parse(t)),e.options?e.options:{}},evalFunction(functionAsString){var tmpFunction,functionAsString="tmpFunction = "+functionAsString;return eval(functionAsString),tmpFunction},nextpoweroftwo,ParameterTypeNumber,ParameterTypeBang,ParameterTypeList,ParameterTypeSignal,ParameterTypeCount,IOTypeInput,IOTypeOutput,IOTypeUndefined:IOTypeUndefined.length,TAG}},852:t=>{function e(){let t=this.dataRef.getSizeInBytes()/this.BASEARRAYVIEW.BYTES_PER_ELEMENT,e=this.getChannels();return e?t/e:0}function n(t,e){let n=t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e;this.requestedChannels=e,this.dataRef.requestSizeInBytes(n,!1)}function r(t,e){return this[this.getChannels()*Math.floor(e)+t]}function i(t,e){const n=this.getChannels();return t<0||t>=n||e<0||e>=this.getSize()?0:this[n*Math.floor(e)+t]}function s(t,e,n){this[this.getChannels()*Math.floor(e)+t]=n}function a(t,e,n){const r=this.getChannels();t<0||t>=r||e<0||e>=this.getSize()||(this[r*Math.floor(e)+t]=n)}function o(){return this.dataRef.channels}function u(){return this.dataRef.sampleRate}function h(t){this.dataRef.sampleRate=t}function c(){this.dataRef.clear()}function f(t){if(t!==this.dataRef.channels){let e=this.getSize();return this.clear(),this.dataRef.channels=t,this.setSize(e)}return this}function _(){if(this.isAudioBuffer&&this.requestedChannels!==this.getChannels()&&0!==this.requestedChannels&&(this.getChannels()>0&&this.setZero(),this.dataRef.channels=this.requestedChannels,this.requestedChannels=0),this.dataRef.bytesToAllocate>0&&(this.dataRef.bytesToAllocate!==this.dataRef.getSizeInBytes()||!this.dataRef.isInternallyAllocated)){let t;if(this.dataRef.isInternallyAllocated){let e=Math.min(this.dataRef.arrayBuffer.byteLength,this.dataRef.bytesToAllocate);e/=this.BASEARRAYVIEW.BYTES_PER_ELEMENT,t=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer,0,e)}this.dataRef.arrayBuffer=new ArrayBuffer(this.dataRef.bytesToAllocate),this.dataRef.isInternallyAllocated=!0;let e=new this.BASEARRAYVIEW(this.dataRef.arrayBuffer);return t?e.set(t):this.dataRef.wantsFillFlag=!0,y(e,this.dataRef,this.BASEARRAYVIEW),this.isAudioBuffer&&m(e),e}return this}function l(t){let e=this.getChannels();return this.requestedChannels=e,this.dataRef.requestSizeInBytes(t*this.BASEARRAYVIEW.BYTES_PER_ELEMENT*e,!0),this.allocateIfNeeded()}function I(){this.fill&&this.fill(0)}function M(){return this.touched}function b(t){this.touched=t}function p(t){this.dataRef.setWantsFill(t)}function d(){return this.dataRef.getIndex()}function y(t,r,i){t.dataRef=r,t.BASEARRAYVIEW=i,t.getSize=e,t.requestSize=n,t.setSize=l,t.allocateIfNeeded=_,t.setZero=I,t.clear=c,t.getChannels=o,t.getSampleRate=u,t.setWantsFill=p,t.getIndex=d,r.setZero=function(){t.setZero()},t.touched=!1,t.getTouched=M,t.setTouched=b}function m(t){t.getSample=r,t.getSampleSafe=i,t.setSample=s,t.setSampleSafe=a,t.setChannels=f,t.setSampleRate=h,t.isAudioBuffer=!0,t.requestedChannels=0}let v=function(t,e){let n;return n=t.arrayBuffer?new e(t.arrayBuffer):{},y(n,t,e),n};(v.prototype=Object.create(null)).constructor=v;let D=function(t,e){let n=v.call(this,t,e);return m(n),n};(D.prototype=Object.create(v)).constructor=D;let S=function(t){return D.call(this,t,Float32Array)};(S.prototype=Object.create(D.prototype)).constructor=S;let w=function(t){return D.call(this,t,Float64Array)};(w.prototype=Object.create(D.prototype)).constructor=w;let A=function(t,e){let n=new e(t.dataRefs[t.current]);return n.multiRef=t,n.setCurrent=function(t){this.multiRef.setCurrent(Math.round(t))},n.getIndex=function(){return this.multiRef.getIndex()},n};A.prototype=Object.create(null),A.constructor=A;let g=function(t){return A.call(this,t,S)};(g.prototype=Object.create(A.prototype)).constructor=g;let O=function(t){return A.call(this,t,w)};(O.prototype=Object.create(A.prototype)).constructor=O;let P=function(t){return v.call(this,t,Int32Array)};(P.prototype=Object.create(v.prototype)).constructor=P;let T=function(t){return v.call(this,t,Uint8Array)};(T.prototype=Object.create(v.prototype)).constructor=T,t.exports={Float32Buffer:S,Float64Buffer:w,Float32MultiBuffer:g,Float64MultiBuffer:O,IntBuffer:P,UInt8Buffer:T}},126:t=>{var e=function(){};(e.prototype=Object.create(null)).constructor=e,e.prototype.setEngineAndPatcher=function(){},e.prototype.initialize=function(){},e.prototype.getNumParameters=function(){return 0},e.prototype.setParameterValue=function(){},e.prototype.prepareToProcess=function(){},e.prototype.process=function(){},t.exports={ExternalLoaderFactory:function(){return console.log("WARNING: Externals are not yet supported in Javascript"),new e}}},925:t=>{function e(t,e,n,r){n[r]=t[e]+0x9e3779b97f4a7c15n,n[r]=0xbf58476d1ce4e5b9n*(n[r]^n[r]>>30n),n[r]=0x94d049bb133111ebn*(n[r]^n[r]>>27n),n[r]=n[r]^n[r]>>31n}t.exports={reset:function(t,n){let r=new BigUint64Array(1);r[0]=BigInt(Math.trunc(1e6*t)),e(r,0,n,0),e(n,0,n,1),e(n,1,n,2),e(n,2,n,3)},next:function(t){let e=new BigUint64Array(1),n=new BigUint64Array(1);return n[0]=t[0]+t[3],e[0]=t[1]<<17n,t[2]^=t[0],t[3]^=t[1],t[1]^=t[2],t[0]^=t[3],t[2]^=e[0],t[3]=t[3]<<45n|t[3]>>19n,n[0]=n[0]>>11n,2220446049250313e-31*Number(n[0])-1}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};(()=>{var t;!function(t){t[t.Float32Audio=0]="Float32Audio",t[t.TypedArray=1]="TypedArray"}(t||(t={}));class e{constructor(){this.type=t.TypedArray}serialize(){return{type:this.type}}}class n{constructor(e,n){this.channels=0,this.sampleRate=0,this.type=t.Float32Audio,this.channels=e,this.sampleRate=n}static fromAudioBuffer(t){return new n(t.numberOfChannels,t.sampleRate)}get isInterleaved(){return!0}serialize(){return{channels:this.channels,sampleRate:this.sampleRate,type:this.type}}}var r,i,s,a;!function(t){t[t.BufferTransfer=0]="BufferTransfer",t[t.ClockEvent=1]="ClockEvent",t[t.DataRefEvent=2]="DataRefEvent",t[t.MessageEvent=3]="MessageEvent",t[t.MIDIEvent=4]="MIDIEvent",t[t.ParameterEvent=5]="ParameterEvent",t[t.PresetEvent=6]="PresetEvent",t[t.StartupEvent=7]="StartupEvent",t[t.TransportEvent=8]="TransportEvent",t[t.TempoEvent=9]="TempoEvent",t[t.BeatTimeEvent=10]="BeatTimeEvent",t[t.TimeSignatureEvent=11]="TimeSignatureEvent"}(r||(r={}));class o{constructor(t=0,e){this.invalid=!1,this.time=t,this.eventTarget=e}serialize(){return{eventTarget:this.eventTarget,invalid:this.invalid,source:this.source,time:this.time}}}!function(t){t[t.Update=1]="Update"}(i||(i={}));class u extends o{constructor(t,e,n,i="",s){super(t,s),this.type=r.MessageEvent,this.objectId=i,this.tag=e,this.payload=n}serialize(){return Object.assign(super.serialize(),{payload:this.payload,objectId:this.objectId,tag:this.tag,type:this.type})}}class h extends o{constructor(t,e,n,i){if(super(t,i),this.type=r.MIDIEvent,n.length>3)throw new Error(`MIDIData can only contain a maximum of 3 bytes. Received ${n.length}`);if(this.data=n,this.data.length<3){const t=n.length;this.data.length=3,this.data=this.data.fill(void 0,t,3)}let s=0;for(let t=0;t<3;t++)void 0!==n[t]&&s++;if(s<1)throw new Error("MIDIData must at least have the first byte set.");this.length=s,this.status=240&n[0],this.channel=15&n[0],this.port=e}serialize(){return Object.assign(super.serialize(),{channel:this.channel,data:this.data,port:this.port,type:this.type})}}class c extends o{constructor(t,e,n,i,s){super(t,s),this.type=r.ParameterEvent,this.target=e,this.value=n,this.source=i}serialize(){return Object.assign(super.serialize(),{target:this.target,type:this.type,value:this.value})}}!function(t){t[t.Set=1]="Set",t[t.Touched=2]="Touched"}(s||(s={}));class f extends o{constructor(t,e,n){super(t,void 0),this.type=r.PresetEvent,this.action=e,this.preset=n}serialize(){return Object.assign(super.serialize(),{action:this.action,type:this.type,preset:this.preset})}}!function(t){t[t.BEGIN=0]="BEGIN",t[t.END=1]="END"}(a||(a={}));var _,l;!function(t){t[t.Number=0]="Number",t[t.Bang=1]="Bang",t[t.List=2]="List",t[t.Signal=3]="Signal",t[t.Count=4]="Count",t[t.Enum=5]="Enum"}(_||(_={})),function(t){t[t.All=0]="All",t[t.Internal=1]="Internal"}(l||(l={}));(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}})();"undefined"!=typeof isSecureContext&&isSecureContext;Math.pow(10,4);const I=t=>t.slice();class M{constructor(){this.t=[],this.i=[]}get listenerCount(){return this.t.length+this.i.length}emit(t){if(this.t.length){const e=I(this.t);for(let n=0,r=e.length;n<r;n++)e[n](t)}if(this.i.length){const e=I(this.i);for(let n=0,r=e.length;n<r;n++)e[n](t);e.forEach((t=>this.unsubscribe(t)))}}once(t){return this.i.push(t),{unsubscribe:()=>this.unsubscribe(t)}}subscribe(t){return this.t.push(t),{unsubscribe:()=>this.unsubscribe(t)}}unsubscribe(t){const e=this.t.indexOf(t);e>=0&&this.t.splice(e,1);const n=this.i.indexOf(t);n>=0&&this.i.splice(n,1)}removeAllSubscriptions(){this.t=[],this.i=[]}}function b(t){return class extends t{constructor(...t){super(),this.changeEvent=new M,this.o=new M;const e=t[0];this.u=e.notificationSetting,this.convertFromNormalizedValue=e.scaling.convertFromNormalized,this.convertToNormalizedValue=e.scaling.convertToNormalized,this.constrainParameterValue=e.scaling.constrainParameterValue,this.initialValue=e.initialValue,this.h=e.initialValue,this.displayName=e.displayName||e.name,this.exponent=e.exponent,this.id=e.id,this.index=e.index,this.min=e.min,this.max=e.max,this.name=e.name,this.steps=e.steps,this.unit=e.unit||""}get notificationSetting(){return this.u}get normalizedValue(){return this.convertToNormalizedValue(this.h)}set normalizedValue(t){this._(this.convertFromNormalizedValue(t))}l(t){this.u=t}_(t){t=this.constrainParameterValue(t),this.h!==t&&(this.h=t,this.o.emit(this),this.notificationSetting===l.All&&this.changeEvent.emit(t))}I(t){this.h=t,this.changeEvent.emit(t)}}}b(Object);b(Object);b(Object);var p=__webpack_require__(133);class d{constructor(){this.M={},this.p=new Float32Array(128)}addParam(t,e){t.type==p.ParameterTypeSignal&&t.ioType===p.IOTypeInput&&(this.M[t.signalIndex]={name:e,param:new Float32Array(128)})}getParamName(t){let e=this.M[t];return void 0!==e?e.name:void 0}getParamArray(t,e,n){if(e.length==n)return e;{let r=this.M[t];return r.param.length!=n&&(r.param=new Float32Array(n)),r.param.fill(e[0])}}}class y{constructor(t,e){this.m=0,this.v=0,this.D=!1,this.S=new d,this.A=e;let n=new this.A.CoreObject;this.g=n;let r={handleParameterEvent:t.handleParameterEvent.bind(t),handleMidiEvent:t.handleMidiEvent.bind(t),handleMessageEvent:t.handleMessageEvent.bind(t),handlePresetEvent:t.handlePresetEvent.bind(t)},i=this.A.EventHandler.implement(r);this.O=n.createParameterInterface(i);for(let t=0;t<n.getNumParameters();t++){let e=n.getParameterInfo(t);this.S.addParam(e,n.getParameterName(t))}this.m=n.getNumInputChannels()+n.getNumSignalInParameters(),this.v=n.getNumOutputChannels(),this.D=!0}isReady(){return this.D}pushArray(t){let e=this.g.getArrayPassingHEAP(t.length);return this.A.HEAPF64.set(t,e>>3),e}retrieveArray(t){let e=[];for(let n=0;n<t.size();n++)e.push(t.get(n));return e}setExternalData(t,r,i){const s=new Uint8Array(r),a=this.g.getNewMemoryBuffer(s.byteLength);this.A.HEAPU8.set(s,a),i instanceof n?this.g.setExternalAudioBuffer(t,a,s.byteLength,i.channels,i.sampleRate):i instanceof e&&this.g.setExternalUntypedBuffer(t,a,s.byteLength)}releaseExternalData(t){let r,i=this.g.getDataRefIndex(t),s=this.g.getDataRefType(i),a=this.g.getDataRefData(i),o=new Uint8Array(a.sizeInBytes);return o.set(this.A.HEAPU8.subarray(a.data,a.data+a.sizeInBytes)),r=1==s.type?new n(s.channels,s.sampleRate):new e,this.g.releaseDataRef(i),[o.buffer,r]}getCurrentTime(){return this.g.getCurrentTime()}setCurrentTime(t){this.g.setCurrentTime(t)}prepareToProcess(t,e){this.g.prepareToProcess(t,e)}process(t,e,n,r,i,s){let a=0,o=0;for(let n=0;n<e&&a<this.m;n++){let e=t[n],r=this.g.getInputChannel(a);this.A.HEAPF64.set(e,r>>3),a++}if(s)for(let t=a;t<this.m;t++){let e=this.S.getParamName(t);if(void 0!==e){let n=this.g.getInputChannel(t);this.A.HEAPF64.set(this.S.getParamArray(t,s[e],i),n>>3),a++}}this.g.process(a,this.v,i);for(let t=0;t<r&&o<this.v;t++){let e=n[t],r=this.g.getOutputChannel(o)>>3;e.set(this.A.HEAPF64.subarray(r,r+e.length)),o++}}resolveTag(t){return this.g.resolveTag(t)}scheduleEvent(t){t.type===r.MIDIEvent?this.g.scheduleMidiEvent(t.time,t.port,t.data[0],t.data[1],t.data[2]):t.type===r.ParameterEvent?this.g.scheduleParameterEvent(t.target,t.time,t.value,t.source):t.type===r.MessageEvent?Array.isArray(t.payload)?this.g.sendListMessage(t.tag,t.objectId,this.pushArray(t.payload),t.payload.length,t.time):"number"==typeof t.payload?this.g.sendNumMessage(t.tag,t.objectId,t.payload,t.time):void 0===t.payload&&this.g.sendBangMessage(t.tag,t.objectId,t.time):t.type===r.TransportEvent?this.g.scheduleTransportEvent(t.time,t.state):t.type===r.TempoEvent?this.g.scheduleTempoEvent(t.time,t.tempo):t.type===r.BeatTimeEvent?this.g.scheduleBeatTimeEvent(t.time,t.beattime):t.type===r.TimeSignatureEvent&&this.g.scheduleTimeSignatureEvent(t.time,t.numerator,t.denominator)}getNumParameters(){return this.g.getNumParameters()}getParameterValue(t){return this.g.getParameterValue(t)}numIns(){return this.m}numOuts(){return this.v}getPreset(){return this.g.getPreset()}setPreset(t){this.g.setPreset(t)}}var m,v;!function(t){t[t.LoadPatcher=0]="LoadPatcher",t[t.ScheduleEvent=1]="ScheduleEvent",t[t.TransferBuffer=2]="TransferBuffer",t[t.ReleaseBuffer=3]="ReleaseBuffer",t[t.SetPreset=4]="SetPreset",t[t.GetPreset=5]="GetPreset"}(m||(m={})),function(t){t[t.LoadPatcherFinished=1e3]="LoadPatcherFinished",t[t.OutgoingEvent=1002]="OutgoingEvent",t[t.ReleasedBuffer=1003]="ReleasedBuffer",t[t.TransferBufferFinished=1004]="TransferBufferFinished",t[t.GetPresetResponse=1005]="GetPresetResponse"}(v||(v={}));class D extends AudioWorkletProcessor{constructor(r){super(r),this.P=128,this.T=r=>{switch(r.data[0]){case m.LoadPatcher:rnbo_module().then((t=>{this.C=new y(this,t),this.port.postMessage([v.LoadPatcherFinished])}));break;case m.ScheduleEvent:const i=r.data[1];this.C.scheduleEvent(i);break;case m.TransferBuffer:{const i=r.data[1],s=(r=>{switch(r.type){case t.Float32Audio:return new n(r.channels,r.sampleRate);case t.TypedArray:return new e;default:throw new Error(`Unable to deserialize RNBODataDesc of type ${r.type}`)}})(i.typeDesc);this.C.setExternalData(i.memoryId,i.data,s),this.port.postMessage([v.TransferBufferFinished,{memoryId:i.memoryId}]);break}case m.ReleaseBuffer:{const t=r.data[1],[e,n]=this.C.releaseExternalData(t.memoryId);this.port.postMessage([v.ReleasedBuffer,{memoryId:t.memoryId,data:e,typeDesc:n.serialize()}],[e]);break}case m.GetPreset:{const t=JSON.parse(this.C.getPreset());this.port.postMessage([v.GetPresetResponse,{preset:t}]);break}case m.SetPreset:{const t=r.data[1];this.C.setPreset(JSON.stringify(t.preset))}}},this.port.onmessage=this.T,this.port.start()}static get parameterDescriptors(){return XXXX___RNBOPARAMDESCRIPTORS_REPLACE___XXXX}handleParameterEvent(t){this.port.postMessage([v.OutgoingEvent,new c(t.time,t.index,t.value,t.source,void 0).serialize()])}handleMidiEvent(t){const e=new h(t.time,t.port,[t.b1,t.b2,t.b3],void 0);this.port.postMessage([v.OutgoingEvent,e.serialize()])}handleMessageEvent(t){const e=new u(t.time,this.C.resolveTag(t.tag),0==t.type?t.numValue:1===t.type?this.C.retrieveArray(t.listValue):void 0,this.C.resolveTag(t.objectId));this.port.postMessage([v.OutgoingEvent,e.serialize()])}handlePresetEvent(t){const e=new f(t.time,s.Touched);this.port.postMessage([v.OutgoingEvent,e.serialize()])}process(t,e,n){let r=0,i=0;if(!this.C||!this.C.isReady())return!0;let s=0;e.length&&e[0]&&e[0].length&&e[0][0]?s=e[0][0].length:t.length&&t[0]&&t[0].length&&t[0][0]&&(s=t[0][0].length),s||(s=this.P),this.P<s&&(this.P=s),this.C.setCurrentTime(1e3*currentTime),this.C.prepareToProcess(sampleRate,s);const a=[];for(let e=0;e<t.length&&r<this.C.numIns();e++){const n=t[e];for(let t=0;t<n.length&&r<this.C.numIns()&&n[t].length>0;t++)a.push(n[t]),r++}const o=[];for(let t=0;t<e.length&&i<this.C.numOuts();t++){const n=e[t];for(let t=0;t<n.length&&i<this.C.numOuts();t++)o.push(n[t]),i++}return this.C.process(a,r,o,i,s,n),!0}}let S="XXXX---RNBOPROCESSORNAME_REPLACE---XXXX";S.startsWith("XXXX---RNBOPROCESSORNAME_REPLACE---")&&(S="RNBOProcessor"),registerProcessor(S,D)})()})();'};class D extends S{constructor({context:U,parameterNotificationSetting:V},L){super({context:U,parameterNotificationSetting:V,type:g.Worklet}),L?this.it=L.it:(this.it=new N,this.it.setPatcherDesc(q.desc),this.it.setPatcherCode(q.src[0].code)),this.Mt=L?L.node:void 0}Lt(){let U="[";const V=this.it.getNumParameters();let L=!0;for(let H=0;H<V;H++){const J=this.it.getParameterInfo(H);if(J&&J.type!==void 0&&J.type===E.ParameterTypeSignal&&J.ioType!==void 0&&J.ioType===E.IOTypeInput){const ne=J.min===void 0?0:J.min,se=J.max===void 0?1:J.max;L||(U+=", "),U+="{ name: '"+J.name+"', automationRate: 'a-rate', minValue: "+ne+", maxValue: "+se+"}",L=!1}}return U+="]",U}get node(){return this.wt(),this.Mt}setPatcher(U,V){return(0,s.mG)(this,void 0,void 0,function*(){if(!this.it)throw new Error("Attempt to set patcher on a WorkletDevice without assigning engine first.");this.vt(),yield this.it.setPatcherDesc(U),this.F.setEngine(this.it),this.it.outgoingEvent.subscribe(this.dt),this.it.prepareToProcess(this.context.sampleRate,128,!1),this.ft=V.type;const L=M[V.type];let H=this.numInputChannels,J=this.numOutputChannels;H<1&&(H=1),J<1&&(J=1);const ne=`RNBOProcessor-${(0,l.EL)()}`;let se=L.replace("XXXX---RNBOPROCESSORNAME_REPLACE---XXXX",ne).replace("XXXX___RNBOPARAMDESCRIPTORS_REPLACE___XXXX",this.Lt());switch(V.type){case"js":se=se.replace("XXXX___RNBOPATCHERDESC_REPLACE___XXXX",R.from(JSON.stringify(U),"utf-8").toString("base64")).replace("XXXX___RNBOPATCHERSRC_REPLACE___XXXX",R.from(this.Et(V),"utf-8").toString("base64"));break;case"wasm":se=this.Et(V)+`

`+se}const fe=URL.createObjectURL(new Blob([se],{type:"text/javascript"}));yield this.context.audioWorklet.addModule(fe),this.Mt=new(z())(this.context,ne,this.it.eventSubjects,{numberOfInputs:H,numberOfOutputs:1,outputChannelCount:[J]}),yield this.Mt.loadPatcher(),this.F.parameterChangeEvent.subscribe(this.gt)})}}var X=__webpack_require__(676);const O="1.2.5",G={bufferSize:1024,parameterNotificationSetting:o.EX.All};function K(Z,U){var V,L,H,J;return(0,s.mG)(this,void 0,void 0,function*(){const{context:ne,patcher:se,type:fe="auto"}=Z,xe=((L=(V=se.desc)===null||V===void 0?void 0:V.meta)===null||L===void 0?void 0:L.rnboversion)||se.desc.rnboVersion;if(xe!==O&&(console.error||console.log)(`
Warning: The patcher was exported with a RNBO version does not match the version of @rnbo/js:
@rnbo/js	v${O}
patcher		v${xe}
In order to have full compatibility and avoid unexpected behavior please ensure that you use the version of @rnbo/js that matches the version of RNBO you used to export your patcher.`.trim()),!(!((H=se.src)===null||H===void 0)&&H.length)||!Array.isArray(se.src))throw new Error("Incompatible patcher. Please export you patch with a newer, matching version of RNBO or adjust the version of @rnbo/js you are using.");if(!new Set((J=se.src)===null||J===void 0?void 0:J.map(pe=>pe.type)).has("js")&&!l.f8)throw new Error("Incompatible browser. RNBO requires WASM support in order to run your exported patch as a Device.");const he=se.src.find(pe=>l.f8&&pe.type==="wasm")||se.src.find(pe=>pe.type==="js"),_e=Object.assign({},G,Z.options);if(!ne)throw new Error("Missing argument context");if(fe===g.Worklet&&!l.I7)throw new Error("Failed to create WorkletDevice due to missing AudioWorklet support. Please use the Device.Script or 'auto' option instead");const ye=fe==="auto"?l.I7?g.Worklet:g.Script:fe;if(ye!==g.Script&&ye!==g.Worklet)throw new Error(`Unknown Device type ${ye}. Please make sure to use either 'auto' or a valid DeviceType`);let ue;if(ye===g.Script){if(U&&!(U instanceof F))throw new Error("Error: Creating a device from an existing device cannot alter the type of the device. Please make sure to use a consistent 'type' parameter.");ue=new F({bufferSize:_e.bufferSize,parameterNotificationSetting:_e.parameterNotificationSetting,context:ne},(U==null?void 0:U.sourceType)===he.type?U:void 0)}else if(ye===g.Worklet){if(U&&!(U instanceof D))throw new Error("Error: Creating a device from an existing device cannot alter the type of the device. Please make sure to use a consistent 'type' parameter.");ue=new D({context:ne,parameterNotificationSetting:_e.parameterNotificationSetting},U)}return U&&U.destroy(),ue=ue,yield ue.setPatcher(se.desc,he),ue})}})(),__webpack_exports__})()},module.exports=factory()})(rnbo_webaudio);var rnbo_webaudioExports=rnbo_webaudio.exports;const dummy=new Oscillator({volume:-1/0,frequency:0,type:"sine1"}).start();class RNBODevice{constructor(){or(this,"defaults",{});or(this,"input");or(this,"output");or(this,"device");or(this,"ready",!1);or(this,"context",context.rawContext._nativeAudioContext||context.rawContext._context);or(this,"params");or(this,"patcher",null);or(this,"state",{last:60});this.input=new Gain(1),this.output=new Gain(1),dummy.connect(this.output),dummy.connect(this.input)}async initDevice(){var r;return(r=this.patcher)==null?void 0:r.then(n=>rnbo_webaudioExports.createDevice({context:this.context,patcher:n}).then(t=>{this.device=t,t.node.connect(this.output._gainNode._nativeAudioNode),this.input._gainNode._nativeAudioNode.connect(t.node),this.ready=!0}))}messageDevice(r,n,t){const a=new rnbo_webaudioExports.MessageEvent(t*1e3-10,r,[n]);this.device.scheduleEvent(a)}connect(r){this.output.connect(r)}disconnect(){this.output.disconnect()}setParams(r,n){Object.entries(r).filter(([t,a])=>this.params.includes(t)).forEach(([t,a])=>{t!=="i"&&this.state[t]===a||(this.state[t]=a,this[t]&&this[t](a,n))})}mutate(r={},n,t=100){if(!this.ready)return;const{nudge:a}=r,l=Object.entries(r).reduce((o,[c,i])=>({...o,[`_${c}`]:i}),{});this.setParams(l,n),this.messageDevice("mutate",t,n+(a||0)/1e3)}}class BaseSynth extends RNBODevice{constructor(){super();or(this,"defaults",{dur:1e3,n:60,pan:.5,vol:1,amp:1,hold:0,a:10,d:100,s:.8,r:500,moda:10,modd:100,mods:.8,modr:500,fila:10,fild:100,fils:.8,filr:500,res:0,cutoff:2e4,detune:0});this.dur=this.dur.bind(this),this.n=this.n.bind(this),this._n=this._n.bind(this),this.pan=this.pan.bind(this),this._pan=this._pan.bind(this),this.vol=this.vol.bind(this),this._vol=this._vol.bind(this),this.amp=this.amp.bind(this),this._amp=this._amp.bind(this),this.hold=this.hold.bind(this),this.a=this.a.bind(this),this.acurve=this.acurve.bind(this),this.d=this.d.bind(this),this.dcurve=this.dcurve.bind(this),this.s=this.s.bind(this),this.r=this.r.bind(this),this.rcurve=this.rcurve.bind(this),this.moda=this.moda.bind(this),this.modacurve=this.modacurve.bind(this),this.modd=this.modd.bind(this),this.moddcurve=this.moddcurve.bind(this),this.mods=this.mods.bind(this),this.modr=this.modr.bind(this),this.modrcurve=this.modrcurve.bind(this),this.fila=this.fila.bind(this),this.filacurve=this.filacurve.bind(this),this.fild=this.fild.bind(this),this.fildcurve=this.fildcurve.bind(this),this.fils=this.fils.bind(this),this.filr=this.filr.bind(this),this.filrcurve=this.filrcurve.bind(this),this.res=this.res.bind(this),this._res=this._res.bind(this),this.cutoff=this.cutoff.bind(this),this._cutoff=this._cutoff.bind(this),this.detune=this.detune.bind(this),this._detune=this._detune.bind(this)}play(n={},t){if(!this.ready)return;const a={...this.defaults,...n},{n:l,amp:o,nudge:c}=a;this.setParams(a,t);const i=new rnbo_webaudioExports.MIDIEvent(t*1e3+(c||0),0,[144,l||60,o*127]);this.device.scheduleEvent(i)}release(n,t){if(!this.ready)return;const a=new rnbo_webaudioExports.MIDIEvent(t*1e3+10,0,[128,n,0]);this.device.scheduleEvent(a)}cut(n,t=5){this.ready&&this.messageDevice("cut",t,n)}dur(n=1e3,t){this.messageDevice("dur",n,t)}n(n=60,t){this.messageDevice("n",n,t)}_n(n=60,t){this.messageDevice("_n",n,t)}nudge(n=0,t){}pan(n=.5,t){this.messageDevice("pan",n,t)}_pan(n=.5,t){this.messageDevice("_pan",n,t)}amp(n=1,t){this.messageDevice("amp",n,t)}_amp(n=1,t){this.messageDevice("_amp",n,t)}vol(n=1,t){this.messageDevice("vol",n,t)}_vol(n=1,t){this.messageDevice("_vol",n,t)}hold(n,t){this.messageDevice("hold",n,t)}a(n=10,t){this.messageDevice("a",n,t)}d(n=100,t){this.messageDevice("d",n,t)}s(n=.5,t){this.messageDevice("s",n,t)}r(n=1e3,t){this.messageDevice("r",n,t)}acurve(n,t){this.messageDevice("acurve",n,t)}dcurve(n,t){this.messageDevice("dcurve",n,t)}rcurve(n,t){this.messageDevice("rcurve",n,t)}moda(n=10,t){this.messageDevice("moda",n,t)}modd(n=100,t){this.messageDevice("modd",n,t)}mods(n=.8,t){this.messageDevice("mods",n,t)}modr(n=1e3,t){this.messageDevice("modr",n,t)}modacurve(n,t){this.messageDevice("modacurve",n,t)}moddcurve(n,t){this.messageDevice("moddcurve",n,t)}modrcurve(n,t){this.messageDevice("modrcurve",n,t)}fila(n=10,t){this.messageDevice("fila",n,t)}fild(n=100,t){this.messageDevice("fild",n,t)}fils(n=.8,t){this.messageDevice("fils",n,t)}filr(n=1e3,t){this.messageDevice("filr",n,t)}filacurve(n,t){this.messageDevice("filacurve",n,t)}fildcurve(n,t){this.messageDevice("fildcurve",n,t)}filrcurve(n,t){this.messageDevice("filrcurve",n,t)}res(n=0,t){this.messageDevice("res",n,t)}_res(n=0,t){this.messageDevice("_res",n,t)}cutoff(n=2e4,t){this.messageDevice("cutoff",n,t)}_cutoff(n=2e4,t){this.messageDevice("_cutoff",n,t)}detune(n=0,t){this.messageDevice("detune",n,t)}_detune(n=0,t){this.messageDevice("_detune",n,t)}}fetch(new URL(""+new URL("../assets/synth.export.bf528032.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/synth-lite.export.29519492.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/synth-gen.export.562f0fb5.json",import.meta.url).href,self.location)).then(s=>s.json());const patcher$4=fetch(new URL(""+new URL("../assets/superfm.export.27e59195.json",import.meta.url).href,self.location)).then(s=>s.json());class Synth extends BaseSynth{constructor(){super(),this.defaults={...this.defaults,a:10,d:100,s:.8,r:125,op1ratio:1,op1gain:1,op1fb:0,op2a:10,op2d:100,op2s:.8,op2r:1e3,op2ratio:1,op2gain:1,op2fb:0,op3a:10,op3d:100,op3s:.8,op3r:1e3,op3ratio:1,op3gain:1,op3fb:0},this.patcher=patcher$4,this.initDevice(),this.op1ratio=this.op1ratio.bind(this),this._op1ratio=this._op1ratio.bind(this),this.op1gain=this.op1gain.bind(this),this._op1gain=this._op1gain.bind(this),this.op1fb=this.op1fb.bind(this),this._op1fb=this._op1fb.bind(this),this.op2a=this.op2a.bind(this),this.op2d=this.op2d.bind(this),this.op2s=this.op2s.bind(this),this.op2r=this.op2r.bind(this),this.op2ratio=this.op2ratio.bind(this),this._op2ratio=this._op2ratio.bind(this),this.op2gain=this.op2gain.bind(this),this._op2gain=this._op2gain.bind(this),this.op2fb=this.op2fb.bind(this),this._op2fb=this._op2fb.bind(this),this.op3a=this.op3a.bind(this),this.op3d=this.op3d.bind(this),this.op3s=this.op3s.bind(this),this.op3r=this.op3r.bind(this),this.op3ratio=this.op3ratio.bind(this),this._op3ratio=this._op3ratio.bind(this),this.op3gain=this.op3gain.bind(this),this._op3gain=this._op3gain.bind(this),this.op3fb=this.op3fb.bind(this),this._op3fb=this._op3fb.bind(this),this.params=Object.getOwnPropertyNames(this)}op1ratio(r=0,n){this.messageDevice("op1ratio",r,n)}_op1ratio(r=0,n){this.messageDevice("_op1ratio",r,n)}op1gain(r=0,n){this.messageDevice("op1gain",r,n)}_op1gain(r=0,n){this.messageDevice("_op1gain",r,n)}op1fb(r=0,n){this.messageDevice("op1fb",r,n)}_op1fb(r=0,n){this.messageDevice("_op1fb",r,n)}op2a(r=0,n){this.messageDevice("op2a",r,n)}op2d(r=0,n){this.messageDevice("op2d",r,n)}op2s(r=0,n){this.messageDevice("op2s",r,n)}op2r(r=0,n){this.messageDevice("op2r",r,n)}op2ratio(r=0,n){this.messageDevice("op2ratio",r,n)}_op2ratio(r=0,n){this.messageDevice("_op2ratio",r,n)}op2gain(r=0,n){this.messageDevice("op2gain",r,n)}_op2gain(r=0,n){this.messageDevice("_op2gain",r,n)}op2fb(r=0,n){this.messageDevice("op2fb",r,n)}_op2fb(r=0,n){this.messageDevice("_op2fb",r,n)}op3a(r=0,n){this.messageDevice("op3a",r,n)}op3d(r=0,n){this.messageDevice("op3d",r,n)}op3s(r=0,n){this.messageDevice("op3s",r,n)}op3r(r=0,n){this.messageDevice("op3r",r,n)}op3ratio(r=0,n){this.messageDevice("op3ratio",r,n)}_op3ratio(r=0,n){this.messageDevice("_op3ratio",r,n)}op3gain(r=0,n){this.messageDevice("op3gain",r,n)}_op3gain(r=0,n){this.messageDevice("_op3gain",r,n)}op3fb(r=0,n){this.messageDevice("op3fb",r,n)}_op3fb(r=0,n){this.messageDevice("_op3fb",r,n)}}const samples={};class BaseSamplingDevice extends BaseSynth{constructor(){super();or(this,"nextBuffer",0);or(this,"banks",{});or(this,"currentBank","");or(this,"buffers",{});this.bank=this.bank.bind(this),this.i=this.i.bind(this)}async bank(n){this.currentBank=n}async loadSample(n,t){const a=this.banks[n][t],l=Object.values(this.buffers).indexOf(a);if(l<0){const o=`${n}-${t}`,c=samples[o]||await fetch(a).then(f=>f.arrayBuffer()).then(f=>this.context.decodeAudioData(f)).catch(f=>console.log(f)),i=`b${this.nextBuffer}`;this.device.setDataBuffer(i,c),this.buffers[i]=a,samples[o]=c,this.nextBuffer=(this.nextBuffer+1)%32}return l}async i(n,t){if(!this.currentBank)return;const a=n%this.banks[this.currentBank].length,l=await this.loadSample(this.currentBank,a);this.messageDevice("i",l,t)}}const patcher$3=fetch(new URL(""+new URL("../assets/sampler.export.595d99a2.json",import.meta.url).href,self.location)).then(s=>s.json());class Sampler extends BaseSamplingDevice{constructor(){super(),this.defaults={...this.defaults,i:0,snap:0,rate:1,a:5,d:10,s:1,r:100,bpm:120,begin:0,end:1,loop:0,oneshot:0,loopsize:1},this.patcher=patcher$3,this.initDevice(),this.snap=this.snap.bind(this),this.rate=this.rate.bind(this),this._rate=this._rate.bind(this),this.begin=this.begin.bind(this),this.end=this.end.bind(this),this.loop=this.loop.bind(this),this.loopsize=this.loopsize.bind(this),this._loopsize=this._loopsize.bind(this),this.oneshot=this.oneshot.bind(this),this.bpm=this.bpm.bind(this),this.params=Object.getOwnPropertyNames(this)}snap(r=0,n){this.messageDevice("snap",r,n)}rate(r=1,n){this.messageDevice("rate",r,n)}_rate(r=1,n){this.messageDevice("_rate",r,n)}begin(r=0,n){this.messageDevice("begin",r,n)}end(r=1,n){this.messageDevice("end",r,n)}loop(r=0,n){this.messageDevice("loop",r,n)}loopsize(r=1,n){this.messageDevice("loopsize",r,n)}_loopsize(r=1,n){this.messageDevice("_loopsize",r,n)}oneshot(r=0,n){this.messageDevice("oneshot",r,n)}bpm(r=120,n){this.messageDevice("bpm",r,n)}}const patcher$2=fetch(new URL(""+new URL("../assets/granular.export.22794cb4.json",import.meta.url).href,self.location)).then(s=>s.json());class Granular extends BaseSamplingDevice{constructor(){super(),this.defaults={...this.defaults,i:0,snap:0,rate:1,a:0,d:10,s:1,r:100,bpm:60,grainrate:16,grainsize:.125,grainslope:.01,grainpan:.2,direction:1,begin:0,end:1},this.patcher=patcher$2,this.initDevice(),this.snap=this.snap.bind(this),this.rate=this.rate.bind(this),this._rate=this._rate.bind(this),this.grainrate=this.grainrate.bind(this),this._grainrate=this._grainrate.bind(this),this.grainsize=this.grainsize.bind(this),this._grainsize=this._grainsize.bind(this),this.grainslope=this.grainslope.bind(this),this._grainslope=this._grainslope.bind(this),this.grainpan=this.grainpan.bind(this),this._grainpan=this._grainpan.bind(this),this.direction=this.direction.bind(this),this._direction=this._direction.bind(this),this.begin=this.begin.bind(this),this.end=this.end.bind(this),this.loop=this.loop.bind(this),this.bpm=this.bpm.bind(this),this.params=Object.getOwnPropertyNames(this)}snap(r=0,n){this.messageDevice("snap",r,n)}rate(r=1,n){this.messageDevice("rate",r,n)}_rate(r=1,n){this.messageDevice("_rate",r,n)}grainrate(r=16,n){this.messageDevice("grainrate",r,n)}_grainrate(r=16,n){this.messageDevice("_grainrate",r,n)}grainsize(r=.125,n){this.messageDevice("grainsize",r,n)}_grainsize(r=.125,n){this.messageDevice("_grainsize",r,n)}grainslope(r=.01,n){this.messageDevice("grainslope",r,n)}_grainslope(r=.01,n){this.messageDevice("_grainslope",r,n)}grainpan(r=.2,n){this.messageDevice("grainpan",r,n)}_grainpan(r=.2,n){this.messageDevice("_grainpan",r,n)}direction(r=1,n){this.messageDevice("direction",r,n)}_direction(r=1,n){this.messageDevice("_direction",r,n)}begin(r=0,n){this.messageDevice("begin",r,n)}end(r=1,n){this.messageDevice("end",r,n)}loop(r=0,n){this.messageDevice("loop",r,n)}bpm(r=120,n){this.messageDevice("bpm",r,n)}}fetch(new URL(""+new URL("../assets/additive.export.a0581da3.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/acid.export.a0c8e199.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/drone.export.6a7fa125.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/sub.export.6fba58bd.json",import.meta.url).href,self.location)).then(s=>s.json());const patcher$1=fetch(new URL(""+new URL("../assets/wavetable.export.4e74a402.json",import.meta.url).href,self.location)).then(s=>s.json());class Wavetable extends BaseSamplingDevice{constructor(){super(),this.defaults={...this.defaults,dur:1e3,tablesize:256,rows:16,xlfo:.02,ylfo:.3},this.patcher=patcher$1,this.initDevice(),this.tablesize=this.tablesize.bind(this),this.rows=this.rows.bind(this),this.xlfo=this.xlfo.bind(this),this._xlfo=this._xlfo.bind(this),this.ylfo=this.ylfo.bind(this),this._ylfo=this._ylfo.bind(this),this.params=Object.getOwnPropertyNames(this)}tablesize(r=256,n){this.messageDevice("tablesize",r,n)}rows(r=16,n){this.messageDevice("rows",r,n)}xlfo(r=0,n){this.messageDevice("xlfo",r,n)}_xlfo(r=0,n){this.messageDevice("_xlfo",r,n)}ylfo(r=0,n){this.messageDevice("ylfo",r,n)}_ylfo(r=0,n){this.messageDevice("_ylfo",r,n)}}const patcher=fetch(new URL(""+new URL("../assets/fx.export.7977c06e.json",import.meta.url).href,self.location)).then(s=>s.json());class FXChain extends RNBODevice{constructor(){super(),this.defaults={dist:0,drive:.25,ring:0,ringf:.25,ringspread:0,ringmode:0,hicut:0,locut:0,chorus:0,chdepth:.25,chlfo:.25,chspread:.25,delay:0,dtime:500,dfb:.5,dspread:0,dcolour:.25,dfilter:0,reverb:0,rsize:.25,rdamp:.25,rdiff:.25,rjitter:0,rdecay:.25,gain:1,lthresh:1},this.patcher=patcher,this.initDevice(),this.dist=this.dist.bind(this),this._dist=this._dist.bind(this),this.drive=this.drive.bind(this),this._drive=this._drive.bind(this),this.ring=this.ring.bind(this),this._ring=this._ring.bind(this),this.ringf=this.ringf.bind(this),this._ringf=this._ringf.bind(this),this.ringspread=this.ringspread.bind(this),this._ringspread=this._ringspread.bind(this),this.ringmode=this.ringmode.bind(this),this._ringmode=this._ringmode.bind(this),this.hicut=this.hicut.bind(this),this._hicut=this._hicut.bind(this),this.locut=this.locut.bind(this),this._locut=this._locut.bind(this),this.chorus=this.chorus.bind(this),this._chorus=this._chorus.bind(this),this.chdepth=this.chdepth.bind(this),this._chdepth=this._chdepth.bind(this),this.chlfo=this.chlfo.bind(this),this._chlfo=this._chlfo.bind(this),this.chspread=this.chspread.bind(this),this._chspread=this._chspread.bind(this),this.delay=this.delay.bind(this),this._delay=this._delay.bind(this),this.dtime=this.dtime.bind(this),this._dtime=this._dtime.bind(this),this.dfb=this.dfb.bind(this),this._dfb=this._dfb.bind(this),this.dspread=this.dspread.bind(this),this._dspread=this._dspread.bind(this),this.dcolour=this.dcolour.bind(this),this._dcolour=this._dcolour.bind(this),this.dfilter=this.dfilter.bind(this),this._dfilter=this._dfilter.bind(this),this.reverb=this.reverb.bind(this),this._reverb=this._reverb.bind(this),this.rsize=this.rsize.bind(this),this._rsize=this._rsize.bind(this),this.rdamp=this.rdamp.bind(this),this._rdamp=this._rdamp.bind(this),this.rdiff=this.rdiff.bind(this),this._rdiff=this._rdiff.bind(this),this.rjitter=this.rjitter.bind(this),this._rjitter=this._rjitter.bind(this),this.rdecay=this.rdecay.bind(this),this._rdecay=this._rdecay.bind(this),this.gain=this.gain.bind(this),this._gain=this._gain.bind(this),this.lthresh=this.lthresh.bind(this),this._lthresh=this._lthresh.bind(this),this.params=Object.getOwnPropertyNames(this)}set(r={},n){if(!this.ready)return;const t={...this.defaults,...r};this.setParams(t,n);const a=new rnbo_webaudioExports.MIDIEvent(n*1e3,0,[144,60,127]);this.device.scheduleEvent(a)}dist(r=0,n){this.messageDevice("dist",r,n)}_dist(r=0,n){this.messageDevice("_dist",r,n)}drive(r=.5,n){this.messageDevice("drive",r,n)}_drive(r=.5,n){this.messageDevice("_drive",r,n)}ring(r=0,n){this.messageDevice("ring",r,n)}_ring(r=0,n){this.messageDevice("_ring",r,n)}ringf(r=.25,n){this.messageDevice("ringf",r,n)}_ringf(r=.25,n){this.messageDevice("_ringf",r,n)}ringspread(r=0,n){this.messageDevice("ringspread",r,n)}_ringspread(r=0,n){this.messageDevice("_ringspread",r,n)}ringmode(r=0,n){this.messageDevice("ringmode",r,n)}_ringmode(r=0,n){this.messageDevice("_ringmode",r,n)}chorus(r=0,n){this.messageDevice("chorus",r,n)}_chorus(r=0,n){this.messageDevice("_chorus",r,n)}chdepth(r=.25,n){this.messageDevice("chdepth",r,n)}_chdepth(r=.25,n){this.messageDevice("_chdepth",r,n)}chlfo(r=.25,n){this.messageDevice("chlfo",r,n)}_chlfo(r=.25,n){this.messageDevice("_chlfo",r,n)}chspread(r=.25,n){this.messageDevice("chspread",r,n)}_chspread(r=.25,n){this.messageDevice("_chspread",r,n)}hicut(r=0,n){this.messageDevice("hicut",r,n)}_hicut(r=0,n){this.messageDevice("_hicut",r,n)}locut(r=0,n){this.messageDevice("locut",r,n)}_locut(r=0,n){this.messageDevice("_locut",r,n)}delay(r=0,n){this.messageDevice("delay",r,n)}_delay(r=0,n){this.messageDevice("_delay",r,n)}dtime(r=500,n){this.messageDevice("dtime",r,n)}_dtime(r=500,n){this.messageDevice("_dtime",r,n)}dfb(r=.5,n){this.messageDevice("dfb",r,n)}_dfb(r=.5,n){this.messageDevice("_dfb",r,n)}dspread(r=0,n){this.messageDevice("dspread",r,n)}_dspread(r=0,n){this.messageDevice("_dspread",r,n)}dcolour(r=.25,n){this.messageDevice("dcolour",r,n)}_dcolour(r=.25,n){this.messageDevice("_dcolour",r,n)}dfilter(r=0,n){this.messageDevice("dfilter",r,n)}_dfilter(r=0,n){this.messageDevice("_dfilter",r,n)}reverb(r=0,n){this.messageDevice("reverb",r,n)}_reverb(r=0,n){this.messageDevice("_reverb",r,n)}rsize(r=.25,n){this.messageDevice("rsize",r,n)}_rsize(r=.25,n){this.messageDevice("_rsize",r,n)}rdamp(r=.25,n){this.messageDevice("rdamp",r,n)}_rdamp(r=.25,n){this.messageDevice("_rdamp",r,n)}rdiff(r=.25,n){this.messageDevice("rdiff",r,n)}_rdiff(r=.25,n){this.messageDevice("_rdiff",r,n)}rjitter(r=0,n){this.messageDevice("rjitter",r,n)}_rjitter(r=0,n){this.messageDevice("_rjitter",r,n)}rdecay(r=.25,n){this.messageDevice("rdecay",r,n)}_rdecay(r=.25,n){this.messageDevice("_rdecay",r,n)}gain(r=1,n){this.messageDevice("gain",r,n)}_gain(r=1,n){this.messageDevice("_gain",r,n)}lthresh(r=1,n){this.messageDevice("lthresh",r,n)}_lthresh(r=1,n){this.messageDevice("_lthresh",r,n)}}fetch(new URL(""+new URL("../assets/fx-channel.export.ba7289dd.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/fx-reverb.export.799a4f40.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/fx-delay.export.9ce6e69c.json",import.meta.url).href,self.location)).then(s=>s.json());fetch(new URL(""+new URL("../assets/reverb-gen.export.83d0610a.json",import.meta.url).href,self.location)).then(s=>s.json());const CtSuperFM=Synth,CtSampler=Sampler,CtGranulator=Granular,CtFXChain=FXChain,CtWavetable=Wavetable;async function startAudio(){await start(),console.log("started audio"),window.removeEventListener("keydown",startAudio),window.removeEventListener("click",startAudio),window.removeEventListener("touchstart",startAudio)}const output=new Gain(1).toDestination();volume.subscribe(s=>{output.gain.value=s});const limiter=new Limiter(-10).connect(output),fx=new CtFXChain;fx.connect(limiter);const crush=new BitCrusher({bits:4,wet:0}).connect(fx.input),synth=new CtSuperFM;synth.connect(crush);const sampler=new CtSampler;sampler.banks={default:get_store_value(samples$1)};sampler.bank("default");sampler.connect(crush);const granular=new CtGranulator;granular.banks={default:get_store_value(samples$1)};granular.bank("default");granular.connect(crush);const wavetable=new CtWavetable;wavetable.banks={default:get_store_value(samples$1)};wavetable.bank("default");wavetable.connect(crush);samples$1.subscribe(s=>[sampler,granular,wavetable].forEach(r=>{r.banks={default:s}}));const instruments={synth,sampler,granular,wavetable},handleEvent=s=>{var o,c;if(get_store_value(mute))return;const{inst:r,n,semitone:t,octave:a}=s,l=t+a*12;get_store_value(drone)&&r==="synth"&&((o=instruments[r])==null||o.cut(immediate())),(c=instruments[r])==null||c.play({...s,n,detune:l},immediate()+.01),fx.set(s,immediate()),crush.wet.value=s.crush,crush.set({bits:mapToStepRange(s.crush,0,1,16,4,1)})},handleNoteOff=(s,r)=>{var n;!get_store_value(drone)&&((n=instruments[s])==null||n.release(r,immediate()))},cut=()=>{var r,n,t,a;const s=get_store_value(envelopeValues).r;(r=instruments.synth)==null||r.cut(immediate(),s),(n=instruments.sampler)==null||n.cut(immediate(),s),(t=instruments.granular)==null||t.cut(immediate(),s),(a=instruments.wavetable)==null||a.cut(immediate(),s)},handleMutation=s=>{var l;const{inst:r,semitone:n,octave:t}=s,a=n+t*12;(l=instruments[r])==null||l.mutate({...s,detune:a},immediate()),fx.mutate(s,immediate()),crush.wet.value=s.crush,crush.set({bits:mapToStepRange(s.crush,0,1,16,4,1)})},loadSample=s=>{Object.values(instruments).map(r=>r.loadSample&&r.loadSample("default",s))};synthValues.subscribe(throttle(s=>handleMutation(s),100));drone.subscribe(s=>(!s&&cut(),s));const showTooltips=derived(menuItems,s=>{var r;return((r=s.find(n=>n.name==="tooltips"))==null?void 0:r.isActive)||!1}),tooltips=writable$1([{element:"op1fb",message:"Operator 1 feedback"},{element:"op2ratio",message:"Operator 1 harmonicity ratio"},{element:"op2gain",message:"Operator 2 gain"},{element:"op2fb",message:"Operator 2 feedback"},{element:"op3ratio",message:"Operator 3 harmonicity ratio"},{element:"op3gain",message:"Operator 3 gain"},{element:"op3fb",message:"Operator 3 feedback"},{element:"semitone",message:"Transpose by semitone"},{element:"octave",message:"Transpose by octave"},{element:"vol",message:"Adjust volume of instrument"},{element:"pan",message:"Adjust stereo panning"},{element:"reverb",message:"Reverb wet/dry amount"},{element:"rsize",message:"Reverb room size"},{element:"delay",message:"Delay wet/dry amount"},{element:"dtime",message:"Delay time"},{element:"dcolour",message:"Delay filter colour"},{element:"dfb",message:"Delay feedback"},{element:"chorus",message:"Chorus wet/dry amount"},{element:"chdepth",message:"Chorus LFO depth"},{element:"dist",message:"Distortion amount"},{element:"crush",message:"Bitcrusher amount"},{element:"hicut",message:"High cut filter frequency"},{element:"locut",message:"Low cut filter frequency"},{element:"measure",message:"Run the circuit and collapse the qubits"},{element:"drone",message:"Sustain notes"},{element:"vol",message:"Adjust global volume"},{element:"env-1-a",message:"Envelope 1 attack"},{element:"env-1-d",message:"Envelope 1 decay"},{element:"env-1-s",message:"Envelope 1 sustain"},{element:"env-1-r",message:"Envelope 1 release"},{element:"env-2-a",message:"Envelope 2 attack. Used for FM modulation envelope"},{element:"env-2-d",message:"Envelope 2 decay. Used for FM modulation envelope"},{element:"env-2-s",message:"Envelope 2 sustain. Used for FM modulation envelope"},{element:"env-2-r",message:"Envelope 2 release. Used for FM modulation envelope"},{element:"learn",message:"MIDI learn mode. Turn on and select an outlined element. Move a control on an active MIDI device to map the element to the control. Current mappings are listed in the MIDI side menu"},{element:"randomise-patching",message:"Randomise patching"}]),Tooltip_svelte_svelte_type_style_lang="";function create_else_block$5(s){let r;const n=s[7].default,t=create_slot(n,s,s[6],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,l){t&&t.m(a,l),r=!0},p(a,l){t&&t.p&&(!r||l&64)&&update_slot_base(t,n,a,a[6],r?get_slot_changes(n,a[6],l,null):get_all_dirty_from_scope(a[6]),null)},i(a){r||(transition_in(t,a),r=!0)},o(a){transition_out(t,a),r=!1},d(a){t&&t.d(a)}}}function create_if_block$d(s){let r,n,t,a,l,o,c,i,f,m;const _=s[7].default,u=create_slot(_,s,s[6],null);return{c(){r=element("div"),n=element("div"),t=text(s[5]),l=space(),o=element("div"),u&&u.c(),this.h()},l(p){r=claim_element(p,"DIV",{class:!0});var g=children(r);n=claim_element(g,"DIV",{class:!0});var y=children(n);t=claim_text(y,s[5]),y.forEach(detach),l=claim_space(g),o=claim_element(g,"DIV",{class:!0});var S=children(o);u&&u.l(S),S.forEach(detach),g.forEach(detach),this.h()},h(){attr(n,"class",a="tooltip tooltip--"+s[0]+" "+(s[3]===s[0]?"tooltip--show":"")+" "+s[1]+" svelte-1ozvjjf"),attr(o,"class",c=(s[2]!=="knob"?"tooltip-element":"")+" tooltip-element--"+s[2]+" tooltip-element--"+s[0]+" svelte-1ozvjjf"),attr(r,"class","tooltip-container svelte-1ozvjjf")},m(p,g){insert_hydration(p,r,g),append_hydration(r,n),append_hydration(n,t),append_hydration(r,l),append_hydration(r,o),u&&u.m(o,null),i=!0,f||(m=[listen$1(o,"mouseenter",s[8]),listen$1(o,"mouseleave",s[9])],f=!0)},p(p,g){(!i||g&11&&a!==(a="tooltip tooltip--"+p[0]+" "+(p[3]===p[0]?"tooltip--show":"")+" "+p[1]+" svelte-1ozvjjf"))&&attr(n,"class",a),u&&u.p&&(!i||g&64)&&update_slot_base(u,_,p,p[6],i?get_slot_changes(_,p[6],g,null):get_all_dirty_from_scope(p[6]),null),(!i||g&5&&c!==(c=(p[2]!=="knob"?"tooltip-element":"")+" tooltip-element--"+p[2]+" tooltip-element--"+p[0]+" svelte-1ozvjjf"))&&attr(o,"class",c)},i(p){i||(transition_in(u,p),i=!0)},o(p){transition_out(u,p),i=!1},d(p){p&&detach(r),u&&u.d(p),f=!1,run_all(m)}}}function create_fragment$t(s){let r,n,t,a;const l=[create_if_block$d,create_else_block$5],o=[];function c(i,f){return i[4]?0:1}return r=c(s),n=o[r]=l[r](s),{c(){n.c(),t=empty()},l(i){n.l(i),t=empty()},m(i,f){o[r].m(i,f),insert_hydration(i,t,f),a=!0},p(i,[f]){let m=r;r=c(i),r===m?o[r].p(i,f):(group_outros(),transition_out(o[m],1,1,()=>{o[m]=null}),check_outros(),n=o[r],n?n.p(i,f):(n=o[r]=l[r](i),n.c()),transition_in(n,1),n.m(t.parentNode,t))},i(i){a||(transition_in(n),a=!0)},o(i){transition_out(n),a=!1},d(i){o[r].d(i),i&&detach(t)}}}function instance$r(s,r,n){var g;let t,a;component_subscribe(s,tooltips,y=>n(10,t=y)),component_subscribe(s,showTooltips,y=>n(4,a=y));let{$$slots:l={},$$scope:o}=r,{element:c=""}=r,{classes:i=""}=r,{type:f=""}=r,m=((g=t.find(y=>y.element.toLowerCase()===c.toLowerCase()))==null?void 0:g.message)||"",_=null;const u=()=>n(3,_=c),p=()=>n(3,_=null);return s.$$set=y=>{"element"in y&&n(0,c=y.element),"classes"in y&&n(1,i=y.classes),"type"in y&&n(2,f=y.type),"$$scope"in y&&n(6,o=y.$$scope)},[c,i,f,_,a,m,o,l,u,p]}class Tooltip extends SvelteComponent{constructor(r){super(),init(this,r,instance$r,create_fragment$t,safe_not_equal,{element:0,classes:1,type:2})}}const RangeSlider_svelte_svelte_type_style_lang="";function create_default_slot_1$5(s){let r,n=s[0].toLocaleString("fullwide",{maximumFractionDigits:2})+"",t,a;return{c(){r=element("span"),t=text(n),a=text(s[6]),this.h()},l(l){r=claim_element(l,"SPAN",{class:!0});var o=children(r);t=claim_text(o,n),a=claim_text(o,s[6]),o.forEach(detach),this.h()},h(){attr(r,"class"," svelte-1v4qbr1")},m(l,o){insert_hydration(l,r,o),append_hydration(r,t),append_hydration(r,a)},p(l,o){o&1&&n!==(n=l[0].toLocaleString("fullwide",{maximumFractionDigits:2})+"")&&set_data(t,n),o&64&&set_data(a,l[6])},d(l){l&&detach(r)}}}function create_default_slot$8(s){let r,n=s[1].toLocaleString("fullwide",{maximumFractionDigits:2})+"",t,a;return{c(){r=element("span"),t=text(n),a=text(s[6]),this.h()},l(l){r=claim_element(l,"SPAN",{class:!0});var o=children(r);t=claim_text(o,n),a=claim_text(o,s[6]),o.forEach(detach),this.h()},h(){attr(r,"class"," svelte-1v4qbr1")},m(l,o){insert_hydration(l,r,o),append_hydration(r,t),append_hydration(r,a)},p(l,o){o&2&&n!==(n=l[1].toLocaleString("fullwide",{maximumFractionDigits:2})+"")&&set_data(t,n),o&64&&set_data(a,l[6])},d(l){l&&detach(r)}}}function create_fragment$s(s){let r,n,t,a,l,o,c,i,f,m,_,u,p,g;return n=new Learnable({props:{id:`${s[2]}-rangeA`,$$slots:{default:[create_default_slot_1$5]},$$scope:{ctx:s}}}),_=new Learnable({props:{id:`${s[2]}-rangeB`,$$slots:{default:[create_default_slot$8]},$$scope:{ctx:s}}}),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),a=element("div"),l=element("input"),o=space(),c=element("input"),i=space(),f=element("input"),m=space(),create_component(_.$$.fragment),this.h()},l(y){r=claim_element(y,"DIV",{class:!0});var S=children(r);claim_component(n.$$.fragment,S),t=claim_space(S),a=claim_element(S,"DIV",{class:!0});var b=children(a);l=claim_element(b,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),o=claim_space(b),c=claim_element(b,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),i=claim_space(b),f=claim_element(b,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),b.forEach(detach),m=claim_space(S),claim_component(_.$$.fragment,S),S.forEach(detach),this.h()},h(){attr(l,"class","min svelte-1v4qbr1"),attr(l,"type","range"),attr(l,"min",s[3]),attr(l,"max",s[4]),attr(l,"step",s[5]),attr(c,"class","track svelte-1v4qbr1"),attr(c,"type","range"),attr(c,"min",s[3]),attr(c,"max",s[4]),attr(c,"step",s[5]),c.value=s[7],c.disabled=!0,attr(f,"class","max svelte-1v4qbr1"),attr(f,"type","range"),attr(f,"min",s[3]),attr(f,"max",s[4]),attr(f,"step",s[5]),attr(a,"class","slider svelte-1v4qbr1"),attr(r,"class","range-slider svelte-1v4qbr1")},m(y,S){insert_hydration(y,r,S),mount_component(n,r,null),append_hydration(r,t),append_hydration(r,a),append_hydration(a,l),set_input_value(l,s[0]),append_hydration(a,o),append_hydration(a,c),append_hydration(a,i),append_hydration(a,f),set_input_value(f,s[1]),append_hydration(r,m),mount_component(_,r,null),u=!0,p||(g=[listen$1(l,"change",s[8]),listen$1(l,"input",s[8]),listen$1(f,"change",s[9]),listen$1(f,"input",s[9])],p=!0)},p(y,[S]){const b={};S&4&&(b.id=`${y[2]}-rangeA`),S&1089&&(b.$$scope={dirty:S,ctx:y}),n.$set(b),(!u||S&8)&&attr(l,"min",y[3]),(!u||S&16)&&attr(l,"max",y[4]),(!u||S&32)&&attr(l,"step",y[5]),S&1&&set_input_value(l,y[0]),(!u||S&8)&&attr(c,"min",y[3]),(!u||S&16)&&attr(c,"max",y[4]),(!u||S&32)&&attr(c,"step",y[5]),(!u||S&128)&&(c.value=y[7]),(!u||S&8)&&attr(f,"min",y[3]),(!u||S&16)&&attr(f,"max",y[4]),(!u||S&32)&&attr(f,"step",y[5]),S&2&&set_input_value(f,y[1]);const E={};S&4&&(E.id=`${y[2]}-rangeB`),S&1090&&(E.$$scope={dirty:S,ctx:y}),_.$set(E)},i(y){u||(transition_in(n.$$.fragment,y),transition_in(_.$$.fragment,y),u=!0)},o(y){transition_out(n.$$.fragment,y),transition_out(_.$$.fragment,y),u=!1},d(y){y&&detach(r),destroy_component(n),destroy_component(_),p=!1,run_all(g)}}}function instance$q(s,r,n){let{id:t=""}=r,{min:a=0}=r,{max:l=1}=r,{step:o=.01}=r,{units:c="%"}=r,{rangeA:i=0}=r,{rangeB:f=1}=r,{value:m=.5}=r;function _(){i=to_number(this.value),n(0,i)}function u(){f=to_number(this.value),n(1,f)}return s.$$set=p=>{"id"in p&&n(2,t=p.id),"min"in p&&n(3,a=p.min),"max"in p&&n(4,l=p.max),"step"in p&&n(5,o=p.step),"units"in p&&n(6,c=p.units),"rangeA"in p&&n(0,i=p.rangeA),"rangeB"in p&&n(1,f=p.rangeB),"value"in p&&n(7,m=p.value)},[i,f,t,a,l,o,c,m,_,u]}class RangeSlider extends SvelteComponent{constructor(r){super(),init(this,r,instance$q,create_fragment$s,safe_not_equal,{id:2,min:3,max:4,step:5,units:6,rangeA:0,rangeB:1,value:7})}}const Cable_svelte_svelte_type_style_lang="";function get_each_context$a(s,r,n){const t=s.slice();return t[13]=r[n].x1,t[14]=r[n].y1,t[15]=r[n].x2,t[16]=r[n].y2,t}function create_each_block$a(s){let r,n,t,a,l;return{c(){r=svg_element("line"),this.h()},l(o){r=claim_svg_element(o,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),children(r).forEach(detach),this.h()},h(){attr(r,"class","cable svelte-19ckahk"),attr(r,"x1",n=s[13]),attr(r,"x2",t=s[15]),attr(r,"y1",a=s[14]),attr(r,"y2",l=s[16]),attr(r,"stroke",s[0]),attr(r,"stroke-width","2"),toggle_class(r,"cable--focused",s[1])},m(o,c){insert_hydration(o,r,c)},p(o,c){c&16&&n!==(n=o[13])&&attr(r,"x1",n),c&16&&t!==(t=o[15])&&attr(r,"x2",t),c&16&&a!==(a=o[14])&&attr(r,"y1",a),c&16&&l!==(l=o[16])&&attr(r,"y2",l),c&1&&attr(r,"stroke",o[0]),c&2&&toggle_class(r,"cable--focused",o[1])},d(o){o&&detach(r)}}}function create_fragment$r(s){let r,n,t=s[4],a=[];for(let l=0;l<t.length;l+=1)a[l]=create_each_block$a(get_each_context$a(s,t,l));return{c(){r=svg_element("svg");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){r=claim_svg_element(l,"svg",{viewBox:!0,xmlns:!0,class:!0});var o=children(r);for(let c=0;c<a.length;c+=1)a[c].l(o);o.forEach(detach),this.h()},h(){attr(r,"viewBox",n=`0 0 ${s[2]} ${s[3]}`),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(r,"class","svg svelte-19ckahk")},m(l,o){insert_hydration(l,r,o);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(r,null)},p(l,[o]){if(o&19){t=l[4];let c;for(c=0;c<t.length;c+=1){const i=get_each_context$a(l,t,c);a[c]?a[c].p(i,o):(a[c]=create_each_block$a(i),a[c].c(),a[c].m(r,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=t.length}o&12&&n!==(n=`0 0 ${l[2]} ${l[3]}`)&&attr(r,"viewBox",n)},i:noop,o:noop,d(l){l&&detach(r),destroy_each(a,l)}}}function instance$p(s,r,n){let t,a,l,o,c,{from:i={x:0,y:0}}=r,{to:f={x:0,y:0}}=r,{offset:m=2}=r,{colour:_="blue"}=r,{isFocused:u=!1}=r,p=0,g=0,y;return onMount(()=>{function S(){n(2,p=window.innerWidth),n(3,g=document.body.scrollHeight)}y=new ResizeObserver(S),y.observe(document.body),S()}),onDestroy(()=>y.disconnect()),s.$$set=S=>{"from"in S&&n(5,i=S.from),"to"in S&&n(6,f=S.to),"offset"in S&&n(7,m=S.offset),"colour"in S&&n(0,_=S.colour),"isFocused"in S&&n(1,u=S.isFocused)},s.$$.update=()=>{s.$$.dirty&160&&n(11,t={x1:i.x+3,y1:i.y,x2:i.x+43+m,y2:i.y}),s.$$.dirty&2272&&n(10,a={x1:t.x2,y1:i.y,x2:t.x2,y2:f.y+23-m}),s.$$.dirty&1088&&n(9,l={x1:a.x1,y1:a.y2,x2:f.x,y2:a.y2}),s.$$.dirty&576&&n(8,o={x1:l.x2,y1:l.y2,x2:f.x,y2:f.y}),s.$$.dirty&3840&&n(4,c=[t,a,l,o])},[_,u,p,g,c,i,f,m,o,l,a,t]}class Cable extends SvelteComponent{constructor(r){super(),init(this,r,instance$p,create_fragment$r,safe_not_equal,{from:5,to:6,offset:7,colour:0,isFocused:1})}}const Socket_svelte_svelte_type_style_lang="",{window:window_1$3}=globals;function get_each_context$9(s,r,n){const t=s.slice();return t[18]=r[n],t}function create_if_block_1$9(s){let r,n;return{c(){r=element("div"),this.h()},l(t){r=claim_element(t,"DIV",{class:!0,style:!0}),children(r).forEach(detach),this.h()},h(){var t;attr(r,"class","socket__inner svelte-1icfkf0"),attr(r,"style",n=`background-color: ${((t=s[8][s[6]])==null?void 0:t.colour)||s[4]}`)},m(t,a){insert_hydration(t,r,a)},p(t,a){var l;a&336&&n!==(n=`background-color: ${((l=t[8][t[6]])==null?void 0:l.colour)||t[4]}`)&&attr(r,"style",n)},d(t){t&&detach(r)}}}function create_if_block$c(s){let r,n;return r=new Cable({props:{colour:s[8][s[18]].colour,offset:s[8][s[18]].offset,from:{x:s[8][s[1]].x+s[8][s[1]].width/2,y:s[8][s[1]].y+s[8][s[1]].width/2},to:{x:s[8][s[18]].x+s[8][s[18]].width/2-.5,y:s[8][s[18]].y+s[8][s[18]].width/2},isFocused:s[6][0]&&+s[6][0].substring(1)===s[9]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&320&&(l.colour=t[8][t[18]].colour),a&320&&(l.offset=t[8][t[18]].offset),a&258&&(l.from={x:t[8][t[1]].x+t[8][t[1]].width/2,y:t[8][t[1]].y+t[8][t[1]].width/2}),a&320&&(l.to={x:t[8][t[18]].x+t[8][t[18]].width/2-.5,y:t[8][t[18]].y+t[8][t[18]].width/2}),a&576&&(l.isFocused=t[6][0]&&+t[6][0].substring(1)===t[9]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block$9(s,r){let n,t,a,l=r[8][r[18]]&&create_if_block$c(r);return{key:s,first:null,c(){n=empty(),l&&l.c(),t=empty(),this.h()},l(o){n=empty(),l&&l.l(o),t=empty(),this.h()},h(){this.first=n},m(o,c){insert_hydration(o,n,c),l&&l.m(o,c),insert_hydration(o,t,c),a=!0},p(o,c){r=o,r[8][r[18]]?l?(l.p(r,c),c&320&&transition_in(l,1)):(l=create_if_block$c(r),l.c(),transition_in(l,1),l.m(t.parentNode,t)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(o){a||(transition_in(l),a=!0)},o(o){transition_out(l),a=!1},d(o){o&&detach(n),l&&l.d(o),o&&detach(t)}}}function create_fragment$q(s){let r,n,t,a,l,o=[],c=new Map,i,f,m,_,u=(s[8][s[6]]||s[2]=="remote")&&create_if_block_1$9(s),p=s[6];const g=y=>y[18];for(let y=0;y<p.length;y+=1){let S=get_each_context$9(s,p,y),b=g(S);c.set(b,o[y]=create_each_block$9(b,S))}return{c(){r=element("div"),n=element("div"),u&&u.c(),l=space();for(let y=0;y<o.length;y+=1)o[y].c();this.h()},l(y){r=claim_element(y,"DIV",{class:!0});var S=children(r);n=claim_element(S,"DIV",{class:!0});var b=children(n);u&&u.l(b),b.forEach(detach),l=claim_space(S);for(let E=0;E<o.length;E+=1)o[E].l(S);S.forEach(detach),this.h()},h(){attr(n,"class",t=null_to_empty(`socket socket--${s[2]} socket--${s[1]} ${s[0]?" active":""}`)+" svelte-1icfkf0"),attr(r,"class",i=null_to_empty(`socket__container socket__container--${s[3]}`)+" svelte-1icfkf0")},m(y,S){insert_hydration(y,r,S),append_hydration(r,n),u&&u.m(n,null),s[16](n),append_hydration(r,l);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);f=!0,m||(_=[listen$1(window_1$3,"resize",s[14]),listen$1(window_1$3,"keydown",s[13]),action_destroyer(a=d.call(null,n,{bounds:"body",position:s[7]})),listen$1(n,"neodrag",s[10]),listen$1(n,"neodrag:end",s[11]),listen$1(n,"click",s[12])],m=!0)},p(y,[S]){y[8][y[6]]||y[2]=="remote"?u?u.p(y,S):(u=create_if_block_1$9(y),u.c(),u.m(n,null)):u&&(u.d(1),u=null),(!f||S&7&&t!==(t=null_to_empty(`socket socket--${y[2]} socket--${y[1]} ${y[0]?" active":""}`)+" svelte-1icfkf0"))&&attr(n,"class",t),a&&is_function(a.update)&&S&128&&a.update.call(null,{bounds:"body",position:y[7]}),S&834&&(p=y[6],group_outros(),o=update_keyed_each(o,S,g,1,y,p,c,r,outro_and_destroy_block,create_each_block$9,null,get_each_context$9),check_outros()),(!f||S&8&&i!==(i=null_to_empty(`socket__container socket__container--${y[3]}`)+" svelte-1icfkf0"))&&attr(r,"class",i)},i(y){if(!f){for(let S=0;S<p.length;S+=1)transition_in(o[S]);f=!0}},o(y){for(let S=0;S<o.length;S+=1)transition_out(o[S]);f=!1},d(y){y&&detach(r),u&&u.d(),s[16](null);for(let S=0;S<o.length;S+=1)o[S].d();m=!1,run_all(_)}}}function instance$o(s,r,n){let t,a;component_subscribe(s,sockets,T=>n(8,t=T)),component_subscribe(s,focusedQubit,T=>n(9,a=T));let{id:l}=r,{type:o}=r,{active:c=!1}=r,{align:i="center"}=r,{colour:f="blue"}=r,{offset:m=0}=r,_,u=[],p={x:0,y:0};function g({offsetX:T,offsetY:j}){n(7,p={x:T,y:j}),n(5,_.style.zIndex=1002,_),_.classList.add("socket--dragging")}function y(T){var F;const j=(F=T.target)==null?void 0:F.getBoundingClientRect(),A=j.x+window.scrollX,C=j.y+window.scrollY,I=Object.keys(t).find(N=>{const{x:z,y:R,width:q}=t[N];return A>z-q&&A<z+q&&C>R-q&&C<R+q});I&&connectSockets(t[l],t[I]),n(7,p={x:0,y:0}),n(5,_.style.zIndex=10,_),_.classList.remove("socket--dragging")}function S(){activateSocket(l)}function b(T){T.key==="Escape"&&deactivateSockets(),T.key==="Backspace"&&c&&disconnectSocket(l)}function E(){const T=_.getBoundingClientRect(),j=T.x+window.scrollX,A=T.y+window.scrollY,C=T.width;sockets.update(I=>({...I,[l]:{...I[l],id:l,x:j,y:A,width:C,active:c,type:o,colour:f,offset:m}}))}const x=instrumentParameters.subscribe(async()=>{await tick(),_&&E()});onMount(()=>{E(),document.addEventListener("redrawCables",E);const T=sockets.subscribe(A=>{var C;n(0,c=(C=A[l])==null?void 0:C.active)}),j=connections.subscribe(A=>{var C;n(6,u=((C=A.filter(I=>I[0]===l))==null?void 0:C.map(I=>I[1]))||[])});return()=>{document.removeEventListener("redrawCables",E),T(),j(),x()}});function k(T){binding_callbacks[T?"unshift":"push"](()=>{_=T,n(5,_)})}return s.$$set=T=>{"id"in T&&n(1,l=T.id),"type"in T&&n(2,o=T.type),"active"in T&&n(0,c=T.active),"align"in T&&n(3,i=T.align),"colour"in T&&n(4,f=T.colour),"offset"in T&&n(15,m=T.offset)},[c,l,o,i,f,_,u,p,t,a,g,y,S,b,E,m,k]}class Socket extends SvelteComponent{constructor(r){super(),init(this,r,instance$o,create_fragment$q,safe_not_equal,{id:1,type:2,active:0,align:3,colour:4,offset:15})}}const Buttons_svelte_svelte_type_style_lang="";function get_each_context$8(s,r,n){const t=s.slice();return t[7]=r[n],t[9]=n,t}function create_each_block$8(s,r){let n,t=".",a,l,o;function c(){return r[5](r[7])}function i(...f){return r[6](r[7],...f)}return{key:s,first:null,c(){n=element("button"),a=text(t),this.h()},l(f){n=claim_element(f,"BUTTON",{style:!0,class:!0});var m=children(n);a=claim_text(m,t),m.forEach(detach),this.h()},h(){set_style(n,"background-color",r[4][r[9]%3]),attr(n,"class","svelte-12zydf2"),toggle_class(n,"active",r[3].some(i)),this.first=n},m(f,m){insert_hydration(f,n,m),append_hydration(n,a),l||(o=listen$1(n,"click",c),l=!0)},p(f,m){r=f,m&2&&set_style(n,"background-color",r[4][r[9]%3]),m&11&&toggle_class(n,"active",r[3].some(i))},d(f){f&&detach(n),l=!1,o()}}}function create_fragment$p(s){let r,n=[],t=new Map,a=s[1];const l=o=>o[7];for(let o=0;o<a.length;o+=1){let c=get_each_context$8(s,a,o),i=l(c);t.set(i,n[o]=create_each_block$8(i,c))}return{c(){r=element("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<n.length;i+=1)n[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","buttons svelte-12zydf2")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(r,null)},p(o,[c]){c&31&&(a=o[1],n=update_keyed_each(n,c,l,1,o,a,t,r,destroy_block,create_each_block$8,null,get_each_context$8))},i:noop,o:noop,d(o){o&&detach(r);for(let c=0;c<n.length;c+=1)n[c].d()}}}function instance$n(s,r,n){let t,a;component_subscribe(s,sockets,m=>n(2,t=m)),component_subscribe(s,connections,m=>n(3,a=m));let{id:l}=r,{options:o}=r;const c=["#00A399","#E5007F","#FF695A"],i=m=>connectSockets(t[m],t[l]),f=(m,_)=>_.includes(l)&&_.includes(m);return s.$$set=m=>{"id"in m&&n(0,l=m.id),"options"in m&&n(1,o=m.options)},[l,o,t,a,c,i,f]}class Buttons extends SvelteComponent{constructor(r){super(),init(this,r,instance$n,create_fragment$p,safe_not_equal,{id:0,options:1})}}const Parameters_svelte_svelte_type_style_lang="";function get_each_context$7(s,r,n){const t=s.slice();return t[23]=r[n].name,t[24]=r[n].min,t[25]=r[n].max,t[26]=r[n].step,t[27]=r[n].units,t[28]=r[n].key,t[29]=r[n].rangeA,t[30]=r[n].rangeB,t[31]=r[n].isLocked,t[32]=r,t[33]=n,t}function get_each_context_1$1(s,r,n){const t=s.slice();return t[23]=r[n].name,t[24]=r[n].min,t[25]=r[n].max,t[26]=r[n].step,t[27]=r[n].units,t[28]=r[n].key,t[29]=r[n].rangeA,t[30]=r[n].rangeB,t[31]=r[n].isLocked,t[34]=r,t[35]=n,t}function get_each_context_2(s,r,n){const t=s.slice();return t[36]=r[n].type,t[23]=r[n].name,t[24]=r[n].min,t[25]=r[n].max,t[26]=r[n].step,t[27]=r[n].units,t[28]=r[n].key,t[29]=r[n].rangeA,t[30]=r[n].rangeB,t[31]=r[n].isLocked,t[37]=r,t[38]=n,t}function create_default_slot_3$1(s){let r,n;return r=new FontAwesomeIcon({props:{icon:faShuffle}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p:noop,i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_if_block_4$2(s){let r,n,t;function a(...l){return s[11](s[29],s[30],s[37],s[38],...l)}return n=new Select({props:{id:s[28],options:s[1],selected:s[4][s[28]],onChange:a}}),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);claim_component(n.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(r,"class","samples svelte-1ox4233")},m(l,o){insert_hydration(l,r,o),mount_component(n,r,null),t=!0},p(l,o){s=l;const c={};o[0]&12&&(c.id=s[28]),o[0]&2&&(c.options=s[1]),o[0]&28&&(c.selected=s[4][s[28]]),o[0]&12&&(c.onChange=a),n.$set(c)},i(l){t||(transition_in(n.$$.fragment,l),t=!0)},o(l){transition_out(n.$$.fragment,l),t=!1},d(l){l&&detach(r),destroy_component(n)}}}function create_if_block_2$6(s){let r,n,t,a,l,o,c,i,f,m,_,u,p,g,y;r=new Tooltip({props:{element:s[28],type:"parameter",$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:s}}});function S(A){s[12](A,s[29],s[37],s[38])}function b(A){s[13](A,s[30],s[37],s[38])}let E={id:`param-inst-${s[28]}`,min:s[24],max:s[25],step:s[26],units:s[27],value:s[4][s[28]]};s[29]!==void 0&&(E.rangeA=s[29]),s[30]!==void 0&&(E.rangeB=s[30]),t=new RangeSlider({props:E}),binding_callbacks.push(()=>bind(t,"rangeA",S)),binding_callbacks.push(()=>bind(t,"rangeB",b)),i=new FontAwesomeIcon({props:{icon:faLock,class:"icon",style:`color: ${s[31]?"#FFF":"var(--color-grey-darker);"}`}});function x(){return s[14](s[31],s[37],s[38])}const k=[create_if_block_3$3,create_else_block_2],T=[];function j(A,C){return A[0]?0:1}return m=j(s),_=T[m]=k[m](s),{c(){create_component(r.$$.fragment),n=space(),create_component(t.$$.fragment),o=space(),c=element("button"),create_component(i.$$.fragment),f=space(),_.c(),u=empty(),this.h()},l(A){claim_component(r.$$.fragment,A),n=claim_space(A),claim_component(t.$$.fragment,A),o=claim_space(A),c=claim_element(A,"BUTTON",{class:!0});var C=children(c);claim_component(i.$$.fragment,C),C.forEach(detach),f=claim_space(A),_.l(A),u=empty(),this.h()},h(){attr(c,"class","lock svelte-1ox4233")},m(A,C){mount_component(r,A,C),insert_hydration(A,n,C),mount_component(t,A,C),insert_hydration(A,o,C),insert_hydration(A,c,C),mount_component(i,c,null),insert_hydration(A,f,C),T[m].m(A,C),insert_hydration(A,u,C),p=!0,g||(y=listen$1(c,"click",x),g=!0)},p(A,C){s=A;const I={};C[0]&12&&(I.element=s[28]),C[0]&12|C[1]&256&&(I.$$scope={dirty:C,ctx:s}),r.$set(I);const F={};C[0]&12&&(F.id=`param-inst-${s[28]}`),C[0]&12&&(F.min=s[24]),C[0]&12&&(F.max=s[25]),C[0]&12&&(F.step=s[26]),C[0]&12&&(F.units=s[27]),C[0]&28&&(F.value=s[4][s[28]]),!a&&C[0]&12&&(a=!0,F.rangeA=s[29],add_flush_callback(()=>a=!1)),!l&&C[0]&12&&(l=!0,F.rangeB=s[30],add_flush_callback(()=>l=!1)),t.$set(F);const N={};C[0]&12&&(N.style=`color: ${s[31]?"#FFF":"var(--color-grey-darker);"}`),i.$set(N);let z=m;m=j(s),m===z?T[m].p(s,C):(group_outros(),transition_out(T[z],1,1,()=>{T[z]=null}),check_outros(),_=T[m],_?_.p(s,C):(_=T[m]=k[m](s),_.c()),transition_in(_,1),_.m(u.parentNode,u))},i(A){p||(transition_in(r.$$.fragment,A),transition_in(t.$$.fragment,A),transition_in(i.$$.fragment,A),transition_in(_),p=!0)},o(A){transition_out(r.$$.fragment,A),transition_out(t.$$.fragment,A),transition_out(i.$$.fragment,A),transition_out(_),p=!1},d(A){destroy_component(r,A),A&&detach(n),destroy_component(t,A),A&&detach(o),A&&detach(c),destroy_component(i),A&&detach(f),T[m].d(A),A&&detach(u),g=!1,y()}}}function create_default_slot_2$2(s){let r,n=s[23]+"",t;return{c(){r=element("h3"),t=text(n),this.h()},l(a){r=claim_element(a,"H3",{class:!0});var l=children(r);t=claim_text(l,n),l.forEach(detach),this.h()},h(){attr(r,"class","svelte-1ox4233")},m(a,l){insert_hydration(a,r,l),append_hydration(r,t)},p(a,l){l[0]&12&&n!==(n=a[23]+"")&&set_data(t,n)},d(a){a&&detach(r)}}}function create_else_block_2(s){let r,n;return r=new Buttons({props:{id:s[28],options:s[7]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&12&&(l.id=t[28]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_if_block_3$3(s){let r,n;return r=new Socket({props:{id:s[28],type:"origin",align:"right"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&12&&(l.id=t[28]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block_2(s,r){let n,t,a,l,o,c=r[36]==="select"&&create_if_block_4$2(r),i=r[36]==="range"&&create_if_block_2$6(r);return{key:s,first:null,c(){n=element("div"),c&&c.c(),t=space(),i&&i.c(),a=space(),this.h()},l(f){n=claim_element(f,"DIV",{class:!0});var m=children(n);c&&c.l(m),t=claim_space(m),i&&i.l(m),a=claim_space(m),m.forEach(detach),this.h()},h(){attr(n,"class",l="parameter parameter--"+r[36]+" svelte-1ox4233"),this.first=n},m(f,m){insert_hydration(f,n,m),c&&c.m(n,null),append_hydration(n,t),i&&i.m(n,null),append_hydration(n,a),o=!0},p(f,m){r=f,r[36]==="select"?c?(c.p(r,m),m[0]&12&&transition_in(c,1)):(c=create_if_block_4$2(r),c.c(),transition_in(c,1),c.m(n,t)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros()),r[36]==="range"?i?(i.p(r,m),m[0]&12&&transition_in(i,1)):(i=create_if_block_2$6(r),i.c(),transition_in(i,1),i.m(n,a)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros()),(!o||m[0]&12&&l!==(l="parameter parameter--"+r[36]+" svelte-1ox4233"))&&attr(n,"class",l)},i(f){o||(transition_in(c),transition_in(i),o=!0)},o(f){transition_out(c),transition_out(i),o=!1},d(f){f&&detach(n),c&&c.d(),i&&i.d()}}}function create_default_slot_1$4(s){let r,n=s[23]+"",t;return{c(){r=element("h3"),t=text(n),this.h()},l(a){r=claim_element(a,"H3",{class:!0});var l=children(r);t=claim_text(l,n),l.forEach(detach),this.h()},h(){attr(r,"class","svelte-1ox4233")},m(a,l){insert_hydration(a,r,l),append_hydration(r,t)},p(a,l){l[0]&32&&n!==(n=a[23]+"")&&set_data(t,n)},d(a){a&&detach(r)}}}function create_else_block_1$1(s){let r,n;return r=new Buttons({props:{id:s[28],options:s[7]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&32&&(l.id=t[28]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_if_block_1$8(s){let r,n;return r=new Socket({props:{id:s[28],type:"origin",align:"right"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&32&&(l.id=t[28]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block_1$1(s,r){let n,t,a,l,o,c,i,f,m,_,u,p,g,y,S,b;t=new Tooltip({props:{element:r[28],type:"parameter",$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:r}}});function E(I){r[16](I,r[29],r[34],r[35])}function x(I){r[17](I,r[30],r[34],r[35])}let k={id:`param-global-${r[28]}`,min:r[24],max:r[25],step:r[26],units:r[27],value:r[4][r[28]]};r[29]!==void 0&&(k.rangeA=r[29]),r[30]!==void 0&&(k.rangeB=r[30]),l=new RangeSlider({props:k}),binding_callbacks.push(()=>bind(l,"rangeA",E)),binding_callbacks.push(()=>bind(l,"rangeB",x)),m=new FontAwesomeIcon({props:{icon:faLock,class:"icon",style:`color: ${r[31]?"#FFF":"var(--color-grey-darker);"}`}});function T(){return r[18](r[31],r[34],r[35])}const j=[create_if_block_1$8,create_else_block_1$1],A=[];function C(I,F){return I[0]?0:1}return u=C(r),p=A[u]=j[u](r),{key:s,first:null,c(){n=element("div"),create_component(t.$$.fragment),a=space(),create_component(l.$$.fragment),i=space(),f=element("button"),create_component(m.$$.fragment),_=space(),p.c(),g=space(),this.h()},l(I){n=claim_element(I,"DIV",{class:!0});var F=children(n);claim_component(t.$$.fragment,F),a=claim_space(F),claim_component(l.$$.fragment,F),i=claim_space(F),f=claim_element(F,"BUTTON",{class:!0});var N=children(f);claim_component(m.$$.fragment,N),N.forEach(detach),_=claim_space(F),p.l(F),g=claim_space(F),F.forEach(detach),this.h()},h(){attr(f,"class","lock svelte-1ox4233"),attr(n,"class","parameter svelte-1ox4233"),this.first=n},m(I,F){insert_hydration(I,n,F),mount_component(t,n,null),append_hydration(n,a),mount_component(l,n,null),append_hydration(n,i),append_hydration(n,f),mount_component(m,f,null),append_hydration(n,_),A[u].m(n,null),append_hydration(n,g),y=!0,S||(b=listen$1(f,"click",T),S=!0)},p(I,F){r=I;const N={};F[0]&32&&(N.element=r[28]),F[0]&32|F[1]&256&&(N.$$scope={dirty:F,ctx:r}),t.$set(N);const z={};F[0]&32&&(z.id=`param-global-${r[28]}`),F[0]&32&&(z.min=r[24]),F[0]&32&&(z.max=r[25]),F[0]&32&&(z.step=r[26]),F[0]&32&&(z.units=r[27]),F[0]&48&&(z.value=r[4][r[28]]),!o&&F[0]&32&&(o=!0,z.rangeA=r[29],add_flush_callback(()=>o=!1)),!c&&F[0]&32&&(c=!0,z.rangeB=r[30],add_flush_callback(()=>c=!1)),l.$set(z);const R={};F[0]&32&&(R.style=`color: ${r[31]?"#FFF":"var(--color-grey-darker);"}`),m.$set(R);let q=u;u=C(r),u===q?A[u].p(r,F):(group_outros(),transition_out(A[q],1,1,()=>{A[q]=null}),check_outros(),p=A[u],p?p.p(r,F):(p=A[u]=j[u](r),p.c()),transition_in(p,1),p.m(n,g))},i(I){y||(transition_in(t.$$.fragment,I),transition_in(l.$$.fragment,I),transition_in(m.$$.fragment,I),transition_in(p),y=!0)},o(I){transition_out(t.$$.fragment,I),transition_out(l.$$.fragment,I),transition_out(m.$$.fragment,I),transition_out(p),y=!1},d(I){I&&detach(n),destroy_component(t),destroy_component(l),destroy_component(m),A[u].d(),S=!1,b()}}}function create_default_slot$7(s){let r,n=s[23]+"",t;return{c(){r=element("h3"),t=text(n),this.h()},l(a){r=claim_element(a,"H3",{class:!0});var l=children(r);t=claim_text(l,n),l.forEach(detach),this.h()},h(){attr(r,"class","svelte-1ox4233")},m(a,l){insert_hydration(a,r,l),append_hydration(r,t)},p(a,l){l[0]&64&&n!==(n=a[23]+"")&&set_data(t,n)},d(a){a&&detach(r)}}}function create_else_block$4(s){let r,n;return r=new Buttons({props:{id:s[28],options:s[7]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&64&&(l.id=t[28]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_if_block$b(s){let r,n;return r=new Socket({props:{id:s[28],type:"origin",align:"right"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&64&&(l.id=t[28]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_each_block$7(s,r){let n,t,a,l,o,c,i,f,m,_,u,p,g,y,S,b;t=new Tooltip({props:{element:r[28],type:"parameter",$$slots:{default:[create_default_slot$7]},$$scope:{ctx:r}}});function E(I){r[20](I,r[29],r[32],r[33])}function x(I){r[21](I,r[30],r[32],r[33])}let k={id:`param-fx-${r[28]}`,min:r[24],max:r[25],step:r[26],units:r[27],value:r[4][r[28]]};r[29]!==void 0&&(k.rangeA=r[29]),r[30]!==void 0&&(k.rangeB=r[30]),l=new RangeSlider({props:k}),binding_callbacks.push(()=>bind(l,"rangeA",E)),binding_callbacks.push(()=>bind(l,"rangeB",x)),m=new FontAwesomeIcon({props:{icon:faLock,class:"icon",style:`color: ${r[31]?"#FFF":"var(--color-grey-darker);"}`}});function T(){return r[22](r[31],r[32],r[33])}const j=[create_if_block$b,create_else_block$4],A=[];function C(I,F){return I[0]?0:1}return u=C(r),p=A[u]=j[u](r),{key:s,first:null,c(){n=element("div"),create_component(t.$$.fragment),a=space(),create_component(l.$$.fragment),i=space(),f=element("button"),create_component(m.$$.fragment),_=space(),p.c(),g=space(),this.h()},l(I){n=claim_element(I,"DIV",{class:!0});var F=children(n);claim_component(t.$$.fragment,F),a=claim_space(F),claim_component(l.$$.fragment,F),i=claim_space(F),f=claim_element(F,"BUTTON",{class:!0});var N=children(f);claim_component(m.$$.fragment,N),N.forEach(detach),_=claim_space(F),p.l(F),g=claim_space(F),F.forEach(detach),this.h()},h(){attr(f,"class","lock svelte-1ox4233"),attr(n,"class","parameter svelte-1ox4233"),this.first=n},m(I,F){insert_hydration(I,n,F),mount_component(t,n,null),append_hydration(n,a),mount_component(l,n,null),append_hydration(n,i),append_hydration(n,f),mount_component(m,f,null),append_hydration(n,_),A[u].m(n,null),append_hydration(n,g),y=!0,S||(b=listen$1(f,"click",T),S=!0)},p(I,F){r=I;const N={};F[0]&64&&(N.element=r[28]),F[0]&64|F[1]&256&&(N.$$scope={dirty:F,ctx:r}),t.$set(N);const z={};F[0]&64&&(z.id=`param-fx-${r[28]}`),F[0]&64&&(z.min=r[24]),F[0]&64&&(z.max=r[25]),F[0]&64&&(z.step=r[26]),F[0]&64&&(z.units=r[27]),F[0]&80&&(z.value=r[4][r[28]]),!o&&F[0]&64&&(o=!0,z.rangeA=r[29],add_flush_callback(()=>o=!1)),!c&&F[0]&64&&(c=!0,z.rangeB=r[30],add_flush_callback(()=>c=!1)),l.$set(z);const R={};F[0]&64&&(R.style=`color: ${r[31]?"#FFF":"var(--color-grey-darker);"}`),m.$set(R);let q=u;u=C(r),u===q?A[u].p(r,F):(group_outros(),transition_out(A[q],1,1,()=>{A[q]=null}),check_outros(),p=A[u],p?p.p(r,F):(p=A[u]=j[u](r),p.c()),transition_in(p,1),p.m(n,g))},i(I){y||(transition_in(t.$$.fragment,I),transition_in(l.$$.fragment,I),transition_in(m.$$.fragment,I),transition_in(p),y=!0)},o(I){transition_out(t.$$.fragment,I),transition_out(l.$$.fragment,I),transition_out(m.$$.fragment,I),transition_out(p),y=!1},d(I){I&&detach(n),destroy_component(t),destroy_component(l),destroy_component(m),A[u].d(),S=!1,b()}}}function create_fragment$o(s){let r,n,t,a,l,o,c,i,f=[],m=new Map,_,u,p,g,y,S,b=[],E=new Map,x,k,T,j,A,C,I=[],F=new Map,N,z,R;c=new Tooltip({props:{element:"randomise-patching",type:"parameter",$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:s}}});let q=s[2].filter(s[10]);const M=K=>K[28];for(let K=0;K<q.length;K+=1){let Z=get_each_context_2(s,q,K),U=M(Z);m.set(U,f[K]=create_each_block_2(U,Z))}let D=s[5];const X=K=>K[28];for(let K=0;K<D.length;K+=1){let Z=get_each_context_1$1(s,D,K),U=X(Z);E.set(U,b[K]=create_each_block_1$1(U,Z))}let O=s[6];const G=K=>K[28];for(let K=0;K<O.length;K+=1){let Z=get_each_context$7(s,O,K),U=G(Z);F.set(U,I[K]=create_each_block$7(U,Z))}return{c(){r=element("div"),n=element("button"),t=element("h2"),a=text("Instrument"),l=space(),o=element("button"),create_component(c.$$.fragment),i=space();for(let K=0;K<f.length;K+=1)f[K].c();_=space(),u=element("div"),p=element("button"),g=element("h2"),y=text("Global"),S=space();for(let K=0;K<b.length;K+=1)b[K].c();x=space(),k=element("div"),T=element("button"),j=element("h2"),A=text("Effects"),C=space();for(let K=0;K<I.length;K+=1)I[K].c();this.h()},l(K){r=claim_element(K,"DIV",{class:!0});var Z=children(r);n=claim_element(Z,"BUTTON",{class:!0});var U=children(n);t=claim_element(U,"H2",{class:!0});var V=children(t);a=claim_text(V,"Instrument"),V.forEach(detach),l=claim_space(U),o=claim_element(U,"BUTTON",{class:!0});var L=children(o);claim_component(c.$$.fragment,L),L.forEach(detach),U.forEach(detach),i=claim_space(Z);for(let he=0;he<f.length;he+=1)f[he].l(Z);Z.forEach(detach),_=claim_space(K),u=claim_element(K,"DIV",{class:!0});var H=children(u);p=claim_element(H,"BUTTON",{class:!0});var J=children(p);g=claim_element(J,"H2",{class:!0});var ne=children(g);y=claim_text(ne,"Global"),ne.forEach(detach),J.forEach(detach),S=claim_space(H);for(let he=0;he<b.length;he+=1)b[he].l(H);H.forEach(detach),x=claim_space(K),k=claim_element(K,"DIV",{class:!0});var se=children(k);T=claim_element(se,"BUTTON",{class:!0});var fe=children(T);j=claim_element(fe,"H2",{class:!0});var xe=children(j);A=claim_text(xe,"Effects"),xe.forEach(detach),fe.forEach(detach),C=claim_space(se);for(let he=0;he<I.length;he+=1)I[he].l(se);se.forEach(detach),this.h()},h(){attr(t,"class","svelte-1ox4233"),attr(o,"class","connect svelte-1ox4233"),attr(n,"class","svelte-1ox4233"),attr(r,"class","group svelte-1ox4233"),attr(g,"class","svelte-1ox4233"),attr(p,"class","svelte-1ox4233"),attr(u,"class","group svelte-1ox4233"),attr(j,"class","svelte-1ox4233"),attr(T,"class","svelte-1ox4233"),attr(k,"class","group svelte-1ox4233")},m(K,Z){insert_hydration(K,r,Z),append_hydration(r,n),append_hydration(n,t),append_hydration(t,a),append_hydration(n,l),append_hydration(n,o),mount_component(c,o,null),append_hydration(r,i);for(let U=0;U<f.length;U+=1)f[U]&&f[U].m(r,null);insert_hydration(K,_,Z),insert_hydration(K,u,Z),append_hydration(u,p),append_hydration(p,g),append_hydration(g,y),append_hydration(u,S);for(let U=0;U<b.length;U+=1)b[U]&&b[U].m(u,null);insert_hydration(K,x,Z),insert_hydration(K,k,Z),append_hydration(k,T),append_hydration(T,j),append_hydration(j,A),append_hydration(k,C);for(let U=0;U<I.length;U+=1)I[U]&&I[U].m(k,null);N=!0,z||(R=[listen$1(o,"click",s[8]),listen$1(n,"click",s[9]),listen$1(p,"click",s[15]),listen$1(T,"click",s[19])],z=!0)},p(K,Z){const U={};Z[1]&256&&(U.$$scope={dirty:Z,ctx:K}),c.$set(U),Z[0]&159&&(q=K[2].filter(K[10]),group_outros(),f=update_keyed_each(f,Z,M,1,K,q,m,r,outro_and_destroy_block,create_each_block_2,null,get_each_context_2),check_outros()),Z[0]&177&&(D=K[5],group_outros(),b=update_keyed_each(b,Z,X,1,K,D,E,u,outro_and_destroy_block,create_each_block_1$1,null,get_each_context_1$1),check_outros()),Z[0]&209&&(O=K[6],group_outros(),I=update_keyed_each(I,Z,G,1,K,O,F,k,outro_and_destroy_block,create_each_block$7,null,get_each_context$7),check_outros())},i(K){if(!N){transition_in(c.$$.fragment,K);for(let Z=0;Z<q.length;Z+=1)transition_in(f[Z]);for(let Z=0;Z<D.length;Z+=1)transition_in(b[Z]);for(let Z=0;Z<O.length;Z+=1)transition_in(I[Z]);N=!0}},o(K){transition_out(c.$$.fragment,K);for(let Z=0;Z<f.length;Z+=1)transition_out(f[Z]);for(let Z=0;Z<b.length;Z+=1)transition_out(b[Z]);for(let Z=0;Z<I.length;Z+=1)transition_out(I[Z]);N=!1},d(K){K&&detach(r),destroy_component(c);for(let Z=0;Z<f.length;Z+=1)f[Z].d();K&&detach(_),K&&detach(u);for(let Z=0;Z<b.length;Z+=1)b[Z].d();K&&detach(x),K&&detach(k);for(let Z=0;Z<I.length;Z+=1)I[Z].d();z=!1,run_all(R)}}}function instance$m(s,r,n){let t,a,l,o,c;component_subscribe(s,instrumentParameters,F=>n(2,t=F)),component_subscribe(s,keys,F=>n(3,a=F)),component_subscribe(s,paramValues,F=>n(4,l=F)),component_subscribe(s,globalParameters,F=>n(5,o=F)),component_subscribe(s,fxParameters,F=>n(6,c=F));let{showSockets:i=!0}=r,f=["x","y","z"],m=[];onMount(()=>{const F=samples$1.subscribe(N=>{n(1,m=N.map((z,R)=>({name:z.split("/").pop()||"",value:R,active:!0})))});return()=>{F()}});const _=F=>{F.stopPropagation(),randomiseConnections()},u=()=>randomise("inst"),p=({key:F})=>a.includes(F),g=(F,N,z,R,q)=>{const M=+q.target.value;set_store_value(instrumentParameters,z[R].rangeA=set_store_value(instrumentParameters,z[R].rangeB=M||0,t,keys.set(a)),t,keys.set(a)),loadSample(M)};function y(F,N,z,R){z[R].rangeA=F,instrumentParameters.set(t)}function S(F,N,z,R){z[R].rangeB=F,instrumentParameters.set(t)}const b=(F,N,z)=>set_store_value(instrumentParameters,N[z].isLocked=!F,t,keys.set(a)),E=()=>randomise("global");function x(F,N,z,R){z[R].rangeA=F,globalParameters.set(o)}function k(F,N,z,R){z[R].rangeB=F,globalParameters.set(o)}const T=(F,N,z)=>set_store_value(globalParameters,N[z].isLocked=!F,o),j=()=>randomise("fx");function A(F,N,z,R){z[R].rangeA=F,fxParameters.set(c)}function C(F,N,z,R){z[R].rangeB=F,fxParameters.set(c)}const I=(F,N,z)=>set_store_value(fxParameters,N[z].isLocked=!F,c);return s.$$set=F=>{"showSockets"in F&&n(0,i=F.showSockets)},[i,m,t,a,l,o,c,f,_,u,p,g,y,S,b,E,x,k,T,j,A,C,I]}class Parameters extends SvelteComponent{constructor(r){super(),init(this,r,instance$m,create_fragment$o,safe_not_equal,{showSockets:0},null,[-1,-1])}}const Knob_svelte_svelte_type_style_lang="";function create_default_slot$6(s){let r,n;return{c(){r=element("p"),n=text(s[1]),this.h()},l(t){r=claim_element(t,"P",{class:!0});var a=children(r);n=claim_text(a,s[1]),a.forEach(detach),this.h()},h(){attr(r,"class","knob__label svelte-1pjgc50")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},p(t,a){a&2&&set_data(n,t[1])},d(t){t&&detach(r)}}}function create_fragment$n(s){let r,n,t,a,l,o,c,i,f,m,_,u,p,g;return _=new Learnable({props:{id:s[0],$$slots:{default:[create_default_slot$6]},$$scope:{ctx:s}}}),{c(){r=element("div"),n=element("div"),t=space(),a=svg_element("svg"),l=svg_element("circle"),o=space(),c=element("div"),i=element("div"),f=element("div"),m=space(),create_component(_.$$.fragment),this.h()},l(y){r=claim_element(y,"DIV",{class:!0});var S=children(r);n=claim_element(S,"DIV",{class:!0,style:!0}),children(n).forEach(detach),t=claim_space(S),a=claim_svg_element(S,"svg",{viewBox:!0,class:!0});var b=children(a);l=claim_svg_element(b,"circle",{r:!0,stroke:!0,"stroke-width":!0,fill:!0}),children(l).forEach(detach),b.forEach(detach),o=claim_space(S),c=claim_element(S,"DIV",{class:!0});var E=children(c);i=claim_element(E,"DIV",{class:!0,style:!0});var x=children(i);f=claim_element(x,"DIV",{class:!0}),children(f).forEach(detach),x.forEach(detach),E.forEach(detach),m=claim_space(S),claim_component(_.$$.fragment,S),S.forEach(detach),this.h()},h(){attr(n,"class","knob__gradient svelte-1pjgc50"),set_style(n,"--rotation",s[2]),attr(l,"r","9"),attr(l,"stroke","none"),attr(l,"stroke-width","0.5"),attr(l,"fill","var(--color-grey-dark)"),attr(a,"viewBox","-10 -10 20 20"),attr(a,"class","svelte-1pjgc50"),attr(f,"class","knob__indicator svelte-1pjgc50"),attr(i,"class","knob__inner svelte-1pjgc50"),set_style(i,"--rotation",s[2]),attr(c,"class","knob svelte-1pjgc50"),attr(r,"class","knob__container svelte-1pjgc50")},m(y,S){insert_hydration(y,r,S),append_hydration(r,n),append_hydration(r,t),append_hydration(r,a),append_hydration(a,l),append_hydration(r,o),append_hydration(r,c),append_hydration(c,i),append_hydration(i,f),append_hydration(r,m),mount_component(_,r,null),u=!0,p||(g=listen$1(i,"pointerdown",s[3]),p=!0)},p(y,[S]){(!u||S&4)&&set_style(n,"--rotation",y[2]),(!u||S&4)&&set_style(i,"--rotation",y[2]);const b={};S&1&&(b.id=y[0]),S&32770&&(b.$$scope={dirty:S,ctx:y}),_.$set(b)},i(y){u||(transition_in(_.$$.fragment,y),u=!0)},o(y){transition_out(_.$$.fragment,y),u=!1},d(y){y&&detach(r),destroy_component(_),p=!1,g()}}}function instance$l(s,r,n){let t,a,{id:l=""}=r,{name:o}=r,{value:c}=r,{min:i=0}=r,{max:f=1}=r,{rotRange:m=2*Math.PI*.8}=r,{pixelRange:_=200}=r,{startRotation:u=-Math.PI*.8}=r,p,g;function y({clientY:E}){const x=t*(E-p)/_;n(4,c=clamp$1(g-x,i,f))}function S({clientY:E}){p=E,g=c,window.addEventListener("pointermove",y),window.addEventListener("pointerup",b)}function b(){window.removeEventListener("pointermove",y),window.removeEventListener("pointerup",b)}return s.$$set=E=>{"id"in E&&n(0,l=E.id),"name"in E&&n(1,o=E.name),"value"in E&&n(4,c=E.value),"min"in E&&n(5,i=E.min),"max"in E&&n(6,f=E.max),"rotRange"in E&&n(7,m=E.rotRange),"pixelRange"in E&&n(8,_=E.pixelRange),"startRotation"in E&&n(9,u=E.startRotation)},s.$$.update=()=>{s.$$.dirty&96&&n(10,t=f-i),s.$$.dirty&1712&&n(2,a=u+(c-i)/t*m)},[l,o,a,S,c,i,f,m,_,u,t]}class Knob extends SvelteComponent{constructor(r){super(),init(this,r,instance$l,create_fragment$n,safe_not_equal,{id:0,name:1,value:4,min:5,max:6,rotRange:7,pixelRange:8,startRotation:9})}}var AudioKeys_state={_setState:function(s){var r=this;s||(s={}),r._state={},r._extendState({polyphony:4,rows:1,priority:"last",rootNote:60,octaveControls:!0,octave:0,velocityControls:!0,velocity:127,keys:[],buffer:[]}),r._extendState(s)},_extendState:function(s){var r=this;for(var n in s)r._state[n]=s[n]},set:function(){var s=this;return arguments.length===1?s._extendState(arguments[0]):s._state[arguments[0]]=arguments[1],this},get:function(s){var r=this;return r._state[s]}},AudioKeys_events={down:function(s){var r=this;r._listeners.down=(r._listeners.down||[]).concat(s)},up:function(s){var r=this;r._listeners.up=(r._listeners.up||[]).concat(s)},_trigger:function(s){var r=this;if(r._listeners[s]&&r._listeners[s].length){var n=Array.prototype.slice.call(arguments);n.splice(0,1),r._listeners[s].forEach(function(t){t.apply(r,n)})}},_bind:function(){var s=this;if(typeof window<"u"&&window.document){window.document.addEventListener("keydown",function(n){s._addKey(n)}),window.document.addEventListener("keyup",function(n){s._removeKey(n)});var r=!0;setInterval(function(){window.document.hasFocus()!==r&&(r=!r,r||s.clear())},100)}}},AudioKeys_mapping={_map:function(s){return this._keyMap[this._state.rows][s]+this._offset()},_offset:function(){return this._state.rootNote-this._keyMap[this._state.rows].root+this._state.octave*12},_isNote:function(s){return!!this._keyMap[this._state.rows][s]},_toFrequency:function(s){return Math.pow(2,(s-69)/12)*440},_keyMap:{1:{root:60,65:60,87:61,83:62,69:63,68:64,70:65,84:66,71:67,89:68,72:69,85:70,74:71,75:72,79:73,76:74,80:75,186:76,222:77},2:{root:60,90:60,83:61,88:62,68:63,67:64,86:65,71:66,66:67,72:68,78:69,74:70,77:71,188:72,76:73,190:74,186:75,191:76,81:72,50:73,87:74,51:75,69:76,82:77,53:78,84:79,54:80,89:81,55:82,85:83,73:84,57:85,79:86,48:87,80:88,219:89,187:90,221:91}}},AudioKeys_buffer={_addKey:function(s){var r=this;if(r._isNote(s.keyCode)&&!r._isPressed(s.keyCode)){var n=r._makeNote(s.keyCode);r._state.keys=(r._state.keys||[]).concat(n),r._update()}else r._isSpecialKey(s.keyCode)&&r._specialKey(s.keyCode)},_removeKey:function(s){var r=this;if(r._isPressed(s.keyCode)){for(var n,t=0;t<r._state.keys.length;t++)if(r._state.keys[t].keyCode===s.keyCode){n=r._state.keys[t];break}r._state.keys.splice(r._state.keys.indexOf(n),1),r._update()}},_isPressed:function(s){var r=this;if(!r._state.keys||!r._state.keys.length)return!1;for(var n=0;n<r._state.keys.length;n++)if(r._state.keys[n].keyCode===s)return!0;return!1},_makeNote:function(s){var r=this;return{keyCode:s,note:r._map(s),frequency:r._toFrequency(r._map(s)),velocity:r._state.velocity}},clear:function(){var s=this;s._state.buffer.forEach(function(r){r.velocity=0,s._trigger("up",r)}),s._state.keys=[],s._state.buffer=[]},_update:function(){var s=this,r=s._state.buffer;s._prioritize(),s._diff(r)},_diff:function(s){var r=this,n=s.map(function(o){return o.keyCode}),t=r._state.buffer.map(function(o){return o.keyCode}),a=[];n.forEach(function(o){t.indexOf(o)===-1&&a.push(o)});var l=[];t.forEach(function(o){n.indexOf(o)===-1&&l.push(o)}),l.forEach(function(o){for(var c=0;c<r._state.buffer.length;c++)if(r._state.buffer[c].keyCode===o){r._trigger("down",r._state.buffer[c]);break}}),a.forEach(function(o){for(var c=0;c<s.length;c++)if(s[c].keyCode===o){s[c].velocity=0,r._trigger("up",s[c]);break}})}},AudioKeys_priority={_prioritize:function(){var s=this;if(!s._state.keys.length){s._state.buffer=[];return}s._state.polyphony>=s._state.keys.length?s._state.keys=s._state.keys.map(function(r){return r.isActive=!0,r}):(s._state.keys=s._state.keys.map(function(r){return r.isActive=!1,r}),s["_"+s._state.priority]()),s._state.buffer=[],s._state.keys.forEach(function(r){r.isActive&&s._state.buffer.push(r)})},_last:function(){for(var s=this,r=s._state.keys.length-s._state.polyphony;r<s._state.keys.length;r++)s._state.keys[r].isActive=!0},_first:function(){for(var s=this,r=0;r<s._state.polyphony;r++)s._state.keys[r].isActive=!0},_highest:function(){var s=this,r=s._state.keys.map(function(n){return n.note});r.sort(function(n,t){return t===n?0:t<n?-1:1}),r.splice(s._state.polyphony,Number.MAX_VALUE),s._state.keys.forEach(function(n){r.indexOf(n.note)!==-1&&(n.isActive=!0)})},_lowest:function(){var s=this,r=s._state.keys.map(function(n){return n.note});r.sort(function(n,t){return n===t?0:n<t?-1:1}),r.splice(s._state.polyphony,Number.MAX_VALUE),s._state.keys.forEach(function(n){r.indexOf(n.note)!==-1&&(n.isActive=!0)})}},AudioKeys_special={_isSpecialKey:function(s){return this._state.rows===1&&this._specialKeyMap[s]},_specialKey:function(s){var r=this;r._specialKeyMap[s].type==="octave"&&r._state.octaveControls?r._state.octave+=r._specialKeyMap[s].value:r._specialKeyMap[s].type==="velocity"&&r._state.velocityControls&&(r._state.velocity=r._specialKeyMap[s].value)},_specialKeyMap:{90:{type:"octave",value:-1},88:{type:"octave",value:1},49:{type:"velocity",value:1},50:{type:"velocity",value:14},51:{type:"velocity",value:28},52:{type:"velocity",value:42},53:{type:"velocity",value:56},54:{type:"velocity",value:70},55:{type:"velocity",value:84},56:{type:"velocity",value:98},57:{type:"velocity",value:112},48:{type:"velocity",value:127}}},state=AudioKeys_state,events=AudioKeys_events,mapping=AudioKeys_mapping,buffer=AudioKeys_buffer,priority=AudioKeys_priority,special=AudioKeys_special;function AudioKeys(s){var r=this;r._setState(s),r._listeners={},r._bind()}AudioKeys.prototype._setState=state._setState;AudioKeys.prototype._extendState=state._extendState;AudioKeys.prototype.set=state.set;AudioKeys.prototype.get=state.get;AudioKeys.prototype.down=events.down;AudioKeys.prototype.up=events.up;AudioKeys.prototype._trigger=events._trigger;AudioKeys.prototype._bind=events._bind;AudioKeys.prototype._map=mapping._map;AudioKeys.prototype._offset=mapping._offset;AudioKeys.prototype._isNote=mapping._isNote;AudioKeys.prototype._toFrequency=mapping._toFrequency;AudioKeys.prototype._keyMap=mapping._keyMap;AudioKeys.prototype._addKey=buffer._addKey;AudioKeys.prototype._removeKey=buffer._removeKey;AudioKeys.prototype._isPressed=buffer._isPressed;AudioKeys.prototype._makeNote=buffer._makeNote;AudioKeys.prototype.clear=buffer.clear;AudioKeys.prototype._update=buffer._update;AudioKeys.prototype._diff=buffer._diff;AudioKeys.prototype._prioritize=priority._prioritize;AudioKeys.prototype._last=priority._last;AudioKeys.prototype._first=priority._first;AudioKeys.prototype._highest=priority._highest;AudioKeys.prototype._lowest=priority._lowest;AudioKeys.prototype._isSpecialKey=special._isSpecialKey;AudioKeys.prototype._specialKey=special._specialKey;AudioKeys.prototype._specialKeyMap=special._specialKeyMap;var AudioKeys_1=AudioKeys;const AudioKeys$1=getDefaultExportFromCjs(AudioKeys_1),map={60:"Z",61:"S",62:"X",63:"D",64:"C",65:"V",66:"G",67:"B",68:"H",69:"N",70:"J",71:"M",72:"Q",73:"2",74:"W",75:"3",76:"E",77:"R",78:"5",79:"T",80:"6",81:"Y",82:"7",83:"U"},noteToKey=s=>map[s],Key_svelte_svelte_type_style_lang="";function create_fragment$m(s){let r,n,t,a=noteToKey(s[1])+"",l,o,c,i,f;return{c(){r=element("div"),n=element("div"),t=element("span"),l=text(a),this.h()},l(m){r=claim_element(m,"DIV",{class:!0});var _=children(r);n=claim_element(_,"DIV",{class:!0});var u=children(n);t=claim_element(u,"SPAN",{class:!0});var p=children(t);l=claim_text(p,a),p.forEach(detach),u.forEach(detach),_.forEach(detach),this.h()},h(){attr(t,"class","label svelte-s3txvo"),attr(n,"class",o="inner piano-"+s[2]+" note-"+s[1]+" "+(s[0]?"active":"")+" svelte-s3txvo"),attr(r,"class",c="key key--"+s[2]+" svelte-s3txvo")},m(m,_){insert_hydration(m,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(t,l),i||(f=[listen$1(n,"mousedown",s[4]),listen$1(n,"mouseup",s[5]),listen$1(n,"mouseleave",s[6]),listen$1(n,"mouseenter",s[7]),listen$1(n,"touchstart",s[8],{passive:!0}),listen$1(n,"touchend",s[9],{passive:!0})],i=!0)},p(m,[_]){_&2&&a!==(a=noteToKey(m[1])+"")&&set_data(l,a),_&7&&o!==(o="inner piano-"+m[2]+" note-"+m[1]+" "+(m[0]?"active":"")+" svelte-s3txvo")&&attr(n,"class",o),_&4&&c!==(c="key key--"+m[2]+" svelte-s3txvo")&&attr(r,"class",c)},i:noop,o:noop,d(m){m&&detach(r),i=!1,run_all(f)}}}function instance$k(s,r,n){const t=createEventDispatcher();let{isActive:a=!1}=r,{note:l}=r,{colour:o}=r;const c=()=>t("down",l),i=()=>t("up",l),f=()=>t("leave",l),m=()=>t("enter",l),_=()=>t("touchstart",l),u=()=>t("touchend",l);return s.$$set=p=>{"isActive"in p&&n(0,a=p.isActive),"note"in p&&n(1,l=p.note),"colour"in p&&n(2,o=p.colour)},[a,l,o,t,c,i,f,m,_,u]}class Key extends SvelteComponent{constructor(r){super(),init(this,r,instance$k,create_fragment$m,safe_not_equal,{isActive:0,note:1,colour:2})}}const Keyboard_svelte_svelte_type_style_lang="",{window:window_1$2}=globals;function get_each_context$6(s,r,n){const t=s.slice();return t[20]=r[n],t[22]=n,t}function create_each_block$6(s){let r,n;return r=new Key({props:{note:s[20],colour:[1,3,6,8,10].includes(s[22]%12)?"black":"white",isActive:s[2].includes(s[20])}}),r.$on("down",s[3]),r.$on("up",s[4]),r.$on("leave",s[5]),r.$on("enter",s[6]),r.$on("touchstart",s[7]),r.$on("touchend",s[8]),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&2&&(l.note=t[20]),a&6&&(l.isActive=t[2].includes(t[20])),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_fragment$l(s){let r,n,t,a,l,o=s[1],c=[];for(let f=0;f<o.length;f+=1)c[f]=create_each_block$6(get_each_context$6(s,o,f));const i=f=>transition_out(c[f],1,1,()=>{c[f]=null});return{c(){r=element("div"),n=element("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){r=claim_element(f,"DIV",{class:!0});var m=children(r);n=claim_element(m,"DIV",{class:!0});var _=children(n);for(let u=0;u<c.length;u+=1)c[u].l(_);_.forEach(detach),m.forEach(detach),this.h()},h(){attr(n,"class","piano-keys svelte-7fpxzh"),attr(r,"class","piano svelte-7fpxzh")},m(f,m){insert_hydration(f,r,m),append_hydration(r,n);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(n,null);t=!0,a||(l=listen$1(window_1$2,"resize",s[9]),a=!0)},p(f,[m]){if(m&510){o=f[1];let _;for(_=0;_<o.length;_+=1){const u=get_each_context$6(f,o,_);c[_]?(c[_].p(u,m),transition_in(c[_],1)):(c[_]=create_each_block$6(u),c[_].c(),transition_in(c[_],1),c[_].m(n,null))}for(group_outros(),_=o.length;_<c.length;_+=1)i(_);check_outros()}},i(f){if(!t){for(let m=0;m<o.length;m+=1)transition_in(c[m]);t=!0}},o(f){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)transition_out(c[m]);t=!1},d(f){f&&detach(r),destroy_each(c,f),a=!1,l()}}}function instance$j(s,r,n){const t=new AudioKeys$1({polyphony:6,rows:2,priority:"last"});let a=!1,l=[60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83],o=l,c=[],i=!1,f=!1;drone.subscribe(A=>!A&&n(2,c=[]));function m(A,C=.5){n(2,c=get_store_value(drone)?[A]:[...c,A]),handleEvent({...get_store_value(synthValues),n:A,amp:C})}function _(A){c.includes(A)&&(!get_store_value(drone)&&n(2,c=c.filter(C=>C!==A)),handleNoteOff(get_store_value(synthValues).inst,A))}t.down(({note:A})=>{m(A)}),t.up(({note:A})=>{_(A)});function u(A){f||(a=!0,m(A.detail))}function p(A){f||(a=!1,_(A.detail))}function g(A){f||_(A.detail)}function y(A){f||!a||m(A.detail)}function S(A){f=!0,m(A.detail)}function b(A){_(A.detail)}function E(A){m(A.note.number,A.velocity)}function x(A){_(A.note.number)}function k(A){const C=wm.getInputByName(A);C!=null&&C.hasListener("noteon",E)&&(C!=null&&C.hasListener("noteoff",x))||(C==null||C.addListener("noteon",E),C==null||C.addListener("noteoff",x))}function T(A){const C=wm.getInputByName(A);C==null||C.removeListener("noteon",E),C==null||C.removeListener("noteoff",x)}onMount(()=>{n(0,i=window.innerWidth<650);const A=inputs.subscribe(C=>{C.forEach(({name:I,active:F})=>F?k(I):T(I))});return()=>A()});const j=()=>n(0,i=window.innerWidth<650);return s.$$.update=()=>{s.$$.dirty&1&&n(1,o=i?l.slice(0,12):l)},[i,o,c,u,p,g,y,S,b,j]}class Keyboard extends SvelteComponent{constructor(r){super(),init(this,r,instance$j,create_fragment$l,safe_not_equal,{})}}const Controls_svelte_svelte_type_style_lang$1="";function get_each_context$5(s,r,n){const t=s.slice();return t[11]=r[n].name,t[12]=r[n].a,t[13]=r[n].d,t[14]=r[n].s,t[15]=r[n].r,t[16]=r,t[17]=n,t}function create_default_slot_7(s){let r,n;return r=new Button({props:{orientation:"vertical",text:"Learn",colour:"grey",active:s[0],onClick:s[4],image:midi,classes:"w-full"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&1&&(l.active=t[0]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot_6(s){let r,n;return r=new Button({props:{orientation:"vertical",text:"Drone",colour:"grey",active:s[1],onClick:s[5],icon:faSignal}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&2&&(l.active=t[1]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot_5(s){let r,n;return r=new Learnable({props:{id:"drone",classes:"h-full rounded-lg",$$slots:{default:[create_default_slot_6]},$$scope:{ctx:s}}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&262146&&(l.$$scope={dirty:a,ctx:t}),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot_4(s){let r,n,t;function a(o){s[6](o)}let l={id:"volume",name:"Vol",pixelRange:200};return s[2]!==void 0&&(l.value=s[2]),r=new Knob({props:l}),binding_callbacks.push(()=>bind(r,"value",a)),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){const i={};!n&&c&4&&(n=!0,i.value=o[2],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_default_slot_3(s){let r,n,t;function a(o){s[7](o,s[12],s[16],s[17])}let l={id:`env-${s[17]}-a`,pixelRange:200,min:.01,name:"a"};return s[12]!==void 0&&(l.value=s[12]),r=new Knob({props:l}),binding_callbacks.push(()=>bind(r,"value",a)),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){s=o;const i={};c&8&&(i.id=`env-${s[17]}-a`),!n&&c&8&&(n=!0,i.value=s[12],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_default_slot_2$1(s){let r,n,t;function a(o){s[8](o,s[13],s[16],s[17])}let l={id:`env-${s[17]}-d`,pixelRange:200,min:.01,name:"d"};return s[13]!==void 0&&(l.value=s[13]),r=new Knob({props:l}),binding_callbacks.push(()=>bind(r,"value",a)),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){s=o;const i={};c&8&&(i.id=`env-${s[17]}-d`),!n&&c&8&&(n=!0,i.value=s[13],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_default_slot_1$3(s){let r,n,t;function a(o){s[9](o,s[14],s[16],s[17])}let l={id:`env-${s[17]}-s`,pixelRange:200,min:.01,name:"s"};return s[14]!==void 0&&(l.value=s[14]),r=new Knob({props:l}),binding_callbacks.push(()=>bind(r,"value",a)),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){s=o;const i={};c&8&&(i.id=`env-${s[17]}-s`),!n&&c&8&&(n=!0,i.value=s[14],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_default_slot$5(s){let r,n,t;function a(o){s[10](o,s[15],s[16],s[17])}let l={id:`env-${s[17]}-r`,pixelRange:200,min:.01,name:"r"};return s[15]!==void 0&&(l.value=s[15]),r=new Knob({props:l}),binding_callbacks.push(()=>bind(r,"value",a)),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){s=o;const i={};c&8&&(i.id=`env-${s[17]}-r`),!n&&c&8&&(n=!0,i.value=s[15],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_each_block$5(s,r){let n,t,a=r[11]+"",l,o,c,i,f,m,_,u,p,g,y,S,b,E,x,k,T,j,A,C;return f=new Tooltip({props:{type:"knob",element:`env-${r[17]+1}-a`,$$slots:{default:[create_default_slot_3]},$$scope:{ctx:r}}}),p=new Tooltip({props:{type:"knob",element:`env-${r[17]+1}-d`,$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:r}}}),b=new Tooltip({props:{type:"knob",element:`env-${r[17]+1}-s`,$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:r}}}),T=new Tooltip({props:{type:"knob",element:`env-${r[17]+1}-r`,$$slots:{default:[create_default_slot$5]},$$scope:{ctx:r}}}),{key:s,first:null,c(){n=element("div"),t=element("h3"),l=text(a),c=space(),i=element("div"),create_component(f.$$.fragment),_=space(),u=element("div"),create_component(p.$$.fragment),y=space(),S=element("div"),create_component(b.$$.fragment),x=space(),k=element("div"),create_component(T.$$.fragment),j=space(),this.h()},l(I){n=claim_element(I,"DIV",{class:!0});var F=children(n);t=claim_element(F,"H3",{class:!0});var N=children(t);l=claim_text(N,a),N.forEach(detach),F.forEach(detach),c=claim_space(I),i=claim_element(I,"DIV",{class:!0});var z=children(i);claim_component(f.$$.fragment,z),z.forEach(detach),_=claim_space(I),u=claim_element(I,"DIV",{class:!0});var R=children(u);claim_component(p.$$.fragment,R),R.forEach(detach),y=claim_space(I),S=claim_element(I,"DIV",{class:!0});var q=children(S);claim_component(b.$$.fragment,q),q.forEach(detach),x=claim_space(I),k=claim_element(I,"DIV",{class:!0});var M=children(k);claim_component(T.$$.fragment,M),j=claim_space(M),M.forEach(detach),this.h()},h(){attr(t,"class","svelte-86mbny"),attr(n,"class",o="knobs__title knobs__title--envelope__"+r[17]+" svelte-86mbny"),attr(i,"class",m=`knobs__knob knobs__knob--${r[11]}_a svelte-86mbny`),attr(u,"class",g=`knobs__knob knobs__knob--${r[11]}_d svelte-86mbny`),attr(S,"class",E=`knobs__knob knobs__knob--${r[11]}_s svelte-86mbny`),attr(k,"class",A=`knobs__knob knobs__knob--${r[11]}_r svelte-86mbny`),this.first=n},m(I,F){insert_hydration(I,n,F),append_hydration(n,t),append_hydration(t,l),insert_hydration(I,c,F),insert_hydration(I,i,F),mount_component(f,i,null),insert_hydration(I,_,F),insert_hydration(I,u,F),mount_component(p,u,null),insert_hydration(I,y,F),insert_hydration(I,S,F),mount_component(b,S,null),insert_hydration(I,x,F),insert_hydration(I,k,F),mount_component(T,k,null),append_hydration(k,j),C=!0},p(I,F){r=I,(!C||F&8)&&a!==(a=r[11]+"")&&set_data(l,a),(!C||F&8&&o!==(o="knobs__title knobs__title--envelope__"+r[17]+" svelte-86mbny"))&&attr(n,"class",o);const N={};F&8&&(N.element=`env-${r[17]+1}-a`),F&262152&&(N.$$scope={dirty:F,ctx:r}),f.$set(N),(!C||F&8&&m!==(m=`knobs__knob knobs__knob--${r[11]}_a svelte-86mbny`))&&attr(i,"class",m);const z={};F&8&&(z.element=`env-${r[17]+1}-d`),F&262152&&(z.$$scope={dirty:F,ctx:r}),p.$set(z),(!C||F&8&&g!==(g=`knobs__knob knobs__knob--${r[11]}_d svelte-86mbny`))&&attr(u,"class",g);const R={};F&8&&(R.element=`env-${r[17]+1}-s`),F&262152&&(R.$$scope={dirty:F,ctx:r}),b.$set(R),(!C||F&8&&E!==(E=`knobs__knob knobs__knob--${r[11]}_s svelte-86mbny`))&&attr(S,"class",E);const q={};F&8&&(q.element=`env-${r[17]+1}-r`),F&262152&&(q.$$scope={dirty:F,ctx:r}),T.$set(q),(!C||F&8&&A!==(A=`knobs__knob knobs__knob--${r[11]}_r svelte-86mbny`))&&attr(k,"class",A)},i(I){C||(transition_in(f.$$.fragment,I),transition_in(p.$$.fragment,I),transition_in(b.$$.fragment,I),transition_in(T.$$.fragment,I),C=!0)},o(I){transition_out(f.$$.fragment,I),transition_out(p.$$.fragment,I),transition_out(b.$$.fragment,I),transition_out(T.$$.fragment,I),C=!1},d(I){I&&detach(n),I&&detach(c),I&&detach(i),destroy_component(f),I&&detach(_),I&&detach(u),destroy_component(p),I&&detach(y),I&&detach(S),destroy_component(b),I&&detach(x),I&&detach(k),destroy_component(T)}}}function create_fragment$k(s){let r,n,t,a,l,o,c,i,f,m,_,u,p,g,y,S,b,E,x,k,T,j,A,C=[],I=new Map,F;c=new Tooltip({props:{element:"learn",$$slots:{default:[create_default_slot_7]},$$scope:{ctx:s}}}),m=new Tooltip({props:{element:"drone",$$slots:{default:[create_default_slot_5]},$$scope:{ctx:s}}}),g=new Keyboard({}),j=new Tooltip({props:{element:"vol",type:"knob",$$slots:{default:[create_default_slot_4]},$$scope:{ctx:s}}});let N=s[3];const z=R=>R[11];for(let R=0;R<N.length;R+=1){let q=get_each_context$5(s,N,R),M=z(q);I.set(M,C[R]=create_each_block$5(M,q))}return{c(){r=element("div"),n=element("h2"),t=text("Controls"),a=space(),l=element("div"),o=element("div"),create_component(c.$$.fragment),i=space(),f=element("div"),create_component(m.$$.fragment),_=space(),u=element("div"),p=element("div"),create_component(g.$$.fragment),y=space(),S=element("div"),b=element("div"),E=element("h3"),x=text("Vol"),k=space(),T=element("div"),create_component(j.$$.fragment),A=space();for(let R=0;R<C.length;R+=1)C[R].c();this.h()},l(R){r=claim_element(R,"DIV",{class:!0});var q=children(r);n=claim_element(q,"H2",{class:!0});var M=children(n);t=claim_text(M,"Controls"),M.forEach(detach),a=claim_space(q),l=claim_element(q,"DIV",{class:!0});var D=children(l);o=claim_element(D,"DIV",{class:!0});var X=children(o);claim_component(c.$$.fragment,X),X.forEach(detach),i=claim_space(D),f=claim_element(D,"DIV",{class:!0});var O=children(f);claim_component(m.$$.fragment,O),O.forEach(detach),D.forEach(detach),_=claim_space(q),u=claim_element(q,"DIV",{class:!0});var G=children(u);p=claim_element(G,"DIV",{class:!0});var K=children(p);claim_component(g.$$.fragment,K),K.forEach(detach),y=claim_space(G),S=claim_element(G,"DIV",{class:!0});var Z=children(S);b=claim_element(Z,"DIV",{class:!0});var U=children(b);E=claim_element(U,"H3",{class:!0});var V=children(E);x=claim_text(V,"Vol"),V.forEach(detach),U.forEach(detach),k=claim_space(Z),T=claim_element(Z,"DIV",{class:!0});var L=children(T);claim_component(j.$$.fragment,L),L.forEach(detach),A=claim_space(Z);for(let H=0;H<C.length;H+=1)C[H].l(Z);Z.forEach(detach),G.forEach(detach),q.forEach(detach),this.h()},h(){attr(n,"class","visually-hidden"),attr(o,"class","svelte-86mbny"),attr(f,"class","svelte-86mbny"),attr(l,"class","buttons svelte-86mbny"),attr(p,"class","keys svelte-86mbny"),attr(E,"class","svelte-86mbny"),attr(b,"class","knobs__title knobs__title--volume svelte-86mbny"),attr(T,"class","knobs__knob knobs__knob--vol svelte-86mbny"),attr(S,"class","knobs svelte-86mbny"),attr(u,"class","controller svelte-86mbny"),attr(r,"class","controls svelte-86mbny")},m(R,q){insert_hydration(R,r,q),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o),mount_component(c,o,null),append_hydration(l,i),append_hydration(l,f),mount_component(m,f,null),append_hydration(r,_),append_hydration(r,u),append_hydration(u,p),mount_component(g,p,null),append_hydration(u,y),append_hydration(u,S),append_hydration(S,b),append_hydration(b,E),append_hydration(E,x),append_hydration(S,k),append_hydration(S,T),mount_component(j,T,null),append_hydration(S,A);for(let M=0;M<C.length;M+=1)C[M]&&C[M].m(S,null);F=!0},p(R,[q]){const M={};q&262145&&(M.$$scope={dirty:q,ctx:R}),c.$set(M);const D={};q&262146&&(D.$$scope={dirty:q,ctx:R}),m.$set(D);const X={};q&262148&&(X.$$scope={dirty:q,ctx:R}),j.$set(X),q&8&&(N=R[3],group_outros(),C=update_keyed_each(C,q,z,1,R,N,I,S,outro_and_destroy_block,create_each_block$5,null,get_each_context$5),check_outros())},i(R){if(!F){transition_in(c.$$.fragment,R),transition_in(m.$$.fragment,R),transition_in(g.$$.fragment,R),transition_in(j.$$.fragment,R);for(let q=0;q<N.length;q+=1)transition_in(C[q]);F=!0}},o(R){transition_out(c.$$.fragment,R),transition_out(m.$$.fragment,R),transition_out(g.$$.fragment,R),transition_out(j.$$.fragment,R);for(let q=0;q<C.length;q+=1)transition_out(C[q]);F=!1},d(R){R&&detach(r),destroy_component(c),destroy_component(m),destroy_component(g),destroy_component(j);for(let q=0;q<C.length;q+=1)C[q].d()}}}function instance$i(s,r,n){let t,a,l,o;component_subscribe(s,learn,g=>n(0,t=g)),component_subscribe(s,drone,g=>n(1,a=g)),component_subscribe(s,volume,g=>n(2,l=g)),component_subscribe(s,envelopes,g=>n(3,o=g));const c=()=>learn.update(g=>!g),i=()=>drone.update(g=>!g);function f(g){l=g,volume.set(l)}function m(g,y,S,b){S[b].a=g,envelopes.set(o)}function _(g,y,S,b){S[b].d=g,envelopes.set(o)}function u(g,y,S,b){S[b].s=g,envelopes.set(o)}function p(g,y,S,b){S[b].r=g,envelopes.set(o)}return[t,a,l,o,c,i,f,m,_,u,p]}let Controls$1=class extends SvelteComponent{constructor(r){super(),init(this,r,instance$i,create_fragment$k,safe_not_equal,{})}};var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(s,r){module.exports=r()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(r){_useWebWorker=!!r},getWebWorker=function(){return _useWebWorker},setLocationHref=function(r){locationHref=r},getLocationHref=function(){return locationHref};function createTag(s){return document.createElement(s)}function extendPrototype(s,r){var n,t=s.length,a;for(n=0;n<t;n+=1){a=s[n].prototype;for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r.prototype[l]=a[l])}}function getDescriptor(s,r){return Object.getOwnPropertyDescriptor(s,r)}function createProxyFunction(s){function r(){}return r.prototype=s,r}var audioControllerFactory=function(){function s(r){this.audios=[],this.audioFactory=r,this._volume=1,this._isMuted=!1}return s.prototype={addAudio:function(n){this.audios.push(n)},pause:function(){var n,t=this.audios.length;for(n=0;n<t;n+=1)this.audios[n].pause()},resume:function(){var n,t=this.audios.length;for(n=0;n<t;n+=1)this.audios[n].resume()},setRate:function(n){var t,a=this.audios.length;for(t=0;t<a;t+=1)this.audios[t].setRate(n)},createAudio:function(n){return this.audioFactory?this.audioFactory(n):window.Howl?new window.Howl({src:[n]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(n){this.audioFactory=n},setVolume:function(n){this._volume=n,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var n,t=this.audios.length;for(n=0;n<t;n+=1)this.audios[n].volume(this._volume*(this._isMuted?0:1))}},function(){return new s}}(),createTypedArray=function(){function s(n,t){var a=0,l=[],o;switch(n){case"int16":case"uint8c":o=1;break;default:o=1.1;break}for(a=0;a<t;a+=1)l.push(o);return l}function r(n,t){return n==="float32"?new Float32Array(t):n==="int16"?new Int16Array(t):n==="uint8c"?new Uint8ClampedArray(t):s(n,t)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?r:s}();function createSizedArray(s){return Array.apply(null,{length:s})}function _typeof$6(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(n){return typeof n}:_typeof$6=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$6(s)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var s=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],r,n=s.length;for(r=0;r<n;r+=1)BMMath[s[r]]=Math[s[r]]})(),BMMath.random=Math.random,BMMath.abs=function(s){var r=_typeof$6(s);if(r==="object"&&s.length){var n=createSizedArray(s.length),t,a=s.length;for(t=0;t<a;t+=1)n[t]=Math.abs(s[t]);return n}return Math.abs(s)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(s){s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.display="block",s.style.transformOrigin="0 0",s.style.webkitTransformOrigin="0 0",s.style.backfaceVisibility="visible",s.style.webkitBackfaceVisibility="visible",s.style.transformStyle="preserve-3d",s.style.webkitTransformStyle="preserve-3d",s.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(s,r,n,t){this.type=s,this.currentTime=r,this.totalTime=n,this.direction=t<0?-1:1}function BMCompleteEvent(s,r){this.type=s,this.direction=r<0?-1:1}function BMCompleteLoopEvent(s,r,n,t){this.type=s,this.currentLoop=n,this.totalLoops=r,this.direction=t<0?-1:1}function BMSegmentStartEvent(s,r,n){this.type=s,this.firstFrame=r,this.totalFrames=n}function BMDestroyEvent(s,r){this.type=s,this.target=r}function BMRenderFrameErrorEvent(s,r){this.type="renderFrameError",this.nativeError=s,this.currentTime=r}function BMConfigErrorEvent(s){this.type="configError",this.nativeError=s}var createElementID=function(){var s=0;return function(){return s+=1,idPrefix$1+"__lottie_element_"+s}}();function HSVtoRGB(s,r,n){var t,a,l,o,c,i,f,m;switch(o=Math.floor(s*6),c=s*6-o,i=n*(1-r),f=n*(1-c*r),m=n*(1-(1-c)*r),o%6){case 0:t=n,a=m,l=i;break;case 1:t=f,a=n,l=i;break;case 2:t=i,a=n,l=m;break;case 3:t=i,a=f,l=n;break;case 4:t=m,a=i,l=n;break;case 5:t=n,a=i,l=f;break}return[t,a,l]}function RGBtoHSV(s,r,n){var t=Math.max(s,r,n),a=Math.min(s,r,n),l=t-a,o,c=t===0?0:l/t,i=t/255;switch(t){case a:o=0;break;case s:o=r-n+l*(r<n?6:0),o/=6*l;break;case r:o=n-s+l*2,o/=6*l;break;case n:o=s-r+l*4,o/=6*l;break}return[o,c,i]}function addSaturationToRGB(s,r){var n=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return n[1]+=r,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(s,r){var n=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return n[2]+=r,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(s,r){var n=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return n[0]+=r/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var s=[],r,n;for(r=0;r<256;r+=1)n=r.toString(16),s[r]=n.length===1?"0"+n:n;return function(t,a,l){return t<0&&(t=0),a<0&&(a=0),l<0&&(l=0),"#"+s[t]+s[a]+s[l]}}(),setSubframeEnabled=function(r){subframeEnabled=!!r},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(r){expressionsPlugin=r},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(r){expressionsInterfaces=r},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(r){defaultCurveSegments=r},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(r){idPrefix$1=r};function createNS(s){return document.createElementNS(svgNS,s)}function _typeof$5(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(n){return typeof n}:_typeof$5=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$5(s)}var dataManager=function(){var s=1,r=[],n,t,a={onmessage:function(){},postMessage:function(p){n({data:p})}},l={postMessage:function(p){a.onmessage({data:p})}};function o(u){if(window.Worker&&window.Blob&&getWebWorker()){var p=new Blob(["var _workerSelf = self; self.onmessage = ",u.toString()],{type:"text/javascript"}),g=URL.createObjectURL(p);return new Worker(g)}return n=u,a}function c(){t||(t=o(function(p){function g(){function S(M,D){var X,O,G=M.length,K,Z,U,V;for(O=0;O<G;O+=1)if(X=M[O],"ks"in X&&!X.completed){if(X.completed=!0,X.hasMask){var L=X.masksProperties;for(Z=L.length,K=0;K<Z;K+=1)if(L[K].pt.k.i)T(L[K].pt.k);else for(V=L[K].pt.k.length,U=0;U<V;U+=1)L[K].pt.k[U].s&&T(L[K].pt.k[U].s[0]),L[K].pt.k[U].e&&T(L[K].pt.k[U].e[0])}X.ty===0?(X.layers=x(X.refId,D),S(X.layers,D)):X.ty===4?k(X.shapes):X.ty===5&&R(X)}}function b(M,D){if(M){var X=0,O=M.length;for(X=0;X<O;X+=1)M[X].t===1&&(M[X].data.layers=x(M[X].data.refId,D),S(M[X].data.layers,D))}}function E(M,D){for(var X=0,O=D.length;X<O;){if(D[X].id===M)return D[X];X+=1}return null}function x(M,D){var X=E(M,D);return X?X.layers.__used?JSON.parse(JSON.stringify(X.layers)):(X.layers.__used=!0,X.layers):null}function k(M){var D,X=M.length,O,G;for(D=X-1;D>=0;D-=1)if(M[D].ty==="sh")if(M[D].ks.k.i)T(M[D].ks.k);else for(G=M[D].ks.k.length,O=0;O<G;O+=1)M[D].ks.k[O].s&&T(M[D].ks.k[O].s[0]),M[D].ks.k[O].e&&T(M[D].ks.k[O].e[0]);else M[D].ty==="gr"&&k(M[D].it)}function T(M){var D,X=M.i.length;for(D=0;D<X;D+=1)M.i[D][0]+=M.v[D][0],M.i[D][1]+=M.v[D][1],M.o[D][0]+=M.v[D][0],M.o[D][1]+=M.v[D][1]}function j(M,D){var X=D?D.split("."):[100,100,100];return M[0]>X[0]?!0:X[0]>M[0]?!1:M[1]>X[1]?!0:X[1]>M[1]?!1:M[2]>X[2]?!0:X[2]>M[2]?!1:null}var A=function(){var M=[4,4,14];function D(O){var G=O.t.d;O.t.d={k:[{s:G,t:0}]}}function X(O){var G,K=O.length;for(G=0;G<K;G+=1)O[G].ty===5&&D(O[G])}return function(O){if(j(M,O.v)&&(X(O.layers),O.assets)){var G,K=O.assets.length;for(G=0;G<K;G+=1)O.assets[G].layers&&X(O.assets[G].layers)}}}(),C=function(){var M=[4,7,99];return function(D){if(D.chars&&!j(M,D.v)){var X,O=D.chars.length;for(X=0;X<O;X+=1){var G=D.chars[X];G.data&&G.data.shapes&&(k(G.data.shapes),G.data.ip=0,G.data.op=99999,G.data.st=0,G.data.sr=1,G.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},D.chars[X].t||(G.data.shapes.push({ty:"no"}),G.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),I=function(){var M=[5,7,15];function D(O){var G=O.t.p;typeof G.a=="number"&&(G.a={a:0,k:G.a}),typeof G.p=="number"&&(G.p={a:0,k:G.p}),typeof G.r=="number"&&(G.r={a:0,k:G.r})}function X(O){var G,K=O.length;for(G=0;G<K;G+=1)O[G].ty===5&&D(O[G])}return function(O){if(j(M,O.v)&&(X(O.layers),O.assets)){var G,K=O.assets.length;for(G=0;G<K;G+=1)O.assets[G].layers&&X(O.assets[G].layers)}}}(),F=function(){var M=[4,1,9];function D(O){var G,K=O.length,Z,U;for(G=0;G<K;G+=1)if(O[G].ty==="gr")D(O[G].it);else if(O[G].ty==="fl"||O[G].ty==="st")if(O[G].c.k&&O[G].c.k[0].i)for(U=O[G].c.k.length,Z=0;Z<U;Z+=1)O[G].c.k[Z].s&&(O[G].c.k[Z].s[0]/=255,O[G].c.k[Z].s[1]/=255,O[G].c.k[Z].s[2]/=255,O[G].c.k[Z].s[3]/=255),O[G].c.k[Z].e&&(O[G].c.k[Z].e[0]/=255,O[G].c.k[Z].e[1]/=255,O[G].c.k[Z].e[2]/=255,O[G].c.k[Z].e[3]/=255);else O[G].c.k[0]/=255,O[G].c.k[1]/=255,O[G].c.k[2]/=255,O[G].c.k[3]/=255}function X(O){var G,K=O.length;for(G=0;G<K;G+=1)O[G].ty===4&&D(O[G].shapes)}return function(O){if(j(M,O.v)&&(X(O.layers),O.assets)){var G,K=O.assets.length;for(G=0;G<K;G+=1)O.assets[G].layers&&X(O.assets[G].layers)}}}(),N=function(){var M=[4,4,18];function D(O){var G,K=O.length,Z,U;for(G=K-1;G>=0;G-=1)if(O[G].ty==="sh")if(O[G].ks.k.i)O[G].ks.k.c=O[G].closed;else for(U=O[G].ks.k.length,Z=0;Z<U;Z+=1)O[G].ks.k[Z].s&&(O[G].ks.k[Z].s[0].c=O[G].closed),O[G].ks.k[Z].e&&(O[G].ks.k[Z].e[0].c=O[G].closed);else O[G].ty==="gr"&&D(O[G].it)}function X(O){var G,K,Z=O.length,U,V,L,H;for(K=0;K<Z;K+=1){if(G=O[K],G.hasMask){var J=G.masksProperties;for(V=J.length,U=0;U<V;U+=1)if(J[U].pt.k.i)J[U].pt.k.c=J[U].cl;else for(H=J[U].pt.k.length,L=0;L<H;L+=1)J[U].pt.k[L].s&&(J[U].pt.k[L].s[0].c=J[U].cl),J[U].pt.k[L].e&&(J[U].pt.k[L].e[0].c=J[U].cl)}G.ty===4&&D(G.shapes)}}return function(O){if(j(M,O.v)&&(X(O.layers),O.assets)){var G,K=O.assets.length;for(G=0;G<K;G+=1)O.assets[G].layers&&X(O.assets[G].layers)}}}();function z(M){M.__complete||(F(M),A(M),C(M),I(M),N(M),S(M.layers,M.assets),b(M.chars,M.assets),M.__complete=!0)}function R(M){M.t.a.length===0&&"m"in M.t.p}var q={};return q.completeData=z,q.checkColors=F,q.checkChars=C,q.checkPathProperties=I,q.checkShapes=N,q.completeLayers=S,q}if(l.dataManager||(l.dataManager=g()),l.assetLoader||(l.assetLoader=function(){function S(E){var x=E.getResponseHeader("content-type");return x&&E.responseType==="json"&&x.indexOf("json")!==-1||E.response&&_typeof$5(E.response)==="object"?E.response:E.response&&typeof E.response=="string"?JSON.parse(E.response):E.responseText?JSON.parse(E.responseText):null}function b(E,x,k,T){var j,A=new XMLHttpRequest;try{A.responseType="json"}catch{}A.onreadystatechange=function(){if(A.readyState===4)if(A.status===200)j=S(A),k(j);else try{j=S(A),k(j)}catch(C){T&&T(C)}};try{A.open(["G","E","T"].join(""),E,!0)}catch{A.open(["G","E","T"].join(""),x+"/"+E,!0)}A.send()}return{load:b}}()),p.data.type==="loadAnimation")l.assetLoader.load(p.data.path,p.data.fullPath,function(S){l.dataManager.completeData(S),l.postMessage({id:p.data.id,payload:S,status:"success"})},function(){l.postMessage({id:p.data.id,status:"error"})});else if(p.data.type==="complete"){var y=p.data.animation;l.dataManager.completeData(y),l.postMessage({id:p.data.id,payload:y,status:"success"})}else p.data.type==="loadData"&&l.assetLoader.load(p.data.path,p.data.fullPath,function(S){l.postMessage({id:p.data.id,payload:S,status:"success"})},function(){l.postMessage({id:p.data.id,status:"error"})})}),t.onmessage=function(u){var p=u.data,g=p.id,y=r[g];r[g]=null,p.status==="success"?y.onComplete(p.payload):y.onError&&y.onError()})}function i(u,p){s+=1;var g="processId_"+s;return r[g]={onComplete:u,onError:p},g}function f(u,p,g){c();var y=i(p,g);t.postMessage({type:"loadAnimation",path:u,fullPath:window.location.origin+window.location.pathname,id:y})}function m(u,p,g){c();var y=i(p,g);t.postMessage({type:"loadData",path:u,fullPath:window.location.origin+window.location.pathname,id:y})}function _(u,p,g){c();var y=i(p,g);t.postMessage({type:"complete",animation:u,id:y})}return{loadAnimation:f,loadData:m,completeAnimation:_}}(),ImagePreloader=function(){var s=function(){var b=createTag("canvas");b.width=1,b.height=1;var E=b.getContext("2d");return E.fillStyle="rgba(0,0,0,0)",E.fillRect(0,0,1,1),b}();function r(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function t(b,E,x){var k="";if(b.e)k=b.p;else if(E){var T=b.p;T.indexOf("images/")!==-1&&(T=T.split("/")[1]),k=E+T}else k=x,k+=b.u?b.u:"",k+=b.p;return k}function a(b){var E=0,x=setInterval((function(){var k=b.getBBox();(k.width||E>500)&&(this._imageLoaded(),clearInterval(x)),E+=1}).bind(this),50)}function l(b){var E=t(b,this.assetsPath,this.path),x=createNS("image");isSafari?this.testImageLoaded(x):x.addEventListener("load",this._imageLoaded,!1),x.addEventListener("error",(function(){k.img=s,this._imageLoaded()}).bind(this),!1),x.setAttributeNS("http://www.w3.org/1999/xlink","href",E),this._elementHelper.append?this._elementHelper.append(x):this._elementHelper.appendChild(x);var k={img:x,assetData:b};return k}function o(b){var E=t(b,this.assetsPath,this.path),x=createTag("img");x.crossOrigin="anonymous",x.addEventListener("load",this._imageLoaded,!1),x.addEventListener("error",(function(){k.img=s,this._imageLoaded()}).bind(this),!1),x.src=E;var k={img:x,assetData:b};return k}function c(b){var E={assetData:b},x=t(b,this.assetsPath,this.path);return dataManager.loadData(x,(function(k){E.img=k,this._footageLoaded()}).bind(this),(function(){E.img={},this._footageLoaded()}).bind(this)),E}function i(b,E){this.imagesLoadedCb=E;var x,k=b.length;for(x=0;x<k;x+=1)b[x].layers||(!b[x].t||b[x].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(b[x]))):b[x].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(b[x]))))}function f(b){this.path=b||""}function m(b){this.assetsPath=b||""}function _(b){for(var E=0,x=this.images.length;E<x;){if(this.images[E].assetData===b)return this.images[E].img;E+=1}return null}function u(){this.imagesLoadedCb=null,this.images.length=0}function p(){return this.totalImages===this.loadedAssets}function g(){return this.totalFootages===this.loadedFootagesCount}function y(b,E){b==="svg"?(this._elementHelper=E,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function S(){this._imageLoaded=r.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=c.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return S.prototype={loadAssets:i,setAssetsPath:m,setPath:f,loadedImages:p,loadedFootages:g,destroy:u,getAsset:_,createImgData:o,createImageData:l,imageLoaded:r,footageLoaded:n,setCacheType:y},S}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(r,n){if(this._cbs[r])for(var t=this._cbs[r],a=0;a<t.length;a+=1)t[a](n)},addEventListener:function(r,n){return this._cbs[r]||(this._cbs[r]=[]),this._cbs[r].push(n),(function(){this.removeEventListener(r,n)}).bind(this)},removeEventListener:function(r,n){if(!n)this._cbs[r]=null;else if(this._cbs[r]){for(var t=0,a=this._cbs[r].length;t<a;)this._cbs[r][t]===n&&(this._cbs[r].splice(t,1),t-=1,a-=1),t+=1;this._cbs[r].length||(this._cbs[r]=null)}}};var markerParser=function(){function s(r){for(var n=r.split(`\r
`),t={},a,l=0,o=0;o<n.length;o+=1)a=n[o].split(":"),a.length===2&&(t[a[0]]=a[1].trim(),l+=1);if(l===0)throw new Error;return t}return function(r){for(var n=[],t=0;t<r.length;t+=1){var a=r[t],l={time:a.tm,duration:a.dr};try{l.payload=JSON.parse(r[t].cm)}catch{try{l.payload=s(r[t].cm)}catch{l.payload={name:r[t].cm}}}n.push(l)}return n}}(),ProjectInterface=function(){function s(r){this.compositions.push(r)}return function(){function r(n){for(var t=0,a=this.compositions.length;t<a;){if(this.compositions[t].data&&this.compositions[t].data.nm===n)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return r.compositions=[],r.currentFrame=0,r.registerComposition=s,r}}(),renderers={},registerRenderer=function(r,n){renderers[r]=n};function getRenderer(s){return renderers[s]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var s in renderers)if(renderers[s])return s;return""}function _typeof$4(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(n){return typeof n}:_typeof$4=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$4(s)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(s){(s.wrapper||s.container)&&(this.wrapper=s.wrapper||s.container);var r="svg";s.animType?r=s.animType:s.renderer&&(r=s.renderer);var n=getRenderer(r);this.renderer=new n(this,s.rendererSettings),this.imagePreloader.setCacheType(r,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=r,s.loop===""||s.loop===null||s.loop===void 0||s.loop===!0?this.loop=!0:s.loop===!1?this.loop=!1:this.loop=parseInt(s.loop,10),this.autoplay="autoplay"in s?s.autoplay:!0,this.name=s.name?s.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(s,"autoloadSegments")?s.autoloadSegments:!0,this.assetsPath=s.assetsPath,this.initialSegment=s.initialSegment,s.audioFactory&&this.audioController.setAudioFactory(s.audioFactory),s.animationData?this.setupAnimation(s.animationData):s.path&&(s.path.lastIndexOf("\\")!==-1?this.path=s.path.substr(0,s.path.lastIndexOf("\\")+1):this.path=s.path.substr(0,s.path.lastIndexOf("/")+1),this.fileName=s.path.substr(s.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(s.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(s){dataManager.completeAnimation(s,this.configAnimation)},AnimationItem.prototype.setData=function(s,r){r&&_typeof$4(r)!=="object"&&(r=JSON.parse(r));var n={wrapper:s,animationData:r},t=s.attributes;n.path=t.getNamedItem("data-animation-path")?t.getNamedItem("data-animation-path").value:t.getNamedItem("data-bm-path")?t.getNamedItem("data-bm-path").value:t.getNamedItem("bm-path")?t.getNamedItem("bm-path").value:"",n.animType=t.getNamedItem("data-anim-type")?t.getNamedItem("data-anim-type").value:t.getNamedItem("data-bm-type")?t.getNamedItem("data-bm-type").value:t.getNamedItem("bm-type")?t.getNamedItem("bm-type").value:t.getNamedItem("data-bm-renderer")?t.getNamedItem("data-bm-renderer").value:t.getNamedItem("bm-renderer")?t.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var a=t.getNamedItem("data-anim-loop")?t.getNamedItem("data-anim-loop").value:t.getNamedItem("data-bm-loop")?t.getNamedItem("data-bm-loop").value:t.getNamedItem("bm-loop")?t.getNamedItem("bm-loop").value:"";a==="false"?n.loop=!1:a==="true"?n.loop=!0:a!==""&&(n.loop=parseInt(a,10));var l=t.getNamedItem("data-anim-autoplay")?t.getNamedItem("data-anim-autoplay").value:t.getNamedItem("data-bm-autoplay")?t.getNamedItem("data-bm-autoplay").value:t.getNamedItem("bm-autoplay")?t.getNamedItem("bm-autoplay").value:!0;n.autoplay=l!=="false",n.name=t.getNamedItem("data-name")?t.getNamedItem("data-name").value:t.getNamedItem("data-bm-name")?t.getNamedItem("data-bm-name").value:t.getNamedItem("bm-name")?t.getNamedItem("bm-name").value:"";var o=t.getNamedItem("data-anim-prerender")?t.getNamedItem("data-anim-prerender").value:t.getNamedItem("data-bm-prerender")?t.getNamedItem("data-bm-prerender").value:t.getNamedItem("bm-prerender")?t.getNamedItem("bm-prerender").value:"";o==="false"&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(s){s.op>this.animationData.op&&(this.animationData.op=s.op,this.totalFrames=Math.floor(s.op-this.animationData.ip));var r=this.animationData.layers,n,t=r.length,a=s.layers,l,o=a.length;for(l=0;l<o;l+=1)for(n=0;n<t;){if(r[n].id===a[l].id){r[n]=a[l];break}n+=1}if((s.chars||s.fonts)&&(this.renderer.globalData.fontManager.addChars(s.chars),this.renderer.globalData.fontManager.addFonts(s.fonts,this.renderer.globalData.defs)),s.assets)for(t=s.assets.length,n=0;n<t;n+=1)this.animationData.assets.push(s.assets[n]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(s){this.animationData=s;var r=getExpressionsPlugin();r&&r.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var s=this.animationData.segments;if(!s||s.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var r=s.shift();this.timeCompleted=r.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var s=this.animationData.segments;s||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(s){if(this.renderer)try{this.animationData=s,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(s),s.assets||(s.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(s.assets),this.markers=markerParser(s.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(r){this.triggerConfigError(r)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var s=getExpressionsPlugin();s&&s.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(s,r){var n=typeof s=="number"?s:void 0,t=typeof r=="number"?r:void 0;this.renderer.updateContainerSize(n,t)},AnimationItem.prototype.setSubframe=function(s){this.isSubframeEnabled=!!s},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(s){this.triggerRenderFrameError(s)}},AnimationItem.prototype.play=function(s){s&&this.name!==s||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(s){s&&this.name!==s||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(s){s&&this.name!==s||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(s){s&&this.name!==s||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(s){for(var r,n=0;n<this.markers.length;n+=1)if(r=this.markers[n],r.payload&&r.payload.name===s)return r;return null},AnimationItem.prototype.goToAndStop=function(s,r,n){if(!(n&&this.name!==n)){var t=Number(s);if(isNaN(t)){var a=this.getMarkerData(s);a&&this.goToAndStop(a.time,!0)}else r?this.setCurrentRawFrameValue(s):this.setCurrentRawFrameValue(s*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(s,r,n){if(!(n&&this.name!==n)){var t=Number(s);if(isNaN(t)){var a=this.getMarkerData(s);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(t,r,n);this.play()}},AnimationItem.prototype.advanceTime=function(s){if(!(this.isPaused===!0||this.isLoaded===!1)){var r=this.currentRawFrame+s*this.frameModifier,n=!1;r>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(r>this.totalFrames?r%this.totalFrames:0)||(n=!0,r=this.totalFrames-1):r>=this.totalFrames?(this.playCount+=1,this.checkSegments(r%this.totalFrames)||(this.setCurrentRawFrameValue(r%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(r):r<0?this.checkSegments(r%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+r%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(n=!0,r=0)):this.setCurrentRawFrameValue(r),n&&(this.setCurrentRawFrameValue(r),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(s,r){this.playCount=0,s[1]<s[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=s[0]-s[1],this.timeCompleted=this.totalFrames,this.firstFrame=s[1],this.setCurrentRawFrameValue(this.totalFrames-.001-r)):s[1]>s[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=s[1]-s[0],this.timeCompleted=this.totalFrames,this.firstFrame=s[0],this.setCurrentRawFrameValue(.001+r)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(s,r){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<s?n=s:this.currentRawFrame+this.firstFrame>r&&(n=r-s)),this.firstFrame=s,this.totalFrames=r-s,this.timeCompleted=this.totalFrames,n!==-1&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(s,r){if(r&&(this.segments.length=0),_typeof$4(s[0])==="object"){var n,t=s.length;for(n=0;n<t;n+=1)this.segments.push(s[n])}else this.segments.push(s);this.segments.length&&r&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(s){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),s&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(s){return this.segments.length?(this.adjustSegment(this.segments.shift(),s),!0):!1},AnimationItem.prototype.destroy=function(s){s&&this.name!==s||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(s){this.currentRawFrame=s,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(s){this.playSpeed=s,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(s){this.playDirection=s<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(s){this.loop=s},AnimationItem.prototype.setVolume=function(s,r){r&&this.name!==r||this.audioController.setVolume(s)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(s){s&&this.name!==s||this.audioController.mute()},AnimationItem.prototype.unmute=function(s){s&&this.name!==s||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(s){var r="";if(s.e)r=s.p;else if(this.assetsPath){var n=s.p;n.indexOf("images/")!==-1&&(n=n.split("/")[1]),r=this.assetsPath+n}else r=this.path,r+=s.u?s.u:"",r+=s.p;return r},AnimationItem.prototype.getAssetData=function(s){for(var r=0,n=this.assets.length;r<n;){if(s===this.assets[r].id)return this.assets[r];r+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(s){return s?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(s,r,n){try{var t=this.renderer.getElementByPath(s);t.updateDocumentData(r,n)}catch{}},AnimationItem.prototype.trigger=function(s){if(this._cbs&&this._cbs[s])switch(s){case"enterFrame":this.triggerEvent(s,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(s,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(s,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(s,new BMCompleteEvent(s,this.frameMult));break;case"segmentStart":this.triggerEvent(s,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(s,new BMDestroyEvent(s,this));break;default:this.triggerEvent(s)}s==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameMult)),s==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult)),s==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(s,this.frameMult)),s==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames)),s==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(s,this))},AnimationItem.prototype.triggerRenderFrameError=function(s){var r=new BMRenderFrameErrorEvent(s,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)},AnimationItem.prototype.triggerConfigError=function(s){var r=new BMConfigErrorEvent(s,this.currentFrame);this.triggerEvent("error",r),this.onError&&this.onError.call(this,r)};var animationManager=function(){var s={},r=[],n=0,t=0,a=0,l=!0,o=!1;function c(D){for(var X=0,O=D.target;X<t;)r[X].animation===O&&(r.splice(X,1),X-=1,t-=1,O.isPaused||_()),X+=1}function i(D,X){if(!D)return null;for(var O=0;O<t;){if(r[O].elem===D&&r[O].elem!==null)return r[O].animation;O+=1}var G=new AnimationItem;return u(G,D),G.setData(D,X),G}function f(){var D,X=r.length,O=[];for(D=0;D<X;D+=1)O.push(r[D].animation);return O}function m(){a+=1,F()}function _(){a-=1}function u(D,X){D.addEventListener("destroy",c),D.addEventListener("_active",m),D.addEventListener("_idle",_),r.push({elem:X,animation:D}),t+=1}function p(D){var X=new AnimationItem;return u(X,null),X.setParams(D),X}function g(D,X){var O;for(O=0;O<t;O+=1)r[O].animation.setSpeed(D,X)}function y(D,X){var O;for(O=0;O<t;O+=1)r[O].animation.setDirection(D,X)}function S(D){var X;for(X=0;X<t;X+=1)r[X].animation.play(D)}function b(D){var X=D-n,O;for(O=0;O<t;O+=1)r[O].animation.advanceTime(X);n=D,a&&!o?window.requestAnimationFrame(b):l=!0}function E(D){n=D,window.requestAnimationFrame(b)}function x(D){var X;for(X=0;X<t;X+=1)r[X].animation.pause(D)}function k(D,X,O){var G;for(G=0;G<t;G+=1)r[G].animation.goToAndStop(D,X,O)}function T(D){var X;for(X=0;X<t;X+=1)r[X].animation.stop(D)}function j(D){var X;for(X=0;X<t;X+=1)r[X].animation.togglePause(D)}function A(D){var X;for(X=t-1;X>=0;X-=1)r[X].animation.destroy(D)}function C(D,X,O){var G=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),K,Z=G.length;for(K=0;K<Z;K+=1)O&&G[K].setAttribute("data-bm-type",O),i(G[K],D);if(X&&Z===0){O||(O="svg");var U=document.getElementsByTagName("body")[0];U.innerText="";var V=createTag("div");V.style.width="100%",V.style.height="100%",V.setAttribute("data-bm-type",O),U.appendChild(V),i(V,D)}}function I(){var D;for(D=0;D<t;D+=1)r[D].animation.resize()}function F(){!o&&a&&l&&(window.requestAnimationFrame(E),l=!1)}function N(){o=!0}function z(){o=!1,F()}function R(D,X){var O;for(O=0;O<t;O+=1)r[O].animation.setVolume(D,X)}function q(D){var X;for(X=0;X<t;X+=1)r[X].animation.mute(D)}function M(D){var X;for(X=0;X<t;X+=1)r[X].animation.unmute(D)}return s.registerAnimation=i,s.loadAnimation=p,s.setSpeed=g,s.setDirection=y,s.play=S,s.pause=x,s.stop=T,s.togglePause=j,s.searchAnimations=C,s.resize=I,s.goToAndStop=k,s.destroy=A,s.freeze=N,s.unfreeze=z,s.setVolume=R,s.mute=q,s.unmute=M,s.getRegisteredAnimations=f,s}(),BezierFactory=function(){var s={};s.getBezierEasing=n;var r={};function n(E,x,k,T,j){var A=j||("bez_"+E+"_"+x+"_"+k+"_"+T).replace(/\./g,"p");if(r[A])return r[A];var C=new b([E,x,k,T]);return r[A]=C,C}var t=4,a=.001,l=1e-7,o=10,c=11,i=1/(c-1),f=typeof Float32Array=="function";function m(E,x){return 1-3*x+3*E}function _(E,x){return 3*x-6*E}function u(E){return 3*E}function p(E,x,k){return((m(x,k)*E+_(x,k))*E+u(x))*E}function g(E,x,k){return 3*m(x,k)*E*E+2*_(x,k)*E+u(x)}function y(E,x,k,T,j){var A,C,I=0;do C=x+(k-x)/2,A=p(C,T,j)-E,A>0?k=C:x=C;while(Math.abs(A)>l&&++I<o);return C}function S(E,x,k,T){for(var j=0;j<t;++j){var A=g(x,k,T);if(A===0)return x;var C=p(x,k,T)-E;x-=C/A}return x}function b(E){this._p=E,this._mSampleValues=f?new Float32Array(c):new Array(c),this._precomputed=!1,this.get=this.get.bind(this)}return b.prototype={get:function(x){var k=this._p[0],T=this._p[1],j=this._p[2],A=this._p[3];return this._precomputed||this._precompute(),k===T&&j===A?x:x===0?0:x===1?1:p(this._getTForX(x),T,A)},_precompute:function(){var x=this._p[0],k=this._p[1],T=this._p[2],j=this._p[3];this._precomputed=!0,(x!==k||T!==j)&&this._calcSampleValues()},_calcSampleValues:function(){for(var x=this._p[0],k=this._p[2],T=0;T<c;++T)this._mSampleValues[T]=p(T*i,x,k)},_getTForX:function(x){for(var k=this._p[0],T=this._p[2],j=this._mSampleValues,A=0,C=1,I=c-1;C!==I&&j[C]<=x;++C)A+=i;--C;var F=(x-j[C])/(j[C+1]-j[C]),N=A+F*i,z=g(N,k,T);return z>=a?S(x,N,k,T):z===0?N:y(x,A,A+i,k,T)}},s}(),pooling=function(){function s(r){return r.concat(createSizedArray(r.length))}return{double:s}}(),poolFactory=function(){return function(s,r,n){var t=0,a=s,l=createSizedArray(a),o={newElement:c,release:i};function c(){var f;return t?(t-=1,f=l[t]):f=r(),f}function i(f){t===a&&(l=pooling.double(l),a*=2),n&&n(f),l[t]=f,t+=1}return o}}(),bezierLengthPool=function(){function s(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,s)}(),segmentsLengthPool=function(){function s(){return{lengths:[],totalLength:0}}function r(n){var t,a=n.lengths.length;for(t=0;t<a;t+=1)bezierLengthPool.release(n.lengths[t]);n.lengths.length=0}return poolFactory(8,s,r)}();function bezFunction(){var s=Math;function r(u,p,g,y,S,b){var E=u*y+p*S+g*b-S*y-b*u-g*p;return E>-.001&&E<.001}function n(u,p,g,y,S,b,E,x,k){if(g===0&&b===0&&k===0)return r(u,p,y,S,E,x);var T=s.sqrt(s.pow(y-u,2)+s.pow(S-p,2)+s.pow(b-g,2)),j=s.sqrt(s.pow(E-u,2)+s.pow(x-p,2)+s.pow(k-g,2)),A=s.sqrt(s.pow(E-y,2)+s.pow(x-S,2)+s.pow(k-b,2)),C;return T>j?T>A?C=T-j-A:C=A-j-T:A>j?C=A-j-T:C=j-T-A,C>-1e-4&&C<1e-4}var t=function(){return function(u,p,g,y){var S=getDefaultCurveSegments(),b,E,x,k,T,j=0,A,C=[],I=[],F=bezierLengthPool.newElement();for(x=g.length,b=0;b<S;b+=1){for(T=b/(S-1),A=0,E=0;E<x;E+=1)k=bmPow(1-T,3)*u[E]+3*bmPow(1-T,2)*T*g[E]+3*(1-T)*bmPow(T,2)*y[E]+bmPow(T,3)*p[E],C[E]=k,I[E]!==null&&(A+=bmPow(C[E]-I[E],2)),I[E]=C[E];A&&(A=bmSqrt(A),j+=A),F.percents[b]=T,F.lengths[b]=j}return F.addedLength=j,F}}();function a(u){var p=segmentsLengthPool.newElement(),g=u.c,y=u.v,S=u.o,b=u.i,E,x=u._length,k=p.lengths,T=0;for(E=0;E<x-1;E+=1)k[E]=t(y[E],y[E+1],S[E],b[E+1]),T+=k[E].addedLength;return g&&x&&(k[E]=t(y[E],y[0],S[E],b[0]),T+=k[E].addedLength),p.totalLength=T,p}function l(u){this.segmentLength=0,this.points=new Array(u)}function o(u,p){this.partialLength=u,this.point=p}var c=function(){var u={};return function(p,g,y,S){var b=(p[0]+"_"+p[1]+"_"+g[0]+"_"+g[1]+"_"+y[0]+"_"+y[1]+"_"+S[0]+"_"+S[1]).replace(/\./g,"p");if(!u[b]){var E=getDefaultCurveSegments(),x,k,T,j,A,C=0,I,F,N=null;p.length===2&&(p[0]!==g[0]||p[1]!==g[1])&&r(p[0],p[1],g[0],g[1],p[0]+y[0],p[1]+y[1])&&r(p[0],p[1],g[0],g[1],g[0]+S[0],g[1]+S[1])&&(E=2);var z=new l(E);for(T=y.length,x=0;x<E;x+=1){for(F=createSizedArray(T),A=x/(E-1),I=0,k=0;k<T;k+=1)j=bmPow(1-A,3)*p[k]+3*bmPow(1-A,2)*A*(p[k]+y[k])+3*(1-A)*bmPow(A,2)*(g[k]+S[k])+bmPow(A,3)*g[k],F[k]=j,N!==null&&(I+=bmPow(F[k]-N[k],2));I=bmSqrt(I),C+=I,z.points[x]=new o(I,F),N=F}z.segmentLength=C,u[b]=z}return u[b]}}();function i(u,p){var g=p.percents,y=p.lengths,S=g.length,b=bmFloor((S-1)*u),E=u*p.addedLength,x=0;if(b===S-1||b===0||E===y[b])return g[b];for(var k=y[b]>E?-1:1,T=!0;T;)if(y[b]<=E&&y[b+1]>E?(x=(E-y[b])/(y[b+1]-y[b]),T=!1):b+=k,b<0||b>=S-1){if(b===S-1)return g[b];T=!1}return g[b]+(g[b+1]-g[b])*x}function f(u,p,g,y,S,b){var E=i(S,b),x=1-E,k=s.round((x*x*x*u[0]+(E*x*x+x*E*x+x*x*E)*g[0]+(E*E*x+x*E*E+E*x*E)*y[0]+E*E*E*p[0])*1e3)/1e3,T=s.round((x*x*x*u[1]+(E*x*x+x*E*x+x*x*E)*g[1]+(E*E*x+x*E*E+E*x*E)*y[1]+E*E*E*p[1])*1e3)/1e3;return[k,T]}var m=createTypedArray("float32",8);function _(u,p,g,y,S,b,E){S<0?S=0:S>1&&(S=1);var x=i(S,E);b=b>1?1:b;var k=i(b,E),T,j=u.length,A=1-x,C=1-k,I=A*A*A,F=x*A*A*3,N=x*x*A*3,z=x*x*x,R=A*A*C,q=x*A*C+A*x*C+A*A*k,M=x*x*C+A*x*k+x*A*k,D=x*x*k,X=A*C*C,O=x*C*C+A*k*C+A*C*k,G=x*k*C+A*k*k+x*C*k,K=x*k*k,Z=C*C*C,U=k*C*C+C*k*C+C*C*k,V=k*k*C+C*k*k+k*C*k,L=k*k*k;for(T=0;T<j;T+=1)m[T*4]=s.round((I*u[T]+F*g[T]+N*y[T]+z*p[T])*1e3)/1e3,m[T*4+1]=s.round((R*u[T]+q*g[T]+M*y[T]+D*p[T])*1e3)/1e3,m[T*4+2]=s.round((X*u[T]+O*g[T]+G*y[T]+K*p[T])*1e3)/1e3,m[T*4+3]=s.round((Z*u[T]+U*g[T]+V*y[T]+L*p[T])*1e3)/1e3;return m}return{getSegmentsLength:a,getNewSegment:_,getPointInSegment:f,buildBezierData:c,pointOnLine2D:r,pointOnLine3D:n}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(s,r){var n=this.offsetTime,t;this.propType==="multidimensional"&&(t=createTypedArray("float32",this.pv.length));for(var a=r.lastIndex,l=a,o=this.keyframes.length-1,c=!0,i,f,m;c;){if(i=this.keyframes[l],f=this.keyframes[l+1],l===o-1&&s>=f.t-n){i.h&&(i=f),a=0;break}if(f.t-n>s){a=l;break}l<o-1?l+=1:(a=0,c=!1)}m=this.keyframesMetadata[l]||{};var _,u,p,g,y,S,b=f.t-n,E=i.t-n,x;if(i.to){m.bezierData||(m.bezierData=bez.buildBezierData(i.s,f.s||i.e,i.to,i.ti));var k=m.bezierData;if(s>=b||s<E){var T=s>=b?k.points.length-1:0;for(u=k.points[T].point.length,_=0;_<u;_+=1)t[_]=k.points[T].point[_]}else{m.__fnct?S=m.__fnct:(S=BezierFactory.getBezierEasing(i.o.x,i.o.y,i.i.x,i.i.y,i.n).get,m.__fnct=S),p=S((s-E)/(b-E));var j=k.segmentLength*p,A,C=r.lastFrame<s&&r._lastKeyframeIndex===l?r._lastAddedLength:0;for(y=r.lastFrame<s&&r._lastKeyframeIndex===l?r._lastPoint:0,c=!0,g=k.points.length;c;){if(C+=k.points[y].partialLength,j===0||p===0||y===k.points.length-1){for(u=k.points[y].point.length,_=0;_<u;_+=1)t[_]=k.points[y].point[_];break}else if(j>=C&&j<C+k.points[y+1].partialLength){for(A=(j-C)/k.points[y+1].partialLength,u=k.points[y].point.length,_=0;_<u;_+=1)t[_]=k.points[y].point[_]+(k.points[y+1].point[_]-k.points[y].point[_])*A;break}y<g-1?y+=1:c=!1}r._lastPoint=y,r._lastAddedLength=C-k.points[y].partialLength,r._lastKeyframeIndex=l}}else{var I,F,N,z,R;if(o=i.s.length,x=f.s||i.e,this.sh&&i.h!==1)if(s>=b)t[0]=x[0],t[1]=x[1],t[2]=x[2];else if(s<=E)t[0]=i.s[0],t[1]=i.s[1],t[2]=i.s[2];else{var q=createQuaternion(i.s),M=createQuaternion(x),D=(s-E)/(b-E);quaternionToEuler(t,slerp(q,M,D))}else for(l=0;l<o;l+=1)i.h!==1&&(s>=b?p=1:s<E?p=0:(i.o.x.constructor===Array?(m.__fnct||(m.__fnct=[]),m.__fnct[l]?S=m.__fnct[l]:(I=i.o.x[l]===void 0?i.o.x[0]:i.o.x[l],F=i.o.y[l]===void 0?i.o.y[0]:i.o.y[l],N=i.i.x[l]===void 0?i.i.x[0]:i.i.x[l],z=i.i.y[l]===void 0?i.i.y[0]:i.i.y[l],S=BezierFactory.getBezierEasing(I,F,N,z).get,m.__fnct[l]=S)):m.__fnct?S=m.__fnct:(I=i.o.x,F=i.o.y,N=i.i.x,z=i.i.y,S=BezierFactory.getBezierEasing(I,F,N,z).get,i.keyframeMetadata=S),p=S((s-E)/(b-E)))),x=f.s||i.e,R=i.h===1?i.s[l]:i.s[l]+(x[l]-i.s[l])*p,this.propType==="multidimensional"?t[l]=R:t=R}return r.lastIndex=a,t}function slerp(s,r,n){var t=[],a=s[0],l=s[1],o=s[2],c=s[3],i=r[0],f=r[1],m=r[2],_=r[3],u,p,g,y,S;return p=a*i+l*f+o*m+c*_,p<0&&(p=-p,i=-i,f=-f,m=-m,_=-_),1-p>1e-6?(u=Math.acos(p),g=Math.sin(u),y=Math.sin((1-n)*u)/g,S=Math.sin(n*u)/g):(y=1-n,S=n),t[0]=y*a+S*i,t[1]=y*l+S*f,t[2]=y*o+S*m,t[3]=y*c+S*_,t}function quaternionToEuler(s,r){var n=r[0],t=r[1],a=r[2],l=r[3],o=Math.atan2(2*t*l-2*n*a,1-2*t*t-2*a*a),c=Math.asin(2*n*t+2*a*l),i=Math.atan2(2*n*l-2*t*a,1-2*n*n-2*a*a);s[0]=o/degToRads,s[1]=c/degToRads,s[2]=i/degToRads}function createQuaternion(s){var r=s[0]*degToRads,n=s[1]*degToRads,t=s[2]*degToRads,a=Math.cos(r/2),l=Math.cos(n/2),o=Math.cos(t/2),c=Math.sin(r/2),i=Math.sin(n/2),f=Math.sin(t/2),m=a*l*o-c*i*f,_=c*i*o+a*l*f,u=c*l*o+a*i*f,p=a*i*o-c*l*f;return[_,u,p,m]}function getValueAtCurrentTime(){var s=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(s===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&s>=n||this._caching.lastFrame<r&&s<r))){this._caching.lastFrame>=s&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var t=this.interpolateValue(s,this._caching);this.pv=t}return this._caching.lastFrame=s,this.pv}function setVValue(s){var r;if(this.propType==="unidimensional")r=s*this.mult,mathAbs(this.v-r)>1e-5&&(this.v=r,this._mdf=!0);else for(var n=0,t=this.v.length;n<t;)r=s[n]*this.mult,mathAbs(this.v[n]-r)>1e-5&&(this.v[n]=r,this._mdf=!0),n+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var s,r=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(s=0;s<r;s+=1)n=this.effectsSequence[s](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(s){this.effectsSequence.push(s),this.container.addDynamicProperty(this)}function ValueProperty(s,r,n,t){this.propType="unidimensional",this.mult=n||1,this.data=r,this.v=n?r.k*n:r.k,this.pv=r.k,this._mdf=!1,this.elem=s,this.container=t,this.comp=s.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(s,r,n,t){this.propType="multidimensional",this.mult=n||1,this.data=r,this._mdf=!1,this.elem=s,this.container=t,this.comp=s.comp,this.k=!1,this.kf=!1,this.frameId=-1;var a,l=r.k.length;for(this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l),this.vel=createTypedArray("float32",l),a=0;a<l;a+=1)this.v[a]=r.k[a]*this.mult,this.pv[a]=r.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(s,r,n,t){this.propType="unidimensional",this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=s.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=n||1,this.elem=s,this.container=t,this.comp=s.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(s,r,n,t){this.propType="multidimensional";var a,l=r.k.length,o,c,i,f;for(a=0;a<l-1;a+=1)r.k[a].to&&r.k[a].s&&r.k[a+1]&&r.k[a+1].s&&(o=r.k[a].s,c=r.k[a+1].s,i=r.k[a].to,f=r.k[a].ti,(o.length===2&&!(o[0]===c[0]&&o[1]===c[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],o[0]+i[0],o[1]+i[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],c[0]+f[0],c[1]+f[1])||o.length===3&&!(o[0]===c[0]&&o[1]===c[1]&&o[2]===c[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],o[0]+i[0],o[1]+i[1],o[2]+i[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],c[0]+f[0],c[1]+f[1],c[2]+f[2]))&&(r.k[a].to=null,r.k[a].ti=null),o[0]===c[0]&&o[1]===c[1]&&i[0]===0&&i[1]===0&&f[0]===0&&f[1]===0&&(o.length===2||o[2]===c[2]&&i[2]===0&&f[2]===0)&&(r.k[a].to=null,r.k[a].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=r,this.keyframes=r.k,this.keyframesMetadata=[],this.offsetTime=s.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=s,this.container=t,this.comp=s.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var m=r.k[0].s.length;for(this.v=createTypedArray("float32",m),this.pv=createTypedArray("float32",m),a=0;a<m;a+=1)this.v[a]=initFrame,this.pv[a]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",m)},this.addEffect=addEffect}var PropertyFactory=function(){function s(n,t,a,l,o){t.sid&&(t=n.globalData.slotManager.getProp(t));var c;if(!t.k.length)c=new ValueProperty(n,t,l,o);else if(typeof t.k[0]=="number")c=new MultiDimensionalProperty(n,t,l,o);else switch(a){case 0:c=new KeyframedValueProperty(n,t,l,o);break;case 1:c=new KeyframedMultidimensionalProperty(n,t,l,o);break}return c.effectsSequence.length&&o.addDynamicProperty(c),c}var r={getProp:s};return r}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&(this.dynamicProperties.push(r),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var r,n=this.dynamicProperties.length;for(r=0;r<n;r+=1)this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(r){this.container=r,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function s(){return createTypedArray("float32",2)}return poolFactory(8,s)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(s,r){this.c=s,this.setLength(r);for(var n=0;n<r;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(s){for(;this._maxLength<s;)this.doubleArrayLength();this._length=s},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(s,r,n,t,a){var l;switch(this._length=Math.max(this._length,t+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":l=this.v;break;case"i":l=this.i;break;case"o":l=this.o;break;default:l=[];break}(!l[t]||l[t]&&!a)&&(l[t]=pointPool.newElement()),l[t][0]=s,l[t][1]=r},ShapePath.prototype.setTripleAt=function(s,r,n,t,a,l,o,c){this.setXYAt(s,r,"v",o,c),this.setXYAt(n,t,"o",o,c),this.setXYAt(a,l,"i",o,c)},ShapePath.prototype.reverse=function(){var s=new ShapePath;s.setPathData(this.c,this._length);var r=this.v,n=this.o,t=this.i,a=0;this.c&&(s.setTripleAt(r[0][0],r[0][1],t[0][0],t[0][1],n[0][0],n[0][1],0,!1),a=1);var l=this._length-1,o=this._length,c;for(c=a;c<o;c+=1)s.setTripleAt(r[l][0],r[l][1],t[l][0],t[l][1],n[l][0],n[l][1],c,!1),l-=1;return s},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function s(){return new ShapePath}function r(a){var l=a._length,o;for(o=0;o<l;o+=1)pointPool.release(a.v[o]),pointPool.release(a.i[o]),pointPool.release(a.o[o]),a.v[o]=null,a.i[o]=null,a.o[o]=null;a._length=0,a.c=!1}function n(a){var l=t.newElement(),o,c=a._length===void 0?a.v.length:a._length;for(l.setLength(c),l.c=a.c,o=0;o<c;o+=1)l.setTripleAt(a.v[o][0],a.v[o][1],a.o[o][0],a.o[o][1],a.i[o][0],a.i[o][1],o);return l}var t=poolFactory(4,s,r);return t.clone=n,t}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(s){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=s,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var s;for(s=0;s<this._length;s+=1)shapePool.release(this.shapes[s]);this._length=0};var shapeCollectionPool=function(){var s={newShapeCollection:a,release:l},r=0,n=4,t=createSizedArray(n);function a(){var o;return r?(r-=1,o=t[r]):o=new ShapeCollection,o}function l(o){var c,i=o._length;for(c=0;c<i;c+=1)shapePool.release(o.shapes[c]);o._length=0,r===n&&(t=pooling.double(t),n*=2),t[r]=o,r+=1}return s}(),ShapePropertyFactory=function(){var s=-999999;function r(b,E,x){var k=x.lastIndex,T,j,A,C,I,F,N,z,R,q=this.keyframes;if(b<q[0].t-this.offsetTime)T=q[0].s[0],A=!0,k=0;else if(b>=q[q.length-1].t-this.offsetTime)T=q[q.length-1].s?q[q.length-1].s[0]:q[q.length-2].e[0],A=!0;else{for(var M=k,D=q.length-1,X=!0,O,G,K;X&&(O=q[M],G=q[M+1],!(G.t-this.offsetTime>b));)M<D-1?M+=1:X=!1;if(K=this.keyframesMetadata[M]||{},A=O.h===1,k=M,!A){if(b>=G.t-this.offsetTime)z=1;else if(b<O.t-this.offsetTime)z=0;else{var Z;K.__fnct?Z=K.__fnct:(Z=BezierFactory.getBezierEasing(O.o.x,O.o.y,O.i.x,O.i.y).get,K.__fnct=Z),z=Z((b-(O.t-this.offsetTime))/(G.t-this.offsetTime-(O.t-this.offsetTime)))}j=G.s?G.s[0]:O.e[0]}T=O.s[0]}for(F=E._length,N=T.i[0].length,x.lastIndex=k,C=0;C<F;C+=1)for(I=0;I<N;I+=1)R=A?T.i[C][I]:T.i[C][I]+(j.i[C][I]-T.i[C][I])*z,E.i[C][I]=R,R=A?T.o[C][I]:T.o[C][I]+(j.o[C][I]-T.o[C][I])*z,E.o[C][I]=R,R=A?T.v[C][I]:T.v[C][I]+(j.v[C][I]-T.v[C][I])*z,E.v[C][I]=R}function n(){var b=this.comp.renderedFrame-this.offsetTime,E=this.keyframes[0].t-this.offsetTime,x=this.keyframes[this.keyframes.length-1].t-this.offsetTime,k=this._caching.lastFrame;return k!==s&&(k<E&&b<E||k>x&&b>x)||(this._caching.lastIndex=k<b?this._caching.lastIndex:0,this.interpolateShape(b,this.pv,this._caching)),this._caching.lastFrame=b,this.pv}function t(){this.paths=this.localShapeCollection}function a(b,E){if(b._length!==E._length||b.c!==E.c)return!1;var x,k=b._length;for(x=0;x<k;x+=1)if(b.v[x][0]!==E.v[x][0]||b.v[x][1]!==E.v[x][1]||b.o[x][0]!==E.o[x][0]||b.o[x][1]!==E.o[x][1]||b.i[x][0]!==E.i[x][0]||b.i[x][1]!==E.i[x][1])return!1;return!0}function l(b){a(this.v,b)||(this.v=shapePool.clone(b),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var b;this.kf?b=this.pv:this.data.ks?b=this.data.ks.k:b=this.data.pt.k;var E,x=this.effectsSequence.length;for(E=0;E<x;E+=1)b=this.effectsSequence[E](b);this.setVValue(b),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function c(b,E,x){this.propType="shape",this.comp=b.comp,this.container=b,this.elem=b,this.data=E,this.k=!1,this.kf=!1,this._mdf=!1;var k=x===3?E.pt.k:E.ks.k;this.v=shapePool.clone(k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=t,this.effectsSequence=[]}function i(b){this.effectsSequence.push(b),this.container.addDynamicProperty(this)}c.prototype.interpolateShape=r,c.prototype.getValue=o,c.prototype.setVValue=l,c.prototype.addEffect=i;function f(b,E,x){this.propType="shape",this.comp=b.comp,this.elem=b,this.container=b,this.offsetTime=b.data.st,this.keyframes=x===3?E.pt.k:E.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var k=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=s,this.reset=t,this._caching={lastFrame:s,lastIndex:0},this.effectsSequence=[n.bind(this)]}f.prototype.getValue=o,f.prototype.interpolateShape=r,f.prototype.setVValue=l,f.prototype.addEffect=i;var m=function(){var b=roundCorner;function E(x,k){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=k.d,this.elem=x,this.comp=x.comp,this.frameId=-1,this.initDynamicPropertyContainer(x),this.p=PropertyFactory.getProp(x,k.p,1,0,this),this.s=PropertyFactory.getProp(x,k.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return E.prototype={reset:t,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var k=this.p.v[0],T=this.p.v[1],j=this.s.v[0]/2,A=this.s.v[1]/2,C=this.d!==3,I=this.v;I.v[0][0]=k,I.v[0][1]=T-A,I.v[1][0]=C?k+j:k-j,I.v[1][1]=T,I.v[2][0]=k,I.v[2][1]=T+A,I.v[3][0]=C?k-j:k+j,I.v[3][1]=T,I.i[0][0]=C?k-j*b:k+j*b,I.i[0][1]=T-A,I.i[1][0]=C?k+j:k-j,I.i[1][1]=T-A*b,I.i[2][0]=C?k+j*b:k-j*b,I.i[2][1]=T+A,I.i[3][0]=C?k-j:k+j,I.i[3][1]=T+A*b,I.o[0][0]=C?k+j*b:k-j*b,I.o[0][1]=T-A,I.o[1][0]=C?k+j:k-j,I.o[1][1]=T+A*b,I.o[2][0]=C?k-j*b:k+j*b,I.o[2][1]=T+A,I.o[3][0]=C?k-j:k+j,I.o[3][1]=T-A*b}},extendPrototype([DynamicPropertyContainer],E),E}(),_=function(){function b(E,x){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=E,this.comp=E.comp,this.data=x,this.frameId=-1,this.d=x.d,this.initDynamicPropertyContainer(E),x.sy===1?(this.ir=PropertyFactory.getProp(E,x.ir,0,0,this),this.is=PropertyFactory.getProp(E,x.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(E,x.pt,0,0,this),this.p=PropertyFactory.getProp(E,x.p,1,0,this),this.r=PropertyFactory.getProp(E,x.r,0,degToRads,this),this.or=PropertyFactory.getProp(E,x.or,0,0,this),this.os=PropertyFactory.getProp(E,x.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return b.prototype={reset:t,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var x=Math.floor(this.pt.v)*2,k=Math.PI*2/x,T=!0,j=this.or.v,A=this.ir.v,C=this.os.v,I=this.is.v,F=2*Math.PI*j/(x*2),N=2*Math.PI*A/(x*2),z,R,q,M,D=-Math.PI/2;D+=this.r.v;var X=this.data.d===3?-1:1;for(this.v._length=0,z=0;z<x;z+=1){R=T?j:A,q=T?C:I,M=T?F:N;var O=R*Math.cos(D),G=R*Math.sin(D),K=O===0&&G===0?0:G/Math.sqrt(O*O+G*G),Z=O===0&&G===0?0:-O/Math.sqrt(O*O+G*G);O+=+this.p.v[0],G+=+this.p.v[1],this.v.setTripleAt(O,G,O-K*M*q*X,G-Z*M*q*X,O+K*M*q*X,G+Z*M*q*X,z,!0),T=!T,D+=k*X}},convertPolygonToPath:function(){var x=Math.floor(this.pt.v),k=Math.PI*2/x,T=this.or.v,j=this.os.v,A=2*Math.PI*T/(x*4),C,I=-Math.PI*.5,F=this.data.d===3?-1:1;for(I+=this.r.v,this.v._length=0,C=0;C<x;C+=1){var N=T*Math.cos(I),z=T*Math.sin(I),R=N===0&&z===0?0:z/Math.sqrt(N*N+z*z),q=N===0&&z===0?0:-N/Math.sqrt(N*N+z*z);N+=+this.p.v[0],z+=+this.p.v[1],this.v.setTripleAt(N,z,N-R*A*j*F,z-q*A*j*F,N+R*A*j*F,z+q*A*j*F,C,!0),I+=k*F}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],b),b}(),u=function(){function b(E,x){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=E,this.comp=E.comp,this.frameId=-1,this.d=x.d,this.initDynamicPropertyContainer(E),this.p=PropertyFactory.getProp(E,x.p,1,0,this),this.s=PropertyFactory.getProp(E,x.s,1,0,this),this.r=PropertyFactory.getProp(E,x.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return b.prototype={convertRectToPath:function(){var x=this.p.v[0],k=this.p.v[1],T=this.s.v[0]/2,j=this.s.v[1]/2,A=bmMin(T,j,this.r.v),C=A*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(x+T,k-j+A,x+T,k-j+A,x+T,k-j+C,0,!0),this.v.setTripleAt(x+T,k+j-A,x+T,k+j-C,x+T,k+j-A,1,!0),A!==0?(this.v.setTripleAt(x+T-A,k+j,x+T-A,k+j,x+T-C,k+j,2,!0),this.v.setTripleAt(x-T+A,k+j,x-T+C,k+j,x-T+A,k+j,3,!0),this.v.setTripleAt(x-T,k+j-A,x-T,k+j-A,x-T,k+j-C,4,!0),this.v.setTripleAt(x-T,k-j+A,x-T,k-j+C,x-T,k-j+A,5,!0),this.v.setTripleAt(x-T+A,k-j,x-T+A,k-j,x-T+C,k-j,6,!0),this.v.setTripleAt(x+T-A,k-j,x+T-C,k-j,x+T-A,k-j,7,!0)):(this.v.setTripleAt(x-T,k+j,x-T+C,k+j,x-T,k+j,2),this.v.setTripleAt(x-T,k-j,x-T,k-j+C,x-T,k-j,3))):(this.v.setTripleAt(x+T,k-j+A,x+T,k-j+C,x+T,k-j+A,0,!0),A!==0?(this.v.setTripleAt(x+T-A,k-j,x+T-A,k-j,x+T-C,k-j,1,!0),this.v.setTripleAt(x-T+A,k-j,x-T+C,k-j,x-T+A,k-j,2,!0),this.v.setTripleAt(x-T,k-j+A,x-T,k-j+A,x-T,k-j+C,3,!0),this.v.setTripleAt(x-T,k+j-A,x-T,k+j-C,x-T,k+j-A,4,!0),this.v.setTripleAt(x-T+A,k+j,x-T+A,k+j,x-T+C,k+j,5,!0),this.v.setTripleAt(x+T-A,k+j,x+T-C,k+j,x+T-A,k+j,6,!0),this.v.setTripleAt(x+T,k+j-A,x+T,k+j-A,x+T,k+j-C,7,!0)):(this.v.setTripleAt(x-T,k-j,x-T+C,k-j,x-T,k-j,1,!0),this.v.setTripleAt(x-T,k+j,x-T,k+j-C,x-T,k+j,2,!0),this.v.setTripleAt(x+T,k+j,x+T-C,k+j,x+T,k+j,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:t},extendPrototype([DynamicPropertyContainer],b),b}();function p(b,E,x){var k;if(x===3||x===4){var T=x===3?E.pt:E.ks,j=T.k;j.length?k=new f(b,E,x):k=new c(b,E,x)}else x===5?k=new u(b,E):x===6?k=new m(b,E):x===7&&(k=new _(b,E));return k.k&&b.addDynamicProperty(k),k}function g(){return c}function y(){return f}var S={};return S.getShapeProp=p,S.getConstructorFunction=g,S.getKeyframedConstructorFunction=y,S}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var s=Math.cos,r=Math.sin,n=Math.tan,t=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function l(O){if(O===0)return this;var G=s(O),K=r(O);return this._t(G,-K,0,0,K,G,0,0,0,0,1,0,0,0,0,1)}function o(O){if(O===0)return this;var G=s(O),K=r(O);return this._t(1,0,0,0,0,G,-K,0,0,K,G,0,0,0,0,1)}function c(O){if(O===0)return this;var G=s(O),K=r(O);return this._t(G,0,K,0,0,1,0,0,-K,0,G,0,0,0,0,1)}function i(O){if(O===0)return this;var G=s(O),K=r(O);return this._t(G,-K,0,0,K,G,0,0,0,0,1,0,0,0,0,1)}function f(O,G){return this._t(1,G,O,1,0,0)}function m(O,G){return this.shear(n(O),n(G))}function _(O,G){var K=s(G),Z=r(G);return this._t(K,Z,0,0,-Z,K,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(O),1,0,0,0,0,1,0,0,0,0,1)._t(K,-Z,0,0,Z,K,0,0,0,0,1,0,0,0,0,1)}function u(O,G,K){return!K&&K!==0&&(K=1),O===1&&G===1&&K===1?this:this._t(O,0,0,0,0,G,0,0,0,0,K,0,0,0,0,1)}function p(O,G,K,Z,U,V,L,H,J,ne,se,fe,xe,he,_e,ye){return this.props[0]=O,this.props[1]=G,this.props[2]=K,this.props[3]=Z,this.props[4]=U,this.props[5]=V,this.props[6]=L,this.props[7]=H,this.props[8]=J,this.props[9]=ne,this.props[10]=se,this.props[11]=fe,this.props[12]=xe,this.props[13]=he,this.props[14]=_e,this.props[15]=ye,this}function g(O,G,K){return K=K||0,O!==0||G!==0||K!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,O,G,K,1):this}function y(O,G,K,Z,U,V,L,H,J,ne,se,fe,xe,he,_e,ye){var ue=this.props;if(O===1&&G===0&&K===0&&Z===0&&U===0&&V===1&&L===0&&H===0&&J===0&&ne===0&&se===1&&fe===0)return ue[12]=ue[12]*O+ue[15]*xe,ue[13]=ue[13]*V+ue[15]*he,ue[14]=ue[14]*se+ue[15]*_e,ue[15]*=ye,this._identityCalculated=!1,this;var pe=ue[0],ke=ue[1],Ie=ue[2],Y=ue[3],te=ue[4],re=ue[5],be=ue[6],ve=ue[7],je=ue[8],Re=ue[9],Ge=ue[10],Xe=ue[11],Ke=ue[12],Pe=ue[13],We=ue[14],Fe=ue[15];return ue[0]=pe*O+ke*U+Ie*J+Y*xe,ue[1]=pe*G+ke*V+Ie*ne+Y*he,ue[2]=pe*K+ke*L+Ie*se+Y*_e,ue[3]=pe*Z+ke*H+Ie*fe+Y*ye,ue[4]=te*O+re*U+be*J+ve*xe,ue[5]=te*G+re*V+be*ne+ve*he,ue[6]=te*K+re*L+be*se+ve*_e,ue[7]=te*Z+re*H+be*fe+ve*ye,ue[8]=je*O+Re*U+Ge*J+Xe*xe,ue[9]=je*G+Re*V+Ge*ne+Xe*he,ue[10]=je*K+Re*L+Ge*se+Xe*_e,ue[11]=je*Z+Re*H+Ge*fe+Xe*ye,ue[12]=Ke*O+Pe*U+We*J+Fe*xe,ue[13]=Ke*G+Pe*V+We*ne+Fe*he,ue[14]=Ke*K+Pe*L+We*se+Fe*_e,ue[15]=Ke*Z+Pe*H+We*fe+Fe*ye,this._identityCalculated=!1,this}function S(O){var G=O.props;return this.transform(G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],G[8],G[9],G[10],G[11],G[12],G[13],G[14],G[15])}function b(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function E(O){for(var G=0;G<16;){if(O.props[G]!==this.props[G])return!1;G+=1}return!0}function x(O){var G;for(G=0;G<16;G+=1)O.props[G]=this.props[G];return O}function k(O){var G;for(G=0;G<16;G+=1)this.props[G]=O[G]}function T(O,G,K){return{x:O*this.props[0]+G*this.props[4]+K*this.props[8]+this.props[12],y:O*this.props[1]+G*this.props[5]+K*this.props[9]+this.props[13],z:O*this.props[2]+G*this.props[6]+K*this.props[10]+this.props[14]}}function j(O,G,K){return O*this.props[0]+G*this.props[4]+K*this.props[8]+this.props[12]}function A(O,G,K){return O*this.props[1]+G*this.props[5]+K*this.props[9]+this.props[13]}function C(O,G,K){return O*this.props[2]+G*this.props[6]+K*this.props[10]+this.props[14]}function I(){var O=this.props[0]*this.props[5]-this.props[1]*this.props[4],G=this.props[5]/O,K=-this.props[1]/O,Z=-this.props[4]/O,U=this.props[0]/O,V=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/O,L=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/O,H=new Matrix;return H.props[0]=G,H.props[1]=K,H.props[4]=Z,H.props[5]=U,H.props[12]=V,H.props[13]=L,H}function F(O){var G=this.getInverseMatrix();return G.applyToPointArray(O[0],O[1],O[2]||0)}function N(O){var G,K=O.length,Z=[];for(G=0;G<K;G+=1)Z[G]=F(O[G]);return Z}function z(O,G,K){var Z=createTypedArray("float32",6);if(this.isIdentity())Z[0]=O[0],Z[1]=O[1],Z[2]=G[0],Z[3]=G[1],Z[4]=K[0],Z[5]=K[1];else{var U=this.props[0],V=this.props[1],L=this.props[4],H=this.props[5],J=this.props[12],ne=this.props[13];Z[0]=O[0]*U+O[1]*L+J,Z[1]=O[0]*V+O[1]*H+ne,Z[2]=G[0]*U+G[1]*L+J,Z[3]=G[0]*V+G[1]*H+ne,Z[4]=K[0]*U+K[1]*L+J,Z[5]=K[0]*V+K[1]*H+ne}return Z}function R(O,G,K){var Z;return this.isIdentity()?Z=[O,G,K]:Z=[O*this.props[0]+G*this.props[4]+K*this.props[8]+this.props[12],O*this.props[1]+G*this.props[5]+K*this.props[9]+this.props[13],O*this.props[2]+G*this.props[6]+K*this.props[10]+this.props[14]],Z}function q(O,G){if(this.isIdentity())return O+","+G;var K=this.props;return Math.round((O*K[0]+G*K[4]+K[12])*100)/100+","+Math.round((O*K[1]+G*K[5]+K[13])*100)/100}function M(){for(var O=0,G=this.props,K="matrix3d(",Z=1e4;O<16;)K+=t(G[O]*Z)/Z,K+=O===15?")":",",O+=1;return K}function D(O){var G=1e4;return O<1e-6&&O>0||O>-1e-6&&O<0?t(O*G)/G:O}function X(){var O=this.props,G=D(O[0]),K=D(O[1]),Z=D(O[4]),U=D(O[5]),V=D(O[12]),L=D(O[13]);return"matrix("+G+","+K+","+Z+","+U+","+V+","+L+")"}return function(){this.reset=a,this.rotate=l,this.rotateX=o,this.rotateY=c,this.rotateZ=i,this.skew=m,this.skewFromAxis=_,this.shear=f,this.scale=u,this.setTransform=p,this.translate=g,this.transform=y,this.multiply=S,this.applyToPoint=T,this.applyToX=j,this.applyToY=A,this.applyToZ=C,this.applyToPointArray=R,this.applyToTriplePoints=z,this.applyToPointStringified=q,this.toCSS=M,this.to2dCSS=X,this.clone=x,this.cloneFromProps=k,this.equals=E,this.inversePoints=N,this.inversePoint=F,this.getInverseMatrix=I,this._t=this.transform,this.isIdentity=b,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(n){return typeof n}:_typeof$3=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$3(s)}var lottie={};function setLocation(s){setLocationHref(s)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(s){setSubframeEnabled(s)}function setPrefix(s){setIdPrefix(s)}function loadAnimation(s){return animationManager.loadAnimation(s)}function setQuality(s){if(typeof s=="string")switch(s){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(s)&&s>1&&setDefaultCurveSegments(s)}function inBrowser(){return typeof navigator<"u"}function installPlugin(s,r){s==="expressions"&&setExpressionsPlugin(r)}function getFactory(s){switch(s){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(s){for(var r=queryString.split("&"),n=0;n<r.length;n+=1){var t=r[n].split("=");if(decodeURIComponent(t[0])==s)return decodeURIComponent(t[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(s){}var ShapeModifiers=function(){var s={},r={};s.registerModifier=n,s.getModifier=t;function n(a,l){r[a]||(r[a]=l)}function t(a,l,o){return new r[a](l,o)}return s}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(s){if(!this.closed){s.sh.container.addDynamicProperty(s.sh);var r={shape:s.sh,data:s,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(r),this.addShapeToModifier(r),this._isAnimated&&s.setAsAnimated()}},ShapeModifier.prototype.init=function(s,r){this.shapes=[],this.elem=s,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,r),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(s,r){this.s=PropertyFactory.getProp(s,r.s,0,.01,this),this.e=PropertyFactory.getProp(s,r.e,0,.01,this),this.o=PropertyFactory.getProp(s,r.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=r.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(s){s.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(s,r,n,t,a){var l=[];r<=1?l.push({s,e:r}):s>=1?l.push({s:s-1,e:r-1}):(l.push({s,e:1}),l.push({s:0,e:r-1}));var o=[],c,i=l.length,f;for(c=0;c<i;c+=1)if(f=l[c],!(f.e*a<t||f.s*a>t+n)){var m,_;f.s*a<=t?m=0:m=(f.s*a-t)/n,f.e*a>=t+n?_=1:_=(f.e*a-t)/n,o.push([m,_])}return o.length||o.push([0,0]),o},TrimModifier.prototype.releasePathsData=function(s){var r,n=s.length;for(r=0;r<n;r+=1)segmentsLengthPool.release(s[r]);return s.length=0,s},TrimModifier.prototype.processShapes=function(s){var r,n;if(this._mdf||s){var t=this.o.v%360/360;if(t<0&&(t+=1),this.s.v>1?r=1+t:this.s.v<0?r=0+t:r=this.s.v+t,this.e.v>1?n=1+t:this.e.v<0?n=0+t:n=this.e.v+t,r>n){var a=r;r=n,n=a}r=Math.round(r*1e4)*1e-4,n=Math.round(n*1e4)*1e-4,this.sValue=r,this.eValue=n}else r=this.sValue,n=this.eValue;var l,o,c=this.shapes.length,i,f,m,_,u,p=0;if(n===r)for(o=0;o<c;o+=1)this.shapes[o].localShapeCollection.releaseShapes(),this.shapes[o].shape._mdf=!0,this.shapes[o].shape.paths=this.shapes[o].localShapeCollection,this._mdf&&(this.shapes[o].pathsData.length=0);else if(n===1&&r===0||n===0&&r===1){if(this._mdf)for(o=0;o<c;o+=1)this.shapes[o].pathsData.length=0,this.shapes[o].shape._mdf=!0}else{var g=[],y,S;for(o=0;o<c;o+=1)if(y=this.shapes[o],!y.shape._mdf&&!this._mdf&&!s&&this.m!==2)y.shape.paths=y.localShapeCollection;else{if(l=y.shape.paths,f=l._length,u=0,!y.shape._mdf&&y.pathsData.length)u=y.totalShapeLength;else{for(m=this.releasePathsData(y.pathsData),i=0;i<f;i+=1)_=bez.getSegmentsLength(l.shapes[i]),m.push(_),u+=_.totalLength;y.totalShapeLength=u,y.pathsData=m}p+=u,y.shape._mdf=!0}var b=r,E=n,x=0,k;for(o=c-1;o>=0;o-=1)if(y=this.shapes[o],y.shape._mdf){for(S=y.localShapeCollection,S.releaseShapes(),this.m===2&&c>1?(k=this.calculateShapeEdges(r,n,y.totalShapeLength,x,p),x+=y.totalShapeLength):k=[[b,E]],f=k.length,i=0;i<f;i+=1){b=k[i][0],E=k[i][1],g.length=0,E<=1?g.push({s:y.totalShapeLength*b,e:y.totalShapeLength*E}):b>=1?g.push({s:y.totalShapeLength*(b-1),e:y.totalShapeLength*(E-1)}):(g.push({s:y.totalShapeLength*b,e:y.totalShapeLength}),g.push({s:0,e:y.totalShapeLength*(E-1)}));var T=this.addShapes(y,g[0]);if(g[0].s!==g[0].e){if(g.length>1){var j=y.shape.paths.shapes[y.shape.paths._length-1];if(j.c){var A=T.pop();this.addPaths(T,S),T=this.addShapes(y,g[1],A)}else this.addPaths(T,S),T=this.addShapes(y,g[1])}this.addPaths(T,S)}}y.shape.paths=S}}},TrimModifier.prototype.addPaths=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)r.addShape(s[n])},TrimModifier.prototype.addSegment=function(s,r,n,t,a,l,o){a.setXYAt(r[0],r[1],"o",l),a.setXYAt(n[0],n[1],"i",l+1),o&&a.setXYAt(s[0],s[1],"v",l),a.setXYAt(t[0],t[1],"v",l+1)},TrimModifier.prototype.addSegmentFromArray=function(s,r,n,t){r.setXYAt(s[1],s[5],"o",n),r.setXYAt(s[2],s[6],"i",n+1),t&&r.setXYAt(s[0],s[4],"v",n),r.setXYAt(s[3],s[7],"v",n+1)},TrimModifier.prototype.addShapes=function(s,r,n){var t=s.pathsData,a=s.shape.paths.shapes,l,o=s.shape.paths._length,c,i,f=0,m,_,u,p,g=[],y,S=!0;for(n?(_=n._length,y=n._length):(n=shapePool.newElement(),_=0,y=0),g.push(n),l=0;l<o;l+=1){for(u=t[l].lengths,n.c=a[l].c,i=a[l].c?u.length:u.length+1,c=1;c<i;c+=1)if(m=u[c-1],f+m.addedLength<r.s)f+=m.addedLength,n.c=!1;else if(f>r.e){n.c=!1;break}else r.s<=f&&r.e>=f+m.addedLength?(this.addSegment(a[l].v[c-1],a[l].o[c-1],a[l].i[c],a[l].v[c],n,_,S),S=!1):(p=bez.getNewSegment(a[l].v[c-1],a[l].v[c],a[l].o[c-1],a[l].i[c],(r.s-f)/m.addedLength,(r.e-f)/m.addedLength,u[c-1]),this.addSegmentFromArray(p,n,_,S),S=!1,n.c=!1),f+=m.addedLength,_+=1;if(a[l].c&&u.length){if(m=u[c-1],f<=r.e){var b=u[c-1].addedLength;r.s<=f&&r.e>=f+b?(this.addSegment(a[l].v[c-1],a[l].o[c-1],a[l].i[0],a[l].v[0],n,_,S),S=!1):(p=bez.getNewSegment(a[l].v[c-1],a[l].v[0],a[l].o[c-1],a[l].i[0],(r.s-f)/b,(r.e-f)/b,u[c-1]),this.addSegmentFromArray(p,n,_,S),S=!1,n.c=!1)}else n.c=!1;f+=m.addedLength,_+=1}if(n._length&&(n.setXYAt(n.v[y][0],n.v[y][1],"i",y),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),f>r.e)break;l<o-1&&(n=shapePool.newElement(),S=!0,g.push(n),_=0)}return g};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,r.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(s,r){var n=r/100,t=[0,0],a=s._length,l=0;for(l=0;l<a;l+=1)t[0]+=s.v[l][0],t[1]+=s.v[l][1];t[0]/=a,t[1]/=a;var o=shapePool.newElement();o.c=s.c;var c,i,f,m,_,u;for(l=0;l<a;l+=1)c=s.v[l][0]+(t[0]-s.v[l][0])*n,i=s.v[l][1]+(t[1]-s.v[l][1])*n,f=s.o[l][0]+(t[0]-s.o[l][0])*-n,m=s.o[l][1]+(t[1]-s.o[l][1])*-n,_=s.i[l][0]+(t[0]-s.i[l][0])*-n,u=s.i[l][1]+(t[1]-s.i[l][1])*-n,o.setTripleAt(c,i,f,m,_,u,l);return o},PuckerAndBloatModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.amount.v;if(o!==0){var c,i;for(n=0;n<t;n+=1){if(c=this.shapes[n],i=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!s))for(i.releaseShapes(),c.shape._mdf=!0,r=c.shape.paths.shapes,l=c.shape.paths._length,a=0;a<l;a+=1)i.addShape(this.processPath(r[a],o));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var s=[0,0];function r(i){var f=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||f,this.a&&i.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&i.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&i.skewFromAxis(-this.sk.v,this.sa.v),this.r?i.rotate(-this.r.v):i.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?i.translate(this.px.v,this.py.v,-this.pz.v):i.translate(this.px.v,this.py.v,0):i.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function n(i){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||i){var f;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var m,_;if(f=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(m=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/f,0),_=this.p.getValueAtTime(this.p.keyframes[0].t/f,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(m=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/f,0),_=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/f,0)):(m=this.p.pv,_=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/f,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){m=[],_=[];var u=this.px,p=this.py;u._caching.lastFrame+u.offsetTime<=u.keyframes[0].t?(m[0]=u.getValueAtTime((u.keyframes[0].t+.01)/f,0),m[1]=p.getValueAtTime((p.keyframes[0].t+.01)/f,0),_[0]=u.getValueAtTime(u.keyframes[0].t/f,0),_[1]=p.getValueAtTime(p.keyframes[0].t/f,0)):u._caching.lastFrame+u.offsetTime>=u.keyframes[u.keyframes.length-1].t?(m[0]=u.getValueAtTime(u.keyframes[u.keyframes.length-1].t/f,0),m[1]=p.getValueAtTime(p.keyframes[p.keyframes.length-1].t/f,0),_[0]=u.getValueAtTime((u.keyframes[u.keyframes.length-1].t-.01)/f,0),_[1]=p.getValueAtTime((p.keyframes[p.keyframes.length-1].t-.01)/f,0)):(m=[u.pv,p.pv],_[0]=u.getValueAtTime((u._caching.lastFrame+u.offsetTime-.01)/f,u.offsetTime),_[1]=p.getValueAtTime((p._caching.lastFrame+p.offsetTime-.01)/f,p.offsetTime))}else _=s,m=_;this.v.rotate(-Math.atan2(m[1]-_[1],m[0]-_[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function t(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function a(){}function l(i){this._addDynamicProperty(i),this.elem.addDynamicProperty(i),this._isDirty=!0}function o(i,f,m){if(this.elem=i,this.frameId=-1,this.propType="transform",this.data=f,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(m||i),f.p&&f.p.s?(this.px=PropertyFactory.getProp(i,f.p.x,0,0,this),this.py=PropertyFactory.getProp(i,f.p.y,0,0,this),f.p.z&&(this.pz=PropertyFactory.getProp(i,f.p.z,0,0,this))):this.p=PropertyFactory.getProp(i,f.p||{k:[0,0,0]},1,0,this),f.rx){if(this.rx=PropertyFactory.getProp(i,f.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(i,f.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(i,f.rz,0,degToRads,this),f.or.k[0].ti){var _,u=f.or.k.length;for(_=0;_<u;_+=1)f.or.k[_].to=null,f.or.k[_].ti=null}this.or=PropertyFactory.getProp(i,f.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(i,f.r||{k:0},0,degToRads,this);f.sk&&(this.sk=PropertyFactory.getProp(i,f.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(i,f.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(i,f.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(i,f.s||{k:[100,100,100]},1,.01,this),f.o?this.o=PropertyFactory.getProp(i,f.o,0,.01,i):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}o.prototype={applyToMatrix:r,getValue:n,precalculateMatrix:t,autoOrient:a},extendPrototype([DynamicPropertyContainer],o),o.prototype.addDynamicProperty=l,o.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function c(i,f,m){return new o(i,f,m)}return{getTransformProperty:c}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(s,r.c,0,null,this),this.o=PropertyFactory.getProp(s,r.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(s,r.tr,this),this.so=PropertyFactory.getProp(s,r.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(s,r.tr.eo,0,.01,this),this.data=r,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(s,r,n,t,a,l){var o=l?-1:1,c=t.s.v[0]+(1-t.s.v[0])*(1-a),i=t.s.v[1]+(1-t.s.v[1])*(1-a);s.translate(t.p.v[0]*o*a,t.p.v[1]*o*a,t.p.v[2]),r.translate(-t.a.v[0],-t.a.v[1],t.a.v[2]),r.rotate(-t.r.v*o*a),r.translate(t.a.v[0],t.a.v[1],t.a.v[2]),n.translate(-t.a.v[0],-t.a.v[1],t.a.v[2]),n.scale(l?1/c:c,l?1/i:i),n.translate(t.a.v[0],t.a.v[1],t.a.v[2])},RepeaterModifier.prototype.init=function(s,r,n,t){for(this.elem=s,this.arr=r,this.pos=n,this.elemsData=t,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,r[n]);n>0;)n-=1,this._elements.unshift(r[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(s){var r,n=s.length;for(r=0;r<n;r+=1)s[r]._processed=!1,s[r].ty==="gr"&&this.resetElements(s[r].it)},RepeaterModifier.prototype.cloneElements=function(s){var r=JSON.parse(JSON.stringify(s));return this.resetElements(r),r},RepeaterModifier.prototype.changeGroupRender=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)s[n]._render=r,s[n].ty==="gr"&&this.changeGroupRender(s[n].it,r)},RepeaterModifier.prototype.processShapes=function(s){var r,n,t,a,l,o=!1;if(this._mdf||s){var c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var i={it:this.cloneElements(this._elements),ty:"gr"};i.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,i),this._groups.splice(0,0,i),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}l=0;var f;for(t=0;t<=this._groups.length-1;t+=1){if(f=l<c,this._groups[t]._render=f,this.changeGroupRender(this._groups[t].it,f),!f){var m=this.elemsData[t].it,_=m[m.length-1];_.transform.op.v!==0?(_.transform.op._mdf=!0,_.transform.op.v=0):_.transform.op._mdf=!1}l+=1}this._currentCopies=c;var u=this.o.v,p=u%1,g=u>0?Math.floor(u):Math.ceil(u),y=this.pMatrix.props,S=this.rMatrix.props,b=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var E=0;if(u>0){for(;E<g;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),E+=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,p,!1),E+=p)}else if(u<0){for(;E>g;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),E-=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-p,!0),E-=p)}t=this.data.m===1?0:this._currentCopies-1,a=this.data.m===1?1:-1,l=this._currentCopies;for(var x,k;l;){if(r=this.elemsData[t].it,n=r[r.length-1].transform.mProps.v.props,k=n.length,r[r.length-1].transform.mProps._mdf=!0,r[r.length-1].transform.op._mdf=!0,r[r.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(t/(this._currentCopies-1)),E!==0){for((t!==0&&a===1||t!==this._currentCopies-1&&a===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15]),this.matrix.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]),this.matrix.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),x=0;x<k;x+=1)n[x]=this.matrix.props[x];this.matrix.reset()}else for(this.matrix.reset(),x=0;x<k;x+=1)n[x]=this.matrix.props[x];E+=1,l-=1,t+=a}}else for(l=this._currentCopies,t=0,a=1;l;)r=this.elemsData[t].it,n=r[r.length-1].transform.mProps.v.props,r[r.length-1].transform.mProps._mdf=!1,r[r.length-1].transform.op._mdf=!1,l-=1,t+=a;return o},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(s,r.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(s,r){var n=shapePool.newElement();n.c=s.c;var t,a=s._length,l,o,c,i,f,m,_=0,u,p,g,y,S,b;for(t=0;t<a;t+=1)l=s.v[t],c=s.o[t],o=s.i[t],l[0]===c[0]&&l[1]===c[1]&&l[0]===o[0]&&l[1]===o[1]?(t===0||t===a-1)&&!s.c?(n.setTripleAt(l[0],l[1],c[0],c[1],o[0],o[1],_),_+=1):(t===0?i=s.v[a-1]:i=s.v[t-1],f=Math.sqrt(Math.pow(l[0]-i[0],2)+Math.pow(l[1]-i[1],2)),m=f?Math.min(f/2,r)/f:0,S=l[0]+(i[0]-l[0])*m,u=S,b=l[1]-(l[1]-i[1])*m,p=b,g=u-(u-l[0])*roundCorner,y=p-(p-l[1])*roundCorner,n.setTripleAt(u,p,g,y,S,b,_),_+=1,t===a-1?i=s.v[0]:i=s.v[t+1],f=Math.sqrt(Math.pow(l[0]-i[0],2)+Math.pow(l[1]-i[1],2)),m=f?Math.min(f/2,r)/f:0,g=l[0]+(i[0]-l[0])*m,u=g,y=l[1]+(i[1]-l[1])*m,p=y,S=u-(u-l[0])*roundCorner,b=p-(p-l[1])*roundCorner,n.setTripleAt(u,p,g,y,S,b,_),_+=1):(n.setTripleAt(s.v[t][0],s.v[t][1],s.o[t][0],s.o[t][1],s.i[t][0],s.i[t][1],_),_+=1);return n},RoundCornersModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.rd.v;if(o!==0){var c,i;for(n=0;n<t;n+=1){if(c=this.shapes[n],i=c.localShapeCollection,!(!c.shape._mdf&&!this._mdf&&!s))for(i.releaseShapes(),c.shape._mdf=!0,r=c.shape.paths.shapes,l=c.shape.paths._length,a=0;a<l;a+=1)i.addShape(this.processPath(r[a],o));c.shape.paths=c.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(s,r){return Math.abs(s-r)*1e5<=Math.min(Math.abs(s),Math.abs(r))}function floatZero(s){return Math.abs(s)<=1e-5}function lerp(s,r,n){return s*(1-n)+r*n}function lerpPoint(s,r,n){return[lerp(s[0],r[0],n),lerp(s[1],r[1],n)]}function quadRoots(s,r,n){if(s===0)return[];var t=r*r-4*s*n;if(t<0)return[];var a=-r/(2*s);if(t===0)return[a];var l=Math.sqrt(t)/(2*s);return[a-l,a+l]}function polynomialCoefficients(s,r,n,t){return[-s+3*r-3*n+t,3*s-6*r+3*n,-3*s+3*r,s]}function singlePoint(s){return new PolynomialBezier(s,s,s,s,!1)}function PolynomialBezier(s,r,n,t,a){a&&pointEqual(s,r)&&(r=lerpPoint(s,t,1/3)),a&&pointEqual(n,t)&&(n=lerpPoint(s,t,2/3));var l=polynomialCoefficients(s[0],r[0],n[0],t[0]),o=polynomialCoefficients(s[1],r[1],n[1],t[1]);this.a=[l[0],o[0]],this.b=[l[1],o[1]],this.c=[l[2],o[2]],this.d=[l[3],o[3]],this.points=[s,r,n,t]}PolynomialBezier.prototype.point=function(s){return[((this.a[0]*s+this.b[0])*s+this.c[0])*s+this.d[0],((this.a[1]*s+this.b[1])*s+this.c[1])*s+this.d[1]]},PolynomialBezier.prototype.derivative=function(s){return[(3*s*this.a[0]+2*this.b[0])*s+this.c[0],(3*s*this.a[1]+2*this.b[1])*s+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(s){var r=this.derivative(s);return Math.atan2(r[1],r[0])},PolynomialBezier.prototype.normalAngle=function(s){var r=this.derivative(s);return Math.atan2(r[0],r[1])},PolynomialBezier.prototype.inflectionPoints=function(){var s=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(s))return[];var r=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/s,n=r*r-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/s;if(n<0)return[];var t=Math.sqrt(n);return floatZero(t)?t>0&&t<1?[r]:[]:[r-t,r+t].filter(function(a){return a>0&&a<1})},PolynomialBezier.prototype.split=function(s){if(s<=0)return[singlePoint(this.points[0]),this];if(s>=1)return[this,singlePoint(this.points[this.points.length-1])];var r=lerpPoint(this.points[0],this.points[1],s),n=lerpPoint(this.points[1],this.points[2],s),t=lerpPoint(this.points[2],this.points[3],s),a=lerpPoint(r,n,s),l=lerpPoint(n,t,s),o=lerpPoint(a,l,s);return[new PolynomialBezier(this.points[0],r,a,o,!0),new PolynomialBezier(o,l,t,this.points[3],!0)]};function extrema(s,r){var n=s.points[0][r],t=s.points[s.points.length-1][r];if(n>t){var a=t;t=n,n=a}for(var l=quadRoots(3*s.a[r],2*s.b[r],s.c[r]),o=0;o<l.length;o+=1)if(l[o]>0&&l[o]<1){var c=s.point(l[o])[r];c<n?n=c:c>t&&(t=c)}return{min:n,max:t}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var s=this.bounds();return{left:s.x.min,right:s.x.max,top:s.y.min,bottom:s.y.max,width:s.x.max-s.x.min,height:s.y.max-s.y.min,cx:(s.x.max+s.x.min)/2,cy:(s.y.max+s.y.min)/2}};function intersectData(s,r,n){var t=s.boundingBox();return{cx:t.cx,cy:t.cy,width:t.width,height:t.height,bez:s,t:(r+n)/2,t1:r,t2:n}}function splitData(s){var r=s.bez.split(.5);return[intersectData(r[0],s.t1,s.t),intersectData(r[1],s.t,s.t2)]}function boxIntersect(s,r){return Math.abs(s.cx-r.cx)*2<s.width+r.width&&Math.abs(s.cy-r.cy)*2<s.height+r.height}function intersectsImpl(s,r,n,t,a,l){if(boxIntersect(s,r)){if(n>=l||s.width<=t&&s.height<=t&&r.width<=t&&r.height<=t){a.push([s.t,r.t]);return}var o=splitData(s),c=splitData(r);intersectsImpl(o[0],c[0],n+1,t,a,l),intersectsImpl(o[0],c[1],n+1,t,a,l),intersectsImpl(o[1],c[0],n+1,t,a,l),intersectsImpl(o[1],c[1],n+1,t,a,l)}}PolynomialBezier.prototype.intersections=function(s,r,n){r===void 0&&(r=2),n===void 0&&(n=7);var t=[];return intersectsImpl(intersectData(this,0,1),intersectData(s,0,1),0,r,t,n),t},PolynomialBezier.shapeSegment=function(s,r){var n=(r+1)%s.length();return new PolynomialBezier(s.v[r],s.o[r],s.i[n],s.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(s,r){var n=(r+1)%s.length();return new PolynomialBezier(s.v[n],s.i[n],s.o[r],s.v[r],!0)};function crossProduct(s,r){return[s[1]*r[2]-s[2]*r[1],s[2]*r[0]-s[0]*r[2],s[0]*r[1]-s[1]*r[0]]}function lineIntersection(s,r,n,t){var a=[s[0],s[1],1],l=[r[0],r[1],1],o=[n[0],n[1],1],c=[t[0],t[1],1],i=crossProduct(crossProduct(a,l),crossProduct(o,c));return floatZero(i[2])?null:[i[0]/i[2],i[1]/i[2]]}function polarOffset(s,r,n){return[s[0]+Math.cos(r)*n,s[1]-Math.sin(r)*n]}function pointDistance(s,r){return Math.hypot(s[0]-r[0],s[1]-r[1])}function pointEqual(s,r){return floatEqual(s[0],r[0])&&floatEqual(s[1],r[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(s,r.s,0,null,this),this.frequency=PropertyFactory.getProp(s,r.r,0,null,this),this.pointsType=PropertyFactory.getProp(s,r.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(s,r,n,t,a,l,o){var c=n-Math.PI/2,i=n+Math.PI/2,f=r[0]+Math.cos(n)*t*a,m=r[1]-Math.sin(n)*t*a;s.setTripleAt(f,m,f+Math.cos(c)*l,m-Math.sin(c)*l,f+Math.cos(i)*o,m-Math.sin(i)*o,s.length())}function getPerpendicularVector(s,r){var n=[r[0]-s[0],r[1]-s[1]],t=-Math.PI*.5,a=[Math.cos(t)*n[0]-Math.sin(t)*n[1],Math.sin(t)*n[0]+Math.cos(t)*n[1]];return a}function getProjectingAngle(s,r){var n=r===0?s.length()-1:r-1,t=(r+1)%s.length(),a=s.v[n],l=s.v[t],o=getPerpendicularVector(a,l);return Math.atan2(0,1)-Math.atan2(o[1],o[0])}function zigZagCorner(s,r,n,t,a,l,o){var c=getProjectingAngle(r,n),i=r.v[n%r._length],f=r.v[n===0?r._length-1:n-1],m=r.v[(n+1)%r._length],_=l===2?Math.sqrt(Math.pow(i[0]-f[0],2)+Math.pow(i[1]-f[1],2)):0,u=l===2?Math.sqrt(Math.pow(i[0]-m[0],2)+Math.pow(i[1]-m[1],2)):0;setPoint(s,r.v[n%r._length],c,o,t,u/((a+1)*2),_/((a+1)*2))}function zigZagSegment(s,r,n,t,a,l){for(var o=0;o<t;o+=1){var c=(o+1)/(t+1),i=a===2?Math.sqrt(Math.pow(r.points[3][0]-r.points[0][0],2)+Math.pow(r.points[3][1]-r.points[0][1],2)):0,f=r.normalAngle(c),m=r.point(c);setPoint(s,m,f,l,n,i/((t+1)*2),i/((t+1)*2)),l=-l}return l}ZigZagModifier.prototype.processPath=function(s,r,n,t){var a=s._length,l=shapePool.newElement();if(l.c=s.c,s.c||(a-=1),a===0)return l;var o=-1,c=PolynomialBezier.shapeSegment(s,0);zigZagCorner(l,s,0,r,n,t,o);for(var i=0;i<a;i+=1)o=zigZagSegment(l,c,r,n,t,-o),i===a-1&&!s.c?c=null:c=PolynomialBezier.shapeSegment(s,(i+1)%a),zigZagCorner(l,s,i+1,r,n,t,o);return l},ZigZagModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),i=this.pointsType.v;if(o!==0){var f,m;for(n=0;n<t;n+=1){if(f=this.shapes[n],m=f.localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!s))for(m.releaseShapes(),f.shape._mdf=!0,r=f.shape.paths.shapes,l=f.shape.paths._length,a=0;a<l;a+=1)m.addShape(this.processPath(r[a],o,c,i));f.shape.paths=f.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(s,r,n){var t=Math.atan2(r[0]-s[0],r[1]-s[1]);return[polarOffset(s,t,n),polarOffset(r,t,n)]}function offsetSegment(s,r){var n,t,a,l,o,c,i;i=linearOffset(s.points[0],s.points[1],r),n=i[0],t=i[1],i=linearOffset(s.points[1],s.points[2],r),a=i[0],l=i[1],i=linearOffset(s.points[2],s.points[3],r),o=i[0],c=i[1];var f=lineIntersection(n,t,a,l);f===null&&(f=t);var m=lineIntersection(o,c,a,l);return m===null&&(m=o),new PolynomialBezier(n,f,m,c)}function joinLines(s,r,n,t,a){var l=r.points[3],o=n.points[0];if(t===3||pointEqual(l,o))return l;if(t===2){var c=-r.tangentAngle(1),i=-n.tangentAngle(0)+Math.PI,f=lineIntersection(l,polarOffset(l,c+Math.PI/2,100),o,polarOffset(o,c+Math.PI/2,100)),m=f?pointDistance(f,l):pointDistance(l,o)/2,_=polarOffset(l,c,2*m*roundCorner);return s.setXYAt(_[0],_[1],"o",s.length()-1),_=polarOffset(o,i,2*m*roundCorner),s.setTripleAt(o[0],o[1],o[0],o[1],_[0],_[1],s.length()),o}var u=pointEqual(l,r.points[2])?r.points[0]:r.points[2],p=pointEqual(o,n.points[1])?n.points[3]:n.points[1],g=lineIntersection(u,l,o,p);return g&&pointDistance(g,l)<a?(s.setTripleAt(g[0],g[1],g[0],g[1],g[0],g[1],s.length()),g):l}function getIntersection(s,r){var n=s.intersections(r);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(s,r){var n=s.slice(),t=r.slice(),a=getIntersection(s[s.length-1],r[0]);return a&&(n[s.length-1]=s[s.length-1].split(a[0])[0],t[0]=r[0].split(a[1])[1]),s.length>1&&r.length>1&&(a=getIntersection(s[0],r[r.length-1]),a)?[[s[0].split(a[0])[0]],[r[r.length-1].split(a[1])[1]]]:[n,t]}function pruneIntersections(s){for(var r,n=1;n<s.length;n+=1)r=pruneSegmentIntersection(s[n-1],s[n]),s[n-1]=r[0],s[n]=r[1];return s.length>1&&(r=pruneSegmentIntersection(s[s.length-1],s[0]),s[s.length-1]=r[0],s[0]=r[1]),s}function offsetSegmentSplit(s,r){var n=s.inflectionPoints(),t,a,l,o;if(n.length===0)return[offsetSegment(s,r)];if(n.length===1||floatEqual(n[1],1))return l=s.split(n[0]),t=l[0],a=l[1],[offsetSegment(t,r),offsetSegment(a,r)];l=s.split(n[0]),t=l[0];var c=(n[1]-n[0])/(1-n[0]);return l=l[1].split(c),o=l[0],a=l[1],[offsetSegment(t,r),offsetSegment(o,r),offsetSegment(a,r)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(s,r){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,r.a,0,null,this),this.miterLimit=PropertyFactory.getProp(s,r.ml,0,null,this),this.lineJoin=r.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(s,r,n,t){var a=shapePool.newElement();a.c=s.c;var l=s.length();s.c||(l-=1);var o,c,i,f=[];for(o=0;o<l;o+=1)i=PolynomialBezier.shapeSegment(s,o),f.push(offsetSegmentSplit(i,r));if(!s.c)for(o=l-1;o>=0;o-=1)i=PolynomialBezier.shapeSegmentInverted(s,o),f.push(offsetSegmentSplit(i,r));f=pruneIntersections(f);var m=null,_=null;for(o=0;o<f.length;o+=1){var u=f[o];for(_&&(m=joinLines(a,_,u[0],n,t)),_=u[u.length-1],c=0;c<u.length;c+=1)i=u[c],m&&pointEqual(i.points[0],m)?a.setXYAt(i.points[1][0],i.points[1][1],"o",a.length()-1):a.setTripleAt(i.points[0][0],i.points[0][1],i.points[1][0],i.points[1][1],i.points[0][0],i.points[0][1],a.length()),a.setTripleAt(i.points[3][0],i.points[3][1],i.points[3][0],i.points[3][1],i.points[2][0],i.points[2][1],a.length()),m=i.points[3]}return f.length&&joinLines(a,_,f[0][0],n,t),a},OffsetPathModifier.prototype.processShapes=function(s){var r,n,t=this.shapes.length,a,l,o=this.amount.v,c=this.miterLimit.v,i=this.lineJoin;if(o!==0){var f,m;for(n=0;n<t;n+=1){if(f=this.shapes[n],m=f.localShapeCollection,!(!f.shape._mdf&&!this._mdf&&!s))for(m.releaseShapes(),f.shape._mdf=!0,r=f.shape.paths.shapes,l=f.shape.paths._length,a=0;a<l;a+=1)m.addShape(this.processPath(r[a],o,i,c));f.shape.paths=f.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(s){for(var r=s.fStyle?s.fStyle.split(" "):[],n="normal",t="normal",a=r.length,l,o=0;o<a;o+=1)switch(l=r[o].toLowerCase(),l){case"italic":t="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200";break}return{style:t,weight:s.fWeight||n}}var FontManager=function(){var s=5e3,r={w:0,size:0,shapes:[],data:{shapes:[]}},n=[];n=n.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var t=127988,a=917631,l=917601,o=917626,c=65039,i=8205,f=127462,m=127487,_=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function u(D){var X=D.split(","),O,G=X.length,K=[];for(O=0;O<G;O+=1)X[O]!=="sans-serif"&&X[O]!=="monospace"&&K.push(X[O]);return K.join(",")}function p(D,X){var O=createTag("span");O.setAttribute("aria-hidden",!0),O.style.fontFamily=X;var G=createTag("span");G.innerText="giItT1WQy@!-/#",O.style.position="absolute",O.style.left="-10000px",O.style.top="-10000px",O.style.fontSize="300px",O.style.fontVariant="normal",O.style.fontStyle="normal",O.style.fontWeight="normal",O.style.letterSpacing="0",O.appendChild(G),document.body.appendChild(O);var K=G.offsetWidth;return G.style.fontFamily=u(D)+", "+X,{node:G,w:K,parent:O}}function g(){var D,X=this.fonts.length,O,G,K=X;for(D=0;D<X;D+=1)this.fonts[D].loaded?K-=1:this.fonts[D].fOrigin==="n"||this.fonts[D].origin===0?this.fonts[D].loaded=!0:(O=this.fonts[D].monoCase.node,G=this.fonts[D].monoCase.w,O.offsetWidth!==G?(K-=1,this.fonts[D].loaded=!0):(O=this.fonts[D].sansCase.node,G=this.fonts[D].sansCase.w,O.offsetWidth!==G&&(K-=1,this.fonts[D].loaded=!0)),this.fonts[D].loaded&&(this.fonts[D].sansCase.parent.parentNode.removeChild(this.fonts[D].sansCase.parent),this.fonts[D].monoCase.parent.parentNode.removeChild(this.fonts[D].monoCase.parent)));K!==0&&Date.now()-this.initTime<s?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function y(D,X){var O=document.body&&X?"svg":"canvas",G,K=getFontProperties(D);if(O==="svg"){var Z=createNS("text");Z.style.fontSize="100px",Z.setAttribute("font-family",D.fFamily),Z.setAttribute("font-style",K.style),Z.setAttribute("font-weight",K.weight),Z.textContent="1",D.fClass?(Z.style.fontFamily="inherit",Z.setAttribute("class",D.fClass)):Z.style.fontFamily=D.fFamily,X.appendChild(Z),G=Z}else{var U=new OffscreenCanvas(500,500).getContext("2d");U.font=K.style+" "+K.weight+" 100px "+D.fFamily,G=U}function V(L){return O==="svg"?(G.textContent=L,G.getComputedTextLength()):G.measureText(L).width}return{measureText:V}}function S(D,X){if(!D){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=D.list;return}if(!document.body){this.isLoaded=!0,D.list.forEach(function(se){se.helper=y(se),se.cache={}}),this.fonts=D.list;return}var O=D.list,G,K=O.length,Z=K;for(G=0;G<K;G+=1){var U=!0,V,L;if(O[G].loaded=!1,O[G].monoCase=p(O[G].fFamily,"monospace"),O[G].sansCase=p(O[G].fFamily,"sans-serif"),!O[G].fPath)O[G].loaded=!0,Z-=1;else if(O[G].fOrigin==="p"||O[G].origin===3){if(V=document.querySelectorAll('style[f-forigin="p"][f-family="'+O[G].fFamily+'"], style[f-origin="3"][f-family="'+O[G].fFamily+'"]'),V.length>0&&(U=!1),U){var H=createTag("style");H.setAttribute("f-forigin",O[G].fOrigin),H.setAttribute("f-origin",O[G].origin),H.setAttribute("f-family",O[G].fFamily),H.type="text/css",H.innerText="@font-face {font-family: "+O[G].fFamily+"; font-style: normal; src: url('"+O[G].fPath+"');}",X.appendChild(H)}}else if(O[G].fOrigin==="g"||O[G].origin===1){for(V=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),L=0;L<V.length;L+=1)V[L].href.indexOf(O[G].fPath)!==-1&&(U=!1);if(U){var J=createTag("link");J.setAttribute("f-forigin",O[G].fOrigin),J.setAttribute("f-origin",O[G].origin),J.type="text/css",J.rel="stylesheet",J.href=O[G].fPath,document.body.appendChild(J)}}else if(O[G].fOrigin==="t"||O[G].origin===2){for(V=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),L=0;L<V.length;L+=1)O[G].fPath===V[L].src&&(U=!1);if(U){var ne=createTag("link");ne.setAttribute("f-forigin",O[G].fOrigin),ne.setAttribute("f-origin",O[G].origin),ne.setAttribute("rel","stylesheet"),ne.setAttribute("href",O[G].fPath),X.appendChild(ne)}}O[G].helper=y(O[G],X),O[G].cache={},this.fonts.push(O[G])}Z===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function b(D){if(D){this.chars||(this.chars=[]);var X,O=D.length,G,K=this.chars.length,Z;for(X=0;X<O;X+=1){for(G=0,Z=!1;G<K;)this.chars[G].style===D[X].style&&this.chars[G].fFamily===D[X].fFamily&&this.chars[G].ch===D[X].ch&&(Z=!0),G+=1;Z||(this.chars.push(D[X]),K+=1)}}}function E(D,X,O){for(var G=0,K=this.chars.length;G<K;){if(this.chars[G].ch===D&&this.chars[G].style===X&&this.chars[G].fFamily===O)return this.chars[G];G+=1}return(typeof D=="string"&&D.charCodeAt(0)!==13||!D)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",D,X,O)),r}function x(D,X,O){var G=this.getFontByName(X),K=D;if(!G.cache[K]){var Z=G.helper;if(D===" "){var U=Z.measureText("|"+D+"|"),V=Z.measureText("||");G.cache[K]=(U-V)/100}else G.cache[K]=Z.measureText(D)/100}return G.cache[K]*O}function k(D){for(var X=0,O=this.fonts.length;X<O;){if(this.fonts[X].fName===D)return this.fonts[X];X+=1}return this.fonts[0]}function T(D){var X=0,O=D.charCodeAt(0);if(O>=55296&&O<=56319){var G=D.charCodeAt(1);G>=56320&&G<=57343&&(X=(O-55296)*1024+G-56320+65536)}return X}function j(D,X){var O=D.toString(16)+X.toString(16);return _.indexOf(O)!==-1}function A(D){return D===i}function C(D){return D===c}function I(D){var X=T(D);return X>=f&&X<=m}function F(D){return I(D.substr(0,2))&&I(D.substr(2,2))}function N(D){return n.indexOf(D)!==-1}function z(D,X){var O=T(D.substr(X,2));if(O!==t)return!1;var G=0;for(X+=2;G<5;){if(O=T(D.substr(X,2)),O<l||O>o)return!1;G+=1,X+=2}return T(D.substr(X,2))===a}function R(){this.isLoaded=!0}var q=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};q.isModifier=j,q.isZeroWidthJoiner=A,q.isFlagEmoji=F,q.isRegionalCode=I,q.isCombinedCharacter=N,q.isRegionalFlag=z,q.isVariationSelector=C,q.BLACK_FLAG_CODE_POINT=t;var M={addChars:b,addFonts:S,getCharData:E,getFontByName:k,measureText:x,checkLoadedFonts:g,setIsLoaded:R};return q.prototype=M,q}();function SlotManager(s){this.animationData=s}SlotManager.prototype.getProp=function(s){return this.animationData.slots&&this.animationData.slots[s.sid]?Object.assign(s,this.animationData.slots[s.sid].p):s};function slotFactory(s){return new SlotManager(s)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(r){this.renderableComponents.indexOf(r)===-1&&this.renderableComponents.push(r)},removeRenderableComponent:function(r){this.renderableComponents.indexOf(r)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(r),1)},prepareRenderableFrame:function(r){this.checkLayerLimits(r)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(r){this.data.ip-this.data.st<=r&&this.data.op-this.data.st>r?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var r,n=this.renderableComponents.length;for(r=0;r<n;r+=1)this.renderableComponents[r].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var s={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(r){return s[r]||""}}();function SliderEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function AngleEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function ColorEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,1,0,n)}function PointEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,1,0,n)}function LayerIndexEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function MaskIndexEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function CheckboxEffect(s,r,n){this.p=PropertyFactory.getProp(r,s.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(s,r){var n=s.ef||[];this.effectElements=[];var t,a=n.length,l;for(t=0;t<a;t+=1)l=new GroupEffect(n[t],r),this.effectElements.push(l)}function GroupEffect(s,r){this.init(s,r)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(s,r){this.data=s,this.effectElements=[],this.initDynamicPropertyContainer(r);var n,t=this.data.ef.length,a,l=this.data.ef;for(n=0;n<t;n+=1){switch(a=null,l[n].ty){case 0:a=new SliderEffect(l[n],r,this);break;case 1:a=new AngleEffect(l[n],r,this);break;case 2:a=new ColorEffect(l[n],r,this);break;case 3:a=new PointEffect(l[n],r,this);break;case 4:case 7:a=new CheckboxEffect(l[n],r,this);break;case 10:a=new LayerIndexEffect(l[n],r,this);break;case 11:a=new MaskIndexEffect(l[n],r,this);break;case 5:a=new EffectsManager(l[n],r);break;default:a=new NoValueEffect(l[n]);break}a&&this.effectElements.push(a)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var r=0,n=this.data.masksProperties.length;r<n;){if(this.data.masksProperties[r].mode!=="n"&&this.data.masksProperties[r].cl!==!1)return!0;r+=1}return!1},initExpressions:function(){var r=getExpressionInterfaces();if(r){var n=r("layer"),t=r("effects"),a=r("shape"),l=r("text"),o=r("comp");this.layerInterface=n(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var c=t.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(c),this.data.ty===0||this.data.xt?this.compInterface=o(this):this.data.ty===4?(this.layerInterface.shapeInterface=a(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=l(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var r=getBlendMode(this.data.bm),n=this.baseElement||this.layerElement;n.style["mix-blend-mode"]=r},initBaseData:function(r,n,t){this.globalData=n,this.comp=t,this.data=r,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(r,n){var t,a=this.dynamicProperties.length;for(t=0;t<a;t+=1)(n||this._isParent&&this.dynamicProperties[t].propType==="transform")&&(this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&this.dynamicProperties.push(r)}};function FootageElement(s,r,n){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(s.refId),this.footageData=r.imageLoader.getAsset(this.assetData),this.initBaseData(s,r,n)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var s=getExpressionInterfaces();if(s){var r=s("footage");this.layerInterface=r(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(s,r,n){this.initFrame(),this.initRenderable(),this.assetData=r.getAssetData(s.refId),this.initBaseData(s,r,n),this._isPlaying=!1,this._canPlay=!1;var t=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(t),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,s.au&&s.au.lv?s.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(s){if(this.prepareRenderableFrame(s,!0),this.prepareProperties(s,!0),this.tm._placeholder)this._currentTime=s/this.data.sr;else{var r=this.tm.v;this._currentTime=r}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(s){this.audio.rate(s)},AudioElement.prototype.volume=function(s){this._volumeMultiplier=s,this._previousVolume=s*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(s){var r,n=this.layers.length,t;for(this.completeLayers=!0,r=n-1;r>=0;r-=1)this.elements[r]||(t=this.layers[r],t.ip-t.st<=s-this.layers[r].st&&t.op-t.st>s-this.layers[r].st&&this.buildItem(r)),this.completeLayers=this.elements[r]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(s){switch(s.ty){case 2:return this.createImage(s);case 0:return this.createComp(s);case 1:return this.createSolid(s);case 3:return this.createNull(s);case 4:return this.createShape(s);case 5:return this.createText(s);case 6:return this.createAudio(s);case 13:return this.createCamera(s);case 15:return this.createFootage(s);default:return this.createNull(s)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(s){return new AudioElement(s,this.globalData,this)},BaseRenderer.prototype.createFootage=function(s){return new FootageElement(s,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var s,r=this.layers.length;for(s=0;s<r;s+=1)this.buildItem(s);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(s){this.completeLayers=!1;var r,n=s.length,t,a=this.layers.length;for(r=0;r<n;r+=1)for(t=0;t<a;){if(this.layers[t].id===s[r].id){this.layers[t]=s[r];break}t+=1}},BaseRenderer.prototype.setProjectInterface=function(s){this.globalData.projectInterface=s},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(s,r,n){for(var t=this.elements,a=this.layers,l=0,o=a.length;l<o;)a[l].ind==r&&(!t[l]||t[l]===!0?(this.buildItem(l),this.addPendingElement(s)):(n.push(t[l]),t[l].setAsParent(),a[l].parent!==void 0?this.buildElementParenting(s,a[l].parent,n):s.setHierarchy(n))),l+=1},BaseRenderer.prototype.addPendingElement=function(s){this.pendingElements.push(s)},BaseRenderer.prototype.searchExtraCompositions=function(s){var r,n=s.length;for(r=0;r<n;r+=1)if(s[r].xt){var t=this.createComp(s[r]);t.initExpressions(),this.globalData.projectInterface.registerComposition(t)}},BaseRenderer.prototype.getElementById=function(s){var r,n=this.elements.length;for(r=0;r<n;r+=1)if(this.elements[r].data.ind===s)return this.elements[r];return null},BaseRenderer.prototype.getElementByPath=function(s){var r=s.shift(),n;if(typeof r=="number")n=this.elements[r];else{var t,a=this.elements.length;for(t=0;t<a;t+=1)if(this.elements[t].data.nm===r){n=this.elements[t];break}}return s.length===0?n:n.getElementByPath(s)},BaseRenderer.prototype.setupGlobalData=function(s,r){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(s),this.globalData.fontManager.addChars(s.chars),this.globalData.fontManager.addFonts(s.fonts,r),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=s.fr,this.globalData.nm=s.nm,this.globalData.compSize={w:s.w,h:s.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var r=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:r,localMat:r,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var r,n=this.finalTransform.mat,t=0,a=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;t<a;){if(this.hierarchy[t].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}t+=1}if(this.finalTransform._matMdf)for(r=this.finalTransform.mProp.v.props,n.cloneFromProps(r),t=0;t<a;t+=1)n.multiply(this.hierarchy[t].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var r=0,n=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;r<n;)this.localTransforms[r]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[r]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),r+=1;if(this.finalTransform._localMatMdf){var t=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(t),r=1;r<n;r+=1){var a=this.localTransforms[r].matrix;t.multiply(a)}t.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var l=this.finalTransform.localOpacity;for(r=0;r<n;r+=1)l*=this.localTransforms[r].opacity*.01;this.finalTransform.localOpacity=l}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var r=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(r.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var n=0,t=r.length;for(n=0;n<t;n+=1)this.localTransforms.push(r[n])}}},globalToLocal:function(r){var n=[];n.push(this.finalTransform);for(var t=!0,a=this.comp;t;)a.finalTransform?(a.data.hasMask&&n.splice(0,0,a.finalTransform),a=a.comp):t=!1;var l,o=n.length,c;for(l=0;l<o;l+=1)c=n[l].mat.applyToPointArray(0,0,0),r=[r[0]-c[0],r[1]-c[1],0];return r},mHelper:new Matrix};function MaskElement(s,r,n){this.data=s,this.element=r,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var t=this.globalData.defs,a,l=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(l),this.solidPath="";var o,c=this.masksProperties,i=0,f=[],m,_,u=createElementID(),p,g,y,S,b="clipPath",E="clip-path";for(a=0;a<l;a+=1)if((c[a].mode!=="a"&&c[a].mode!=="n"||c[a].inv||c[a].o.k!==100||c[a].o.x)&&(b="mask",E="mask"),(c[a].mode==="s"||c[a].mode==="i")&&i===0?(p=createNS("rect"),p.setAttribute("fill","#ffffff"),p.setAttribute("width",this.element.comp.data.w||0),p.setAttribute("height",this.element.comp.data.h||0),f.push(p)):p=null,o=createNS("path"),c[a].mode==="n")this.viewData[a]={op:PropertyFactory.getProp(this.element,c[a].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[a],3),elem:o,lastPath:""},t.appendChild(o);else{i+=1,o.setAttribute("fill",c[a].mode==="s"?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero");var x;if(c[a].x.k!==0?(b="mask",E="mask",S=PropertyFactory.getProp(this.element,c[a].x,0,null,this.element),x=createElementID(),g=createNS("filter"),g.setAttribute("id",x),y=createNS("feMorphology"),y.setAttribute("operator","erode"),y.setAttribute("in","SourceGraphic"),y.setAttribute("radius","0"),g.appendChild(y),t.appendChild(g),o.setAttribute("stroke",c[a].mode==="s"?"#000000":"#ffffff")):(y=null,S=null),this.storedData[a]={elem:o,x:S,expan:y,lastPath:"",lastOperator:"",filterId:x,lastRadius:0},c[a].mode==="i"){_=f.length;var k=createNS("g");for(m=0;m<_;m+=1)k.appendChild(f[m]);var T=createNS("mask");T.setAttribute("mask-type","alpha"),T.setAttribute("id",u+"_"+i),T.appendChild(o),t.appendChild(T),k.setAttribute("mask","url("+getLocationHref()+"#"+u+"_"+i+")"),f.length=0,f.push(k)}else f.push(o);c[a].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[a]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,c[a].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[a],3),invRect:p},this.viewData[a].prop.k||this.drawPath(c[a],this.viewData[a].prop.v,this.viewData[a])}for(this.maskElement=createNS(b),l=f.length,a=0;a<l;a+=1)this.maskElement.appendChild(f[a]);i>0&&(this.maskElement.setAttribute("id",u),this.element.maskedElement.setAttribute(E,"url("+getLocationHref()+"#"+u+")"),t.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(s){return this.viewData[s].prop},MaskElement.prototype.renderFrame=function(s){var r=this.element.finalTransform.mat,n,t=this.masksProperties.length;for(n=0;n<t;n+=1)if((this.viewData[n].prop._mdf||s)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||s)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),this.masksProperties[n].mode!=="n"&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||s)&&this.viewData[n].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||s))){var a=this.storedData[n].expan;this.storedData[n].x.v<0?(this.storedData[n].lastOperator!=="erode"&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[n].filterId+")")),a.setAttribute("radius",-this.storedData[n].x.v)):(this.storedData[n].lastOperator!=="dilate"&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",this.storedData[n].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var s="M0,0 ";return s+=" h"+this.globalData.compSize.w,s+=" v"+this.globalData.compSize.h,s+=" h-"+this.globalData.compSize.w,s+=" v-"+this.globalData.compSize.h+" ",s},MaskElement.prototype.drawPath=function(s,r,n){var t=" M"+r.v[0][0]+","+r.v[0][1],a,l;for(l=r._length,a=1;a<l;a+=1)t+=" C"+r.o[a-1][0]+","+r.o[a-1][1]+" "+r.i[a][0]+","+r.i[a][1]+" "+r.v[a][0]+","+r.v[a][1];if(r.c&&l>1&&(t+=" C"+r.o[a-1][0]+","+r.o[a-1][1]+" "+r.i[0][0]+","+r.i[0][1]+" "+r.v[0][0]+","+r.v[0][1]),n.lastPath!==t){var o="";n.elem&&(r.c&&(o=s.inv?this.solidPath+t:t),n.elem.setAttribute("d",o)),n.lastPath=t}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var s={};s.createFilter=r,s.createAlphaToLuminanceFilter=n;function r(t,a){var l=createNS("filter");return l.setAttribute("id",t),a!==!0&&(l.setAttribute("filterUnits","objectBoundingBox"),l.setAttribute("x","0%"),l.setAttribute("y","0%"),l.setAttribute("width","100%"),l.setAttribute("height","100%")),l}function n(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}return s}(),featureSupport=function(){var s={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(s.maskType=!1),/firefox/i.test(navigator.userAgent)&&(s.svgLumaHidden=!1),s}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(s){var r,n="SourceGraphic",t=s.data.ef?s.data.ef.length:0,a=createElementID(),l=filtersFactory.createFilter(a,!0),o=0;this.filters=[];var c;for(r=0;r<t;r+=1){c=null;var i=s.data.ef[r].ty;if(registeredEffects$1[i]){var f=registeredEffects$1[i].effect;c=new f(l,s.effectsManager.effectElements[r],s,idPrefix+o,n),n=idPrefix+o,registeredEffects$1[i].countsAsEffect&&(o+=1)}c&&this.filters.push(c)}o&&(s.globalData.defs.appendChild(l),s.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+a+")")),this.filters.length&&s.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(s){var r,n=this.filters.length;for(r=0;r<n;r+=1)this.filters[r].renderFrame(s)},SVGEffects.prototype.getEffects=function(s){var r,n=this.filters.length,t=[];for(r=0;r<n;r+=1)this.filters[r].type===s&&t.push(this.filters[r]);return t};function registerEffect$1(s,r,n){registeredEffects$1[s]={effect:r,countsAsEffect:n}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var r=null;if(this.data.td){this.matteMasks={};var n=createNS("g");n.setAttribute("id",this.layerId),n.appendChild(this.layerElement),r=n,this.globalData.defs.appendChild(n)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var t=createNS("clipPath"),a=createNS("path");a.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var l=createElementID();if(t.setAttribute("id",l),t.appendChild(a),this.globalData.defs.appendChild(t),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")"),o.appendChild(this.layerElement),this.transformedElement=o,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+l+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(r){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[r]){var n=this.layerId+"_"+r,t,a,l,o;if(r===1||r===3){var c=createNS("mask");c.setAttribute("id",n),c.setAttribute("mask-type",r===3?"luminance":"alpha"),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(l),this.globalData.defs.appendChild(c),!featureSupport.maskType&&r===1&&(c.setAttribute("mask-type","luminance"),t=createElementID(),a=filtersFactory.createFilter(t),this.globalData.defs.appendChild(a),a.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),o.appendChild(l),c.appendChild(o),o.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(r===2){var i=createNS("mask");i.setAttribute("id",n),i.setAttribute("mask-type","alpha");var f=createNS("g");i.appendChild(f),t=createElementID(),a=filtersFactory.createFilter(t);var m=createNS("feComponentTransfer");m.setAttribute("in","SourceGraphic"),a.appendChild(m);var _=createNS("feFuncA");_.setAttribute("type","table"),_.setAttribute("tableValues","1.0 0.0"),m.appendChild(_),this.globalData.defs.appendChild(a);var u=createNS("rect");u.setAttribute("width",this.comp.data.w),u.setAttribute("height",this.comp.data.h),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("fill","#ffffff"),u.setAttribute("opacity","0"),f.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),f.appendChild(u),l=createNS("use"),l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),f.appendChild(l),featureSupport.maskType||(i.setAttribute("mask-type","luminance"),a.appendChild(filtersFactory.createAlphaToLuminanceFilter()),o=createNS("g"),f.appendChild(u),o.appendChild(this.layerElement),f.appendChild(o)),this.globalData.defs.appendChild(i)}this.matteMasks[r]=n}return this.matteMasks[r]},setMatte:function(r){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+r+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(r){this.hierarchy=r},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var s={initElement:function(n,t,a){this.initFrame(),this.initBaseData(n,t,a),this.initTransform(n,t,a),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var n=this.baseElement||this.layerElement;n.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var n=this.baseElement||this.layerElement;n.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(n){this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(s)],RenderableDOMElement)})();function IImageElement(s,r,n){this.assetData=r.getAssetData(s.refId),this.assetData&&this.assetData.sid&&(this.assetData=r.slotManager.getProp(this.assetData)),this.initElement(s,r,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(s,r){this.elem=s,this.pos=r}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(r){var n,t=this.shapeModifiers.length;for(n=0;n<t;n+=1)this.shapeModifiers[n].addShape(r)},isShapeInAnimatedModifiers:function(r){for(var n=0,t=this.shapeModifiers.length;n<t;)if(this.shapeModifiers[n].isAnimatedWithShape(r))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var r,n=this.shapes.length;for(r=0;r<n;r+=1)this.shapes[r].sh.reset();n=this.shapeModifiers.length;var t;for(r=n-1;r>=0&&(t=this.shapeModifiers[r].processShapes(this._isFirstFrame),!t);r-=1);}},searchProcessedElement:function(r){for(var n=this.processedElements,t=0,a=n.length;t<a;){if(n[t].elem===r)return n[t].pos;t+=1}return 0},addProcessedElement:function(r,n){for(var t=this.processedElements,a=t.length;a;)if(a-=1,t[a].elem===r){t[a].pos=n;return}t.push(new ProcessedElement(r,n))},prepareFrame:function(r){this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(s,r,n){this.caches=[],this.styles=[],this.transformers=s,this.lStr="",this.sh=n,this.lvl=r,this._isAnimated=!!n.k;for(var t=0,a=s.length;t<a;){if(s[t].mProps.dynamicProperties.length){this._isAnimated=!0;break}t+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(s,r){this.data=s,this.type=s.ty,this.d="",this.lvl=r,this._mdf=!1,this.closed=s.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(s,r,n,t){this.elem=s,this.frameId=-1,this.dataProps=createSizedArray(r.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",r.length?r.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(t);var a,l=r.length||0,o;for(a=0;a<l;a+=1)o=PropertyFactory.getProp(s,r[a].v,0,0,this),this.k=o.k||this.k,this.dataProps[a]={n:r[a].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(s){if(!(this.elem.globalData.frameId===this.frameId&&!s)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||s,this._mdf)){var r=0,n=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),r=0;r<n;r+=1)this.dataProps[r].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[r].p.v:this.dashArray[r]=this.dataProps[r].p.v:this.dashoffset[0]=this.dataProps[r].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,r.o,0,.01,this),this.w=PropertyFactory.getProp(s,r.w,0,null,this),this.d=new DashProperty(s,r.d||{},"svg",this),this.c=PropertyFactory.getProp(s,r.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,r.o,0,.01,this),this.c=PropertyFactory.getProp(s,r.c,1,255,this),this.style=n}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.style=n}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(s,r,n){this.data=r,this.c=createTypedArray("uint8c",r.p*4);var t=r.k.k[0].s?r.k.k[0].s.length-r.p*4:r.k.k.length-r.p*4;this.o=createTypedArray("float32",t),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=t,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(s,r.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(s,r){for(var n=0,t=this.o.length/2,a;n<t;){if(a=Math.abs(s[n*4]-s[r*4+n*2]),a>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var s=0,r=this.data.k.k.length;s<r;){if(!this.comparePoints(this.data.k.k[s].s,this.data.p))return!1;s+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(s){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||s){var r,n=this.data.p*4,t,a;for(r=0;r<n;r+=1)t=r%4===0?100:255,a=Math.round(this.prop.v[r]*t),this.c[r]!==a&&(this.c[r]=a,this._cmdf=!s);if(this.o.length)for(n=this.prop.v.length,r=this.data.p*4;r<n;r+=1)t=r%2===0?100:1,a=r%2===0?Math.round(this.prop.v[r]*100):this.prop.v[r],this.o[r-this.data.p*4]!==a&&(this.o[r-this.data.p*4]=a,this._omdf=!s);this._mdf=!s}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.initGradientData(s,r,n)}SVGGradientFillStyleData.prototype.initGradientData=function(s,r,n){this.o=PropertyFactory.getProp(s,r.o,0,.01,this),this.s=PropertyFactory.getProp(s,r.s,1,null,this),this.e=PropertyFactory.getProp(s,r.e,1,null,this),this.h=PropertyFactory.getProp(s,r.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(s,r.a||{k:0},0,degToRads,this),this.g=new GradientProperty(s,r.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,r),this.setGradientOpacity(r,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(s,r){var n=createElementID(),t=createNS(r.t===1?"linearGradient":"radialGradient");t.setAttribute("id",n),t.setAttribute("spreadMethod","pad"),t.setAttribute("gradientUnits","userSpaceOnUse");var a=[],l,o,c;for(c=r.g.p*4,o=0;o<c;o+=4)l=createNS("stop"),t.appendChild(l),a.push(l);s.setAttribute(r.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=t,this.cst=a},SVGGradientFillStyleData.prototype.setGradientOpacity=function(s,r){if(this.g._hasOpacity&&!this.g._collapsable){var n,t,a,l=createNS("mask"),o=createNS("path");l.appendChild(o);var c=createElementID(),i=createElementID();l.setAttribute("id",i);var f=createNS(s.t===1?"linearGradient":"radialGradient");f.setAttribute("id",c),f.setAttribute("spreadMethod","pad"),f.setAttribute("gradientUnits","userSpaceOnUse"),a=s.g.k.k[0].s?s.g.k.k[0].s.length:s.g.k.k.length;var m=this.stops;for(t=s.g.p*4;t<a;t+=2)n=createNS("stop"),n.setAttribute("stop-color","rgb(255,255,255)"),f.appendChild(n),m.push(n);o.setAttribute(s.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+c+")"),s.ty==="gs"&&(o.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),s.lj===1&&o.setAttribute("stroke-miterlimit",s.ml)),this.of=f,this.ms=l,this.ost=m,this.maskId=i,r.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(s,r,n){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(s,r.w,0,null,this),this.d=new DashProperty(s,r.d||{},"svg",this),this.initGradientData(s,r,n),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(s,r,n){this.transform={mProps:s,op:r,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(r,n,t,a){if(n===0)return"";var l=r.o,o=r.i,c=r.v,i,f=" M"+a.applyToPointStringified(c[0][0],c[0][1]);for(i=1;i<n;i+=1)f+=" C"+a.applyToPointStringified(l[i-1][0],l[i-1][1])+" "+a.applyToPointStringified(o[i][0],o[i][1])+" "+a.applyToPointStringified(c[i][0],c[i][1]);return t&&n&&(f+=" C"+a.applyToPointStringified(l[i-1][0],l[i-1][1])+" "+a.applyToPointStringified(o[0][0],o[0][1])+" "+a.applyToPointStringified(c[0][0],c[0][1]),f+="z"),f},SVGElementsRenderer=function(){var s=new Matrix,r=new Matrix,n={createRenderFunction:t};function t(_){switch(_.ty){case"fl":return c;case"gf":return f;case"gs":return i;case"st":return m;case"sh":case"el":case"rc":case"sr":return o;case"tr":return a;case"no":return l;default:return null}}function a(_,u,p){(p||u.transform.op._mdf)&&u.transform.container.setAttribute("opacity",u.transform.op.v),(p||u.transform.mProps._mdf)&&u.transform.container.setAttribute("transform",u.transform.mProps.v.to2dCSS())}function l(){}function o(_,u,p){var g,y,S,b,E,x,k=u.styles.length,T=u.lvl,j,A,C,I;for(x=0;x<k;x+=1){if(b=u.sh._mdf||p,u.styles[x].lvl<T){for(A=r.reset(),C=T-u.styles[x].lvl,I=u.transformers.length-1;!b&&C>0;)b=u.transformers[I].mProps._mdf||b,C-=1,I-=1;if(b)for(C=T-u.styles[x].lvl,I=u.transformers.length-1;C>0;)A.multiply(u.transformers[I].mProps.v),C-=1,I-=1}else A=s;if(j=u.sh.paths,y=j._length,b){for(S="",g=0;g<y;g+=1)E=j.shapes[g],E&&E._length&&(S+=buildShapeString(E,E._length,E.c,A));u.caches[x]=S}else S=u.caches[x];u.styles[x].d+=_.hd===!0?"":S,u.styles[x]._mdf=b||u.styles[x]._mdf}}function c(_,u,p){var g=u.style;(u.c._mdf||p)&&g.pElem.setAttribute("fill","rgb("+bmFloor(u.c.v[0])+","+bmFloor(u.c.v[1])+","+bmFloor(u.c.v[2])+")"),(u.o._mdf||p)&&g.pElem.setAttribute("fill-opacity",u.o.v)}function i(_,u,p){f(_,u,p),m(_,u,p)}function f(_,u,p){var g=u.gf,y=u.g._hasOpacity,S=u.s.v,b=u.e.v;if(u.o._mdf||p){var E=_.ty==="gf"?"fill-opacity":"stroke-opacity";u.style.pElem.setAttribute(E,u.o.v)}if(u.s._mdf||p){var x=_.t===1?"x1":"cx",k=x==="x1"?"y1":"cy";g.setAttribute(x,S[0]),g.setAttribute(k,S[1]),y&&!u.g._collapsable&&(u.of.setAttribute(x,S[0]),u.of.setAttribute(k,S[1]))}var T,j,A,C;if(u.g._cmdf||p){T=u.cst;var I=u.g.c;for(A=T.length,j=0;j<A;j+=1)C=T[j],C.setAttribute("offset",I[j*4]+"%"),C.setAttribute("stop-color","rgb("+I[j*4+1]+","+I[j*4+2]+","+I[j*4+3]+")")}if(y&&(u.g._omdf||p)){var F=u.g.o;for(u.g._collapsable?T=u.cst:T=u.ost,A=T.length,j=0;j<A;j+=1)C=T[j],u.g._collapsable||C.setAttribute("offset",F[j*2]+"%"),C.setAttribute("stop-opacity",F[j*2+1])}if(_.t===1)(u.e._mdf||p)&&(g.setAttribute("x2",b[0]),g.setAttribute("y2",b[1]),y&&!u.g._collapsable&&(u.of.setAttribute("x2",b[0]),u.of.setAttribute("y2",b[1])));else{var N;if((u.s._mdf||u.e._mdf||p)&&(N=Math.sqrt(Math.pow(S[0]-b[0],2)+Math.pow(S[1]-b[1],2)),g.setAttribute("r",N),y&&!u.g._collapsable&&u.of.setAttribute("r",N)),u.e._mdf||u.h._mdf||u.a._mdf||p){N||(N=Math.sqrt(Math.pow(S[0]-b[0],2)+Math.pow(S[1]-b[1],2)));var z=Math.atan2(b[1]-S[1],b[0]-S[0]),R=u.h.v;R>=1?R=.99:R<=-1&&(R=-.99);var q=N*R,M=Math.cos(z+u.a.v)*q+S[0],D=Math.sin(z+u.a.v)*q+S[1];g.setAttribute("fx",M),g.setAttribute("fy",D),y&&!u.g._collapsable&&(u.of.setAttribute("fx",M),u.of.setAttribute("fy",D))}}}function m(_,u,p){var g=u.style,y=u.d;y&&(y._mdf||p)&&y.dashStr&&(g.pElem.setAttribute("stroke-dasharray",y.dashStr),g.pElem.setAttribute("stroke-dashoffset",y.dashoffset[0])),u.c&&(u.c._mdf||p)&&g.pElem.setAttribute("stroke","rgb("+bmFloor(u.c.v[0])+","+bmFloor(u.c.v[1])+","+bmFloor(u.c.v[2])+")"),(u.o._mdf||p)&&g.pElem.setAttribute("stroke-opacity",u.o.v),(u.w._mdf||p)&&(g.pElem.setAttribute("stroke-width",u.w.v),g.msElem&&g.msElem.setAttribute("stroke-width",u.w.v))}return n}();function SVGShapeElement(s,r,n){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(s,r,n),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var s,r=this.shapes.length,n,t,a=this.stylesList.length,l,o=[],c=!1;for(t=0;t<a;t+=1){for(l=this.stylesList[t],c=!1,o.length=0,s=0;s<r;s+=1)n=this.shapes[s],n.styles.indexOf(l)!==-1&&(o.push(n),c=n._isAnimated||c);o.length>1&&c&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(s){var r,n=s.length;for(r=0;r<n;r+=1)s[r].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(s,r){var n,t=new SVGStyleData(s,r),a=t.pElem;if(s.ty==="st")n=new SVGStrokeStyleData(this,s,t);else if(s.ty==="fl")n=new SVGFillStyleData(this,s,t);else if(s.ty==="gf"||s.ty==="gs"){var l=s.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;n=new l(this,s,t),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),a.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))}else s.ty==="no"&&(n=new SVGNoStyleData(this,s,t));return(s.ty==="st"||s.ty==="gs")&&(a.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),a.setAttribute("fill-opacity","0"),s.lj===1&&a.setAttribute("stroke-miterlimit",s.ml)),s.r===2&&a.setAttribute("fill-rule","evenodd"),s.ln&&a.setAttribute("id",s.ln),s.cl&&a.setAttribute("class",s.cl),s.bm&&(a.style["mix-blend-mode"]=getBlendMode(s.bm)),this.stylesList.push(t),this.addToAnimatedContents(s,n),n},SVGShapeElement.prototype.createGroupElement=function(s){var r=new ShapeGroupData;return s.ln&&r.gr.setAttribute("id",s.ln),s.cl&&r.gr.setAttribute("class",s.cl),s.bm&&(r.gr.style["mix-blend-mode"]=getBlendMode(s.bm)),r},SVGShapeElement.prototype.createTransformElement=function(s,r){var n=TransformPropertyFactory.getTransformProperty(this,s,this),t=new SVGTransformData(n,n.o,r);return this.addToAnimatedContents(s,t),t},SVGShapeElement.prototype.createShapeElement=function(s,r,n){var t=4;s.ty==="rc"?t=5:s.ty==="el"?t=6:s.ty==="sr"&&(t=7);var a=ShapePropertyFactory.getShapeProp(this,s,t,this),l=new SVGShapeData(r,n,a);return this.shapes.push(l),this.addShapeToModifiers(l),this.addToAnimatedContents(s,l),l},SVGShapeElement.prototype.addToAnimatedContents=function(s,r){for(var n=0,t=this.animatedContents.length;n<t;){if(this.animatedContents[n].element===r)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(s),element:r,data:s})},SVGShapeElement.prototype.setElementStyles=function(s){var r=s.styles,n,t=this.stylesList.length;for(n=0;n<t;n+=1)this.stylesList[n].closed||r.push(this.stylesList[n])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,r=this.itemsData.length;for(s=0;s<r;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),r=this.dynamicProperties.length,s=0;s<r;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(s,r,n,t,a,l,o){var c=[].concat(l),i,f=s.length-1,m,_,u=[],p=[],g,y,S;for(i=f;i>=0;i-=1){if(S=this.searchProcessedElement(s[i]),S?r[i]=n[S-1]:s[i]._render=o,s[i].ty==="fl"||s[i].ty==="st"||s[i].ty==="gf"||s[i].ty==="gs"||s[i].ty==="no")S?r[i].style.closed=!1:r[i]=this.createStyleElement(s[i],a),s[i]._render&&r[i].style.pElem.parentNode!==t&&t.appendChild(r[i].style.pElem),u.push(r[i].style);else if(s[i].ty==="gr"){if(!S)r[i]=this.createGroupElement(s[i]);else for(_=r[i].it.length,m=0;m<_;m+=1)r[i].prevViewData[m]=r[i].it[m];this.searchShapes(s[i].it,r[i].it,r[i].prevViewData,r[i].gr,a+1,c,o),s[i]._render&&r[i].gr.parentNode!==t&&t.appendChild(r[i].gr)}else s[i].ty==="tr"?(S||(r[i]=this.createTransformElement(s[i],t)),g=r[i].transform,c.push(g)):s[i].ty==="sh"||s[i].ty==="rc"||s[i].ty==="el"||s[i].ty==="sr"?(S||(r[i]=this.createShapeElement(s[i],c,a)),this.setElementStyles(r[i])):s[i].ty==="tm"||s[i].ty==="rd"||s[i].ty==="ms"||s[i].ty==="pb"||s[i].ty==="zz"||s[i].ty==="op"?(S?(y=r[i],y.closed=!1):(y=ShapeModifiers.getModifier(s[i].ty),y.init(this,s[i]),r[i]=y,this.shapeModifiers.push(y)),p.push(y)):s[i].ty==="rp"&&(S?(y=r[i],y.closed=!0):(y=ShapeModifiers.getModifier(s[i].ty),r[i]=y,y.init(this,s,i,r),this.shapeModifiers.push(y),o=!1),p.push(y));this.addProcessedElement(s[i],i+1)}for(f=u.length,i=0;i<f;i+=1)u[i].closed=!0;for(f=p.length,i=0;i<f;i+=1)p[i].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var s,r=this.stylesList.length;for(s=0;s<r;s+=1)this.stylesList[s].reset();for(this.renderShape(),s=0;s<r;s+=1)(this.stylesList[s]._mdf||this._isFirstFrame)&&(this.stylesList[s].msElem&&(this.stylesList[s].msElem.setAttribute("d",this.stylesList[s].d),this.stylesList[s].d="M0 0"+this.stylesList[s].d),this.stylesList[s].pElem.setAttribute("d",this.stylesList[s].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var s,r=this.animatedContents.length,n;for(s=0;s<r;s+=1)n=this.animatedContents[s],(this._isFirstFrame||n.element._isAnimated)&&n.data!==!0&&n.fn(n.data,n.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(s,r,n,t,a,l){this.o=s,this.sw=r,this.sc=n,this.fc=t,this.m=a,this.p=l,this._mdf={o:!0,sw:!!r,sc:!!n,fc:!!t,m:!0,p:!0}}LetterProps.prototype.update=function(s,r,n,t,a,l){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==s&&(this.o=s,this._mdf.o=!0,o=!0),this.sw!==r&&(this.sw=r,this._mdf.sw=!0,o=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,o=!0),this.fc!==t&&(this.fc=t,this._mdf.fc=!0,o=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,o=!0),l.length&&(this.p[0]!==l[0]||this.p[1]!==l[1]||this.p[4]!==l[4]||this.p[5]!==l[5]||this.p[12]!==l[12]||this.p[13]!==l[13])&&(this.p=l,this._mdf.p=!0,o=!0),o};function TextProperty(s,r){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,r.d&&r.d.sid&&(r.d=s.globalData.slotManager.getProp(r.d)),this.data=r,this.elem=s,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(s,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n]);return s},TextProperty.prototype.setCurrentData=function(s){s.__complete||this.completeTextData(s),this.currentData=s,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(s){this.effectsSequence.push(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(s){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!s)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var r=this.currentData,n=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var t,a=this.effectsSequence.length,l=s||this.data.d.k[this.keysIndex].s;for(t=0;t<a;t+=1)n!==this.keysIndex?l=this.effectsSequence[t](l,l.t):l=this.effectsSequence[t](this.currentData,l.t);r!==l&&this.setCurrentData(l),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var s=this.data.d.k,r=this.elem.comp.renderedFrame,n=0,t=s.length;n<=t-1&&!(n===t-1||s[n+1].t>r);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(s){for(var r=[],n=0,t=s.length,a,l,o=!1,c=!1,i="";n<t;)o=c,c=!1,a=s.charCodeAt(n),i=s.charAt(n),FontManager.isCombinedCharacter(a)?o=!0:a>=55296&&a<=56319?FontManager.isRegionalFlag(s,n)?i=s.substr(n,14):(l=s.charCodeAt(n+1),l>=56320&&l<=57343&&(FontManager.isModifier(a,l)?(i=s.substr(n,2),o=!0):FontManager.isFlagEmoji(s.substr(n,4))?i=s.substr(n,4):i=s.substr(n,2))):a>56319?(l=s.charCodeAt(n+1),FontManager.isVariationSelector(a)&&(o=!0)):FontManager.isZeroWidthJoiner(a)&&(o=!0,c=!0),o?(r[r.length-1]+=i,o=!1):r.push(i),n+=i.length;return r},TextProperty.prototype.completeTextData=function(s){s.__complete=!0;var r=this.elem.globalData.fontManager,n=this.data,t=[],a,l,o,c=0,i,f=n.m.g,m=0,_=0,u=0,p=[],g=0,y=0,S,b,E=r.getFontByName(s.f),x,k=0,T=getFontProperties(E);s.fWeight=T.weight,s.fStyle=T.style,s.finalSize=s.s,s.finalText=this.buildFinalText(s.t),l=s.finalText.length,s.finalLineHeight=s.lh;var j=s.tr/1e3*s.finalSize,A;if(s.sz)for(var C=!0,I=s.sz[0],F=s.sz[1],N,z;C;){z=this.buildFinalText(s.t),N=0,g=0,l=z.length,j=s.tr/1e3*s.finalSize;var R=-1;for(a=0;a<l;a+=1)A=z[a].charCodeAt(0),o=!1,z[a]===" "?R=a:(A===13||A===3)&&(g=0,o=!0,N+=s.finalLineHeight||s.finalSize*1.2),r.chars?(x=r.getCharData(z[a],E.fStyle,E.fFamily),k=o?0:x.w*s.finalSize/100):k=r.measureText(z[a],s.f,s.finalSize),g+k>I&&z[a]!==" "?(R===-1?l+=1:a=R,N+=s.finalLineHeight||s.finalSize*1.2,z.splice(a,R===a?1:0,"\r"),R=-1,g=0):(g+=k,g+=j);N+=E.ascent*s.finalSize/100,this.canResize&&s.finalSize>this.minimumFontSize&&F<N?(s.finalSize-=1,s.finalLineHeight=s.finalSize*s.lh/s.s):(s.finalText=z,l=s.finalText.length,C=!1)}g=-j,k=0;var q=0,M;for(a=0;a<l;a+=1)if(o=!1,M=s.finalText[a],A=M.charCodeAt(0),A===13||A===3?(q=0,p.push(g),y=g>y?g:y,g=-2*j,i="",o=!0,u+=1):i=M,r.chars?(x=r.getCharData(M,E.fStyle,r.getFontByName(s.f).fFamily),k=o?0:x.w*s.finalSize/100):k=r.measureText(i,s.f,s.finalSize),M===" "?q+=k+j:(g+=k+j+q,q=0),t.push({l:k,an:k,add:m,n:o,anIndexes:[],val:i,line:u,animatorJustifyOffset:0}),f==2){if(m+=k,i===""||i===" "||a===l-1){for((i===""||i===" ")&&(m-=k);_<=a;)t[_].an=m,t[_].ind=c,t[_].extra=k,_+=1;c+=1,m=0}}else if(f==3){if(m+=k,i===""||a===l-1){for(i===""&&(m-=k);_<=a;)t[_].an=m,t[_].ind=c,t[_].extra=k,_+=1;m=0,c+=1}}else t[c].ind=c,t[c].extra=0,c+=1;if(s.l=t,y=g>y?g:y,p.push(g),s.sz)s.boxWidth=s.sz[0],s.justifyOffset=0;else switch(s.boxWidth=y,s.j){case 1:s.justifyOffset=-s.boxWidth;break;case 2:s.justifyOffset=-s.boxWidth/2;break;default:s.justifyOffset=0}s.lineWidths=p;var D=n.a,X,O;b=D.length;var G,K,Z=[];for(S=0;S<b;S+=1){for(X=D[S],X.a.sc&&(s.strokeColorAnim=!0),X.a.sw&&(s.strokeWidthAnim=!0),(X.a.fc||X.a.fh||X.a.fs||X.a.fb)&&(s.fillColorAnim=!0),K=0,G=X.s.b,a=0;a<l;a+=1)O=t[a],O.anIndexes[S]=K,(G==1&&O.val!==""||G==2&&O.val!==""&&O.val!==" "||G==3&&(O.n||O.val==" "||a==l-1)||G==4&&(O.n||a==l-1))&&(X.s.rn===1&&Z.push(K),K+=1);n.a[S].s.totalChars=K;var U=-1,V;if(X.s.rn===1)for(a=0;a<l;a+=1)O=t[a],U!=O.anIndexes[S]&&(U=O.anIndexes[S],V=Z.splice(Math.floor(Math.random()*Z.length),1)[0]),O.anIndexes[S]=V}s.yOffset=s.finalLineHeight||s.finalSize*1.2,s.ls=s.ls||0,s.ascent=E.ascent*s.finalSize/100},TextProperty.prototype.updateDocumentData=function(s,r){r=r===void 0?this.keysIndex:r;var n=this.copyData({},this.data.d.k[r].s);n=this.copyData(n,s),this.data.d.k[r].s=n,this.recalculate(r),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(s){var r=this.data.d.k[s].s;r.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(r)},TextProperty.prototype.canResizeFont=function(s){this.canResize=s,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(s){this.minimumFontSize=Math.floor(s)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var s=Math.max,r=Math.min,n=Math.floor;function t(l,o){this._currentTextLength=-1,this.k=!1,this.data=o,this.elem=l,this.comp=l.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(l),this.s=PropertyFactory.getProp(l,o.s||{k:0},0,0,this),"e"in o?this.e=PropertyFactory.getProp(l,o.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(l,o.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(l,o.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(l,o.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(l,o.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(l,o.a,0,.01,this),this.dynamicProperties.length||this.getValue()}t.prototype={getMult:function(o){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var c=0,i=0,f=1,m=1;this.ne.v>0?c=this.ne.v/100:i=-this.ne.v/100,this.xe.v>0?f=1-this.xe.v/100:m=1+this.xe.v/100;var _=BezierFactory.getBezierEasing(c,i,f,m).get,u=0,p=this.finalS,g=this.finalE,y=this.data.sh;if(y===2)g===p?u=o>=g?1:0:u=s(0,r(.5/(g-p)+(o-p)/(g-p),1)),u=_(u);else if(y===3)g===p?u=o>=g?0:1:u=1-s(0,r(.5/(g-p)+(o-p)/(g-p),1)),u=_(u);else if(y===4)g===p?u=0:(u=s(0,r(.5/(g-p)+(o-p)/(g-p),1)),u<.5?u*=2:u=1-2*(u-.5)),u=_(u);else if(y===5){if(g===p)u=0;else{var S=g-p;o=r(s(0,o+.5-p),g-p);var b=-S/2+o,E=S/2;u=Math.sqrt(1-b*b/(E*E))}u=_(u)}else y===6?(g===p?u=0:(o=r(s(0,o+.5-p),g-p),u=(1+Math.cos(Math.PI+Math.PI*2*o/(g-p)))/2),u=_(u)):(o>=n(p)&&(o-p<0?u=s(0,r(r(g,1)-(p-o),1)):u=s(0,r(g-o,1))),u=_(u));if(this.sm.v!==100){var x=this.sm.v*.01;x===0&&(x=1e-8);var k=.5-x*.5;u<k?u=0:(u=(u-k)/x,u>1&&(u=1))}return u*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&this.data.r===2&&(this.e.v=this._currentTextLength);var c=this.data.r===2?1:100/this.data.totalChars,i=this.o.v/c,f=this.s.v/c+i,m=this.e.v/c+i;if(f>m){var _=f;f=m,m=_}this.finalS=f,this.finalE=m}},extendPrototype([DynamicPropertyContainer],t);function a(l,o,c){return new t(l,o)}return{getTextSelectorProp:a}}();function TextAnimatorDataProperty(s,r,n){var t={propType:!1},a=PropertyFactory.getProp,l=r.a;this.a={r:l.r?a(s,l.r,0,degToRads,n):t,rx:l.rx?a(s,l.rx,0,degToRads,n):t,ry:l.ry?a(s,l.ry,0,degToRads,n):t,sk:l.sk?a(s,l.sk,0,degToRads,n):t,sa:l.sa?a(s,l.sa,0,degToRads,n):t,s:l.s?a(s,l.s,1,.01,n):t,a:l.a?a(s,l.a,1,0,n):t,o:l.o?a(s,l.o,0,.01,n):t,p:l.p?a(s,l.p,1,0,n):t,sw:l.sw?a(s,l.sw,0,0,n):t,sc:l.sc?a(s,l.sc,1,0,n):t,fc:l.fc?a(s,l.fc,1,0,n):t,fh:l.fh?a(s,l.fh,0,0,n):t,fs:l.fs?a(s,l.fs,0,.01,n):t,fb:l.fb?a(s,l.fb,0,.01,n):t,t:l.t?a(s,l.t,0,0,n):t},this.s=TextSelectorProp.getTextSelectorProp(s,r.s,n),this.s.t=r.s.t}function TextAnimatorProperty(s,r,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=s,this._renderType=r,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}TextAnimatorProperty.prototype.searchProperties=function(){var s,r=this._textData.a.length,n,t=PropertyFactory.getProp;for(s=0;s<r;s+=1)n=this._textData.a[s],this._animatorsData[s]=new TextAnimatorDataProperty(this._elem,n,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:t(this._elem,this._textData.p.a,0,0,this),f:t(this._elem,this._textData.p.f,0,0,this),l:t(this._elem,this._textData.p.l,0,0,this),r:t(this._elem,this._textData.p.r,0,0,this),p:t(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=t(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(s,r){if(this.lettersChangedFlag=r,!(!this._mdf&&!this._isFirstFrame&&!r&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var n=this._moreOptions.alignment.v,t=this._animatorsData,a=this._textData,l=this.mHelper,o=this._renderType,c=this.renderedLetters.length,i,f,m,_,u=s.l,p,g,y,S,b,E,x,k,T,j,A,C,I,F,N;if(this._hasMaskedPath){if(N=this._pathData.m,!this._pathData.n||this._pathData._mdf){var z=N.v;this._pathData.r.v&&(z=z.reverse()),p={tLength:0,segments:[]},_=z._length-1;var R;for(C=0,m=0;m<_;m+=1)R=bez.buildBezierData(z.v[m],z.v[m+1],[z.o[m][0]-z.v[m][0],z.o[m][1]-z.v[m][1]],[z.i[m+1][0]-z.v[m+1][0],z.i[m+1][1]-z.v[m+1][1]]),p.tLength+=R.segmentLength,p.segments.push(R),C+=R.segmentLength;m=_,N.v.c&&(R=bez.buildBezierData(z.v[m],z.v[0],[z.o[m][0]-z.v[m][0],z.o[m][1]-z.v[m][1]],[z.i[0][0]-z.v[0][0],z.i[0][1]-z.v[0][1]]),p.tLength+=R.segmentLength,p.segments.push(R),C+=R.segmentLength),this._pathData.pi=p}if(p=this._pathData.pi,g=this._pathData.f.v,x=0,E=1,S=0,b=!0,j=p.segments,g<0&&N.v.c)for(p.tLength<Math.abs(g)&&(g=-Math.abs(g)%p.tLength),x=j.length-1,T=j[x].points,E=T.length-1;g<0;)g+=T[E].partialLength,E-=1,E<0&&(x-=1,T=j[x].points,E=T.length-1);T=j[x].points,k=T[E-1],y=T[E],A=y.partialLength}_=u.length,i=0,f=0;var q=s.finalSize*1.2*.714,M=!0,D,X,O,G,K;G=t.length;var Z,U=-1,V,L,H,J=g,ne=x,se=E,fe=-1,xe,he,_e,ye,ue,pe,ke,Ie,Y="",te=this.defaultPropsArray,re;if(s.j===2||s.j===1){var be=0,ve=0,je=s.j===2?-.5:-1,Re=0,Ge=!0;for(m=0;m<_;m+=1)if(u[m].n){for(be&&(be+=ve);Re<m;)u[Re].animatorJustifyOffset=be,Re+=1;be=0,Ge=!0}else{for(O=0;O<G;O+=1)D=t[O].a,D.t.propType&&(Ge&&s.j===2&&(ve+=D.t.v*je),X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),Z.length?be+=D.t.v*Z[0]*je:be+=D.t.v*Z*je);Ge=!1}for(be&&(be+=ve);Re<m;)u[Re].animatorJustifyOffset=be,Re+=1}for(m=0;m<_;m+=1){if(l.reset(),xe=1,u[m].n)i=0,f+=s.yOffset,f+=M?1:0,g=J,M=!1,this._hasMaskedPath&&(x=ne,E=se,T=j[x].points,k=T[E-1],y=T[E],A=y.partialLength,S=0),Y="",Ie="",pe="",re="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(fe!==u[m].line){switch(s.j){case 1:g+=C-s.lineWidths[u[m].line];break;case 2:g+=(C-s.lineWidths[u[m].line])/2;break}fe=u[m].line}U!==u[m].ind&&(u[U]&&(g+=u[U].extra),g+=u[m].an/2,U=u[m].ind),g+=n[0]*u[m].an*.005;var Xe=0;for(O=0;O<G;O+=1)D=t[O].a,D.p.propType&&(X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),Z.length?Xe+=D.p.v[0]*Z[0]:Xe+=D.p.v[0]*Z),D.a.propType&&(X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),Z.length?Xe+=D.a.v[0]*Z[0]:Xe+=D.a.v[0]*Z);for(b=!0,this._pathData.a.v&&(g=u[0].an*.5+(C-this._pathData.f.v-u[0].an*.5-u[u.length-1].an*.5)*U/(_-1),g+=this._pathData.f.v);b;)S+A>=g+Xe||!T?(I=(g+Xe-S)/y.partialLength,L=k.point[0]+(y.point[0]-k.point[0])*I,H=k.point[1]+(y.point[1]-k.point[1])*I,l.translate(-n[0]*u[m].an*.005,-(n[1]*q)*.01),b=!1):T&&(S+=y.partialLength,E+=1,E>=T.length&&(E=0,x+=1,j[x]?T=j[x].points:N.v.c?(E=0,x=0,T=j[x].points):(S-=y.partialLength,T=null)),T&&(k=y,y=T[E],A=y.partialLength));V=u[m].an/2-u[m].add,l.translate(-V,0,0)}else V=u[m].an/2-u[m].add,l.translate(-V,0,0),l.translate(-n[0]*u[m].an*.005,-n[1]*q*.01,0);for(O=0;O<G;O+=1)D=t[O].a,D.t.propType&&(X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),(i!==0||s.j!==0)&&(this._hasMaskedPath?Z.length?g+=D.t.v*Z[0]:g+=D.t.v*Z:Z.length?i+=D.t.v*Z[0]:i+=D.t.v*Z));for(s.strokeWidthAnim&&(_e=s.sw||0),s.strokeColorAnim&&(s.sc?he=[s.sc[0],s.sc[1],s.sc[2]]:he=[0,0,0]),s.fillColorAnim&&s.fc&&(ye=[s.fc[0],s.fc[1],s.fc[2]]),O=0;O<G;O+=1)D=t[O].a,D.a.propType&&(X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),Z.length?l.translate(-D.a.v[0]*Z[0],-D.a.v[1]*Z[1],D.a.v[2]*Z[2]):l.translate(-D.a.v[0]*Z,-D.a.v[1]*Z,D.a.v[2]*Z));for(O=0;O<G;O+=1)D=t[O].a,D.s.propType&&(X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),Z.length?l.scale(1+(D.s.v[0]-1)*Z[0],1+(D.s.v[1]-1)*Z[1],1):l.scale(1+(D.s.v[0]-1)*Z,1+(D.s.v[1]-1)*Z,1));for(O=0;O<G;O+=1){if(D=t[O].a,X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),D.sk.propType&&(Z.length?l.skewFromAxis(-D.sk.v*Z[0],D.sa.v*Z[1]):l.skewFromAxis(-D.sk.v*Z,D.sa.v*Z)),D.r.propType&&(Z.length?l.rotateZ(-D.r.v*Z[2]):l.rotateZ(-D.r.v*Z)),D.ry.propType&&(Z.length?l.rotateY(D.ry.v*Z[1]):l.rotateY(D.ry.v*Z)),D.rx.propType&&(Z.length?l.rotateX(D.rx.v*Z[0]):l.rotateX(D.rx.v*Z)),D.o.propType&&(Z.length?xe+=(D.o.v*Z[0]-xe)*Z[0]:xe+=(D.o.v*Z-xe)*Z),s.strokeWidthAnim&&D.sw.propType&&(Z.length?_e+=D.sw.v*Z[0]:_e+=D.sw.v*Z),s.strokeColorAnim&&D.sc.propType)for(ue=0;ue<3;ue+=1)Z.length?he[ue]+=(D.sc.v[ue]-he[ue])*Z[0]:he[ue]+=(D.sc.v[ue]-he[ue])*Z;if(s.fillColorAnim&&s.fc){if(D.fc.propType)for(ue=0;ue<3;ue+=1)Z.length?ye[ue]+=(D.fc.v[ue]-ye[ue])*Z[0]:ye[ue]+=(D.fc.v[ue]-ye[ue])*Z;D.fh.propType&&(Z.length?ye=addHueToRGB(ye,D.fh.v*Z[0]):ye=addHueToRGB(ye,D.fh.v*Z)),D.fs.propType&&(Z.length?ye=addSaturationToRGB(ye,D.fs.v*Z[0]):ye=addSaturationToRGB(ye,D.fs.v*Z)),D.fb.propType&&(Z.length?ye=addBrightnessToRGB(ye,D.fb.v*Z[0]):ye=addBrightnessToRGB(ye,D.fb.v*Z))}}for(O=0;O<G;O+=1)D=t[O].a,D.p.propType&&(X=t[O].s,Z=X.getMult(u[m].anIndexes[O],a.a[O].s.totalChars),this._hasMaskedPath?Z.length?l.translate(0,D.p.v[1]*Z[0],-D.p.v[2]*Z[1]):l.translate(0,D.p.v[1]*Z,-D.p.v[2]*Z):Z.length?l.translate(D.p.v[0]*Z[0],D.p.v[1]*Z[1],-D.p.v[2]*Z[2]):l.translate(D.p.v[0]*Z,D.p.v[1]*Z,-D.p.v[2]*Z));if(s.strokeWidthAnim&&(pe=_e<0?0:_e),s.strokeColorAnim&&(ke="rgb("+Math.round(he[0]*255)+","+Math.round(he[1]*255)+","+Math.round(he[2]*255)+")"),s.fillColorAnim&&s.fc&&(Ie="rgb("+Math.round(ye[0]*255)+","+Math.round(ye[1]*255)+","+Math.round(ye[2]*255)+")"),this._hasMaskedPath){if(l.translate(0,-s.ls),l.translate(0,n[1]*q*.01+f,0),this._pathData.p.v){F=(y.point[1]-k.point[1])/(y.point[0]-k.point[0]);var Ke=Math.atan(F)*180/Math.PI;y.point[0]<k.point[0]&&(Ke+=180),l.rotate(-Ke*Math.PI/180)}l.translate(L,H,0),g-=n[0]*u[m].an*.005,u[m+1]&&U!==u[m+1].ind&&(g+=u[m].an/2,g+=s.tr*.001*s.finalSize)}else{switch(l.translate(i,f,0),s.ps&&l.translate(s.ps[0],s.ps[1]+s.ascent,0),s.j){case 1:l.translate(u[m].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[u[m].line]),0,0);break;case 2:l.translate(u[m].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[u[m].line])/2,0,0);break}l.translate(0,-s.ls),l.translate(V,0,0),l.translate(n[0]*u[m].an*.005,n[1]*q*.01,0),i+=u[m].l+s.tr*.001*s.finalSize}o==="html"?Y=l.toCSS():o==="svg"?Y=l.to2dCSS():te=[l.props[0],l.props[1],l.props[2],l.props[3],l.props[4],l.props[5],l.props[6],l.props[7],l.props[8],l.props[9],l.props[10],l.props[11],l.props[12],l.props[13],l.props[14],l.props[15]],re=xe}c<=m?(K=new LetterProps(re,pe,ke,Ie,Y,te),this.renderedLetters.push(K),c+=1,this.lettersChangedFlag=!0):(K=this.renderedLetters[m],this.lettersChangedFlag=K.update(re,pe,ke,Ie,Y,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(s,r,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(s,r,n),this.textProperty=new TextProperty(this,s.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(s.t,this.renderType,this),this.initTransform(s,r,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange)},ITextElement.prototype.createPathShape=function(s,r){var n,t=r.length,a,l="";for(n=0;n<t;n+=1)r[n].ty==="sh"&&(a=r[n].ks.k,l+=buildShapeString(a,a.i.length,!0,s));return l},ITextElement.prototype.updateDocumentData=function(s,r){this.textProperty.updateDocumentData(s,r)},ITextElement.prototype.canResizeFont=function(s){this.textProperty.canResizeFont(s)},ITextElement.prototype.setMinimumFontSize=function(s){this.textProperty.setMinimumFontSize(s)},ITextElement.prototype.applyTextPropertiesToMatrix=function(s,r,n,t,a){switch(s.ps&&r.translate(s.ps[0],s.ps[1]+s.ascent,0),r.translate(0,-s.ls,0),s.j){case 1:r.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[n]),0,0);break;case 2:r.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[n])/2,0,0);break}r.translate(t,a,0)},ITextElement.prototype.buildColor=function(s){return"rgb("+Math.round(s[0]*255)+","+Math.round(s[1]*255)+","+Math.round(s[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(s,r,n){this.textSpans=[],this.renderType="svg",this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(s){for(var r=0,n=s.length,t=[],a="";r<n;)s[r]===String.fromCharCode(13)||s[r]===String.fromCharCode(3)?(t.push(a),a=""):a+=s[r],r+=1;return t.push(a),t},SVGTextLottieElement.prototype.buildShapeData=function(s,r){if(s.shapes&&s.shapes.length){var n=s.shapes[0];if(n.it){var t=n.it[n.it.length-1];t.s&&(t.s.k[0]=r,t.s.k[1]=r)}}return s},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var s,r,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var t=this.globalData.fontManager.getFontByName(n.f);if(t.fClass)this.layerElement.setAttribute("class",t.fClass);else{this.layerElement.setAttribute("font-family",t.fFamily);var a=n.fWeight,l=n.fStyle;this.layerElement.setAttribute("font-style",l),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",n.t);var o=n.l||[],c=!!this.globalData.fontManager.chars;r=o.length;var i,f=this.mHelper,m="",_=this.data.singleShape,u=0,p=0,g=!0,y=n.tr*.001*n.finalSize;if(_&&!c&&!n.sz){var S=this.textContainer,b="start";switch(n.j){case 1:b="end";break;case 2:b="middle";break;default:b="start";break}S.setAttribute("text-anchor",b),S.setAttribute("letter-spacing",y);var E=this.buildTextContents(n.finalText);for(r=E.length,p=n.ps?n.ps[1]+n.ascent:0,s=0;s<r;s+=1)i=this.textSpans[s].span||createNS("tspan"),i.textContent=E[s],i.setAttribute("x",0),i.setAttribute("y",p),i.style.display="inherit",S.appendChild(i),this.textSpans[s]||(this.textSpans[s]={span:null,glyph:null}),this.textSpans[s].span=i,p+=n.finalLineHeight;this.layerElement.appendChild(S)}else{var x=this.textSpans.length,k;for(s=0;s<r;s+=1){if(this.textSpans[s]||(this.textSpans[s]={span:null,childSpan:null,glyph:null}),!c||!_||s===0){if(i=x>s?this.textSpans[s].span:createNS(c?"g":"text"),x<=s){if(i.setAttribute("stroke-linecap","butt"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("stroke-miterlimit","4"),this.textSpans[s].span=i,c){var T=createNS("g");i.appendChild(T),this.textSpans[s].childSpan=T}this.textSpans[s].span=i,this.layerElement.appendChild(i)}i.style.display="inherit"}if(f.reset(),_&&(o[s].n&&(u=-y,p+=n.yOffset,p+=g?1:0,g=!1),this.applyTextPropertiesToMatrix(n,f,o[s].line,u,p),u+=o[s].l||0,u+=y),c){k=this.globalData.fontManager.getCharData(n.finalText[s],t.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily);var j;if(k.t===1)j=new SVGCompElement(k.data,this.globalData,this);else{var A=emptyShapeData;k.data&&k.data.shapes&&(A=this.buildShapeData(k.data,n.finalSize)),j=new SVGShapeElement(A,this.globalData,this)}if(this.textSpans[s].glyph){var C=this.textSpans[s].glyph;this.textSpans[s].childSpan.removeChild(C.layerElement),C.destroy()}this.textSpans[s].glyph=j,j._debug=!0,j.prepareFrame(0),j.renderFrame(),this.textSpans[s].childSpan.appendChild(j.layerElement),k.t===1&&this.textSpans[s].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else _&&i.setAttribute("transform","translate("+f.props[12]+","+f.props[13]+")"),i.textContent=o[s].val,i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}_&&i&&i.setAttribute("d",m)}for(;s<this.textSpans.length;)this.textSpans[s].span.style.display="none",s+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var s=this.layerElement.getBBox();this.bbox={top:s.y,left:s.x,width:s.width,height:s.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var s,r=this.textSpans.length,n;for(this.renderedFrame=this.comp.renderedFrame,s=0;s<r;s+=1)n=this.textSpans[s].glyph,n&&(n.prepareFrame(this.comp.renderedFrame-this.data.st),n._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var s,r,n=this.textAnimator.renderedLetters,t=this.textProperty.currentData.l;r=t.length;var a,l,o;for(s=0;s<r;s+=1)t[s].n||(a=n[s],l=this.textSpans[s].span,o=this.textSpans[s].glyph,o&&o.renderFrame(),a._mdf.m&&l.setAttribute("transform",a.m),a._mdf.o&&l.setAttribute("opacity",a.o),a._mdf.sw&&l.setAttribute("stroke-width",a.sw),a._mdf.sc&&l.setAttribute("stroke",a.sc),a._mdf.fc&&l.setAttribute("fill",a.fc))}};function ISolidElement(s,r,n){this.initElement(s,r,n)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var s=createNS("rect");s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.layerElement.appendChild(s)};function NullElement(s,r,n){this.initFrame(),this.initBaseData(s,r,n),this.initFrame(),this.initTransform(s,r,n),this.initHierarchy()}NullElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(s){return new NullElement(s,this.globalData,this)},SVGRendererBase.prototype.createShape=function(s){return new SVGShapeElement(s,this.globalData,this)},SVGRendererBase.prototype.createText=function(s){return new SVGTextLottieElement(s,this.globalData,this)},SVGRendererBase.prototype.createImage=function(s){return new IImageElement(s,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(s){return new ISolidElement(s,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(s){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+s.w+" "+s.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",s.w),this.svgElement.setAttribute("height",s.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var r=this.globalData.defs;this.setupGlobalData(s,r),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=s;var n=createNS("clipPath"),t=createNS("rect");t.setAttribute("width",s.w),t.setAttribute("height",s.h),t.setAttribute("x",0),t.setAttribute("y",0);var a=createElementID();n.setAttribute("id",a),n.appendChild(t),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),r.appendChild(n),this.layers=s.layers,this.elements=createSizedArray(s.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var s,r=this.layers?this.layers.length:0;for(s=0;s<r;s+=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(s){var r=0,n=this.layers.length;for(r=0;r<n;r+=1)if(this.layers[r].ind===s)return r;return-1},SVGRendererBase.prototype.buildItem=function(s){var r=this.elements;if(!(r[s]||this.layers[s].ty===99)){r[s]=!0;var n=this.createItem(this.layers[s]);if(r[s]=n,getExpressionsPlugin()&&(this.layers[s].ty===0&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,s),this.layers[s].tt){var t="tp"in this.layers[s]?this.findIndexByInd(this.layers[s].tp):s-1;if(t===-1)return;if(!this.elements[t]||this.elements[t]===!0)this.buildItem(t),this.addPendingElement(n);else{var a=r[t],l=a.getMatte(this.layers[s].tt);n.setMatte(l)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();if(s.checkParenting(),s.data.tt)for(var r=0,n=this.elements.length;r<n;){if(this.elements[r]===s){var t="tp"in s.data?this.findIndexByInd(s.data.tp):r-1,a=this.elements[t],l=a.getMatte(this.layers[r].tt);s.setMatte(l);break}r+=1}}},SVGRendererBase.prototype.renderFrame=function(s){if(!(this.renderedFrame===s||this.destroyed)){s===null?s=this.renderedFrame:this.renderedFrame=s,this.globalData.frameNum=s,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=s,this.globalData._mdf=!1;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(s),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(s-this.layers[r].st);if(this.globalData._mdf)for(r=0;r<n;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(s,r){var n=s.getBaseElement();if(n){for(var t=0,a;t<r;)this.elements[t]&&this.elements[t]!==!0&&this.elements[t].getBaseElement()&&(a=this.elements[t].getBaseElement()),t+=1;a?this.layerElement.insertBefore(n,a):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(s,r,n){this.initFrame(),this.initBaseData(s,r,n),this.initTransform(s,r,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!r.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(s){if(this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=s/this.data.sr;else{var r=this.tm.v;r===this.data.op&&(r=this.data.op-1),this.renderedFrame=r}var n,t=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=t-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var s,r=this.layers.length;for(s=0;s<r;s+=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()},ICompElement.prototype.setElements=function(s){this.elements=s},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var s,r=this.layers.length;for(s=0;s<r;s+=1)this.elements[s]&&this.elements[s].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(s,r,n){this.layers=s.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,r,n),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function SVGRenderer(s,r){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(r&&r.title){var t=createNS("title"),a=createElementID();t.setAttribute("id",a),t.textContent=r.title,this.svgElement.appendChild(t),n+=a}if(r&&r.description){var l=createNS("desc"),o=createElementID();l.setAttribute("id",o),l.textContent=r.description,this.svgElement.appendChild(l),n+=" "+o}n&&this.svgElement.setAttribute("aria-labelledby",n);var c=createNS("defs");this.svgElement.appendChild(c);var i=createNS("g");this.svgElement.appendChild(i),this.layerElement=i,this.renderConfig={preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",progressiveLoad:r&&r.progressiveLoad||!1,hideOnTransparent:!(r&&r.hideOnTransparent===!1),viewBoxOnly:r&&r.viewBoxOnly||!1,viewBoxSize:r&&r.viewBoxSize||!1,className:r&&r.className||"",id:r&&r.id||"",focusable:r&&r.focusable,filterSize:{width:r&&r.filterSize&&r.filterSize.width||"100%",height:r&&r.filterSize&&r.filterSize.height||"100%",x:r&&r.filterSize&&r.filterSize.x||"0%",y:r&&r.filterSize&&r.filterSize.y||"0%"},width:r&&r.width,height:r&&r.height,runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:c,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(r){var n,t=r.length,a="_";for(n=0;n<t;n+=1)a+=r[n].transform.key+"_";var l=this.sequences[a];return l||(l={transforms:[].concat(r),finalTransform:new Matrix,_mdf:!1},this.sequences[a]=l,this.sequenceList.push(l)),l},processSequence:function(r,n){for(var t=0,a=r.transforms.length,l=n;t<a&&!n;){if(r.transforms[t].transform.mProps._mdf){l=!0;break}t+=1}if(l)for(r.finalTransform.reset(),t=a-1;t>=0;t-=1)r.finalTransform.multiply(r.transforms[t].transform.mProps.v);r._mdf=l},processSequences:function(r){var n,t=this.sequenceList.length;for(n=0;n<t;n+=1)this.processSequence(this.sequenceList[n],r)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var r="__lottie_element_luma_buffer",n=null,t=null,a=null;function l(){var i=createNS("svg"),f=createNS("filter"),m=createNS("feColorMatrix");return f.setAttribute("id",r),m.setAttribute("type","matrix"),m.setAttribute("color-interpolation-filters","sRGB"),m.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),f.appendChild(m),i.appendChild(f),i.setAttribute("id",r+"_svg"),featureSupport.svgLumaHidden&&(i.style.display="none"),i}function o(){n||(a=l(),document.body.appendChild(a),n=createTag("canvas"),t=n.getContext("2d"),t.filter="url(#"+r+")",t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1))}function c(i){return n||o(),n.width=i.width,n.height=i.height,t.filter="url(#"+r+")",n}return{load:o,get:c}};function createCanvas(s,r){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(s,r);var n=createTag("canvas");return n.width=s,n.height=r,n}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(s){var r,n=s.data.ef?s.data.ef.length:0;this.filters=[];var t;for(r=0;r<n;r+=1){t=null;var a=s.data.ef[r].ty;if(registeredEffects[a]){var l=registeredEffects[a].effect;t=new l(s.effectsManager.effectElements[r],s)}t&&this.filters.push(t)}this.filters.length&&s.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(s){var r,n=this.filters.length;for(r=0;r<n;r+=1)this.filters[r].renderFrame(s)},CVEffects.prototype.getEffects=function(s){var r,n=this.filters.length,t=[];for(r=0;r<n;r+=1)this.filters[r].type===s&&t.push(this.filters[r]);return t};function registerEffect(s,r){registeredEffects[s]={effect:r}}function CVMaskElement(s,r){this.data=s,this.element=r,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,t=this.masksProperties.length,a=!1;for(n=0;n<t;n+=1)this.masksProperties[n].mode!=="n"&&(a=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var s=this.element.finalTransform.mat,r=this.element.canvasContext,n,t=this.masksProperties.length,a,l,o;for(r.beginPath(),n=0;n<t;n+=1)if(this.masksProperties[n].mode!=="n"){this.masksProperties[n].inv&&(r.moveTo(0,0),r.lineTo(this.element.globalData.compSize.w,0),r.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),r.lineTo(0,this.element.globalData.compSize.h),r.lineTo(0,0)),o=this.viewData[n].v,a=s.applyToPointArray(o.v[0][0],o.v[0][1],0),r.moveTo(a[0],a[1]);var c,i=o._length;for(c=1;c<i;c+=1)l=s.applyToTriplePoints(o.o[c-1],o.i[c],o.v[c]),r.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);l=s.applyToTriplePoints(o.o[c-1],o.i[0],o.v[0]),r.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5])}this.element.globalData.renderer.save(!0),r.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var r=this.globalData.canvasContext,n=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(n);var t=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(t),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var r=this.globalData;if(r.blendMode!==this.data.bm){r.blendMode=this.data.bm;var n=getBlendMode(this.data.bm);r.canvasContext.globalCompositeOperation=n}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(r){r.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var r=this.buffers[0],n=r.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var r=this.buffers[1],n=r.getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var t=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(t.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var a=assetLoader.getLumaCanvas(this.canvasContext.canvas),l=a.getContext("2d");l.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(a,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(r,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(r){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!r)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var n=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(n),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(n),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(s,r,n,t){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a=4;r.ty==="rc"?a=5:r.ty==="el"?a=6:r.ty==="sr"&&(a=7),this.sh=ShapePropertyFactory.getShapeProp(s,r,a,s);var l,o=n.length,c;for(l=0;l<o;l+=1)n[l].closed||(c={transforms:t.addTransformSequence(n[l].transforms),trNodes:[]},this.styledShapes.push(c),n[l].elements.push(c))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(s,r,n){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(s,r){var n={data:s,type:s.ty,preTransforms:this.transformsManager.addTransformSequence(r),transforms:[],elements:[],closed:s.hd===!0},t={};if(s.ty==="fl"||s.ty==="st"?(t.c=PropertyFactory.getProp(this,s.c,1,255,this),t.c.k||(n.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")")):(s.ty==="gf"||s.ty==="gs")&&(t.s=PropertyFactory.getProp(this,s.s,1,null,this),t.e=PropertyFactory.getProp(this,s.e,1,null,this),t.h=PropertyFactory.getProp(this,s.h||{k:0},0,.01,this),t.a=PropertyFactory.getProp(this,s.a||{k:0},0,degToRads,this),t.g=new GradientProperty(this,s.g,this)),t.o=PropertyFactory.getProp(this,s.o,0,.01,this),s.ty==="st"||s.ty==="gs"){if(n.lc=lineCapEnum[s.lc||2],n.lj=lineJoinEnum[s.lj||2],s.lj==1&&(n.ml=s.ml),t.w=PropertyFactory.getProp(this,s.w,0,null,this),t.w.k||(n.wi=t.w.v),s.d){var a=new DashProperty(this,s.d,"canvas",this);t.d=a,t.d.k||(n.da=t.d.dashArray,n.do=t.d.dashoffset[0])}}else n.r=s.r===2?"evenodd":"nonzero";return this.stylesList.push(n),t.style=n,t},CVShapeElement.prototype.createGroupElement=function(){var s={it:[],prevViewData:[]};return s},CVShapeElement.prototype.createTransformElement=function(s){var r={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,s.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,s,this)}};return r},CVShapeElement.prototype.createShapeElement=function(s){var r=new CVShapeData(this,s,this.stylesList,this.transformsManager);return this.shapes.push(r),this.addShapeToModifiers(r),r},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,r=this.itemsData.length;for(s=0;s<r;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),r=this.dynamicProperties.length,s=0;s<r;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(s){var r,n=this.stylesList.length;for(r=0;r<n;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.push(s)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var s,r=this.stylesList.length;for(s=0;s<r;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.pop()},CVShapeElement.prototype.closeStyles=function(s){var r,n=s.length;for(r=0;r<n;r+=1)s[r].closed=!0},CVShapeElement.prototype.searchShapes=function(s,r,n,t,a){var l,o=s.length-1,c,i,f=[],m=[],_,u,p,g=[].concat(a);for(l=o;l>=0;l-=1){if(_=this.searchProcessedElement(s[l]),_?r[l]=n[_-1]:s[l]._shouldRender=t,s[l].ty==="fl"||s[l].ty==="st"||s[l].ty==="gf"||s[l].ty==="gs")_?r[l].style.closed=!1:r[l]=this.createStyleElement(s[l],g),f.push(r[l].style);else if(s[l].ty==="gr"){if(!_)r[l]=this.createGroupElement(s[l]);else for(i=r[l].it.length,c=0;c<i;c+=1)r[l].prevViewData[c]=r[l].it[c];this.searchShapes(s[l].it,r[l].it,r[l].prevViewData,t,g)}else s[l].ty==="tr"?(_||(p=this.createTransformElement(s[l]),r[l]=p),g.push(r[l]),this.addTransformToStyleList(r[l])):s[l].ty==="sh"||s[l].ty==="rc"||s[l].ty==="el"||s[l].ty==="sr"?_||(r[l]=this.createShapeElement(s[l])):s[l].ty==="tm"||s[l].ty==="rd"||s[l].ty==="pb"||s[l].ty==="zz"||s[l].ty==="op"?(_?(u=r[l],u.closed=!1):(u=ShapeModifiers.getModifier(s[l].ty),u.init(this,s[l]),r[l]=u,this.shapeModifiers.push(u)),m.push(u)):s[l].ty==="rp"&&(_?(u=r[l],u.closed=!0):(u=ShapeModifiers.getModifier(s[l].ty),r[l]=u,u.init(this,s,l,r),this.shapeModifiers.push(u),t=!1),m.push(u));this.addProcessedElement(s[l],l+1)}for(this.removeTransformFromStyleList(),this.closeStyles(f),o=m.length,l=0;l<o;l+=1)m[l].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(s,r){(s._opMdf||r.op._mdf||this._isFirstFrame)&&(r.opacity=s.opacity,r.opacity*=r.op.v,r._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var s,r=this.stylesList.length,n,t,a,l,o,c,i=this.globalData.renderer,f=this.globalData.canvasContext,m,_;for(s=0;s<r;s+=1)if(_=this.stylesList[s],m=_.type,!((m==="st"||m==="gs")&&_.wi===0||!_.data._shouldRender||_.coOp===0||this.globalData.currentGlobalAlpha===0)){for(i.save(),o=_.elements,m==="st"||m==="gs"?(i.ctxStrokeStyle(m==="st"?_.co:_.grd),i.ctxLineWidth(_.wi),i.ctxLineCap(_.lc),i.ctxLineJoin(_.lj),i.ctxMiterLimit(_.ml||0)):i.ctxFillStyle(m==="fl"?_.co:_.grd),i.ctxOpacity(_.coOp),m!=="st"&&m!=="gs"&&f.beginPath(),i.ctxTransform(_.preTransforms.finalTransform.props),t=o.length,n=0;n<t;n+=1){for((m==="st"||m==="gs")&&(f.beginPath(),_.da&&(f.setLineDash(_.da),f.lineDashOffset=_.do)),c=o[n].trNodes,l=c.length,a=0;a<l;a+=1)c[a].t==="m"?f.moveTo(c[a].p[0],c[a].p[1]):c[a].t==="c"?f.bezierCurveTo(c[a].pts[0],c[a].pts[1],c[a].pts[2],c[a].pts[3],c[a].pts[4],c[a].pts[5]):f.closePath();(m==="st"||m==="gs")&&(i.ctxStroke(),_.da&&f.setLineDash(this.dashResetter))}m!=="st"&&m!=="gs"&&this.globalData.renderer.ctxFill(_.r),i.restore()}},CVShapeElement.prototype.renderShape=function(s,r,n,t){var a,l=r.length-1,o;for(o=s,a=l;a>=0;a-=1)r[a].ty==="tr"?(o=n[a].transform,this.renderShapeTransform(s,o)):r[a].ty==="sh"||r[a].ty==="el"||r[a].ty==="rc"||r[a].ty==="sr"?this.renderPath(r[a],n[a]):r[a].ty==="fl"?this.renderFill(r[a],n[a],o):r[a].ty==="st"?this.renderStroke(r[a],n[a],o):r[a].ty==="gf"||r[a].ty==="gs"?this.renderGradientFill(r[a],n[a],o):r[a].ty==="gr"?this.renderShape(o,r[a].it,n[a].it):r[a].ty;t&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(s,r){if(this._isFirstFrame||r._mdf||s.transforms._mdf){var n=s.trNodes,t=r.paths,a,l,o,c=t._length;n.length=0;var i=s.transforms.finalTransform;for(o=0;o<c;o+=1){var f=t.shapes[o];if(f&&f.v){for(l=f._length,a=1;a<l;a+=1)a===1&&n.push({t:"m",p:i.applyToPointArray(f.v[0][0],f.v[0][1],0)}),n.push({t:"c",pts:i.applyToTriplePoints(f.o[a-1],f.i[a],f.v[a])});l===1&&n.push({t:"m",p:i.applyToPointArray(f.v[0][0],f.v[0][1],0)}),f.c&&l&&(n.push({t:"c",pts:i.applyToTriplePoints(f.o[a-1],f.i[0],f.v[0])}),n.push({t:"z"}))}}s.trNodes=n}},CVShapeElement.prototype.renderPath=function(s,r){if(s.hd!==!0&&s._shouldRender){var n,t=r.styledShapes.length;for(n=0;n<t;n+=1)this.renderStyledShape(r.styledShapes[n],r.sh)}},CVShapeElement.prototype.renderFill=function(s,r,n){var t=r.style;(r.c._mdf||this._isFirstFrame)&&(t.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||n._opMdf||this._isFirstFrame)&&(t.coOp=r.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(s,r,n){var t=r.style,a;if(!t.grd||r.g._mdf||r.s._mdf||r.e._mdf||s.t!==1&&(r.h._mdf||r.a._mdf)){var l=this.globalData.canvasContext,o=r.s.v,c=r.e.v;if(s.t===1)a=l.createLinearGradient(o[0],o[1],c[0],c[1]);else{var i=Math.sqrt(Math.pow(o[0]-c[0],2)+Math.pow(o[1]-c[1],2)),f=Math.atan2(c[1]-o[1],c[0]-o[0]),m=r.h.v;m>=1?m=.99:m<=-1&&(m=-.99);var _=i*m,u=Math.cos(f+r.a.v)*_+o[0],p=Math.sin(f+r.a.v)*_+o[1];a=l.createRadialGradient(u,p,0,o[0],o[1],i)}var g,y=s.g.p,S=r.g.c,b=1;for(g=0;g<y;g+=1)r.g._hasOpacity&&r.g._collapsable&&(b=r.g.o[g*2+1]),a.addColorStop(S[g*4]/100,"rgba("+S[g*4+1]+","+S[g*4+2]+","+S[g*4+3]+","+b+")");t.grd=a}t.coOp=r.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(s,r,n){var t=r.style,a=r.d;a&&(a._mdf||this._isFirstFrame)&&(t.da=a.dashArray,t.do=a.dashoffset[0]),(r.c._mdf||this._isFirstFrame)&&(t.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")"),(r.o._mdf||n._opMdf||this._isFirstFrame)&&(t.coOp=r.o.v*n.opacity),(r.w._mdf||this._isFirstFrame)&&(t.wi=r.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(s,r,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var r=!1;s.fc?(r=!0,this.values.fill=this.buildColor(s.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=r;var n=!1;s.sc&&(n=!0,this.values.stroke=this.buildColor(s.sc),this.values.sWidth=s.sw);var t=this.globalData.fontManager.getFontByName(s.f),a,l,o=s.l,c=this.mHelper;this.stroke=n,this.values.fValue=s.finalSize+"px "+this.globalData.fontManager.getFontByName(s.f).fFamily,l=s.finalText.length;var i,f,m,_,u,p,g,y,S,b,E=this.data.singleShape,x=s.tr*.001*s.finalSize,k=0,T=0,j=!0,A=0;for(a=0;a<l;a+=1){i=this.globalData.fontManager.getCharData(s.finalText[a],t.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),f=i&&i.data||{},c.reset(),E&&o[a].n&&(k=-x,T+=s.yOffset,T+=j?1:0,j=!1),u=f.shapes?f.shapes[0].it:[],g=u.length,c.scale(s.finalSize/100,s.finalSize/100),E&&this.applyTextPropertiesToMatrix(s,c,o[a].line,k,T),S=createSizedArray(g-1);var C=0;for(p=0;p<g;p+=1)if(u[p].ty==="sh"){for(_=u[p].ks.k.i.length,y=u[p].ks.k,b=[],m=1;m<_;m+=1)m===1&&b.push(c.applyToX(y.v[0][0],y.v[0][1],0),c.applyToY(y.v[0][0],y.v[0][1],0)),b.push(c.applyToX(y.o[m-1][0],y.o[m-1][1],0),c.applyToY(y.o[m-1][0],y.o[m-1][1],0),c.applyToX(y.i[m][0],y.i[m][1],0),c.applyToY(y.i[m][0],y.i[m][1],0),c.applyToX(y.v[m][0],y.v[m][1],0),c.applyToY(y.v[m][0],y.v[m][1],0));b.push(c.applyToX(y.o[m-1][0],y.o[m-1][1],0),c.applyToY(y.o[m-1][0],y.o[m-1][1],0),c.applyToX(y.i[0][0],y.i[0][1],0),c.applyToY(y.i[0][0],y.i[0][1],0),c.applyToX(y.v[0][0],y.v[0][1],0),c.applyToY(y.v[0][0],y.v[0][1],0)),S[C]=b,C+=1}E&&(k+=o[a].l,k+=x),this.textSpans[A]?this.textSpans[A].elem=S:this.textSpans[A]={elem:S},A+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var s=this.canvasContext;s.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var r,n,t,a,l,o,c=this.textAnimator.renderedLetters,i=this.textProperty.currentData.l;n=i.length;var f,m=null,_=null,u=null,p,g,y=this.globalData.renderer;for(r=0;r<n;r+=1)if(!i[r].n){if(f=c[r],f&&(y.save(),y.ctxTransform(f.p),y.ctxOpacity(f.o)),this.fill){for(f&&f.fc?m!==f.fc&&(y.ctxFillStyle(f.fc),m=f.fc):m!==this.values.fill&&(m=this.values.fill,y.ctxFillStyle(this.values.fill)),p=this.textSpans[r].elem,a=p.length,this.globalData.canvasContext.beginPath(),t=0;t<a;t+=1)for(g=p[t],o=g.length,this.globalData.canvasContext.moveTo(g[0],g[1]),l=2;l<o;l+=6)this.globalData.canvasContext.bezierCurveTo(g[l],g[l+1],g[l+2],g[l+3],g[l+4],g[l+5]);this.globalData.canvasContext.closePath(),y.ctxFill()}if(this.stroke){for(f&&f.sw?u!==f.sw&&(u=f.sw,y.ctxLineWidth(f.sw)):u!==this.values.sWidth&&(u=this.values.sWidth,y.ctxLineWidth(this.values.sWidth)),f&&f.sc?_!==f.sc&&(_=f.sc,y.ctxStrokeStyle(f.sc)):_!==this.values.stroke&&(_=this.values.stroke,y.ctxStrokeStyle(this.values.stroke)),p=this.textSpans[r].elem,a=p.length,this.globalData.canvasContext.beginPath(),t=0;t<a;t+=1)for(g=p[t],o=g.length,this.globalData.canvasContext.moveTo(g[0],g[1]),l=2;l<o;l+=6)this.globalData.canvasContext.bezierCurveTo(g[l],g[l+1],g[l+2],g[l+3],g[l+4],g[l+5]);this.globalData.canvasContext.closePath(),y.ctxStroke()}f&&this.globalData.renderer.restore()}};function CVImageElement(s,r,n){this.assetData=r.getAssetData(s.refId),this.img=r.imageLoader.getAsset(this.assetData),this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var s=createTag("canvas");s.width=this.assetData.w,s.height=this.assetData.h;var r=s.getContext("2d"),n=this.img.width,t=this.img.height,a=n/t,l=this.assetData.w/this.assetData.h,o,c,i=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>l&&i==="xMidYMid slice"||a<l&&i!=="xMidYMid slice"?(c=t,o=c*l):(o=n,c=o/l),r.drawImage(this.img,(n-o)/2,(t-c)/2,o,c,0,0,this.assetData.w,this.assetData.h),this.img=s}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(s,r,n){this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(s){return new CVShapeElement(s,this.globalData,this)},CanvasRendererBase.prototype.createText=function(s){return new CVTextElement(s,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(s){return new CVImageElement(s,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(s){return new CVSolidElement(s,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(s){s[0]===1&&s[1]===0&&s[4]===0&&s[5]===1&&s[12]===0&&s[13]===0||this.canvasContext.transform(s[0],s[1],s[4],s[5],s[12],s[13])},CanvasRendererBase.prototype.ctxOpacity=function(s){this.canvasContext.globalAlpha*=s<0?0:s},CanvasRendererBase.prototype.ctxFillStyle=function(s){this.canvasContext.fillStyle=s},CanvasRendererBase.prototype.ctxStrokeStyle=function(s){this.canvasContext.strokeStyle=s},CanvasRendererBase.prototype.ctxLineWidth=function(s){this.canvasContext.lineWidth=s},CanvasRendererBase.prototype.ctxLineCap=function(s){this.canvasContext.lineCap=s},CanvasRendererBase.prototype.ctxLineJoin=function(s){this.canvasContext.lineJoin=s},CanvasRendererBase.prototype.ctxMiterLimit=function(s){this.canvasContext.miterLimit=s},CanvasRendererBase.prototype.ctxFill=function(s){this.canvasContext.fill(s)},CanvasRendererBase.prototype.ctxFillRect=function(s,r,n,t){this.canvasContext.fillRect(s,r,n,t)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(s){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}s&&(this.globalData.blendMode="source-over"),this.contextData.restore(s)},CanvasRendererBase.prototype.configAnimation=function(s){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var r=this.animationItem.container.style;r.width="100%",r.height="100%";var n="0px 0px 0px";r.transformOrigin=n,r.mozTransformOrigin=n,r.webkitTransformOrigin=n,r["-webkit-transform"]=n,r.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=s,this.layers=s.layers,this.transformCanvas={w:s.w,h:s.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(s,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(s.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(s,r){this.reset();var n,t;s?(n=s,t=r,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=t):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,t=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=t*this.renderConfig.dpr);var a,l;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var o=this.renderConfig.preserveAspectRatio.split(" "),c=o[1]||"meet",i=o[0]||"xMidYMid",f=i.substr(0,4),m=i.substr(4);a=n/t,l=this.transformCanvas.w/this.transformCanvas.h,l>a&&c==="meet"||l<a&&c==="slice"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),f==="xMid"&&(l<a&&c==="meet"||l>a&&c==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:f==="xMax"&&(l<a&&c==="meet"||l>a&&c==="slice")?this.transformCanvas.tx=(n-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,m==="YMid"&&(l>a&&c==="meet"||l<a&&c==="slice")?this.transformCanvas.ty=(t-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:m==="YMax"&&(l>a&&c==="meet"||l<a&&c==="slice")?this.transformCanvas.ty=(t-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var s,r=this.layers?this.layers.length:0;for(s=r-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(s,r){if(!(this.renderedFrame===s&&this.renderConfig.clearCanvas===!0&&!r||this.destroyed||s===-1)){this.renderedFrame=s,this.globalData.frameNum=s-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||r,this.globalData.projectInterface.currentFrame=s;var n,t=this.layers.length;for(this.completeLayers||this.checkLayers(s),n=t-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(s-this.layers[n].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=t-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(s){var r=this.elements;if(!(r[s]||this.layers[s].ty===99)){var n=this.createItem(this.layers[s],this,this.globalData);r[s]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var s,r=15;for(s=0;s<r;s+=1){var n=new CanvasContext;this.stack[s]=n}this._length=r,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var s=this._length*2,r=0;for(r=this._length;r<s;r+=1)this.stack[r]=new CanvasContext;this._length=s},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(s){this.cArrPos-=1;var r=this.stack[this.cArrPos],n=r.transform,t,a=this.cTr.props;for(t=0;t<16;t+=1)a[t]=n[t];if(s){this.nativeContext.restore();var l=this.stack[this.cArrPos+1];this.appliedFillStyle=l.fillStyle,this.appliedStrokeStyle=l.strokeStyle,this.appliedLineWidth=l.lineWidth,this.appliedLineCap=l.lineCap,this.appliedLineJoin=l.lineJoin,this.appliedMiterLimit=l.miterLimit}this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),(s||r.opacity!==-1&&this.currentOpacity!==r.opacity)&&(this.nativeContext.globalAlpha=r.opacity,this.currentOpacity=r.opacity),this.currentFillStyle=r.fillStyle,this.currentStrokeStyle=r.strokeStyle,this.currentLineWidth=r.lineWidth,this.currentLineCap=r.lineCap,this.currentLineJoin=r.lineJoin,this.currentMiterLimit=r.miterLimit},CVContextData.prototype.save=function(s){s&&this.nativeContext.save();var r=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n=this.stack[this.cArrPos],t;for(t=0;t<16;t+=1)n.transform[t]=r[t];this.cArrPos+=1;var a=this.stack[this.cArrPos];a.opacity=n.opacity,a.fillStyle=n.fillStyle,a.strokeStyle=n.strokeStyle,a.lineWidth=n.lineWidth,a.lineCap=n.lineCap,a.lineJoin=n.lineJoin,a.miterLimit=n.miterLimit},CVContextData.prototype.setOpacity=function(s){this.stack[this.cArrPos].opacity=s},CVContextData.prototype.setContext=function(s){this.nativeContext=s},CVContextData.prototype.fillStyle=function(s){this.stack[this.cArrPos].fillStyle!==s&&(this.currentFillStyle=s,this.stack[this.cArrPos].fillStyle=s)},CVContextData.prototype.strokeStyle=function(s){this.stack[this.cArrPos].strokeStyle!==s&&(this.currentStrokeStyle=s,this.stack[this.cArrPos].strokeStyle=s)},CVContextData.prototype.lineWidth=function(s){this.stack[this.cArrPos].lineWidth!==s&&(this.currentLineWidth=s,this.stack[this.cArrPos].lineWidth=s)},CVContextData.prototype.lineCap=function(s){this.stack[this.cArrPos].lineCap!==s&&(this.currentLineCap=s,this.stack[this.cArrPos].lineCap=s)},CVContextData.prototype.lineJoin=function(s){this.stack[this.cArrPos].lineJoin!==s&&(this.currentLineJoin=s,this.stack[this.cArrPos].lineJoin=s)},CVContextData.prototype.miterLimit=function(s){this.stack[this.cArrPos].miterLimit!==s&&(this.currentMiterLimit=s,this.stack[this.cArrPos].miterLimit=s)},CVContextData.prototype.transform=function(s){this.transformMat.cloneFromProps(s);var r=this.cTr;this.transformMat.multiply(r),r.cloneFromProps(this.transformMat.props);var n=r.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(s){var r=this.stack[this.cArrPos].opacity;r*=s<0?0:s,this.stack[this.cArrPos].opacity!==r&&(this.currentOpacity!==s&&(this.nativeContext.globalAlpha=s,this.currentOpacity=s),this.stack[this.cArrPos].opacity=r)},CVContextData.prototype.fill=function(s){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(s)},CVContextData.prototype.fillRect=function(s,r,n,t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(s,r,n,t)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(s,r,n){this.completeLayers=!1,this.layers=s.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(s,r,n),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var s=this.canvasContext;s.beginPath(),s.moveTo(0,0),s.lineTo(this.data.w,0),s.lineTo(this.data.w,this.data.h),s.lineTo(0,this.data.h),s.lineTo(0,0),s.clip();var r,n=this.layers.length;for(r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},CVCompElement.prototype.destroy=function(){var s,r=this.layers.length;for(s=r-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function CanvasRenderer(s,r){this.animationItem=s,this.renderConfig={clearCanvas:r&&r.clearCanvas!==void 0?r.clearCanvas:!0,context:r&&r.context||null,progressiveLoad:r&&r.progressiveLoad||!1,preserveAspectRatio:r&&r.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:r&&r.contentVisibility||"visible",className:r&&r.className||"",id:r&&r.id||"",runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.renderConfig.dpr=r&&r.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=r&&r.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var r=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var n=this.finalTransform.mat.toCSS();r.transform=n,r.webkitTransform=n}this.finalTransform._opMdf&&(r.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(s,r,n){this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var s;this.data.hasMask?(s=createNS("rect"),s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(s=createTag("div"),s.style.width=this.data.sw+"px",s.style.height=this.data.sh+"px",s.style.backgroundColor=this.data.sc),this.layerElement.appendChild(s)};function HShapeElement(s,r,n){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(s,r,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var s;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),s=this.svgElement;else{s=createNS("svg");var r=this.comp.data?this.comp.data:this.globalData.compSize;s.setAttribute("width",r.w),s.setAttribute("height",r.h),s.appendChild(this.shapesContainer),this.layerElement.appendChild(s)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=s},HShapeElement.prototype.getTransformedPoint=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)r=s[n].mProps.v.applyToPointArray(r[0],r[1],0);return r},HShapeElement.prototype.calculateShapeBoundingBox=function(s,r){var n=s.sh.v,t=s.transformers,a,l=n._length,o,c,i,f;if(!(l<=1)){for(a=0;a<l-1;a+=1)o=this.getTransformedPoint(t,n.v[a]),c=this.getTransformedPoint(t,n.o[a]),i=this.getTransformedPoint(t,n.i[a+1]),f=this.getTransformedPoint(t,n.v[a+1]),this.checkBounds(o,c,i,f,r);n.c&&(o=this.getTransformedPoint(t,n.v[a]),c=this.getTransformedPoint(t,n.o[a]),i=this.getTransformedPoint(t,n.i[0]),f=this.getTransformedPoint(t,n.v[0]),this.checkBounds(o,c,i,f,r))}},HShapeElement.prototype.checkBounds=function(s,r,n,t,a){this.getBoundsOfCurve(s,r,n,t);var l=this.shapeBoundingBox;a.x=bmMin(l.left,a.x),a.xMax=bmMax(l.right,a.xMax),a.y=bmMin(l.top,a.y),a.yMax=bmMax(l.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(s,r,n,t){for(var a=[[s[0],t[0]],[s[1],t[1]]],l,o,c,i,f,m,_,u=0;u<2;++u)o=6*s[u]-12*r[u]+6*n[u],l=-3*s[u]+9*r[u]-9*n[u]+3*t[u],c=3*r[u]-3*s[u],o|=0,l|=0,c|=0,l===0&&o===0||(l===0?(i=-c/o,i>0&&i<1&&a[u].push(this.calculateF(i,s,r,n,t,u))):(f=o*o-4*c*l,f>=0&&(m=(-o+bmSqrt(f))/(2*l),m>0&&m<1&&a[u].push(this.calculateF(m,s,r,n,t,u)),_=(-o-bmSqrt(f))/(2*l),_>0&&_<1&&a[u].push(this.calculateF(_,s,r,n,t,u)))));this.shapeBoundingBox.left=bmMin.apply(null,a[0]),this.shapeBoundingBox.top=bmMin.apply(null,a[1]),this.shapeBoundingBox.right=bmMax.apply(null,a[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,a[1])},HShapeElement.prototype.calculateF=function(s,r,n,t,a,l){return bmPow(1-s,3)*r[l]+3*bmPow(1-s,2)*s*n[l]+3*(1-s)*bmPow(s,2)*t[l]+bmPow(s,3)*a[l]},HShapeElement.prototype.calculateBoundingBox=function(s,r){var n,t=s.length;for(n=0;n<t;n+=1)s[n]&&s[n].sh?this.calculateShapeBoundingBox(s[n],r):s[n]&&s[n].it?this.calculateBoundingBox(s[n].it,r):s[n]&&s[n].style&&s[n].w&&this.expandStrokeBoundingBox(s[n].w,r)},HShapeElement.prototype.expandStrokeBoundingBox=function(s,r){var n=0;if(s.keyframes){for(var t=0;t<s.keyframes.length;t+=1){var a=s.keyframes[t].s;a>n&&(n=a)}n*=s.mult}else n=s.v*s.mult;r.x-=n,r.xMax+=n,r.y-=n,r.yMax+=n},HShapeElement.prototype.currentBoxContains=function(s){return this.currentBBox.x<=s.x&&this.currentBBox.y<=s.y&&this.currentBBox.width+this.currentBBox.x>=s.x+s.width&&this.currentBBox.height+this.currentBBox.y>=s.y+s.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var s=this.tempBoundingBox,r=999999;if(s.x=r,s.xMax=-r,s.y=r,s.yMax=-r,this.calculateBoundingBox(this.itemsData,s),s.width=s.xMax<s.x?0:s.xMax-s.x,s.height=s.yMax<s.y?0:s.yMax-s.y,this.currentBoxContains(s))return;var n=!1;if(this.currentBBox.w!==s.width&&(this.currentBBox.w=s.width,this.shapeCont.setAttribute("width",s.width),n=!0),this.currentBBox.h!==s.height&&(this.currentBBox.h=s.height,this.shapeCont.setAttribute("height",s.height),n=!0),n||this.currentBBox.x!==s.x||this.currentBBox.y!==s.y){this.currentBBox.w=s.width,this.currentBBox.h=s.height,this.currentBBox.x=s.x,this.currentBBox.y=s.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var t=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=a,t.webkitTransform=a}}};function HTextElement(s,r,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var s=createNS("g");this.maskedElement.appendChild(s),this.innerElem=s}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var r=this.innerElem.style,n=s.fc?this.buildColor(s.fc):"rgba(0,0,0,0)";r.fill=n,r.color=n,s.sc&&(r.stroke=this.buildColor(s.sc),r.strokeWidth=s.sw+"px");var t=this.globalData.fontManager.getFontByName(s.f);if(!this.globalData.fontManager.chars)if(r.fontSize=s.finalSize+"px",r.lineHeight=s.finalSize+"px",t.fClass)this.innerElem.className=t.fClass;else{r.fontFamily=t.fFamily;var a=s.fWeight,l=s.fStyle;r.fontStyle=l,r.fontWeight=a}var o,c,i=s.l;c=i.length;var f,m,_,u=this.mHelper,p,g="",y=0;for(o=0;o<c;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[y]?f=this.textPaths[y]:(f=createNS("path"),f.setAttribute("stroke-linecap",lineCapEnum[1]),f.setAttribute("stroke-linejoin",lineJoinEnum[2]),f.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[y]?(m=this.textSpans[y],_=m.children[0]):(m=createTag("div"),m.style.lineHeight=0,_=createNS("svg"),_.appendChild(f),styleDiv(m)))):this.isMasked?f=this.textPaths[y]?this.textPaths[y]:createNS("text"):this.textSpans[y]?(m=this.textSpans[y],f=this.textPaths[y]):(m=createTag("span"),styleDiv(m),f=createTag("span"),styleDiv(f),m.appendChild(f)),this.globalData.fontManager.chars){var S=this.globalData.fontManager.getCharData(s.finalText[o],t.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),b;if(S?b=S.data:b=null,u.reset(),b&&b.shapes&&b.shapes.length&&(p=b.shapes[0].it,u.scale(s.finalSize/100,s.finalSize/100),g=this.createPathShape(u,p),f.setAttribute("d",g)),this.isMasked)this.innerElem.appendChild(f);else{if(this.innerElem.appendChild(m),b&&b.shapes){document.body.appendChild(_);var E=_.getBBox();_.setAttribute("width",E.width+2),_.setAttribute("height",E.height+2),_.setAttribute("viewBox",E.x-1+" "+(E.y-1)+" "+(E.width+2)+" "+(E.height+2));var x=_.style,k="translate("+(E.x-1)+"px,"+(E.y-1)+"px)";x.transform=k,x.webkitTransform=k,i[o].yOffset=E.y-1}else _.setAttribute("width",1),_.setAttribute("height",1);m.appendChild(_)}}else if(f.textContent=i[o].val,f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(f);else{this.innerElem.appendChild(m);var T=f.style,j="translate3d(0,"+-s.finalSize/1.2+"px,0)";T.transform=j,T.webkitTransform=j}this.isMasked?this.textSpans[y]=f:this.textSpans[y]=m,this.textSpans[y].style.display="block",this.textPaths[y]=f,y+=1}for(;y<this.textSpans.length;)this.textSpans[y].style.display="none",y+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var s;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),s=this.svgElement.style;var r="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";s.transform=r,s.webkitTransform=r}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var n,t,a=0,l=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;t=o.length;var c,i,f;for(n=0;n<t;n+=1)o[n].n?a+=1:(i=this.textSpans[n],f=this.textPaths[n],c=l[a],a+=1,c._mdf.m&&(this.isMasked?i.setAttribute("transform",c.m):(i.style.webkitTransform=c.m,i.style.transform=c.m)),i.style.opacity=c.o,c.sw&&c._mdf.sw&&f.setAttribute("stroke-width",c.sw),c.sc&&c._mdf.sc&&f.setAttribute("stroke",c.sc),c.fc&&c._mdf.fc&&(f.setAttribute("fill",c.fc),f.style.color=c.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var m=this.innerElem.getBBox();this.currentBBox.w!==m.width&&(this.currentBBox.w=m.width,this.svgElement.setAttribute("width",m.width)),this.currentBBox.h!==m.height&&(this.currentBBox.h=m.height,this.svgElement.setAttribute("height",m.height));var _=1;if(this.currentBBox.w!==m.width+_*2||this.currentBBox.h!==m.height+_*2||this.currentBBox.x!==m.x-_||this.currentBBox.y!==m.y-_){this.currentBBox.w=m.width+_*2,this.currentBBox.h=m.height+_*2,this.currentBBox.x=m.x-_,this.currentBBox.y=m.y-_,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),s=this.svgElement.style;var u="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=u,s.webkitTransform=u}}}};function HCameraElement(s,r,n){this.initFrame(),this.initBaseData(s,r,n),this.initHierarchy();var t=PropertyFactory.getProp;if(this.pe=t(this,s.pe,0,0,this),s.ks.p.s?(this.px=t(this,s.ks.p.x,1,0,this),this.py=t(this,s.ks.p.y,1,0,this),this.pz=t(this,s.ks.p.z,1,0,this)):this.p=t(this,s.ks.p,1,0,this),s.ks.a&&(this.a=t(this,s.ks.a,1,0,this)),s.ks.or.k.length&&s.ks.or.k[0].to){var a,l=s.ks.or.k.length;for(a=0;a<l;a+=1)s.ks.or.k[a].to=null,s.ks.or.k[a].ti=null}this.or=t(this,s.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=t(this,s.ks.rx,0,degToRads,this),this.ry=t(this,s.ks.ry,0,degToRads,this),this.rz=t(this,s.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var s,r=this.comp.threeDElements.length,n,t,a;for(s=0;s<r;s+=1)if(n=this.comp.threeDElements[s],n.type==="3d"){t=n.perspectiveElem.style,a=n.container.style;var l=this.pe.v+"px",o="0px 0px 0px",c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";t.perspective=l,t.webkitPerspective=l,a.transformOrigin=o,a.mozTransformOrigin=o,a.webkitTransformOrigin=o,t.transform=c,t.webkitTransform=c}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var s=this._isFirstFrame,r,n;if(this.hierarchy)for(n=this.hierarchy.length,r=0;r<n;r+=1)s=this.hierarchy[r].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(n=this.hierarchy.length-1,r=n;r>=0;r-=1){var t=this.hierarchy[r].finalTransform.mProp;this.mat.translate(-t.p.v[0],-t.p.v[1],t.p.v[2]),this.mat.rotateX(-t.or.v[0]).rotateY(-t.or.v[1]).rotateZ(t.or.v[2]),this.mat.rotateX(-t.rx.v).rotateY(-t.ry.v).rotateZ(t.rz.v),this.mat.scale(1/t.s.v[0],1/t.s.v[1],1/t.s.v[2]),this.mat.translate(t.a.v[0],t.a.v[1],t.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;this.p?a=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:a=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var l=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),o=[a[0]/l,a[1]/l,a[2]/l],c=Math.sqrt(o[2]*o[2]+o[0]*o[0]),i=Math.atan2(o[1],c),f=Math.atan2(o[0],-o[2]);this.mat.rotateY(f).rotateX(-i)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var m=!this._prevMat.equals(this.mat);if((m||this.pe._mdf)&&this.comp.threeDElements){n=this.comp.threeDElements.length;var _,u,p;for(r=0;r<n;r+=1)if(_=this.comp.threeDElements[r],_.type==="3d"){if(m){var g=this.mat.toCSS();p=_.container.style,p.transform=g,p.webkitTransform=g}this.pe._mdf&&(u=_.perspectiveElem.style,u.perspective=this.pe.v+"px",u.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(s,r,n){this.assetData=r.getAssetData(s.refId),this.initElement(s,r,n)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData),r=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(r),r.crossOrigin="anonymous",r.src=s,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(s,r){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(s,r){var n=s.getBaseElement();if(n){var t=this.layers[r];if(!t.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(n,r);else{for(var a=0,l,o,c;a<r;)this.elements[a]&&this.elements[a]!==!0&&this.elements[a].getBaseElement&&(o=this.elements[a],c=this.layers[a].ddd?this.getThreeDContainerByPos(a):o.getBaseElement(),l=c||l),a+=1;l?(!t.ddd||!this.supports3d)&&this.layerElement.insertBefore(n,l):(!t.ddd||!this.supports3d)&&this.layerElement.appendChild(n)}else this.addTo3dContainer(n,r)}},HybridRendererBase.prototype.createShape=function(s){return this.supports3d?new HShapeElement(s,this.globalData,this):new SVGShapeElement(s,this.globalData,this)},HybridRendererBase.prototype.createText=function(s){return this.supports3d?new HTextElement(s,this.globalData,this):new SVGTextLottieElement(s,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(s){return this.camera=new HCameraElement(s,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(s){return this.supports3d?new HImageElement(s,this.globalData,this):new IImageElement(s,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(s){return this.supports3d?new HSolidElement(s,this.globalData,this):new ISolidElement(s,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(s){for(var r=0,n=this.threeDElements.length;r<n;){if(this.threeDElements[r].startPos<=s&&this.threeDElements[r].endPos>=s)return this.threeDElements[r].perspectiveElem;r+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(s,r){var n=createTag("div"),t,a;styleDiv(n);var l=createTag("div");if(styleDiv(l),r==="3d"){t=n.style,t.width=this.globalData.compSize.w+"px",t.height=this.globalData.compSize.h+"px";var o="50% 50%";t.webkitTransformOrigin=o,t.mozTransformOrigin=o,t.transformOrigin=o,a=l.style;var c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";a.transform=c,a.webkitTransform=c}n.appendChild(l);var i={container:l,perspectiveElem:n,startPos:s,endPos:s,type:r};return this.threeDElements.push(i),i},HybridRendererBase.prototype.build3dContainers=function(){var s,r=this.layers.length,n,t="";for(s=0;s<r;s+=1)this.layers[s].ddd&&this.layers[s].ty!==3?(t!=="3d"&&(t="3d",n=this.createThreeDContainer(s,"3d")),n.endPos=Math.max(n.endPos,s)):(t!=="2d"&&(t="2d",n=this.createThreeDContainer(s,"2d")),n.endPos=Math.max(n.endPos,s));for(r=this.threeDElements.length,s=r-1;s>=0;s-=1)this.resizerElem.appendChild(this.threeDElements[s].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(s,r){for(var n=0,t=this.threeDElements.length;n<t;){if(r<=this.threeDElements[n].endPos){for(var a=this.threeDElements[n].startPos,l;a<r;)this.elements[a]&&this.elements[a].getBaseElement&&(l=this.elements[a].getBaseElement()),a+=1;l?this.threeDElements[n].container.insertBefore(s,l):this.threeDElements[n].container.appendChild(s);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(s){var r=createTag("div"),n=this.animationItem.wrapper,t=r.style;t.width=s.w+"px",t.height=s.h+"px",this.resizerElem=r,styleDiv(r),t.transformStyle="flat",t.mozTransformStyle="flat",t.webkitTransformStyle="flat",this.renderConfig.className&&r.setAttribute("class",this.renderConfig.className),n.appendChild(r),t.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var l=createNS("defs");a.appendChild(l),this.data=s,this.setupGlobalData(s,a),this.globalData.defs=l,this.layers=s.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var s,r=this.layers?this.layers.length:0;for(s=0;s<r;s+=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var s=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight,n=s/r,t=this.globalData.compSize.w/this.globalData.compSize.h,a,l,o,c;t>n?(a=s/this.globalData.compSize.w,l=s/this.globalData.compSize.w,o=0,c=(r-this.globalData.compSize.h*(s/this.globalData.compSize.w))/2):(a=r/this.globalData.compSize.h,l=r/this.globalData.compSize.h,o=(s-this.globalData.compSize.w*(r/this.globalData.compSize.h))/2,c=0);var i=this.resizerElem.style;i.webkitTransform="matrix3d("+a+",0,0,0,0,"+l+",0,0,0,0,1,0,"+o+","+c+",0,1)",i.transform=i.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var s=this.globalData.compSize.w,r=this.globalData.compSize.h,n,t=this.threeDElements.length;for(n=0;n<t;n+=1){var a=this.threeDElements[n].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(s,2)+Math.pow(r,2))+"px",a.perspective=a.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(s){var r,n=s.length,t=createTag("div");for(r=0;r<n;r+=1)if(s[r].xt){var a=this.createComp(s[r],t,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}};function HCompElement(s,r,n){this.layers=s.layers,this.supports3d=!s.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,r,n),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,r.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(s,r){for(var n=0,t;n<r;)this.elements[n]&&this.elements[n].getBaseElement&&(t=this.elements[n].getBaseElement()),n+=1;t?this.layerElement.insertBefore(s,t):this.layerElement.appendChild(s)},HCompElement.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};function HybridRenderer(s,r){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:r&&r.className||"",imagePreserveAspectRatio:r&&r.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(r&&r.hideOnTransparent===!1),filterSize:{width:r&&r.filterSize&&r.filterSize.width||"400%",height:r&&r.filterSize&&r.filterSize.height||"400%",x:r&&r.filterSize&&r.filterSize.x||"-100%",y:r&&r.filterSize&&r.filterSize.y||"-100%"},runExpressions:!r||r.runExpressions===void 0||r.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};var CompExpressionInterface=function(){return function(s){function r(n){for(var t=0,a=s.layers.length;t<a;){if(s.layers[t].nm===n||s.layers[t].ind===n)return s.elements[t].layerInterface;t+=1}return null}return Object.defineProperty(r,"_name",{value:s.data.nm}),r.layer=r,r.pixelAspect=1,r.height=s.data.h||s.globalData.compSize.h,r.width=s.data.w||s.globalData.compSize.w,r.pixelAspect=1,r.frameDuration=1/s.globalData.frameRate,r.displayStartTime=0,r.numLayers=s.layers.length,r}}();function _typeof$2(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(n){return typeof n}:_typeof$2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$2(s)}function seedRandom(s,r){var n=this,t=256,a=6,l=52,o="random",c=r.pow(t,a),i=r.pow(2,l),f=i*2,m=t-1,_;function u(x,k,T){var j=[];k=k===!0?{entropy:!0}:k||{};var A=S(y(k.entropy?[x,E(s)]:x===null?b():x,3),j),C=new p(j),I=function(){for(var N=C.g(a),z=c,R=0;N<i;)N=(N+R)*t,z*=t,R=C.g(1);for(;N>=f;)N/=2,z/=2,R>>>=1;return(N+R)/z};return I.int32=function(){return C.g(4)|0},I.quick=function(){return C.g(4)/4294967296},I.double=I,S(E(C.S),s),(k.pass||T||function(F,N,z,R){return R&&(R.S&&g(R,C),F.state=function(){return g(C,{})}),z?(r[o]=F,N):F})(I,A,"global"in k?k.global:this==r,k.state)}r["seed"+o]=u;function p(x){var k,T=x.length,j=this,A=0,C=j.i=j.j=0,I=j.S=[];for(T||(x=[T++]);A<t;)I[A]=A++;for(A=0;A<t;A++)I[A]=I[C=m&C+x[A%T]+(k=I[A])],I[C]=k;j.g=function(F){for(var N,z=0,R=j.i,q=j.j,M=j.S;F--;)N=M[R=m&R+1],z=z*t+M[m&(M[R]=M[q=m&q+N])+(M[q]=N)];return j.i=R,j.j=q,z}}function g(x,k){return k.i=x.i,k.j=x.j,k.S=x.S.slice(),k}function y(x,k){var T=[],j=_typeof$2(x),A;if(k&&j=="object")for(A in x)try{T.push(y(x[A],k-1))}catch{}return T.length?T:j=="string"?x:x+"\0"}function S(x,k){for(var T=x+"",j,A=0;A<T.length;)k[m&A]=m&(j^=k[m&A]*19)+T.charCodeAt(A++);return E(k)}function b(){try{var x=new Uint8Array(t);return(n.crypto||n.msCrypto).getRandomValues(x),E(x)}catch{var k=n.navigator,T=k&&k.plugins;return[+new Date,n,T,n.screen,E(s)]}}function E(x){return String.fromCharCode.apply(0,x)}S(r.random(),s)}function initialize$2(s){seedRandom([],s)}var propTypes={SHAPE:"shape"};function _typeof$1(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(n){return typeof n}:_typeof$1=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(s)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(s){return s.constructor===Array||s.constructor===Float32Array}function isNumerable(s,r){return s==="number"||r instanceof Number||s==="boolean"||s==="string"}function $bm_neg(s){var r=_typeof$1(s);if(r==="number"||s instanceof Number||r==="boolean")return-s;if($bm_isInstanceOfArray(s)){var n,t=s.length,a=[];for(n=0;n<t;n+=1)a[n]=-s[n];return a}return s.propType?s.v:-s}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(s,r){var n=_typeof$1(s),t=_typeof$1(r);if(isNumerable(n,s)&&isNumerable(t,r)||n==="string"||t==="string")return s+r;if($bm_isInstanceOfArray(s)&&isNumerable(t,r))return s=s.slice(0),s[0]+=r,s;if(isNumerable(n,s)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=s+r[0],r;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(r)){for(var a=0,l=s.length,o=r.length,c=[];a<l||a<o;)(typeof s[a]=="number"||s[a]instanceof Number)&&(typeof r[a]=="number"||r[a]instanceof Number)?c[a]=s[a]+r[a]:c[a]=r[a]===void 0?s[a]:s[a]||r[a],a+=1;return c}return 0}var add=sum;function sub(s,r){var n=_typeof$1(s),t=_typeof$1(r);if(isNumerable(n,s)&&isNumerable(t,r))return n==="string"&&(s=parseInt(s,10)),t==="string"&&(r=parseInt(r,10)),s-r;if($bm_isInstanceOfArray(s)&&isNumerable(t,r))return s=s.slice(0),s[0]-=r,s;if(isNumerable(n,s)&&$bm_isInstanceOfArray(r))return r=r.slice(0),r[0]=s-r[0],r;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(r)){for(var a=0,l=s.length,o=r.length,c=[];a<l||a<o;)(typeof s[a]=="number"||s[a]instanceof Number)&&(typeof r[a]=="number"||r[a]instanceof Number)?c[a]=s[a]-r[a]:c[a]=r[a]===void 0?s[a]:s[a]||r[a],a+=1;return c}return 0}function mul(s,r){var n=_typeof$1(s),t=_typeof$1(r),a;if(isNumerable(n,s)&&isNumerable(t,r))return s*r;var l,o;if($bm_isInstanceOfArray(s)&&isNumerable(t,r)){for(o=s.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s[l]*r;return a}if(isNumerable(n,s)&&$bm_isInstanceOfArray(r)){for(o=r.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s*r[l];return a}return 0}function div(s,r){var n=_typeof$1(s),t=_typeof$1(r),a;if(isNumerable(n,s)&&isNumerable(t,r))return s/r;var l,o;if($bm_isInstanceOfArray(s)&&isNumerable(t,r)){for(o=s.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s[l]/r;return a}if(isNumerable(n,s)&&$bm_isInstanceOfArray(r)){for(o=r.length,a=createTypedArray("float32",o),l=0;l<o;l+=1)a[l]=s/r[l];return a}return 0}function mod(s,r){return typeof s=="string"&&(s=parseInt(s,10)),typeof r=="string"&&(r=parseInt(r,10)),s%r}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(s,r,n){if(r>n){var t=n;n=r,r=t}return Math.min(Math.max(s,r),n)}function radiansToDegrees(s){return s/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(s){return s*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(s,r){if(typeof s=="number"||s instanceof Number)return r=r||0,Math.abs(s-r);r||(r=helperLengthArray);var n,t=Math.min(s.length,r.length),a=0;for(n=0;n<t;n+=1)a+=Math.pow(r[n]-s[n],2);return Math.sqrt(a)}function normalize(s){return div(s,length(s))}function rgbToHsl(s){var r=s[0],n=s[1],t=s[2],a=Math.max(r,n,t),l=Math.min(r,n,t),o,c,i=(a+l)/2;if(a===l)o=0,c=0;else{var f=a-l;switch(c=i>.5?f/(2-a-l):f/(a+l),a){case r:o=(n-t)/f+(n<t?6:0);break;case n:o=(t-r)/f+2;break;case t:o=(r-n)/f+4;break}o/=6}return[o,c,i,s[3]]}function hue2rgb(s,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(r-s)*6*n:n<1/2?r:n<2/3?s+(r-s)*(2/3-n)*6:s}function hslToRgb(s){var r=s[0],n=s[1],t=s[2],a,l,o;if(n===0)a=t,o=t,l=t;else{var c=t<.5?t*(1+n):t+n-t*n,i=2*t-c;a=hue2rgb(i,c,r+1/3),l=hue2rgb(i,c,r),o=hue2rgb(i,c,r-1/3)}return[a,l,o,s[3]]}function linear(s,r,n,t,a){if((t===void 0||a===void 0)&&(t=r,a=n,r=0,n=1),n<r){var l=n;n=r,r=l}if(s<=r)return t;if(s>=n)return a;var o=n===r?0:(s-r)/(n-r);if(!t.length)return t+(a-t)*o;var c,i=t.length,f=createTypedArray("float32",i);for(c=0;c<i;c+=1)f[c]=t[c]+(a[c]-t[c])*o;return f}function random(s,r){if(r===void 0&&(s===void 0?(s=0,r=1):(r=s,s=void 0)),r.length){var n,t=r.length;s||(s=createTypedArray("float32",t));var a=createTypedArray("float32",t),l=BMMath.random();for(n=0;n<t;n+=1)a[n]=s[n]+l*(r[n]-s[n]);return a}s===void 0&&(s=0);var o=BMMath.random();return s+o*(r-s)}function createPath(s,r,n,t){var a,l=s.length,o=shapePool.newElement();o.setPathData(!!t,l);var c=[0,0],i,f;for(a=0;a<l;a+=1)i=r&&r[a]?r[a]:c,f=n&&n[a]?n[a]:c,o.setTripleAt(s[a][0],s[a][1],f[0]+s[a][0],f[1]+s[a][1],i[0]+s[a][0],i[1]+s[a][1],a,!0);return o}function initiateExpression(elem,data,property){function noOp(s){return s}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function s(r,n){var t,a,l=this.pv.length?this.pv.length:1,o=createTypedArray("float32",l);r=5;var c=Math.floor(time*r);for(t=0,a=0;t<c;){for(a=0;a<l;a+=1)o[a]+=-n+n*2*BMMath.random();t+=1}var i=time*r,f=i-Math.floor(i),m=createTypedArray("float32",l);if(l>1){for(a=0;a<l;a+=1)m[a]=this.pv[a]+o[a]+(-n+n*2*BMMath.random())*f;return m}return this.pv+o[0]+(-n+n*2*BMMath.random())*f}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(s,r){return loopIn(s,r,!0)}function loopOutDuration(s,r){return loopOut(s,r,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(s,r){var n=[r[0]-s[0],r[1]-s[1],r[2]-s[2]],t=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads,a=-Math.atan2(n[1],n[2])/degToRads;return[a,t,0]}function easeOut(s,r,n,t,a){return applyEase(easeOutBez,s,r,n,t,a)}function easeIn(s,r,n,t,a){return applyEase(easeInBez,s,r,n,t,a)}function ease(s,r,n,t,a){return applyEase(easeInOutBez,s,r,n,t,a)}function applyEase(s,r,n,t,a,l){a===void 0?(a=n,l=t):r=(r-n)/(t-n),r>1?r=1:r<0&&(r=0);var o=s(r);if($bm_isInstanceOfArray(a)){var c,i=a.length,f=createTypedArray("float32",i);for(c=0;c<i;c+=1)f[c]=(l[c]-a[c])*o+a[c];return f}return(l-a)*o+a}function nearestKey(s){var r,n=data.k.length,t,a;if(!data.k.length||typeof data.k[0]=="number")t=0,a=0;else if(t=-1,s*=elem.comp.globalData.frameRate,s<data.k[0].t)t=1,a=data.k[0].t;else{for(r=0;r<n-1;r+=1)if(s===data.k[r].t){t=r+1,a=data.k[r].t;break}else if(s>data.k[r].t&&s<data.k[r+1].t){s-data.k[r].t>data.k[r+1].t-s?(t=r+2,a=data.k[r+1].t):(t=r+1,a=data.k[r].t);break}t===-1&&(t=r+1,a=data.k[r].t)}var l={};return l.index=t,l.time=a/elem.comp.globalData.frameRate,l}function key(s){var r,n,t;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+s);s-=1,r={time:data.k[s].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[s],"s")?data.k[s].s:data.k[s-1].e;for(t=a.length,n=0;n<t;n+=1)r[n]=a[n],r.value[n]=a[n];return r}function framesToTime(s,r){return r||(r=elem.comp.globalData.frameRate),s/r}function timeToFrames(s,r){return!s&&s!==0&&(s=time),r||(r=elem.comp.globalData.frameRate),s*r}function seedRandom(s){BMMath.seedrandom(randSeed+s)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(s,r){return typeof value=="string"?r===void 0?value.substring(s):value.substring(s,r):""}function substr(s,r){return typeof value=="string"?r===void 0?value.substr(s):value.substr(s,r):""}function posterizeTime(s){time=s===0?0:Math.floor(time*s)/s,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(s){return value=s,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var s={};s.initExpressions=r,s.resetFrame=ExpressionManager.resetFrame;function r(n){var t=0,a=[];function l(){t+=1}function o(){t-=1,t===0&&i()}function c(f){a.indexOf(f)===-1&&a.push(f)}function i(){var f,m=a.length;for(f=0;f<m;f+=1)a[f].release();a.length=0}n.renderer.compInterface=CompExpressionInterface(n.renderer),n.renderer.globalData.projectInterface.registerComposition(n.renderer),n.renderer.globalData.pushExpression=l,n.renderer.globalData.popExpression=o,n.renderer.globalData.registerExpressionProperty=c}return s}(),MaskManagerInterface=function(){function s(n,t){this._mask=n,this._data=t}Object.defineProperty(s.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(s.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var r=function(t){var a=createSizedArray(t.viewData.length),l,o=t.viewData.length;for(l=0;l<o;l+=1)a[l]=new s(t.viewData[l],t.masksProperties[l]);var c=function(f){for(l=0;l<o;){if(t.masksProperties[l].nm===f)return a[l];l+=1}return null};return c};return r}(),ExpressionPropertyInterface=function(){var s={pv:0,v:0,mult:1},r={pv:[0,0,0],v:[0,0,0],mult:1};function n(o,c,i){Object.defineProperty(o,"velocity",{get:function(){return c.getVelocityAtTime(c.comp.currentFrame)}}),o.numKeys=c.keyframes?c.keyframes.length:0,o.key=function(f){if(!o.numKeys)return 0;var m="";"s"in c.keyframes[f-1]?m=c.keyframes[f-1].s:"e"in c.keyframes[f-2]?m=c.keyframes[f-2].e:m=c.keyframes[f-2].s;var _=i==="unidimensional"?new Number(m):Object.assign({},m);return _.time=c.keyframes[f-1].t/c.elem.comp.globalData.frameRate,_.value=i==="unidimensional"?m[0]:m,_},o.valueAtTime=c.getValueAtTime,o.speedAtTime=c.getSpeedAtTime,o.velocityAtTime=c.getVelocityAtTime,o.propertyGroup=c.propertyGroup}function t(o){(!o||!("pv"in o))&&(o=s);var c=1/o.mult,i=o.pv*c,f=new Number(i);return f.value=i,n(f,o,"unidimensional"),function(){return o.k&&o.getValue(),i=o.v*c,f.value!==i&&(f=new Number(i),f.value=i,n(f,o,"unidimensional")),f}}function a(o){(!o||!("pv"in o))&&(o=r);var c=1/o.mult,i=o.data&&o.data.l||o.pv.length,f=createTypedArray("float32",i),m=createTypedArray("float32",i);return f.value=m,n(f,o,"multidimensional"),function(){o.k&&o.getValue();for(var _=0;_<i;_+=1)m[_]=o.v[_]*c,f[_]=m[_];return f}}function l(){return s}return function(o){return o?o.propType==="unidimensional"?t(o):a(o):l}}(),TransformExpressionInterface=function(){return function(s){function r(o){switch(o){case"scale":case"Scale":case"ADBE Scale":case 6:return r.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return r.rotation;case"ADBE Rotate X":return r.xRotation;case"ADBE Rotate Y":return r.yRotation;case"position":case"Position":case"ADBE Position":case 2:return r.position;case"ADBE Position_0":return r.xPosition;case"ADBE Position_1":return r.yPosition;case"ADBE Position_2":return r.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return r.anchorPoint;case"opacity":case"Opacity":case 11:return r.opacity;default:return null}}Object.defineProperty(r,"rotation",{get:ExpressionPropertyInterface(s.r||s.rz)}),Object.defineProperty(r,"zRotation",{get:ExpressionPropertyInterface(s.rz||s.r)}),Object.defineProperty(r,"xRotation",{get:ExpressionPropertyInterface(s.rx)}),Object.defineProperty(r,"yRotation",{get:ExpressionPropertyInterface(s.ry)}),Object.defineProperty(r,"scale",{get:ExpressionPropertyInterface(s.s)});var n,t,a,l;return s.p?l=ExpressionPropertyInterface(s.p):(n=ExpressionPropertyInterface(s.px),t=ExpressionPropertyInterface(s.py),s.pz&&(a=ExpressionPropertyInterface(s.pz))),Object.defineProperty(r,"position",{get:function(){return s.p?l():[n(),t(),a?a():0]}}),Object.defineProperty(r,"xPosition",{get:ExpressionPropertyInterface(s.px)}),Object.defineProperty(r,"yPosition",{get:ExpressionPropertyInterface(s.py)}),Object.defineProperty(r,"zPosition",{get:ExpressionPropertyInterface(s.pz)}),Object.defineProperty(r,"anchorPoint",{get:ExpressionPropertyInterface(s.a)}),Object.defineProperty(r,"opacity",{get:ExpressionPropertyInterface(s.o)}),Object.defineProperty(r,"skew",{get:ExpressionPropertyInterface(s.sk)}),Object.defineProperty(r,"skewAxis",{get:ExpressionPropertyInterface(s.sa)}),Object.defineProperty(r,"orientation",{get:ExpressionPropertyInterface(s.or)}),r}}(),LayerExpressionInterface=function(){function s(f){var m=new Matrix;if(f!==void 0){var _=this._elem.finalTransform.mProp.getValueAtTime(f);_.clone(m)}else{var u=this._elem.finalTransform.mProp;u.applyToMatrix(m)}return m}function r(f,m){var _=this.getMatrix(m);return _.props[12]=0,_.props[13]=0,_.props[14]=0,this.applyPoint(_,f)}function n(f,m){var _=this.getMatrix(m);return this.applyPoint(_,f)}function t(f,m){var _=this.getMatrix(m);return _.props[12]=0,_.props[13]=0,_.props[14]=0,this.invertPoint(_,f)}function a(f,m){var _=this.getMatrix(m);return this.invertPoint(_,f)}function l(f,m){if(this._elem.hierarchy&&this._elem.hierarchy.length){var _,u=this._elem.hierarchy.length;for(_=0;_<u;_+=1)this._elem.hierarchy[_].finalTransform.mProp.applyToMatrix(f)}return f.applyToPointArray(m[0],m[1],m[2]||0)}function o(f,m){if(this._elem.hierarchy&&this._elem.hierarchy.length){var _,u=this._elem.hierarchy.length;for(_=0;_<u;_+=1)this._elem.hierarchy[_].finalTransform.mProp.applyToMatrix(f)}return f.inversePoint(m)}function c(f){var m=new Matrix;if(m.reset(),this._elem.finalTransform.mProp.applyToMatrix(m),this._elem.hierarchy&&this._elem.hierarchy.length){var _,u=this._elem.hierarchy.length;for(_=0;_<u;_+=1)this._elem.hierarchy[_].finalTransform.mProp.applyToMatrix(m);return m.inversePoint(f)}return m.inversePoint(f)}function i(){return[1,1,1,1]}return function(f){var m;function _(y){p.mask=new MaskManagerInterface(y,f)}function u(y){p.effect=y}function p(y){switch(y){case"ADBE Root Vectors Group":case"Contents":case 2:return p.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return m;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return p.effect;case"ADBE Text Properties":return p.textInterface;default:return null}}p.getMatrix=s,p.invertPoint=o,p.applyPoint=l,p.toWorld=n,p.toWorldVec=r,p.fromWorld=a,p.fromWorldVec=t,p.toComp=n,p.fromComp=c,p.sampleImage=i,p.sourceRectAtTime=f.sourceRectAtTime.bind(f),p._elem=f,m=TransformExpressionInterface(f.finalTransform.mProp);var g=getDescriptor(m,"anchorPoint");return Object.defineProperties(p,{hasParent:{get:function(){return f.hierarchy.length}},parent:{get:function(){return f.hierarchy[0].layerInterface}},rotation:getDescriptor(m,"rotation"),scale:getDescriptor(m,"scale"),position:getDescriptor(m,"position"),opacity:getDescriptor(m,"opacity"),anchorPoint:g,anchor_point:g,transform:{get:function(){return m}},active:{get:function(){return f.isInRange}}}),p.startTime=f.data.st,p.index=f.data.ind,p.source=f.data.refId,p.height=f.data.ty===0?f.data.h:100,p.width=f.data.ty===0?f.data.w:100,p.inPoint=f.data.ip/f.comp.globalData.frameRate,p.outPoint=f.data.op/f.comp.globalData.frameRate,p._name=f.data.nm,p.registerMaskInterface=_,p.registerEffectsInterface=u,p}}(),propertyGroupFactory=function(){return function(s,r){return function(n){return n=n===void 0?1:n,n<=0?s:r(n-1)}}}(),PropertyInterface=function(){return function(s,r){var n={_name:s};function t(a){return a=a===void 0?1:a,a<=0?n:r(a-1)}return t}}(),EffectsExpressionInterface=function(){var s={createEffectsInterface:r};function r(a,l){if(a.effectsManager){var o=[],c=a.data.ef,i,f=a.effectsManager.effectElements.length;for(i=0;i<f;i+=1)o.push(n(c[i],a.effectsManager.effectElements[i],l,a));var m=a.data.ef||[],_=function(p){for(i=0,f=m.length;i<f;){if(p===m[i].nm||p===m[i].mn||p===m[i].ix)return o[i];i+=1}return null};return Object.defineProperty(_,"numProperties",{get:function(){return m.length}}),_}return null}function n(a,l,o,c){function i(p){for(var g=a.ef,y=0,S=g.length;y<S;){if(p===g[y].nm||p===g[y].mn||p===g[y].ix)return g[y].ty===5?m[y]:m[y]();y+=1}throw new Error}var f=propertyGroupFactory(i,o),m=[],_,u=a.ef.length;for(_=0;_<u;_+=1)a.ef[_].ty===5?m.push(n(a.ef[_],l.effectElements[_],l.effectElements[_].propertyGroup,c)):m.push(t(l.effectElements[_],a.ef[_].ty,c,f));return a.mn==="ADBE Color Control"&&Object.defineProperty(i,"color",{get:function(){return m[0]()}}),Object.defineProperties(i,{numProperties:{get:function(){return a.np}},_name:{value:a.nm},propertyGroup:{value:f}}),i.enabled=a.en!==0,i.active=i.enabled,i}function t(a,l,o,c){var i=ExpressionPropertyInterface(a.p);function f(){return l===10?o.comp.compInterface(a.p.v):i()}return a.p.setGroupProperty&&a.p.setGroupProperty(PropertyInterface("",c)),f}return s}(),ShapePathInterface=function(){return function(r,n,t){var a=n.sh;function l(c){return c==="Shape"||c==="shape"||c==="Path"||c==="path"||c==="ADBE Vector Shape"||c===2?l.path:null}var o=propertyGroupFactory(l,t);return a.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(l,{path:{get:function(){return a.k&&a.getValue(),a}},shape:{get:function(){return a.k&&a.getValue(),a}},_name:{value:r.nm},ix:{value:r.ix},propertyIndex:{value:r.ix},mn:{value:r.mn},propertyGroup:{value:t}}),l}}(),ShapeExpressionInterface=function(){function s(g,y,S){var b=[],E,x=g?g.length:0;for(E=0;E<x;E+=1)g[E].ty==="gr"?b.push(n(g[E],y[E],S)):g[E].ty==="fl"?b.push(t(g[E],y[E],S)):g[E].ty==="st"?b.push(o(g[E],y[E],S)):g[E].ty==="tm"?b.push(c(g[E],y[E],S)):g[E].ty==="tr"||(g[E].ty==="el"?b.push(f(g[E],y[E],S)):g[E].ty==="sr"?b.push(m(g[E],y[E],S)):g[E].ty==="sh"?b.push(ShapePathInterface(g[E],y[E],S)):g[E].ty==="rc"?b.push(_(g[E],y[E],S)):g[E].ty==="rd"?b.push(u(g[E],y[E],S)):g[E].ty==="rp"?b.push(p(g[E],y[E],S)):g[E].ty==="gf"?b.push(a(g[E],y[E],S)):b.push(l(g[E],y[E])));return b}function r(g,y,S){var b,E=function(T){for(var j=0,A=b.length;j<A;){if(b[j]._name===T||b[j].mn===T||b[j].propertyIndex===T||b[j].ix===T||b[j].ind===T)return b[j];j+=1}return typeof T=="number"?b[T-1]:null};E.propertyGroup=propertyGroupFactory(E,S),b=s(g.it,y.it,E.propertyGroup),E.numProperties=b.length;var x=i(g.it[g.it.length-1],y.it[y.it.length-1],E.propertyGroup);return E.transform=x,E.propertyIndex=g.cix,E._name=g.nm,E}function n(g,y,S){var b=function(T){switch(T){case"ADBE Vectors Group":case"Contents":case 2:return b.content;default:return b.transform}};b.propertyGroup=propertyGroupFactory(b,S);var E=r(g,y,b.propertyGroup),x=i(g.it[g.it.length-1],y.it[y.it.length-1],b.propertyGroup);return b.content=E,b.transform=x,Object.defineProperty(b,"_name",{get:function(){return g.nm}}),b.numProperties=g.np,b.propertyIndex=g.ix,b.nm=g.nm,b.mn=g.mn,b}function t(g,y,S){function b(E){return E==="Color"||E==="color"?b.color:E==="Opacity"||E==="opacity"?b.opacity:null}return Object.defineProperties(b,{color:{get:ExpressionPropertyInterface(y.c)},opacity:{get:ExpressionPropertyInterface(y.o)},_name:{value:g.nm},mn:{value:g.mn}}),y.c.setGroupProperty(PropertyInterface("Color",S)),y.o.setGroupProperty(PropertyInterface("Opacity",S)),b}function a(g,y,S){function b(E){return E==="Start Point"||E==="start point"?b.startPoint:E==="End Point"||E==="end point"?b.endPoint:E==="Opacity"||E==="opacity"?b.opacity:null}return Object.defineProperties(b,{startPoint:{get:ExpressionPropertyInterface(y.s)},endPoint:{get:ExpressionPropertyInterface(y.e)},opacity:{get:ExpressionPropertyInterface(y.o)},type:{get:function(){return"a"}},_name:{value:g.nm},mn:{value:g.mn}}),y.s.setGroupProperty(PropertyInterface("Start Point",S)),y.e.setGroupProperty(PropertyInterface("End Point",S)),y.o.setGroupProperty(PropertyInterface("Opacity",S)),b}function l(){function g(){return null}return g}function o(g,y,S){var b=propertyGroupFactory(A,S),E=propertyGroupFactory(j,b);function x(C){Object.defineProperty(j,g.d[C].nm,{get:ExpressionPropertyInterface(y.d.dataProps[C].p)})}var k,T=g.d?g.d.length:0,j={};for(k=0;k<T;k+=1)x(k),y.d.dataProps[k].p.setGroupProperty(E);function A(C){return C==="Color"||C==="color"?A.color:C==="Opacity"||C==="opacity"?A.opacity:C==="Stroke Width"||C==="stroke width"?A.strokeWidth:null}return Object.defineProperties(A,{color:{get:ExpressionPropertyInterface(y.c)},opacity:{get:ExpressionPropertyInterface(y.o)},strokeWidth:{get:ExpressionPropertyInterface(y.w)},dash:{get:function(){return j}},_name:{value:g.nm},mn:{value:g.mn}}),y.c.setGroupProperty(PropertyInterface("Color",b)),y.o.setGroupProperty(PropertyInterface("Opacity",b)),y.w.setGroupProperty(PropertyInterface("Stroke Width",b)),A}function c(g,y,S){function b(x){return x===g.e.ix||x==="End"||x==="end"?b.end:x===g.s.ix?b.start:x===g.o.ix?b.offset:null}var E=propertyGroupFactory(b,S);return b.propertyIndex=g.ix,y.s.setGroupProperty(PropertyInterface("Start",E)),y.e.setGroupProperty(PropertyInterface("End",E)),y.o.setGroupProperty(PropertyInterface("Offset",E)),b.propertyIndex=g.ix,b.propertyGroup=S,Object.defineProperties(b,{start:{get:ExpressionPropertyInterface(y.s)},end:{get:ExpressionPropertyInterface(y.e)},offset:{get:ExpressionPropertyInterface(y.o)},_name:{value:g.nm}}),b.mn=g.mn,b}function i(g,y,S){function b(x){return g.a.ix===x||x==="Anchor Point"?b.anchorPoint:g.o.ix===x||x==="Opacity"?b.opacity:g.p.ix===x||x==="Position"?b.position:g.r.ix===x||x==="Rotation"||x==="ADBE Vector Rotation"?b.rotation:g.s.ix===x||x==="Scale"?b.scale:g.sk&&g.sk.ix===x||x==="Skew"?b.skew:g.sa&&g.sa.ix===x||x==="Skew Axis"?b.skewAxis:null}var E=propertyGroupFactory(b,S);return y.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",E)),y.transform.mProps.p.setGroupProperty(PropertyInterface("Position",E)),y.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",E)),y.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",E)),y.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",E)),y.transform.mProps.sk&&(y.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",E)),y.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",E))),y.transform.op.setGroupProperty(PropertyInterface("Opacity",E)),Object.defineProperties(b,{opacity:{get:ExpressionPropertyInterface(y.transform.mProps.o)},position:{get:ExpressionPropertyInterface(y.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(y.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(y.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(y.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(y.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(y.transform.mProps.sa)},_name:{value:g.nm}}),b.ty="tr",b.mn=g.mn,b.propertyGroup=S,b}function f(g,y,S){function b(k){return g.p.ix===k?b.position:g.s.ix===k?b.size:null}var E=propertyGroupFactory(b,S);b.propertyIndex=g.ix;var x=y.sh.ty==="tm"?y.sh.prop:y.sh;return x.s.setGroupProperty(PropertyInterface("Size",E)),x.p.setGroupProperty(PropertyInterface("Position",E)),Object.defineProperties(b,{size:{get:ExpressionPropertyInterface(x.s)},position:{get:ExpressionPropertyInterface(x.p)},_name:{value:g.nm}}),b.mn=g.mn,b}function m(g,y,S){function b(k){return g.p.ix===k?b.position:g.r.ix===k?b.rotation:g.pt.ix===k?b.points:g.or.ix===k||k==="ADBE Vector Star Outer Radius"?b.outerRadius:g.os.ix===k?b.outerRoundness:g.ir&&(g.ir.ix===k||k==="ADBE Vector Star Inner Radius")?b.innerRadius:g.is&&g.is.ix===k?b.innerRoundness:null}var E=propertyGroupFactory(b,S),x=y.sh.ty==="tm"?y.sh.prop:y.sh;return b.propertyIndex=g.ix,x.or.setGroupProperty(PropertyInterface("Outer Radius",E)),x.os.setGroupProperty(PropertyInterface("Outer Roundness",E)),x.pt.setGroupProperty(PropertyInterface("Points",E)),x.p.setGroupProperty(PropertyInterface("Position",E)),x.r.setGroupProperty(PropertyInterface("Rotation",E)),g.ir&&(x.ir.setGroupProperty(PropertyInterface("Inner Radius",E)),x.is.setGroupProperty(PropertyInterface("Inner Roundness",E))),Object.defineProperties(b,{position:{get:ExpressionPropertyInterface(x.p)},rotation:{get:ExpressionPropertyInterface(x.r)},points:{get:ExpressionPropertyInterface(x.pt)},outerRadius:{get:ExpressionPropertyInterface(x.or)},outerRoundness:{get:ExpressionPropertyInterface(x.os)},innerRadius:{get:ExpressionPropertyInterface(x.ir)},innerRoundness:{get:ExpressionPropertyInterface(x.is)},_name:{value:g.nm}}),b.mn=g.mn,b}function _(g,y,S){function b(k){return g.p.ix===k?b.position:g.r.ix===k?b.roundness:g.s.ix===k||k==="Size"||k==="ADBE Vector Rect Size"?b.size:null}var E=propertyGroupFactory(b,S),x=y.sh.ty==="tm"?y.sh.prop:y.sh;return b.propertyIndex=g.ix,x.p.setGroupProperty(PropertyInterface("Position",E)),x.s.setGroupProperty(PropertyInterface("Size",E)),x.r.setGroupProperty(PropertyInterface("Rotation",E)),Object.defineProperties(b,{position:{get:ExpressionPropertyInterface(x.p)},roundness:{get:ExpressionPropertyInterface(x.r)},size:{get:ExpressionPropertyInterface(x.s)},_name:{value:g.nm}}),b.mn=g.mn,b}function u(g,y,S){function b(k){return g.r.ix===k||k==="Round Corners 1"?b.radius:null}var E=propertyGroupFactory(b,S),x=y;return b.propertyIndex=g.ix,x.rd.setGroupProperty(PropertyInterface("Radius",E)),Object.defineProperties(b,{radius:{get:ExpressionPropertyInterface(x.rd)},_name:{value:g.nm}}),b.mn=g.mn,b}function p(g,y,S){function b(k){return g.c.ix===k||k==="Copies"?b.copies:g.o.ix===k||k==="Offset"?b.offset:null}var E=propertyGroupFactory(b,S),x=y;return b.propertyIndex=g.ix,x.c.setGroupProperty(PropertyInterface("Copies",E)),x.o.setGroupProperty(PropertyInterface("Offset",E)),Object.defineProperties(b,{copies:{get:ExpressionPropertyInterface(x.c)},offset:{get:ExpressionPropertyInterface(x.o)},_name:{value:g.nm}}),b.mn=g.mn,b}return function(g,y,S){var b;function E(k){if(typeof k=="number")return k=k===void 0?1:k,k===0?S:b[k-1];for(var T=0,j=b.length;T<j;){if(b[T]._name===k)return b[T];T+=1}return null}function x(){return S}return E.propertyGroup=propertyGroupFactory(E,x),b=s(g,y,E.propertyGroup),E.numProperties=b.length,E._name="Contents",E}}(),TextExpressionInterface=function(){return function(s){var r;function n(t){switch(t){case"ADBE Text Document":return n.sourceText;default:return null}}return Object.defineProperty(n,"sourceText",{get:function(){s.textProperty.getValue();var a=s.textProperty.currentData.t;return(!r||a!==r.value)&&(r=new String(a),r.value=a||new String(a),Object.defineProperty(r,"style",{get:function(){return{fillColor:s.textProperty.currentData.fc}}})),r}}),n}}();function _typeof(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(s)}var FootageInterface=function(){var s=function(t){var a="",l=t.getFootageData();function o(){return a="",l=t.getFootageData(),c}function c(i){if(l[i])return a=i,l=l[i],_typeof(l)==="object"?c:l;var f=i.indexOf(a);if(f!==-1){var m=parseInt(i.substr(f+a.length),10);return l=l[m],_typeof(l)==="object"?c:l}return""}return o},r=function(t){function a(l){return l==="Outline"?a.outlineInterface():null}return a._name="Outline",a.outlineInterface=s(t),a};return function(n){function t(a){return a==="Data"?t.dataInterface:null}return t._name="Data",t.dataInterface=r(n),t}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(s){return interfaces[s]||null}var expressionHelpers=function(){function s(o,c,i){c.x&&(i.k=!0,i.x=!0,i.initiateExpression=ExpressionManager.initiateExpression,i.effectsSequence.push(i.initiateExpression(o,c,i).bind(i)))}function r(o){return o*=this.elem.globalData.frameRate,o-=this.offsetTime,o!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<o?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(o,this._cachingAtTime),this._cachingAtTime.lastFrame=o),this._cachingAtTime.value}function n(o){var c=-.01,i=this.getValueAtTime(o),f=this.getValueAtTime(o+c),m=0;if(i.length){var _;for(_=0;_<i.length;_+=1)m+=Math.pow(f[_]-i[_],2);m=Math.sqrt(m)*100}else m=0;return m}function t(o){if(this.vel!==void 0)return this.vel;var c=-.001,i=this.getValueAtTime(o),f=this.getValueAtTime(o+c),m;if(i.length){m=createTypedArray("float32",i.length);var _;for(_=0;_<i.length;_+=1)m[_]=(f[_]-i[_])/c}else m=(f-i)/c;return m}function a(){return this.pv}function l(o){this.propertyGroup=o}return{searchExpressions:s,getSpeedAtTime:n,getVelocityAtTime:t,getValueAtTime:r,getStaticValueAtTime:a,setGroupProperty:l}}();function addPropertyDecorator(){function s(u,p,g){if(!this.k||!this.keyframes)return this.pv;u=u?u.toLowerCase():"";var y=this.comp.renderedFrame,S=this.keyframes,b=S[S.length-1].t;if(y<=b)return this.pv;var E,x;g?(p?E=Math.abs(b-this.elem.comp.globalData.frameRate*p):E=Math.max(0,b-this.elem.data.ip),x=b-E):((!p||p>S.length-1)&&(p=S.length-1),x=S[S.length-1-p].t,E=b-x);var k,T,j;if(u==="pingpong"){var A=Math.floor((y-x)/E);if(A%2!==0)return this.getValueAtTime((E-(y-x)%E+x)/this.comp.globalData.frameRate,0)}else if(u==="offset"){var C=this.getValueAtTime(x/this.comp.globalData.frameRate,0),I=this.getValueAtTime(b/this.comp.globalData.frameRate,0),F=this.getValueAtTime(((y-x)%E+x)/this.comp.globalData.frameRate,0),N=Math.floor((y-x)/E);if(this.pv.length){for(j=new Array(C.length),T=j.length,k=0;k<T;k+=1)j[k]=(I[k]-C[k])*N+F[k];return j}return(I-C)*N+F}else if(u==="continue"){var z=this.getValueAtTime(b/this.comp.globalData.frameRate,0),R=this.getValueAtTime((b-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(j=new Array(z.length),T=j.length,k=0;k<T;k+=1)j[k]=z[k]+(z[k]-R[k])*((y-b)/this.comp.globalData.frameRate)/5e-4;return j}return z+(z-R)*((y-b)/.001)}return this.getValueAtTime(((y-x)%E+x)/this.comp.globalData.frameRate,0)}function r(u,p,g){if(!this.k)return this.pv;u=u?u.toLowerCase():"";var y=this.comp.renderedFrame,S=this.keyframes,b=S[0].t;if(y>=b)return this.pv;var E,x;g?(p?E=Math.abs(this.elem.comp.globalData.frameRate*p):E=Math.max(0,this.elem.data.op-b),x=b+E):((!p||p>S.length-1)&&(p=S.length-1),x=S[p].t,E=x-b);var k,T,j;if(u==="pingpong"){var A=Math.floor((b-y)/E);if(A%2===0)return this.getValueAtTime(((b-y)%E+b)/this.comp.globalData.frameRate,0)}else if(u==="offset"){var C=this.getValueAtTime(b/this.comp.globalData.frameRate,0),I=this.getValueAtTime(x/this.comp.globalData.frameRate,0),F=this.getValueAtTime((E-(b-y)%E+b)/this.comp.globalData.frameRate,0),N=Math.floor((b-y)/E)+1;if(this.pv.length){for(j=new Array(C.length),T=j.length,k=0;k<T;k+=1)j[k]=F[k]-(I[k]-C[k])*N;return j}return F-(I-C)*N}else if(u==="continue"){var z=this.getValueAtTime(b/this.comp.globalData.frameRate,0),R=this.getValueAtTime((b+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(j=new Array(z.length),T=j.length,k=0;k<T;k+=1)j[k]=z[k]+(z[k]-R[k])*(b-y)/.001;return j}return z+(z-R)*(b-y)/.001}return this.getValueAtTime((E-((b-y)%E+b))/this.comp.globalData.frameRate,0)}function n(u,p){if(!this.k)return this.pv;if(u=(u||.4)*.5,p=Math.floor(p||5),p<=1)return this.pv;var g=this.comp.renderedFrame/this.comp.globalData.frameRate,y=g-u,S=g+u,b=p>1?(S-y)/(p-1):1,E=0,x=0,k;this.pv.length?k=createTypedArray("float32",this.pv.length):k=0;for(var T;E<p;){if(T=this.getValueAtTime(y+E*b),this.pv.length)for(x=0;x<this.pv.length;x+=1)k[x]+=T[x];else k+=T;E+=1}if(this.pv.length)for(x=0;x<this.pv.length;x+=1)k[x]/=p;else k/=p;return k}function t(u){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var p=this._transformCachingAtTime.v;if(p.cloneFromProps(this.pre.props),this.appliedTransformations<1){var g=this.a.getValueAtTime(u);p.translate(-g[0]*this.a.mult,-g[1]*this.a.mult,g[2]*this.a.mult)}if(this.appliedTransformations<2){var y=this.s.getValueAtTime(u);p.scale(y[0]*this.s.mult,y[1]*this.s.mult,y[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var S=this.sk.getValueAtTime(u),b=this.sa.getValueAtTime(u);p.skewFromAxis(-S*this.sk.mult,b*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var E=this.r.getValueAtTime(u);p.rotate(-E*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var x=this.rz.getValueAtTime(u),k=this.ry.getValueAtTime(u),T=this.rx.getValueAtTime(u),j=this.or.getValueAtTime(u);p.rotateZ(-x*this.rz.mult).rotateY(k*this.ry.mult).rotateX(T*this.rx.mult).rotateZ(-j[2]*this.or.mult).rotateY(j[1]*this.or.mult).rotateX(j[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var A=this.px.getValueAtTime(u),C=this.py.getValueAtTime(u);if(this.data.p.z){var I=this.pz.getValueAtTime(u);p.translate(A*this.px.mult,C*this.py.mult,-I*this.pz.mult)}else p.translate(A*this.px.mult,C*this.py.mult,0)}else{var F=this.p.getValueAtTime(u);p.translate(F[0]*this.p.mult,F[1]*this.p.mult,-F[2]*this.p.mult)}return p}function a(){return this.v.clone(new Matrix)}var l=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(u,p,g){var y=l(u,p,g);return y.dynamicProperties.length?y.getValueAtTime=t.bind(y):y.getValueAtTime=a.bind(y),y.setGroupProperty=expressionHelpers.setGroupProperty,y};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(u,p,g,y,S){var b=o(u,p,g,y,S);b.kf?b.getValueAtTime=expressionHelpers.getValueAtTime.bind(b):b.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(b),b.setGroupProperty=expressionHelpers.setGroupProperty,b.loopOut=s,b.loopIn=r,b.smooth=n,b.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(b),b.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(b),b.numKeys=p.a===1?p.k.length:0,b.propertyIndex=p.ix;var E=0;return g!==0&&(E=createTypedArray("float32",p.a===1?p.k[0].s.length:p.k.length)),b._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:E},expressionHelpers.searchExpressions(u,p,b),b.k&&S.addDynamicProperty(b),b};function c(u){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),u*=this.elem.globalData.frameRate,u-=this.offsetTime,u!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<u?this._caching.lastIndex:0,this._cachingAtTime.lastTime=u,this.interpolateShape(u,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var i=ShapePropertyFactory.getConstructorFunction(),f=ShapePropertyFactory.getKeyframedConstructorFunction();function m(){}m.prototype={vertices:function(p,g){this.k&&this.getValue();var y=this.v;g!==void 0&&(y=this.getValueAtTime(g,0));var S,b=y._length,E=y[p],x=y.v,k=createSizedArray(b);for(S=0;S<b;S+=1)p==="i"||p==="o"?k[S]=[E[S][0]-x[S][0],E[S][1]-x[S][1]]:k[S]=[E[S][0],E[S][1]];return k},points:function(p){return this.vertices("v",p)},inTangents:function(p){return this.vertices("i",p)},outTangents:function(p){return this.vertices("o",p)},isClosed:function(){return this.v.c},pointOnPath:function(p,g){var y=this.v;g!==void 0&&(y=this.getValueAtTime(g,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(y));for(var S=this._segmentsLength,b=S.lengths,E=S.totalLength*p,x=0,k=b.length,T=0,j;x<k;){if(T+b[x].addedLength>E){var A=x,C=y.c&&x===k-1?0:x+1,I=(E-T)/b[x].addedLength;j=bez.getPointInSegment(y.v[A],y.v[C],y.o[A],y.i[C],I,b[x]);break}else T+=b[x].addedLength;x+=1}return j||(j=y.c?[y.v[0][0],y.v[0][1]]:[y.v[y._length-1][0],y.v[y._length-1][1]]),j},vectorOnPath:function(p,g,y){p==1?p=this.v.c:p==0&&(p=.999);var S=this.pointOnPath(p,g),b=this.pointOnPath(p+.001,g),E=b[0]-S[0],x=b[1]-S[1],k=Math.sqrt(Math.pow(E,2)+Math.pow(x,2));if(k===0)return[0,0];var T=y==="tangent"?[E/k,x/k]:[-x/k,E/k];return T},tangentOnPath:function(p,g){return this.vectorOnPath(p,g,"tangent")},normalOnPath:function(p,g){return this.vectorOnPath(p,g,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([m],i),extendPrototype([m],f),f.prototype.getValueAtTime=c,f.prototype.initiateExpression=ExpressionManager.initiateExpression;var _=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(u,p,g,y,S){var b=_(u,p,g,y,S);return b.propertyIndex=p.ix,b.lock=!1,g===3?expressionHelpers.searchExpressions(u,p.pt,b):g===4&&expressionHelpers.searchExpressions(u,p.ks,b),b.k&&u.addDynamicProperty(b),b}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function s(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(r,n){var t=this.calculateExpression(n);if(r.t!==t){var a={};return this.copyData(a,r),a.t=t.toString(),a.__complete=!1,a}return r},TextProperty.prototype.searchProperty=function(){var r=this.searchKeyframes(),n=this.searchExpressions();return this.kf=r||n,this.kf},TextProperty.prototype.searchExpressions=s}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function s(r,n){var t=createNS("feMerge");t.setAttribute("result",r);var a,l;for(l=0;l<n.length;l+=1)a=createNS("feMergeNode"),a.setAttribute("in",n[l]),t.appendChild(a),t.appendChild(a);return t}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(s,r,n,t,a){this.filterManager=r;var l=createNS("feColorMatrix");l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","linearRGB"),l.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=l,l.setAttribute("result",t+"_tint_1"),s.appendChild(l),l=createNS("feColorMatrix"),l.setAttribute("type","matrix"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),l.setAttribute("result",t+"_tint_2"),s.appendChild(l),this.matrixFilter=l;var o=this.createMergeNode(t,[a,t+"_tint_1",t+"_tint_2"]);s.appendChild(o)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,t=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+t+" 0"),this.matrixFilter.setAttribute("values",n[0]-r[0]+" 0 0 0 "+r[0]+" "+(n[1]-r[1])+" 0 0 0 "+r[1]+" "+(n[2]-r[2])+" 0 0 0 "+r[2]+" 0 0 0 1 0")}};function SVGFillFilter(s,r,n,t){this.filterManager=r;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",t),s.appendChild(a),this.matrixFilter=a}SVGFillFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+r[0]+" 0 0 0 0 "+r[1]+" 0 0 0 0 "+r[2]+" 0 0 0 "+n+" 0")}};function SVGStrokeEffect(s,r,n){this.initialized=!1,this.filterManager=r,this.elem=n,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var s=this.elem.layerElement.children||this.elem.layerElement.childNodes,r,n,t,a;for(this.filterManager.effectElements[1].p.v===1?(a=this.elem.maskManager.masksProperties.length,t=0):(t=this.filterManager.effectElements[0].p.v-1,a=t+1),n=createNS("g"),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-dashoffset",1),t;t<a;t+=1)r=createNS("path"),n.appendChild(r),this.paths.push({p:r,m:t});if(this.filterManager.effectElements[10].p.v===3){var l=createNS("mask"),o=createElementID();l.setAttribute("id",o),l.setAttribute("mask-type","alpha"),l.appendChild(n),this.elem.globalData.defs.appendChild(l);var c=createNS("g");for(c.setAttribute("mask","url("+getLocationHref()+"#"+o+")");s[0];)c.appendChild(s[0]);this.elem.layerElement.appendChild(c),this.masker=l,n.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(s=this.elem.layerElement.children||this.elem.layerElement.childNodes;s.length;)this.elem.layerElement.removeChild(s[0]);this.elem.layerElement.appendChild(n),this.elem.layerElement.removeAttribute("mask"),n.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=n},SVGStrokeEffect.prototype.renderFrame=function(s){this.initialized||this.initialize();var r,n=this.paths.length,t,a;for(r=0;r<n;r+=1)if(this.paths[r].m!==-1&&(t=this.elem.maskManager.viewData[this.paths[r].m],a=this.paths[r].p,(s||this.filterManager._mdf||t.prop._mdf)&&a.setAttribute("d",t.lastPath),s||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||t.prop._mdf)){var l;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,c=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,i=a.getTotalLength();l="0 0 0 "+i*o+" ";var f=i*(c-o),m=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,_=Math.floor(f/m),u;for(u=0;u<_;u+=1)l+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";l+="0 "+i*10+" 0 0"}else l="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;a.setAttribute("stroke-dasharray",l)}if((s||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(s||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(s||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(p[0]*255)+","+bmFloor(p[1]*255)+","+bmFloor(p[2]*255)+")")}};function SVGTritoneFilter(s,r,n,t){this.filterManager=r;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),s.appendChild(a);var l=createNS("feComponentTransfer");l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",t),this.matrixFilter=l;var o=createNS("feFuncR");o.setAttribute("type","table"),l.appendChild(o),this.feFuncR=o;var c=createNS("feFuncG");c.setAttribute("type","table"),l.appendChild(c),this.feFuncG=c;var i=createNS("feFuncB");i.setAttribute("type","table"),l.appendChild(i),this.feFuncB=i,s.appendChild(l)}SVGTritoneFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,t=this.filterManager.effectElements[2].p.v,a=t[0]+" "+n[0]+" "+r[0],l=t[1]+" "+n[1]+" "+r[1],o=t[2]+" "+n[2]+" "+r[2];this.feFuncR.setAttribute("tableValues",a),this.feFuncG.setAttribute("tableValues",l),this.feFuncB.setAttribute("tableValues",o)}};function SVGProLevelsFilter(s,r,n,t){this.filterManager=r;var a=this.filterManager.effectElements,l=createNS("feComponentTransfer");(a[10].p.k||a[10].p.v!==0||a[11].p.k||a[11].p.v!==1||a[12].p.k||a[12].p.v!==1||a[13].p.k||a[13].p.v!==0||a[14].p.k||a[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",l)),(a[17].p.k||a[17].p.v!==0||a[18].p.k||a[18].p.v!==1||a[19].p.k||a[19].p.v!==1||a[20].p.k||a[20].p.v!==0||a[21].p.k||a[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",l)),(a[24].p.k||a[24].p.v!==0||a[25].p.k||a[25].p.v!==1||a[26].p.k||a[26].p.v!==1||a[27].p.k||a[27].p.v!==0||a[28].p.k||a[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",l)),(a[31].p.k||a[31].p.v!==0||a[32].p.k||a[32].p.v!==1||a[33].p.k||a[33].p.v!==1||a[34].p.k||a[34].p.v!==0||a[35].p.k||a[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",l)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(l.setAttribute("color-interpolation-filters","sRGB"),s.appendChild(l)),(a[3].p.k||a[3].p.v!==0||a[4].p.k||a[4].p.v!==1||a[5].p.k||a[5].p.v!==1||a[6].p.k||a[6].p.v!==0||a[7].p.k||a[7].p.v!==1)&&(l=createNS("feComponentTransfer"),l.setAttribute("color-interpolation-filters","sRGB"),l.setAttribute("result",t),s.appendChild(l),this.feFuncRComposed=this.createFeFunc("feFuncR",l),this.feFuncGComposed=this.createFeFunc("feFuncG",l),this.feFuncBComposed=this.createFeFunc("feFuncB",l))}SVGProLevelsFilter.prototype.createFeFunc=function(s,r){var n=createNS(s);return n.setAttribute("type","table"),r.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(s,r,n,t,a){for(var l=0,o=256,c,i=Math.min(s,r),f=Math.max(s,r),m=Array.call(null,{length:o}),_,u=0,p=a-t,g=r-s;l<=256;)c=l/256,c<=i?_=g<0?a:t:c>=f?_=g<0?t:a:_=t+p*Math.pow((c-s)/g,1/n),m[u]=_,u+=1,l+=256/(o-1);return m.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r,n=this.filterManager.effectElements;this.feFuncRComposed&&(s||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(r=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",r),this.feFuncGComposed.setAttribute("tableValues",r),this.feFuncBComposed.setAttribute("tableValues",r)),this.feFuncR&&(s||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(r=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",r)),this.feFuncG&&(s||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(r=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",r)),this.feFuncB&&(s||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(r=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",r)),this.feFuncA&&(s||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(r=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",r))}};function SVGDropShadowEffect(s,r,n,t,a){var l=r.container.globalData.renderConfig.filterSize,o=r.data.fs||l;s.setAttribute("x",o.x||l.x),s.setAttribute("y",o.y||l.y),s.setAttribute("width",o.width||l.width),s.setAttribute("height",o.height||l.height),this.filterManager=r;var c=createNS("feGaussianBlur");c.setAttribute("in","SourceAlpha"),c.setAttribute("result",t+"_drop_shadow_1"),c.setAttribute("stdDeviation","0"),this.feGaussianBlur=c,s.appendChild(c);var i=createNS("feOffset");i.setAttribute("dx","25"),i.setAttribute("dy","0"),i.setAttribute("in",t+"_drop_shadow_1"),i.setAttribute("result",t+"_drop_shadow_2"),this.feOffset=i,s.appendChild(i);var f=createNS("feFlood");f.setAttribute("flood-color","#00ff00"),f.setAttribute("flood-opacity","1"),f.setAttribute("result",t+"_drop_shadow_3"),this.feFlood=f,s.appendChild(f);var m=createNS("feComposite");m.setAttribute("in",t+"_drop_shadow_3"),m.setAttribute("in2",t+"_drop_shadow_2"),m.setAttribute("operator","in"),m.setAttribute("result",t+"_drop_shadow_4"),s.appendChild(m);var _=this.createMergeNode(t,[t+"_drop_shadow_4",a]);s.appendChild(_)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){if((s||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),s||this.filterManager.effectElements[0].p._mdf){var r=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)))}if((s||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),s||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,t=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=n*Math.cos(t),l=n*Math.sin(t);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",l)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(s,r,n){this.initialized=!1,this.filterManager=r,this.filterElem=s,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}SVGMatte3Effect.prototype.findSymbol=function(s){for(var r=0,n=_svgMatteSymbols.length;r<n;){if(_svgMatteSymbols[r]===s)return _svgMatteSymbols[r];r+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(s,r){var n=s.layerElement.parentNode;if(n){for(var t=n.children,a=0,l=t.length;a<l&&t[a]!==s.layerElement;)a+=1;var o;a<=l-2&&(o=t[a+1]);var c=createNS("use");c.setAttribute("href","#"+r),o?n.insertBefore(c,o):n.appendChild(c)}},SVGMatte3Effect.prototype.setElementAsMask=function(s,r){if(!this.findSymbol(r)){var n=createElementID(),t=createNS("mask");t.setAttribute("id",r.layerId),t.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(r);var a=s.globalData.defs;a.appendChild(t);var l=createNS("symbol");l.setAttribute("id",n),this.replaceInParent(r,n),l.appendChild(r.layerElement),a.appendChild(l);var o=createNS("use");o.setAttribute("href","#"+n),t.appendChild(o),r.data.hd=!1,r.show()}s.setMatte(r.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var s=this.filterManager.effectElements[0].p.v,r=this.elem.comp.elements,n=0,t=r.length;n<t;)r[n]&&r[n].data.ind===s&&this.setElementAsMask(this.elem,r[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(s,r,n,t){s.setAttribute("x","-100%"),s.setAttribute("y","-100%"),s.setAttribute("width","300%"),s.setAttribute("height","300%"),this.filterManager=r;var a=createNS("feGaussianBlur");a.setAttribute("result",t),s.appendChild(a),this.feGaussianBlur=a}SVGGaussianBlurEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var r=.3,n=this.filterManager.effectElements[0].p.v*r,t=this.filterManager.effectElements[1].p.v,a=t==3?0:n,l=t==2?0:n;this.feGaussianBlur.setAttribute("stdDeviation",a+" "+l);var o=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}};function TransformEffect(){}TransformEffect.prototype.init=function(s){this.effectsManager=s,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(s){if(this._opMdf=!1,this._mdf=!1,s||this.effectsManager._mdf){var r=this.effectsManager.effectElements,n=r[0].p.v,t=r[1].p.v,a=r[2].p.v===1,l=r[3].p.v,o=a?l:r[4].p.v,c=r[5].p.v,i=r[6].p.v,f=r[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(o*.01,l*.01,1),this.matrix.rotate(-f*degToRads),this.matrix.skewFromAxis(-c*degToRads,(i+90)*degToRads),this.matrix.translate(t[0],t[1],0),this._mdf=!0,this.opacity!==r[8].p.v&&(this.opacity=r[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(s,r){this.init(r)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(s){this.init(s)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports),ColorPicker_svelte_svelte_type_style_lang="";function create_fragment$j(s){let r,n,t,a,l,o,c,i,f,m,_,u,p,g,y,S,b,E,x,k,T,j,A,C,I,F,N,z,R,q,M,D,X;return{c(){r=element("div"),n=element("div"),t=element("div"),a=element("strong"),l=text("Red"),o=space(),c=element("input"),i=space(),f=element("input"),m=space(),_=element("div"),u=element("strong"),p=text("Green"),g=space(),y=element("input"),S=space(),b=element("input"),E=space(),x=element("div"),k=element("strong"),T=text("Blue"),j=space(),A=element("input"),C=space(),I=element("input"),F=space(),N=element("div"),z=element("div"),R=space(),q=element("div"),M=element("input"),this.h()},l(O){r=claim_element(O,"DIV",{class:!0});var G=children(r);n=claim_element(G,"DIV",{class:!0});var K=children(n);t=claim_element(K,"DIV",{class:!0});var Z=children(t);a=claim_element(Z,"STRONG",{class:!0});var U=children(a);l=claim_text(U,"Red"),U.forEach(detach),o=claim_space(Z),c=claim_element(Z,"INPUT",{type:!0,min:!0,max:!0,class:!0}),i=claim_space(Z),f=claim_element(Z,"INPUT",{class:!0,type:!0}),Z.forEach(detach),m=claim_space(K),_=claim_element(K,"DIV",{class:!0});var V=children(_);u=claim_element(V,"STRONG",{class:!0});var L=children(u);p=claim_text(L,"Green"),L.forEach(detach),g=claim_space(V),y=claim_element(V,"INPUT",{type:!0,min:!0,max:!0,class:!0}),S=claim_space(V),b=claim_element(V,"INPUT",{class:!0,type:!0}),V.forEach(detach),E=claim_space(K),x=claim_element(K,"DIV",{class:!0});var H=children(x);k=claim_element(H,"STRONG",{class:!0});var J=children(k);T=claim_text(J,"Blue"),J.forEach(detach),j=claim_space(H),A=claim_element(H,"INPUT",{type:!0,min:!0,max:!0,class:!0}),C=claim_space(H),I=claim_element(H,"INPUT",{class:!0,type:!0}),H.forEach(detach),K.forEach(detach),F=claim_space(G),N=claim_element(G,"DIV",{class:!0});var ne=children(N);z=claim_element(ne,"DIV",{class:!0,style:!0}),children(z).forEach(detach),R=claim_space(ne),q=claim_element(ne,"DIV",{});var se=children(q);M=claim_element(se,"INPUT",{class:!0,type:!0}),se.forEach(detach),ne.forEach(detach),G.forEach(detach),this.h()},h(){attr(a,"class","svelte-potnje"),attr(c,"type","range"),attr(c,"min","0"),attr(c,"max","255"),attr(c,"class","svelte-potnje"),attr(f,"class","text-input svelte-potnje"),attr(f,"type","number"),attr(t,"class","color-component svelte-potnje"),attr(u,"class","svelte-potnje"),attr(y,"type","range"),attr(y,"min","0"),attr(y,"max","255"),attr(y,"class","svelte-potnje"),attr(b,"class","text-input svelte-potnje"),attr(b,"type","number"),attr(_,"class","color-component svelte-potnje"),attr(k,"class","svelte-potnje"),attr(A,"type","range"),attr(A,"min","0"),attr(A,"max","255"),attr(A,"class","svelte-potnje"),attr(I,"class","text-input svelte-potnje"),attr(I,"type","number"),attr(x,"class","color-component svelte-potnje"),attr(n,"class","color-selectors svelte-potnje"),attr(z,"class","preview svelte-potnje"),set_style(z,"background",s[4]),attr(M,"class","text-input svelte-potnje"),attr(M,"type","text"),M.value=s[3],attr(N,"class","color-preview svelte-potnje"),attr(r,"class","color-picker svelte-potnje")},m(O,G){insert_hydration(O,r,G),append_hydration(r,n),append_hydration(n,t),append_hydration(t,a),append_hydration(a,l),append_hydration(t,o),append_hydration(t,c),set_input_value(c,s[0]),append_hydration(t,i),append_hydration(t,f),set_input_value(f,s[0]),append_hydration(n,m),append_hydration(n,_),append_hydration(_,u),append_hydration(u,p),append_hydration(_,g),append_hydration(_,y),set_input_value(y,s[1]),append_hydration(_,S),append_hydration(_,b),set_input_value(b,s[1]),append_hydration(n,E),append_hydration(n,x),append_hydration(x,k),append_hydration(k,T),append_hydration(x,j),append_hydration(x,A),set_input_value(A,s[2]),append_hydration(x,C),append_hydration(x,I),set_input_value(I,s[2]),append_hydration(r,F),append_hydration(r,N),append_hydration(N,z),append_hydration(N,R),append_hydration(N,q),append_hydration(q,M),D||(X=[listen$1(c,"change",s[7]),listen$1(c,"input",s[7]),listen$1(f,"input",s[8]),listen$1(y,"change",s[9]),listen$1(y,"input",s[9]),listen$1(b,"input",s[10]),listen$1(A,"change",s[11]),listen$1(A,"input",s[11]),listen$1(I,"input",s[12]),listen$1(M,"change",s[13])],D=!0)},p(O,[G]){G&1&&set_input_value(c,O[0]),G&1&&to_number(f.value)!==O[0]&&set_input_value(f,O[0]),G&2&&set_input_value(y,O[1]),G&2&&to_number(b.value)!==O[1]&&set_input_value(b,O[1]),G&4&&set_input_value(A,O[2]),G&4&&to_number(I.value)!==O[2]&&set_input_value(I,O[2]),G&16&&set_style(z,"background",O[4]),G&8&&M.value!==O[3]&&(M.value=O[3])},i:noop,o:noop,d(O){O&&detach(r),D=!1,run_all(X)}}}function instance$h(s,r,n){let t;const a=createEventDispatcher();let{color:l}=r,o=0,c=0,i=0,f=null;const m=E=>{if(typeof E!="string")return;let x=[];E[0]==="#"?x=E.length===4?[E.slice(1,2),E.slice(2,3),E.slice(3,4)].map(k=>parseInt(`${k}${k}`,16)):[E.slice(1,3),E.slice(3,5),E.slice(5,7)].map(k=>parseInt(k,16)):E.startsWith("rgb")&&(x=E.match(/\d+/g).map(k=>parseInt(k))),x.length&&(n(0,o=x[0]),n(1,c=x[1]),n(2,i=x[2]))};function _(){o=to_number(this.value),n(0,o)}function u(){o=to_number(this.value),n(0,o)}function p(){c=to_number(this.value),n(1,c)}function g(){c=to_number(this.value),n(1,c)}function y(){i=to_number(this.value),n(2,i)}function S(){i=to_number(this.value),n(2,i)}const b=E=>m(E.target.value);return s.$$set=E=>{"color"in E&&n(6,l=E.color)},s.$$.update=()=>{s.$$.dirty&64&&m(l),s.$$.dirty&7&&n(3,f="#"+(o|256).toString(16).slice(1)+(c|256).toString(16).slice(1)+(i|256).toString(16).slice(1)),s.$$.dirty&7&&n(4,t=`rgb(${o}, ${c}, ${i})`),s.$$.dirty&24&&a("color",{hex:f,rgb:t})},[o,c,i,f,t,m,l,_,u,p,g,y,S,b]}class ColorPicker extends SvelteComponent{constructor(r){super(),init(this,r,instance$h,create_fragment$j,safe_not_equal,{color:6})}}const Info_svelte_svelte_type_style_lang="";function create_if_block_10$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Lottie Version"),a=space(),l=element("span"),o=text(s[9]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Lottie Version"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[9]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&512&&set_data(o,c[9])},d(c){c&&detach(r)}}}function create_if_block_9$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Frames"),a=space(),l=element("span"),o=text(s[6]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Frames"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[6]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&64&&set_data(o,c[6])},d(c){c&&detach(r)}}}function create_if_block_8$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Frame Rate"),a=space(),l=element("span"),o=text(s[1]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Frame Rate"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[1]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&2&&set_data(o,c[1])},d(c){c&&detach(r)}}}function create_if_block_7$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Layers"),a=space(),l=element("span"),o=text(s[7]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Layers"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[7]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&128&&set_data(o,c[7])},d(c){c&&detach(r)}}}function create_if_block_6$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Assets"),a=space(),l=element("span"),o=text(s[4]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Assets"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[4]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&16&&set_data(o,c[4])},d(c){c&&detach(r)}}}function create_if_block_5$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Fonts"),a=space(),l=element("span"),o=text(s[5]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Fonts"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[5]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&32&&set_data(o,c[5])},d(c){c&&detach(r)}}}function create_if_block$a(s){let r,n,t,a,l,o,c=s[2]&&create_if_block_4$1(s),i=s[0]&&create_if_block_3$2(s),f=s[3]&&create_if_block_2$5(s),m=s[8]&&create_if_block_1$7(s);return{c(){r=element("hr"),n=space(),c&&c.c(),t=space(),i&&i.c(),a=space(),f&&f.c(),l=space(),m&&m.c(),o=empty()},l(_){r=claim_element(_,"HR",{}),n=claim_space(_),c&&c.l(_),t=claim_space(_),i&&i.l(_),a=claim_space(_),f&&f.l(_),l=claim_space(_),m&&m.l(_),o=empty()},m(_,u){insert_hydration(_,r,u),insert_hydration(_,n,u),c&&c.m(_,u),insert_hydration(_,t,u),i&&i.m(_,u),insert_hydration(_,a,u),f&&f.m(_,u),insert_hydration(_,l,u),m&&m.m(_,u),insert_hydration(_,o,u)},p(_,u){_[2]?c?c.p(_,u):(c=create_if_block_4$1(_),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),_[0]?i?i.p(_,u):(i=create_if_block_3$2(_),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null),_[3]?f?f.p(_,u):(f=create_if_block_2$5(_),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),_[8]?m?m.p(_,u):(m=create_if_block_1$7(_),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null)},d(_){_&&detach(r),_&&detach(n),c&&c.d(_),_&&detach(t),i&&i.d(_),_&&detach(a),f&&f.d(_),_&&detach(l),m&&m.d(_),_&&detach(o)}}}function create_if_block_4$1(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Generator"),a=space(),l=element("span"),o=text(s[2]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Generator"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[2]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&4&&set_data(o,c[2])},d(c){c&&detach(r)}}}function create_if_block_3$2(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Author"),a=space(),l=element("span"),o=text(s[0]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Author"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[0]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&1&&set_data(o,c[0])},d(c){c&&detach(r)}}}function create_if_block_2$5(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Keywords"),a=space(),l=element("span"),o=text(s[3]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Keywords"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[3]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&8&&set_data(o,c[3])},d(c){c&&detach(r)}}}function create_if_block_1$7(s){let r,n,t,a,l,o;return{c(){r=element("div"),n=element("span"),t=text("Theme Color"),a=space(),l=element("span"),o=text(s[8]),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);n=claim_element(i,"SPAN",{class:!0});var f=children(n);t=claim_text(f,"Theme Color"),f.forEach(detach),a=claim_space(i),l=claim_element(i,"SPAN",{class:!0});var m=children(l);o=claim_text(m,s[8]),m.forEach(detach),i.forEach(detach),this.h()},h(){attr(n,"class","label svelte-54ndm9"),attr(l,"class","value svelte-54ndm9"),attr(r,"class","property svelte-54ndm9")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),append_hydration(r,l),append_hydration(l,o)},p(c,i){i&256&&set_data(o,c[8])},d(c){c&&detach(r)}}}function create_fragment$i(s){let r,n,t,a,l,o,c,i,f,m,_=s[9]&&create_if_block_10$1(s),u=s[6]&&create_if_block_9$1(s),p=s[1]&&create_if_block_8$1(s),g=s[7]&&create_if_block_7$1(s),y=s[4]&&create_if_block_6$1(s),S=s[5]&&create_if_block_5$1(s),b=s[10]&&create_if_block$a(s);return{c(){r=element("h4"),n=text("Info"),t=space(),_&&_.c(),a=space(),u&&u.c(),l=space(),p&&p.c(),o=space(),g&&g.c(),c=space(),y&&y.c(),i=space(),S&&S.c(),f=space(),b&&b.c(),m=empty(),this.h()},l(E){r=claim_element(E,"H4",{class:!0});var x=children(r);n=claim_text(x,"Info"),x.forEach(detach),t=claim_space(E),_&&_.l(E),a=claim_space(E),u&&u.l(E),l=claim_space(E),p&&p.l(E),o=claim_space(E),g&&g.l(E),c=claim_space(E),y&&y.l(E),i=claim_space(E),S&&S.l(E),f=claim_space(E),b&&b.l(E),m=empty(),this.h()},h(){attr(r,"class","svelte-54ndm9")},m(E,x){insert_hydration(E,r,x),append_hydration(r,n),insert_hydration(E,t,x),_&&_.m(E,x),insert_hydration(E,a,x),u&&u.m(E,x),insert_hydration(E,l,x),p&&p.m(E,x),insert_hydration(E,o,x),g&&g.m(E,x),insert_hydration(E,c,x),y&&y.m(E,x),insert_hydration(E,i,x),S&&S.m(E,x),insert_hydration(E,f,x),b&&b.m(E,x),insert_hydration(E,m,x)},p(E,[x]){E[9]?_?_.p(E,x):(_=create_if_block_10$1(E),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null),E[6]?u?u.p(E,x):(u=create_if_block_9$1(E),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),E[1]?p?p.p(E,x):(p=create_if_block_8$1(E),p.c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null),E[7]?g?g.p(E,x):(g=create_if_block_7$1(E),g.c(),g.m(c.parentNode,c)):g&&(g.d(1),g=null),E[4]?y?y.p(E,x):(y=create_if_block_6$1(E),y.c(),y.m(i.parentNode,i)):y&&(y.d(1),y=null),E[5]?S?S.p(E,x):(S=create_if_block_5$1(E),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null),E[10]?b?b.p(E,x):(b=create_if_block$a(E),b.c(),b.m(m.parentNode,m)):b&&(b.d(1),b=null)},i:noop,o:noop,d(E){E&&detach(r),E&&detach(t),_&&_.d(E),E&&detach(a),u&&u.d(E),E&&detach(l),p&&p.d(E),E&&detach(o),g&&g.d(E),E&&detach(c),y&&y.d(E),E&&detach(i),S&&S.d(E),E&&detach(f),b&&b.d(E),E&&detach(m)}}}function instance$g(s,r,n){let{animationData:t}=r,a,l,o,c,i,f,m,_,u,p,g=!1;return s.$$set=y=>{"animationData"in y&&n(11,t=y.animationData)},s.$$.update=()=>{s.$$.dirty&2048&&t&&(n(1,l=t.fr),n(4,i=t.assets?t.assets.length:0),n(5,f=t.fonts?t.fonts.length:0),n(6,m=t.op-t.ip),n(7,_=t.layers?t.layers.length:0),n(9,p=t.v),t.meta&&(n(10,g=!0),n(0,a=t.meta.a),n(2,o=t.meta.g),n(3,c=t.meta.k),n(8,u=t.meta.tc)))},[a,l,o,c,i,f,m,_,u,p,g,t]}class Info extends SvelteComponent{constructor(r){super(),init(this,r,instance$g,create_fragment$i,safe_not_equal,{animationData:11})}}const Popover_svelte_svelte_type_style_lang="",get_content_slot_changes=s=>({}),get_content_slot_context=s=>({}),get_target_slot_changes=s=>({}),get_target_slot_context=s=>({});function create_fragment$h(s){let r,n,t,a,l,o,c,i,f;const m=s[8].target,_=create_slot(m,s,s[7],get_target_slot_context),u=s[8].content,p=create_slot(u,s,s[7],get_content_slot_context);return{c(){r=element("div"),n=element("div"),_&&_.c(),t=space(),a=element("div"),p&&p.c(),l=space(),o=element("div"),this.h()},l(g){r=claim_element(g,"DIV",{class:!0});var y=children(r);n=claim_element(y,"DIV",{});var S=children(n);_&&_.l(S),S.forEach(detach),t=claim_space(y),a=claim_element(y,"DIV",{class:!0});var b=children(a);p&&p.l(b),l=claim_space(b),o=claim_element(b,"DIV",{class:!0,style:!0}),children(o).forEach(detach),b.forEach(detach),y.forEach(detach),this.h()},h(){attr(o,"class","arrow svelte-1i83hqr"),set_style(o,"border-color",s[0]+" transparent transparent transparent"),attr(a,"class","popover-content svelte-1i83hqr"),toggle_class(a,"hidden",!s[4]),toggle_class(a,"left-align",s[3]!==-1),toggle_class(a,"right-align",s[3]===-1),attr(r,"class","popover svelte-1i83hqr")},m(g,y){insert_hydration(g,r,y),append_hydration(r,n),_&&_.m(n,null),s[12](n),append_hydration(r,t),append_hydration(r,a),p&&p.m(a,null),append_hydration(a,l),append_hydration(a,o),s[13](a),c=!0,i||(f=[listen$1(r,"mousedown",s[9]),listen$1(r,"mouseover",s[5]),listen$1(r,"mouseout",s[6]),listen$1(r,"mouseup",s[10]),listen$1(r,"mousewheel",s[11])],i=!0)},p(g,[y]){_&&_.p&&(!c||y&128)&&update_slot_base(_,m,g,g[7],c?get_slot_changes(m,g[7],y,get_target_slot_changes):get_all_dirty_from_scope(g[7]),get_target_slot_context),p&&p.p&&(!c||y&128)&&update_slot_base(p,u,g,g[7],c?get_slot_changes(u,g[7],y,get_content_slot_changes):get_all_dirty_from_scope(g[7]),get_content_slot_context),(!c||y&1)&&set_style(o,"border-color",g[0]+" transparent transparent transparent"),(!c||y&16)&&toggle_class(a,"hidden",!g[4]),(!c||y&8)&&toggle_class(a,"left-align",g[3]!==-1),(!c||y&8)&&toggle_class(a,"right-align",g[3]===-1)},i(g){c||(transition_in(_,g),transition_in(p,g),c=!0)},o(g){transition_out(_,g),transition_out(p,g),c=!1},d(g){g&&detach(r),_&&_.d(g),s[12](null),p&&p.d(g),s[13](null),i=!1,run_all(f)}}}function instance$f(s,r,n){let{$$slots:t={},$$scope:a}=r,{color:l="transparent"}=r,o,c,i,f=!0;onMount(()=>{const b=o.getBoundingClientRect(),E=c.getBoundingClientRect();n(3,i=b.left+E.width>window.innerWidth?-1:0),n(2,c.style.bottom=b.height+"px",c),_()});const m=()=>{n(4,f=!0)},_=()=>{n(4,f=!1)};function u(b){bubble.call(this,s,b)}function p(b){bubble.call(this,s,b)}function g(b){bubble.call(this,s,b)}function y(b){binding_callbacks[b?"unshift":"push"](()=>{o=b,n(1,o)})}function S(b){binding_callbacks[b?"unshift":"push"](()=>{c=b,n(2,c)})}return s.$$set=b=>{"color"in b&&n(0,l=b.color),"$$scope"in b&&n(7,a=b.$$scope)},[l,o,c,i,f,m,_,a,t,u,p,g,y,S]}class Popover extends SvelteComponent{constructor(r){super(),init(this,r,instance$f,create_fragment$h,safe_not_equal,{color:0})}}const PlayerRender={SVG:"svg",Canvas:"canvas"},PlayerState={Loading:"loading",Playing:"playing",Paused:"paused",Stopped:"stopped",Frozen:"frozen",Error:"error"},PlayMode={Normal:"normal",Bounce:"bounce"},PlayerEvents={Load:"load",Error:"error",Ready:"ready",Play:"play",Pause:"pause",Stop:"stop",Freeze:"freeze",Loop:"loop",Complete:"complete",Frame:"frame"},ControlsLayoutOptions=["previousFrame","playpause","stop","nextFrame","progress","frame","loop","spacer","background","snapshot","info","zoom"],parseSrc=s=>{if(typeof s=="object")return s;try{return JSON.parse(s)}catch{return new URL(s,window.location.href).toString()}},triggerDownload=(s,r)=>{const n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n)},Controls_svelte_svelte_type_style_lang="";function get_each_context$4(s,r,n){const t=s.slice();return t[40]=r[n],t}function create_if_block_13(s){let r;return{c(){r=element("div"),this.h()},l(n){r=claim_element(n,"DIV",{class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"class","spacer svelte-y4y35s")},m(n,t){insert_hydration(n,r,t)},p:noop,i:noop,o:noop,d(n){n&&detach(r)}}}function create_if_block_12(s){let r,n,t,a,l,o,c,i=[s[19]],f={};for(let m=0;m<i.length;m+=1)f=assign(f,i[m]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("rect"),l=space(),this.h()},l(m){r=claim_element(m,"DIV",{class:!0});var _=children(r);n=claim_svg_element(_,"svg",{});var u=children(n);t=claim_svg_element(u,"path",{d:!0}),children(t).forEach(detach),a=claim_svg_element(u,"rect",{height:!0,rx:!0,transform:!0,width:!0}),children(a).forEach(detach),u.forEach(detach),l=claim_space(_),_.forEach(detach),this.h()},h(){attr(t,"d","M22 4.5a1.4 1.4 0 00-2.1-1.2l-13 7.5a1.4 1.4 0 000 2.4l13 7.5a1.4 1.4 0 002.1-1.2z"),attr(a,"height","17.1"),attr(a,"rx","1.4"),attr(a,"transform","matrix(-1 0 0 1 7.7 3.4)"),attr(a,"width","5.7"),set_svg_attributes(n,f),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s")},m(m,_){insert_hydration(m,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),o||(c=listen$1(r,"click",s[24]),o=!0)},p(m,_){toggle_class(n,"svelte-y4y35s",!0)},i:noop,o:noop,d(m){m&&detach(r),o=!1,c()}}}function create_if_block_11(s){let r,n,t,a,l,o,c,i=[s[19]],f={};for(let m=0;m<i.length;m+=1)f=assign(f,i[m]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("rect"),l=space(),this.h()},l(m){r=claim_element(m,"DIV",{class:!0});var _=children(r);n=claim_svg_element(_,"svg",{});var u=children(n);t=claim_svg_element(u,"path",{d:!0}),children(t).forEach(detach),a=claim_svg_element(u,"rect",{height:!0,rx:!0,transform:!0,width:!0}),children(a).forEach(detach),u.forEach(detach),l=claim_space(_),_.forEach(detach),this.h()},h(){attr(t,"d",`M2 19.513a1.429 1.429 0 0 0 2.148 1.234l12.88-7.513a1.429 1.429 0 0 0 0-2.468L4.147 3.253A1.429 1.429 0 0
            0 2 4.487z`),attr(a,"height","17.143"),attr(a,"rx","1.429"),attr(a,"transform","matrix(1 0 0 -1 16.286 20.571)"),attr(a,"width","5.714"),set_svg_attributes(n,f),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s")},m(m,_){insert_hydration(m,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),o||(c=listen$1(r,"click",s[23]),o=!0)},p(m,_){toggle_class(n,"svelte-y4y35s",!0)},i:noop,o:noop,d(m){m&&detach(r),o=!1,c()}}}function create_if_block_10(s){let r,n,t,a,l;return{c(){r=element("div"),n=element("input"),t=space(),this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);n=claim_element(c,"INPUT",{class:!0,type:!0}),t=claim_space(c),c.forEach(detach),this.h()},h(){attr(n,"class","frame-number svelte-y4y35s"),attr(n,"type","text"),attr(r,"class"," svelte-y4y35s")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),set_input_value(n,s[15]),append_hydration(r,t),a||(l=[listen$1(n,"input",s[34]),listen$1(n,"mouseout",s[35]),listen$1(n,"mouseover",s[36]),listen$1(n,"input",s[37]),listen$1(n,"mousewheel",s[38])],a=!0)},p(o,c){c[0]&32768&&n.value!==o[15]&&set_input_value(n,o[15])},i:noop,o:noop,d(o){o&&detach(r),a=!1,run_all(l)}}}function create_if_block_9(s){let r,n,t,a;return n=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot_2],target:[create_target_slot_2]},$$scope:{ctx:s}}}),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);claim_component(n.$$.fragment,o),t=claim_space(o),o.forEach(detach),this.h()},h(){attr(r,"class"," svelte-y4y35s")},m(l,o){insert_hydration(l,r,o),mount_component(n,r,null),append_hydration(r,t),a=!0},p(l,o){const c={};o[0]&2|o[1]&4096&&(c.$$scope={dirty:o,ctx:l}),n.$set(c)},i(l){a||(transition_in(n.$$.fragment,l),a=!0)},o(l){transition_out(n.$$.fragment,l),a=!1},d(l){l&&detach(r),destroy_component(n)}}}function create_if_block_7(s){let r,n,t,a;function l(i,f){return i[14]?create_if_block_8:create_else_block_1}let o=l(s),c=o(s);return{c(){r=element("div"),c.c(),n=space(),this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);c.l(f),n=claim_space(f),f.forEach(detach),this.h()},h(){attr(r,"class","btn svelte-y4y35s")},m(i,f){insert_hydration(i,r,f),c.m(r,null),append_hydration(r,n),t||(a=listen$1(r,"click",s[22]),t=!0)},p(i,f){o===(o=l(i))&&c?c.p(i,f):(c.d(1),c=o(i),c&&(c.c(),c.m(r,n)))},i:noop,o:noop,d(i){i&&detach(r),c.d(),t=!1,a()}}}function create_if_block_6(s){let r,n,t,a,l,o;return n=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot_1],target:[create_target_slot_1]},$$scope:{ctx:s}}}),n.$on("mousewheel",s[31]),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);claim_component(n.$$.fragment,i),t=claim_space(i),i.forEach(detach),this.h()},h(){attr(r,"class"," svelte-y4y35s")},m(c,i){insert_hydration(c,r,i),mount_component(n,r,null),append_hydration(r,t),a=!0,l||(o=[listen$1(r,"mouseout",s[32]),listen$1(r,"mouseover",s[33])],l=!0)},p(c,i){const f={};i[0]&33792|i[1]&4096&&(f.$$scope={dirty:i,ctx:c}),n.$set(f)},i(c){a||(transition_in(n.$$.fragment,c),a=!0)},o(c){transition_out(n.$$.fragment,c),a=!1},d(c){c&&detach(r),destroy_component(n),l=!1,run_all(o)}}}function create_if_block_5(s){let r,n,t,a;return n=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot],target:[create_target_slot]},$$scope:{ctx:s}}}),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);claim_component(n.$$.fragment,o),t=claim_space(o),o.forEach(detach),this.h()},h(){attr(r,"class"," svelte-y4y35s")},m(l,o){insert_hydration(l,r,o),mount_component(n,r,null),append_hydration(r,t),a=!0},p(l,o){const c={};o[0]&4|o[1]&4096&&(c.$$scope={dirty:o,ctx:l}),n.$set(c)},i(l){a||(transition_in(n.$$.fragment,l),a=!0)},o(l){transition_out(n.$$.fragment,l),a=!1},d(l){l&&detach(r),destroy_component(n)}}}function create_if_block_4(s){let r,n,t,a,l,o,c,i=[s[19]],f={};for(let m=0;m<i.length;m+=1)f=assign(f,i[m]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("path"),l=space(),this.h()},l(m){r=claim_element(m,"DIV",{class:!0});var _=children(r);n=claim_svg_element(_,"svg",{});var u=children(n);t=claim_svg_element(u,"path",{d:!0,stroke:!0,"stroke-width":!0}),children(t).forEach(detach),a=claim_svg_element(u,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),children(a).forEach(detach),u.forEach(detach),l=claim_space(_),_.forEach(detach),this.h()},h(){attr(t,"d",`M12.5 16.8137h-.13v1.8939h4.9696c3.6455 0 6.6113-2.9658 6.6113-6.6116
            0-3.64549-2.9658-6.61131-6.6113-6.61131-.5231 0-.947.42391-.947.94696 0 .52304.4239.94696.947.94696 2.6011 0
            4.7174 2.11634 4.7174 4.71739 0 2.6014-2.1166 4.7177-4.7174 4.7177H12.5zM13.6025
            5.61469v-.13H7.48137C3.83582 5.48469.87 8.45051.87 12.096c0 3.6509 3.17269 6.6117 6.81304 6.6117.52304 0
            .94696-.424.94696-.947 0-.5231-.42392-.947-.94696-.947-2.60804 0-4.91907-2.1231-4.91907-4.7176 0-2.60115
            2.11634-4.71744 4.7174-4.71744h6.12113V5.61469z`),attr(t,"stroke","#8795A1"),attr(t,"stroke-width",".26"),attr(a,"d",`M11.1482
            2.20355h0l-.001-.00116c-.3412-.40061-.9405-.44558-1.33668-.0996h-.00001c-.39526.34519-.43936.94795-.09898
            1.34767l2.51487 3.03683-2.51894 3.06468c-.33872.40088-.29282 1.00363.10347
            1.34723l.08517-.0982-.08517.0982c.17853.1549.39807.2308.61647.2308.2671 0 .5328-.114.72-.3347h0l.0011-.0014
            3.0435-3.68655.0006-.00068c.3035-.35872.3025-.88754-.0019-1.24526l-3.0425-3.65786zM13.9453
            21.7965h0l.001.0011c.3413.4006.9407.4456 1.337.0996h0c.3953-.3452.4395-.9479.099-1.3477l-2.5154-3.0368
            2.5195-3.0647c.3388-.4008.2929-1.0036-.1035-1.3472l-.0852.0982.0852-.0982c-.1786-.1549-.3981-.2308-.6166-.2308-.2671
            0-.5329.114-.7202.3347h0l-.0011.0014-3.0442
            3.6865c-.0001.0003-.0003.0005-.0005.0007-.3036.3587-.3027.8876.0019 1.2453l3.0431 3.6579z`),attr(a,"fill","#8795A1"),attr(a,"stroke","#8795A1"),attr(a,"stroke-width",".26"),set_svg_attributes(n,f),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),toggle_class(r,"active",s[7])},m(m,_){insert_hydration(m,r,_),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),o||(c=listen$1(r,"click",function(){is_function(s[12])&&s[12].apply(this,arguments)}),o=!0)},p(m,_){s=m,toggle_class(n,"svelte-y4y35s",!0),_[0]&128&&toggle_class(r,"active",s[7])},i:noop,o:noop,d(m){m&&detach(r),o=!1,c()}}}function create_if_block_3$1(s){let r,n,t,a;return{c(){r=element("input"),this.h()},l(l){r=claim_element(l,"INPUT",{class:!0,type:!0,min:!0,step:!0,max:!0,style:!0}),this.h()},h(){attr(r,"class","progress svelte-y4y35s"),attr(r,"type","range"),attr(r,"min","0"),attr(r,"step","1"),attr(r,"max","100"),attr(r,"style",n=`
          background-image: -webkit-gradient(linear, left top, right top, color-stop(${s[0]}%, rgba(15, 204, 206, 0.4)), color-stop(${s[0]}%, #DAE1E7));
          background-image: -moz-linear-gradient(left center, rgba(15, 204, 206, 0.4) 0%, rgba(15, 204, 206, 0.4) ${s[0]}%, #DAE1E7 ${s[0]}%, #DAE1E7 100%);
        `)},m(l,o){insert_hydration(l,r,o),set_input_value(r,s[0]),t||(a=[listen$1(r,"change",s[28]),listen$1(r,"input",s[28]),listen$1(r,"input",s[20]),listen$1(r,"mousedown",function(){is_function(s[5])&&s[5].apply(this,arguments)}),listen$1(r,"mouseup",function(){is_function(s[8])&&s[8].apply(this,arguments)})],t=!0)},p(l,o){s=l,o[0]&1&&n!==(n=`
          background-image: -webkit-gradient(linear, left top, right top, color-stop(${s[0]}%, rgba(15, 204, 206, 0.4)), color-stop(${s[0]}%, #DAE1E7));
          background-image: -moz-linear-gradient(left center, rgba(15, 204, 206, 0.4) 0%, rgba(15, 204, 206, 0.4) ${s[0]}%, #DAE1E7 ${s[0]}%, #DAE1E7 100%);
        `)&&attr(r,"style",n),o[0]&1&&set_input_value(r,s[0])},i:noop,o:noop,d(l){l&&detach(r),t=!1,run_all(a)}}}function create_if_block_2$4(s){let r,n,t,a,l,o,c=[s[19]],i={};for(let f=0;f<c.length;f+=1)i=assign(i,c[f]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=space(),this.h()},l(f){r=claim_element(f,"DIV",{class:!0});var m=children(r);n=claim_svg_element(m,"svg",{});var _=children(n);t=claim_svg_element(_,"path",{d:!0}),children(t).forEach(detach),_.forEach(detach),a=claim_space(m),m.forEach(detach),this.h()},h(){attr(t,"d",`M2 3.667A1.67 1.67 0 0 1 3.667 2h16.666A1.67 1.67 0 0 1 22 3.667v16.666A1.67 1.67 0 0 1 20.333
            22H3.667A1.67 1.67 0 0 1 2 20.333z`),set_svg_attributes(n,i),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),toggle_class(r,"active",s[16])},m(f,m){insert_hydration(f,r,m),append_hydration(r,n),append_hydration(n,t),append_hydration(r,a),l||(o=listen$1(r,"click",function(){is_function(s[11])&&s[11].apply(this,arguments)}),l=!0)},p(f,m){s=f,toggle_class(n,"svelte-y4y35s",!0),m[0]&65536&&toggle_class(r,"active",s[16])},i:noop,o:noop,d(f){f&&detach(r),l=!1,o()}}}function create_if_block$9(s){let r,n,t,a;function l(i,f){return i[18]?create_if_block_1$6:create_else_block$3}let o=l(s),c=o(s);return{c(){r=element("div"),c.c(),n=space(),this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);c.l(f),n=claim_space(f),f.forEach(detach),this.h()},h(){attr(r,"class","btn svelte-y4y35s"),toggle_class(r,"active",s[18]||s[17])},m(i,f){insert_hydration(i,r,f),c.m(r,null),append_hydration(r,n),t||(a=listen$1(r,"click",function(){is_function(s[13])&&s[13].apply(this,arguments)}),t=!0)},p(i,f){s=i,o===(o=l(s))&&c?c.p(s,f):(c.d(1),c=o(s),c&&(c.c(),c.m(r,n))),f[0]&393216&&toggle_class(r,"active",s[18]||s[17])},i:noop,o:noop,d(i){i&&detach(r),c.d(),t=!1,a()}}}function create_target_slot_2(s){let r,n,t,a,l=[s[19]],o={};for(let c=0;c<l.length;c+=1)o=assign(o,l[c]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("path"),this.h()},l(c){r=claim_element(c,"DIV",{class:!0,slot:!0});var i=children(r);n=claim_svg_element(i,"svg",{});var f=children(n);t=claim_svg_element(f,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children(t).forEach(detach),a=claim_svg_element(f,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children(a).forEach(detach),f.forEach(detach),i.forEach(detach),this.h()},h(){attr(t,"fill-rule","evenodd"),attr(t,"clip-rule","evenodd"),attr(t,"d",`M3.15 0h17.7A3.12 3.12 0 0124 3.1v17.8c0 1.71-1.4 3.1-3.15 3.1H3.15A3.12 3.12 0 010 20.9V3.1C0 1.39
                1.4 0 3.15 0zm0 2.05c-.6 0-1.07.47-1.07 1.05v17.8c0 .58.48 1.05 1.07 1.05h17.7c.6 0 1.07-.47
                1.07-1.05V3.1c0-.58-.48-1.05-1.07-1.05H3.15z`),attr(a,"fill-rule","evenodd"),attr(a,"clip-rule","evenodd"),attr(a,"d",`M12 10c.55 0 1 .42 1 .94v6.12c0 .52-.45.94-1 .94s-1-.42-1-.94v-6.12c0-.52.45-.94 1-.94zM12 6a1 1 0
                011 1v.42a1 1 0 11-2 0V7a1 1 0 011-1z`),set_svg_attributes(n,o),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),attr(r,"slot","target")},m(c,i){insert_hydration(c,r,i),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a)},p(c,i){toggle_class(n,"svelte-y4y35s",!0)},d(c){c&&detach(r)}}}function create_content_slot_2(s){let r,n,t;return n=new Info({props:{animationData:s[1]}}),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(a){r=claim_element(a,"DIV",{slot:!0,class:!0});var l=children(r);claim_component(n.$$.fragment,l),l.forEach(detach),this.h()},h(){attr(r,"slot","content"),attr(r,"class","popover popover-info svelte-y4y35s")},m(a,l){insert_hydration(a,r,l),mount_component(n,r,null),t=!0},p(a,l){const o={};l[0]&2&&(o.animationData=a[1]),n.$set(o)},i(a){t||(transition_in(n.$$.fragment,a),t=!0)},o(a){transition_out(n.$$.fragment,a),t=!1},d(a){a&&detach(r),destroy_component(n)}}}function create_else_block_1(s){let r,n,t=[s[19]],a={};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(l){r=claim_svg_element(l,"svg",{});var o=children(r);n=claim_svg_element(o,"path",{d:!0,"stroke-width":!0}),children(n).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"d",`M21 8a1 1 0 102 0V4a3 3 0 00-3-3h-4a1 1 0 100 2h4a1 1 0 011 1v4zM1 8a1 1 0 102 0V4a1 1 0 011-1h4a1 1 0
              100-2H4a3 3 0 00-3 3v4zm15 15h4a3 3 0 003-3v-4a1 1 0 10-2 0v4a1 1 0 01-1 1h-4a1 1 0 100 2zM4 23h4a1 1 0
              100-2H4a1 1 0 01-1-1v-4a1 1 0 10-2 0v4a3 3 0 003 3z`),attr(n,"stroke-width",".2"),set_svg_attributes(r,a),toggle_class(r,"svelte-y4y35s",!0)},m(l,o){insert_hydration(l,r,o),append_hydration(r,n)},p(l,o){toggle_class(r,"svelte-y4y35s",!0)},d(l){l&&detach(r)}}}function create_if_block_8(s){let r,n,t=[s[19]],a={};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(l){r=claim_svg_element(l,"svg",{});var o=children(r);n=claim_svg_element(o,"path",{d:!0,"stroke-width":!0}),children(n).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"d",`M7 22a1 1 0 102 0v-4a3 3 0 00-3-3H2a1 1 0 100 2h4a1 1 0 011 1v4zm8 0a1 1 0 102 0v-4a1 1 0 011-1h4a1 1 0
              100-2h-4a3 3 0 00-3 3v4zM2 9h4a3 3 0 003-3V2a1 1 0 10-2 0v4a1 1 0 01-1 1H2a1 1 0 100 2zm16 0h4a1 1 0
              100-2h-4a1 1 0 01-1-1V2a1 1 0 10-2 0v4a3 3 0 003 3z`),attr(n,"stroke-width",".2"),set_svg_attributes(r,a),toggle_class(r,"svelte-y4y35s",!0)},m(l,o){insert_hydration(l,r,o),append_hydration(r,n)},p(l,o){toggle_class(r,"svelte-y4y35s",!0)},d(l){l&&detach(r)}}}function create_target_slot_1(s){let r,n,t,a,l,o,c=[s[19]],i={};for(let f=0;f<c.length;f+=1)i=assign(i,c[f]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),a=svg_element("path"),l=svg_element("circle"),o=svg_element("path"),this.h()},l(f){r=claim_element(f,"DIV",{class:!0,slot:!0});var m=children(r);n=claim_svg_element(m,"svg",{});var _=children(n);t=claim_svg_element(_,"path",{"clip-rule":!0,d:!0,"fill-rule":!0}),children(t).forEach(detach),a=claim_svg_element(_,"path",{d:!0}),children(a).forEach(detach),l=claim_svg_element(_,"circle",{cx:!0,cy:!0,r:!0}),children(l).forEach(detach),o=claim_svg_element(_,"path",{d:!0,stroke:!0,"stroke-width":!0}),children(o).forEach(detach),_.forEach(detach),m.forEach(detach),this.h()},h(){attr(t,"clip-rule","evenodd"),attr(t,"d",`M0 3.01A2.983 2.983 0 012.983.027H16.99a2.983 2.983 0 012.983 2.983v14.008a2.982 2.982 0 01-2.983
                2.983H2.983A2.983 2.983 0 010 17.018zm2.983-.941a.941.941 0 00-.942.94v14.01c0
                .52.422.94.942.94H16.99a.94.94 0 00.941-.94V3.008a.941.941 0 00-.94-.94H2.981z`),attr(t,"fill-rule","evenodd"),attr(a,"d","M12.229 7.945l-2.07 4.598-2.586-2.605-2.414 2.758v2.146h9.656V11.93z"),attr(l,"cx","7.444"),attr(l,"cy","6.513"),attr(l,"r","2.032"),attr(o,"d",`M9.561 23.916h11.25a2.929 2.929 0 002.926-2.927V9.954a1.06 1.06 0 10-2.122 0v11.035a.805.805 0
                01-.803.804H9.562a1.061 1.061 0 100 2.123z`),attr(o,"stroke","#8795a1"),attr(o,"stroke-width",".215"),set_svg_attributes(n,i),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),attr(r,"slot","target")},m(f,m){insert_hydration(f,r,m),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(n,l),append_hydration(n,o)},p(f,m){toggle_class(n,"svelte-y4y35s",!0)},d(f){f&&detach(r)}}}function create_content_slot_1(s){let r,n,t,a,l,o,c,i,f,m,_,u,p,g,y;return{c(){r=element("div"),n=element("h5"),t=text("Frame "),a=text(s[15]),l=space(),o=element("a"),c=text("Download SVG"),i=space(),f=element("a"),m=text("Download PNG"),_=space(),u=element("i"),p=text("Scroll with mousewheel to find exact frame"),this.h()},l(S){r=claim_element(S,"DIV",{slot:!0,class:!0});var b=children(r);n=claim_element(b,"H5",{class:!0});var E=children(n);t=claim_text(E,"Frame "),a=claim_text(E,s[15]),E.forEach(detach),l=claim_space(b),o=claim_element(b,"A",{href:!0,class:!0});var x=children(o);c=claim_text(x,"Download SVG"),x.forEach(detach),i=claim_space(b),f=claim_element(b,"A",{href:!0,class:!0});var k=children(f);m=claim_text(k,"Download PNG"),k.forEach(detach),_=claim_space(b),u=claim_element(b,"I",{class:!0});var T=children(u);p=claim_text(T,"Scroll with mousewheel to find exact frame"),T.forEach(detach),b.forEach(detach),this.h()},h(){attr(n,"class","svelte-y4y35s"),attr(o,"href","#downloadsvg"),attr(o,"class","svelte-y4y35s"),attr(f,"href","#downloadsvg"),attr(f,"class","svelte-y4y35s"),attr(u,"class","note svelte-y4y35s"),attr(r,"slot","content"),attr(r,"class","popover popover-snapshot svelte-y4y35s")},m(S,b){insert_hydration(S,r,b),append_hydration(r,n),append_hydration(n,t),append_hydration(n,a),append_hydration(r,l),append_hydration(r,o),append_hydration(o,c),append_hydration(r,i),append_hydration(r,f),append_hydration(f,m),append_hydration(r,_),append_hydration(r,u),append_hydration(u,p),g||(y=[listen$1(o,"click",s[29]),listen$1(f,"click",s[30])],g=!0)},p(S,b){b[0]&32768&&set_data(a,S[15])},d(S){S&&detach(r),g=!1,run_all(y)}}}function create_target_slot(s){let r,n,t,a=[s[19]],l={};for(let o=0;o<a.length;o+=1)l=assign(l,a[o]);return{c(){r=element("div"),n=svg_element("svg"),t=svg_element("path"),this.h()},l(o){r=claim_element(o,"DIV",{class:!0,slot:!0});var c=children(r);n=claim_svg_element(c,"svg",{});var i=children(n);t=claim_svg_element(i,"path",{d:!0}),children(t).forEach(detach),i.forEach(detach),c.forEach(detach),this.h()},h(){attr(t,"d",`M12 3.1L6.1 8.6a7.6 7.6 0 00-2.2 4 7.2 7.2 0 00.4 4.4 7.9 7.9 0 003 3.5 8.7 8.7 0 004.7 1.3c1.6 0
                3.2-.5 4.6-1.3s2.4-2 3-3.5a7.2 7.2 0 00.5-4.5 7.6 7.6 0 00-2.2-4L12 3.2zM12 0l7.5 7a9.8 9.8 0 013 5.1
                9.3 9.3 0 01-.6 5.8c-.9 1.8-2.2 3.3-4 4.4A11.2 11.2 0 0112 24a11.2 11.2 0
                01-6-1.7c-1.7-1-3-2.6-3.9-4.4a9.3 9.3 0 01-.6-5.8c.4-2 1.5-3.7 3-5L12 0zM6 14h12c0 1.5-.7 3-1.8 4s-2.6
                1.6-4.2 1.6S9 19 7.8 18s-1.7-2.5-1.7-4z`),set_svg_attributes(n,l),toggle_class(n,"svelte-y4y35s",!0),attr(r,"class","btn svelte-y4y35s"),attr(r,"slot","target")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),append_hydration(n,t)},p(o,c){toggle_class(n,"svelte-y4y35s",!0)},d(o){o&&detach(r)}}}function create_content_slot(s){let r,n,t;return n=new ColorPicker({props:{color:s[2]}}),n.$on("color",s[21]),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(a){r=claim_element(a,"DIV",{slot:!0,class:!0});var l=children(r);claim_component(n.$$.fragment,l),l.forEach(detach),this.h()},h(){attr(r,"slot","content"),attr(r,"class","popover popover-background svelte-y4y35s")},m(a,l){insert_hydration(a,r,l),mount_component(n,r,null),t=!0},p(a,l){const o={};l[0]&4&&(o.color=a[2]),n.$set(o)},i(a){t||(transition_in(n.$$.fragment,a),t=!0)},o(a){transition_out(n.$$.fragment,a),t=!1},d(a){a&&detach(r),destroy_component(n)}}}function create_else_block$3(s){let r,n,t=[s[19]],a={};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(l){r=claim_svg_element(l,"svg",{});var o=children(r);n=claim_svg_element(o,"path",{d:!0}),children(n).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"d","M2 3.4C2 1.9 3.5 1 4.8 1.8l16.5 9.6c1.2.7 1.2 2.5 0 3.2L4.8 24.2C3.5 25 2 24.1 2 22.6V3.4z"),set_svg_attributes(r,a),toggle_class(r,"svelte-y4y35s",!0)},m(l,o){insert_hydration(l,r,o),append_hydration(r,n)},p(l,o){toggle_class(r,"svelte-y4y35s",!0)},d(l){l&&detach(r)}}}function create_if_block_1$6(s){let r,n,t,a=[s[19]],l={};for(let o=0;o<a.length;o+=1)l=assign(l,a[o]);return{c(){r=svg_element("svg"),n=svg_element("rect"),t=svg_element("rect"),this.h()},l(o){r=claim_svg_element(o,"svg",{});var c=children(r);n=claim_svg_element(c,"rect",{height:!0,rx:!0,width:!0,x:!0,y:!0}),children(n).forEach(detach),t=claim_svg_element(c,"rect",{height:!0,rx:!0,width:!0,x:!0,y:!0}),children(t).forEach(detach),c.forEach(detach),this.h()},h(){attr(n,"height","22.9"),attr(n,"rx","1.9"),attr(n,"width","7.6"),attr(n,"x","14"),attr(n,"y",".5"),attr(t,"height","22.9"),attr(t,"rx","1.9"),attr(t,"width","7.6"),attr(t,"x","2"),attr(t,"y",".5"),set_svg_attributes(r,l),toggle_class(r,"svelte-y4y35s",!0)},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),append_hydration(r,t)},p(o,c){toggle_class(r,"svelte-y4y35s",!0)},d(o){o&&detach(r)}}}function create_each_block$4(s){let r,n,t,a;const l=[create_if_block$9,create_if_block_2$4,create_if_block_3$1,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_9,create_if_block_10,create_if_block_11,create_if_block_12,create_if_block_13],o=[];function c(i,f){return i[40]==="playpause"?0:i[40]==="stop"?1:i[40]==="progress"?2:i[40]==="loop"?3:i[40]==="background"?4:i[40]==="snapshot"?5:i[40]==="zoom"?6:i[40]==="info"?7:i[40]==="frame"?8:i[40]==="nextFrame"?9:i[40]==="previousFrame"?10:i[40]==="spacer"?11:-1}return~(r=c(s))&&(n=o[r]=l[r](s)),{c(){n&&n.c(),t=empty()},l(i){n&&n.l(i),t=empty()},m(i,f){~r&&o[r].m(i,f),insert_hydration(i,t,f),a=!0},p(i,f){let m=r;r=c(i),r===m?~r&&o[r].p(i,f):(n&&(group_outros(),transition_out(o[m],1,1,()=>{o[m]=null}),check_outros()),~r?(n=o[r],n?n.p(i,f):(n=o[r]=l[r](i),n.c()),transition_in(n,1),n.m(t.parentNode,t)):n=null)},i(i){a||(transition_in(n),a=!0)},o(i){transition_out(n),a=!1},d(i){~r&&o[r].d(i),i&&detach(t)}}}function create_fragment$g(s){let r,n,t=s[6],a=[];for(let o=0;o<t.length;o+=1)a[o]=create_each_block$4(get_each_context$4(s,t,o));const l=o=>transition_out(a[o],1,1,()=>{a[o]=null});return{c(){r=element("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<a.length;i+=1)a[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","lottie-player-controls svelte-y4y35s")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,null);n=!0},p(o,c){if(c[0]&33554431){t=o[6];let i;for(i=0;i<t.length;i+=1){const f=get_each_context$4(o,t,i);a[i]?(a[i].p(f,c),transition_in(a[i],1)):(a[i]=create_each_block$4(f),a[i].c(),transition_in(a[i],1),a[i].m(r,null))}for(group_outros(),i=t.length;i<a.length;i+=1)l(i);check_outros()}},i(o){if(!n){for(let c=0;c<t.length;c+=1)transition_in(a[c]);n=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);n=!1},d(o){o&&detach(r),destroy_each(a,o)}}}function instance_1$1(s,r,n){let t,a,l,o;const c={width:14,height:14,viewBox:"0 0 24 24"},i=createEventDispatcher();let{animationData:f}=r,{background:m}=r,{currentState:_}=r,{frame:u}=r,{freeze:p}=r,{instance:g}=r,{layout:y=ControlsLayoutOptions}=r,{loop:S}=r,{play:b}=r,{progress:E}=r,{seek:x}=r,{snapshot:k}=r,{stop:T}=r,{toggleZoom:j}=r,{toggleLooping:A}=r,{togglePlay:C}=r,{totalFrames:I=0}=r,F=!1;const N=ne=>{if(!g||isNaN(ne.target.value))return;const se=ne.target.value/100*I;x(se)},z=ne=>{i("background",{color:ne.detail.hex})},R=()=>{n(14,F=!F),j()},q=()=>{const ne=u+1;ne<=I&&x(ne)},M=()=>{const ne=u-1;ne>=0&&x(ne)};function D(){E=to_number(this.value),n(0,E)}const X=()=>k(!0),O=()=>k(!0),G=ne=>x(u+(ne.deltaY>0?-1:1)),K=()=>_===PlayerState.Frozen&&b(),Z=()=>_!==PlayerState.Paused&&p();function U(){o=this.value,n(15,o),n(4,u)}const V=()=>_===PlayerState.Frozen&&b(),L=()=>_!==PlayerState.Paused&&p(),H=ne=>x(ne.target.value),J=ne=>x(u+(ne.deltaY>0?-1:1));return s.$$set=ne=>{"animationData"in ne&&n(1,f=ne.animationData),"background"in ne&&n(2,m=ne.background),"currentState"in ne&&n(3,_=ne.currentState),"frame"in ne&&n(4,u=ne.frame),"freeze"in ne&&n(5,p=ne.freeze),"instance"in ne&&n(25,g=ne.instance),"layout"in ne&&n(6,y=ne.layout),"loop"in ne&&n(7,S=ne.loop),"play"in ne&&n(8,b=ne.play),"progress"in ne&&n(0,E=ne.progress),"seek"in ne&&n(9,x=ne.seek),"snapshot"in ne&&n(10,k=ne.snapshot),"stop"in ne&&n(11,T=ne.stop),"toggleZoom"in ne&&n(26,j=ne.toggleZoom),"toggleLooping"in ne&&n(12,A=ne.toggleLooping),"togglePlay"in ne&&n(13,C=ne.togglePlay),"totalFrames"in ne&&n(27,I=ne.totalFrames)},s.$$.update=()=>{s.$$.dirty[0]&8&&n(18,t=_===PlayerState.Playing),s.$$.dirty[0]&8&&n(17,a=_===PlayerState.Paused),s.$$.dirty[0]&8&&n(16,l=_===PlayerState.Stopped),s.$$.dirty[0]&16&&n(15,o=Math.round(u))},[E,f,m,_,u,p,y,S,b,x,k,T,A,C,F,o,l,a,t,c,N,z,R,q,M,g,j,I,D,X,O,G,K,Z,U,V,L,H,J]}class Controls extends SvelteComponent{constructor(r){super(),init(this,r,instance_1$1,create_fragment$g,safe_not_equal,{animationData:1,background:2,currentState:3,frame:4,freeze:5,instance:25,layout:6,loop:7,play:8,progress:0,seek:9,snapshot:10,stop:11,toggleZoom:26,toggleLooping:12,togglePlay:13,totalFrames:27},null,[-1,-1])}}const SVELTE_LOTTIE_PLAYER_VERSION="0.3.1",LOTTIE_WEB_VERSION="^5.10.0",LottiePlayer_svelte_svelte_type_style_lang="";function create_if_block_1$5(s){let r,n;return{c(){r=element("div"),n=text(""),this.h()},l(t){r=claim_element(t,"DIV",{class:!0});var a=children(r);n=claim_text(a,""),a.forEach(detach),this.h()},h(){attr(r,"class","lottie-player-error svelte-1n5qc19")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},d(t){t&&detach(r)}}}function create_if_block$8(s){let r,n;return r=new Controls({props:{layout:s[3],animationData:s[22],background:s[1],controls:s[2],currentState:s[28],frame:s[26],freeze:s[11],instance:s[21],loop:s[0],lottie,pause:s[9],play:s[8],progress:s[27],seek:s[12],setDirection:s[16],setSpeed:s[15],setLooping:s[14],snapshot:s[13],src:s[5],stop:s[10],toggleZoom:s[20],toggleLooping:s[18],togglePlay:s[17],totalFrames:s[32]}}),r.$on("background",s[47]),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a[0]&8&&(l.layout=t[3]),a[0]&4194304&&(l.animationData=t[22]),a[0]&2&&(l.background=t[1]),a[0]&4&&(l.controls=t[2]),a[0]&268435456&&(l.currentState=t[28]),a[0]&67108864&&(l.frame=t[26]),a[0]&2097152&&(l.instance=t[21]),a[0]&1&&(l.loop=t[0]),a[0]&134217728&&(l.progress=t[27]),a[0]&32&&(l.src=t[5]),a[1]&2&&(l.totalFrames=t[32]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_fragment$f(s){let r,n,t,a,l,o,c,i=s[28]===PlayerState.Error&&create_if_block_1$5(),f=s[2]&&create_if_block$8(s);return{c(){r=element("div"),n=element("div"),t=element("div"),i&&i.c(),a=space(),f&&f.c(),this.h()},l(m){r=claim_element(m,"DIV",{style:!0});var _=children(r);n=claim_element(_,"DIV",{class:!0});var u=children(n);t=claim_element(u,"DIV",{style:!0,class:!0});var p=children(t);i&&i.l(p),p.forEach(detach),a=claim_space(u),f&&f.l(u),u.forEach(detach),_.forEach(detach),this.h()},h(){set_style(t,"background",s[1]),attr(t,"class","svelte-1n5qc19"),toggle_class(t,"animation",!0),attr(n,"class","lottie-player svelte-1n5qc19"),toggle_class(n,"with-controls",s[2]),toggle_class(n,"is-zoomed",s[29]),attr(r,"style",l=(s[7]?`width:${s[7]}px;`:"")+(s[4]?`height:${s[4]}px;`:"")+s[6]),add_render_callback(()=>s[50].call(r))},m(m,_){insert_hydration(m,r,_),append_hydration(r,n),append_hydration(n,t),i&&i.m(t,null),s[46](t),append_hydration(n,a),f&&f.m(n,null),s[48](n),s[49](r),o=add_iframe_resize_listener(r,s[50].bind(r)),c=!0},p(m,_){m[28]===PlayerState.Error?i||(i=create_if_block_1$5(),i.c(),i.m(t,null)):i&&(i.d(1),i=null),(!c||_[0]&2)&&set_style(t,"background",m[1]),m[2]?f?(f.p(m,_),_[0]&4&&transition_in(f,1)):(f=create_if_block$8(m),f.c(),transition_in(f,1),f.m(n,null)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),(!c||_[0]&4)&&toggle_class(n,"with-controls",m[2]),(!c||_[0]&536870912)&&toggle_class(n,"is-zoomed",m[29]),(!c||_[0]&208&&l!==(l=(m[7]?`width:${m[7]}px;`:"")+(m[4]?`height:${m[4]}px;`:"")+m[6]))&&attr(r,"style",l)},i(m){c||(transition_in(f),c=!0)},o(m){transition_out(f),c=!1},d(m){m&&detach(r),i&&i.d(),s[46](null),f&&f.d(),s[48](null),s[49](null),o()}}}function instance_1(s,r,n){let{autoplay:t=!1}=r,{background:a}=r,{controls:l}=r,{controlsLayout:o}=r,{count:c=void 0}=r,{defaultFrame:i=0}=r,{direction:f=1}=r,{height:m}=r,{hover:_=!1}=r,{loop:u=!1}=r,{mode:p=PlayMode.Normal}=r,{onToggleZoom:g=void 0}=r,{renderer:y=PlayerRender.SVG}=r,{speed:S=1}=r,{src:b=""}=r,{style:E=""}=r,{width:x}=r,k,T,j,A,C,I=0,F=0,N,z=PlayerState.Loading,R=!1,q,M,D;const X=()=>{document.hidden===!0&&z===PlayerState.Playing?L():z===PlayerState.Frozen&&K()};onMount(()=>{"IntersectionObserver"in window&&(N=new IntersectionObserver(re=>{re[0].isIntersecting?z===PlayerState.Frozen&&K():z===PlayerState.Playing&&L()}),N.observe(T)),typeof document.hidden<"u"&&document.addEventListener("visibilitychange",X),b&&O(b)}),onDestroy(()=>{N&&(N.disconnect(),N=void 0),document.removeEventListener("visibilitychange",X)});const O=re=>{if(!T)return;C&&C.destroy();const be={container:T,loop:u,autoplay:t,renderer:y,rendererSettings:{preserveAspectRatio:"xMidYMid meet",clearCanvas:!0,progressiveLoad:!0,hideOnTransparent:!0}};try{const ve=parseSrc(re),je=typeof ve=="string"?"path":"animationData";n(21,C=lottie.loadAnimation({...be,[je]:ve}))}catch{n(28,z=PlayerState.Error),dispatchEvent(new CustomEvent(PlayerEvents.Error))}C&&(C.addEventListener("enterFrame",()=>{n(26,I=C.currentFrame),n(27,F=C.currentFrame/C.totalFrames*100),dispatchEvent(new CustomEvent(PlayerEvents.Frame,{detail:{frame:C.currentFrame,progress:F}}))}),C.addEventListener("complete",()=>{if(z!==PlayerState.Playing){dispatchEvent(new CustomEvent(PlayerEvents.Complete));return}if(!u||c&&_counter>=c){dispatchEvent(new CustomEvent(PlayerEvents.Complete));return}p===PlayMode.Bounce?(c&&(_counter+=.5),setTimeout(()=>{dispatchEvent(new CustomEvent(PlayerEvents.Loop)),z===PlayerState.Playing&&(C.setDirection(C.playDirection*-1),C.play())},intermission)):(c&&(_counter+=1),window.setTimeout(()=>{dispatchEvent(new CustomEvent(PlayerEvents.Loop)),z===PlayerState.Playing&&(C.stop(),C.play())},intermission))}),C.addEventListener("data_ready",()=>{n(22,k=C.animationData),n(32,D=C.totalFrames)}),C.addEventListener("data_failed",()=>{n(28,z=PlayerState.Error),dispatchEvent(new CustomEvent(PlayerEvents.Error))}),T.addEventListener("mouseenter",()=>{_&&z!==PlayerState.Playing&&K()}),T.addEventListener("mouseleave",()=>{_&&z===PlayerState.Playing&&V()}),fe(S),xe(f),t?K():isNaN(i)||C.goToAndStop(i,!0))},G=()=>C,K=()=>{C&&(n(28,z=PlayerState.Playing),C.play(),dispatchEvent(new CustomEvent(PlayerEvents.Play)))},Z=()=>({lottieWebVersion:LOTTIE_WEB_VERSION,svelteLottiePlayerVersion:SVELTE_LOTTIE_PLAYER_VERSION}),U=()=>{C&&(n(28,z=PlayerState.Paused),C.pause(),dispatchEvent(new CustomEvent(PlayerEvents.Pause)))},V=()=>{C&&(n(28,z=PlayerState.Stopped),C.stop(),dispatchEvent(new CustomEvent(PlayerEvents.Stop)))},L=()=>{C&&(C.pause(),n(28,z=PlayerState.Frozen),dispatchEvent(new CustomEvent(PlayerEvents.Freeze)))},H=()=>{C&&C.resize()},J=re=>{if(!C)return;const be=re.toString().match(/^([0-9\.]+)(%?)$/);if(!be)return;const ve=be[2]==="%"?C.totalFrames*Number(be[1])/100:Number(be[1]);z===PlayerState.Playing?C.goToAndPlay(ve,!0):(C.goToAndStop(ve,!0),C.pause())},ne=(re=!0)=>{let be;if(y===PlayerRender.SVG){const ve=T.querySelector("svg"),je=new XMLSerializer().serializeToString(ve);be="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(je),re&&triggerDownload(be,`snapshot_${F}.svg`)}else y===PlayerRender.Canvas&&(be=T.querySelector("canvas").toDataURL("image/png"),re&&triggerDownload(be,`snapshot_${F}.png`));return be},se=re=>{C&&n(0,u=re)},fe=re=>{C&&n(34,S=re)},xe=re=>{C&&n(33,f=re)},he=()=>z===PlayerState.Playing?U():K(),_e=()=>{se(!u)},ye=re=>{n(1,a=re)},ue=()=>{if(typeof g=="function"){n(29,R=!!g(R));return}R?(A.appendChild(j),n(25,A.style.height=void 0,A),n(25,A.style.width=void 0,A)):(n(25,A.style.height=q+"px",A),n(25,A.style.width=M+"px",A),document.body.appendChild(j)),n(29,R=!R),setTimeout(()=>H(),100)};function pe(re){binding_callbacks[re?"unshift":"push"](()=>{T=re,n(23,T)})}const ke=re=>ye(re.detail.color);function Ie(re){binding_callbacks[re?"unshift":"push"](()=>{j=re,n(24,j)})}function Y(re){binding_callbacks[re?"unshift":"push"](()=>{A=re,n(25,A)})}function te(){q=this.clientHeight,M=this.clientWidth,n(30,q),n(31,M)}return s.$$set=re=>{"autoplay"in re&&n(35,t=re.autoplay),"background"in re&&n(1,a=re.background),"controls"in re&&n(2,l=re.controls),"controlsLayout"in re&&n(3,o=re.controlsLayout),"count"in re&&n(36,c=re.count),"defaultFrame"in re&&n(37,i=re.defaultFrame),"direction"in re&&n(33,f=re.direction),"height"in re&&n(4,m=re.height),"hover"in re&&n(38,_=re.hover),"loop"in re&&n(0,u=re.loop),"mode"in re&&n(39,p=re.mode),"onToggleZoom"in re&&n(40,g=re.onToggleZoom),"renderer"in re&&n(41,y=re.renderer),"speed"in re&&n(34,S=re.speed),"src"in re&&n(5,b=re.src),"style"in re&&n(6,E=re.style),"width"in re&&n(7,x=re.width)},s.$$.update=()=>{s.$$.dirty[0]&32&&O(b),s.$$.dirty[0]&2097153&&C&&n(21,C.loop=u,C),s.$$.dirty[0]&2097152|s.$$.dirty[1]&8&&C&&C.setSpeed(S),s.$$.dirty[0]&2097152|s.$$.dirty[1]&4&&C&&C.setDirection(f)},[u,a,l,o,m,b,E,x,K,U,V,L,J,ne,se,fe,xe,he,_e,ye,ue,C,k,T,j,A,I,F,z,R,q,M,D,f,S,t,c,i,_,p,g,y,O,G,Z,H,pe,ke,Ie,Y,te]}class LottiePlayer extends SvelteComponent{constructor(r){super(),init(this,r,instance_1,create_fragment$f,safe_not_equal,{autoplay:35,background:1,controls:2,controlsLayout:3,count:36,defaultFrame:37,direction:33,height:4,hover:38,loop:0,mode:39,onToggleZoom:40,renderer:41,speed:34,src:5,style:6,width:7,load:42,getLottie:43,play:8,getVersions:44,pause:9,stop:10,freeze:11,resize:45,seek:12,snapshot:13,setLooping:14,setSpeed:15,setDirection:16,togglePlay:17,toggleLooping:18,setBackground:19,toggleZoom:20},null,[-1,-1])}get load(){return this.$$.ctx[42]}get getLottie(){return this.$$.ctx[43]}get play(){return this.$$.ctx[8]}get getVersions(){return this.$$.ctx[44]}get pause(){return this.$$.ctx[9]}get stop(){return this.$$.ctx[10]}get freeze(){return this.$$.ctx[11]}get resize(){return this.$$.ctx[45]}get seek(){return this.$$.ctx[12]}get snapshot(){return this.$$.ctx[13]}get setLooping(){return this.$$.ctx[14]}get setSpeed(){return this.$$.ctx[15]}get setDirection(){return this.$$.ctx[16]}get togglePlay(){return this.$$.ctx[17]}get toggleLooping(){return this.$$.ctx[18]}get setBackground(){return this.$$.ctx[19]}get toggleZoom(){return this.$$.ctx[20]}}function create_fragment$e(s){let r,n;return r=new LottiePlayer({props:{src:s[0],autoplay:!0,loop:!0,controls:!1,renderer:"svg",background:"transparent",width:"100%",height:"100%"}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,[a]){const l={};a&1&&(l.src=t[0]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function instance$e(s,r,n){let{src:t}=r;return s.$$set=a=>{"src"in a&&n(0,t=a.src)},[t]}class Lottie extends SvelteComponent{constructor(r){super(),init(this,r,instance$e,create_fragment$e,safe_not_equal,{src:0})}}const v="4.8.0",meta={g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr=30,ip=0,op=180,w=1600,h=1600,nm="Q1 Synth Waiting Icon",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:180,s:[360]}],ix:10},p:{a:0,k:[800,800,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:2400,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 9",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:90,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:90,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:180,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:181,st:90,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 8",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:90,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:180,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:181,st:90,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 7",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:360,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,.411764711142,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:181,st:90,bm:0},{ddd:0,ind:5,ty:4,nm:"Shape Layer 3",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:90,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:90,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:91,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"Shape Layer 2",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:90,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.411764740944,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:91,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"Shape Layer 1",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:360,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,.411764711142,.352941185236,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:91,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"Shape Layer 21",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-30,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:150,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:240,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:150,op:241,st:150,bm:0},{ddd:0,ind:9,ty:4,nm:"Shape Layer 20",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:150,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:240,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:150,op:241,st:150,bm:0},{ddd:0,ind:10,ty:4,nm:"Shape Layer 19",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:240,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:150,op:241,st:150,bm:0},{ddd:0,ind:11,ty:4,nm:"Shape Layer 18",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-30,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:150,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:151,st:60,bm:0},{ddd:0,ind:12,ty:4,nm:"Shape Layer 17",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:150,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:151,st:60,bm:0},{ddd:0,ind:13,ty:4,nm:"Shape Layer 16",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:240,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:151,st:60,bm:0},{ddd:0,ind:14,ty:4,nm:"Shape Layer 24",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-30,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-29,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:61,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-29,op:62,st:-29,bm:0},{ddd:0,ind:15,ty:4,nm:"Shape Layer 23",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-29,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:61,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-29,op:62,st:-29,bm:0},{ddd:0,ind:16,ty:4,nm:"Shape Layer 22",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:240,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.898039221764,0,.498039215803,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-29,op:62,st:-29,bm:0},{ddd:0,ind:17,ty:4,nm:"Shape Layer 15",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:210,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:120,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:210,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:120,op:211,st:120,bm:0},{ddd:0,ind:18,ty:4,nm:"Shape Layer 14",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:120,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:210,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:120,op:211,st:120,bm:0},{ddd:0,ind:19,ty:4,nm:"Shape Layer 13",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:120,op:211,st:120,bm:0},{ddd:0,ind:20,ty:4,nm:"Shape Layer 6",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:210,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:30,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:120,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:121,st:30,bm:0},{ddd:0,ind:21,ty:4,nm:"Shape Layer 5",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:30,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:120,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:121,st:30,bm:0},{ddd:0,ind:22,ty:4,nm:"Shape Layer 4",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:121,st:30,bm:0},{ddd:0,ind:23,ty:4,nm:"Shape Layer 12",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:210,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:30,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-60,op:31,st:-60,bm:0},{ddd:0,ind:24,ty:4,nm:"Shape Layer 11",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:-60,s:[{i:[[375,0],[0,-375],[-375,0]],o:[[-375,0],[0,375],[375,0]],v:[[0,-700],[-700,0],[0,700]],c:!1}]},{t:30,s:[{i:[[-375,0],[0,-375],[375,0]],o:[[375,0],[0,375],[-375,0]],v:[[0,-700],[700,0],[0,700]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-60,op:31,st:-60,bm:0},{ddd:0,ind:25,ty:4,nm:"Shape Layer 10",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:120,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1400,1400],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.639215707779,.600000023842,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:50,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:-60,op:31,st:-60,bm:0}],markers=[],lottieSrc={v,meta,fr,ip,op,w,h,nm,ddd,assets,layers,markers},Measure_svelte_svelte_type_style_lang="";function create_default_slot_1$2(s){let r,n;return{c(){r=element("h2"),n=text("Measure"),this.h()},l(t){r=claim_element(t,"H2",{class:!0});var a=children(r);n=claim_text(a,"Measure"),a.forEach(detach),this.h()},h(){attr(r,"class","title svelte-1ptipaw")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},p:noop,d(t){t&&detach(r)}}}function create_if_block_1$4(s){let r,n,t,a;return t=new Select({props:{id:"source",options:s[4],onChange:s[5]}}),{c(){r=element("div"),n=element("div"),create_component(t.$$.fragment),this.h()},l(l){r=claim_element(l,"DIV",{class:!0});var o=children(r);n=claim_element(o,"DIV",{class:!0});var c=children(n);claim_component(t.$$.fragment,c),c.forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"class","svelte-1ptipaw"),attr(r,"class","source svelte-1ptipaw")},m(l,o){insert_hydration(l,r,o),append_hydration(r,n),mount_component(t,n,null),a=!0},p:noop,i(l){a||(transition_in(t.$$.fragment,l),a=!0)},o(l){transition_out(t.$$.fragment,l),a=!1},d(l){l&&detach(r),destroy_component(t)}}}function create_else_block$2(s){let r,n;return{c(){r=element("span"),n=text("Measure"),this.h()},l(t){r=claim_element(t,"SPAN",{class:!0});var a=children(r);n=claim_text(a,"Measure"),a.forEach(detach),this.h()},h(){attr(r,"class","button__text svelte-1ptipaw")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},p:noop,i:noop,o:noop,d(t){t&&detach(r)}}}function create_if_block$7(s){let r,n;return r=new Lottie({props:{src:lottieSrc}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p:noop,i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot$4(s){let r,n,t,a,l,o;const c=[create_if_block$7,create_else_block$2],i=[];function f(m,_){return m[3]?0:1}return n=f(s),t=i[n]=c[n](s),{c(){r=element("button"),t.c(),this.h()},l(m){r=claim_element(m,"BUTTON",{class:!0});var _=children(r);t.l(_),_.forEach(detach),this.h()},h(){r.disabled=s[3],attr(r,"class","svelte-1ptipaw")},m(m,_){insert_hydration(m,r,_),i[n].m(r,null),a=!0,l||(o=listen$1(r,"click",prevent_default(s[9])),l=!0)},p(m,_){let u=n;n=f(m),n===u?i[n].p(m,_):(group_outros(),transition_out(i[u],1,1,()=>{i[u]=null}),check_outros(),t=i[n],t?t.p(m,_):(t=i[n]=c[n](m),t.c()),transition_in(t,1),t.m(r,null)),(!a||_&8)&&(r.disabled=m[3])},i(m){a||(transition_in(t),a=!0)},o(m){transition_out(t),a=!1},d(m){m&&detach(r),i[n].d(),l=!1,o()}}}function create_fragment$d(s){let r,n,t,a,l=isApp(),o,c,i,f,m,_,u,p,g,y,S,b;n=new Learnable({props:{id:"measure",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:s}}});let E=l&&create_if_block_1$4(s);return g=new Tooltip({props:{element:"measure",$$slots:{default:[create_default_slot$4]},$$scope:{ctx:s}}}),{c(){r=element("div"),create_component(n.$$.fragment),t=space(),a=element("form"),E&&E.c(),o=space(),c=element("input"),i=space(),f=element("input"),m=space(),_=element("input"),u=space(),p=element("div"),create_component(g.$$.fragment),this.h()},l(x){r=claim_element(x,"DIV",{class:!0});var k=children(r);claim_component(n.$$.fragment,k),t=claim_space(k),a=claim_element(k,"FORM",{class:!0});var T=children(a);E&&E.l(T),o=claim_space(T),c=claim_element(T,"INPUT",{id:!0,placeholder:!0,type:!0,class:!0}),i=claim_space(T),f=claim_element(T,"INPUT",{id:!0,placeholder:!0,type:!0,class:!0}),m=claim_space(T),_=claim_element(T,"INPUT",{id:!0,placeholder:!0,type:!0,class:!0}),T.forEach(detach),u=claim_space(k),p=claim_element(k,"DIV",{class:!0});var j=children(p);claim_component(g.$$.fragment,j),j.forEach(detach),k.forEach(detach),this.h()},h(){attr(c,"id","seconds"),attr(c,"placeholder","Seconds"),attr(c,"type","number"),attr(c,"class","svelte-1ptipaw"),attr(f,"id","bpm"),attr(f,"placeholder","BPM"),attr(f,"type","number"),attr(f,"class","svelte-1ptipaw"),attr(_,"id","beats"),attr(_,"placeholder","Beats"),attr(_,"type","number"),attr(_,"class","svelte-1ptipaw"),attr(a,"class","svelte-1ptipaw"),attr(p,"class","button svelte-1ptipaw"),attr(r,"class","measure svelte-1ptipaw")},m(x,k){insert_hydration(x,r,k),mount_component(n,r,null),append_hydration(r,t),append_hydration(r,a),E&&E.m(a,null),append_hydration(a,o),append_hydration(a,c),set_input_value(c,s[0]),append_hydration(a,i),append_hydration(a,f),set_input_value(f,s[1]),append_hydration(a,m),append_hydration(a,_),set_input_value(_,s[2]),append_hydration(r,u),append_hydration(r,p),mount_component(g,p,null),y=!0,S||(b=[listen$1(c,"input",s[6]),listen$1(f,"input",s[7]),listen$1(_,"input",s[8])],S=!0)},p(x,[k]){const T={};k&1024&&(T.$$scope={dirty:k,ctx:x}),n.$set(T),l&&E.p(x,k),k&1&&to_number(c.value)!==x[0]&&set_input_value(c,x[0]),k&2&&to_number(f.value)!==x[1]&&set_input_value(f,x[1]),k&4&&to_number(_.value)!==x[2]&&set_input_value(_,x[2]);const j={};k&1032&&(j.$$scope={dirty:k,ctx:x}),g.$set(j)},i(x){y||(transition_in(n.$$.fragment,x),transition_in(E),transition_in(g.$$.fragment,x),y=!0)},o(x){transition_out(n.$$.fragment,x),transition_out(E),transition_out(g.$$.fragment,x),y=!1},d(x){x&&detach(r),destroy_component(n),E&&E.d(),destroy_component(g),S=!1,run_all(b)}}}function instance$d(s,r,n){let t,a,l,o;component_subscribe(s,seconds,p=>n(0,t=p)),component_subscribe(s,bpm,p=>n(1,a=p)),component_subscribe(s,beats,p=>n(2,l=p)),component_subscribe(s,isMeasuring,p=>n(3,o=p));const c=[{name:"local",active:!0}],i=p=>source.update(()=>{var g;return((g=p.target)==null?void 0:g.value)||"local"});function f(){t=to_number(this.value),seconds.set(t)}function m(){a=to_number(this.value),bpm.set(a)}function _(){l=to_number(this.value),beats.set(l)}return[t,a,l,o,c,i,f,m,_,()=>measure()]}class Measure extends SvelteComponent{constructor(r){super(),init(this,r,instance$d,create_fragment$d,safe_not_equal,{})}}function create_fragment$c(s){let r,n,t;return{c(){r=element("div"),this.h()},l(a){r=claim_element(a,"DIV",{style:!0,class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"style",s[0]),attr(r,"class","m-0")},m(a,l){insert_hydration(a,r,l),n||(t=action_destroyer(s[1].call(null,r)),n=!0)},p(a,[l]){l&1&&attr(r,"style",a[0])},i:noop,o:noop,d(a){a&&detach(r),n=!1,t()}}}function augmentClasses(s,r){return r.forEach(([n,t])=>s[n]=t),s}function instance$c(s,r,n){let{target:t=void 0}=r,{sketch:a=void 0}=r,{parentDivStyle:l="display: block;"}=r,{debug:o=!1}=r,c;const i=createEventDispatcher(),f={ref(){i("ref",t)},instance(){i("instance",c)}};function m(_){return n(2,t=_),{destroy(){n(2,t=void 0)}}}return onMount(async()=>{const _=await __vitePreload(()=>Promise.resolve().then(()=>p5_min$1),void 0,import.meta.url),{default:u}=_,g=Object.entries(_).filter(([y,S])=>S instanceof Function&&y[0]!=="_"&&y!=="default");o&&console.log("available p5 native classes",g),c=new u(y=>(y=augmentClasses(y,g),o&&console.log("p5 instance",y),window._p5Instance=y,a(y)),t),f.ref(),f.instance()}),s.$$set=_=>{"target"in _&&n(2,t=_.target),"sketch"in _&&n(3,a=_.sketch),"parentDivStyle"in _&&n(0,l=_.parentDivStyle),"debug"in _&&n(4,o=_.debug)},[l,m,t,a,o]}class P5 extends SvelteComponent{constructor(r){super(),init(this,r,instance$c,create_fragment$c,safe_not_equal,{target:2,sketch:3,parentDivStyle:0,debug:4})}}var p5_min$2={exports:{}};/*! p5.js v1.9.0 November 28, 2023 */(function(s,r){(function(n){s.exports=n()})(function(){var n;return function t(a,l,o){function c(m,_){if(!l[m]){if(!a[m]){var u=typeof commonjsRequire=="function"&&commonjsRequire;if(!_&&u)return u(m,!0);if(i)return i(m,!0);throw(_=new Error("Cannot find module '"+m+"'")).code="MODULE_NOT_FOUND",_}u=l[m]={exports:{}},a[m][0].call(u.exports,function(p){return c(a[m][1][p]||p)},u,u.exports,t,a,l,o)}return l[m].exports}for(var i=typeof commonjsRequire=="function"&&commonjsRequire,f=0;f<o.length;f++)c(o[f]);return c}({1:[function(t,a,l){l.byteLength=function(y){var y=u(y),g=y[0],y=y[1];return 3*(g+y)/4-y},l.toByteArray=function(p){var g,y,b=u(p),S=b[0],b=b[1],E=new i(function(T,j){return 3*(T+j)/4-j}(S,b)),x=0,k=0<b?S-4:S;for(y=0;y<k;y+=4)g=c[p.charCodeAt(y)]<<18|c[p.charCodeAt(y+1)]<<12|c[p.charCodeAt(y+2)]<<6|c[p.charCodeAt(y+3)],E[x++]=g>>16&255,E[x++]=g>>8&255,E[x++]=255&g;return b===2&&(g=c[p.charCodeAt(y)]<<2|c[p.charCodeAt(y+1)]>>4,E[x++]=255&g),b===1&&(g=c[p.charCodeAt(y)]<<10|c[p.charCodeAt(y+1)]<<4|c[p.charCodeAt(y+2)]>>2,E[x++]=g>>8&255,E[x++]=255&g),E},l.fromByteArray=function(p){for(var g,y=p.length,S=y%3,b=[],E=0,x=y-S;E<x;E+=16383)b.push(function(k,T,j){for(var A,C=[],I=T;I<j;I+=3)A=(k[I]<<16&16711680)+(k[I+1]<<8&65280)+(255&k[I+2]),C.push(function(F){return o[F>>18&63]+o[F>>12&63]+o[F>>6&63]+o[63&F]}(A));return C.join("")}(p,E,x<E+16383?x:E+16383));return S==1?(g=p[y-1],b.push(o[g>>2]+o[g<<4&63]+"==")):S==2&&(g=(p[y-2]<<8)+p[y-1],b.push(o[g>>10]+o[g>>4&63]+o[g<<2&63]+"=")),b.join("")};for(var o=[],c=[],i=typeof Uint8Array<"u"?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,_=f.length;m<_;++m)o[m]=f[m],c[f.charCodeAt(m)]=m;function u(p){var g=p.length;if(0<g%4)throw new Error("Invalid string. Length must be a multiple of 4");return p=p.indexOf("="),g=(p=p===-1?g:p)===g?0:4-p%4,[p,g]}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],2:[function(t,a,l){},{}],3:[function(t,a,l){},{}],4:[function(t,a,l){(function(u){var c=t("base64-js"),i=t("ieee754"),f=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,m=(l.Buffer=u,l.SlowBuffer=function(V){return+V!=V&&(V=0),u.alloc(+V)},l.INSPECT_MAX_BYTES=50,2147483647);function _(V){if(m<V)throw new RangeError('The value "'+V+'" is invalid for option "size"');return V=new Uint8Array(V),Object.setPrototypeOf(V,u.prototype),V}function u(V,L,H){if(typeof V!="number")return p(V,L,H);if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(V)}function p(V,L,H){if(typeof V=="string"){var J=V,ne=L;if(u.isEncoding(ne=typeof ne=="string"&&ne!==""?ne:"utf8"))return se=0|E(J,ne),fe=_(se),fe=(J=fe.write(J,ne))!==se?fe.slice(0,J):fe;throw new TypeError("Unknown encoding: "+ne)}if(ArrayBuffer.isView(V))return S(V);if(V!=null){if(K(V,ArrayBuffer)||V&&K(V.buffer,ArrayBuffer)){var se=V,J=L,fe=H;if(J<0||se.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<J+(fe||0))throw new RangeError('"length" is outside of buffer bounds');return se=J===void 0&&fe===void 0?new Uint8Array(se):fe===void 0?new Uint8Array(se,J):new Uint8Array(se,J,fe),Object.setPrototypeOf(se,u.prototype),se}if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ne=V.valueOf&&V.valueOf(),ne!=null&&ne!==V)return u.from(ne,L,H);var xe=function(he){{var _e,ye;if(u.isBuffer(he))return _e=0|b(he.length),(ye=_(_e)).length!==0&&he.copy(ye,0,0,_e),ye}if(he.length!==void 0)return typeof he.length!="number"||Z(he.length)?_(0):S(he);if(he.type==="Buffer"&&Array.isArray(he.data))return S(he.data)}(V);if(xe)return xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return u.from(V[Symbol.toPrimitive]("string"),L,H)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}function g(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function y(V){return g(V),_(V<0?0:0|b(V))}function S(V){for(var L=V.length<0?0:0|b(V.length),H=_(L),J=0;J<L;J+=1)H[J]=255&V[J];return H}function b(V){if(m<=V)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m.toString(16)+" bytes");return 0|V}function E(V,L){if(u.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||K(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);var H=V.length,J=2<arguments.length&&arguments[2]===!0;if(!J&&H===0)return 0;for(var ne=!1;;)switch(L){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return X(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return O(V).length;default:if(ne)return J?-1:X(V).length;L=(""+L).toLowerCase(),ne=!0}}function x(V,L,H){var J,ne=!1;if((L=L===void 0||L<0?0:L)>this.length||(H=H===void 0||H>this.length?this.length:H)<=0||(H>>>=0)<=(L>>>=0))return"";for(V=V||"utf8";;)switch(V){case"hex":var se=this,Y=L,fe=H,ye=se.length;(!fe||fe<0||ye<fe)&&(fe=ye);for(var xe="",he=Y=!Y||Y<0?0:Y;he<fe;++he)xe+=U[se[he]];return xe;case"utf8":case"utf-8":return I(this,L,H);case"ascii":var _e=this,ye=L,ue=H,pe="";ue=Math.min(_e.length,ue);for(var ke=ye;ke<ue;++ke)pe+=String.fromCharCode(127&_e[ke]);return pe;case"latin1":case"binary":var Ie=this,Y=L,te=H,re="";te=Math.min(Ie.length,te);for(var be=Y;be<te;++be)re+=String.fromCharCode(Ie[be]);return re;case"base64":return ve=this,J=H,(je=L)===0&&J===ve.length?c.fromByteArray(ve):c.fromByteArray(ve.slice(je,J));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var ve=L,je=H,Re=this.slice(ve,je),Ge="",Xe=0;Xe<Re.length;Xe+=2)Ge+=String.fromCharCode(Re[Xe]+256*Re[Xe+1]);return Ge;default:if(ne)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),ne=!0}}function k(V,L,H){var J=V[L];V[L]=V[H],V[H]=J}function T(V,L,H,J,ne){if(V.length===0)return-1;if(typeof H=="string"?(J=H,H=0):2147483647<H?H=2147483647:H<-2147483648&&(H=-2147483648),(H=(H=Z(H=+H)?ne?0:V.length-1:H)<0?V.length+H:H)>=V.length){if(ne)return-1;H=V.length-1}else if(H<0){if(!ne)return-1;H=0}if(typeof L=="string"&&(L=u.from(L,J)),u.isBuffer(L))return L.length===0?-1:j(V,L,H,J,ne);if(typeof L=="number")return L&=255,typeof Uint8Array.prototype.indexOf=="function"?(ne?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(V,L,H):j(V,[L],H,J,ne);throw new TypeError("val must be string, number or Buffer")}function j(V,L,H,J,ne){var se=1,fe=V.length,xe=L.length;if(J!==void 0&&((J=String(J).toLowerCase())==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(V.length<2||L.length<2)return-1;fe/=se=2,xe/=2,H/=2}function he(ke,Ie){return se===1?ke[Ie]:ke.readUInt16BE(Ie*se)}if(ne)for(var _e=-1,ye=H;ye<fe;ye++)if(he(V,ye)===he(L,_e===-1?0:ye-_e)){if(ye-(_e=_e===-1?ye:_e)+1===xe)return _e*se}else _e!==-1&&(ye-=ye-_e),_e=-1;else for(ye=H=fe<H+xe?fe-xe:H;0<=ye;ye--){for(var ue=!0,pe=0;pe<xe;pe++)if(he(V,ye+pe)!==he(L,pe)){ue=!1;break}if(ue)return ye}return-1}function A(V,L,H,J){return G(function(ne){for(var se=[],fe=0;fe<ne.length;++fe)se.push(255&ne.charCodeAt(fe));return se}(L),V,H,J)}function C(V,L,H,J){return G(function(ne,se){for(var fe,xe,he=[],_e=0;_e<ne.length&&!((se-=2)<0);++_e)xe=ne.charCodeAt(_e),fe=xe>>8,xe=xe%256,he.push(xe),he.push(fe);return he}(L,V.length-H),V,H,J)}function I(V,L,H){H=Math.min(V.length,H);for(var J=[],ne=L;ne<H;){var se,fe,xe,he,_e=V[ne],ye=null,ue=239<_e?4:223<_e?3:191<_e?2:1;if(ne+ue<=H)switch(ue){case 1:_e<128&&(ye=_e);break;case 2:(192&(se=V[ne+1]))==128&&127<(he=(31&_e)<<6|63&se)&&(ye=he);break;case 3:se=V[ne+1],fe=V[ne+2],(192&se)==128&&(192&fe)==128&&2047<(he=(15&_e)<<12|(63&se)<<6|63&fe)&&(he<55296||57343<he)&&(ye=he);break;case 4:se=V[ne+1],fe=V[ne+2],xe=V[ne+3],(192&se)==128&&(192&fe)==128&&(192&xe)==128&&65535<(he=(15&_e)<<18|(63&se)<<12|(63&fe)<<6|63&xe)&&he<1114112&&(ye=he)}ye===null?(ye=65533,ue=1):65535<ye&&(ye-=65536,J.push(ye>>>10&1023|55296),ye=56320|1023&ye),J.push(ye),ne+=ue}var pe=J,ke=pe.length;if(ke<=F)return String.fromCharCode.apply(String,pe);for(var Ie="",Y=0;Y<ke;)Ie+=String.fromCharCode.apply(String,pe.slice(Y,Y+=F));return Ie}l.kMaxLength=m,(u.TYPED_ARRAY_SUPPORT=function(){try{var V=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(V,L),V.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=p,Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(V,L,H){return L=L,H=H,g(V=V),!(V<=0)&&L!==void 0?typeof H=="string"?_(V).fill(L,H):_(V).fill(L):_(V)},u.allocUnsafe=y,u.allocUnsafeSlow=y,u.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==u.prototype},u.compare=function(V,L){if(K(V,Uint8Array)&&(V=u.from(V,V.offset,V.byteLength)),K(L,Uint8Array)&&(L=u.from(L,L.offset,L.byteLength)),!u.isBuffer(V)||!u.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===L)return 0;for(var H=V.length,J=L.length,ne=0,se=Math.min(H,J);ne<se;++ne)if(V[ne]!==L[ne]){H=V[ne],J=L[ne];break}return H<J?-1:J<H?1:0},u.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(V,L){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return u.alloc(0);if(L===void 0)for(ne=L=0;ne<V.length;++ne)L+=V[ne].length;for(var H=u.allocUnsafe(L),J=0,ne=0;ne<V.length;++ne){var se=V[ne];if(K(se,Uint8Array)&&(se=u.from(se)),!u.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(H,J),J+=se.length}return H},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var V=this.length;if(V%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<V;L+=2)k(this,L,L+1);return this},u.prototype.swap32=function(){var V=this.length;if(V%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<V;L+=4)k(this,L,L+3),k(this,L+1,L+2);return this},u.prototype.swap64=function(){var V=this.length;if(V%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<V;L+=8)k(this,L,L+7),k(this,L+1,L+6),k(this,L+2,L+5),k(this,L+3,L+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var V=this.length;return V===0?"":arguments.length===0?I(this,0,V):x.apply(this,arguments)},u.prototype.equals=function(V){if(u.isBuffer(V))return this===V||u.compare(this,V)===0;throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var L="",V=l.INSPECT_MAX_BYTES,L=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim();return this.length>V&&(L+=" ... "),"<Buffer "+L+">"},f&&(u.prototype[f]=u.prototype.inspect),u.prototype.compare=function(V,L,H,J,ne){if(K(V,Uint8Array)&&(V=u.from(V,V.offset,V.byteLength)),!u.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(H===void 0&&(H=V?V.length:0),J===void 0&&(J=0),ne===void 0&&(ne=this.length),(L=L===void 0?0:L)<0||H>V.length||J<0||ne>this.length)throw new RangeError("out of range index");if(ne<=J&&H<=L)return 0;if(ne<=J)return-1;if(H<=L)return 1;if(this===V)return 0;for(var se=(ne>>>=0)-(J>>>=0),fe=(H>>>=0)-(L>>>=0),xe=Math.min(se,fe),he=this.slice(J,ne),_e=V.slice(L,H),ye=0;ye<xe;++ye)if(he[ye]!==_e[ye]){se=he[ye],fe=_e[ye];break}return se<fe?-1:fe<se?1:0},u.prototype.includes=function(V,L,H){return this.indexOf(V,L,H)!==-1},u.prototype.indexOf=function(V,L,H){return T(this,V,L,H,!0)},u.prototype.lastIndexOf=function(V,L,H){return T(this,V,L,H,!1)},u.prototype.write=function(V,L,H,J){if(L===void 0)J="utf8",H=this.length,L=0;else if(H===void 0&&typeof L=="string")J=L,H=this.length,L=0;else{if(!isFinite(L))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");L>>>=0,isFinite(H)?(H>>>=0,J===void 0&&(J="utf8")):(J=H,H=void 0)}var ne=this.length-L;if((H===void 0||ne<H)&&(H=ne),0<V.length&&(H<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");J=J||"utf8";for(var se,fe,xe,he=!1;;)switch(J){case"hex":var _e=this,ye=V,ue=L,pe=H,ke=(ue=Number(ue)||0,_e.length-ue);(!pe||ke<(pe=Number(pe)))&&(pe=ke),(ke=ye.length)/2<pe&&(pe=ke/2);for(var Ie=0;Ie<pe;++Ie){var Y=parseInt(ye.substr(2*Ie,2),16);if(Z(Y))return Ie;_e[ue+Ie]=Y}return Ie;case"utf8":case"utf-8":return ke=L,xe=H,G(X(V,(fe=this).length-ke),fe,ke,xe);case"ascii":return A(this,V,L,H);case"latin1":case"binary":return A(this,V,L,H);case"base64":return fe=this,xe=L,se=H,G(O(V),fe,xe,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,V,L,H);default:if(he)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),he=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function N(V,L,H){if(V%1!=0||V<0)throw new RangeError("offset is not uint");if(H<V+L)throw new RangeError("Trying to access beyond buffer length")}function z(V,L,H,J,ne,se){if(!u.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne<L||L<se)throw new RangeError('"value" argument is out of bounds');if(H+J>V.length)throw new RangeError("Index out of range")}function R(V,L,H,J){if(H+J>V.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function q(V,L,H,J,ne){return L=+L,H>>>=0,ne||R(V,0,H,4),i.write(V,L,H,J,23,4),H+4}function M(V,L,H,J,ne){return L=+L,H>>>=0,ne||R(V,0,H,8),i.write(V,L,H,J,52,8),H+8}u.prototype.slice=function(V,L){var H=this.length,H=((V=~~V)<0?(V+=H)<0&&(V=0):H<V&&(V=H),(L=L===void 0?H:~~L)<0?(L+=H)<0&&(L=0):H<L&&(L=H),L<V&&(L=V),this.subarray(V,L));return Object.setPrototypeOf(H,u.prototype),H},u.prototype.readUIntLE=function(V,L,H){V>>>=0,L>>>=0,H||N(V,L,this.length);for(var J=this[V],ne=1,se=0;++se<L&&(ne*=256);)J+=this[V+se]*ne;return J},u.prototype.readUIntBE=function(V,L,H){V>>>=0,L>>>=0,H||N(V,L,this.length);for(var J=this[V+--L],ne=1;0<L&&(ne*=256);)J+=this[V+--L]*ne;return J},u.prototype.readUInt8=function(V,L){return V>>>=0,L||N(V,1,this.length),this[V]},u.prototype.readUInt16LE=function(V,L){return V>>>=0,L||N(V,2,this.length),this[V]|this[V+1]<<8},u.prototype.readUInt16BE=function(V,L){return V>>>=0,L||N(V,2,this.length),this[V]<<8|this[V+1]},u.prototype.readUInt32LE=function(V,L){return V>>>=0,L||N(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+16777216*this[V+3]},u.prototype.readUInt32BE=function(V,L){return V>>>=0,L||N(V,4,this.length),16777216*this[V]+(this[V+1]<<16|this[V+2]<<8|this[V+3])},u.prototype.readIntLE=function(V,L,H){V>>>=0,L>>>=0,H||N(V,L,this.length);for(var J=this[V],ne=1,se=0;++se<L&&(ne*=256);)J+=this[V+se]*ne;return(ne*=128)<=J&&(J-=Math.pow(2,8*L)),J},u.prototype.readIntBE=function(V,L,H){V>>>=0,L>>>=0,H||N(V,L,this.length);for(var J=L,ne=1,se=this[V+--J];0<J&&(ne*=256);)se+=this[V+--J]*ne;return(ne*=128)<=se&&(se-=Math.pow(2,8*L)),se},u.prototype.readInt8=function(V,L){return V>>>=0,L||N(V,1,this.length),128&this[V]?-1*(255-this[V]+1):this[V]},u.prototype.readInt16LE=function(V,L){return V>>>=0,L||N(V,2,this.length),L=this[V]|this[V+1]<<8,32768&L?4294901760|L:L},u.prototype.readInt16BE=function(V,L){return V>>>=0,L||N(V,2,this.length),L=this[V+1]|this[V]<<8,32768&L?4294901760|L:L},u.prototype.readInt32LE=function(V,L){return V>>>=0,L||N(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},u.prototype.readInt32BE=function(V,L){return V>>>=0,L||N(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},u.prototype.readFloatLE=function(V,L){return V>>>=0,L||N(V,4,this.length),i.read(this,V,!0,23,4)},u.prototype.readFloatBE=function(V,L){return V>>>=0,L||N(V,4,this.length),i.read(this,V,!1,23,4)},u.prototype.readDoubleLE=function(V,L){return V>>>=0,L||N(V,8,this.length),i.read(this,V,!0,52,8)},u.prototype.readDoubleBE=function(V,L){return V>>>=0,L||N(V,8,this.length),i.read(this,V,!1,52,8)},u.prototype.writeUIntLE=function(V,L,H,J){V=+V,L>>>=0,H>>>=0,J||z(this,V,L,H,Math.pow(2,8*H)-1,0);var ne=1,se=0;for(this[L]=255&V;++se<H&&(ne*=256);)this[L+se]=V/ne&255;return L+H},u.prototype.writeUIntBE=function(V,L,H,J){V=+V,L>>>=0,H>>>=0,J||z(this,V,L,H,Math.pow(2,8*H)-1,0);var ne=H-1,se=1;for(this[L+ne]=255&V;0<=--ne&&(se*=256);)this[L+ne]=V/se&255;return L+H},u.prototype.writeUInt8=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,1,255,0),this[L]=255&V,L+1},u.prototype.writeUInt16LE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,2,65535,0),this[L]=255&V,this[L+1]=V>>>8,L+2},u.prototype.writeUInt16BE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,2,65535,0),this[L]=V>>>8,this[L+1]=255&V,L+2},u.prototype.writeUInt32LE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,4,4294967295,0),this[L+3]=V>>>24,this[L+2]=V>>>16,this[L+1]=V>>>8,this[L]=255&V,L+4},u.prototype.writeUInt32BE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,4,4294967295,0),this[L]=V>>>24,this[L+1]=V>>>16,this[L+2]=V>>>8,this[L+3]=255&V,L+4},u.prototype.writeIntLE=function(V,L,H,J){V=+V,L>>>=0,J||z(this,V,L,H,(J=Math.pow(2,8*H-1))-1,-J);var ne=0,se=1,fe=0;for(this[L]=255&V;++ne<H&&(se*=256);)V<0&&fe===0&&this[L+ne-1]!==0&&(fe=1),this[L+ne]=(V/se>>0)-fe&255;return L+H},u.prototype.writeIntBE=function(V,L,H,J){V=+V,L>>>=0,J||z(this,V,L,H,(J=Math.pow(2,8*H-1))-1,-J);var ne=H-1,se=1,fe=0;for(this[L+ne]=255&V;0<=--ne&&(se*=256);)V<0&&fe===0&&this[L+ne+1]!==0&&(fe=1),this[L+ne]=(V/se>>0)-fe&255;return L+H},u.prototype.writeInt8=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,1,127,-128),this[L]=255&(V=V<0?255+V+1:V),L+1},u.prototype.writeInt16LE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,2,32767,-32768),this[L]=255&V,this[L+1]=V>>>8,L+2},u.prototype.writeInt16BE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,2,32767,-32768),this[L]=V>>>8,this[L+1]=255&V,L+2},u.prototype.writeInt32LE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,4,2147483647,-2147483648),this[L]=255&V,this[L+1]=V>>>8,this[L+2]=V>>>16,this[L+3]=V>>>24,L+4},u.prototype.writeInt32BE=function(V,L,H){return V=+V,L>>>=0,H||z(this,V,L,4,2147483647,-2147483648),this[L]=(V=V<0?4294967295+V+1:V)>>>24,this[L+1]=V>>>16,this[L+2]=V>>>8,this[L+3]=255&V,L+4},u.prototype.writeFloatLE=function(V,L,H){return q(this,V,L,!0,H)},u.prototype.writeFloatBE=function(V,L,H){return q(this,V,L,!1,H)},u.prototype.writeDoubleLE=function(V,L,H){return M(this,V,L,!0,H)},u.prototype.writeDoubleBE=function(V,L,H){return M(this,V,L,!1,H)},u.prototype.copy=function(V,L,H,J){if(!u.isBuffer(V))throw new TypeError("argument should be a Buffer");if(H=H||0,J||J===0||(J=this.length),L>=V.length&&(L=V.length),(J=0<J&&J<H?H:J)===H||V.length===0||this.length===0)return 0;if((L=L||0)<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length);var ne=(J=V.length-L<J-H?V.length-L+H:J)-H;if(this===V&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(L,H,J);else if(this===V&&H<L&&L<J)for(var se=ne-1;0<=se;--se)V[se+L]=this[se+H];else Uint8Array.prototype.set.call(V,this.subarray(H,J),L);return ne},u.prototype.fill=function(V,L,H,J){if(typeof V=="string"){if(typeof L=="string"?(J=L,L=0,H=this.length):typeof H=="string"&&(J=H,H=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!u.isEncoding(J))throw new TypeError("Unknown encoding: "+J);var ne;V.length===1&&(ne=V.charCodeAt(0),(J==="utf8"&&ne<128||J==="latin1")&&(V=ne))}else typeof V=="number"?V&=255:typeof V=="boolean"&&(V=Number(V));if(L<0||this.length<L||this.length<H)throw new RangeError("Out of range index");var se;if(!(H<=L))if(L>>>=0,H=H===void 0?this.length:H>>>0,typeof(V=V||0)=="number")for(se=L;se<H;++se)this[se]=V;else{var fe=u.isBuffer(V)?V:u.from(V,J),xe=fe.length;if(xe===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(se=0;se<H-L;++se)this[se+L]=fe[se%xe]}return this};var D=/[^+/0-9A-Za-z-_]/g;function X(V,L){L=L||1/0;for(var H,J=V.length,ne=null,se=[],fe=0;fe<J;++fe){if(55295<(H=V.charCodeAt(fe))&&H<57344){if(!ne){if(56319<H){-1<(L-=3)&&se.push(239,191,189);continue}if(fe+1===J){-1<(L-=3)&&se.push(239,191,189);continue}ne=H;continue}if(H<56320){-1<(L-=3)&&se.push(239,191,189),ne=H;continue}H=65536+(ne-55296<<10|H-56320)}else ne&&-1<(L-=3)&&se.push(239,191,189);if(ne=null,H<128){if(--L<0)break;se.push(H)}else if(H<2048){if((L-=2)<0)break;se.push(H>>6|192,63&H|128)}else if(H<65536){if((L-=3)<0)break;se.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;se.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return se}function O(V){return c.toByteArray(function(L){if((L=(L=L.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L}(V))}function G(V,L,H,J){for(var ne=0;ne<J&&!(ne+H>=L.length||ne>=V.length);++ne)L[ne+H]=V[ne];return ne}function K(V,L){return V instanceof L||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===L.name}function Z(V){return V!=V}var U=function(){for(var V="0123456789abcdef",L=new Array(256),H=0;H<16;++H)for(var J=16*H,ne=0;ne<16;++ne)L[J+ne]=V[H]+V[ne];return L}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:246}],5:[function(t,a,l){a.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(t,a,l){var o=t("../internals/is-object");a.exports=function(c){if(o(c)||c===null)return c;throw TypeError("Can't set "+String(c)+" as a prototype")}},{"../internals/is-object":74}],7:[function(i,a,l){var o=i("../internals/well-known-symbol"),c=i("../internals/object-create"),i=i("../internals/object-define-property"),f=o("unscopables"),m=Array.prototype;m[f]==null&&i.f(m,f,{configurable:!0,value:c(null)}),a.exports=function(_){m[f][_]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(t,a,l){var o=t("../internals/string-multibyte").charAt;a.exports=function(c,i,f){return i+(f?o(c,i).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,a,l){a.exports=function(o,c,i){if(o instanceof c)return o;throw TypeError("Incorrect "+(i?i+" ":"")+"invocation")}},{}],10:[function(t,a,l){var o=t("../internals/is-object");a.exports=function(c){if(o(c))return c;throw TypeError(String(c)+" is not an object")}},{"../internals/is-object":74}],11:[function(t,a,l){a.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(R,a,l){function o(M){return _(M)&&u(q,p(M))}var c,i=R("../internals/array-buffer-native"),f=R("../internals/descriptors"),m=R("../internals/global"),_=R("../internals/is-object"),u=R("../internals/has"),p=R("../internals/classof"),g=R("../internals/create-non-enumerable-property"),y=R("../internals/redefine"),S=R("../internals/object-define-property").f,b=R("../internals/object-get-prototype-of"),E=R("../internals/object-set-prototype-of"),F=R("../internals/well-known-symbol"),R=R("../internals/uid"),x=m.Int8Array,k=x&&x.prototype,T=m.Uint8ClampedArray,T=T&&T.prototype,j=x&&b(x),A=k&&b(k),C=Object.prototype,I=C.isPrototypeOf,F=F("toStringTag"),N=R("TYPED_ARRAY_TAG"),z=i&&!!E&&p(m.opera)!=="Opera",R=!1,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(c in q)m[c]||(z=!1);if((!z||typeof j!="function"||j===Function.prototype)&&(j=function(){throw TypeError("Incorrect invocation")},z))for(c in q)m[c]&&E(m[c],j);if((!z||!A||A===C)&&(A=j.prototype,z))for(c in q)m[c]&&E(m[c].prototype,A);if(z&&b(T)!==A&&E(T,A),f&&!u(A,F))for(c in R=!0,S(A,F,{get:function(){return _(this)?this[N]:void 0}}),q)m[c]&&g(m[c],N,c);a.exports={NATIVE_ARRAY_BUFFER_VIEWS:z,TYPED_ARRAY_TAG:R&&N,aTypedArray:function(M){if(o(M))return M;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(M){if(E){if(I.call(j,M))return M}else for(var D in q)if(u(q,c)&&(D=m[D],D&&(M===D||I.call(D,M))))return M;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(M,D,X){if(f){if(X)for(var O in q)O=m[O],O&&u(O.prototype,M)&&delete O.prototype[M];A[M]&&!X||y(A,M,!X&&z&&k[M]||D)}},exportTypedArrayStaticMethod:function(M,D,X){var O,G;if(f){if(E){if(X)for(O in q)(G=m[O])&&u(G,M)&&delete G[M];if(j[M]&&!X)return;try{return y(j,M,!X&&z&&x[M]||D)}catch{}}for(O in q)!(G=m[O])||G[M]&&!X||y(G,M,D)}},isView:function(M){return M=p(M),M==="DataView"||u(q,M)},isTypedArray:o,TypedArray:j,TypedArrayPrototype:A}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(H,a,l){function o(ue){return[255&ue]}function c(ue){return[255&ue,ue>>8&255]}function i(ue){return[255&ue,ue>>8&255,ue>>16&255,ue>>24&255]}function f(ue){return ue[3]<<24|ue[2]<<16|ue[1]<<8|ue[0]}function m(ue){return se(ue,23,4)}function _(ue){return se(ue,52,8)}function u(ue,pe){R(ue[K],pe,{get:function(){return D(this)[pe]}})}function p(re,pe,te,Ie){if(te=C(te),re=D(re),te+pe>re.byteLength)throw ne(Z);var Y=D(re.buffer).bytes,te=te+re.byteOffset,re=Y.slice(te,te+pe);return Ie?re:re.reverse()}function g(ue,pe,ke,Ie,Y,te){if(ke=C(ke),ue=D(ue),ke+pe>ue.byteLength)throw ne(Z);for(var re=D(ue.buffer).bytes,be=ke+ue.byteOffset,ve=Ie(+Y),je=0;je<pe;je++)re[be+je]=ve[te?je:pe-je-1]}var y=H("../internals/global"),S=H("../internals/descriptors"),b=H("../internals/array-buffer-native"),E=H("../internals/create-non-enumerable-property"),x=H("../internals/redefine-all"),k=H("../internals/fails"),T=H("../internals/an-instance"),j=H("../internals/to-integer"),A=H("../internals/to-length"),C=H("../internals/to-index"),I=H("../internals/ieee754"),F=H("../internals/object-get-prototype-of"),N=H("../internals/object-set-prototype-of"),z=H("../internals/object-get-own-property-names").f,R=H("../internals/object-define-property").f,q=H("../internals/array-fill"),M=H("../internals/set-to-string-tag"),H=H("../internals/internal-state"),D=H.get,X=H.set,O="ArrayBuffer",G="DataView",K="prototype",Z="Wrong index",U=y[O],V=U,L=y[G],H=L&&L[K],J=Object.prototype,ne=y.RangeError,se=I.pack,fe=I.unpack;if(b){if(!k(function(){U(1)})||!k(function(){new U(-1)})||k(function(){return new U,new U(1.5),new U(NaN),U.name!=O})){for(var xe,y=(V=function(ke){return T(this,V),new U(C(ke))})[K]=U[K],he=z(U),_e=0;he.length>_e;)(xe=he[_e++])in V||E(V,xe,U[xe]);y.constructor=V}N&&F(H)!==J&&N(H,J);var I=new L(new V(2)),ye=H.setInt8;I.setInt8(0,2147483648),I.setInt8(1,2147483649),!I.getInt8(0)&&I.getInt8(1)||x(H,{setInt8:function(pe,ke){ye.call(this,pe,ke<<24>>24)},setUint8:function(pe,ke){ye.call(this,pe,ke<<24>>24)}},{unsafe:!0})}else V=function(ue){T(this,V,O),ue=C(ue),X(this,{bytes:q.call(new Array(ue),0),byteLength:ue}),S||(this.byteLength=ue)},L=function(ue,Y,ke){T(this,L,G),T(ue,V,G);var Ie=D(ue).byteLength,Y=j(Y);if(Y<0||Ie<Y)throw ne("Wrong offset");if(Ie<Y+(ke=ke===void 0?Ie-Y:A(ke)))throw ne("Wrong length");X(this,{buffer:ue,byteLength:ke,byteOffset:Y}),S||(this.buffer=ue,this.byteLength=ke,this.byteOffset=Y)},S&&(u(V,"byteLength"),u(L,"buffer"),u(L,"byteLength"),u(L,"byteOffset")),x(L[K],{getInt8:function(ue){return p(this,1,ue)[0]<<24>>24},getUint8:function(ue){return p(this,1,ue)[0]},getInt16:function(ue){return ue=p(this,2,ue,1<arguments.length?arguments[1]:void 0),(ue[1]<<8|ue[0])<<16>>16},getUint16:function(ue){return ue=p(this,2,ue,1<arguments.length?arguments[1]:void 0),ue[1]<<8|ue[0]},getInt32:function(ue){return f(p(this,4,ue,1<arguments.length?arguments[1]:void 0))},getUint32:function(ue){return f(p(this,4,ue,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ue){return fe(p(this,4,ue,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ue){return fe(p(this,8,ue,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ue,pe){g(this,1,ue,o,pe)},setUint8:function(ue,pe){g(this,1,ue,o,pe)},setInt16:function(ue,pe){g(this,2,ue,c,pe,2<arguments.length?arguments[2]:void 0)},setUint16:function(ue,pe){g(this,2,ue,c,pe,2<arguments.length?arguments[2]:void 0)},setInt32:function(ue,pe){g(this,4,ue,i,pe,2<arguments.length?arguments[2]:void 0)},setUint32:function(ue,pe){g(this,4,ue,i,pe,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ue,pe){g(this,4,ue,m,pe,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ue,pe){g(this,8,ue,_,pe,2<arguments.length?arguments[2]:void 0)}});M(V,O),M(L,G),a.exports={ArrayBuffer:V,DataView:L}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(t,a,l){var o=t("../internals/to-object"),c=t("../internals/to-absolute-index"),i=t("../internals/to-length"),f=Math.min;a.exports=[].copyWithin||function(S,_){var u=o(this),p=i(u.length),g=c(S,p),y=c(_,p),S=2<arguments.length?arguments[2]:void 0,b=f((S===void 0?p:c(S,p))-y,p-g),E=1;for(y<g&&g<y+b&&(E=-1,y+=b-1,g+=b-1);0<b--;)y in u?u[g]=u[y]:delete u[g],g+=E,y+=E;return u}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(t,a,l){var o=t("../internals/to-object"),c=t("../internals/to-absolute-index"),i=t("../internals/to-length");a.exports=function(f){for(var m=o(this),_=i(m.length),p=arguments.length,u=c(1<p?arguments[1]:void 0,_),p=2<p?arguments[2]:void 0,g=p===void 0?_:c(p,_);u<g;)m[u++]=f;return m}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(i,a,l){var o=i("../internals/array-iteration").forEach,c=i("../internals/array-method-is-strict"),i=i("../internals/array-method-uses-to-length"),c=c("forEach"),i=i("forEach");a.exports=c&&i?[].forEach:function(f){return o(this,f,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,a,l){var o=t("../internals/function-bind-context"),c=t("../internals/to-object"),i=t("../internals/call-with-safe-iteration-closing"),f=t("../internals/is-array-iterator-method"),m=t("../internals/to-length"),_=t("../internals/create-property"),u=t("../internals/get-iterator-method");a.exports=function(T){var g,y,S,b,E,x,k=c(T),T=typeof this=="function"?this:Array,j=arguments.length,A=1<j?arguments[1]:void 0,C=A!==void 0,I=u(k),F=0;if(C&&(A=o(A,2<j?arguments[2]:void 0,2)),I==null||T==Array&&f(I))for(y=new T(g=m(k.length));F<g;F++)x=C?A(k[F],F):k[F],_(y,F,x);else for(E=(b=I.call(k)).next,y=new T;!(S=E.call(b)).done;F++)x=C?i(b,A,[S.value,F],!0):S.value,_(y,F,x);return y.length=F,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(t,a,l){function o(m){return function(_,u,p){var g,y=c(_),S=i(y.length),b=f(p,S);if(m&&u!=u){for(;b<S;)if((g=y[b++])!=g)return!0}else for(;b<S;b++)if((m||b in y)&&y[b]===u)return m||b||0;return!m&&-1}}var c=t("../internals/to-indexed-object"),i=t("../internals/to-length"),f=t("../internals/to-absolute-index");a.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(t,a,l){function o(p){var g=p==1,y=p==2,S=p==3,b=p==4,E=p==6,x=p==5||E;return function(k,T,j,A){for(var C,I,F=f(k),N=i(F),z=c(T,j,3),R=m(N.length),q=0,T=A||_,M=g?T(k,R):y?T(k,0):void 0;q<R;q++)if((x||q in N)&&(I=z(C=N[q],q,F),p)){if(g)M[q]=I;else if(I)switch(p){case 3:return!0;case 5:return C;case 6:return q;case 2:u.call(M,C)}else if(b)return!1}return E?-1:S||b?b:M}}var c=t("../internals/function-bind-context"),i=t("../internals/indexed-object"),f=t("../internals/to-object"),m=t("../internals/to-length"),_=t("../internals/array-species-create"),u=[].push;a.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(p,a,l){var o=p("../internals/to-indexed-object"),c=p("../internals/to-integer"),i=p("../internals/to-length"),u=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),f=Math.min,m=[].lastIndexOf,_=!!m&&1/[1].lastIndexOf(1,-0)<0,u=u("lastIndexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});a.exports=_||!u||!p?function(g){if(_)return m.apply(this,arguments)||0;var y=o(this),S=i(y.length),b=S-1;for((b=1<arguments.length?f(b,c(arguments[1])):b)<0&&(b=S+b);0<=b;b--)if(b in y&&y[b]===g)return b||0;return-1}:m},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/well-known-symbol"),i=t("../internals/engine-v8-version"),f=c("species");a.exports=function(m){return 51<=i||!o(function(){var _=[];return(_.constructor={})[f]=function(){return{foo:1}},_[m](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(t,a,l){var o=t("../internals/fails");a.exports=function(c,i){var f=[][c];return!!f&&o(function(){f.call(null,i||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,a,l){function o(u){throw u}var c=t("../internals/descriptors"),i=t("../internals/fails"),f=t("../internals/has"),m=Object.defineProperty,_={};a.exports=function(u,p){var g,y,S,b;return f(_,u)?_[u]:(g=[][u],y=!!f(p=p||{},"ACCESSORS")&&p.ACCESSORS,S=f(p,0)?p[0]:o,b=f(p,1)?p[1]:void 0,_[u]=!!g&&!i(function(){if(y&&!c)return!0;var E={length:-1};y?m(E,1,{enumerable:!0,get:o}):E[1]=1,g.call(E,S,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(t,a,l){function o(_){return function(u,p,g,y){c(p);var S=i(u),b=f(S),E=m(S.length),x=_?E-1:0,k=_?-1:1;if(g<2)for(;;){if(x in b){y=b[x],x+=k;break}if(x+=k,_?x<0:E<=x)throw TypeError("Reduce of empty array with no initial value")}for(;_?0<=x:x<E;x+=k)x in b&&(y=p(y,b[x],x,S));return y}}var c=t("../internals/a-function"),i=t("../internals/to-object"),f=t("../internals/indexed-object"),m=t("../internals/to-length");a.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(t,a,l){var o=t("../internals/is-object"),c=t("../internals/is-array"),i=t("../internals/well-known-symbol")("species");a.exports=function(f,m){var _;return new((_=c(f)&&(typeof(_=f.constructor)=="function"&&(_===Array||c(_.prototype))||o(_)&&(_=_[i])===null)?void 0:_)===void 0?Array:_)(m===0?0:m)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(t,a,l){var o=t("../internals/an-object");a.exports=function(c,i,f,m){try{return m?i(o(f)[0],f[1]):i(f)}catch(_){throw m=c.return,m!==void 0&&o(m.call(c)),_}}},{"../internals/an-object":10}],27:[function(t,a,l){var o=t("../internals/well-known-symbol")("iterator"),c=!1;try{var i=0,f={next:function(){return{done:!!i++}},return:function(){c=!0}};f[o]=function(){return this},Array.from(f,function(){throw 2})}catch{}a.exports=function(m,_){if(!_&&!c)return!1;var u=!1;try{var p={};p[o]=function(){return{next:function(){return{done:u=!0}}}},m(p)}catch{}return u}},{"../internals/well-known-symbol":148}],28:[function(t,a,l){var o={}.toString;a.exports=function(c){return o.call(c).slice(8,-1)}},{}],29:[function(t,a,l){var o=t("../internals/to-string-tag-support"),c=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("toStringTag"),f=c(function(){return arguments}())=="Arguments";a.exports=o?c:function(m){var _;return m===void 0?"Undefined":m===null?"Null":typeof(_=function(u,p){try{return u[p]}catch{}}(m=Object(m),i))=="string"?_:f?c(m):(_=c(m))=="Object"&&typeof m.callee=="function"?"Arguments":_}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(S,a,l){var o=S("../internals/object-define-property").f,c=S("../internals/object-create"),i=S("../internals/redefine-all"),f=S("../internals/function-bind-context"),m=S("../internals/an-instance"),_=S("../internals/iterate"),u=S("../internals/define-iterator"),p=S("../internals/set-species"),g=S("../internals/descriptors"),y=S("../internals/internal-metadata").fastKey,S=S("../internals/internal-state"),b=S.set,E=S.getterFor;a.exports={getConstructor:function(x,k,T,j){function A(N,z,R){var q,M=F(N),D=C(N,z);return D?D.value=R:(M.last=D={index:q=y(z,!0),key:z,value:R,previous:z=M.last,next:void 0,removed:!1},M.first||(M.first=D),z&&(z.next=D),g?M.size++:N.size++,q!=="F"&&(M.index[q]=D)),N}function C(q,z){var R,q=F(q),M=y(z);if(M!=="F")return q.index[M];for(R=q.first;R;R=R.next)if(R.key==z)return R}var I=x(function(N,z){m(N,I,k),b(N,{type:k,index:c(null),first:void 0,last:void 0,size:0}),g||(N.size=0),z!=null&&_(z,N[j],N,T)}),F=E(k);return i(I.prototype,{clear:function(){for(var N=F(this),z=N.index,R=N.first;R;)R.removed=!0,R.previous&&(R.previous=R.previous.next=void 0),delete z[R.index],R=R.next;N.first=N.last=void 0,g?N.size=0:this.size=0},delete:function(M){var z,R,q=F(this),M=C(this,M);return M&&(z=M.next,R=M.previous,delete q.index[M.index],M.removed=!0,R&&(R.next=z),z&&(z.previous=R),q.first==M&&(q.first=z),q.last==M&&(q.last=R),g?q.size--:this.size--),!!M},forEach:function(N){for(var z,R=F(this),q=f(N,1<arguments.length?arguments[1]:void 0,3);z=z?z.next:R.first;)for(q(z.value,z.key,this);z&&z.removed;)z=z.previous},has:function(N){return!!C(this,N)}}),i(I.prototype,T?{get:function(N){return N=C(this,N),N&&N.value},set:function(N,z){return A(this,N===0?0:N,z)}}:{add:function(N){return A(this,N=N===0?0:N,N)}}),g&&o(I.prototype,"size",{get:function(){return F(this).size}}),I},setStrong:function(x,k,T){var j=k+" Iterator",A=E(k),C=E(j);u(x,k,function(I,F){b(this,{type:j,target:I,state:A(I),kind:F,last:void 0})},function(){for(var I=C(this),F=I.kind,N=I.last;N&&N.removed;)N=N.previous;return I.target&&(I.last=N=N?N.next:I.state.first)?F=="keys"?{value:N.key,done:!1}:F=="values"?{value:N.value,done:!1}:{value:[N.key,N.value],done:!1}:{value:I.target=void 0,done:!0}},T?"entries":"values",!T,!0),p(k)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(b,a,l){function o(A){return A.frozen||(A.frozen=new c)}function c(){this.entries=[]}function i(A,C){return k(A.entries,function(I){return I[0]===C})}var f=b("../internals/redefine-all"),m=b("../internals/internal-metadata").getWeakData,_=b("../internals/an-object"),u=b("../internals/is-object"),p=b("../internals/an-instance"),g=b("../internals/iterate"),y=b("../internals/array-iteration"),S=b("../internals/has"),b=b("../internals/internal-state"),E=b.set,x=b.getterFor,k=y.find,T=y.findIndex,j=0;c.prototype={get:function(A){if(A=i(this,A),A)return A[1]},has:function(A){return!!i(this,A)},set:function(A,C){var I=i(this,A);I?I[1]=C:this.entries.push([A,C])},delete:function(A){var C=T(this.entries,function(I){return I[0]===A});return~C&&this.entries.splice(C,1),!!~C}},a.exports={getConstructor:function(A,C,I,F){function N(q,M,D){var X=R(q),O=m(_(M),!0);return O===!0?o(X).set(M,D):O[X.id]=D,q}var z=A(function(q,M){p(q,z,C),E(q,{type:C,id:j++,frozen:void 0}),M!=null&&g(M,q[F],q,I)}),R=x(C);return f(z.prototype,{delete:function(q){var M,D=R(this);return!!u(q)&&((M=m(q))===!0?o(D).delete(q):M&&S(M,D.id)&&delete M[D.id])},has:function(q){var M,D=R(this);return!!u(q)&&((M=m(q))===!0?o(D).has(q):M&&S(M,D.id))}}),f(z.prototype,I?{get:function(q){var M,D=R(this);if(u(q))return(M=m(q))===!0?o(D).get(q):M?M[D.id]:void 0},set:function(q,M){return N(this,q,M)}}:{add:function(q){return N(this,q,!0)}}),z}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/global"),i=t("../internals/is-forced"),f=t("../internals/redefine"),m=t("../internals/internal-metadata"),_=t("../internals/iterate"),u=t("../internals/an-instance"),p=t("../internals/is-object"),g=t("../internals/fails"),y=t("../internals/check-correctness-of-iteration"),S=t("../internals/set-to-string-tag"),b=t("../internals/inherit-if-required");a.exports=function(E,x,k){function T(O){var G=M[O];f(M,O,O=="add"?function(K){return G.call(this,K===0?0:K),this}:O=="delete"?function(K){return!(z&&!p(K))&&G.call(this,K===0?0:K)}:O=="get"?function(K){return z&&!p(K)?void 0:G.call(this,K===0?0:K)}:O=="has"?function(K){return!(z&&!p(K))&&G.call(this,K===0?0:K)}:function(K,Z){return G.call(this,K===0?0:K,Z),this})}var j,A,C,I,F,N=E.indexOf("Map")!==-1,z=E.indexOf("Weak")!==-1,R=N?"set":"add",q=c[E],M=q&&q.prototype,D=q,X={};return i(E,typeof q!="function"||!(z||M.forEach&&!g(function(){new q().entries().next()})))?(D=k.getConstructor(x,E,N,R),m.REQUIRED=!0):i(E,!0)&&(A=(j=new D)[R](z?{}:-0,1)!=j,C=g(function(){j.has(1)}),I=y(function(O){new q(O)}),F=!z&&g(function(){for(var O=new q,G=5;G--;)O[R](G,G);return!O.has(-0)}),I||(((D=x(function(O,G){return u(O,D,E),O=b(new q,O,D),G!=null&&_(G,O[R],O,N),O})).prototype=M).constructor=D),(C||F)&&(T("delete"),T("has"),N&&T("get")),(F||A)&&T(R),z&&M.clear&&delete M.clear),X[E]=D,o({global:!0,forced:D!=q},X),S(D,E),z||k.setStrong(D,E,N),D}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(t,a,l){var o=t("../internals/has"),c=t("../internals/own-keys"),i=t("../internals/object-get-own-property-descriptor"),f=t("../internals/object-define-property");a.exports=function(m,_){for(var u=c(_),p=f.f,g=i.f,y=0;y<u.length;y++){var S=u[y];o(m,S)||p(m,S,g(_,S))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(t,a,l){var o=t("../internals/well-known-symbol")("match");a.exports=function(c){var i=/./;try{"/./"[c](i)}catch{try{return i[o]=!1,"/./"[c](i)}catch{}}return!1}},{"../internals/well-known-symbol":148}],35:[function(t,a,l){t=t("../internals/fails"),a.exports=!t(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(t,a,l){var o=t("../internals/require-object-coercible"),c=/"/g;a.exports=function(u,f,m,_){var u=String(o(u)),p="<"+f;return m!==""&&(p+=" "+m+'="'+String(_).replace(c,"&quot;")+'"'),p+">"+u+"</"+f+">"}},{"../internals/require-object-coercible":113}],37:[function(t,a,l){function o(){return this}var c=t("../internals/iterators-core").IteratorPrototype,i=t("../internals/object-create"),f=t("../internals/create-property-descriptor"),m=t("../internals/set-to-string-tag"),_=t("../internals/iterators");a.exports=function(u,p,g){return p+=" Iterator",u.prototype=i(c,{next:f(1,g)}),m(u,p,!1,!0),_[p]=o,u}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");a.exports=o?function(f,m,_){return c.f(f,m,i(1,_))}:function(f,m,_){return f[m]=_,f}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(t,a,l){a.exports=function(o,c){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:c}}},{}],40:[function(t,a,l){var o=t("../internals/to-primitive"),c=t("../internals/object-define-property"),i=t("../internals/create-property-descriptor");a.exports=function(f,m,_){m=o(m),m in f?c.f(f,m,i(0,_)):f[m]=_}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(b,a,l){function o(){return this}var c=b("../internals/export"),i=b("../internals/create-iterator-constructor"),f=b("../internals/object-get-prototype-of"),m=b("../internals/object-set-prototype-of"),_=b("../internals/set-to-string-tag"),u=b("../internals/create-non-enumerable-property"),p=b("../internals/redefine"),g=b("../internals/well-known-symbol"),y=b("../internals/is-pure"),S=b("../internals/iterators"),b=b("../internals/iterators-core"),E=b.IteratorPrototype,x=b.BUGGY_SAFARI_ITERATORS,k=g("iterator"),T="values",j="entries";a.exports=function(A,C,I,X,N,z,R){i(I,C,X);function q(V){if(V===N&&Z)return Z;if(!x&&V in G)return G[V];switch(V){case"keys":case T:case j:return function(){return new I(this,V)}}return function(){return new I(this)}}var M,D,X=C+" Iterator",O=!1,G=A.prototype,K=G[k]||G["@@iterator"]||N&&G[N],Z=!x&&K||q(N),U=C=="Array"&&G.entries||K;if(U&&(U=f(U.call(new A)),E!==Object.prototype&&U.next&&(y||f(U)===E||(m?m(U,E):typeof U[k]!="function"&&u(U,k,o)),_(U,X,!0,!0),y&&(S[X]=o))),N==T&&K&&K.name!==T&&(O=!0,Z=function(){return K.call(this)}),y&&!R||G[k]===Z||u(G,k,Z),S[C]=Z,N)if(M={values:q(T),keys:z?Z:q("keys"),entries:q(j)},R)for(D in M)!x&&!O&&D in G||p(G,D,M[D]);else c({target:C,proto:!0,forced:x||O},M);return M}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(t,a,l){var o=t("../internals/path"),c=t("../internals/has"),i=t("../internals/well-known-symbol-wrapped"),f=t("../internals/object-define-property").f;a.exports=function(m){var _=o.Symbol||(o.Symbol={});c(_,m)||f(_,m,{value:i.f(m)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(t,a,l){t=t("../internals/fails"),a.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(c,a,l){var o=c("../internals/global"),c=c("../internals/is-object"),i=o.document,f=c(i)&&c(i.createElement);a.exports=function(m){return f?i.createElement(m):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(t,a,l){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,a,l){t=t("../internals/engine-user-agent"),a.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,a,l){t=t("../internals/get-built-in"),a.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(i,a,l){var o,c,f=i("../internals/global"),i=i("../internals/engine-user-agent"),f=f.process,f=f&&f.versions,f=f&&f.v8;f?c=(o=f.split("."))[0]+o[1]:i&&(!(o=i.match(/Edge\/(\d+)/))||74<=o[1])&&(o=i.match(/Chrome\/(\d+)/))&&(c=o[1]),a.exports=c&&+c},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(t,a,l){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,a,l){var o=t("../internals/global"),c=t("../internals/object-get-own-property-descriptor").f,i=t("../internals/create-non-enumerable-property"),f=t("../internals/redefine"),m=t("../internals/set-global"),_=t("../internals/copy-constructor-properties"),u=t("../internals/is-forced");a.exports=function(p,g){var y,S,b,E=p.target,x=p.global,k=p.stat,T=x?o:k?o[E]||m(E,{}):(o[E]||{}).prototype;if(T)for(y in g){if(S=g[y],b=p.noTargetGet?(b=c(T,y))&&b.value:T[y],!u(x?y:E+(k?".":"#")+y,p.forced)&&b!==void 0){if(typeof S==typeof b)continue;_(S,b)}(p.sham||b&&b.sham)&&i(S,"sham",!0),f(T,y,S,p)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(t,a,l){a.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(g,a,l){g("../modules/es.regexp.exec");var o=g("../internals/redefine"),c=g("../internals/fails"),i=g("../internals/well-known-symbol"),f=g("../internals/regexp-exec"),m=g("../internals/create-non-enumerable-property"),_=i("species"),u=!c(function(){var b=/./;return b.exec=function(){var E=[];return E.groups={a:"7"},E},"".replace(b,"$<a>")!=="7"}),p="a".replace(/./,"$0")==="$0",g=i("replace"),y=!!/./[g]&&/./[g]("a","$0")==="",S=!c(function(){var E=/(?:)/,b=E.exec,E=(E.exec=function(){return b.apply(this,arguments)},"ab".split(E));return E.length!==2||E[0]!=="a"||E[1]!=="b"});a.exports=function(b,E,x,k){var T,j,A=i(b),C=!c(function(){var F={};return F[A]=function(){return 7},""[b](F)!=7}),I=C&&!c(function(){var F=!1,N=/a/;return b==="split"&&((N={constructor:{}}).constructor[_]=function(){return N},N.flags="",N[A]=/./[A]),N.exec=function(){return F=!0,null},N[A](""),!F});C&&I&&(b!=="replace"||u&&p&&!y)&&(b!=="split"||S)||(T=/./[A],x=(I=x(A,""[b],function(F,N,z,R,q){return N.exec===f?C&&!q?{done:!0,value:T.call(N,z,R)}:{done:!0,value:F.call(z,N,R)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],j=I[1],o(String.prototype,b,x),o(RegExp.prototype,A,E==2?function(F,N){return j.call(F,this,N)}:function(F){return j.call(F,this)})),k&&m(RegExp.prototype[A],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":187}],53:[function(t,a,l){t=t("../internals/fails"),a.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(t,a,l){var o=t("../internals/a-function");a.exports=function(c,i,f){if(o(c),i===void 0)return c;switch(f){case 0:return function(){return c.call(i)};case 1:return function(m){return c.call(i,m)};case 2:return function(m,_){return c.call(i,m,_)};case 3:return function(m,_,u){return c.call(i,m,_,u)}}return function(){return c.apply(i,arguments)}}},{"../internals/a-function":5}],55:[function(t,a,l){var o=t("../internals/a-function"),c=t("../internals/is-object"),i=[].slice,f={};a.exports=Function.bind||function(m){var _=o(this),u=i.call(arguments,1),p=function(){var g=u.concat(i.call(arguments));if(this instanceof p){var y=_,S=g.length,b=g;if(!(S in f)){for(var E=[],x=0;x<S;x++)E[x]="a["+x+"]";f[S]=Function("C,a","return new C("+E.join(",")+")")}return f[S](y,b)}return _.apply(m,g)};return c(_.prototype)&&(p.prototype=_.prototype),p}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,a,l){function o(f){return typeof f=="function"?f:void 0}var c=t("../internals/path"),i=t("../internals/global");a.exports=function(f,m){return arguments.length<2?o(c[f])||o(i[f]):c[f]&&c[f][m]||i[f]&&i[f][m]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,a,l){var o=t("../internals/classof"),c=t("../internals/iterators"),i=t("../internals/well-known-symbol")("iterator");a.exports=function(f){if(f!=null)return f[i]||f["@@iterator"]||c[o(f)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/get-iterator-method");a.exports=function(i){var f=c(i);if(typeof f!="function")throw TypeError(String(i)+" is not iterable");return o(f.call(i))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,a,l){(function(o){function c(i){return i&&i.Math==Math&&i}a.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(t,a,l){var o={}.hasOwnProperty;a.exports=function(c,i){return o.call(c,i)}},{}],61:[function(t,a,l){a.exports={}},{}],62:[function(t,a,l){var o=t("../internals/global");a.exports=function(c,i){var f=o.console;f&&f.error&&(arguments.length===1?f.error(c):f.error(c,i))}},{"../internals/global":59}],63:[function(t,a,l){t=t("../internals/get-built-in"),a.exports=t("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/fails"),i=t("../internals/document-create-element");a.exports=!o&&!c(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(t,a,l){var o=Math.abs,c=Math.pow,i=Math.floor,f=Math.log,m=Math.LN2;a.exports={pack:function(_,u,x){var g,y,S,b=new Array(x),E=8*x-u-1,x=(1<<E)-1,k=x>>1,T=u===23?c(2,-24)-c(2,-77):0,j=_<0||_===0&&1/_<0?1:0,A=0;for((_=o(_))!=_||_===1/0?(y=_!=_?1:0,g=x):(g=i(f(_)/m),_*(S=c(2,-g))<1&&(g--,S*=2),2<=(_+=1<=g+k?T/S:T*c(2,1-k))*S&&(g++,S/=2),x<=g+k?(y=0,g=x):1<=g+k?(y=(_*S-1)*c(2,u),g+=k):(y=_*c(2,k-1)*c(2,u),g=0));8<=u;b[A++]=255&y,y/=256,u-=8);for(g=g<<u|y,E+=u;0<E;b[A++]=255&g,g/=256,E-=8);return b[--A]|=128*j,b},unpack:function(_,u){var p,g=_.length,x=8*g-u-1,y=(1<<x)-1,S=y>>1,b=x-7,E=g-1,x=_[E--],k=127&x;for(x>>=7;0<b;k=256*k+_[E],E--,b-=8);for(p=k&(1<<-b)-1,k>>=-b,b+=u;0<b;p=256*p+_[E],E--,b-=8);if(k===0)k=1-S;else{if(k===y)return p?NaN:x?-1/0:1/0;p+=c(2,u),k-=S}return(x?-1:1)*p*c(2,k-u)}}},{}],66:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/classof-raw"),i="".split;a.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return c(f)=="String"?i.call(f,""):Object(f)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(t,a,l){var o=t("../internals/is-object"),c=t("../internals/object-set-prototype-of");a.exports=function(i,f,m){return c&&typeof(f=f.constructor)=="function"&&f!==m&&o(f=f.prototype)&&f!==m.prototype&&c(i,f),i}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(o,a,l){var o=o("../internals/shared-store"),c=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(i){return c.call(i)}),a.exports=o.inspectSource},{"../internals/shared-store":119}],69:[function(t,a,l){function o(b){m(b,p,{value:{objectID:"O"+ ++g,weakData:{}}})}var c=t("../internals/hidden-keys"),i=t("../internals/is-object"),f=t("../internals/has"),m=t("../internals/object-define-property").f,_=t("../internals/uid"),u=t("../internals/freezing"),p=_("meta"),g=0,y=Object.isExtensible||function(){return!0},S=a.exports={REQUIRED:!1,fastKey:function(b,E){if(!i(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!f(b,p)){if(!y(b))return"F";if(!E)return"E";o(b)}return b[p].objectID},getWeakData:function(b,E){if(!f(b,p)){if(!y(b))return!0;if(!E)return!1;o(b)}return b[p].weakData},onFreeze:function(b){return u&&S.REQUIRED&&y(b)&&!f(b,p)&&o(b),b}};c[p]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(x,a,l){var o,c,i,f,m,_,u,p,g=x("../internals/native-weak-map"),k=x("../internals/global"),y=x("../internals/is-object"),S=x("../internals/create-non-enumerable-property"),b=x("../internals/has"),E=x("../internals/shared-key"),x=x("../internals/hidden-keys"),k=k.WeakMap;u=g?(o=new k,c=o.get,i=o.has,f=o.set,m=function(T,j){return f.call(o,T,j),j},_=function(T){return c.call(o,T)||{}},function(T){return i.call(o,T)}):(x[p=E("state")]=!0,m=function(T,j){return S(T,p,j),j},_=function(T){return b(T,p)?T[p]:{}},function(T){return b(T,p)}),a.exports={set:m,get:_,has:u,enforce:function(T){return u(T)?_(T):m(T,{})},getterFor:function(T){return function(j){if(y(j)&&(j=_(j)).type===T)return j;throw TypeError("Incompatible receiver, "+T+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,a,l){var o=t("../internals/well-known-symbol"),c=t("../internals/iterators"),i=o("iterator"),f=Array.prototype;a.exports=function(m){return m!==void 0&&(c.Array===m||f[i]===m)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(t,a,l){var o=t("../internals/classof-raw");a.exports=Array.isArray||function(c){return o(c)=="Array"}},{"../internals/classof-raw":28}],73:[function(t,a,l){function o(p,g){return(p=m[f(p)])==u||p!=_&&(typeof g=="function"?c(g):!!g)}var c=t("../internals/fails"),i=/#|\.prototype\./,f=o.normalize=function(p){return String(p).replace(i,".").toLowerCase()},m=o.data={},_=o.NATIVE="N",u=o.POLYFILL="P";a.exports=o},{"../internals/fails":51}],74:[function(t,a,l){a.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],75:[function(t,a,l){a.exports=!1},{}],76:[function(t,a,l){var o=t("../internals/is-object"),c=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("match");a.exports=function(f){var m;return o(f)&&((m=f[i])!==void 0?!!m:c(f)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(t,a,l){function o(p,g){this.stopped=p,this.result=g}var c=t("../internals/an-object"),i=t("../internals/is-array-iterator-method"),f=t("../internals/to-length"),m=t("../internals/function-bind-context"),_=t("../internals/get-iterator-method"),u=t("../internals/call-with-safe-iteration-closing");(a.exports=function(p,g,y,S,b){var E,x,k,T,j,A,C=m(g,y,S?2:1);if(b)E=p;else{if(typeof(g=_(p))!="function")throw TypeError("Target is not iterable");if(i(g)){for(x=0,k=f(p.length);x<k;x++)if((T=S?C(c(A=p[x])[0],A[1]):C(p[x]))&&T instanceof o)return T;return new o(!1)}E=g.call(p)}for(j=E.next;!(A=j.call(E)).done;)if(typeof(T=u(E,C,A.value,S))=="object"&&T&&T instanceof o)return T;return new o(!1)}).stop=function(p){return new o(!0,p)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(_,a,l){var o,c,i=_("../internals/object-get-prototype-of"),f=_("../internals/create-non-enumerable-property"),m=_("../internals/has"),u=_("../internals/well-known-symbol"),_=_("../internals/is-pure"),u=u("iterator"),p=!1;[].keys&&("next"in(c=[].keys())?(i=i(i(c)))!==Object.prototype&&(o=i):p=!0),o==null&&(o={}),_||m(o,u)||f(o,u,function(){return this}),a.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:p}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(t,a,l){a.exports={}},{}],80:[function(t,a,l){a.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],81:[function(S,a,l){var o,c,i,f,m,_,u,p,g=S("../internals/global"),j=S("../internals/object-get-own-property-descriptor").f,T=S("../internals/classof-raw"),y=S("../internals/task").set,S=S("../internals/engine-is-ios"),b=g.MutationObserver||g.WebKitMutationObserver,E=g.process,x=g.Promise,k=T(E)=="process",T=j(g,"queueMicrotask"),j=T&&T.value;j||(o=function(){var A,C;for(k&&(A=E.domain)&&A.exit();c;){C=c.fn,c=c.next;try{C()}catch(I){throw c?f():i=void 0,I}}i=void 0,A&&A.enter()},f=k?function(){E.nextTick(o)}:b&&!S?(m=!0,_=document.createTextNode(""),new b(o).observe(_,{characterData:!0}),function(){_.data=m=!m}):x&&x.resolve?(u=x.resolve(void 0),p=u.then,function(){p.call(u,o)}):function(){y.call(g,o)}),a.exports=j||function(A){A={fn:A,next:void 0},i&&(i.next=A),c||(c=A,f()),i=A}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(t,a,l){t=t("../internals/global"),a.exports=t.Promise},{"../internals/global":59}],83:[function(t,a,l){t=t("../internals/fails"),a.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/well-known-symbol"),i=t("../internals/is-pure"),f=c("iterator");a.exports=!o(function(){var m=new URL("b?a=1&b=2&c=3","http://a"),_=m.searchParams,u="";return m.pathname="c%20d",_.forEach(function(p,g){_.delete("b"),u+=g+p}),i&&!m.toJSON||!_.sort||m.href!=="http://a/c%20d?a=1&c=3"||_.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!_[f]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(o,a,l){var c=o("../internals/global"),o=o("../internals/inspect-source"),c=c.WeakMap;a.exports=typeof c=="function"&&/native code/.test(o(c))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,a,l){function o(i){var f,m;this.promise=new i(function(_,u){if(f!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");f=_,m=u}),this.resolve=c(f),this.reject=c(m)}var c=t("../internals/a-function");a.exports.f=function(i){return new o(i)}},{"../internals/a-function":5}],87:[function(t,a,l){var o=t("../internals/is-regexp");a.exports=function(c){if(o(c))throw TypeError("The method doesn't accept regular expressions");return c}},{"../internals/is-regexp":76}],88:[function(t,a,l){var o=t("../internals/global").isFinite;a.exports=Number.isFinite||function(c){return typeof c=="number"&&o(c)}},{"../internals/global":59}],89:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/fails"),i=t("../internals/object-keys"),f=t("../internals/object-get-own-property-symbols"),m=t("../internals/object-property-is-enumerable"),_=t("../internals/to-object"),u=t("../internals/indexed-object"),p=Object.assign,g=Object.defineProperty;a.exports=!p||c(function(){var y,S,b,E;return!(!o||p({b:1},p(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(S={},E="abcdefghijklmnopqrst",(y={})[b=Symbol()]=7,E.split("").forEach(function(x){S[x]=x}),p({},y)[b]!=7||i(p({},S)).join("")!=E)})?function(y,S){for(var b=_(y),E=arguments.length,x=1,k=f.f,T=m.f;x<E;)for(var j,A=u(arguments[x++]),C=k?i(A).concat(k(A)):i(A),I=C.length,F=0;F<I;)j=C[F++],o&&!T.call(A,j)||(b[j]=A[j]);return b}:p},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(g,a,l){function o(){}var c,i=g("../internals/an-object"),f=g("../internals/object-define-properties"),m=g("../internals/enum-bug-keys"),_=g("../internals/hidden-keys"),u=g("../internals/html"),p=g("../internals/document-create-element"),g=g("../internals/shared-key"),y="prototype",S="script",b=g("IE_PROTO"),E=function(k){return"<"+S+">"+k+"</"+S+">"},x=function(){try{c=document.domain&&new ActiveXObject("htmlfile")}catch{}x=c?((k=c).write(E("")),k.close(),T=k.parentWindow.Object,k=null,T):(k=p("iframe"),T="java"+S+":",k.style.display="none",u.appendChild(k),k.src=String(T),(T=k.contentWindow.document).open(),T.write(E("document.F=Object")),T.close(),T.F);for(var k,T,j=m.length;j--;)delete x[y][m[j]];return x()};_[b]=!0,a.exports=Object.create||function(k,T){var j;return k!==null?(o[y]=i(k),j=new o,o[y]=null,j[b]=k):j=x(),T===void 0?j:f(j,T)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/object-define-property"),i=t("../internals/an-object"),f=t("../internals/object-keys");a.exports=o?Object.defineProperties:function(m,_){i(m);for(var u,p=f(_),g=p.length,y=0;y<g;)c.f(m,u=p[y++],_[u]);return m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/ie8-dom-define"),i=t("../internals/an-object"),f=t("../internals/to-primitive"),m=Object.defineProperty;l.f=o?m:function(_,u,p){if(i(_),u=f(u,!0),i(p),c)try{return m(_,u,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(_[u]=p.value),_}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/object-property-is-enumerable"),i=t("../internals/create-property-descriptor"),f=t("../internals/to-indexed-object"),m=t("../internals/to-primitive"),_=t("../internals/has"),u=t("../internals/ie8-dom-define"),p=Object.getOwnPropertyDescriptor;l.f=o?p:function(g,y){if(g=f(g),y=m(y,!0),u)try{return p(g,y)}catch{}if(_(g,y))return i(!c.f.call(g,y),g[y])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(t,a,l){var o=t("../internals/to-indexed-object"),c=t("../internals/object-get-own-property-names").f,i={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(m){if(!f||i.call(m)!="[object Window]")return c(o(m));try{return c(m)}catch{return f.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(t,a,l){var o=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys").concat("length","prototype");l.f=Object.getOwnPropertyNames||function(i){return o(i,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(t,a,l){l.f=Object.getOwnPropertySymbols},{}],97:[function(f,a,l){var o=f("../internals/has"),c=f("../internals/to-object"),i=f("../internals/shared-key"),f=f("../internals/correct-prototype-getter"),m=i("IE_PROTO"),_=Object.prototype;a.exports=f?Object.getPrototypeOf:function(u){return u=c(u),o(u,m)?u[m]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?_:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(t,a,l){var o=t("../internals/has"),c=t("../internals/to-indexed-object"),i=t("../internals/array-includes").indexOf,f=t("../internals/hidden-keys");a.exports=function(m,_){var u,p=c(m),g=0,y=[];for(u in p)!o(f,u)&&o(p,u)&&y.push(u);for(;_.length>g;)!o(p,u=_[g++])||~i(y,u)||y.push(u);return y}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(t,a,l){var o=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys");a.exports=Object.keys||function(i){return o(i,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(t,a,l){var o={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,i=c&&!o.call({1:2},1);l.f=i?function(f){return f=c(this,f),!!f&&f.enumerable}:o},{}],101:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/a-possible-prototype");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,f=!1,m={};try{(i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(m,[]),f=m instanceof Array}catch{}return function(_,u){return o(_),c(u),f?i.call(_,u):_.__proto__=u,_}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,a,l){var o=t("../internals/to-string-tag-support"),c=t("../internals/classof");a.exports=o?{}.toString:function(){return"[object "+c(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(t,a,l){var o=t("../internals/get-built-in"),c=t("../internals/object-get-own-property-names"),i=t("../internals/object-get-own-property-symbols"),f=t("../internals/an-object");a.exports=o("Reflect","ownKeys")||function(m){var _=c.f(f(m)),u=i.f;return u?_.concat(u(m)):_}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,a,l){t=t("../internals/global"),a.exports=t},{"../internals/global":59}],105:[function(t,a,l){a.exports=function(o){try{return{error:!1,value:o()}}catch(c){return{error:!0,value:c}}}},{}],106:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/is-object"),i=t("../internals/new-promise-capability");a.exports=function(f,m){return o(f),c(m)&&m.constructor===f?m:((0,(f=i.f(f)).resolve)(m),f.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,a,l){var o=t("../internals/redefine");a.exports=function(c,i,f){for(var m in i)o(c,m,i[m],f);return c}},{"../internals/redefine":108}],108:[function(_,a,l){var o=_("../internals/global"),c=_("../internals/create-non-enumerable-property"),i=_("../internals/has"),f=_("../internals/set-global"),m=_("../internals/inspect-source"),_=_("../internals/internal-state"),u=_.get,p=_.enforce,g=String(String).split("String");(a.exports=function(y,S,b,T){var x=!!T&&!!T.unsafe,k=!!T&&!!T.enumerable,T=!!T&&!!T.noTargetGet;typeof b=="function"&&(typeof S!="string"||i(b,"name")||c(b,"name",S),p(b).source=g.join(typeof S=="string"?S:"")),y===o?k?y[S]=b:f(S,b):(x?!T&&y[S]&&(k=!0):delete y[S],k?y[S]=b:c(y,S,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||m(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,a,l){var o=t("./classof-raw"),c=t("./regexp-exec");a.exports=function(i,f){var m=i.exec;if(typeof m=="function"){if(m=m.call(i,f),typeof m!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return m}if(o(i)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return c.call(i,f)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(f,a,l){var o,c,i=f("./regexp-flags"),f=f("./regexp-sticky-helpers"),m=RegExp.prototype.exec,_=String.prototype.replace,u=m,p=(o=/a/,c=/b*/g,m.call(o,"a"),m.call(c,"a"),o.lastIndex!==0||c.lastIndex!==0),g=f.UNSUPPORTED_Y||f.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0;a.exports=u=p||y||g?function(S){var b,E,x,k,T=this,j=g&&T.sticky,A=i.call(T),C=T.source,I=0,F=S;return j&&((A=A.replace("y","")).indexOf("g")===-1&&(A+="g"),F=String(S).slice(T.lastIndex),0<T.lastIndex&&(!T.multiline||T.multiline&&S[T.lastIndex-1]!==`
`)&&(C="(?: "+C+")",F=" "+F,I++),E=new RegExp("^(?:"+C+")",A)),y&&(E=new RegExp("^"+C+"$(?!\\s)",A)),p&&(b=T.lastIndex),x=m.call(j?E:T,F),j?x?(x.input=x.input.slice(I),x[0]=x[0].slice(I),x.index=T.lastIndex,T.lastIndex+=x[0].length):T.lastIndex=0:p&&x&&(T.lastIndex=T.global?x.index+x[0].length:b),y&&x&&1<x.length&&_.call(x[0],E,function(){for(k=1;k<arguments.length-2;k++)arguments[k]===void 0&&(x[k]=void 0)}),x}:u},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,a,l){var o=t("../internals/an-object");a.exports=function(){var c=o(this),i="";return c.global&&(i+="g"),c.ignoreCase&&(i+="i"),c.multiline&&(i+="m"),c.dotAll&&(i+="s"),c.unicode&&(i+="u"),c.sticky&&(i+="y"),i}},{"../internals/an-object":10}],112:[function(t,a,l){t=t("./fails");function o(c,i){return RegExp(c,i)}l.UNSUPPORTED_Y=t(function(){var c=o("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),l.BROKEN_CARET=t(function(){var c=o("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},{"./fails":51}],113:[function(t,a,l){a.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],114:[function(t,a,l){a.exports=Object.is||function(o,c){return o===c?o!==0||1/o==1/c:o!=o&&c!=c}},{}],115:[function(t,a,l){var o=t("../internals/global"),c=t("../internals/create-non-enumerable-property");a.exports=function(i,f){try{c(o,i,f)}catch{o[i]=f}return f}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(t,a,l){var o=t("../internals/get-built-in"),c=t("../internals/object-define-property"),i=t("../internals/well-known-symbol"),f=t("../internals/descriptors"),m=i("species");a.exports=function(u){var u=o(u),p=c.f;f&&u&&!u[m]&&p(u,m,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(t,a,l){var o=t("../internals/object-define-property").f,c=t("../internals/has"),i=t("../internals/well-known-symbol")("toStringTag");a.exports=function(f,m,_){f&&!c(f=_?f:f.prototype,i)&&o(f,i,{configurable:!0,value:m})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(t,a,l){var o=t("../internals/shared"),c=t("../internals/uid"),i=o("keys");a.exports=function(f){return i[f]||(i[f]=c(f))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(o,a,l){var i=o("../internals/global"),o=o("../internals/set-global"),c="__core-js_shared__",i=i[c]||o(c,{});a.exports=i},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,a,l){var o=t("../internals/is-pure"),c=t("../internals/shared-store");(a.exports=function(i,f){return c[i]||(c[i]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,a,l){var o=t("../internals/an-object"),c=t("../internals/a-function"),i=t("../internals/well-known-symbol")("species");a.exports=function(_,m){var _=o(_).constructor;return _===void 0||(_=o(_)[i])==null?m:c(_)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(t,a,l){var o=t("../internals/fails");a.exports=function(c){return o(function(){var i=""[c]('"');return i!==i.toLowerCase()||3<i.split('"').length})}},{"../internals/fails":51}],123:[function(t,a,l){function o(f){return function(p,g){var u,p=String(i(p)),g=c(g),y=p.length;return g<0||y<=g?f?"":void 0:(u=p.charCodeAt(g))<55296||56319<u||g+1===y||(y=p.charCodeAt(g+1))<56320||57343<y?f?p.charAt(g):u:f?p.slice(g,g+2):y-56320+(u-55296<<10)+65536}}var c=t("../internals/to-integer"),i=t("../internals/require-object-coercible");a.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(t,a,l){t=t("../internals/engine-user-agent"),a.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],125:[function(t,a,l){function o(_){return function(y,E,b){var y=String(f(y)),S=y.length,b=b===void 0?" ":String(b),E=c(E);return E<=S||b==""?y:((S=i.call(b,m((E=E-S)/b.length))).length>E&&(S=S.slice(0,E)),_?y+S:S+y)}}var c=t("../internals/to-length"),i=t("../internals/string-repeat"),f=t("../internals/require-object-coercible"),m=Math.ceil;a.exports={start:o(!1),end:o(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(t,a,l){function o(x){return x+22+75*(x<26)}function c(x){var k,T=[],j=(x=function(K){for(var Z=[],U=0,V=K.length;U<V;){var L,H=K.charCodeAt(U++);55296<=H&&H<=56319&&U<V?(64512&(L=K.charCodeAt(U++)))==56320?Z.push(((1023&H)<<10)+(1023&L)+65536):(Z.push(H),U--):Z.push(H)}return Z}(x)).length,A=128,C=0,I=72;for(R=0;R<x.length;R++)(k=x[R])<128&&T.push(E(k));var F=T.length,N=F;for(F&&T.push("-");N<j;){for(var z=i,R=0;R<x.length;R++)A<=(k=x[R])&&k<z&&(z=k);var q=N+1;if(z-A>b((i-C)/q))throw RangeError(y);for(C+=(z-A)*q,A=z,R=0;R<x.length;R++){if((k=x[R])<A&&++C>i)throw RangeError(y);if(k==A){for(var M=C,D=f;;D+=f){var X=D<=I?1:I+m<=D?m:D-I;if(M<X)break;var O=M-X,G=f-X;T.push(E(o(X+O%G))),M=b(O/G)}T.push(E(o(M))),I=function(K,Z,U){var V=0;for(K=U?b(K/u):K>>1,K+=b(K/Z);S*m>>1<K;V+=f)K=b(K/S);return b(V+(S+1)*K/(K+_))}(C,q,N==F),C=0,++N}}++C,++A}return T.join("")}var i=2147483647,f=36,m=26,_=38,u=700,p=/[^\0-\u007E]/,g=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",S=f-1,b=Math.floor,E=String.fromCharCode;a.exports=function(x){for(var k,T=[],j=x.toLowerCase().replace(g,".").split("."),A=0;A<j.length;A++)k=j[A],T.push(p.test(k)?"xn--"+c(k):k);return T.join(".")}},{}],127:[function(t,a,l){var o=t("../internals/to-integer"),c=t("../internals/require-object-coercible");a.exports="".repeat||function(i){var f=String(c(this)),m="",_=o(i);if(_<0||_==1/0)throw RangeError("Wrong number of repetitions");for(;0<_;(_>>>=1)&&(f+=f))1&_&&(m+=f);return m}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(t,a,l){var o=t("../internals/fails"),c=t("../internals/whitespaces");a.exports=function(i){return o(function(){return!!c[i]()||""[i]()!=""||c[i].name!==i})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(i,a,l){function o(_){return function(u){return u=String(c(u)),1&_&&(u=u.replace(f,"")),u=2&_?u.replace(m,""):u}}var c=i("../internals/require-object-coercible"),i="["+i("../internals/whitespaces")+"]",f=RegExp("^"+i+i+"*"),m=RegExp(i+i+"*$");a.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(S,a,l){function o(N){return function(){F(N)}}function c(N){F(N.data)}function i(N){m.postMessage(N+"",b.protocol+"//"+b.host)}var f,m=S("../internals/global"),_=S("../internals/fails"),u=S("../internals/classof-raw"),p=S("../internals/function-bind-context"),g=S("../internals/html"),y=S("../internals/document-create-element"),S=S("../internals/engine-is-ios"),b=m.location,E=m.setImmediate,x=m.clearImmediate,k=m.process,T=m.MessageChannel,j=m.Dispatch,A=0,C={},I="onreadystatechange",F=function(N){var z;C.hasOwnProperty(N)&&(z=C[N],delete C[N],z())};E&&x||(E=function(N){for(var z=[],R=1;R<arguments.length;)z.push(arguments[R++]);return C[++A]=function(){(typeof N=="function"?N:Function(N)).apply(void 0,z)},f(A),A},x=function(N){delete C[N]},u(k)=="process"?f=function(N){k.nextTick(o(N))}:j&&j.now?f=function(N){j.now(o(N))}:T&&!S?(S=(u=new T).port2,u.port1.onmessage=c,f=p(S.postMessage,S,1)):!m.addEventListener||typeof postMessage!="function"||m.importScripts||_(i)||b.protocol==="file:"?f=I in y("script")?function(N){g.appendChild(y("script"))[I]=function(){g.removeChild(this),F(N)}}:function(N){setTimeout(o(N),0)}:(f=i,m.addEventListener("message",c,!1))),a.exports={set:E,clear:x}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(t,a,l){var o=t("../internals/classof-raw");a.exports=function(c){if(typeof c!="number"&&o(c)!="Number")throw TypeError("Incorrect invocation");return+c}},{"../internals/classof-raw":28}],132:[function(t,a,l){var o=t("../internals/to-integer"),c=Math.max,i=Math.min;a.exports=function(f,m){return f=o(f),f<0?c(f+m,0):i(f,m)}},{"../internals/to-integer":135}],133:[function(t,a,l){var o=t("../internals/to-integer"),c=t("../internals/to-length");a.exports=function(f){if(f===void 0)return 0;var f=o(f),m=c(f);if(f!==m)throw RangeError("Wrong length or index");return m}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(t,a,l){var o=t("../internals/indexed-object"),c=t("../internals/require-object-coercible");a.exports=function(i){return o(c(i))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(t,a,l){var o=Math.ceil,c=Math.floor;a.exports=function(i){return isNaN(i=+i)?0:(0<i?c:o)(i)}},{}],136:[function(t,a,l){var o=t("../internals/to-integer"),c=Math.min;a.exports=function(i){return 0<i?c(o(i),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(t,a,l){var o=t("../internals/require-object-coercible");a.exports=function(c){return Object(o(c))}},{"../internals/require-object-coercible":113}],138:[function(t,a,l){var o=t("../internals/to-positive-integer");a.exports=function(c,i){if(c=o(c),c%i)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":139}],139:[function(t,a,l){var o=t("../internals/to-integer");a.exports=function(c){if(c=o(c),c<0)throw RangeError("The argument can't be less than 0");return c}},{"../internals/to-integer":135}],140:[function(t,a,l){var o=t("../internals/is-object");a.exports=function(c,i){if(!o(c))return c;var f,m;if(i&&typeof(f=c.toString)=="function"&&!o(m=f.call(c))||typeof(f=c.valueOf)=="function"&&!o(m=f.call(c))||!i&&typeof(f=c.toString)=="function"&&!o(m=f.call(c)))return m;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(t,a,l){var o={};o[t("../internals/well-known-symbol")("toStringTag")]="z",a.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":148}],142:[function(t,a,l){function o(Y,te){for(var re=0,be=te.length,ve=new(ue(Y))(be);re<be;)ve[re]=te[re++];return ve}function c(Y,te){L(Y,te,{get:function(){return U(this)[te]}})}function i(Y){return Y instanceof se||(Y=F(Y))=="ArrayBuffer"||Y=="SharedArrayBuffer"}function f(Y,te){return pe(Y)&&typeof te!="symbol"&&te in Y&&String(+te)==String(te)}function m(Y,te){return f(Y,te=C(te,!0))?x(2,Y[te]):H(Y,te)}function _(Y,te,re){return!(f(Y,te=C(te,!0))&&N(re)&&I(re,"value"))||I(re,"get")||I(re,"set")||re.configurable||I(re,"writable")&&!re.writable||I(re,"enumerable")&&!re.enumerable?L(Y,te,re):(Y[te]=re.value,Y)}var u=t("../internals/export"),p=t("../internals/global"),g=t("../internals/descriptors"),y=t("../internals/typed-array-constructors-require-wrappers"),S=t("../internals/array-buffer-view-core"),b=t("../internals/array-buffer"),E=t("../internals/an-instance"),x=t("../internals/create-property-descriptor"),k=t("../internals/create-non-enumerable-property"),T=t("../internals/to-length"),j=t("../internals/to-index"),A=t("../internals/to-offset"),C=t("../internals/to-primitive"),I=t("../internals/has"),F=t("../internals/classof"),N=t("../internals/is-object"),z=t("../internals/object-create"),R=t("../internals/object-set-prototype-of"),q=t("../internals/object-get-own-property-names").f,M=t("../internals/typed-array-from"),D=t("../internals/array-iteration").forEach,X=t("../internals/set-species"),O=t("../internals/object-define-property"),G=t("../internals/object-get-own-property-descriptor"),K=t("../internals/internal-state"),Z=t("../internals/inherit-if-required"),U=K.get,V=K.set,L=O.f,H=G.f,J=Math.round,ne=p.RangeError,se=b.ArrayBuffer,fe=b.DataView,xe=S.NATIVE_ARRAY_BUFFER_VIEWS,he=S.TYPED_ARRAY_TAG,_e=S.TypedArray,ye=S.TypedArrayPrototype,ue=S.aTypedArrayConstructor,pe=S.isTypedArray,ke="BYTES_PER_ELEMENT",Ie="Wrong length";g?(xe||(G.f=m,O.f=_,c(ye,"buffer"),c(ye,"byteOffset"),c(ye,"byteLength"),c(ye,"length")),u({target:"Object",stat:!0,forced:!xe},{getOwnPropertyDescriptor:m,defineProperty:_}),a.exports=function(Pe,te,re){function be(Fe,de){L(Fe,de,{get:function(){var ge=this,ce=de;return(ge=U(ge)).view[Re](ce*ve+ge.byteOffset,!0)},set:function(ge){var ce=this,we=de;ce=U(ce),re&&(ge=(ge=J(ge))<0?0:255<ge?255:255&ge),ce.view[Ge](we*ve+ce.byteOffset,ge,!0)},enumerable:!0})}var ve=Pe.match(/\d+$/)[0]/8,je=Pe+(re?"Clamped":"")+"Array",Re="get"+Pe,Ge="set"+Pe,Xe=p[je],Ke=Xe,Pe=Ke&&Ke.prototype,We={};xe?y&&(Ke=te(function(Fe,de,ge,ce){return E(Fe,Ke,je),Z(N(de)?i(de)?ce!==void 0?new Xe(de,A(ge,ve),ce):ge!==void 0?new Xe(de,A(ge,ve)):new Xe(de):pe(de)?o(Ke,de):M.call(Ke,de):new Xe(j(de)),Fe,Ke)}),R&&R(Ke,_e),D(q(Xe),function(Fe){Fe in Ke||k(Ke,Fe,Xe[Fe])}),Ke.prototype=Pe):(Ke=te(function(Fe,de,ge,ce){E(Fe,Ke,je);var we,Oe,Le=0,qe=0;if(N(de)){if(!i(de))return pe(de)?o(Ke,de):M.call(Ke,de);var Qe=de,qe=A(ge,ve),ge=de.byteLength;if(ce===void 0){if(ge%ve||(we=ge-qe)<0)throw ne(Ie)}else if(ge<(we=T(ce)*ve)+qe)throw ne(Ie);Oe=we/ve}else Oe=j(de),Qe=new se(we=Oe*ve);for(V(Fe,{buffer:Qe,byteOffset:qe,byteLength:we,length:Oe,view:new fe(Qe)});Le<Oe;)be(Fe,Le++)}),R&&R(Ke,_e),Pe=Ke.prototype=z(ye)),Pe.constructor!==Ke&&k(Pe,"constructor",Ke),he&&k(Pe,he,je),We[je]=Ke,u({global:!0,forced:Ke!=Xe,sham:!xe},We),ke in Ke||k(Ke,ke,ve),ke in Pe||k(Pe,ke,ve),X(je)}):a.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(f,a,l){var o=f("../internals/global"),c=f("../internals/fails"),i=f("../internals/check-correctness-of-iteration"),f=f("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,m=o.ArrayBuffer,_=o.Int8Array;a.exports=!f||!c(function(){_(1)})||!c(function(){new _(-1)})||!i(function(u){new _,new _(null),new _(1.5),new _(u)},!0)||c(function(){return new _(new m(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(t,a,l){var o=t("../internals/to-object"),c=t("../internals/to-length"),i=t("../internals/get-iterator-method"),f=t("../internals/is-array-iterator-method"),m=t("../internals/function-bind-context"),_=t("../internals/array-buffer-view-core").aTypedArrayConstructor;a.exports=function(u){var p,g,y,S,b,E,x=o(u),k=arguments.length,T=1<k?arguments[1]:void 0,j=T!==void 0,A=i(x);if(A!=null&&!f(A))for(E=(b=A.call(x)).next,x=[];!(S=E.call(b)).done;)x.push(S.value);for(j&&2<k&&(T=m(T,arguments[2],2)),g=c(x.length),y=new(_(this))(g),p=0;p<g;p++)y[p]=j?T(x[p],p):x[p];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(t,a,l){var o=0,c=Math.random();a.exports=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++o+c).toString(36)}},{}],146:[function(t,a,l){t=t("../internals/native-symbol"),a.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],147:[function(t,a,l){t=t("../internals/well-known-symbol"),l.f=t},{"../internals/well-known-symbol":148}],148:[function(_,a,l){var o=_("../internals/global"),c=_("../internals/shared"),i=_("../internals/has"),f=_("../internals/uid"),m=_("../internals/native-symbol"),_=_("../internals/use-symbol-as-uid"),u=c("wks"),p=o.Symbol,g=_?p:p&&p.withoutSetter||f;a.exports=function(y){return i(u,y)||(m&&i(p,y)?u[y]=p[y]:u[y]=g("Symbol."+y)),u[y]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(t,a,l){a.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],150:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/global"),m=i("../internals/array-buffer"),i=i("../internals/set-species"),f="ArrayBuffer",m=m[f];o({global:!0,forced:c[f]!==m},{ArrayBuffer:m}),i(f)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(x,a,l){var o=x("../internals/export"),c=x("../internals/fails"),i=x("../internals/is-array"),f=x("../internals/is-object"),m=x("../internals/to-object"),_=x("../internals/to-length"),u=x("../internals/create-property"),p=x("../internals/array-species-create"),g=x("../internals/array-method-has-species-support"),E=x("../internals/well-known-symbol"),x=x("../internals/engine-v8-version"),y=E("isConcatSpreadable"),S=9007199254740991,b="Maximum allowed index exceeded",E=51<=x||!c(function(){var k=[];return k[y]=!1,k.concat()[0]!==k}),x=g("concat");o({target:"Array",proto:!0,forced:!E||!x},{concat:function(k){for(var T,j,A,C,I,F=m(this),N=p(F,0),z=0,R=-1,q=arguments.length;R<q;R++)if(I=void 0,!f(C=A=R===-1?F:arguments[R])||((I=C[y])!==void 0?!I:!i(C))){if(S<=z)throw TypeError(b);u(N,z++,A)}else{if(j=_(A.length),S<z+j)throw TypeError(b);for(T=0;T<j;T++,z++)T in A&&u(N,z,A[T])}return N.length=z,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/array-copy-within"),i=i("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:c}),i("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").every,i=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),i=i("every"),f=f("every");o({target:"Array",proto:!0,forced:!i||!f},{every:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/array-fill"),i=i("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:c}),i("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").filter,i=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),i=i("filter"),f=f("filter");o({target:"Array",proto:!0,forced:!i||!f},{filter:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/array-iteration").findIndex,i=_("../internals/add-to-unscopables"),_=_("../internals/array-method-uses-to-length"),f="findIndex",m=!0,_=_(f);f in[]&&Array(1)[f](function(){m=!1}),o({target:"Array",proto:!0,forced:m||!_},{findIndex:function(u){return c(this,u,1<arguments.length?arguments[1]:void 0)}}),i(f)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},{"../internals/array-for-each":16,"../internals/export":50}],158:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/array-from");o({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(i){Array.from(i)})},{from:c})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],159:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/array-includes").includes,i=t("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(f){return c(this,f,1<arguments.length?arguments[1]:void 0)}}),i("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/array-includes").indexOf,m=_("../internals/array-method-is-strict"),_=_("../internals/array-method-uses-to-length"),i=[].indexOf,f=!!i&&1/[1].indexOf(1,-0)<0,m=m("indexOf"),_=_("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:f||!m||!_},{indexOf:function(u){return f?i.apply(this,arguments)||0:c(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],161:[function(m,a,l){var o=m("../internals/to-indexed-object"),c=m("../internals/add-to-unscopables"),i=m("../internals/iterators"),f=m("../internals/internal-state"),m=m("../internals/define-iterator"),_="Array Iterator",u=f.set,p=f.getterFor(_);a.exports=m(Array,"Array",function(g,y){u(this,{type:_,target:o(g),index:0,kind:y})},function(){var g=p(this),y=g.target,S=g.kind,b=g.index++;return!y||b>=y.length?{value:g.target=void 0,done:!0}:S=="keys"?{value:b,done:!1}:S=="values"?{value:y[b],done:!1}:{value:[b,y[b]],done:!1}},"values"),i.Arguments=i.Array,c("keys"),c("values"),c("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],162:[function(m,a,l){var o=m("../internals/export"),f=m("../internals/indexed-object"),c=m("../internals/to-indexed-object"),m=m("../internals/array-method-is-strict"),i=[].join,f=f!=Object,m=m("join",",");o({target:"Array",proto:!0,forced:f||!m},{join:function(_){return i.call(c(this),_===void 0?",":_)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],163:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:c!==[].lastIndexOf},{lastIndexOf:c})},{"../internals/array-last-index-of":20,"../internals/export":50}],164:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").map,i=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),i=i("map"),f=f("map");o({target:"Array",proto:!0,forced:!i||!f},{map:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(y,a,l){var o=y("../internals/export"),c=y("../internals/is-object"),i=y("../internals/is-array"),f=y("../internals/to-absolute-index"),m=y("../internals/to-length"),_=y("../internals/to-indexed-object"),u=y("../internals/create-property"),p=y("../internals/well-known-symbol"),g=y("../internals/array-method-has-species-support"),y=y("../internals/array-method-uses-to-length"),g=g("slice"),y=y("slice",{ACCESSORS:!0,0:0,1:2}),S=p("species"),b=[].slice,E=Math.max;o({target:"Array",proto:!0,forced:!g||!y},{slice:function(x,k){var T,j,A,C=_(this),I=m(C.length),F=f(x,I),N=f(k===void 0?I:k,I);if(i(C)&&((T=typeof(T=C.constructor)=="function"&&(T===Array||i(T.prototype))||c(T)&&(T=T[S])===null?void 0:T)===Array||T===void 0))return b.call(C,F,N);for(j=new(T===void 0?Array:T)(E(N-F,0)),A=0;F<N;F++,A++)F in C&&u(j,A,C[F]);return j.length=A,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],166:[function(f,a,l){var o=f("../internals/export"),c=f("../internals/array-iteration").some,i=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),i=i("some"),f=f("some");o({target:"Array",proto:!0,forced:!i||!f},{some:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],167:[function(g,a,l){var o=g("../internals/export"),c=g("../internals/to-absolute-index"),i=g("../internals/to-integer"),f=g("../internals/to-length"),m=g("../internals/to-object"),_=g("../internals/array-species-create"),u=g("../internals/create-property"),p=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),p=p("splice"),g=g("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,S=Math.min;o({target:"Array",proto:!0,forced:!p||!g},{splice:function(z,E){var x,k,T,j,A,C,I=m(this),F=f(I.length),N=c(z,F),z=arguments.length;if(z===0?x=k=0:k=z===1?(x=0,F-N):(x=z-2,S(y(i(E),0),F-N)),9007199254740991<F+x-k)throw TypeError("Maximum allowed length exceeded");for(T=_(I,k),j=0;j<k;j++)(A=N+j)in I&&u(T,j,I[A]);if(x<(T.length=k)){for(j=N;j<F-k;j++)C=j+x,(A=j+k)in I?I[C]=I[A]:delete I[C];for(j=F;F-k+x<j;j--)delete I[j-1]}else if(k<x)for(j=F-k;N<j;j--)C=j+x-1,(A=j+k-1)in I?I[C]=I[A]:delete I[C];for(j=0;j<x;j++)I[j+N]=arguments[j+2];return I.length=F-k+x,T}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],168:[function(c,a,l){var o=c("../internals/descriptors"),c=c("../internals/object-define-property").f,i=Function.prototype,f=i.toString,m=/^\s*function ([^ (]*)/;!o||"name"in i||c(i,"name",{configurable:!0,get:function(){try{return f.call(this).match(m)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],169:[function(c,a,l){var o=c("../internals/collection"),c=c("../internals/collection-strong");a.exports=o("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],170:[function(o,a,l){var o=o("../internals/export"),c=Math.hypot,i=Math.abs,f=Math.sqrt;o({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(m,_){for(var u,p,g=0,y=0,S=arguments.length,b=0;y<S;)b<(u=i(arguments[y++]))?(g=g*(p=b/u)*p+1,b=u):g+=0<u?(p=u/b)*p:u;return b===1/0?1/0:b*f(g)}})},{"../internals/export":50}],171:[function(o,a,l){var o=o("../internals/export"),c=Math.log,i=Math.LN2;o({target:"Math",stat:!0},{log2:function(f){return c(f)/i}})},{"../internals/export":50}],172:[function(t,a,l){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],173:[function(t,a,l){function o(R){var q,M,D,X,O,G,K,Z=g(R,!1);if(typeof Z=="string"&&2<Z.length){if((R=(Z=k(Z)).charCodeAt(0))===43||R===45){if((q=Z.charCodeAt(2))===88||q===120)return NaN}else if(R===48){switch(Z.charCodeAt(1)){case 66:case 98:M=2,D=49;break;case 79:case 111:M=8,D=55;break;default:return+Z}for(O=(X=Z.slice(2)).length,G=0;G<O;G++)if((K=X.charCodeAt(G))<48||D<K)return NaN;return parseInt(X,M)}}return+Z}var c=t("../internals/descriptors"),i=t("../internals/global"),f=t("../internals/is-forced"),m=t("../internals/redefine"),_=t("../internals/has"),u=t("../internals/classof-raw"),p=t("../internals/inherit-if-required"),g=t("../internals/to-primitive"),y=t("../internals/fails"),S=t("../internals/object-create"),b=t("../internals/object-get-own-property-names").f,E=t("../internals/object-get-own-property-descriptor").f,x=t("../internals/object-define-property").f,k=t("../internals/string-trim").trim,T="Number",j=i[T],A=j.prototype,C=u(S(A))==T;if(f(T,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var I,F=function(q){var q=arguments.length<1?0:q,M=this;return M instanceof F&&(C?y(function(){A.valueOf.call(M)}):u(M)!=T)?p(new j(o(q)),M,F):o(q)},N=c?b(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),z=0;N.length>z;z++)_(j,I=N[z])&&!_(F,I)&&x(F,I,E(j,I));(F.prototype=A).constructor=F,m(i,T,F)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],174:[function(t,a,l){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],175:[function(_,a,l){function o(g,y,S){return y===0?S:y%2==1?o(g,y-1,S*g):o(g*g,y/2,S)}var c=_("../internals/export"),i=_("../internals/to-integer"),f=_("../internals/this-number-value"),m=_("../internals/string-repeat"),_=_("../internals/fails"),u=1 .toFixed,p=Math.floor;c({target:"Number",proto:!0,forced:u&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!_(function(){u.call({})})},{toFixed:function(T){function y(I,F){for(var N=-1,z=F;++N<6;)z+=I*j[N],j[N]=z%1e7,z=p(z/1e7)}function S(I){for(var F=6,N=0;0<=--F;)N+=j[F],j[F]=p(N/I),N=N%I*1e7}function b(){for(var I,F=6,N="";0<=--F;)N===""&&F!==0&&j[F]===0||(I=String(j[F]),N=N===""?I:N+m.call("0",7-I.length)+I);return N}var E,x,k=f(this),T=i(T),j=[0,0,0,0,0,0],A="",C="0";if(T<0||20<T)throw RangeError("Incorrect fraction digits");if(k!=k)return"NaN";if(k<=-1e21||1e21<=k)return String(k);if(k<0&&(A="-",k=-k),1e-21<k)if(k=(E=function(I){for(var F=0,N=I;4096<=N;)F+=12,N/=4096;for(;2<=N;)F+=1,N/=2;return F}(k*o(2,69,1))-69)<0?k*o(2,-E,1):k/o(2,E,1),k*=4503599627370496,0<(E=52-E)){for(y(0,k),x=T;7<=x;)y(1e7,0),x-=7;for(y(o(10,x,1),0),x=E-1;23<=x;)S(1<<23),x-=23;S(1<<x),y(1,1),S(2),C=b()}else y(0,k),y(1<<-E,0),C=b()+m.call("0",T);return C=0<T?A+((k=C.length)<=T?"0."+m.call("0",T-k)+C:C.slice(0,k-T)+"."+C.slice(k-T)):A+C}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],176:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},{"../internals/export":50,"../internals/object-assign":89}],177:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/iterate"),i=t("../internals/create-property");o({target:"Object",stat:!0},{fromEntries:function(f){var m={};return c(f,function(_,u){i(m,_,u)},void 0,!0),m}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],178:[function(f,a,l){var o=f("../internals/export"),m=f("../internals/fails"),c=f("../internals/to-indexed-object"),i=f("../internals/object-get-own-property-descriptor").f,f=f("../internals/descriptors"),m=m(function(){i(1)});o({target:"Object",stat:!0,forced:!f||m,sham:!f},{getOwnPropertyDescriptor:function(_,u){return i(c(_),u)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],179:[function(i,a,l){var o=i("../internals/export"),c=i("../internals/fails"),i=i("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:c(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:i})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],180:[function(m,a,l){var o=m("../internals/export"),c=m("../internals/fails"),i=m("../internals/to-object"),f=m("../internals/object-get-prototype-of"),m=m("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:c(function(){f(1)}),sham:!m},{getPrototypeOf:function(_){return f(i(_))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],181:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/to-object"),i=t("../internals/object-keys");o({target:"Object",stat:!0,forced:t("../internals/fails")(function(){i(1)})},{keys:function(f){return i(c(f))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],182:[function(i,a,l){var o=i("../internals/to-string-tag-support"),c=i("../internals/redefine"),i=i("../internals/object-to-string");o||c(Object.prototype,"toString",i,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],183:[function(re,a,l){var o,c,i,f,m=re("../internals/export"),_=re("../internals/is-pure"),u=re("../internals/global"),p=re("../internals/get-built-in"),g=re("../internals/native-promise-constructor"),y=re("../internals/redefine"),S=re("../internals/redefine-all"),b=re("../internals/set-to-string-tag"),E=re("../internals/set-species"),x=re("../internals/is-object"),k=re("../internals/a-function"),T=re("../internals/an-instance"),j=re("../internals/classof-raw"),A=re("../internals/inspect-source"),C=re("../internals/iterate"),I=re("../internals/check-correctness-of-iteration"),F=re("../internals/species-constructor"),N=re("../internals/task").set,z=re("../internals/microtask"),R=re("../internals/promise-resolve"),q=re("../internals/host-report-errors"),M=re("../internals/new-promise-capability"),D=re("../internals/perform"),X=re("../internals/internal-state"),O=re("../internals/is-forced"),be=re("../internals/well-known-symbol"),G=re("../internals/engine-v8-version"),K=be("species"),Z="Promise",U=X.get,V=X.set,L=X.getterFor(Z),H=g,J=u.TypeError,ne=u.document,se=u.process,fe=p("fetch"),xe=M.f,he=xe,_e=j(se)=="process",ye=!!(ne&&ne.createEvent&&u.dispatchEvent),ue="unhandledrejection",pe="rejectionhandled",ke=1,Ie=2,Y=1,te=2,re=O(Z,function(){var We,Fe;return A(H)===String(H)&&(G===66||!_e&&typeof PromiseRejectionEvent!="function")?!0:!(!_||H.prototype.finally)||!(51<=G&&/native code/.test(H))&&(Fe=function(de){de(function(){},function(){})},((We=H.resolve(1)).constructor={})[K]=Fe,!(We.then(function(){})instanceof Fe))}),be=re||!I(function(We){H.all(We).catch(function(){})}),ve=function(We){var Fe;return!(!x(We)||typeof(Fe=We.then)!="function")&&Fe},je=function(We,Fe,de){var ge;Fe.notified||(Fe.notified=!0,ge=Fe.reactions,z(function(){for(var ce,we,Oe=Fe.value,Le=Fe.state==ke,qe=0;ge.length>qe;){var Qe,rt,tt,ot=ge[qe++],gt=Le?ot.ok:ot.fail,mt=ot.resolve,lt=ot.reject,vt=ot.domain;try{gt?(Le||(Fe.rejection===te&&function(pt,It){N.call(u,function(){_e?se.emit("rejectionHandled",pt):Re(pe,pt,It.value)})}(We,Fe),Fe.rejection=Y),gt===!0?Qe=Oe:(vt&&vt.enter(),Qe=gt(Oe),vt&&(vt.exit(),tt=!0)),Qe===ot.promise?lt(J("Promise-chain cycle")):(rt=ve(Qe))?rt.call(Qe,mt,lt):mt(Qe)):lt(Oe)}catch(pt){vt&&!tt&&vt.exit(),lt(pt)}}Fe.reactions=[],Fe.notified=!1,de&&!Fe.rejection&&(ce=We,we=Fe,N.call(u,function(){var pt=we.value,It=Ge(we);if(It&&(It=D(function(){_e?se.emit("unhandledRejection",pt,ce):Re(ue,ce,pt)}),we.rejection=_e||Ge(we)?te:Y,It.error))throw It.value}))}))},Re=function(We,Fe,de){var ge;ye?((ge=ne.createEvent("Event")).promise=Fe,ge.reason=de,ge.initEvent(We,!1,!0),u.dispatchEvent(ge)):ge={promise:Fe,reason:de},(Fe=u["on"+We])?Fe(ge):We===ue&&q("Unhandled promise rejection",de)},Ge=function(We){return We.rejection!==Y&&!We.parent},Xe=function(We,Fe,de,ge){return function(ce){We(Fe,de,ce,ge)}},Ke=function(We,Fe,de,ge){Fe.done||(Fe.done=!0,(Fe=ge||Fe).value=de,Fe.state=Ie,je(We,Fe,!0))},Pe=function(We,Fe,de,ge){if(!Fe.done){Fe.done=!0,ge&&(Fe=ge);try{if(We===de)throw J("Promise can't be resolved itself");var ce=ve(de);ce?z(function(){var we={done:!1};try{ce.call(de,Xe(Pe,We,we,Fe),Xe(Ke,We,we,Fe))}catch(Oe){Ke(We,we,Oe,Fe)}}):(Fe.value=de,Fe.state=ke,je(We,Fe,!1))}catch(we){Ke(We,{done:!1},we,Fe)}}};re&&(H=function(We){T(this,H,Z),k(We),o.call(this);var Fe=U(this);try{We(Xe(Pe,this,Fe),Xe(Ke,this,Fe))}catch(de){Ke(this,Fe,de)}},(o=function(We){V(this,{type:Z,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=S(H.prototype,{then:function(We,Fe){var de=L(this),ge=xe(F(this,H));return ge.ok=typeof We!="function"||We,ge.fail=typeof Fe=="function"&&Fe,ge.domain=_e?se.domain:void 0,de.parent=!0,de.reactions.push(ge),de.state!=0&&je(this,de,!1),ge.promise},catch:function(We){return this.then(void 0,We)}}),c=function(){var We=new o,Fe=U(We);this.promise=We,this.resolve=Xe(Pe,We,Fe),this.reject=Xe(Ke,We,Fe)},M.f=xe=function(We){return We===H||We===i?new c:he(We)},_||typeof g!="function"||(f=g.prototype.then,y(g.prototype,"then",function(We,Fe){var de=this;return new H(function(ge,ce){f.call(de,ge,ce)}).then(We,Fe)},{unsafe:!0}),typeof fe=="function"&&m({global:!0,enumerable:!0,forced:!0},{fetch:function(We){return R(H,fe.apply(u,arguments))}}))),m({global:!0,wrap:!0,forced:re},{Promise:H}),b(H,Z,!1,!0),E(Z),i=p(Z),m({target:Z,stat:!0,forced:re},{reject:function(We){var Fe=xe(this);return Fe.reject.call(void 0,We),Fe.promise}}),m({target:Z,stat:!0,forced:_||re},{resolve:function(We){return R(_&&this===i?H:this,We)}}),m({target:Z,stat:!0,forced:be},{all:function(We){var Fe=this,de=xe(Fe),ge=de.resolve,ce=de.reject,we=D(function(){var Oe=k(Fe.resolve),Le=[],qe=0,Qe=1;C(We,function(rt){var tt=qe++,ot=!1;Le.push(void 0),Qe++,Oe.call(Fe,rt).then(function(gt){ot||(ot=!0,Le[tt]=gt,--Qe||ge(Le))},ce)}),--Qe||ge(Le)});return we.error&&ce(we.value),de.promise},race:function(We){var Fe=this,de=xe(Fe),ge=de.reject,ce=D(function(){var we=k(Fe.resolve);C(We,function(Oe){we.call(Fe,Oe).then(de.resolve,ge)})});return ce.error&&ge(ce.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],184:[function(u,a,l){var o=u("../internals/export"),S=u("../internals/get-built-in"),c=u("../internals/a-function"),i=u("../internals/an-object"),f=u("../internals/is-object"),m=u("../internals/object-create"),_=u("../internals/function-bind"),u=u("../internals/fails"),p=S("Reflect","construct"),g=u(function(){function b(){}return!(p(function(){},[],b)instanceof b)}),y=!u(function(){p(function(){})}),S=g||y;o({target:"Reflect",stat:!0,forced:S,sham:S},{construct:function(b,E){c(b),i(E);var x=arguments.length<3?b:c(arguments[2]);if(y&&!g)return p(b,E,x);if(b==x){switch(E.length){case 0:return new b;case 1:return new b(E[0]);case 2:return new b(E[0],E[1]);case 3:return new b(E[0],E[1],E[2]);case 4:return new b(E[0],E[1],E[2],E[3])}var k=[null];return k.push.apply(k,E),new(_.apply(b,k))}return k=x.prototype,x=m(f(k)?k:Object.prototype),k=Function.apply.call(b,x,E),f(k)?k:x}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],185:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/is-object"),i=t("../internals/an-object"),f=t("../internals/has"),m=t("../internals/object-get-own-property-descriptor"),_=t("../internals/object-get-prototype-of");o({target:"Reflect",stat:!0},{get:function u(p,g){var y,S=arguments.length<3?p:arguments[2];return i(p)===S?p[g]:(y=m.f(p,g))?f(y,"value")?y.value:y.get===void 0?void 0:y.get.call(S):c(y=_(p))?u(y,g,S):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],186:[function(t,a,l){var o=t("../internals/descriptors"),c=t("../internals/global"),i=t("../internals/is-forced"),f=t("../internals/inherit-if-required"),m=t("../internals/object-define-property").f,_=t("../internals/object-get-own-property-names").f,u=t("../internals/is-regexp"),p=t("../internals/regexp-flags"),g=t("../internals/regexp-sticky-helpers"),y=t("../internals/redefine"),S=t("../internals/fails"),b=t("../internals/internal-state").set,E=t("../internals/set-species"),x=t("../internals/well-known-symbol")("match"),k=c.RegExp,T=k.prototype,j=/a/g,A=/a/g,C=new k(j)!==j,I=g.UNSUPPORTED_Y;if(o&&i("RegExp",!C||I||S(function(){return A[x]=!1,k(j)!=j||k(A)==A||k(j,"i")!="/a/i"}))){for(var F=function(R,q){var M,D=this instanceof F,X=u(R),O=q===void 0;return!D&&X&&R.constructor===F&&O?R:(C?X&&!O&&(R=R.source):R instanceof F&&(O&&(q=p.call(R)),R=R.source),I&&(M=!!q&&-1<q.indexOf("y"))&&(q=q.replace(/y/g,"")),X=f(C?new k(R,q):k(R,q),D?this:T,F),I&&M&&b(X,{sticky:M}),X)},N=_(k),z=0;N.length>z;)(function(R){R in F||m(F,R,{configurable:!0,get:function(){return k[R]},set:function(q){k[R]=q}})})(N[z++]);(T.constructor=F).prototype=T,y(c,"RegExp",F)}E("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],187:[function(c,a,l){var o=c("../internals/export"),c=c("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},{"../internals/export":50,"../internals/regexp-exec":110}],188:[function(f,a,l){var o=f("../internals/redefine"),c=f("../internals/an-object"),u=f("../internals/fails"),i=f("../internals/regexp-flags"),f="toString",m=RegExp.prototype,_=m[f],u=u(function(){return _.call({source:"a",flags:"b"})!="/a/b"}),p=_.name!=f;(u||p)&&o(RegExp.prototype,f,function(){var g=c(this),y=String(g.source),S=g.flags;return"/"+y+"/"+String(S===void 0&&g instanceof RegExp&&!("flags"in m)?i.call(g):S)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],189:[function(c,a,l){var o=c("../internals/collection"),c=c("../internals/collection-strong");a.exports=o("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],190:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/object-get-own-property-descriptor").f,i=_("../internals/to-length"),f=_("../internals/not-a-regexp"),m=_("../internals/require-object-coercible"),g=_("../internals/correct-is-regexp-logic"),_=_("../internals/is-pure"),u="".endsWith,p=Math.min,g=g("endsWith");o({target:"String",proto:!0,forced:!!(_||g||!(o=c(String.prototype,"endsWith"))||o.writable)&&!g},{endsWith:function(y){var S=String(m(this)),b=(f(y),1<arguments.length?arguments[1]:void 0),E=i(S.length),b=b===void 0?E:p(i(b),E),E=String(y);return u?u.call(S,E,b):S.slice(b-E.length,b)===E}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],191:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/not-a-regexp"),i=t("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(f){return!!~String(i(this)).indexOf(c(f),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],192:[function(i,a,l){var o=i("../internals/string-multibyte").charAt,c=i("../internals/internal-state"),i=i("../internals/define-iterator"),f="String Iterator",m=c.set,_=c.getterFor(f);i(String,"String",function(u){m(this,{type:f,string:String(u),index:0})},function(){var u=_(this),p=u.string,g=u.index;return g>=p.length?{value:void 0,done:!0}:(p=o(p,g),u.index+=p.length,{value:p,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],193:[function(t,a,l){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),i=t("../internals/to-length"),f=t("../internals/require-object-coercible"),m=t("../internals/advance-string-index"),_=t("../internals/regexp-exec-abstract");o("match",1,function(u,p,g){return[function(y){var S=f(this),b=y==null?void 0:y[u];return b!==void 0?b.call(y,S):new RegExp(y)[u](String(S))},function(y){var S=g(p,y,this);if(S.done)return S.value;var b=c(y),E=String(this);if(!b.global)return _(b,E);for(var x=b.unicode,k=[],T=b.lastIndex=0;(j=_(b,E))!==null;){var j=String(j[0]);(k[T]=j)===""&&(b.lastIndex=m(E,i(b.lastIndex),x)),T++}return T===0?null:k}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],194:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/string-pad").start;o({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(i){return c(this,i,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],195:[function(t,a,l){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],196:[function(t,a,l){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),i=t("../internals/to-object"),f=t("../internals/to-length"),m=t("../internals/to-integer"),_=t("../internals/require-object-coercible"),u=t("../internals/advance-string-index"),p=t("../internals/regexp-exec-abstract"),g=Math.max,y=Math.min,S=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,E=/\$([$&'`]|\d\d?)/g;o("replace",2,function(x,k,T,j){var A=j.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=j.REPLACE_KEEPS_$0,I=A?"$":"$0";return[function(F,N){var z=_(this),R=F==null?void 0:F[x];return R!==void 0?R.call(F,z,N):k.call(String(z),F,N)},function(F,N){if(!A&&C||typeof N=="string"&&N.indexOf(I)===-1){var z=T(k,F,this,N);if(z.done)return z.value}for(var R,q=c(F),M=String(this),D=typeof N=="function",X=(D||(N=String(N)),q.global),O=(X&&(R=q.unicode,q.lastIndex=0),[]);(V=p(q,M))!==null&&(O.push(V),X);)String(V[0])===""&&(q.lastIndex=u(M,f(q.lastIndex),R));for(var G,K="",Z=0,U=0;U<O.length;U++){for(var V=O[U],L=String(V[0]),H=g(y(m(V.index),M.length),0),J=[],ne=1;ne<V.length;ne++)J.push((G=V[ne])===void 0?G:String(G));var se=V.groups,fe=D?(fe=[L].concat(J,H,M),se!==void 0&&fe.push(se),String(N.apply(void 0,fe))):function(xe,he,_e,ye,ue,pe){var ke=_e+xe.length,Ie=ye.length,Y=E;return ue!==void 0&&(ue=i(ue),Y=b),k.call(pe,Y,function(te,re){var be;switch(re.charAt(0)){case"$":return"$";case"&":return xe;case"`":return he.slice(0,_e);case"'":return he.slice(ke);case"<":be=ue[re.slice(1,-1)];break;default:var ve,je=+re;if(je==0)return te;if(Ie<je)return(ve=S(je/10))!==0&&ve<=Ie?ye[ve-1]===void 0?re.charAt(1):ye[ve-1]+re.charAt(1):te;be=ye[je-1]}return be===void 0?"":be})}(L,M,H,J,se,N);Z<=H&&(K+=M.slice(Z,H)+fe,Z=H+L.length)}return K+M.slice(Z)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],197:[function(t,a,l){var o=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),i=t("../internals/require-object-coercible"),f=t("../internals/same-value"),m=t("../internals/regexp-exec-abstract");o("search",1,function(_,u,p){return[function(g){var y=i(this),S=g==null?void 0:g[_];return S!==void 0?S.call(g,y):new RegExp(g)[_](String(y))},function(g){var y,S=p(u,g,this);return S.done?S.value:(S=c(g),g=String(this),y=S.lastIndex,f(y,0)||(S.lastIndex=0),g=m(S,g),f(S.lastIndex,y)||(S.lastIndex=y),g===null?-1:g.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],198:[function(y,a,l){var o=y("../internals/fix-regexp-well-known-symbol-logic"),c=y("../internals/is-regexp"),i=y("../internals/an-object"),f=y("../internals/require-object-coercible"),m=y("../internals/species-constructor"),_=y("../internals/advance-string-index"),u=y("../internals/to-length"),p=y("../internals/regexp-exec-abstract"),g=y("../internals/regexp-exec"),y=y("../internals/fails"),S=[].push,b=Math.min,E=4294967295,x=!y(function(){return!RegExp(E,"y")});o("split",2,function(k,T,j){var A="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(C,I){var F=String(f(this)),N=I===void 0?E:I>>>0;if(N==0)return[];if(C===void 0)return[F];if(!c(C))return T.call(F,C,N);for(var z,R,q,M=[],I=(C.ignoreCase?"i":"")+(C.multiline?"m":"")+(C.unicode?"u":"")+(C.sticky?"y":""),D=0,X=new RegExp(C.source,I+"g");(z=g.call(X,F))&&!(D<(R=X.lastIndex)&&(M.push(F.slice(D,z.index)),1<z.length&&z.index<F.length&&S.apply(M,z.slice(1)),q=z[0].length,D=R,M.length>=N));)X.lastIndex===z.index&&X.lastIndex++;return D===F.length?!q&&X.test("")||M.push(""):M.push(F.slice(D)),M.length>N?M.slice(0,N):M}:"0".split(void 0,0).length?function(C,I){return C===void 0&&I===0?[]:T.call(this,C,I)}:T;return[function(C,I){var F=f(this),N=C==null?void 0:C[k];return N!==void 0?N.call(C,F,I):A.call(String(F),C,I)},function(z,I){var F=j(A,z,this,I,A!==T);if(F.done)return F.value;var F=i(z),N=String(this),z=m(F,RegExp),R=F.unicode,q=(F.ignoreCase?"i":"")+(F.multiline?"m":"")+(F.unicode?"u":"")+(x?"y":"g"),M=new z(x?F:"^(?:"+F.source+")",q),D=I===void 0?E:I>>>0;if(D==0)return[];if(N.length===0)return p(M,N)===null?[N]:[];for(var X=0,O=0,G=[];O<N.length;){M.lastIndex=x?O:0;var K,Z=p(M,x?N:N.slice(O));if(Z===null||(K=b(u(M.lastIndex+(x?0:O)),N.length))===X)O=_(N,O,R);else{if(G.push(N.slice(X,O)),G.length===D)return G;for(var U=1;U<=Z.length-1;U++)if(G.push(Z[U]),G.length===D)return G;O=X=K}}return G.push(N.slice(X)),G}]},!x)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],199:[function(_,a,l){var o=_("../internals/export"),c=_("../internals/object-get-own-property-descriptor").f,i=_("../internals/to-length"),f=_("../internals/not-a-regexp"),m=_("../internals/require-object-coercible"),g=_("../internals/correct-is-regexp-logic"),_=_("../internals/is-pure"),u="".startsWith,p=Math.min,g=g("startsWith");o({target:"String",proto:!0,forced:!!(_||g||!(o=c(String.prototype,"startsWith"))||o.writable)&&!g},{startsWith:function(E){var S=String(m(this)),b=(f(E),i(p(1<arguments.length?arguments[1]:void 0,S.length))),E=String(E);return u?u.call(S,E,b):S.slice(b,b+E.length)===E}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],200:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/create-html");o({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return c(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],201:[function(t,a,l){var o=t("../internals/export"),c=t("../internals/string-trim").trim;o({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return c(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],202:[function(b,a,l){var o,c,i,f,m,_=b("../internals/export"),u=b("../internals/descriptors"),p=b("../internals/global"),g=b("../internals/has"),y=b("../internals/is-object"),S=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),E=p.Symbol;!u||typeof E!="function"||"description"in E.prototype&&E().description===void 0||(o={},b(c=function(){var x=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),k=this instanceof c?new E(x):x===void 0?E():E(x);return x===""&&(o[k]=!0),k},E),(p=c.prototype=E.prototype).constructor=c,i=p.toString,f=String(E("test"))=="Symbol(test)",m=/^Symbol\((.*)\)[^)]+$/,S(p,"description",{configurable:!0,get:function(){var x=y(this)?this.valueOf():this,k=i.call(x);return g(o,x)?"":(x=f?k.slice(7,-1):k.replace(m,"$1"))===""?void 0:x}}),_({global:!0,forced:!0},{Symbol:c}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],203:[function(t,a,l){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],204:[function(he,a,l){function o(ce,we){var Oe=be[ce]=F(pe[xe]);return _e(Oe,{type:fe,tag:ce,description:we}),g||(Oe.description=we),Oe}function c(ce,Le){T(ce);var Oe=A(Le),Le=N(Oe).concat(ge(Oe));return ne(Le,function(qe){g&&!de.call(Oe,qe)||Fe(ce,qe,Oe[qe])}),ce}function i(Le,qe){var Oe,Le=A(Le),qe=C(qe,!0);if(Le!==ue||!E(be,qe)||E(ve,qe))return!(Oe=Ie(Le,qe))||!E(be,qe)||E(Le,se)&&Le[se][qe]||(Oe.enumerable=!0),Oe}function f(we){var we=te(A(we)),Oe=[];return ne(we,function(Le){E(be,Le)||E(Z,Le)||Oe.push(Le)}),Oe}var m=he("../internals/export"),_=he("../internals/global"),u=he("../internals/get-built-in"),p=he("../internals/is-pure"),g=he("../internals/descriptors"),y=he("../internals/native-symbol"),S=he("../internals/use-symbol-as-uid"),b=he("../internals/fails"),E=he("../internals/has"),x=he("../internals/is-array"),k=he("../internals/is-object"),T=he("../internals/an-object"),j=he("../internals/to-object"),A=he("../internals/to-indexed-object"),C=he("../internals/to-primitive"),I=he("../internals/create-property-descriptor"),F=he("../internals/object-create"),N=he("../internals/object-keys"),z=he("../internals/object-get-own-property-names"),R=he("../internals/object-get-own-property-names-external"),q=he("../internals/object-get-own-property-symbols"),M=he("../internals/object-get-own-property-descriptor"),D=he("../internals/object-define-property"),X=he("../internals/object-property-is-enumerable"),O=he("../internals/create-non-enumerable-property"),G=he("../internals/redefine"),K=he("../internals/shared"),Ge=he("../internals/shared-key"),Z=he("../internals/hidden-keys"),U=he("../internals/uid"),V=he("../internals/well-known-symbol"),L=he("../internals/well-known-symbol-wrapped"),H=he("../internals/define-well-known-symbol"),J=he("../internals/set-to-string-tag"),Xe=he("../internals/internal-state"),ne=he("../internals/array-iteration").forEach,se=Ge("hidden"),fe="Symbol",xe="prototype",he=V("toPrimitive"),_e=Xe.set,ye=Xe.getterFor(fe),ue=Object[xe],pe=_.Symbol,ke=u("JSON","stringify"),Ie=M.f,Y=D.f,te=R.f,re=X.f,be=K("symbols"),ve=K("op-symbols"),je=K("string-to-symbol-registry"),Re=K("symbol-to-string-registry"),Ge=K("wks"),Xe=_.QObject,Ke=!Xe||!Xe[xe]||!Xe[xe].findChild,Pe=g&&b(function(){return F(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a!=7})?function(ce,we,Oe){var Le=Ie(ue,we);Le&&delete ue[we],Y(ce,we,Oe),Le&&ce!==ue&&Y(ue,we,Le)}:Y,We=S?function(ce){return typeof ce=="symbol"}:function(ce){return Object(ce)instanceof pe},Fe=function(ce,we,Oe){return ce===ue&&Fe(ve,we,Oe),T(ce),we=C(we,!0),T(Oe),(E(be,we)?(Oe.enumerable?(E(ce,se)&&ce[se][we]&&(ce[se][we]=!1),Oe=F(Oe,{enumerable:I(0,!1)})):(E(ce,se)||Y(ce,se,I(1,{})),ce[se][we]=!0),Pe):Y)(ce,we,Oe)},de=function(we){var we=C(we,!0),Oe=re.call(this,we);return!(this===ue&&E(be,we)&&!E(ve,we))&&(!(Oe||!E(this,we)||!E(be,we)||E(this,se)&&this[se][we])||Oe)},ge=function(Oe){var we=Oe===ue,Oe=te(we?ve:A(Oe)),Le=[];return ne(Oe,function(qe){!E(be,qe)||we&&!E(ue,qe)||Le.push(be[qe])}),Le};y||(G((pe=function(){if(this instanceof pe)throw TypeError("Symbol is not a constructor");var ce=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,we=U(ce),Oe=function(Le){this===ue&&Oe.call(ve,Le),E(this,se)&&E(this[se],we)&&(this[se][we]=!1),Pe(this,we,I(1,Le))};return g&&Ke&&Pe(ue,we,{configurable:!0,set:Oe}),o(we,ce)})[xe],"toString",function(){return ye(this).tag}),G(pe,"withoutSetter",function(ce){return o(U(ce),ce)}),X.f=de,D.f=Fe,M.f=i,z.f=R.f=f,q.f=ge,L.f=function(ce){return o(V(ce),ce)},g&&(Y(pe[xe],"description",{configurable:!0,get:function(){return ye(this).description}}),p||G(ue,"propertyIsEnumerable",de,{unsafe:!0}))),m({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:pe}),ne(N(Ge),function(ce){H(ce)}),m({target:fe,stat:!0,forced:!y},{for:function(Oe){var we,Oe=String(Oe);return E(je,Oe)?je[Oe]:(we=pe(Oe),je[Oe]=we,Re[we]=Oe,we)},keyFor:function(ce){if(!We(ce))throw TypeError(ce+" is not a symbol");if(E(Re,ce))return Re[ce]},useSetter:function(){Ke=!0},useSimple:function(){Ke=!1}}),m({target:"Object",stat:!0,forced:!y,sham:!g},{create:function(ce,we){return we===void 0?F(ce):c(F(ce),we)},defineProperty:Fe,defineProperties:c,getOwnPropertyDescriptor:i}),m({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:f,getOwnPropertySymbols:ge}),m({target:"Object",stat:!0,forced:b(function(){q.f(1)})},{getOwnPropertySymbols:function(ce){return q.f(j(ce))}}),ke&&m({target:"JSON",stat:!0,forced:!y||b(function(){var ce=pe();return ke([ce])!="[null]"||ke({a:ce})!="{}"||ke(Object(ce))!="{}"})},{stringify:function(ce,we,Oe){for(var Le,qe=[ce],Qe=1;Qe<arguments.length;)qe.push(arguments[Qe++]);if((k(Le=we)||ce!==void 0)&&!We(ce))return x(we)||(we=function(rt,tt){if(typeof Le=="function"&&(tt=Le.call(this,rt,tt)),!We(tt))return tt}),qe[1]=we,ke.apply(null,qe)}}),pe[xe][he]||O(pe[xe],he,pe[xe].valueOf),J(pe,fe),Z[se]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],205:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-copy-within"),i=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(f,m){return c.call(i(this),f,m,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],206:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").every,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],207:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-fill"),i=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(f){return c.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],208:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").filter,i=t("../internals/species-constructor"),f=o.aTypedArray,m=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(_){for(var u=c(f(this),_,1<arguments.length?arguments[1]:void 0),_=i(this,this.constructor),p=0,g=u.length,y=new(m(_))(g);p<g;)y[p]=u[p++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],209:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").findIndex,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],210:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").find,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],211:[function(t,a,l){t("../internals/typed-array-constructor")("Float32",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],212:[function(t,a,l){t("../internals/typed-array-constructor")("Float64",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],213:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").forEach,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(f){c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],214:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").includes,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],215:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").indexOf,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],216:[function(t,a,l){t("../internals/typed-array-constructor")("Int16",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],217:[function(t,a,l){t("../internals/typed-array-constructor")("Int32",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],218:[function(c,a,l){function o(){return i.call(_(this))}var g=c("../internals/global"),p=c("../internals/array-buffer-view-core"),u=c("../modules/es.array.iterator"),c=c("../internals/well-known-symbol")("iterator"),g=g.Uint8Array,i=u.values,f=u.keys,m=u.entries,_=p.aTypedArray,u=p.exportTypedArrayMethod,p=g&&g.prototype[c],g=!!p&&(p.name=="values"||p.name==null);u("entries",function(){return m.call(_(this))}),u("keys",function(){return f.call(_(this))}),u("values",o,!g),u(c,o,!g)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],219:[function(c,a,l){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,i=[].join;c("join",function(f){return i.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],220:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-last-index-of"),i=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(f){return c.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],221:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").map,i=t("../internals/species-constructor"),f=o.aTypedArray,m=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(_){return c(f(this),_,1<arguments.length?arguments[1]:void 0,function(u,p){return new(m(i(u,u.constructor)))(p)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],222:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").right,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(f){return c(i(this),f,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],223:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").left,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(f){return c(i(this),f,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],224:[function(c,a,l){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,i=Math.floor;c("reverse",function(){for(var f,m=o(this).length,_=i(m/2),u=0;u<_;)f=this[u],this[u++]=this[--m],this[m]=f;return this})},{"../internals/array-buffer-view-core":12}],225:[function(m,a,l){var o=m("../internals/array-buffer-view-core"),c=m("../internals/to-length"),i=m("../internals/to-offset"),f=m("../internals/to-object"),m=m("../internals/fails"),_=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(u){_(this);var p=i(1<arguments.length?arguments[1]:void 0,1),g=this.length,y=f(u),S=c(y.length),b=0;if(g<S+p)throw RangeError("Wrong length");for(;b<S;)this[p+b]=y[b++]},m(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],226:[function(c,a,l){var m=c("../internals/array-buffer-view-core"),o=c("../internals/species-constructor"),c=c("../internals/fails"),i=m.aTypedArray,f=m.aTypedArrayConstructor,m=m.exportTypedArrayMethod,_=[].slice;m("slice",function(u,p){for(var g=_.call(i(this),u,p),u=o(this,this.constructor),y=0,S=g.length,b=new(f(u))(S);y<S;)b[y]=g[y++];return b},c(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],227:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").some,i=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(f){return c(i(this),f,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],228:[function(c,a,l){var c=c("../internals/array-buffer-view-core"),o=c.aTypedArray,c=c.exportTypedArrayMethod,i=[].sort;c("sort",function(f){return i.call(o(this),f)})},{"../internals/array-buffer-view-core":12}],229:[function(t,a,l){var o=t("../internals/array-buffer-view-core"),c=t("../internals/to-length"),i=t("../internals/to-absolute-index"),f=t("../internals/species-constructor"),m=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(y,u){var p=m(this),g=p.length,y=i(y,g);return new(f(p,p.constructor))(p.buffer,p.byteOffset+y*p.BYTES_PER_ELEMENT,c((u===void 0?g:i(u,g))-y))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],230:[function(c,a,l){var m=c("../internals/global"),o=c("../internals/array-buffer-view-core"),c=c("../internals/fails"),i=m.Int8Array,f=o.aTypedArray,m=o.exportTypedArrayMethod,_=[].toLocaleString,u=[].slice,p=!!i&&c(function(){_.call(new i(1))});m("toLocaleString",function(){return _.apply(p?u.call(f(this)):f(this),arguments)},c(function(){return[1,2].toLocaleString()!=new i([1,2]).toLocaleString()})||!c(function(){i.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],231:[function(c,a,l){var o=c("../internals/array-buffer-view-core").exportTypedArrayMethod,m=c("../internals/fails"),c=c("../internals/global").Uint8Array,c=c&&c.prototype||{},i=[].toString,f=[].join,m=(m(function(){i.call({})})&&(i=function(){return f.call(this)}),c.toString!=i);o("toString",i,m)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],232:[function(t,a,l){t("../internals/typed-array-constructor")("Uint16",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],233:[function(t,a,l){t("../internals/typed-array-constructor")("Uint32",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],234:[function(t,a,l){t("../internals/typed-array-constructor")("Uint8",function(o){return function(c,i,f){return o(this,c,i,f)}})},{"../internals/typed-array-constructor":142}],235:[function(t,a,l){t("../internals/typed-array-constructor")("Uint8",function(o){return function(c,i,f){return o(this,c,i,f)}},!0)},{"../internals/typed-array-constructor":142}],236:[function(E,T,l){function o(j){return function(){return j(this,arguments.length?arguments[0]:void 0)}}var c,i,f,m,_,x=E("../internals/global"),u=E("../internals/redefine-all"),p=E("../internals/internal-metadata"),g=E("../internals/collection"),y=E("../internals/collection-weak"),S=E("../internals/is-object"),b=E("../internals/internal-state").enforce,E=E("../internals/native-weak-map"),x=!x.ActiveXObject&&"ActiveXObject"in x,k=Object.isExtensible,T=T.exports=g("WeakMap",o,y);E&&x&&(c=y.getConstructor(o,"WeakMap",!0),p.REQUIRED=!0,g=T.prototype,i=g.delete,f=g.has,m=g.get,_=g.set,u(g,{delete:function(j){var A;return S(j)&&!k(j)?((A=b(this)).frozen||(A.frozen=new c),i.call(this,j)||A.frozen.delete(j)):i.call(this,j)},has:function(j){var A;return S(j)&&!k(j)?((A=b(this)).frozen||(A.frozen=new c),f.call(this,j)||A.frozen.has(j)):f.call(this,j)},get:function(j){var A;return!S(j)||k(j)||((A=b(this)).frozen||(A.frozen=new c),f.call(this,j))?m.call(this,j):A.frozen.get(j)},set:function(j,A){var C;return!S(j)||k(j)||((C=b(this)).frozen||(C.frozen=new c),f.call(this,j))?_.call(this,j,A):C.frozen.set(j,A),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],237:[function(t,a,l){var o,c=t("../internals/global"),i=t("../internals/dom-iterables"),f=t("../internals/array-for-each"),m=t("../internals/create-non-enumerable-property");for(o in i){var _=c[o],_=_&&_.prototype;if(_&&_.forEach!==f)try{m(_,"forEach",f)}catch{_.forEach=f}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],238:[function(_,a,l){var o,c=_("../internals/global"),i=_("../internals/dom-iterables"),f=_("../modules/es.array.iterator"),m=_("../internals/create-non-enumerable-property"),_=_("../internals/well-known-symbol"),u=_("iterator"),p=_("toStringTag"),g=f.values;for(o in i){var y=c[o],S=y&&y.prototype;if(S){if(S[u]!==g)try{m(S,u,g)}catch{S[u]=g}if(S[p]||m(S,p,o),i[o]){for(var b in f)if(S[b]!==f[b])try{m(S,b,f[b])}catch{S[b]=f[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],239:[function(se,a,l){se("../modules/es.array.iterator");function o(fe){try{return decodeURIComponent(fe)}catch{return fe}}function c(fe){return H[fe]}function i(fe){return encodeURIComponent(fe).replace(L,c)}function f(fe){this.entries.length=0,J(this.entries,fe)}function m(fe,xe){if(fe<xe)throw TypeError("Not enough arguments")}function _(){x(this,_,D);var fe,xe,he,_e,ye,ue,pe,ke,Ie=0<arguments.length?arguments[0]:void 0,Y=[];if(O(this,{type:D,entries:Y,updateURL:function(){},updateSearchParams:f}),Ie!==void 0)if(C(Ie))if(typeof(fe=z(Ie))=="function")for(he=(xe=fe.call(Ie)).next;!(_e=he.call(xe)).done;){if((ue=(ye=(_e=N(A(_e.value))).next).call(_e)).done||(pe=ye.call(_e)).done||!ye.call(_e).done)throw TypeError("Expected sequence with length 2");Y.push({key:ue.value+"",value:pe.value+""})}else for(ke in Ie)k(Ie,ke)&&Y.push({key:ke,value:Ie[ke]+""});else J(Y,typeof Ie=="string"?Ie.charAt(0)==="?"?Ie.slice(1):Ie:Ie+"")}var u=se("../internals/export"),M=se("../internals/get-built-in"),p=se("../internals/native-url"),g=se("../internals/redefine"),y=se("../internals/redefine-all"),S=se("../internals/set-to-string-tag"),b=se("../internals/create-iterator-constructor"),E=se("../internals/internal-state"),x=se("../internals/an-instance"),k=se("../internals/has"),T=se("../internals/function-bind-context"),j=se("../internals/classof"),A=se("../internals/an-object"),C=se("../internals/is-object"),I=se("../internals/object-create"),F=se("../internals/create-property-descriptor"),N=se("../internals/get-iterator"),z=se("../internals/get-iterator-method"),se=se("../internals/well-known-symbol"),R=M("fetch"),q=M("Headers"),M=se("iterator"),D="URLSearchParams",X=D+"Iterator",O=E.set,G=E.getterFor(D),K=E.getterFor(X),Z=/\+/g,U=Array(4),V=function(fe){var xe,he=fe.replace(Z," "),_e=4;try{return decodeURIComponent(he)}catch{for(;_e;)he=he.replace((xe=_e--,U[xe-1]||(U[xe-1]=RegExp("((?:%[\\da-f]{2}){"+xe+"})","gi"))),o);return he}},L=/[!'()~]|%20/g,H={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},J=function(fe,xe){if(xe)for(var he,_e=xe.split("&"),ye=0;ye<_e.length;)(he=_e[ye++]).length&&(he=he.split("="),fe.push({key:V(he.shift()),value:V(he.join("="))}))},ne=b(function(fe,xe){O(this,{type:X,iterator:N(G(fe).entries),kind:xe})},"Iterator",function(){var xe=K(this),fe=xe.kind,xe=xe.iterator.next(),he=xe.value;return xe.done||(xe.value=fe==="keys"?he.key:fe==="values"?he.value:[he.key,he.value]),xe}),se=_.prototype;y(se,{append:function(fe,xe){m(arguments.length,2);var he=G(this);he.entries.push({key:fe+"",value:xe+""}),he.updateURL()},delete:function(fe){m(arguments.length,1);for(var xe=G(this),he=xe.entries,_e=fe+"",ye=0;ye<he.length;)he[ye].key===_e?he.splice(ye,1):ye++;xe.updateURL()},get:function(fe){m(arguments.length,1);for(var xe=G(this).entries,he=fe+"",_e=0;_e<xe.length;_e++)if(xe[_e].key===he)return xe[_e].value;return null},getAll:function(fe){m(arguments.length,1);for(var xe=G(this).entries,he=fe+"",_e=[],ye=0;ye<xe.length;ye++)xe[ye].key===he&&_e.push(xe[ye].value);return _e},has:function(fe){m(arguments.length,1);for(var xe=G(this).entries,he=fe+"",_e=0;_e<xe.length;)if(xe[_e++].key===he)return!0;return!1},set:function(fe,xe){m(arguments.length,1);for(var he,_e=G(this),ye=_e.entries,ue=!1,pe=fe+"",ke=xe+"",Ie=0;Ie<ye.length;Ie++)(he=ye[Ie]).key===pe&&(ue?ye.splice(Ie--,1):(ue=!0,he.value=ke));ue||ye.push({key:pe,value:ke}),_e.updateURL()},sort:function(){for(var fe,xe,he=G(this),_e=he.entries,ye=_e.slice(),ue=_e.length=0;ue<ye.length;ue++){for(fe=ye[ue],xe=0;xe<ue;xe++)if(_e[xe].key>fe.key){_e.splice(xe,0,fe);break}xe===ue&&_e.push(fe)}he.updateURL()},forEach:function(fe){for(var xe,he=G(this).entries,_e=T(fe,1<arguments.length?arguments[1]:void 0,3),ye=0;ye<he.length;)_e((xe=he[ye++]).value,xe.key,this)},keys:function(){return new ne(this,"keys")},values:function(){return new ne(this,"values")},entries:function(){return new ne(this,"entries")}},{enumerable:!0}),g(se,M,se.entries),g(se,"toString",function(){for(var fe,xe=G(this).entries,he=[],_e=0;_e<xe.length;)fe=xe[_e++],he.push(i(fe.key)+"="+i(fe.value));return he.join("&")},{enumerable:!0}),S(_,D),u({global:!0,forced:!p},{URLSearchParams:_}),p||typeof R!="function"||typeof q!="function"||u({global:!0,enumerable:!0,forced:!0},{fetch:function(ye){var xe,he,_e,ye=[ye];return 1<arguments.length&&(C(xe=arguments[1])&&(he=xe.body,j(he)===D&&((_e=xe.headers?new q(xe.headers):new q).has("content-type")||_e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),xe=I(xe,{body:F(0,String(he)),headers:F(0,_e)}))),ye.push(xe)),R.apply(this,ye)}}),a.exports={URLSearchParams:_,getState:G}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":161}],240:[function(N,a,l){N("../modules/es.string.iterator");function o(Ae){var et,it,Je,St;if(typeof Ae=="number"){for(et=[],it=0;it<4;it++)et.unshift(Ae%256),Ae=X(Ae/256);return et.join(".")}if(typeof Ae!="object")return Ae;for(et="",Je=pe(Ae),it=0;it<8;it++)St&&Ae[it]===0||(St=St&&!1,Je===it?(et+=it?":":"::",St=!0):(et+=Ae[it].toString(16),it<7&&(et+=":")));return"["+et+"]"}function c(Ae){return!Ae.host||Ae.cannotBeABaseURL||Ae.scheme=="file"}function i(Ae,et,it,Je){var St,Ze,Tt,st=it||We,Et=0,at="",Bt=!1,Wt=!1,Ft=!1;for(it||(Ae.scheme="",Ae.username="",Ae.password="",Ae.host=null,Ae.port=null,Ae.path=[],Ae.query=null,Ae.fragment=null,Ae.cannotBeABaseURL=!1,et=et.replace(_e,"")),et=et.replace(ye,""),St=j(et);Et<=St.length;){switch(Ze=St[Et],st){case We:if(!Ze||!V.test(Ze)){if(it)return K;st=de;continue}at+=Ze.toLowerCase(),st=Fe;break;case Fe:if(Ze&&(L.test(Ze)||Ze=="+"||Ze=="-"||Ze=="."))at+=Ze.toLowerCase();else{if(Ze!=":"){if(it)return K;at="",st=de,Et=0;continue}if(it&&(ve(Ae)!=k(be,at)||at=="file"&&(je(Ae)||Ae.port!==null)||Ae.scheme=="file"&&!Ae.host))return;if(Ae.scheme=at,it)return void(ve(Ae)&&be[Ae.scheme]==Ae.port&&(Ae.port=null));at="",Ae.scheme=="file"?st=gt:ve(Ae)&&Je&&Je.scheme==Ae.scheme?st=ge:ve(Ae)?st=Le:St[Et+1]=="/"?(st=ce,Et++):(Ae.cannotBeABaseURL=!0,Ae.path.push(""),st=It)}break;case de:if(!Je||Je.cannotBeABaseURL&&Ze!="#")return K;if(Je.cannotBeABaseURL&&Ze=="#"){Ae.scheme=Je.scheme,Ae.path=Je.path.slice(),Ae.query=Je.query,Ae.fragment="",Ae.cannotBeABaseURL=!0,st=Ut;break}st=Je.scheme=="file"?gt:we;continue;case ge:if(Ze!="/"||St[Et+1]!="/"){st=we;continue}st=qe,Et++;break;case ce:if(Ze=="/"){st=Qe;break}st=pt;continue;case we:if(Ae.scheme=Je.scheme,Ze==_)Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.query=Je.query;else if(Ze=="/"||Ze=="\\"&&ve(Ae))st=Oe;else if(Ze=="?")Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.query="",st=Jt;else{if(Ze!="#"){Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.path.pop(),st=pt;continue}Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,Ae.path=Je.path.slice(),Ae.query=Je.query,Ae.fragment="",st=Ut}break;case Oe:if(!ve(Ae)||Ze!="/"&&Ze!="\\"){if(Ze!="/"){Ae.username=Je.username,Ae.password=Je.password,Ae.host=Je.host,Ae.port=Je.port,st=pt;continue}st=Qe}else st=qe;break;case Le:if(st=qe,Ze!="/"||at.charAt(Et+1)!="/")continue;Et++;break;case qe:if(Ze=="/"||Ze=="\\")break;st=Qe;continue;case Qe:if(Ze=="@"){Bt&&(at="%40"+at);for(var Bt=!0,Xt=j(at),$t=0;$t<Xt.length;$t++){var rr=Xt[$t];rr!=":"||Ft?(rr=re(rr,te),Ft?Ae.password+=rr:Ae.username+=rr):Ft=!0}at=""}else if(Ze==_||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ve(Ae)){if(Bt&&at=="")return G;Et-=j(at).length+1,at="",st=rt}else at+=Ze;break;case rt:case tt:if(it&&Ae.scheme=="file"){st=lt;continue}if(Ze!=":"||Wt){if(Ze==_||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ve(Ae)){if(ve(Ae)&&at=="")return Z;if(it&&at==""&&(je(Ae)||Ae.port!==null))return;if(Tt=ue(Ae,at))return Tt;if(at="",st=vt,it)return;continue}Ze=="["?Wt=!0:Ze=="]"&&(Wt=!1),at+=Ze}else{if(at=="")return Z;if(Tt=ue(Ae,at))return Tt;if(at="",st=ot,it==tt)return}break;case ot:if(!H.test(Ze)){if(Ze==_||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&ve(Ae)||it){if(at!=""){var Qt=parseInt(at,10);if(65535<Qt)return U;Ae.port=ve(Ae)&&Qt===be[Ae.scheme]?null:Qt,at=""}if(it)return;st=vt;continue}return U}at+=Ze;break;case gt:if(Ae.scheme="file",Ze=="/"||Ze=="\\")st=mt;else{if(!Je||Je.scheme!="file"){st=pt;continue}if(Ze==_)Ae.host=Je.host,Ae.path=Je.path.slice(),Ae.query=Je.query;else if(Ze=="?")Ae.host=Je.host,Ae.path=Je.path.slice(),Ae.query="",st=Jt;else{if(Ze!="#"){Ge(St.slice(Et).join(""))||(Ae.host=Je.host,Ae.path=Je.path.slice(),Xe(Ae)),st=pt;continue}Ae.host=Je.host,Ae.path=Je.path.slice(),Ae.query=Je.query,Ae.fragment="",st=Ut}}break;case mt:if(Ze=="/"||Ze=="\\"){st=lt;break}Je&&Je.scheme=="file"&&!Ge(St.slice(Et).join(""))&&(Re(Je.path[0],!0)?Ae.path.push(Je.path[0]):Ae.host=Je.host),st=pt;continue;case lt:if(Ze==_||Ze=="/"||Ze=="\\"||Ze=="?"||Ze=="#"){if(!it&&Re(at))st=pt;else{if(at==""){if(Ae.host="",it)return}else{if(Tt=ue(Ae,at))return Tt;if(Ae.host=="localhost"&&(Ae.host=""),it)return;at=""}st=vt}continue}at+=Ze;break;case vt:if(ve(Ae)){if(st=pt,Ze!="/"&&Ze!="\\")continue}else if(it||Ze!="?")if(it||Ze!="#"){if(Ze!=_&&(st=pt,Ze!="/"))continue}else Ae.fragment="",st=Ut;else Ae.query="",st=Jt;break;case pt:if(Ze==_||Ze=="/"||Ze=="\\"&&ve(Ae)||!it&&(Ze=="?"||Ze=="#")){if(Pe(at)?(Xe(Ae),Ze=="/"||Ze=="\\"&&ve(Ae)||Ae.path.push("")):Ke(at)?Ze=="/"||Ze=="\\"&&ve(Ae)||Ae.path.push(""):(Ae.scheme=="file"&&!Ae.path.length&&Re(at)&&(Ae.host&&(Ae.host=""),at=at.charAt(0)+":"),Ae.path.push(at)),at="",Ae.scheme=="file"&&(Ze==_||Ze=="?"||Ze=="#"))for(;1<Ae.path.length&&Ae.path[0]==="";)Ae.path.shift();Ze=="?"?(Ae.query="",st=Jt):Ze=="#"&&(Ae.fragment="",st=Ut)}else at+=re(Ze,Y);break;case It:Ze=="?"?(Ae.query="",st=Jt):Ze=="#"?(Ae.fragment="",st=Ut):Ze!=_&&(Ae.path[0]+=re(Ze,ke));break;case Jt:it||Ze!="#"?Ze!=_&&(Ze=="'"&&ve(Ae)?Ae.query+="%27":Ae.query+=Ze=="#"?"%23":re(Ze,ke)):(Ae.fragment="",st=Ut);break;case Ut:Ze!=_&&(Ae.fragment+=re(Ze,Ie))}Et++}}function f(Ze){var et,it,Je=x(this,f,"URL"),St=1<arguments.length?arguments[1]:void 0,Ze=String(Ze),Tt=M(Je,{type:"URL"});if(St!==void 0){if(St instanceof f)et=D(St);else if(it=i(et={},String(St)))throw TypeError(it)}if(it=i(Tt,Ze,null,et))throw TypeError(it);var st=Tt.searchParams=new R;(St=q(st)).updateSearchParams(Tt.query),St.updateURL=function(){Tt.query=String(st)||null},y||(Je.href=Pt.call(Je),Je.origin=kt.call(Je),Je.protocol=qt.call(Je),Je.username=Ht.call(Je),Je.password=Mt.call(Je),Je.host=Zt.call(Je),Je.hostname=Sr.call(Je),Je.port=Er.call(Je),Je.pathname=kr.call(Je),Je.search=Tr.call(Je),Je.searchParams=lr.call(Je),Je.hash=Cr.call(Je))}function m(Ae,et){return{get:Ae,set:et,configurable:!0,enumerable:!0}}var _,u,p,g=N("../internals/export"),y=N("../internals/descriptors"),S=N("../internals/native-url"),At=N("../internals/global"),b=N("../internals/object-define-properties"),E=N("../internals/redefine"),x=N("../internals/an-instance"),k=N("../internals/has"),T=N("../internals/object-assign"),j=N("../internals/array-from"),A=N("../internals/string-multibyte").codeAt,C=N("../internals/string-punycode-to-ascii"),I=N("../internals/set-to-string-tag"),F=N("../modules/web.url-search-params"),N=N("../internals/internal-state"),z=At.URL,R=F.URLSearchParams,q=F.getState,M=N.set,D=N.getterFor("URL"),X=Math.floor,O=Math.pow,G="Invalid authority",K="Invalid scheme",Z="Invalid host",U="Invalid port",V=/[A-Za-z]/,L=/[\d+-.A-Za-z]/,H=/\d/,J=/^(0x|0X)/,ne=/^[0-7]+$/,se=/^\d+$/,fe=/^[\dA-Fa-f]+$/,xe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,he=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,_e=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ye=/[\u0009\u000A\u000D]/g,ue=function(Ae,et){var it,Je,St;if(et.charAt(0)=="[")return et.charAt(et.length-1)=="]"&&(it=function(Ze){var Tt=[0,0,0,0,0,0,0,0],st=0,Et=null,at=0,Bt,Wt,Ft,Xt,$t,rr,Qt,Gt=function(){return Ze.charAt(at)};if(Gt()==":"){if(Ze.charAt(1)!=":")return;at+=2,st++,Et=st}for(;Gt();){if(st==8)return;if(Gt()==":"){if(Et!==null)return;at++,st++,Et=st;continue}for(Bt=Wt=0;Wt<4&&fe.test(Gt());)Bt=Bt*16+parseInt(Gt(),16),at++,Wt++;if(Gt()=="."){if(Wt==0||(at-=Wt,st>6))return;for(Ft=0;Gt();){if(Xt=null,Ft>0)if(Gt()=="."&&Ft<4)at++;else return;if(!H.test(Gt()))return;for(;H.test(Gt());){if($t=parseInt(Gt(),10),Xt===null)Xt=$t;else{if(Xt==0)return;Xt=Xt*10+$t}if(Xt>255)return;at++}Tt[st]=Tt[st]*256+Xt,Ft++,(Ft==2||Ft==4)&&st++}if(Ft!=4)return;break}else if(Gt()==":"){if(at++,!Gt())return}else if(Gt())return;Tt[st++]=Bt}if(Et!==null)for(rr=st-Et,st=7;st!=0&&rr>0;)Qt=Tt[st],Tt[st--]=Tt[Et+rr-1],Tt[Et+--rr]=Qt;else if(st!=8)return;return Tt}(et.slice(1,-1)))?void(Ae.host=it):Z;if(ve(Ae))return et=C(et),xe.test(et)||(it=function(Ze){var Tt=Ze.split("."),st,Et,at,Bt,Wt,Ft,Xt;if(Tt.length&&Tt[Tt.length-1]==""&&Tt.pop(),(st=Tt.length)>4)return Ze;for(Et=[],at=0;at<st;at++){if(Bt=Tt[at],Bt=="")return Ze;if(Wt=10,Bt.length>1&&Bt.charAt(0)=="0"&&(Wt=J.test(Bt)?16:8,Bt=Bt.slice(Wt==8?1:2)),Bt==="")Ft=0;else{if(!(Wt==10?se:Wt==8?ne:fe).test(Bt))return Ze;Ft=parseInt(Bt,Wt)}Et.push(Ft)}for(at=0;at<st;at++)if(Ft=Et[at],at==st-1){if(Ft>=O(256,5-st))return null}else if(Ft>255)return null;for(Xt=Et.pop(),at=0;at<Et.length;at++)Xt+=Et[at]*O(256,3-at);return Xt}(et))===null?Z:void(Ae.host=it);if(he.test(et))return Z;for(it="",Je=j(et),St=0;St<Je.length;St++)it+=re(Je[St],ke);Ae.host=it},pe=function(Ae){for(var et=null,it=1,Je=null,St=0,Ze=0;Ze<8;Ze++)Ae[Ze]!==0?(it<St&&(et=Je,it=St),Je=null,St=0):(Je===null&&(Je=Ze),++St);return it<St&&(et=Je,it=St),et},ke={},Ie=T({},ke,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=T({},Ie,{"#":1,"?":1,"{":1,"}":1}),te=T({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),re=function(Ae,et){var it=A(Ae,0);return 32<it&&it<127&&!k(et,Ae)?Ae:encodeURIComponent(Ae)},be={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ve=function(Ae){return k(be,Ae.scheme)},je=function(Ae){return Ae.username!=""||Ae.password!=""},Re=function(Ae,et){return Ae.length==2&&V.test(Ae.charAt(0))&&((Ae=Ae.charAt(1))==":"||!et&&Ae=="|")},Ge=function(Ae){return 1<Ae.length&&Re(Ae.slice(0,2))&&(Ae.length==2||(Ae=Ae.charAt(2))==="/"||Ae==="\\"||Ae==="?"||Ae==="#")},Xe=function(Ae){var et=Ae.path,it=et.length;!it||Ae.scheme=="file"&&it==1&&Re(et[0],!0)||et.pop()},Ke=function(Ae){return Ae==="."||Ae.toLowerCase()==="%2e"},Pe=function(Ae){return(Ae=Ae.toLowerCase())===".."||Ae==="%2e."||Ae===".%2e"||Ae==="%2e%2e"},We={},Fe={},de={},ge={},ce={},we={},Oe={},Le={},qe={},Qe={},rt={},tt={},ot={},gt={},mt={},lt={},vt={},pt={},It={},Jt={},Ut={},At=f.prototype,Pt=function(){var Ae=D(this),et=Ae.scheme,it=Ae.username,Je=Ae.password,St=Ae.host,Ze=Ae.port,Tt=Ae.path,st=Ae.query,Et=Ae.fragment,at=et+":";return St!==null?(at+="//",je(Ae)&&(at+=it+(Je?":"+Je:"")+"@"),at+=o(St),Ze!==null&&(at+=":"+Ze)):et=="file"&&(at+="//"),at+=Ae.cannotBeABaseURL?Tt[0]:Tt.length?"/"+Tt.join("/"):"",st!==null&&(at+="?"+st),Et!==null&&(at+="#"+Et),at},kt=function(){var Ae=D(this),et=Ae.scheme,it=Ae.port;if(et=="blob")try{return new URL(et.path[0]).origin}catch{return"null"}return et!="file"&&ve(Ae)?et+"://"+o(Ae.host)+(it!==null?":"+it:""):"null"},qt=function(){return D(this).scheme+":"},Ht=function(){return D(this).username},Mt=function(){return D(this).password},Zt=function(){var et=D(this),Ae=et.host,et=et.port;return Ae===null?"":et===null?o(Ae):o(Ae)+":"+et},Sr=function(){var Ae=D(this).host;return Ae===null?"":o(Ae)},Er=function(){var Ae=D(this).port;return Ae===null?"":String(Ae)},kr=function(){var Ae=D(this),et=Ae.path;return Ae.cannotBeABaseURL?et[0]:et.length?"/"+et.join("/"):""},Tr=function(){var Ae=D(this).query;return Ae?"?"+Ae:""},lr=function(){return D(this).searchParams},Cr=function(){var Ae=D(this).fragment;return Ae?"#"+Ae:""};y&&b(At,{href:m(Pt,function(it){var et=D(this),it=String(it),it=i(et,it);if(it)throw TypeError(it);q(et.searchParams).updateSearchParams(et.query)}),origin:m(kt),protocol:m(qt,function(Ae){var et=D(this);i(et,String(Ae)+":",We)}),username:m(Ht,function(Ae){var et=D(this),it=j(String(Ae));if(!c(et)){et.username="";for(var Je=0;Je<it.length;Je++)et.username+=re(it[Je],te)}}),password:m(Mt,function(Ae){var et=D(this),it=j(String(Ae));if(!c(et)){et.password="";for(var Je=0;Je<it.length;Je++)et.password+=re(it[Je],te)}}),host:m(Zt,function(Ae){var et=D(this);et.cannotBeABaseURL||i(et,String(Ae),rt)}),hostname:m(Sr,function(Ae){var et=D(this);et.cannotBeABaseURL||i(et,String(Ae),tt)}),port:m(Er,function(Ae){var et=D(this);c(et)||((Ae=String(Ae))==""?et.port=null:i(et,Ae,ot))}),pathname:m(kr,function(Ae){var et=D(this);et.cannotBeABaseURL||(et.path=[],i(et,Ae+"",vt))}),search:m(Tr,function(Ae){var et=D(this);(Ae=String(Ae))==""?et.query=null:(Ae.charAt(0)=="?"&&(Ae=Ae.slice(1)),et.query="",i(et,Ae,Jt)),q(et.searchParams).updateSearchParams(et.query)}),searchParams:m(lr),hash:m(Cr,function(Ae){var et=D(this);(Ae=String(Ae))==""?et.fragment=null:(Ae.charAt(0)=="#"&&(Ae=Ae.slice(1)),et.fragment="",i(et,Ae,Ut))})}),E(At,"toJSON",function(){return Pt.call(this)},{enumerable:!0}),E(At,"toString",function(){return Pt.call(this)},{enumerable:!0}),z&&(u=z.createObjectURL,p=z.revokeObjectURL,u&&E(f,"createObjectURL",function(Ae){return u.apply(z,arguments)}),p&&E(f,"revokeObjectURL",function(Ae){return p.apply(z,arguments)})),I(f,"URL"),g({global:!0,forced:!S,sham:!y},{URL:f})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":192,"../modules/web.url-search-params":239}],241:[function(t,a,l){a.exports=t("./").polyfill()},{"./":242}],242:[function(t,a,l){(function(o,c){var i,f;i=this,f=function(){function m(ue){return typeof ue=="function"}var _=Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"},u=0,p=void 0,g=void 0,y=function(ue,pe){T[u]=ue,T[u+1]=pe,(u+=2)===2&&(g?g(j):R())},S=typeof window<"u"?window:void 0,b=S||{},b=b.MutationObserver||b.WebKitMutationObserver,E=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function k(){var ue=setTimeout;return function(){return ue(j,1)}}var T=new Array(1e3);function j(){for(var ue=0;ue<u;ue+=2)(0,T[ue])(T[ue+1]),T[ue]=void 0,T[ue+1]=void 0;u=0}function A(){try{var ue=Function("return this")().require("vertx");return(p=ue.runOnLoop||ue.runOnContext)!==void 0?function(){p(j)}:k()}catch{return k()}}var C,I,F,R=void 0;function N(ue,pe){var ke,Ie=this,Y=new this.constructor(M),te=(Y[q]===void 0&&fe(Y),Ie._state);return te?(ke=arguments[te-1],y(function(){return ne(te,Y,ke,Ie._result)})):H(Ie,Y,ue,pe),Y}function z(ue){var pe;return ue&&typeof ue=="object"&&ue.constructor===this?ue:(Z(pe=new this(M),ue),pe)}var R=E?function(){return o.nextTick(j)}:b?(I=0,E=new b(j),F=document.createTextNode(""),E.observe(F,{characterData:!0}),function(){F.data=I=++I%2}):x?((C=new MessageChannel).port1.onmessage=j,function(){return C.port2.postMessage(0)}):(S===void 0&&typeof t=="function"?A:k)(),q=Math.random().toString(36).substring(2);function M(){}var D=void 0,X=1,O=2;function G(ue,pe,ke){y(function(Ie){var Y=!1,te=function(re,be,ve,je){try{re.call(be,ve,je)}catch(Re){return Re}}(ke,pe,function(re){Y||(Y=!0,(pe!==re?Z:V)(Ie,re))},function(re){Y||(Y=!0,L(Ie,re))},Ie._label);!Y&&te&&(Y=!0,L(Ie,te))},ue)}function K(ue,pe,ke){var Ie,Y;pe.constructor===ue.constructor&&ke===N&&pe.constructor.resolve===z?(Ie=ue,(Y=pe)._state===X?V(Ie,Y._result):Y._state===O?L(Ie,Y._result):H(Y,void 0,function(te){return Z(Ie,te)},function(te){return L(Ie,te)})):ke!==void 0&&m(ke)?G(ue,pe,ke):V(ue,pe)}function Z(ue,pe){if(ue===pe)L(ue,new TypeError("You cannot resolve a promise with itself"));else if(ke=typeof pe,pe===null||ke!="object"&&ke!="function")V(ue,pe);else{ke=void 0;try{ke=pe.then}catch(Ie){return void L(ue,Ie)}K(ue,pe,ke)}var ke}function U(ue){ue._onerror&&ue._onerror(ue._result),J(ue)}function V(ue,pe){ue._state===D&&(ue._result=pe,ue._state=X,ue._subscribers.length!==0&&y(J,ue))}function L(ue,pe){ue._state===D&&(ue._state=O,ue._result=pe,y(U,ue))}function H(ue,pe,ke,Ie){var Y=ue._subscribers,te=Y.length;ue._onerror=null,Y[te]=pe,Y[te+X]=ke,Y[te+O]=Ie,te===0&&ue._state&&y(J,ue)}function J(ue){var pe=ue._subscribers,ke=ue._state;if(pe.length!==0){for(var Ie,Y=void 0,te=ue._result,re=0;re<pe.length;re+=3)Ie=pe[re],Y=pe[re+ke],Ie?ne(ke,Ie,Y,te):Y(te);ue._subscribers.length=0}}function ne(ue,pe,ke,Ie){var Y=m(ke),te=void 0,re=void 0,be=!0;if(Y){try{te=ke(Ie)}catch(ve){be=!1,re=ve}if(pe===te)return void L(pe,new TypeError("A promises callback cannot return that same promise."))}else te=Ie;pe._state===D&&(Y&&be?Z(pe,te):be===!1?L(pe,re):ue===X?V(pe,te):ue===O&&L(pe,te))}var se=0;function fe(ue){ue[q]=se++,ue._state=void 0,ue._result=void 0,ue._subscribers=[]}he.prototype._enumerate=function(ue){for(var pe=0;this._state===D&&pe<ue.length;pe++)this._eachEntry(ue[pe],pe)},he.prototype._eachEntry=function(ue,pe){var ke=this._instanceConstructor,Ie=ke.resolve;if(Ie===z){var Y,te=void 0,re=void 0,be=!1;try{te=ue.then}catch(ve){be=!0,re=ve}te===N&&ue._state!==D?this._settledAt(ue._state,pe,ue._result):typeof te!="function"?(this._remaining--,this._result[pe]=ue):ke===_e?(Y=new ke(M),be?L(Y,re):K(Y,ue,te),this._willSettleAt(Y,pe)):this._willSettleAt(new ke(function(ve){return ve(ue)}),pe)}else this._willSettleAt(Ie(ue),pe)},he.prototype._settledAt=function(ue,pe,ke){var Ie=this.promise;Ie._state===D&&(this._remaining--,ue===O?L(Ie,ke):this._result[pe]=ke),this._remaining===0&&V(Ie,this._result)},he.prototype._willSettleAt=function(ue,pe){var ke=this;H(ue,void 0,function(Ie){return ke._settledAt(X,pe,Ie)},function(Ie){return ke._settledAt(O,pe,Ie)})};var xe=he;function he(ue,pe){this._instanceConstructor=ue,this.promise=new ue(M),this.promise[q]||fe(this.promise),_(pe)?(this.length=pe.length,this._remaining=pe.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(pe),this._remaining!==0)||V(this.promise,this._result)):L(this.promise,new Error("Array Methods must be provided an Array"))}ye.prototype.catch=function(ue){return this.then(null,ue)},ye.prototype.finally=function(ue){var pe=this.constructor;return m(ue)?this.then(function(ke){return pe.resolve(ue()).then(function(){return ke})},function(ke){return pe.resolve(ue()).then(function(){throw ke})}):this.then(ue,ue)};var _e=ye;function ye(ue){if(this[q]=se++,this._result=this._state=void 0,this._subscribers=[],M!==ue){if(typeof ue!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ye))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var pe=this;try{ue(function(ke){Z(pe,ke)},function(ke){L(pe,ke)})}catch(ke){L(pe,ke)}}}return _e.prototype.then=N,_e.all=function(ue){return new xe(this,ue).promise},_e.race=function(ue){var pe=this;return _(ue)?new pe(function(ke,Ie){for(var Y=ue.length,te=0;te<Y;te++)pe.resolve(ue[te]).then(ke,Ie)}):new pe(function(ke,Ie){return Ie(new TypeError("You must pass an array to race."))})},_e.resolve=z,_e.reject=function(ue){var pe=new this(M);return L(pe,ue),pe},_e._setScheduler=function(ue){g=ue},_e._setAsap=function(ue){y=ue},_e._asap=y,_e.polyfill=function(){var ue=void 0;if(c!==void 0)ue=c;else if(typeof self<"u")ue=self;else try{ue=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var pe=ue.Promise;if(pe){var ke=null;try{ke=Object.prototype.toString.call(pe.resolve())}catch{}if(ke==="[object Promise]"&&!pe.cast)return}ue.Promise=_e},_e.Promise=_e},typeof l=="object"&&a!==void 0?a.exports=f():i.ES6Promise=f()}).call(this,t("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:251}],243:[function(t,a,l){var o,c;o=this,c=function(i,f){var m=5e3,_="callback";function u(g){try{delete window[g]}catch{window[g]=void 0}}function p(g){g=document.getElementById(g),g&&document.getElementsByTagName("head")[0].removeChild(g)}f.exports=function(g){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],S=g,b=y.timeout||m,E=y.jsonpCallback||_,x=void 0;return new Promise(function(k,T){var j=y.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),A=E+"_"+j,C=(window[j]=function(I){k({ok:!0,json:function(){return Promise.resolve(I)}}),x&&clearTimeout(x),p(A),u(j)},S+=S.indexOf("?")===-1?"?":"&",document.createElement("script"));C.setAttribute("src",""+S+E+"="+j),y.charset&&C.setAttribute("charset",y.charset),C.id=A,document.getElementsByTagName("head")[0].appendChild(C),x=setTimeout(function(){T(new Error("JSONP request to "+g+" timed out")),u(j),p(A),window[j]=function(){u(j)}},b),C.onerror=function(){T(new Error("JSONP request to "+g+" failed")),u(j),p(A),x&&clearTimeout(x)}})}},l!==void 0&&a!==void 0?c(0,a):(c(c={exports:{}},c),o.fetchJsonp=c.exports)},{}],244:[function(t,a,l){var o=function(c){var i,f,m,_,u,p,g,y,S,b,E;if(!(c===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return E=c.document,i=function(){return c.URL||c.webkitURL||c},f=E.createElementNS("http://www.w3.org/1999/xhtml","a"),m="download"in f,_=/constructor/i.test(c.HTMLElement)||c.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(x){(c.setImmediate||c.setTimeout)(function(){throw x},0)},g=4e4,y=function(x){setTimeout(function(){typeof x=="string"?i().revokeObjectURL(x):x.remove()},g)},S=function(x){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob([String.fromCharCode(65279),x],{type:x.type}):x},E=(b=function(x,k,I){I||(x=S(x));var j,A,C=this,I=x.type==="application/octet-stream",F=function(){for(var N=C,z="writestart progress write writeend".split(" "),R=void 0,q=(z=[].concat(z)).length;q--;){var M=N["on"+z[q]];if(typeof M=="function")try{M.call(N,R||N)}catch(D){p(D)}}};C.readyState=C.INIT,m?(j=i().createObjectURL(x),setTimeout(function(){var N,z;f.href=j,f.download=k,N=f,z=new MouseEvent("click"),N.dispatchEvent(z),F(),y(j),C.readyState=C.DONE})):(u||I&&_)&&c.FileReader?((A=new FileReader).onloadend=function(){var N=u?A.result:A.result.replace(/^data:[^;]*;/,"data:attachment/file;");c.open(N,"_blank")||(c.location.href=N),N=void 0,C.readyState=C.DONE,F()},A.readAsDataURL(x),C.readyState=C.INIT):(j=j||i().createObjectURL(x),!I&&c.open(j,"_blank")||(c.location.href=j),C.readyState=C.DONE,F(),y(j))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(x,k,T){return k=k||x.name||"download",T||(x=S(x)),navigator.msSaveOrOpenBlob(x,k)}:(E.abort=function(){},E.readyState=E.INIT=0,E.WRITING=1,E.DONE=2,E.error=E.onwritestart=E.onprogress=E.onwrite=E.onabort=E.onerror=E.onwriteend=null,function(x,k,T){return new b(x,k||x.name||"download",T)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);a!==void 0&&a.exports?a.exports.saveAs=o:n!=null},{}],245:[function(t,a,l){var o,c=Object.defineProperty,i=(c(l,"__esModule",{value:!0}),l),f={GIFEncoder:()=>F,applyPalette:()=>function(D,X,O="rgb565"){if(!D||!D.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(D instanceof Uint8Array||D instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<X.length)throw new Error("applyPalette() only works with 256 colors or less");const G=new Uint32Array(D.buffer),K=G.length,Z=O==="rgb444"?4096:65536,U=new Uint8Array(K),V=new Array(Z);if(O==="rgba4444")for(let ye=0;ye<K;ye++){var ne=G[ye],L=ne>>24&255,H=ne>>16&255,J=ne>>8&255,ne=255&ne,se=y(ne,J,H,L),se=se in V?V[se]:V[se]=function(ue,pe,ke,Ie,Y){let te=0,re=1e100;for(let Re=0;Re<Y.length;Re++){var be,ve=Y[Re],je=A(ve[3]-Ie);je>re||(be=ve[0],(je+=A(be-ue))>re||(be=ve[1],(je+=A(be-pe))>re||(be=ve[2],(je+=A(be-ke))>re||(re=je,te=Re))))}return te}(ne,J,H,L,X);U[ye]=se}else{const ye=O==="rgb444"?S:g;for(let ue=0;ue<K;ue++){var he=G[ue],fe=he>>16&255,xe=he>>8&255,he=255&he,_e=ye(he,xe,fe),_e=_e in V?V[_e]:V[_e]=function(pe,ke,Ie,Y){let te=0,re=1e100;for(let Re=0;Re<Y.length;Re++){var be,ve=Y[Re],je=A(ve[0]-pe);je>re||(be=ve[1],(je+=A(be-ke))>re||(be=ve[2],(je+=A(be-Ie))>re||(re=je,te=Re)))}return te}(he,xe,fe,X);U[ue]=_e}}return U},default:()=>M,nearestColor:()=>function(D,X,O=T){return D[C(D,X,O)]},nearestColorIndex:()=>C,nearestColorIndexWithDistance:()=>I,prequantize:()=>function(D,{roundRGB:X=5,roundAlpha:O=10,oneBitAlpha:G=null}={}){const K=new Uint32Array(D.buffer);for(let H=0;H<K.length;H++){var L=K[H];let J=L>>24&255;var Z,U=L>>16&255,V=L>>8&255,L=255&L;J=j(J,O),G&&(Z=typeof G=="number"?G:127,J=J<=Z?0:255),L=j(L,X),V=j(V,X),U=j(U,X),K[H]=J<<24|U<<16|V<<8|L<<0}},quantize:()=>function(D,X,O={}){var{format:G="rgb565",clearAlpha:K=!0,clearAlphaColor:Z=0,clearAlphaThreshold:U=0,oneBitAlpha:V=!1}=O;if(!D||!D.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(D instanceof Uint8Array||D instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");D=new Uint32Array(D.buffer);let L=O.useSqrt!==!1;const H=G==="rgba4444",J=function(Ge,Xe){const Ke=Xe==="rgb444"?4096:65536,Pe=new Array(Ke),We=Ge.length;if(Xe==="rgba4444")for(let mt=0;mt<We;++mt){var ce=Ge[mt],Fe=ce>>24&255,de=ce>>16&255,ge=ce>>8&255,ce=255&ce,we=y(ce,ge,de,Fe);let lt=we in Pe?Pe[we]:Pe[we]=k();lt.rc+=ce,lt.gc+=ge,lt.bc+=de,lt.ac+=Fe,lt.cnt++}else if(Xe==="rgb444")for(let mt=0;mt<We;++mt){var qe=Ge[mt],Oe=qe>>16&255,Le=qe>>8&255,qe=255&qe,Qe=S(qe,Le,Oe);let lt=Qe in Pe?Pe[Qe]:Pe[Qe]=k();lt.rc+=qe,lt.gc+=Le,lt.bc+=Oe,lt.cnt++}else for(let mt=0;mt<We;++mt){var ot=Ge[mt],rt=ot>>16&255,tt=ot>>8&255,ot=255&ot,gt=g(ot,tt,rt);let lt=gt in Pe?Pe[gt]:Pe[gt]=k();lt.rc+=ot,lt.gc+=tt,lt.bc+=rt,lt.cnt++}return Pe}(D,G),ne=J.length,se=ne-1,fe=new Uint32Array(ne+1);for(var xe=0,he=0;he<ne;++he){const Ge=J[he];Ge!=null&&(ve=1/Ge.cnt,H&&(Ge.ac*=ve),Ge.rc*=ve,Ge.gc*=ve,Ge.bc*=ve,J[xe++]=Ge)}E(X)/xe<.022&&(L=!1);for(var _e,ye,ue,he=0;he<xe-1;++he)J[he].fw=he+1,J[he+1].bk=he,L&&(J[he].cnt=Math.sqrt(J[he].cnt));for(L&&(J[he].cnt=Math.sqrt(J[he].cnt)),he=0;he<xe;++he){x(J,he,!1);var pe=J[he].err;for(ye=++fe[0];1<ye&&(ue=ye>>1,!(J[_e=fe[ue]].err<=pe));ye=ue)fe[ye]=_e;fe[ye]=he}var ke,Ie=xe-X;for(he=0;he<Ie;){for(;;){var Y=fe[1];if((ke=J[Y]).tm>=ke.mtm&&J[ke.nn].mtm<=ke.tm)break;for(ke.mtm==se?Y=fe[1]=fe[fe[0]--]:(x(J,Y,!1),ke.tm=he),pe=J[Y].err,ye=1;(ue=ye+ye)<=fe[0]&&(ue<fe[0]&&J[fe[ue]].err>J[fe[ue+1]].err&&ue++,!(pe<=J[_e=fe[ue]].err));ye=ue)fe[ye]=_e;fe[ye]=Y}var te=J[ke.nn],re=ke.cnt,be=te.cnt,ve=1/(re+be);H&&(ke.ac=ve*(re*ke.ac+be*te.ac)),ke.rc=ve*(re*ke.rc+be*te.rc),ke.gc=ve*(re*ke.gc+be*te.gc),ke.bc=ve*(re*ke.bc+be*te.bc),ke.cnt+=te.cnt,ke.mtm=++he,J[te.bk].fw=te.fw,J[te.fw].bk=te.bk,te.mtm=se}let je=[];for(he=0;;0){let Ge=b(Math.round(J[he].rc),0,255),Xe=b(Math.round(J[he].gc),0,255),Ke=b(Math.round(J[he].bc),0,255),Pe=255;H&&(Pe=b(Math.round(J[he].ac),0,255),V&&(Re=typeof V=="number"?V:127,Pe=Pe<=Re?0:255),K&&Pe<=U&&(Ge=Xe=Ke=Z,Pe=0));var Re=H?[Ge,Xe,Ke,Pe]:[Ge,Xe,Ke];if(function(We,Fe){for(let ce=0;ce<We.length;ce++){var ge=We[ce],de=ge[0]===Fe[0]&&ge[1]===Fe[1]&&ge[2]===Fe[2],ge=!(4<=ge.length&&4<=Fe.length)||ge[3]===Fe[3];if(de&&ge)return!0}return!1}(je,Re)||je.push(Re),(he=J[he].fw)==0)break}return je},snapColorsToPalette:()=>function(D,X,O=5){if(D.length&&X.length){var G=D.map(L=>L.slice(0,3)),K=O*O,Z=D[0].length;for(let L=0;L<X.length;L++){let H=X[L];H=H.length<Z?[H[0],H[1],H[2],255]:H.length>Z?H.slice(0,3):H.slice();var V=I(G,H.slice(0,3),T),U=V[0],V=V[1];0<V&&V<=K&&(D[U]=H)}}}};for(o in f)c(i,o,{get:f[o],enumerable:!0});var m={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function _(D=256){let X=0,O=new Uint8Array(D);return{get buffer(){return O.buffer},reset(){X=0},bytesView(){return O.subarray(0,X)},bytes(){return O.slice(0,X)},writeByte(K){G(X+1),O[X]=K,X++},writeBytes(K,Z=0,U=K.length){G(X+U);for(let V=0;V<U;V++)O[X++]=K[V+Z]},writeBytesView(K,Z=0,U=K.byteLength){G(X+U),O.set(K.subarray(Z,Z+U),X),X+=U}};function G(K){var Z=O.length;if(!(K<=Z)){K=Math.max(K,Z*(Z<1048576?2:1.125)>>>0),Z!=0&&(K=Math.max(K,256));const U=O;O=new Uint8Array(K),0<X&&O.set(U.subarray(0,X),0)}}}var u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],p=function(D,X,O,H,K=_(512),Z=new Uint8Array(256),U=new Int32Array(5003),V=new Int32Array(5003)){var L=U.length,H=Math.max(2,H);Z.fill(0),V.fill(0),U.fill(-1);let J=0,ne=0;var se=H+1;const fe=se;let xe=!1,he=fe,_e=(1<<he)-1;var ye=1<<se-1;const ue=1+ye;let pe=2+ye,ke=0,Ie=O[0],Y=0;for(let Re=L;Re<65536;Re*=2)++Y;Y=8-Y,K.writeByte(H),je(ye);var te=O.length;for(let Re=1;Re<te;Re++)e:{var re=O[Re],be=(re<<12)+Ie;let Ge=re<<Y^Ie;if(U[Ge]===be)Ie=V[Ge];else{for(var ve=Ge===0?1:L-Ge;0<=U[Ge];)if((Ge-=ve)<0&&(Ge+=L),U[Ge]===be){Ie=V[Ge];break e}je(Ie),Ie=re,pe<4096?(V[Ge]=pe++,U[Ge]=be):(U.fill(-1),pe=2+ye,xe=!0,je(ye))}}return je(Ie),je(ue),K.writeByte(0),K.bytesView();function je(Re){for(J&=u[ne],0<ne?J|=Re<<ne:J=Re,ne+=he;8<=ne;)Z[ke++]=255&J,254<=ke&&(K.writeByte(ke),K.writeBytesView(Z,0,ke),ke=0),J>>=8,ne-=8;if((pe>_e||xe)&&(xe?(he=fe,_e=(1<<he)-1,xe=!1):(++he,_e=he===12?1<<he:(1<<he)-1)),Re==ue){for(;0<ne;)Z[ke++]=255&J,254<=ke&&(K.writeByte(ke),K.writeBytesView(Z,0,ke),ke=0),J>>=8,ne-=8;0<ke&&(K.writeByte(ke),K.writeBytesView(Z,0,ke),ke=0)}}};function g(D,X,O){return D<<8&63488|X<<2&992|O>>3}function y(D,X,O,G){return D>>4|240&X|(240&O)<<4|(240&G)<<8}function S(D,X,O){return D>>4<<8|240&X|O>>4}function b(D,X,O){return D<X?X:O<D?O:D}function E(D){return D*D}function x(D,X,O){var G=0,K=1e100;const Z=D[X];for(var U=Z.cnt,V=Z.ac,L=Z.rc,H=Z.gc,J=Z.bc,ne=Z.fw;ne!=0;ne=D[ne].fw){var se,fe=D[ne],xe=fe.cnt,xe=U*xe/(U+xe);K<=xe||(se=0,O&&K<=(se+=xe*E(fe.ac-V))||K<=(se+=xe*E(fe.rc-L))||K<=(se+=xe*E(fe.gc-H))||K<=(se+=xe*E(fe.bc-J))||(K=se,G=ne))}Z.err=K,Z.nn=G}function k(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function T(D,X){for(var O=0,G=0;G<D.length;G++){var K=D[G]-X[G];O+=K*K}return O}function j(D,X){return 1<X?Math.round(D/X)*X:D}function A(D){return D*D}function C(D,X,O=T){let G=1/0,K=-1;for(let U=0;U<D.length;U++){var Z=O(X,D[U]);Z<G&&(G=Z,K=U)}return K}function I(D,X,O=T){let G=1/0,K=-1;for(let U=0;U<D.length;U++){var Z=O(X,D[U]);Z<G&&(G=Z,K=U)}return[K,G]}function F(D={}){const{initialCapacity:X=4096,auto:O=!0}=D,G=_(X),K=new Uint8Array(256),Z=new Int32Array(5003),U=new Int32Array(5003);let V=!1;return{reset(){G.reset(),V=!1},finish(){G.writeByte(m.trailer)},bytes(){return G.bytes()},bytesView(){return G.bytesView()},get buffer(){return G.buffer},get stream(){return G},writeHeader:L,writeFrame(H,J,ne,Ie={}){var{transparent:fe=!1,transparentIndex:xe=0,delay:ve=0,palette:he=null,repeat:te=0,colorDepth:_e=8,dispose:ye=-1}=Ie;let ue=!1;if(O?V||(ue=!0,L(),V=!0):ue=!!Ie.first,J=Math.max(0,Math.floor(J)),ne=Math.max(0,Math.floor(ne)),ue){if(!he)throw new Error("First frame must include a { palette } option");var[Ie,re,ke,be,Y=8]=[G,J,ne,he,_e];be=q(be.length)-1,Y=128|Y-1<<4|be,z(Ie,re),z(Ie,ke),Ie.writeBytes([Y,0,0]),N(G,he),0<=te&&(be=G,re=te,be.writeByte(33),be.writeByte(255),be.writeByte(11),R(be,"NETSCAPE2.0"),be.writeByte(3),be.writeByte(1),z(be,re),be.writeByte(0))}var pe,ke=Math.round(ve/10),Ie=G,Y=ye,te=ke,re=fe,be=xe,ve=(Ie.writeByte(33),Ie.writeByte(249),Ie.writeByte(4),be<0&&(be=0,re=!1),re=re?(pe=1,2):pe=0,0<=Y&&(re=7&Y),re<<=2,Ie.writeByte(0|re|pe),z(Ie,te),Ie.writeByte(be||0),Ie.writeByte(0),!!he&&!ue);ye=G,fe=J,xe=ne,pe=ve?he:null,ye.writeByte(44),z(ye,0),z(ye,0),z(ye,fe),z(ye,xe),pe?(fe=q(pe.length)-1,ye.writeByte(128|fe)):ye.writeByte(0),ve&&N(G,he),[te,Ie,xe,fe,ye=8,ve,he,H]=[G,H,J,ne,_e,K,Z,U],p(xe,fe,Ie,ye,te,ve,he,H)}};function L(){R(G,"GIF89a")}}function N(D,X){var O=1<<q(X.length);for(let G=0;G<O;G++){let K=[0,0,0];G<X.length&&(K=X[G]),D.writeByte(K[0]),D.writeByte(K[1]),D.writeByte(K[2])}}function z(D,X){D.writeByte(255&X),D.writeByte(X>>8&255)}function R(D,X){for(var O=0;O<X.length;O++)D.writeByte(X.charCodeAt(O))}function q(D){return Math.max(Math.ceil(Math.log2(D)),1)}var M=F},{}],246:[function(t,a,l){l.read=function(o,c,i,f,x){var _,u,p=8*x-f-1,g=(1<<p)-1,y=g>>1,S=-7,b=i?x-1:0,E=i?-1:1,x=o[c+b];for(b+=E,_=x&(1<<-S)-1,x>>=-S,S+=p;0<S;_=256*_+o[c+b],b+=E,S-=8);for(u=_&(1<<-S)-1,_>>=-S,S+=f;0<S;u=256*u+o[c+b],b+=E,S-=8);if(_===0)_=1-y;else{if(_===g)return u?NaN:1/0*(x?-1:1);u+=Math.pow(2,f),_-=y}return(x?-1:1)*u*Math.pow(2,_-f)},l.write=function(o,c,i,f,m,k){var u,p,g=8*k-m-1,y=(1<<g)-1,S=y>>1,b=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=f?0:k-1,x=f?1:-1,k=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(p=isNaN(c)?1:0,u=y):(u=Math.floor(Math.log(c)/Math.LN2),c*(f=Math.pow(2,-u))<1&&(u--,f*=2),2<=(c+=1<=u+S?b/f:b*Math.pow(2,1-S))*f&&(u++,f/=2),y<=u+S?(p=0,u=y):1<=u+S?(p=(c*f-1)*Math.pow(2,m),u+=S):(p=c*Math.pow(2,S-1)*Math.pow(2,m),u=0));8<=m;o[i+E]=255&p,E+=x,p/=256,m-=8);for(u=u<<m|p,g+=m;0<g;o[i+E]=255&u,E+=x,u/=256,g-=8);o[i+E-x]|=128*k}},{}],247:[function(t,a,l){var o;function c(de,ge){return de.b===ge.b&&de.a===ge.a}function i(de,ge){return de.b<ge.b||de.b===ge.b&&de.a<=ge.a}function f(de,ge,ce){var we=ge.b-de.b,Oe=ce.b-ge.b;return 0<we+Oe?we<Oe?ge.a-de.a+we/(we+Oe)*(de.a-ce.a):ge.a-ce.a+Oe/(we+Oe)*(ce.a-de.a):0}function m(de,ge,ce){var we=ge.b-de.b,Oe=ce.b-ge.b;return 0<we+Oe?(ge.a-ce.a)*we+(ge.a-de.a)*Oe:0}function _(de,ge){return de.a<ge.a||de.a===ge.a&&de.b<=ge.b}function u(de,ge,ce){var we=ge.a-de.a,Oe=ce.a-ge.a;return 0<we+Oe?we<Oe?ge.b-de.b+we/(we+Oe)*(de.b-ce.b):ge.b-ce.b+Oe/(we+Oe)*(ce.b-de.b):0}function p(de,ge,ce){var we=ge.a-de.a,Oe=ce.a-ge.a;return 0<we+Oe?(ge.b-ce.b)*we+(ge.b-de.b)*Oe:0}function g(de,ge,ce,we){return(de=de<0?0:de)<=(ce=ce<0?0:ce)?ce===0?(ge+we)/2:ge+de/(de+ce)*(we-ge):we+ce/(de+ce)*(ge-we)}function y(de){var ge=k(de.b);return j(ge,de.c),j(ge.b,de.c),A(ge,de.a),ge}function S(de,ge){var ce=!1,we=!1;de!==ge&&(ge.a!==de.a&&(we=!0,I(ge.a,de.a)),ge.d!==de.d&&(ce=!0,F(ge.d,de.d)),T(ge,de),we||(j(ge,de.a),de.a.c=de),ce||(A(ge,de.d),de.d.a=de))}function b(de){var ge=de.b,ce=!1;de.d!==de.b.d&&(ce=!0,F(de.d,de.b.d)),de.c===de?I(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,T(de,de.b.e),ce||A(de,de.d)),ge.c===ge?(I(ge.a,null),F(ge.d,null)):(de.d.a=ge.b.e,ge.a.c=ge.c,T(ge,ge.b.e)),C(de)}function E(de){var ge=k(de),ce=ge.b;return T(ge,de.e),ge.a=de.b.a,j(ce,ge.a),ge.d=ce.d=de.d,ge=ge.b,T(de.b,de.b.b.e),T(de.b,ge),de.b.a=ge.a,ge.b.a.c=ge.b,ge.b.d=de.b.d,ge.f=de.f,ge.b.f=de.b.f,ge}function x(de,ge){var ce=!1,we=k(de),Oe=we.b;return ge.d!==de.d&&(ce=!0,F(ge.d,de.d)),T(we,de.e),T(Oe,ge),we.a=de.b.a,Oe.a=ge.a,we.d=Oe.d=de.d,de.d.a=Oe,ce||A(we,de.d),we}function k(de){var ge=new ke,ce=new ke,we=de.b.h;return(((ce.h=we).b.h=ge).h=de).b.h=ce,ge.b=ce,((ge.c=ge).e=ce).b=ge,(ce.c=ce).e=ge}function T(de,ge){var ce=de.c,we=ge.c;ce.b.e=ge,(we.b.e=de).c=we,ge.c=ce}function j(de,ge){var ce=ge.f,we=new Y(ge,ce);for(ce.e=we,ce=(ge.f=we).c=de;ce.a=we,(ce=ce.c)!==de;);}function A(de,ge){var ce=ge.d,we=new pe(ge,ce);for(ce.b=we,(ge.d=we).a=de,we.c=ge.c,ce=de;ce.d=we,(ce=ce.e)!==de;);}function C(de){var ge=de.h;de=de.b.h,(ge.b.h=de).b.h=ge}function I(de,ge){for(var ce=de.c,we=ce;we.a=ge,(we=we.c)!==ce;);ce=de.f,((we=de.e).f=ce).e=we}function F(de,ge){for(var ce=de.a,we=ce;we.d=ge,(we=we.e)!==ce;);ce=de.d,((we=de.b).d=ce).b=we}function N(de){var ge=0;return Math.abs(de[1])>Math.abs(de[0])&&(ge=1),ge=Math.abs(de[2])>Math.abs(de[ge])?2:ge}function z(de,ge){de.f+=ge.f,de.b.f+=ge.b.f}function R(de,ge,ce){return de=de.a,ge=ge.a,ce=ce.a,ge.b.a===de?ce.b.a===de?i(ge.a,ce.a)?m(ce.b.a,ge.a,ce.a)<=0:0<=m(ge.b.a,ce.a,ge.a):m(ce.b.a,de,ce.a)<=0:ce.b.a===de?0<=m(ge.b.a,de,ge.a):(ge=f(ge.b.a,de,ge.a),(de=f(ce.b.a,de,ce.a))<=ge)}function q(de){de.a.i=null;var ge=de.e;ge.a.c=ge.c,ge.c.a=ge.a,de.e=null}function M(de,ge){b(de.a),de.c=!1,(de.a=ge).i=de}function D(de){for(var ge=de.a.a;(de=Fe(de)).a.a===ge;);return de.c&&(M(de,ge=x(We(de).a.b,de.a.e)),de=Fe(de)),de}function X(de,ge,ce){var we=new Pe;return we.a=ce,we.e=xe(de.f,ge.e,we),ce.i=we}function O(de,ge){switch(de.s){case 100130:return(1&ge)!=0;case 100131:return ge!==0;case 100132:return 0<ge;case 100133:return ge<0;case 100134:return 2<=ge||ge<=-2}return!1}function G(de){var ge=de.a,ce=ge.d;ce.c=de.d,ce.a=ge,q(de)}function K(de,ge,ce){for(ge=(de=ge).a;de!==ce;){de.c=!1;var we=We(de),Oe=we.a;if(Oe.a!==ge.a){if(!we.c){G(de);break}M(we,Oe=x(ge.c.b,Oe.b))}ge.c!==Oe&&(S(Oe.b.e,Oe),S(ge,Oe)),G(de),ge=we.a,de=we}return ge}function Z(de,ge,ce,we,Oe,Le){for(var qe=!0;X(de,ge,ce.b),(ce=ce.c)!==we;);for(Oe===null&&(Oe=We(ge).a.b.c);(ce=(we=We(ge)).a.b).a===Oe.a;)ce.c!==Oe&&(S(ce.b.e,ce),S(Oe.b.e,ce)),we.f=ge.f-ce.f,we.d=O(de,we.f),ge.b=!0,!qe&&H(de,ge)&&(z(ce,Oe),q(ge),b(Oe)),qe=!1,ge=we,Oe=ce;ge.b=!0,Le&&ne(de,ge)}function U(de,ge,ce,we,Oe){var Le=[ge.g[0],ge.g[1],ge.g[2]];ge.d=null,ge.d=de.o&&de.o(Le,ce,we,de.c)||null,ge.d===null&&(Oe?de.n||(ue(de,100156),de.n=!0):ge.d=ce[0])}function V(de,ge,ce){var we=[null,null,null,null];we[0]=ge.a.d,we[1]=ce.a.d,U(de,ge.a,we,[.5,.5,0,0],!1),S(ge,ce)}function L(de,ge,ce,we,Oe){var Le=Math.abs(ge.b-de.b)+Math.abs(ge.a-de.a),qe=Math.abs(ce.b-de.b)+Math.abs(ce.a-de.a),Qe=Oe+1;we[Oe]=.5*qe/(Le+qe),we[Qe]=.5*Le/(Le+qe),de.g[0]+=we[Oe]*ge.g[0]+we[Qe]*ce.g[0],de.g[1]+=we[Oe]*ge.g[1]+we[Qe]*ce.g[1],de.g[2]+=we[Oe]*ge.g[2]+we[Qe]*ce.g[2]}function H(de,ge){var ce=We(ge),we=ge.a,Oe=ce.a;if(i(we.a,Oe.a)){if(0<m(Oe.b.a,we.a,Oe.a))return;if(c(we.a,Oe.a)){if(we.a!==Oe.a){var ce=de.e,Le=we.a.h;if(0<=Le){var qe=(ce=ce.b).d,Qe=ce.e,rt=ce.c,tt=rt[Le];qe[tt]=qe[ce.a],(rt[qe[tt]]=tt)<=--ce.a&&(tt<=1||i(Qe[qe[tt>>1]],Qe[qe[tt]])?Xe:Ke)(ce,tt),Qe[Le]=null,rt[Le]=ce.b,ce.b=Le}else for(ce.c[-(Le+1)]=null;0<ce.a&&ce.c[ce.d[ce.a-1]]===null;)--ce.a;V(de,Oe.b.e,we)}}else E(Oe.b),S(we,Oe.b.e),ge.b=ce.b=!0}else{if(m(we.b.a,Oe.a,we.a)<0)return;Fe(ge).b=ge.b=!0,E(we.b),S(Oe.b.e,we)}return 1}function J(de,ge){var ce=We(ge),we=ge.a,Oe=ce.a,Le=we.a,qe=Oe.a,Qe=we.b.a,rt=Oe.b.a,tt=new Y;if(m(Qe,de.a,Le),m(rt,de.a,qe),!(Le===qe||Math.min(Le.a,Qe.a)>Math.max(qe.a,rt.a))){if(i(Le,qe)){if(0<m(rt,Le,qe))return}else if(m(Qe,qe,Le)<0)return;var ot,gt,mt=Qe,lt=Le,vt=rt,pt=qe;if(i(mt,lt)||(ot=mt,mt=lt,lt=ot),i(vt,pt)||(ot=vt,vt=pt,pt=ot),i(mt,vt)||(ot=mt,mt=vt,vt=ot,ot=lt,lt=pt,pt=ot),i(vt,lt)?i(lt,pt)?((ot=f(mt,vt,lt))+(gt=f(vt,lt,pt))<0&&(ot=-ot,gt=-gt),tt.b=g(ot,vt.b,gt,lt.b)):((ot=m(mt,vt,lt))+(gt=-m(mt,pt,lt))<0&&(ot=-ot,gt=-gt),tt.b=g(ot,vt.b,gt,pt.b)):tt.b=(vt.b+lt.b)/2,_(mt,lt)||(ot=mt,mt=lt,lt=ot),_(vt,pt)||(ot=vt,vt=pt,pt=ot),_(mt,vt)||(ot=mt,mt=vt,vt=ot,ot=lt,lt=pt,pt=ot),_(vt,lt)?_(lt,pt)?((ot=u(mt,vt,lt))+(gt=u(vt,lt,pt))<0&&(ot=-ot,gt=-gt),tt.a=g(ot,vt.a,gt,lt.a)):((ot=p(mt,vt,lt))+(gt=-p(mt,pt,lt))<0&&(ot=-ot,gt=-gt),tt.a=g(ot,vt.a,gt,pt.a)):tt.a=(vt.a+lt.a)/2,i(tt,de.a)&&(tt.b=de.a.b,tt.a=de.a.a),mt=i(Le,qe)?Le:qe,i(mt,tt)&&(tt.b=mt.b,tt.a=mt.a),c(tt,Le)||c(tt,qe))return H(de,ge),0;if(!c(Qe,de.a)&&0<=m(Qe,de.a,tt)||!c(rt,de.a)&&m(rt,de.a,tt)<=0){if(rt===de.a)E(we.b),S(Oe.b,we),we=We(ge=D(ge)).a,K(de,We(ge),ce),Z(de,ge,we.b.e,we,we,!0);else{if(Qe!==de.a)return 0<=m(Qe,de.a,tt)&&(Fe(ge).b=ge.b=!0,E(we.b),we.a.b=de.a.b,we.a.a=de.a.a),void(m(rt,de.a,tt)<=0&&(ge.b=ce.b=!0,E(Oe.b),Oe.a.b=de.a.b,Oe.a.a=de.a.a));for(E(Oe.b),S(we.e,Oe.b.e),qe=(Le=ce=ge).a.b.a;(Le=Fe(Le)).a.b.a===qe;);Le=We(ge=Le).a.b.c,ce.a=Oe.b.e,Z(de,ge,(Oe=K(de,ce,null)).c,we.b.c,Le,!0)}return 1}E(we.b),E(Oe.b),S(Oe.b.e,we),we.a.b=tt.b,we.a.a=tt.a,we.a.h=re(de.e,we.a),we=we.a,Oe=[0,0,0,0],tt=[Le.d,Qe.d,qe.d,rt.d],we.g[0]=we.g[1]=we.g[2]=0,L(we,Le,Qe,Oe,0),L(we,qe,rt,Oe,2),U(de,we,tt,Oe,!0),Fe(ge).b=ge.b=ce.b=!0}}function ne(de,ge){for(var ce=We(ge);;){for(;ce.b;)ce=We(ge=ce);if(!ge.b&&((ge=Fe(ce=ge))===null||!ge.b))break;ge.b=!1;var we=ge.a,Oe=ce.a;if(Le=we.b.a!==Oe.b.a)e:{var Le,qe=We(Le=ge),Qe=Le.a,rt=qe.a,tt=void 0;if(i(Qe.b.a,rt.b.a)){if(m(Qe.b.a,rt.b.a,Qe.a)<0){Le=!1;break e}Fe(Le).b=Le.b=!0,tt=E(Qe),S(rt.b,tt),tt.d.c=Le.d}else{if(0<m(rt.b.a,Qe.b.a,rt.a)){Le=!1;break e}Le.b=qe.b=!0,tt=E(rt),S(Qe.e,rt.b),tt.b.d.c=Le.d}Le=!0}if(Le&&(ce.c?(q(ce),b(Oe),Oe=(ce=We(ge)).a):ge.c&&(q(ge),b(we),we=(ge=Fe(ce)).a)),we.a!==Oe.a){if(we.b.a===Oe.b.a||ge.c||ce.c||we.b.a!==de.a&&Oe.b.a!==de.a)H(de,ge);else if(J(de,ge))break}we.a===Oe.a&&we.b.a===Oe.b.a&&(z(Oe,we),q(ge),b(we),ge=Fe(ce))}}function se(de,ge){var ce=new Pe,we=y(de.b);we.a.b=4e150,we.a.a=ge,we.b.a.b=-4e150,we.b.a.a=ge,de.a=we.b.a,ce.a=we,ce.f=0,ce.d=!1,ce.c=!1,ce.h=!0,ce.b=!1,we=xe(we=de.f,we.a,ce),ce.e=we}function fe(de){this.a=new he,this.b=de,this.c=R}function xe(de,ge,ce){for(;(ge=ge.c).b!==null&&!de.c(de.b,ge.b,ce););return de=new he(ce,ge.a,ge),ge.a.c=de,ge.a=de}function he(de,ge,ce){this.b=de||null,this.a=ge||this,this.c=ce||this}function _e(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ye(de,ge){if(de.d!==ge)for(;de.d!==ge;)if(de.d<ge)switch(de.d){case 0:ue(de,100151),de.u(null);break;case 1:ue(de,100152),de.t()}else switch(de.d){case 2:ue(de,100154),de.v();break;case 1:ue(de,100153),de.w()}}function ue(de,ge){de.p&&de.p(ge,de.c)}function pe(de,ge){this.b=de||this,this.d=ge||this,this.a=null,this.c=!1}function ke(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ie(){this.c=new Y,this.a=new pe,this.b=new ke,this.d=new ke,this.b.b=this.d,this.d.b=this.b}function Y(de,ge){this.e=de||this,this.f=ge||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ve}function re(de,ge){var ce,we,Oe;return de.e?(2*(we=++(ce=de.b).a)>ce.f&&(ce.f*=2,ce.c=je(ce.c,ce.f+1)),ce.b===0?Oe=we:(Oe=ce.b,ce.b=ce.c[ce.b]),ce.e[Oe]=ge,ce.c[Oe]=we,ce.d[we]=Oe,ce.h&&Ke(ce,we),Oe):(ce=de.a++,de.c[ce]=ge,-(ce+1))}function be(de){if(de.a===0)return Ge(de.b);var ge=de.c[de.d[de.a-1]];if(de.b.a!==0&&i(Re(de.b),ge))return Ge(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return ge}function ve(){this.d=je([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function je(de,ge){for(var ce=Array(ge),we=0;we<de.length;we++)ce[we]=de[we];for(;we<ge;we++)ce[we]=0;return ce}function Re(de){return de.e[de.d[1]]}function Ge(de){var ge=de.d,ce=de.e,we=de.c,Oe=ge[1],Le=ce[Oe];return 0<de.a&&(ge[1]=ge[de.a],we[ge[1]]=1,ce[Oe]=null,we[Oe]=de.b,de.b=Oe,0<--de.a&&Xe(de,1)),Le}function Xe(de,ge){for(var ce=de.d,we=de.e,Oe=de.c,Le=ge,qe=ce[Le];;){var Qe=Le<<1,rt=(Qe<de.a&&i(we[ce[Qe+1]],we[ce[Qe]])&&(Qe+=1),ce[Qe]);if(Qe>de.a||i(we[qe],we[rt])){Oe[ce[Le]=qe]=Le;break}Oe[ce[Le]=rt]=Le,Le=Qe}}function Ke(de,ge){for(var ce=de.d,we=de.e,Oe=de.c,Le=ge,qe=ce[Le];;){var Qe=Le>>1,rt=ce[Qe];if(Qe==0||i(we[rt],we[qe])){Oe[ce[Le]=qe]=Le;break}Oe[ce[Le]=rt]=Le,Le=Qe}}function Pe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function We(de){return de.e.c.b}function Fe(de){return de.e.a.b}(o=_e.prototype).x=function(){ye(this,0)},o.B=function(de,ge){switch(de){case 100142:return;case 100140:switch(ge){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ge)}break;case 100141:return void(this.m=!!ge);default:return void ue(this,100900)}ue(this,100901)},o.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ue(this,100900)}return!1},o.A=function(de,ge,ce){this.j[0]=de,this.j[1]=ge,this.j[2]=ce},o.z=function(de,ge){var ce=ge||null;switch(de){case 100100:case 100106:this.h=ce;break;case 100104:case 100110:this.l=ce;break;case 100101:case 100107:this.k=ce;break;case 100102:case 100108:this.i=ce;break;case 100103:case 100109:this.p=ce;break;case 100105:case 100111:this.o=ce;break;case 100112:this.r=ce;break;default:ue(this,100900)}},o.C=function(de,ge){var ce=!1,we=[0,0,0];ye(this,2);for(var Oe=0;Oe<3;++Oe){var Le=de[Oe];Le<-1e150&&(Le=-1e150,ce=!0),1e150<Le&&(Le=1e150,ce=!0),we[Oe]=Le}ce&&ue(this,100155),(ce=this.q)===null?S(ce=y(this.b),ce.b):(E(ce),ce=ce.e),ce.a.d=ge,ce.a.g[0]=we[0],ce.a.g[1]=we[1],ce.a.g[2]=we[2],ce.f=1,ce.b.f=-1,this.q=ce},o.u=function(de){ye(this,0),this.d=1,this.b=new Ie,this.c=de},o.t=function(){ye(this,1),this.d=2,this.q=null},o.v=function(){ye(this,2),this.d=1},o.w=function(){ye(this,1),this.d=0;var de,ge,ce=this.j[0],we=this.j[1],Oe=this.j[2],Le=!1,qe=[ce,we,Oe];if(ce===0&&we===0&&Oe===0){for(var we=[-2e150,-2e150,-2e150],Qe=[2e150,2e150,2e150],Oe=[],rt=[],ce=(Le=this.b.c).e;ce!==Le;ce=ce.e)for(var tt=0;tt<3;++tt){var ot=ce.g[tt];ot<Qe[tt]&&(Qe[tt]=ot,rt[tt]=ce),ot>we[tt]&&(we[tt]=ot,Oe[tt]=ce)}if(we[1]-Qe[1]>we[ce=0]-Qe[0]&&(ce=1),Qe[ce=we[2]-Qe[2]>we[ce]-Qe[ce]?2:ce]>=we[ce])qe[0]=0,qe[1]=0,qe[2]=1;else{for(Qe=rt[ce],Oe=Oe[ce],rt=[we=0,0,0],Qe=[Qe.g[0]-Oe.g[0],Qe.g[1]-Oe.g[1],Qe.g[2]-Oe.g[2]],tt=[0,0,0],ce=Le.e;ce!==Le;ce=ce.e)tt[0]=ce.g[0]-Oe.g[0],tt[1]=ce.g[1]-Oe.g[1],tt[2]=ce.g[2]-Oe.g[2],rt[0]=Qe[1]*tt[2]-Qe[2]*tt[1],rt[1]=Qe[2]*tt[0]-Qe[0]*tt[2],rt[2]=Qe[0]*tt[1]-Qe[1]*tt[0],we<(ot=rt[0]*rt[0]+rt[1]*rt[1]+rt[2]*rt[2])&&(we=ot,qe[0]=rt[0],qe[1]=rt[1],qe[2]=rt[2]);we<=0&&(qe[0]=qe[1]=qe[2]=0,qe[N(Qe)]=1)}Le=!0}for(rt=N(qe),ce=this.b.c,we=(rt+1)%3,Oe=(rt+2)%3,rt=0<qe[rt]?1:-1,qe=ce.e;qe!==ce;qe=qe.e)qe.b=qe.g[we],qe.a=rt*qe.g[Oe];if(Le){for(qe=0,ce=(Le=this.b.a).b;ce!==Le;ce=ce.b)if(!((we=ce.a).f<=0))for(;qe+=(we.a.b-we.b.a.b)*(we.a.a+we.b.a.a),(we=we.e)!==ce.a;);if(qe<0)for(Le=(qe=this.b.c).e;Le!==qe;Le=Le.e)Le.a=-Le.a}for(this.n=!1,qe=this.b.b,ce=qe.h;ce!==qe;ce=Le)Le=ce.h,we=ce.e,c(ce.a,ce.b.a)&&ce.e.e!==ce&&(V(this,we,ce),b(ce),we=(ce=we).e),we.e===ce&&(we!==ce&&(we!==Le&&we!==Le.b||(Le=Le.h),b(we)),ce!==Le&&ce!==Le.b||(Le=Le.h),b(ce));for(this.e=qe=new te,Le=this.b.c,ce=Le.e;ce!==Le;ce=ce.e)ce.h=re(qe,ce);var gt=qe;gt.d=[];for(var mt=0;mt<gt.a;mt++)gt.d[mt]=mt;gt.d.sort(function(pt){return function(It,Jt){return i(pt[It],pt[Jt])?1:-1}}(gt.c)),gt.e=!0;for(var lt=gt.b,vt=lt.a;1<=vt;--vt)Xe(lt,vt);for(lt.h=!0,this.f=new fe(this),se(this,-4e150),se(this,4e150);(qe=be(this.e))!==null;){for(;;){e:if((ce=this.e).a===0)Le=Re(ce.b);else if(Le=ce.c[ce.d[ce.a-1]],ce.b.a!==0&&i(ce=Re(ce.b),Le)){Le=ce;break e}if(Le===null||!c(Le,qe))break;Le=be(this.e),V(this,qe.c,Le.c)}(function pt(It,Jt){for(var Ut,At=(It.a=Jt).c;At.i===null;)if((At=At.c)===Jt.c){var At=It,Pt=Jt;(Mt=new Pe).a=Pt.c.b;for(var Zt=(kt=At.f).a;(Zt=Zt.a).b!==null&&!kt.c(kt.b,Mt,Zt.b););var kt,qt,Ht=We(kt=Zt.b),Mt=kt.a,Zt=Ht.a;return void(m(Mt.b.a,Pt,Mt.a)===0?c((Mt=kt.a).a,Pt)||c(Mt.b.a,Pt)||(E(Mt.b),kt.c&&(b(Mt.c),kt.c=!1),S(Pt.c,Mt),pt(At,Pt)):(qt=i(Zt.b.a,Mt.b.a)?kt:Ht,Ht=void 0,kt.d||qt.c?(Ht=qt===kt?x(Pt.c.b,Mt.e):x(Zt.b.c.b,Pt.c).b,qt.c?M(qt,Ht):((kt=X(Mt=At,kt,Ht)).f=Fe(kt).f+kt.a.f,kt.d=O(Mt,kt.f)),pt(At,Pt)):Z(At,kt,Pt.c,Pt.c,null,!0)))}kt=(Mt=We(At=D(At.i))).a,(Mt=K(It,Mt,null)).c===kt?(Mt=(kt=Mt).c,Zt=We(At),Ht=At.a,qt=Zt.a,Ut=!1,Ht.b.a!==qt.b.a&&J(It,At),c(Ht.a,It.a)&&(S(Mt.b.e,Ht),Mt=We(At=D(At)).a,K(It,We(At),Zt),Ut=!0),c(qt.a,It.a)&&(S(kt,qt.b.e),kt=K(It,Zt,null),Ut=!0),Ut?Z(It,At,kt.c,Mt,Mt,!0):(Pt=i(qt.a,Ht.a)?qt.b.e:Ht,Z(It,At,Pt=x(kt.c.b,Pt),Pt.c,Pt.c,!1),Pt.b.i.c=!0,ne(It,At))):Z(It,At,Mt.c,kt,kt,!0)})(this,qe)}for(this.a=this.f.a.a.b.a.a,qe=0;(Le=this.f.a.a.b)!==null;)Le.h||++qe,q(Le);for(this.f=null,(qe=this.e).b=null,qe.d=null,this.e=qe.c=null,qe=this.b,ce=qe.a.b;ce!==qe.a;ce=Le)Le=ce.b,(ce=ce.a).e.e===ce&&(z(ce.c,ce),b(ce));if(!this.n){if(qe=this.b,this.m)for(ce=qe.b.h;ce!==qe.b;ce=Le)Le=ce.h,ce.b.d.c!==ce.d.c?ce.f=ce.d.c?1:-1:b(ce);else for(ce=qe.a.b;ce!==qe.a;ce=Le)if(Le=ce.b,ce.c){for(ce=ce.a;i(ce.b.a,ce.a);ce=ce.c.b);for(;i(ce.a,ce.b.a);ce=ce.e);for(we=ce.c.b,Oe=void 0;ce.e!==we;)if(i(ce.b.a,we.a)){for(;we.e!==ce&&(i((ge=we.e).b.a,ge.a)||m(we.a,we.b.a,we.e.b.a)<=0);)we=(Oe=x(we.e,we)).b;we=we.c.b}else{for(;we.e!==ce&&(i((de=ce.c.b).a,de.b.a)||0<=m(ce.b.a,ce.a,ce.c.b.a));)ce=(Oe=x(ce,ce.c.b)).b;ce=ce.e}for(;we.e.e!==ce;)Oe=x(we.e,we),we=Oe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Le=(qe=this.b).a.b;Le!==qe.a;Le=Le.b)if(Le.c){for(this.h&&this.h(2,this.c),ce=Le.a;this.k&&this.k(ce.a.d,this.c),(ce=ce.e)!==Le.a;);this.i&&this.i(this.c)}}else{for(qe=this.b,Le=!!this.l,ce=!1,we=-1,Oe=qe.a.d;Oe!==qe.a;Oe=Oe.d)if(Oe.c)for(ce||(this.h&&this.h(4,this.c),ce=!0),rt=Oe.a;Le&&(Qe=rt.b.d.c?0:1,we!==Qe&&(we=Qe,this.l&&this.l(!!we,this.c))),this.k&&this.k(rt.a.d,this.c),(rt=rt.e)!==Oe.a;);ce&&this.i&&this.i(this.c)}if(this.r){for(qe=this.b,ce=qe.a.b;ce!==qe.a;ce=Le)if(Le=ce.b,!ce.c){for(Oe=(we=ce.a).e,rt=void 0;Oe=(rt=Oe).e,(rt.d=null)===rt.b.d&&(rt.c===rt?I(rt.a,null):(rt.a.c=rt.c,T(rt,rt.b.e)),(Qe=rt.b).c===Qe?I(Qe.a,null):(Qe.a.c=Qe.c,T(Qe,Qe.b.e)),C(rt)),rt!==we;);we=ce.d,((ce=ce.b).d=we).b=ce}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:_e,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},_e.prototype.gluDeleteTess=_e.prototype.x,_e.prototype.gluTessProperty=_e.prototype.B,_e.prototype.gluGetTessProperty=_e.prototype.y,_e.prototype.gluTessNormal=_e.prototype.A,_e.prototype.gluTessCallback=_e.prototype.z,_e.prototype.gluTessVertex=_e.prototype.C,_e.prototype.gluTessBeginPolygon=_e.prototype.u,_e.prototype.gluTessBeginContour=_e.prototype.t,_e.prototype.gluTessEndContour=_e.prototype.v,_e.prototype.gluTessEndPolygon=_e.prototype.w,a!==void 0&&(a.exports=this.libtess)},{}],248:[function(t,a,l){function o(i,f,m,_){var u=0,p=(_=_===void 0?{}:_).loop===void 0?null:_.loop,g=_.palette===void 0?null:_.palette;if(f<=0||m<=0||65535<f||65535<m)throw new Error("Width/Height invalid.");function y(A){if(A=A.length,A<2||256<A||A&A-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return A}i[u++]=71,i[u++]=73,i[u++]=70,i[u++]=56,i[u++]=57,i[u++]=97;var S=0,b=0;if(g!==null){for(var E=y(g);E>>=1;)++S;if(E=1<<S,--S,_.background!==void 0){if(E<=(b=_.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(i[u++]=255&f,i[u++]=f>>8&255,i[u++]=255&m,i[u++]=m>>8&255,i[u++]=(g!==null?128:0)|S,i[u++]=b,i[u++]=0,g!==null)for(var x=0,k=g.length;x<k;++x){var T=g[x];i[u++]=T>>16&255,i[u++]=T>>8&255,i[u++]=255&T}if(p!==null){if(p<0||65535<p)throw new Error("Loop count invalid.");i[u++]=33,i[u++]=255,i[u++]=11,i[u++]=78,i[u++]=69,i[u++]=84,i[u++]=83,i[u++]=67,i[u++]=65,i[u++]=80,i[u++]=69,i[u++]=50,i[u++]=46,i[u++]=48,i[u++]=3,i[u++]=1,i[u++]=255&p,i[u++]=p>>8&255,i[u++]=0}var j=!1;this.addFrame=function(A,C,I,F,N,z){if(j===!0&&(--u,j=!1),z=z===void 0?{}:z,A<0||C<0||65535<A||65535<C)throw new Error("x/y invalid.");if(I<=0||F<=0||65535<I||65535<F)throw new Error("Width/Height invalid.");if(N.length<I*F)throw new Error("Not enough pixels for the frame size.");var R=!0,q=z.palette;if(q==null&&(R=!1,q=g),q==null)throw new Error("Must supply either a local or global palette.");for(var D=y(q),M=0;D>>=1;)++M;var D=1<<M,X=z.delay===void 0?0:z.delay,O=z.disposal===void 0?0:z.disposal;if(O<0||3<O)throw new Error("Disposal out of range.");var G=!1,K=0;if(z.transparent!==void 0&&z.transparent!==null&&(G=!0,(K=z.transparent)<0||D<=K))throw new Error("Transparent color index.");if(O===0&&!G&&X===0||(i[u++]=33,i[u++]=249,i[u++]=4,i[u++]=O<<2|(G===!0?1:0),i[u++]=255&X,i[u++]=X>>8&255,i[u++]=K,i[u++]=0),i[u++]=44,i[u++]=255&A,i[u++]=A>>8&255,i[u++]=255&C,i[u++]=C>>8&255,i[u++]=255&I,i[u++]=I>>8&255,i[u++]=255&F,i[u++]=F>>8&255,i[u++]=R===!0?128|M-1:0,R===!0)for(var Z=0,U=q.length;Z<U;++Z){var V=q[Z];i[u++]=V>>16&255,i[u++]=V>>8&255,i[u++]=255&V}return u=function(L,H,J,ne){L[H++]=J;var se=H++,fe=1<<J,xe=fe-1,he=1+fe,_e=1+he,ye=J+1,ue=0,pe=0;function ke(Ge){for(;Ge<=ue;)L[H++]=255&pe,pe>>=8,ue-=8,H===se+256&&(L[se]=255,se=H++)}function Ie(Ge){pe|=Ge<<ue,ue+=ye,ke(8)}var Y=ne[0]&xe,te={};Ie(fe);for(var re=1,be=ne.length;re<be;++re){var ve=ne[re]&xe,je=Y<<8|ve,Re=te[je];if(Re===void 0){for(pe|=Y<<ue,ue+=ye;8<=ue;)L[H++]=255&pe,pe>>=8,ue-=8,H===se+256&&(L[se]=255,se=H++);_e===4096?(Ie(fe),_e=1+he,ye=J+1,te={}):(1<<ye<=_e&&++ye,te[je]=_e++),Y=ve}else Y=Re}return Ie(Y),Ie(he),ke(1),se+1===H?L[se]=0:(L[se]=H-se-1,L[H++]=0),H}(i,u,M<2?2:M,N)},this.end=function(){return j===!1&&(i[u++]=59,j=!0),u},this.getOutputBuffer=function(){return i},this.setOutputBuffer=function(A){i=A},this.getOutputBufferPosition=function(){return u},this.setOutputBufferPosition=function(A){u=A}}function c(i,f,m,_){for(var u=i[f++],p=1<<u,g=1+p,y=1+g,S=u+1,b=(1<<S)-1,E=0,x=0,k=0,T=i[f++],j=new Int32Array(4096),A=null;;){for(;E<16&&T!==0;)x|=i[f++]<<E,E+=8,T===1?T=i[f++]:--T;if(E<S)break;var C=x&b;if(x>>=S,E-=S,C==p)y=1+g,b=(1<<(S=u+1))-1,A=null;else{if(C==g)break;for(var I=C<y?C:A,F=0,N=I;p<N;)N=j[N]>>8,++F;var z=N;if(_<k+F+(I!==C?1:0))return void console.log("Warning, gif stream longer than expected.");m[k++]=z;var R=k+=F;for(I!==C&&(m[k++]=z),N=I;F--;)N=j[N],m[--R]=255&N,N>>=8;A!==null&&y<4096&&(j[y++]=A<<8|z,b+1<=y&&S<12&&(++S,b=b<<1|1)),A=C}}k!==_&&console.log("Warning, gif stream shorter than expected.")}try{l.GifWriter=o,l.GifReader=function(i){var f=0;if(i[f++]!==71||i[f++]!==73||i[f++]!==70||i[f++]!==56||(i[f++]+1&253)!=56||i[f++]!==97)throw new Error("Invalid GIF 87a/89a header.");var m=i[f++]|i[f++]<<8,_=i[f++]|i[f++]<<8,u=i[f++],p=1<<1+(7&u),g=(i[f++],i[f++],null),y=null,S=(u>>7&&(g=f,f+=3*(y=p)),!0),b=[],E=0,x=null,k=0,T=null;for(this.width=m,this.height=_;S&&f<i.length;)switch(i[f++]){case 33:switch(i[f++]){case 255:if(i[f]!==11||i[f+1]==78&&i[f+2]==69&&i[f+3]==84&&i[f+4]==83&&i[f+5]==67&&i[f+6]==65&&i[f+7]==80&&i[f+8]==69&&i[f+9]==50&&i[f+10]==46&&i[f+11]==48&&i[f+12]==3&&i[f+13]==1&&i[f+16]==0)f+=14,T=i[f++]|i[f++]<<8,f++;else for(f+=12;;){if(!(0<=(A=i[f++])))throw Error("Invalid block size");if(A===0)break;f+=A}break;case 249:if(i[f++]!==4||i[f+4]!==0)throw new Error("Invalid graphics extension block.");var j=i[f++],E=i[f++]|i[f++]<<8,x=i[f++];!(1&j)&&(x=null),k=j>>2&7,f++;break;case 254:for(;;){if(!(0<=(A=i[f++])))throw Error("Invalid block size");if(A===0)break;f+=A}break;default:throw new Error("Unknown graphic control label: 0x"+i[f-1].toString(16))}break;case 44:var A,C=i[f++]|i[f++]<<8,I=i[f++]|i[f++]<<8,F=i[f++]|i[f++]<<8,N=i[f++]|i[f++]<<8,X=i[f++],z=X>>6&1,R=1<<1+(7&X),q=g,M=y,D=!1,X=(X>>7&&(D=!0,q=f,f+=3*(M=R)),f);for(f++;;){if(!(0<=(A=i[f++])))throw Error("Invalid block size");if(A===0)break;f+=A}b.push({x:C,y:I,width:F,height:N,has_local_palette:D,palette_offset:q,palette_size:M,data_offset:X,data_length:f-X,transparent_index:x,interlaced:!!z,delay:E,disposal:k});break;case 59:S=!1;break;default:throw new Error("Unknown gif block: 0x"+i[f-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return T},this.frameInfo=function(O){if(O<0||O>=b.length)throw new Error("Frame index out of range.");return b[O]},this.decodeAndBlitFrameBGRA=function(O,G){for(var O=this.frameInfo(O),K=O.width*O.height,Z=new Uint8Array(K),U=(c(i,O.data_offset,Z,K),O.palette_offset),V=O.transparent_index,L=(V===null&&(V=256),O.width),H=m-L,J=L,ne=4*(O.y*m+O.x),se=4*((O.y+O.height)*m+O.x),fe=ne,xe=4*H,he=(O.interlaced===!0&&(xe+=4*m*7),8),_e=0,ye=Z.length;_e<ye;++_e){var ue,pe,ke=Z[_e];J===0&&(J=L,se<=(fe+=xe)&&(xe=4*H+4*m*(he-1),fe=ne+(L+H)*(he<<1),he>>=1)),ke===V?fe+=4:(ue=i[U+3*ke],pe=i[U+3*ke+1],ke=i[U+3*ke+2],G[fe++]=ke,G[fe++]=pe,G[fe++]=ue,G[fe++]=255),--J}},this.decodeAndBlitFrameRGBA=function(O,G){for(var O=this.frameInfo(O),K=O.width*O.height,Z=new Uint8Array(K),U=(c(i,O.data_offset,Z,K),O.palette_offset),V=O.transparent_index,L=(V===null&&(V=256),O.width),H=m-L,J=L,ne=4*(O.y*m+O.x),se=4*((O.y+O.height)*m+O.x),fe=ne,xe=4*H,he=(O.interlaced===!0&&(xe+=4*m*7),8),_e=0,ye=Z.length;_e<ye;++_e){var ue,pe,ke=Z[_e];J===0&&(J=L,se<=(fe+=xe)&&(xe=4*H+4*m*(he-1),fe=ne+(L+H)*(he<<1),he>>=1)),ke===V?fe+=4:(ue=i[U+3*ke],pe=i[U+3*ke+1],ke=i[U+3*ke+2],G[fe++]=ue,G[fe++]=pe,G[fe++]=ke,G[fe++]=255),--J}}}}catch{}},{}],249:[function(t,a,l){(function(o){var c,i;c=this,i=function(f){function m(Q){if(this==null)throw TypeError();var B,W=String(this),$=W.length,Q=Q?Number(Q):0;if(!((Q=Q!=Q?0:Q)<0||$<=Q))return 55296<=(B=W.charCodeAt(Q))&&B<=56319&&Q+1<$&&56320<=($=W.charCodeAt(Q+1))&&$<=57343?1024*(B-55296)+$-56320+65536:B}String.prototype.codePointAt||((_=function(){try{var P={},B=Object.defineProperty,W=B(P,P,P)&&B}catch{}return W}())?_(String.prototype,"codePointAt",{value:m,configurable:!0,writable:!0}):String.prototype.codePointAt=m);var _,u=0,p=-3;function g(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(P,B){this.source=P,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=B,this.destLen=0,this.ltree=new g,this.dtree=new g}var S=new g,b=new g,E=new Uint8Array(30),x=new Uint16Array(30),k=new Uint8Array(30),T=new Uint16Array(30),j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A=new g,C=new Uint8Array(320);function I(P,B,W,$){for(var Q,ie=0;ie<W;++ie)P[ie]=0;for(ie=0;ie<30-W;++ie)P[ie+W]=ie/W|0;for(Q=$,ie=0;ie<30;++ie)B[ie]=Q,Q+=1<<P[ie]}var F=new Uint16Array(16);function N(P,B,W,$){for(var Q,ie=0;ie<16;++ie)P.table[ie]=0;for(ie=0;ie<$;++ie)P.table[B[W+ie]]++;for(ie=Q=P.table[0]=0;ie<16;++ie)F[ie]=Q,Q+=P.table[ie];for(ie=0;ie<$;++ie)B[W+ie]&&(P.trans[F[B[W+ie]]++]=ie)}function z(P,B,W){if(!B)return W;for(;P.bitcount<24;)P.tag|=P.source[P.sourceIndex++]<<P.bitcount,P.bitcount+=8;var $=P.tag&65535>>>16-B;return P.tag>>>=B,P.bitcount-=B,$+W}function R(P,B){for(;P.bitcount<24;)P.tag|=P.source[P.sourceIndex++]<<P.bitcount,P.bitcount+=8;for(var W=0,$=0,Q=0,ie=P.tag;$=2*$+(1&ie),ie>>>=1,W+=B.table[++Q],0<=($-=B.table[Q]););return P.tag=ie,P.bitcount-=Q,B.trans[W+$]}function q(P,B,W){for(;;){var $=R(P,B);if($===256)return u;if($<256)P.dest[P.destLen++]=$;else for(var Q,ie=z(P,E[$-=257],x[$]),$=R(P,W),oe=Q=P.destLen-z(P,k[$],T[$]);oe<Q+ie;++oe)P.dest[P.destLen++]=P.dest[oe]}}for(var M=S,D=b,X=0;X<7;++X)M.table[X]=0;for(M.table[7]=24,M.table[8]=152,M.table[9]=112,X=0;X<24;++X)M.trans[X]=256+X;for(X=0;X<144;++X)M.trans[24+X]=X;for(X=0;X<8;++X)M.trans[168+X]=280+X;for(X=0;X<112;++X)M.trans[176+X]=144+X;for(X=0;X<5;++X)D.table[X]=0;for(D.table[5]=32,X=0;X<32;++X)D.trans[X]=X;I(E,x,4,3),I(k,T,2,1),E[28]=0,x[28]=258;var O=function(P,B){var W,$,Q,ie=new y(P,B);do{switch(Q=void 0,($=ie).bitcount--||($.tag=$.source[$.sourceIndex++],$.bitcount=7),Q=1&$.tag,$.tag>>>=1,$=Q,z(ie,2,0)){case 0:W=function(Ue){for(var ut,_t;8<Ue.bitcount;)Ue.sourceIndex--,Ue.bitcount-=8;if((ut=256*Ue.source[Ue.sourceIndex+1]+Ue.source[Ue.sourceIndex])!==(65535&~(256*Ue.source[Ue.sourceIndex+3]+Ue.source[Ue.sourceIndex+2])))return p;for(Ue.sourceIndex+=4,_t=ut;_t;--_t)Ue.dest[Ue.destLen++]=Ue.source[Ue.sourceIndex++];return Ue.bitcount=0,u}(ie);break;case 1:W=q(ie,S,b);break;case 2:He=ze=$e=Ve=oe=Ce=De=Be=Ne=Se=Ee=me=void 0;for(var oe,me=ie,Ee=ie.ltree,Se=ie.dtree,Ne=z(me,5,257),Be=z(me,5,1),De=z(me,4,4),Ce=0;Ce<19;++Ce)C[Ce]=0;for(Ce=0;Ce<De;++Ce){var $e=z(me,3,0);C[j[Ce]]=$e}for(N(A,C,0,19),oe=0;oe<Ne+Be;){var ze=R(me,A);switch(ze){case 16:for(var He=C[oe-1],Ve=z(me,2,3);Ve;--Ve)C[oe++]=He;break;case 17:for(Ve=z(me,3,3);Ve;--Ve)C[oe++]=0;break;case 18:for(Ve=z(me,7,11);Ve;--Ve)C[oe++]=0;break;default:C[oe++]=ze}}N(Ee,C,0,Ne),N(Se,C,Ne,Be),W=q(ie,ie.ltree,ie.dtree);break;default:W=p}if(W!==u)throw new Error("Data error")}while(!$);return ie.destLen<ie.dest.length?typeof ie.dest.slice=="function"?ie.dest.slice(0,ie.destLen):ie.dest.subarray(0,ie.destLen):ie.dest};function G(P,B,W,$,Q){return Math.pow(1-Q,3)*P+3*Math.pow(1-Q,2)*Q*B+3*(1-Q)*Math.pow(Q,2)*W+Math.pow(Q,3)*$}function K(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Z(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function U(P){throw new Error(P)}function V(P,B){P||U(B)}K.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},K.prototype.addPoint=function(P,B){typeof P=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=P,this.x2=P),P<this.x1&&(this.x1=P),P>this.x2&&(this.x2=P)),typeof B=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=B,this.y2=B),B<this.y1&&(this.y1=B),B>this.y2&&(this.y2=B))},K.prototype.addX=function(P){this.addPoint(P,null)},K.prototype.addY=function(P){this.addPoint(null,P)},K.prototype.addBezier=function(P,B,W,$,Q,ie,oe,me){var Ee=[P,B],Se=[W,$],Ne=[Q,ie],Be=[oe,me];this.addPoint(P,B),this.addPoint(oe,me);for(var De=0;De<=1;De++){var Ce,$e=6*Ee[De]-12*Se[De]+6*Ne[De],ze=-3*Ee[De]+9*Se[De]-9*Ne[De]+3*Be[De],He=3*Se[De]-3*Ee[De];ze==0?$e==0||0<(Ce=-He/$e)&&Ce<1&&(De===0&&this.addX(G(Ee[De],Se[De],Ne[De],Be[De],Ce)),De===1&&this.addY(G(Ee[De],Se[De],Ne[De],Be[De],Ce))):(Ce=Math.pow($e,2)-4*He*ze)<0||(0<(He=(-$e+Math.sqrt(Ce))/(2*ze))&&He<1&&(De===0&&this.addX(G(Ee[De],Se[De],Ne[De],Be[De],He)),De===1&&this.addY(G(Ee[De],Se[De],Ne[De],Be[De],He))),0<(He=(-$e-Math.sqrt(Ce))/(2*ze))&&He<1&&(De===0&&this.addX(G(Ee[De],Se[De],Ne[De],Be[De],He)),De===1&&this.addY(G(Ee[De],Se[De],Ne[De],Be[De],He))))}},K.prototype.addQuad=function(P,B,W,$,Q,ie){W=P+2/3*(W-P),$=B+2/3*($-B),this.addBezier(P,B,W,$,W+1/3*(Q-P),$+1/3*(ie-B),Q,ie)},Z.prototype.moveTo=function(P,B){this.commands.push({type:"M",x:P,y:B})},Z.prototype.lineTo=function(P,B){this.commands.push({type:"L",x:P,y:B})},Z.prototype.curveTo=Z.prototype.bezierCurveTo=function(P,B,W,$,Q,ie){this.commands.push({type:"C",x1:P,y1:B,x2:W,y2:$,x:Q,y:ie})},Z.prototype.quadTo=Z.prototype.quadraticCurveTo=function(P,B,W,$){this.commands.push({type:"Q",x1:P,y1:B,x:W,y:$})},Z.prototype.close=Z.prototype.closePath=function(){this.commands.push({type:"Z"})},Z.prototype.extend=function(P){var B;if(P.commands)P=P.commands;else if(P instanceof K)return B=P,this.moveTo(B.x1,B.y1),this.lineTo(B.x2,B.y1),this.lineTo(B.x2,B.y2),this.lineTo(B.x1,B.y2),void this.close();Array.prototype.push.apply(this.commands,P)},Z.prototype.getBoundingBox=function(){for(var P=new K,B=0,W=0,$=0,Q=0,ie=0;ie<this.commands.length;ie++){var oe=this.commands[ie];switch(oe.type){case"M":P.addPoint(oe.x,oe.y),B=$=oe.x,W=Q=oe.y;break;case"L":P.addPoint(oe.x,oe.y),$=oe.x,Q=oe.y;break;case"Q":P.addQuad($,Q,oe.x1,oe.y1,oe.x,oe.y),$=oe.x,Q=oe.y;break;case"C":P.addBezier($,Q,oe.x1,oe.y1,oe.x2,oe.y2,oe.x,oe.y),$=oe.x,Q=oe.y;break;case"Z":$=B,Q=W;break;default:throw new Error("Unexpected path command "+oe.type)}}return P.isEmpty()&&P.addPoint(0,0),P},Z.prototype.draw=function(P){P.beginPath();for(var B=0;B<this.commands.length;B+=1){var W=this.commands[B];W.type==="M"?P.moveTo(W.x,W.y):W.type==="L"?P.lineTo(W.x,W.y):W.type==="C"?P.bezierCurveTo(W.x1,W.y1,W.x2,W.y2,W.x,W.y):W.type==="Q"?P.quadraticCurveTo(W.x1,W.y1,W.x,W.y):W.type==="Z"&&P.closePath()}this.fill&&(P.fillStyle=this.fill,P.fill()),this.stroke&&(P.strokeStyle=this.stroke,P.lineWidth=this.strokeWidth,P.stroke())},Z.prototype.toPathData=function(P){function B(){for(var ie=arguments,oe="",me=0;me<arguments.length;me+=1){var Ee=ie[me];0<=Ee&&0<me&&(oe+=" "),oe+=(Ee=Ee,Math.round(Ee)===Ee?""+Math.round(Ee):Ee.toFixed(P))}return oe}P=P!==void 0?P:2;for(var W="",$=0;$<this.commands.length;$+=1){var Q=this.commands[$];Q.type==="M"?W+="M"+B(Q.x,Q.y):Q.type==="L"?W+="L"+B(Q.x,Q.y):Q.type==="C"?W+="C"+B(Q.x1,Q.y1,Q.x2,Q.y2,Q.x,Q.y):Q.type==="Q"?W+="Q"+B(Q.x1,Q.y1,Q.x,Q.y):Q.type==="Z"&&(W+="Z")}return W},Z.prototype.toSVG=function(P){var B=(B='<path d="')+this.toPathData(P)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?B+=' fill="none"':B+=' fill="'+this.fill+'"'),this.stroke&&(B+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),B+="/>"},Z.prototype.toDOMElement=function(B){var B=this.toPathData(B),W=document.createElementNS("http://www.w3.org/2000/svg","path");return W.setAttribute("d",B),W};var L={fail:U,argument:V,assert:V},H={},J={},ne={};function se(P){return function(){return P}}J.BYTE=function(P){return L.argument(0<=P&&P<=255,"Byte value should be between 0 and 255."),[P]},ne.BYTE=se(1),J.CHAR=function(P){return[P.charCodeAt(0)]},ne.CHAR=se(1),J.CHARARRAY=function(P){for(var B=[],W=0;W<P.length;W+=1)B[W]=P.charCodeAt(W);return B},ne.CHARARRAY=function(P){return P.length},J.USHORT=function(P){return[P>>8&255,255&P]},ne.USHORT=se(2),J.SHORT=function(P){return[(P=32768<=P?-(65536-P):P)>>8&255,255&P]},ne.SHORT=se(2),J.UINT24=function(P){return[P>>16&255,P>>8&255,255&P]},ne.UINT24=se(3),J.ULONG=function(P){return[P>>24&255,P>>16&255,P>>8&255,255&P]},ne.ULONG=se(4),J.LONG=function(P){return[(P=2147483648<=P?-(4294967296-P):P)>>24&255,P>>16&255,P>>8&255,255&P]},ne.LONG=se(4),J.FIXED=J.ULONG,ne.FIXED=ne.ULONG,J.FWORD=J.SHORT,ne.FWORD=ne.SHORT,J.UFWORD=J.USHORT,ne.UFWORD=ne.USHORT,J.LONGDATETIME=function(P){return[0,0,0,0,P>>24&255,P>>16&255,P>>8&255,255&P]},ne.LONGDATETIME=se(8),J.TAG=function(P){return L.argument(P.length===4,"Tag should be exactly 4 ASCII characters."),[P.charCodeAt(0),P.charCodeAt(1),P.charCodeAt(2),P.charCodeAt(3)]},ne.TAG=se(4),J.Card8=J.BYTE,ne.Card8=ne.BYTE,J.Card16=J.USHORT,ne.Card16=ne.USHORT,J.OffSize=J.BYTE,ne.OffSize=ne.BYTE,J.SID=J.USHORT,ne.SID=ne.USHORT,J.NUMBER=function(P){return-107<=P&&P<=107?[P+139]:108<=P&&P<=1131?[247+((P-=108)>>8),255&P]:-1131<=P&&P<=-108?[251+((P=-P-108)>>8),255&P]:-32768<=P&&P<=32767?J.NUMBER16(P):J.NUMBER32(P)},ne.NUMBER=function(P){return J.NUMBER(P).length},J.NUMBER16=function(P){return[28,P>>8&255,255&P]},ne.NUMBER16=se(3),J.NUMBER32=function(P){return[29,P>>24&255,P>>16&255,P>>8&255,255&P]},ne.NUMBER32=se(5),J.REAL=function(P){for(var B=P.toString(),W=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(B),$=(W&&(W=parseFloat("1e"+((W[2]?+W[2]:0)+W[1].length)),B=(Math.round(P*W)/W).toString()),""),Q=0,ie=B.length;Q<ie;Q+=1){var oe=B[Q];$+=oe==="e"?B[++Q]==="-"?"c":"b":oe==="."?"a":oe==="-"?"e":oe}for(var me=[30],Ee=0,Se=($+=1&$.length?"f":"ff").length;Ee<Se;Ee+=2)me.push(parseInt($.substr(Ee,2),16));return me},ne.REAL=function(P){return J.REAL(P).length},J.NAME=J.CHARARRAY,ne.NAME=ne.CHARARRAY,J.STRING=J.CHARARRAY,ne.STRING=ne.CHARARRAY,H.UTF8=function(P,B,W){for(var $=[],Q=W,ie=0;ie<Q;ie++,B+=1)$[ie]=P.getUint8(B);return String.fromCharCode.apply(null,$)},H.UTF16=function(P,B,W){for(var $=[],Q=W/2,ie=0;ie<Q;ie++,B+=2)$[ie]=P.getUint16(B);return String.fromCharCode.apply(null,$)},J.UTF16=function(P){for(var B=[],W=0;W<P.length;W+=1){var $=P.charCodeAt(W);B[B.length]=$>>8&255,B[B.length]=255&$}return B},ne.UTF16=function(P){return 2*P.length};var fe,xe={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},he=(H.MACSTRING=function(P,B,W,$){var Q=xe[$];if(Q!==void 0){for(var ie="",oe=0;oe<W;oe++){var me=P.getUint8(B+oe);ie+=me<=127?String.fromCharCode(me):Q[127&me]}return ie}},typeof WeakMap=="function"&&new WeakMap);function _e(P){return-128<=P&&P<=127}J.MACSTRING=function(P,B){var W=function(oe){if(!fe)for(var me in fe={},xe)fe[me]=new String(me);var Ee=fe[oe];if(Ee!==void 0){if(he){var Se=he.get(Ee);if(Se!==void 0)return Se}var Ne=xe[oe];if(Ne!==void 0){for(var Be={},De=0;De<Ne.length;De++)Be[Ne.charCodeAt(De)]=De+128;return he&&he.set(Ee,Be),Be}}}(B);if(W!==void 0){for(var $=[],Q=0;Q<P.length;Q++){var ie=P.charCodeAt(Q);if(128<=ie&&(ie=W[ie])===void 0)return;$[Q]=ie}return $}},ne.MACSTRING=function(P,B){return P=J.MACSTRING(P,B),P!==void 0?P.length:0},J.VARDELTAS=function(P){for(var $=0,B=[];$<P.length;)var W=P[$],$=(W===0?function(Q,ie,oe){for(var me=0,Ee=Q.length;ie<Ee&&me<64&&Q[ie]===0;)++ie,++me;return oe.push(128|me-1),ie}:-128<=W&&W<=127?function(Q,ie,oe){for(var me=0,Ee=Q.length,Se=ie;Se<Ee&&me<64;){var Ne=Q[Se];if(!_e(Ne)||Ne===0&&Se+1<Ee&&Q[Se+1]===0)break;++Se,++me}oe.push(me-1);for(var Be=ie;Be<Se;++Be)oe.push(Q[Be]+256&255);return Se}:function(Q,ie,oe){for(var me=0,Ee=Q.length,Se=ie;Se<Ee&&me<64;){var Ne=Q[Se];if(Ne===0||_e(Ne)&&Se+1<Ee&&_e(Q[Se+1]))break;++Se,++me}oe.push(64|me-1);for(var Be=ie;Be<Se;++Be){var De=Q[Be];oe.push(De+65536>>8&255,De+256&255)}return Se})(P,$,B);return B},J.INDEX=function(P){for(var B=1,W=[B],$=[],Q=0;Q<P.length;Q+=1){var ie=J.OBJECT(P[Q]);Array.prototype.push.apply($,ie),B+=ie.length,W.push(B)}if($.length===0)return[0,0];for(var oe=[],me=1+Math.floor(Math.log(B)/Math.log(2))/8|0,Ee=[void 0,J.BYTE,J.USHORT,J.UINT24,J.ULONG][me],Se=0;Se<W.length;Se+=1){var Ne=Ee(W[Se]);Array.prototype.push.apply(oe,Ne)}return Array.prototype.concat(J.Card16(P.length),J.OffSize(me),oe,$)},ne.INDEX=function(P){return J.INDEX(P).length},J.DICT=function(P){for(var B=[],W=Object.keys(P),$=W.length,Q=0;Q<$;Q+=1){var ie=parseInt(W[Q],0),oe=P[ie];B=(B=B.concat(J.OPERAND(oe.value,oe.type))).concat(J.OPERATOR(ie))}return B},ne.DICT=function(P){return J.DICT(P).length},J.OPERATOR=function(P){return P<1200?[P]:[12,P-1200]},J.OPERAND=function(P,B){var W=[];if(Array.isArray(B))for(var $=0;$<B.length;$+=1)L.argument(P.length===B.length,"Not enough arguments given for type"+B),W=W.concat(J.OPERAND(P[$],B[$]));else if(B==="SID")W=W.concat(J.NUMBER(P));else if(B==="offset")W=W.concat(J.NUMBER32(P));else if(B==="number")W=W.concat(J.NUMBER(P));else{if(B!=="real")throw new Error("Unknown operand type "+B);W=W.concat(J.REAL(P))}return W},J.OP=J.BYTE,ne.OP=ne.BYTE;var ye=typeof WeakMap=="function"&&new WeakMap;function ue(P,B,W){for(var $=0;$<B.length;$+=1){var Q=B[$];this[Q.name]=Q.value}if(this.tableName=P,this.fields=B,W)for(var ie=Object.keys(W),oe=0;oe<ie.length;oe+=1){var me=ie[oe],Ee=W[me];this[me]!==void 0&&(this[me]=Ee)}}function pe(P,B,W){W===void 0&&(W=B.length);var $=new Array(B.length+1);$[0]={name:P+"Count",type:"USHORT",value:W};for(var Q=0;Q<B.length;Q++)$[Q+1]={name:P+Q,type:"USHORT",value:B[Q]};return $}function ke(P,B,W){var $=B.length,Q=new Array($+1);Q[0]={name:P+"Count",type:"USHORT",value:$};for(var ie=0;ie<$;ie++)Q[ie+1]={name:P+ie,type:"TABLE",value:W(B[ie],ie)};return Q}function Ie(P,B,W){var $=B.length,Q=[];Q[0]={name:P+"Count",type:"USHORT",value:$};for(var ie=0;ie<$;ie++)Q=Q.concat(W(B[ie],ie));return Q}function Y(P){P.format===1?ue.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(pe("glyph",P.glyphs))):L.assert(!1,"Can't create coverage table format 2 yet.")}function te(P){ue.call(this,"scriptListTable",Ie("scriptRecord",P,function(B,W){var $=B.script,Q=$.defaultLangSys;return L.assert(!!Q,"Unable to write GSUB: script "+B.tag+" has no default language system."),[{name:"scriptTag"+W,type:"TAG",value:B.tag},{name:"script"+W,type:"TABLE",value:new ue("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ue("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Q.reqFeatureIndex}].concat(pe("featureIndex",Q.featureIndexes)))}].concat(Ie("langSys",$.langSysRecords,function(ie,oe){var me=ie.langSys;return[{name:"langSysTag"+oe,type:"TAG",value:ie.tag},{name:"langSys"+oe,type:"TABLE",value:new ue("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:me.reqFeatureIndex}].concat(pe("featureIndex",me.featureIndexes)))}]})))}]}))}function re(P){ue.call(this,"featureListTable",Ie("featureRecord",P,function(B,W){var $=B.feature;return[{name:"featureTag"+W,type:"TAG",value:B.tag},{name:"feature"+W,type:"TABLE",value:new ue("featureTable",[{name:"featureParams",type:"USHORT",value:$.featureParams}].concat(pe("lookupListIndex",$.lookupListIndexes)))}]}))}function be(P,B){ue.call(this,"lookupListTable",ke("lookup",P,function(W){var $=B[W.lookupType];return L.assert(!!$,"Unable to write GSUB lookup type "+W.lookupType+" tables."),new ue("lookupTable",[{name:"lookupType",type:"USHORT",value:W.lookupType},{name:"lookupFlag",type:"USHORT",value:W.lookupFlag}].concat(ke("subtable",W.subtables,$)))}))}J.CHARSTRING=function(P){if(ye){var B=ye.get(P);if(B!==void 0)return B}for(var ie=[],W=P.length,$=0;$<W;$+=1)var Q=P[$],ie=ie.concat(J[Q.type](Q.value));return ye&&ye.set(P,ie),ie},ne.CHARSTRING=function(P){return J.CHARSTRING(P).length},J.OBJECT=function(P){var B=J[P.type];return L.argument(B!==void 0,"No encoding function for type "+P.type),B(P.value)},ne.OBJECT=function(P){var B=ne[P.type];return L.argument(B!==void 0,"No sizeOf function for type "+P.type),B(P.value)},J.TABLE=function(P){for(var B=[],W=P.fields.length,$=[],Q=[],ie=0;ie<W;ie+=1){var oe=P.fields[ie],Ee=J[oe.type],me=(L.argument(Ee!==void 0,"No encoding function for field type "+oe.type+" ("+oe.name+")"),P[oe.name]),Ee=Ee(me=me===void 0?oe.value:me);oe.type==="TABLE"?(Q.push(B.length),B=B.concat([0,0]),$.push(Ee)):B=B.concat(Ee)}for(var Se=0;Se<$.length;Se+=1){var Ne=Q[Se],Be=B.length;L.argument(Be<65536,"Table "+P.tableName+" too big."),B[Ne]=Be>>8,B[Ne+1]=255&Be,B=B.concat($[Se])}return B},ne.TABLE=function(P){for(var B=0,W=P.fields.length,$=0;$<W;$+=1){var Q=P.fields[$],ie=ne[Q.type],oe=(L.argument(ie!==void 0,"No sizeOf function for field type "+Q.type+" ("+Q.name+")"),P[Q.name]);B+=ie(oe=oe===void 0?Q.value:oe),Q.type==="TABLE"&&(B+=2)}return B},J.RECORD=J.TABLE,ne.RECORD=ne.TABLE,J.LITERAL=function(P){return P},ne.LITERAL=function(P){return P.length},ue.prototype.encode=function(){return J.TABLE(this)},ue.prototype.sizeOf=function(){return ne.TABLE(this)};var ve={Table:ue,Record:ue,Coverage:(Y.prototype=Object.create(ue.prototype)).constructor=Y,ScriptList:(te.prototype=Object.create(ue.prototype)).constructor=te,FeatureList:(re.prototype=Object.create(ue.prototype)).constructor=re,LookupList:(be.prototype=Object.create(ue.prototype)).constructor=be,ushortList:pe,tableList:ke,recordList:Ie};function je(P,B){return P.getUint8(B)}function Re(P,B){return P.getUint16(B,!1)}function Ge(P,B){return P.getUint32(B,!1)}function Xe(P,B){return P.getInt16(B,!1)+P.getUint16(B+2,!1)/65535}var Ke={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Pe(P,B){this.data=P,this.offset=B,this.relativeOffset=0}Pe.prototype.parseByte=function(){var P=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},Pe.prototype.parseChar=function(){var P=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},Pe.prototype.parseCard8=Pe.prototype.parseByte,Pe.prototype.parseCard16=Pe.prototype.parseUShort=function(){var P=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},Pe.prototype.parseSID=Pe.prototype.parseUShort,Pe.prototype.parseOffset16=Pe.prototype.parseUShort,Pe.prototype.parseShort=function(){var P=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},Pe.prototype.parseF2Dot14=function(){var P=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,P},Pe.prototype.parseOffset32=Pe.prototype.parseULong=function(){var P=Ge(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},Pe.prototype.parseFixed=function(){var P=Xe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},Pe.prototype.parseString=function(P){var B=this.data,W=this.offset+this.relativeOffset,$="";this.relativeOffset+=P;for(var Q=0;Q<P;Q++)$+=String.fromCharCode(B.getUint8(W+Q));return $},Pe.prototype.parseTag=function(){return this.parseString(4)},Pe.prototype.parseLongDateTime=function(){var P=Ge(this.data,this.offset+this.relativeOffset+4);return P-=2082844800,this.relativeOffset+=8,P},Pe.prototype.parseVersion=function(P){var B=Re(this.data,this.offset+this.relativeOffset),W=Re(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,B+W/(P=P===void 0?4096:P)/10},Pe.prototype.skip=function(P,B){this.relativeOffset+=Ke[P]*(B=B===void 0?1:B)},Pe.prototype.parseULongList=function(P){P===void 0&&(P=this.parseULong());for(var B=new Array(P),W=this.data,$=this.offset+this.relativeOffset,Q=0;Q<P;Q++)B[Q]=W.getUint32($),$+=4;return this.relativeOffset+=4*P,B},Pe.prototype.parseOffset16List=Pe.prototype.parseUShortList=function(P){P===void 0&&(P=this.parseUShort());for(var B=new Array(P),W=this.data,$=this.offset+this.relativeOffset,Q=0;Q<P;Q++)B[Q]=W.getUint16($),$+=2;return this.relativeOffset+=2*P,B},Pe.prototype.parseShortList=function(P){for(var B=new Array(P),W=this.data,$=this.offset+this.relativeOffset,Q=0;Q<P;Q++)B[Q]=W.getInt16($),$+=2;return this.relativeOffset+=2*P,B},Pe.prototype.parseByteList=function(P){for(var B=new Array(P),W=this.data,$=this.offset+this.relativeOffset,Q=0;Q<P;Q++)B[Q]=W.getUint8($++);return this.relativeOffset+=P,B},Pe.prototype.parseList=function(P,B){B||(B=P,P=this.parseUShort());for(var W=new Array(P),$=0;$<P;$++)W[$]=B.call(this);return W},Pe.prototype.parseList32=function(P,B){B||(B=P,P=this.parseULong());for(var W=new Array(P),$=0;$<P;$++)W[$]=B.call(this);return W},Pe.prototype.parseRecordList=function(P,B){B||(B=P,P=this.parseUShort());for(var W=new Array(P),$=Object.keys(B),Q=0;Q<P;Q++){for(var ie={},oe=0;oe<$.length;oe++){var me=$[oe],Ee=B[me];ie[me]=Ee.call(this)}W[Q]=ie}return W},Pe.prototype.parseRecordList32=function(P,B){B||(B=P,P=this.parseULong());for(var W=new Array(P),$=Object.keys(B),Q=0;Q<P;Q++){for(var ie={},oe=0;oe<$.length;oe++){var me=$[oe],Ee=B[me];ie[me]=Ee.call(this)}W[Q]=ie}return W},Pe.prototype.parseStruct=function(P){if(typeof P=="function")return P.call(this);for(var B=Object.keys(P),W={},$=0;$<B.length;$++){var Q=B[$],ie=P[Q];W[Q]=ie.call(this)}return W},Pe.prototype.parseValueRecord=function(P){var B;if((P=P===void 0?this.parseUShort():P)!==0)return B={},1&P&&(B.xPlacement=this.parseShort()),2&P&&(B.yPlacement=this.parseShort()),4&P&&(B.xAdvance=this.parseShort()),8&P&&(B.yAdvance=this.parseShort()),16&P&&(B.xPlaDevice=void 0,this.parseShort()),32&P&&(B.yPlaDevice=void 0,this.parseShort()),64&P&&(B.xAdvDevice=void 0,this.parseShort()),128&P&&(B.yAdvDevice=void 0,this.parseShort()),B},Pe.prototype.parseValueRecordList=function(){for(var P=this.parseUShort(),B=this.parseUShort(),W=new Array(B),$=0;$<B;$++)W[$]=this.parseValueRecord(P);return W},Pe.prototype.parsePointer=function(P){var B=this.parseOffset16();if(0<B)return new Pe(this.data,this.offset+B).parseStruct(P)},Pe.prototype.parsePointer32=function(P){var B=this.parseOffset32();if(0<B)return new Pe(this.data,this.offset+B).parseStruct(P)},Pe.prototype.parseListOfLists=function(P){for(var B=this.parseOffset16List(),W=B.length,$=this.relativeOffset,Q=new Array(W),ie=0;ie<W;ie++){var oe=B[ie];if(oe===0)Q[ie]=void 0;else if(this.relativeOffset=oe,P){for(var me=this.parseOffset16List(),Ee=new Array(me.length),Se=0;Se<me.length;Se++)this.relativeOffset=oe+me[Se],Ee[Se]=P.call(this);Q[ie]=Ee}else Q[ie]=this.parseUShortList()}return this.relativeOffset=$,Q},Pe.prototype.parseCoverage=function(){var P=this.offset+this.relativeOffset,B=this.parseUShort(),W=this.parseUShort();if(B===1)return{format:1,glyphs:this.parseUShortList(W)};if(B!==2)throw new Error("0x"+P.toString(16)+": Coverage format must be 1 or 2.");for(var $=new Array(W),Q=0;Q<W;Q++)$[Q]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:$}},Pe.prototype.parseClassDef=function(){var P=this.offset+this.relativeOffset,B=this.parseUShort();if(B===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(B===2)return{format:2,ranges:this.parseRecordList({start:Pe.uShort,end:Pe.uShort,classId:Pe.uShort})};throw new Error("0x"+P.toString(16)+": ClassDef format must be 1 or 2.")},Pe.list=function(P,B){return function(){return this.parseList(P,B)}},Pe.list32=function(P,B){return function(){return this.parseList32(P,B)}},Pe.recordList=function(P,B){return function(){return this.parseRecordList(P,B)}},Pe.recordList32=function(P,B){return function(){return this.parseRecordList32(P,B)}},Pe.pointer=function(P){return function(){return this.parsePointer(P)}},Pe.pointer32=function(P){return function(){return this.parsePointer32(P)}},Pe.tag=Pe.prototype.parseTag,Pe.byte=Pe.prototype.parseByte,Pe.uShort=Pe.offset16=Pe.prototype.parseUShort,Pe.uShortList=Pe.prototype.parseUShortList,Pe.uLong=Pe.offset32=Pe.prototype.parseULong,Pe.uLongList=Pe.prototype.parseULongList,Pe.struct=Pe.prototype.parseStruct,Pe.coverage=Pe.prototype.parseCoverage,Pe.classDef=Pe.prototype.parseClassDef;var We={reserved:Pe.uShort,reqFeatureIndex:Pe.uShort,featureIndexes:Pe.uShortList},Fe=(Pe.prototype.parseScriptList=function(){return this.parsePointer(Pe.recordList({tag:Pe.tag,script:Pe.pointer({defaultLangSys:Pe.pointer(We),langSysRecords:Pe.recordList({tag:Pe.tag,langSys:Pe.pointer(We)})})}))||[]},Pe.prototype.parseFeatureList=function(){return this.parsePointer(Pe.recordList({tag:Pe.tag,feature:Pe.pointer({featureParams:Pe.offset16,lookupListIndexes:Pe.uShortList})}))||[]},Pe.prototype.parseLookupList=function(P){return this.parsePointer(Pe.list(Pe.pointer(function(){var B=this.parseUShort(),W=(L.argument(1<=B&&B<=9,"GPOS/GSUB lookup type "+B+" unknown."),this.parseUShort()),$=16&W;return{lookupType:B,lookupFlag:W,subtables:this.parseList(Pe.pointer(P[B])),markFilteringSet:$?this.parseUShort():void 0}})))||[]},Pe.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var P=this.parseUShort(),B=this.parseUShort();return L.argument(P===1&&B<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Pe.offset32,featureTableSubstitutionOffset:Pe.offset32})})||[]},{getByte:je,getCard8:je,getUShort:Re,getCard16:Re,getShort:function(P,B){return P.getInt16(B,!1)},getULong:Ge,getFixed:Xe,getTag:function(P,B){for(var W="",$=B;$<B+4;$+=1)W+=String.fromCharCode(P.getInt8($));return W},getOffset:function(P,B,W){for(var $=0,Q=0;Q<W;Q+=1)$=($<<=8)+P.getUint8(B+Q);return $},getBytes:function(P,B,W){for(var $=[],Q=B;Q<W;Q+=1)$.push(P.getUint8(Q));return $},bytesToString:function(P){for(var B="",W=0;W<P.length;W+=1)B+=String.fromCharCode(P[W]);return B},Parser:Pe}),de={parse:function(P,B){for(var W={},$=(W.version=Fe.getUShort(P,B),L.argument(W.version===0,"cmap table version should be 0."),W.numTables=Fe.getUShort(P,B+2),-1),Q=W.numTables-1;0<=Q;--Q){var ie=Fe.getUShort(P,B+4+8*Q),oe=Fe.getUShort(P,B+4+8*Q+2);if(ie===3&&(oe===0||oe===1||oe===10)||ie===0&&(oe===0||oe===1||oe===2||oe===3||oe===4)){$=Fe.getULong(P,B+4+8*Q+4);break}}if($===-1)throw new Error("No valid cmap sub-tables found.");var me=new Fe.Parser(P,B+$);if(W.format=me.parseUShort(),W.format===12){var Ee,Se=W,Ne=me;Ne.parseUShort(),Se.length=Ne.parseULong(),Se.language=Ne.parseULong(),Se.groupCount=Ee=Ne.parseULong(),Se.glyphIndexMap={};for(var Be=0;Be<Ee;Be+=1)for(var De=Ne.parseULong(),Ce=Ne.parseULong(),$e=Ne.parseULong(),ze=De;ze<=Ce;ze+=1)Se.glyphIndexMap[ze]=$e,$e++}else{if(W.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+W.format+").");var He=W,Ve=P,Ue=B,ut=$;He.length=me.parseUShort(),He.language=me.parseUShort(),He.segCount=_t=me.parseUShort()>>1,me.skip("uShort",3),He.glyphIndexMap={};for(var _t,dt=new Fe.Parser(Ve,Ue+ut+14),ft=new Fe.Parser(Ve,Ue+ut+16+2*_t),xt=new Fe.Parser(Ve,Ue+ut+16+4*_t),Rt=new Fe.Parser(Ve,Ue+ut+16+6*_t),zt=Ue+ut+16+8*_t,Yt=0;Yt<_t-1;Yt+=1)for(var nr=void 0,sr=dt.parseUShort(),gr=ft.parseUShort(),Nt=xt.parseShort(),Dt=Rt.parseUShort(),Ot=gr;Ot<=sr;Ot+=1)Dt!==0?(zt=(zt=Rt.offset+Rt.relativeOffset-2)+Dt+2*(Ot-gr),(nr=Fe.getUShort(Ve,zt))!==0&&(nr=nr+Nt&65535)):nr=Ot+Nt&65535,He.glyphIndexMap[Ot]=nr}return W},make:function(P){for(var B=!0,W=P.length-1;0<W;--W)if(65535<P.get(W).unicode){console.log("Adding CMAP format 12 (needed!)"),B=!1;break}var $,Q,ie=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:B?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:B?12:20}],oe=(ie=(ie=B?ie:ie.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new ve.Table("cmap",ie));for(oe.segments=[],W=0;W<P.length;W+=1){for(var me=P.get(W),Ee=0;Ee<me.unicodes.length;Ee+=1)$=me.unicodes[Ee],Q=W,oe.segments.push({end:$,start:$,delta:-($-Q),offset:0,glyphIndex:Q});oe.segments=oe.segments.sort(function(Ue,ut){return Ue.start-ut.start})}oe.segments.push({end:65535,start:65535,delta:1,offset:0});var Se=oe.segments.length,Ne=0,Be=[],De=[],Ce=[],$e=[],ze=[],He=[];for(W=0;W<Se;W+=1){var Ve=oe.segments[W];Ve.end<=65535&&Ve.start<=65535?(Be=Be.concat({name:"end_"+W,type:"USHORT",value:Ve.end}),De=De.concat({name:"start_"+W,type:"USHORT",value:Ve.start}),Ce=Ce.concat({name:"idDelta_"+W,type:"SHORT",value:Ve.delta}),$e=$e.concat({name:"idRangeOffset_"+W,type:"USHORT",value:Ve.offset}),Ve.glyphId!==void 0&&(ze=ze.concat({name:"glyph_"+W,type:"USHORT",value:Ve.glyphId}))):Ne+=1,B||Ve.glyphIndex===void 0||(He=(He=(He=He.concat({name:"cmap12Start_"+W,type:"ULONG",value:Ve.start})).concat({name:"cmap12End_"+W,type:"ULONG",value:Ve.end})).concat({name:"cmap12Glyph_"+W,type:"ULONG",value:Ve.glyphIndex}))}return oe.segCountX2=2*(Se-Ne),oe.searchRange=2*Math.pow(2,Math.floor(Math.log(Se-Ne)/Math.log(2))),oe.entrySelector=Math.log(oe.searchRange/2)/Math.log(2),oe.rangeShift=oe.segCountX2-oe.searchRange,oe.fields=oe.fields.concat(Be),oe.fields.push({name:"reservedPad",type:"USHORT",value:0}),oe.fields=oe.fields.concat(De),oe.fields=oe.fields.concat(Ce),oe.fields=oe.fields.concat($e),oe.fields=oe.fields.concat(ze),oe.cmap4Length=14+2*Be.length+2+2*De.length+2*Ce.length+2*$e.length+2*ze.length,B||(ie=16+4*He.length,oe.cmap12Offset=20+oe.cmap4Length,oe.fields=oe.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ie},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:He.length/3}]),oe.fields=oe.fields.concat(He)),oe}},ge=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],we=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Oe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Le(P){this.font=P}function qe(P){this.cmap=P}function Qe(P,B){this.encoding=P,this.charset=B}function rt(P){switch(P.version){case 1:this.names=Oe.slice();break;case 2:this.names=new Array(P.numberOfGlyphs);for(var B=0;B<P.numberOfGlyphs;B++)P.glyphNameIndex[B]<Oe.length?this.names[B]=Oe[P.glyphNameIndex[B]]:this.names[B]=P.names[P.glyphNameIndex[B]-Oe.length];break;case 2.5:this.names=new Array(P.numberOfGlyphs);for(var W=0;W<P.numberOfGlyphs;W++)this.names[W]=Oe[W+P.glyphNameIndex[W]];break;default:this.names=[]}}Le.prototype.charToGlyphIndex=function(P){var B=P.codePointAt(0),W=this.font.glyphs;if(W){for(var $=0;$<W.length;$+=1)for(var Q=W.get($),ie=0;ie<Q.unicodes.length;ie+=1)if(Q.unicodes[ie]===B)return $}return null},qe.prototype.charToGlyphIndex=function(P){return this.cmap.glyphIndexMap[P.codePointAt(0)]||0},Qe.prototype.charToGlyphIndex=function(P){return P=P.codePointAt(0),P=this.encoding[P],this.charset.indexOf(P)},rt.prototype.nameToGlyphIndex=function(P){return this.names.indexOf(P)},rt.prototype.glyphIndexToName=function(P){return this.names[P]};var tt={line:function(P,B,W,$,Q){P.beginPath(),P.moveTo(B,W),P.lineTo($,Q),P.stroke()}};function ot(P){this.bindConstructorValues(P)}function gt(P,B,W){Object.defineProperty(P,B,{get:function(){return P.path,P[W]},set:function($){P[W]=$},enumerable:!0,configurable:!0})}function mt(P,B){if(this.font=P,this.glyphs={},Array.isArray(B))for(var W=0;W<B.length;W++)this.glyphs[W]=B[W];this.length=B&&B.length||0}ot.prototype.bindConstructorValues=function(P){var B;this.index=P.index||0,this.name=P.name||null,this.unicode=P.unicode||void 0,this.unicodes=P.unicodes||P.unicode!==void 0?[P.unicode]:[],P.xMin&&(this.xMin=P.xMin),P.yMin&&(this.yMin=P.yMin),P.xMax&&(this.xMax=P.xMax),P.yMax&&(this.yMax=P.yMax),P.advanceWidth&&(this.advanceWidth=P.advanceWidth),Object.defineProperty(this,"path",(P=P.path,B=P||new Z,{configurable:!0,get:function(){return B=typeof B=="function"?B():B},set:function(W){B=W}}))},ot.prototype.addUnicode=function(P){this.unicodes.length===0&&(this.unicode=P),this.unicodes.push(P)},ot.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ot.prototype.getPath=function(P,B,W,$,Q){P=P!==void 0?P:0,B=B!==void 0?B:0,W=W!==void 0?W:72;for(var ie,oe,me=($=$||{}).xScale,Ee=$.yScale,Se=((ie=$.hinting&&Q&&Q.hinting?this.path&&Q.hinting.exec(this,W):ie)?(oe=Q.hinting.getCommands(ie),P=Math.round(P),B=Math.round(B),me=Ee=1):(oe=this.path.commands,$=1/this.path.unitsPerEm*W,me===void 0&&(me=$),Ee===void 0&&(Ee=$)),new Z),Ne=0;Ne<oe.length;Ne+=1){var Be=oe[Ne];Be.type==="M"?Se.moveTo(P+Be.x*me,B+-Be.y*Ee):Be.type==="L"?Se.lineTo(P+Be.x*me,B+-Be.y*Ee):Be.type==="Q"?Se.quadraticCurveTo(P+Be.x1*me,B+-Be.y1*Ee,P+Be.x*me,B+-Be.y*Ee):Be.type==="C"?Se.curveTo(P+Be.x1*me,B+-Be.y1*Ee,P+Be.x2*me,B+-Be.y2*Ee,P+Be.x*me,B+-Be.y*Ee):Be.type==="Z"&&Se.closePath()}return Se},ot.prototype.getContours=function(){if(this.points===void 0)return[];for(var P=[],B=[],W=0;W<this.points.length;W+=1){var $=this.points[W];B.push($),$.lastPointOfContour&&(P.push(B),B=[])}return L.argument(B.length===0,"There are still points left in the current contour."),P},ot.prototype.getMetrics=function(){for(var P=this.path.commands,B=[],W=[],$=0;$<P.length;$+=1){var Q=P[$];Q.type!=="Z"&&(B.push(Q.x),W.push(Q.y)),Q.type!=="Q"&&Q.type!=="C"||(B.push(Q.x1),W.push(Q.y1)),Q.type==="C"&&(B.push(Q.x2),W.push(Q.y2))}var ie={xMin:Math.min.apply(null,B),yMin:Math.min.apply(null,W),xMax:Math.max.apply(null,B),yMax:Math.max.apply(null,W),leftSideBearing:this.leftSideBearing};return isFinite(ie.xMin)||(ie.xMin=0),isFinite(ie.xMax)||(ie.xMax=this.advanceWidth),isFinite(ie.yMin)||(ie.yMin=0),isFinite(ie.yMax)||(ie.yMax=0),ie.rightSideBearing=this.advanceWidth-ie.leftSideBearing-(ie.xMax-ie.xMin),ie},ot.prototype.draw=function(P,B,W,$,Q){this.getPath(B,W,$,Q).draw(P)},ot.prototype.drawPoints=function(P,B,W,$){function Q(Ne,Be,De,Ce){var $e=2*Math.PI;P.beginPath();for(var ze=0;ze<Ne.length;ze+=1)P.moveTo(Be+Ne[ze].x*Ce,De+Ne[ze].y*Ce),P.arc(Be+Ne[ze].x*Ce,De+Ne[ze].y*Ce,2,0,$e,!1);P.closePath(),P.fill()}B=B!==void 0?B:0,W=W!==void 0?W:0;for(var $=1/this.path.unitsPerEm*($=$!==void 0?$:24),ie=[],oe=[],me=this.path,Ee=0;Ee<me.commands.length;Ee+=1){var Se=me.commands[Ee];Se.x!==void 0&&ie.push({x:Se.x,y:-Se.y}),Se.x1!==void 0&&oe.push({x:Se.x1,y:-Se.y1}),Se.x2!==void 0&&oe.push({x:Se.x2,y:-Se.y2})}P.fillStyle="blue",Q(ie,B,W,$),P.fillStyle="red",Q(oe,B,W,$)},ot.prototype.drawMetrics=function(P,B,W,$){B=B!==void 0?B:0,W=W!==void 0?W:0,$=1/this.path.unitsPerEm*($=$!==void 0?$:24),P.lineWidth=1,P.strokeStyle="black",tt.line(P,B,-1e4,B,1e4),tt.line(P,-1e4,W,1e4,W);var Q=this.xMin||0,ie=this.yMin||0,oe=this.xMax||0,me=this.yMax||0,Ee=this.advanceWidth||0;P.strokeStyle="blue",tt.line(P,B+Q*$,-1e4,B+Q*$,1e4),tt.line(P,B+oe*$,-1e4,B+oe*$,1e4),tt.line(P,-1e4,W+-ie*$,1e4,W+-ie*$),tt.line(P,-1e4,W+-me*$,1e4,W+-me*$),P.strokeStyle="green",tt.line(P,B+Ee*$,-1e4,B+Ee*$,1e4)},mt.prototype.get=function(P){return typeof this.glyphs[P]=="function"&&(this.glyphs[P]=this.glyphs[P]()),this.glyphs[P]},mt.prototype.push=function(P,B){this.glyphs[P]=B,this.length++};var lt={GlyphSet:mt,glyphLoader:function(P,B){return new ot({index:B,font:P})},ttfGlyphLoader:function(P,B,W,$,Q,ie){return function(){var oe=new ot({index:B,font:P});return oe.path=function(){W(oe,$,Q);var me=ie(P.glyphs,oe);return me.unitsPerEm=P.unitsPerEm,me},gt(oe,"xMin","_xMin"),gt(oe,"xMax","_xMax"),gt(oe,"yMin","_yMin"),gt(oe,"yMax","_yMax"),oe}},cffGlyphLoader:function(P,B,W,$){return function(){var Q=new ot({index:B,font:P});return Q.path=function(){var ie=W(P,Q,$);return ie.unitsPerEm=P.unitsPerEm,ie},Q}}};function vt(P){return P=P.length<1240?107:P.length<33900?1131:32768,P}function pt(P,B,W){var $,Q=[],ie=[],oe=Fe.getCard16(P,B);if(oe!==0){for(var me=Fe.getByte(P,B+2),Ee=B+(oe+1)*me+2,Se=B+3,Ne=0;Ne<oe+1;Ne+=1)Q.push(Fe.getOffset(P,Se,me)),Se+=me;$=Ee+Q[oe]}else $=B+2;for(var Be=0;Be<Q.length-1;Be+=1){var De=Fe.getBytes(P,Ee+Q[Be],Ee+Q[Be+1]);W&&(De=W(De)),ie.push(De)}return{objects:ie,startOffset:B,endOffset:$}}function It(P,B){if(B===28)return P.parseByte()<<8|P.parseByte();if(B===29)return P.parseByte()<<24|P.parseByte()<<16|P.parseByte()<<8|P.parseByte();if(B===30){for(var W=P,$="",Q=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var oe=W.parseByte(),ie=oe>>4,oe=15&oe;if(ie==15||($+=Q[ie],oe==15))break;$+=Q[oe]}return parseFloat($)}if(32<=B&&B<=246)return B-139;if(247<=B&&B<=250)return 256*(B-247)+P.parseByte()+108;if(251<=B&&B<=254)return 256*-(B-251)-P.parseByte()-108;throw new Error("Invalid b0 "+B)}function Jt(P,B,W){var $=new Fe.Parser(P,B=B!==void 0?B:0),Q=[],ie=[];for(W=W!==void 0?W:P.length;$.relativeOffset<W;){var oe=$.parseByte();oe<=21?(oe===12&&(oe=1200+$.parseByte()),Q.push([oe,ie]),ie=[]):ie.push(It($,oe))}for(var me=Q,Ee={},Se=0;Se<me.length;Se+=1){var Ne=me[Se][0],Be=me[Se][1],De=void 0,De=Be.length===1?Be[0]:Be;if(Ee.hasOwnProperty(Ne)&&!isNaN(Ee[Ne]))throw new Error("Object "+Ee+" already has key "+Ne);Ee[Ne]=De}return Ee}function Ut(P,B){return B=B<=390?ge[B]:P[B-391]}function At(P,B,W){for(var $,Q={},ie=0;ie<B.length;ie+=1){var oe=B[ie];if(Array.isArray(oe.type)){var me=[];me.length=oe.type.length;for(var Ee=0;Ee<oe.type.length;Ee++)($=P[oe.op]!==void 0?P[oe.op][Ee]:void 0)===void 0&&($=oe.value!==void 0&&oe.value[Ee]!==void 0?oe.value[Ee]:null),oe.type[Ee]==="SID"&&($=Ut(W,$)),me[Ee]=$;Q[oe.name]=me}else($=P[oe.op])===void 0&&($=oe.value!==void 0?oe.value:null),oe.type==="SID"&&($=Ut(W,$)),Q[oe.name]=$}return Q}var Pt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],kt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function qt(P,B,W,$){return At(Jt(P,B,W),kt,$)}function Ht(P,B,W,$){for(var Q=[],ie=0;ie<W.length;ie+=1){var oe=new DataView(new Uint8Array(W[ie]).buffer),oe=(me=$,At(Jt(oe,0,oe.byteLength),Pt,me)),me=(oe._subrs=[],oe._subrsBias=0,oe.private[0]),Ee=oe.private[1];me!==0&&Ee!==0&&(me=qt(P,Ee+B,me,$),oe._defaultWidthX=me.defaultWidthX,oe._nominalWidthX=me.nominalWidthX,me.subrs!==0&&(Ee=pt(P,Ee+me.subrs+B),oe._subrs=Ee.objects,oe._subrsBias=vt(oe._subrs)),oe._privateDict=me),Q.push(oe)}return Q}function Mt(P,B,W){var $,Q,ie,oe,me,Ee,Se,Ne,Be,De=new Z,Ce=[],$e=0,ze=!1,He=!1,Ve=0,Ue=0,ut=(Be=(P.isCIDFont?(me=P.tables.cff.topDict._fdSelect[B.index],me=P.tables.cff.topDict._fdArray[me],Ee=me._subrs,Se=me._subrsBias,Ne=me._defaultWidthX,me):(Ee=P.tables.cff.topDict._subrs,Se=P.tables.cff.topDict._subrsBias,Ne=P.tables.cff.topDict._defaultWidthX,P.tables.cff.topDict))._nominalWidthX,Ne);function _t(ft,xt){He&&De.closePath(),De.moveTo(ft,xt),He=!0}function dt(){Ce.length%2==0||ze||(ut=Ce.shift()+Be),$e+=Ce.length>>1,Ce.length=0,ze=!0}return function ft(xt){for(var Rt,zt,Yt,nr,sr,gr,Nt,Dt,Ot,ir,Vt,tr,Lt=0;Lt<xt.length;){var er=xt[Lt];switch(Lt+=1,er){case 1:case 3:dt();break;case 4:1<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),Ue+=Ce.pop(),_t(Ve,Ue);break;case 5:for(;0<Ce.length;)Ve+=Ce.shift(),Ue+=Ce.shift(),De.lineTo(Ve,Ue);break;case 6:for(;0<Ce.length&&(Ve+=Ce.shift(),De.lineTo(Ve,Ue),Ce.length!==0);)Ue+=Ce.shift(),De.lineTo(Ve,Ue);break;case 7:for(;0<Ce.length&&(Ue+=Ce.shift(),De.lineTo(Ve,Ue),Ce.length!==0);)Ve+=Ce.shift(),De.lineTo(Ve,Ue);break;case 8:for(;0<Ce.length;)$=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+Ce.shift(),De.curveTo($,Q,ie,oe,Ve,Ue);break;case 10:sr=Ce.pop()+Se,(gr=Ee[sr])&&ft(gr);break;case 11:return;case 12:switch(er=xt[Lt],Lt+=1,er){case 35:$=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe+Ce.shift(),Ot=Nt+Ce.shift(),ir=Dt+Ce.shift(),Vt=Ot+Ce.shift(),tr=ir+Ce.shift(),Ve=Vt+Ce.shift(),Ue=tr+Ce.shift(),Ce.shift(),De.curveTo($,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;case 34:$=Ve+Ce.shift(),Q=Ue,ie=$+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe,Ot=Nt+Ce.shift(),ir=oe,Vt=Ot+Ce.shift(),tr=Ue,Ve=Vt+Ce.shift(),De.curveTo($,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;case 36:$=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe,Ot=Nt+Ce.shift(),ir=oe,Vt=Ot+Ce.shift(),tr=ir+Ce.shift(),Ve=Vt+Ce.shift(),De.curveTo($,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;case 37:$=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Nt=ie+Ce.shift(),Dt=oe+Ce.shift(),Ot=Nt+Ce.shift(),ir=Dt+Ce.shift(),Vt=Ot+Ce.shift(),tr=ir+Ce.shift(),Math.abs(Vt-Ve)>Math.abs(tr-Ue)?Ve=Vt+Ce.shift():Ue=tr+Ce.shift(),De.curveTo($,Q,ie,oe,Nt,Dt),De.curveTo(Ot,ir,Vt,tr,Ve,Ue);break;default:console.log("Glyph "+B.index+": unknown operator 1200"+er),Ce.length=0}break;case 14:0<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),He&&(De.closePath(),He=!1);break;case 18:dt();break;case 19:case 20:dt(),Lt+=$e+7>>3;break;case 21:2<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),Ue+=Ce.pop(),_t(Ve+=Ce.pop(),Ue);break;case 22:1<Ce.length&&!ze&&(ut=Ce.shift()+Be,ze=!0),_t(Ve+=Ce.pop(),Ue);break;case 23:dt();break;case 24:for(;2<Ce.length;)$=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+Ce.shift(),De.curveTo($,Q,ie,oe,Ve,Ue);Ve+=Ce.shift(),Ue+=Ce.shift(),De.lineTo(Ve,Ue);break;case 25:for(;6<Ce.length;)Ve+=Ce.shift(),Ue+=Ce.shift(),De.lineTo(Ve,Ue);$=Ve+Ce.shift(),Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+Ce.shift(),De.curveTo($,Q,ie,oe,Ve,Ue);break;case 26:for(Ce.length%2&&(Ve+=Ce.shift());0<Ce.length;)$=Ve,Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Ve=ie,Ue=oe+Ce.shift(),De.curveTo($,Q,ie,oe,Ve,Ue);break;case 27:for(Ce.length%2&&(Ue+=Ce.shift());0<Ce.length;)$=Ve+Ce.shift(),Q=Ue,ie=$+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe,De.curveTo($,Q,ie,oe,Ve,Ue);break;case 28:Rt=xt[Lt],zt=xt[Lt+1],Ce.push((Rt<<24|zt<<16)>>16),Lt+=2;break;case 29:sr=Ce.pop()+P.gsubrsBias,(gr=P.gsubrs[sr])&&ft(gr);break;case 30:for(;0<Ce.length&&($=Ve,Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+(Ce.length===1?Ce.shift():0),De.curveTo($,Q,ie,oe,Ve,Ue),Ce.length!==0);)$=Ve+Ce.shift(),Q=Ue,ie=$+Ce.shift(),oe=Q+Ce.shift(),Ue=oe+Ce.shift(),Ve=ie+(Ce.length===1?Ce.shift():0),De.curveTo($,Q,ie,oe,Ve,Ue);break;case 31:for(;0<Ce.length&&($=Ve+Ce.shift(),Q=Ue,ie=$+Ce.shift(),oe=Q+Ce.shift(),Ue=oe+Ce.shift(),Ve=ie+(Ce.length===1?Ce.shift():0),De.curveTo($,Q,ie,oe,Ve,Ue),Ce.length!==0);)$=Ve,Q=Ue+Ce.shift(),ie=$+Ce.shift(),oe=Q+Ce.shift(),Ve=ie+Ce.shift(),Ue=oe+(Ce.length===1?Ce.shift():0),De.curveTo($,Q,ie,oe,Ve,Ue);break;default:er<32?console.log("Glyph "+B.index+": unknown operator "+er):er<247?Ce.push(er-139):er<251?(Rt=xt[Lt],Lt+=1,Ce.push(256*(er-247)+Rt+108)):er<255?(Rt=xt[Lt],Lt+=1,Ce.push(256*-(er-251)-Rt-108)):(Rt=xt[Lt],zt=xt[Lt+1],Yt=xt[Lt+2],nr=xt[Lt+3],Lt+=4,Ce.push((Rt<<24|zt<<16|Yt<<8|nr)/65536))}}}(W),B.advanceWidth=ut,De}function Zt(P,B){var W,$=ge.indexOf(P);return 0<=$&&(W=$),0<=($=B.indexOf(P))?W=$+ge.length:(W=ge.length+B.length,B.push(P)),W}function Sr(P,B,W){for(var $={},Q=0;Q<P.length;Q+=1){var ie=P[Q],oe=B[ie.name];oe===void 0||function me(Ee,Se){if(Ee===Se)return 1;if(Array.isArray(Ee)&&Array.isArray(Se)&&Ee.length===Se.length){for(var Ne=0;Ne<Ee.length;Ne+=1)if(!me(Ee[Ne],Se[Ne]))return;return 1}}(oe,ie.value)||(ie.type==="SID"&&(oe=Zt(oe,W)),$[ie.op]={name:ie.name,type:ie.type,value:oe})}return $}function Er(P,B){var W=new ve.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return W.dict=Sr(Pt,P,B),W}function kr(P){var B=new ve.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return B.topDicts=[{name:"topDict_0",type:"TABLE",value:P}],B}function Tr(P){for(var B=new ve.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),W=0;W<P.length;W+=1){var $=P.get(W),Q=function(ie){for(var oe=[],me=ie.path,Ee=(oe.push({name:"width",type:"NUMBER",value:ie.advanceWidth}),0),Se=0,Ne=0;Ne<me.commands.length;Ne+=1){var Be,De,Ce,$e,ze=void 0,He=void 0,Ve=me.commands[Ne];(Ve=Ve.type==="Q"?{type:"C",x:Ve.x,y:Ve.y,x1:1/3*Ee+2/3*Ve.x1,y1:1/3*Se+2/3*Ve.y1,x2:1/3*Ve.x+2/3*Ve.x1,y2:1/3*Ve.y+2/3*Ve.y1}:Ve).type==="M"?(ze=Math.round(Ve.x-Ee),He=Math.round(Ve.y-Se),oe.push({name:"dx",type:"NUMBER",value:ze}),oe.push({name:"dy",type:"NUMBER",value:He}),oe.push({name:"rmoveto",type:"OP",value:21}),Ee=Math.round(Ve.x),Se=Math.round(Ve.y)):Ve.type==="L"?(ze=Math.round(Ve.x-Ee),He=Math.round(Ve.y-Se),oe.push({name:"dx",type:"NUMBER",value:ze}),oe.push({name:"dy",type:"NUMBER",value:He}),oe.push({name:"rlineto",type:"OP",value:5}),Ee=Math.round(Ve.x),Se=Math.round(Ve.y)):Ve.type==="C"&&(Be=Math.round(Ve.x1-Ee),De=Math.round(Ve.y1-Se),Ce=Math.round(Ve.x2-Ve.x1),$e=Math.round(Ve.y2-Ve.y1),ze=Math.round(Ve.x-Ve.x2),He=Math.round(Ve.y-Ve.y2),oe.push({name:"dx1",type:"NUMBER",value:Be}),oe.push({name:"dy1",type:"NUMBER",value:De}),oe.push({name:"dx2",type:"NUMBER",value:Ce}),oe.push({name:"dy2",type:"NUMBER",value:$e}),oe.push({name:"dx",type:"NUMBER",value:ze}),oe.push({name:"dy",type:"NUMBER",value:He}),oe.push({name:"rrcurveto",type:"OP",value:8}),Ee=Math.round(Ve.x),Se=Math.round(Ve.y))}return oe.push({name:"endchar",type:"OP",value:14}),oe}($);B.charStrings.push({name:$.name,type:"CHARSTRING",value:Q})}return B}var lr={parse:function(P,B,W){W.tables.cff={},me=P,$=B,(Q={}).formatMajor=Fe.getCard8(me,$),Q.formatMinor=Fe.getCard8(me,$+1),Q.size=Fe.getCard8(me,$+2),Q.offsetSize=Fe.getCard8(me,$+3),Q.startOffset=$,Q.endOffset=$+4;var me=pt(P,Q.endOffset,Fe.bytesToString),$=pt(P,me.endOffset),Q=pt(P,$.endOffset,Fe.bytesToString),me=pt(P,Q.endOffset);if(W.gsubrs=me.objects,W.gsubrsBias=vt(W.gsubrs),(me=Ht(P,B,$.objects,Q.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+me.length);if($=me[0],(W.tables.cff.topDict=$)._privateDict&&(W.defaultWidthX=$._privateDict.defaultWidthX,W.nominalWidthX=$._privateDict.nominalWidthX),$.ros[0]!==void 0&&$.ros[1]!==void 0&&(W.isCIDFont=!0),W.isCIDFont){var me=$.fdArray,ie=$.fdSelect;if(me===0||ie===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");me=Ht(P,B,pt(P,me+=B).objects,Q.objects),$._fdArray=me,$._fdSelect=function(De,Ce,$e,ze){var He,Ve=[],Ue=new Fe.Parser(De,Ce);if((De=Ue.parseCard8())===0)for(var ut=0;ut<$e;ut++){if(ze<=(He=Ue.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+He+" (FD count "+ze+")");Ve.push(He)}else{if(De!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+De);var _t,dt=Ue.parseCard16(),ft=Ue.parseCard16();if(ft!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+ft);for(var xt=0;xt<dt;xt++){if(He=Ue.parseCard8(),_t=Ue.parseCard16(),ze<=He)throw new Error("CFF table CID Font FDSelect has bad FD index value "+He+" (FD count "+ze+")");if($e<_t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+_t);for(;ft<_t;ft++)Ve.push(He);ft=_t}if(_t!==$e)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+_t)}return Ve}(P,ie+=B,W.numGlyphs,me.length)}var ie=B+$.private[1],me=qt(P,ie,$.private[0],Q.objects),oe=(W.defaultWidthX=me.defaultWidthX,W.nominalWidthX=me.nominalWidthX,me.subrs!==0?(ie=pt(P,ie+me.subrs),W.subrs=ie.objects,W.subrsBias=vt(W.subrs)):(W.subrs=[],W.subrsBias=0),pt(P,B+$.charStrings)),me=(W.nGlyphs=oe.objects.length,function(Ne,Be,De,Ce){var $e=new Fe.Parser(Ne,Be),ze=(--De,[".notdef"]);if((Ne=$e.parseCard8())===0)for(var He=0;He<De;He+=1)Ve=$e.parseSID(),ze.push(Ut(Ce,Ve));else if(Ne===1)for(;ze.length<=De;)for(var Ve=$e.parseSID(),Ue=$e.parseCard8(),ut=0;ut<=Ue;ut+=1)ze.push(Ut(Ce,Ve)),Ve+=1;else{if(Ne!==2)throw new Error("Unknown charset format "+Ne);for(;ze.length<=De;){Ve=$e.parseSID(),Ue=$e.parseCard16();for(var _t=0;_t<=Ue;_t+=1)ze.push(Ut(Ce,Ve)),Ve+=1}}return ze}(P,B+$.charset,W.nGlyphs,Q.objects));$.encoding===0?W.cffEncoding=new Qe(ce,me):$.encoding===1?W.cffEncoding=new Qe(we,me):W.cffEncoding=function(Ne,Be,De){var Ce={},$e=new Fe.Parser(Ne,Be);if((Ne=$e.parseCard8())===0)for(var ze=$e.parseCard8(),He=0;He<ze;He+=1)Ce[Ue=$e.parseCard8()]=He;else{if(Ne!==1)throw new Error("Unknown encoding format "+Ne);for(var Ve=$e.parseCard8(),Ue=1,ut=0;ut<Ve;ut+=1)for(var _t=$e.parseCard8(),dt=$e.parseCard8(),ft=_t;ft<=_t+dt;ft+=1)Ce[ft]=Ue,Ue+=1}return new Qe(Ce,De)}(P,B+$.encoding,me),W.encoding=W.encoding||W.cffEncoding,W.glyphs=new lt.GlyphSet(W);for(var Ee=0;Ee<W.nGlyphs;Ee+=1){var Se=oe.objects[Ee];W.glyphs.push(Ee,lt.cffGlyphLoader(W,Ee,Mt,Se))}},make:function(P,Ne){for(var W,$=new ve.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),Q=1/Ne.unitsPerEm,Q={version:Ne.version,fullName:Ne.fullName,familyName:Ne.familyName,weight:Ne.weightName,fontBBox:Ne.fontBBox||[0,0,0,0],fontMatrix:[Q,0,0,Q,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},ie=[],oe=1;oe<P.length;oe+=1)W=P.get(oe),ie.push(W.name);var me,Ee,Se=[],Ne=($.header=new ve.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),$.nameIndex=function(De){var Ce=new ve.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ce.names=[];for(var $e=0;$e<De.length;$e+=1)Ce.names.push({name:"name_"+$e,type:"NAME",value:De[$e]});return Ce}([Ne.postScriptName]),Er(Q,Se)),Be=($.topDictIndex=kr(Ne),$.globalSubrIndex=new ve.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),$.charsets=function(De,Ce){for(var $e=new ve.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ze=0;ze<De.length;ze+=1){var He=Zt(De[ze],Ce);$e.fields.push({name:"glyph_"+ze,type:"SID",value:He})}return $e}(ie,Se),$.charStringsIndex=Tr(P),$.privateDict=(Be={},me=Se,(Ee=new ve.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Sr(kt,Be,me),Ee),$.stringIndex=function(De){var Ce=new ve.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ce.strings=[];for(var $e=0;$e<De.length;$e+=1)Ce.strings.push({name:"string_"+$e,type:"STRING",value:De[$e]});return Ce}(Se),$.header.sizeOf()+$.nameIndex.sizeOf()+$.topDictIndex.sizeOf()+$.stringIndex.sizeOf()+$.globalSubrIndex.sizeOf());return Q.charset=Be,Q.encoding=0,Q.charStrings=Q.charset+$.charsets.sizeOf(),Q.private[1]=Q.charStrings+$.charStringsIndex.sizeOf(),Ne=Er(Q,Se),$.topDictIndex=kr(Ne),$}},Cr={parse:function($,B){var W={},$=new Fe.Parser($,B);return W.version=$.parseVersion(),W.fontRevision=Math.round(1e3*$.parseFixed())/1e3,W.checkSumAdjustment=$.parseULong(),W.magicNumber=$.parseULong(),L.argument(W.magicNumber===1594834165,"Font header has wrong magic number."),W.flags=$.parseUShort(),W.unitsPerEm=$.parseUShort(),W.created=$.parseLongDateTime(),W.modified=$.parseLongDateTime(),W.xMin=$.parseShort(),W.yMin=$.parseShort(),W.xMax=$.parseShort(),W.yMax=$.parseShort(),W.macStyle=$.parseUShort(),W.lowestRecPPEM=$.parseUShort(),W.fontDirectionHint=$.parseShort(),W.indexToLocFormat=$.parseShort(),W.glyphDataFormat=$.parseShort(),W},make:function(P){var B=Math.round(new Date().getTime()/1e3)+2082844800,W=B;return P.createdTimestamp&&(W=P.createdTimestamp+2082844800),new ve.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:W},{name:"modified",type:"LONGDATETIME",value:B},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],P)}},Ae={parse:function($,B){var W={},$=new Fe.Parser($,B);return W.version=$.parseVersion(),W.ascender=$.parseShort(),W.descender=$.parseShort(),W.lineGap=$.parseShort(),W.advanceWidthMax=$.parseUShort(),W.minLeftSideBearing=$.parseShort(),W.minRightSideBearing=$.parseShort(),W.xMaxExtent=$.parseShort(),W.caretSlopeRise=$.parseShort(),W.caretSlopeRun=$.parseShort(),W.caretOffset=$.parseShort(),$.relativeOffset+=8,W.metricDataFormat=$.parseShort(),W.numberOfHMetrics=$.parseUShort(),W},make:function(P){return new ve.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],P)}},et={parse:function(P,B,W,$,Q){for(var ie,oe,me=new Fe.Parser(P,B),Ee=0;Ee<$;Ee+=1){Ee<W&&(ie=me.parseUShort(),oe=me.parseShort());var Se=Q.get(Ee);Se.advanceWidth=ie,Se.leftSideBearing=oe}},make:function(P){for(var B=new ve.Table("hmtx",[]),W=0;W<P.length;W+=1){var Q=P.get(W),$=Q.advanceWidth||0,Q=Q.leftSideBearing||0;B.fields.push({name:"advanceWidth_"+W,type:"USHORT",value:$}),B.fields.push({name:"leftSideBearing_"+W,type:"SHORT",value:Q})}return B}},it={make:function(P){for(var B=new ve.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:P.length}]),W="",$=12+4*P.length,Q=0;Q<P.length;++Q){var ie=W.indexOf(P[Q]);ie<0&&(ie=W.length,W+=P[Q]),B.fields.push({name:"offset "+Q,type:"USHORT",value:$+ie}),B.fields.push({name:"length "+Q,type:"USHORT",value:P[Q].length})}return B.fields.push({name:"stringPool",type:"CHARARRAY",value:W}),B},parse:function(P,B){for(var W=new Fe.Parser(P,B),$=W.parseULong(),Q=(L.argument($===1,"Unsupported ltag table version."),W.skip("uLong",1),W.parseULong()),ie=[],oe=0;oe<Q;oe++){for(var me="",Ee=B+W.parseUShort(),Se=W.parseUShort(),Ne=Ee;Ne<Ee+Se;++Ne)me+=String.fromCharCode(P.getInt8(Ne));ie.push(me)}return ie}},Je={parse:function($,B){var W={},$=new Fe.Parser($,B);return W.version=$.parseVersion(),W.numGlyphs=$.parseUShort(),W.version===1&&(W.maxPoints=$.parseUShort(),W.maxContours=$.parseUShort(),W.maxCompositePoints=$.parseUShort(),W.maxCompositeContours=$.parseUShort(),W.maxZones=$.parseUShort(),W.maxTwilightPoints=$.parseUShort(),W.maxStorage=$.parseUShort(),W.maxFunctionDefs=$.parseUShort(),W.maxInstructionDefs=$.parseUShort(),W.maxStackElements=$.parseUShort(),W.maxSizeOfInstructions=$.parseUShort(),W.maxComponentElements=$.parseUShort(),W.maxComponentDepth=$.parseUShort()),W},make:function(P){return new ve.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:P}])}},St=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ze={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Tt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},st={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Et="utf-16",at={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Bt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Wt(P,B,W){switch(P){case 0:return Et;case 1:return Bt[W]||at[B];case 3:if(B===1||B===10)return Et}}function Ft(P){var B,W={};for(B in P)W[P[B]]=parseInt(B);return W}function Xt(P,B,W,$,Q,ie){return new ve.Record("NameRecord",[{name:"platformID",type:"USHORT",value:P},{name:"encodingID",type:"USHORT",value:B},{name:"languageID",type:"USHORT",value:W},{name:"nameID",type:"USHORT",value:$},{name:"length",type:"USHORT",value:Q},{name:"offset",type:"USHORT",value:ie}])}function $t(P,B){if((W=function(ie,oe){var me=ie.length,Ee=oe.length-me+1;e:for(var Se=0;Se<Ee;Se++)for(;Se<Ee;Se++){for(var Ne=0;Ne<me;Ne++)if(oe[Se+Ne]!==ie[Ne])continue e;return Se}return-1}(P,B))<0)for(var W=B.length,$=0,Q=P.length;$<Q;++$)B.push(P[$]);return W}var rr={parse:function(P,B,W){for(var $={},Q=new Fe.Parser(P,B),B=Q.parseUShort(),ie=Q.parseUShort(),oe=Q.offset+Q.parseUShort(),me=0;me<ie;me++){var $e=Q.parseUShort(),Ee=Q.parseUShort(),Se=Q.parseUShort(),Ne=Q.parseUShort(),Ne=St[Ne]||Ne,Be=Q.parseUShort(),De=Q.parseUShort(),Ce=function(He,Ve,Ue){switch(He){case 0:if(Ve===65535)return"und";if(Ue)return Ue[Ve];break;case 1:return Ze[Ve];case 3:return st[Ve]}}($e,Se,W),$e=Wt($e,Ee,Se);$e!==void 0&&Ce!==void 0&&(Ee=void 0,(Ee=$e===Et?H.UTF16(P,oe+De,Be):H.MACSTRING(P,oe+De,Be,$e))&&((Se=(Se=$[Ne])===void 0?$[Ne]={}:Se)[Ce]=Ee))}return B===1&&Q.parseUShort(),$},make:function(P,B){var W,$=[],Q={},ie=Ft(St);for(W in P){var oe=ie[W];if(oe===void 0&&(oe=W),De=parseInt(oe),isNaN(De))throw new Error('Name table entry "'+W+'" does not exist, see nameTableNames for complete list.');Q[De]=P[W],$.push(De)}for(var me=Ft(Ze),Ee=Ft(st),Se=[],Ne=[],Be=0;Be<$.length;Be++){var De,Ce,$e=Q[De=$[Be]];for(Ce in $e){var ze=$e[Ce],_t=1,He=me[Ce],Ve=Tt[He],Ue=Wt(_t,Ve,He),Ue=J.MACSTRING(ze,Ue),ut=(Ue===void 0&&(_t=0,(He=B.indexOf(Ce))<0&&(He=B.length,B.push(Ce)),Ve=4,Ue=J.UTF16(ze)),$t(Ue,Ne)),_t=(Se.push(Xt(_t,Ve,He,De,Ue.length,ut)),Ee[Ce]);_t!==void 0&&(He=$t(Ve=J.UTF16(ze),Ne),Se.push(Xt(3,1,_t,De,Ve.length,He)))}}Se.sort(function(xt,Rt){return xt.platformID-Rt.platformID||xt.encodingID-Rt.encodingID||xt.languageID-Rt.languageID||xt.nameID-Rt.nameID});for(var dt=new ve.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Se.length},{name:"stringOffset",type:"USHORT",value:6+12*Se.length}]),ft=0;ft<Se.length;ft++)dt.fields.push({name:"record_"+ft,type:"RECORD",value:Se[ft]});return dt.fields.push({name:"strings",type:"LITERAL",value:Ne}),dt}},Qt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Gt={parse:function(P,B){var W={},$=new Fe.Parser(P,B);W.version=$.parseUShort(),W.xAvgCharWidth=$.parseShort(),W.usWeightClass=$.parseUShort(),W.usWidthClass=$.parseUShort(),W.fsType=$.parseUShort(),W.ySubscriptXSize=$.parseShort(),W.ySubscriptYSize=$.parseShort(),W.ySubscriptXOffset=$.parseShort(),W.ySubscriptYOffset=$.parseShort(),W.ySuperscriptXSize=$.parseShort(),W.ySuperscriptYSize=$.parseShort(),W.ySuperscriptXOffset=$.parseShort(),W.ySuperscriptYOffset=$.parseShort(),W.yStrikeoutSize=$.parseShort(),W.yStrikeoutPosition=$.parseShort(),W.sFamilyClass=$.parseShort(),W.panose=[];for(var Q=0;Q<10;Q++)W.panose[Q]=$.parseByte();return W.ulUnicodeRange1=$.parseULong(),W.ulUnicodeRange2=$.parseULong(),W.ulUnicodeRange3=$.parseULong(),W.ulUnicodeRange4=$.parseULong(),W.achVendID=String.fromCharCode($.parseByte(),$.parseByte(),$.parseByte(),$.parseByte()),W.fsSelection=$.parseUShort(),W.usFirstCharIndex=$.parseUShort(),W.usLastCharIndex=$.parseUShort(),W.sTypoAscender=$.parseShort(),W.sTypoDescender=$.parseShort(),W.sTypoLineGap=$.parseShort(),W.usWinAscent=$.parseUShort(),W.usWinDescent=$.parseUShort(),1<=W.version&&(W.ulCodePageRange1=$.parseULong(),W.ulCodePageRange2=$.parseULong()),2<=W.version&&(W.sxHeight=$.parseShort(),W.sCapHeight=$.parseShort(),W.usDefaultChar=$.parseUShort(),W.usBreakChar=$.parseUShort(),W.usMaxContent=$.parseUShort()),W},make:function(P){return new ve.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],P)},unicodeRanges:Qt,getUnicodeRange:function(P){for(var B=0;B<Qt.length;B+=1){var W=Qt[B];if(P>=W.begin&&P<W.end)return B}return-1}},Jr={parse:function(P,B){var W={},$=new Fe.Parser(P,B);switch(W.version=$.parseVersion(),W.italicAngle=$.parseFixed(),W.underlinePosition=$.parseShort(),W.underlineThickness=$.parseShort(),W.isFixedPitch=$.parseULong(),W.minMemType42=$.parseULong(),W.maxMemType42=$.parseULong(),W.minMemType1=$.parseULong(),W.maxMemType1=$.parseULong(),W.version){case 1:W.names=Oe.slice();break;case 2:W.numberOfGlyphs=$.parseUShort(),W.glyphNameIndex=new Array(W.numberOfGlyphs);for(var Q=0;Q<W.numberOfGlyphs;Q++)W.glyphNameIndex[Q]=$.parseUShort();W.names=[];for(var ie,oe=0;oe<W.numberOfGlyphs;oe++)W.glyphNameIndex[oe]>=Oe.length&&(ie=$.parseChar(),W.names.push($.parseString(ie)));break;case 2.5:W.numberOfGlyphs=$.parseUShort(),W.offset=new Array(W.numberOfGlyphs);for(var me=0;me<W.numberOfGlyphs;me++)W.offset[me]=$.parseChar()}return W},make:function(){return new ve.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},cr=new Array(9),_r=(cr[1]=function(){var P=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{substFormat:1,coverage:this.parsePointer(Pe.coverage),deltaGlyphId:this.parseUShort()}:B===2?{substFormat:2,coverage:this.parsePointer(Pe.coverage),substitute:this.parseOffset16List()}:void L.assert(!1,"0x"+P.toString(16)+": lookup type 1 format must be 1 or 2.")},cr[2]=function(){var P=this.parseUShort();return L.argument(P===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),sequences:this.parseListOfLists()}},cr[3]=function(){var P=this.parseUShort();return L.argument(P===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),alternateSets:this.parseListOfLists()}},cr[4]=function(){var P=this.parseUShort();return L.argument(P===1,"GSUB ligature table identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Pe.uShort,lookupListIndex:Pe.uShort});cr[5]=function(){var P,B,W=this.offset+this.relativeOffset,$=this.parseUShort();return $===1?{substFormat:$,coverage:this.parsePointer(Pe.coverage),ruleSets:this.parseListOfLists(function(){var Q=this.parseUShort(),ie=this.parseUShort();return{input:this.parseUShortList(Q-1),lookupRecords:this.parseRecordList(ie,_r)}})}:$===2?{substFormat:$,coverage:this.parsePointer(Pe.coverage),classDef:this.parsePointer(Pe.classDef),classSets:this.parseListOfLists(function(){var Q=this.parseUShort(),ie=this.parseUShort();return{classes:this.parseUShortList(Q-1),lookupRecords:this.parseRecordList(ie,_r)}})}:$===3?(P=this.parseUShort(),B=this.parseUShort(),{substFormat:$,coverages:this.parseList(P,Pe.pointer(Pe.coverage)),lookupRecords:this.parseRecordList(B,_r)}):void L.assert(!1,"0x"+W.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},cr[6]=function(){var P=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{substFormat:1,coverage:this.parsePointer(Pe.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(_r)}})}:B===2?{substFormat:2,coverage:this.parsePointer(Pe.coverage),backtrackClassDef:this.parsePointer(Pe.classDef),inputClassDef:this.parsePointer(Pe.classDef),lookaheadClassDef:this.parsePointer(Pe.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(_r)}})}:B===3?{substFormat:3,backtrackCoverage:this.parseList(Pe.pointer(Pe.coverage)),inputCoverage:this.parseList(Pe.pointer(Pe.coverage)),lookaheadCoverage:this.parseList(Pe.pointer(Pe.coverage)),lookupRecords:this.parseRecordList(_r)}:void L.assert(!1,"0x"+P.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},cr[7]=function(){var P=this.parseUShort(),P=(L.argument(P===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),B=new Pe(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:P,extension:cr[P].call(B)}},cr[8]=function(){var P=this.parseUShort();return L.argument(P===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(Pe.coverage),backtrackCoverage:this.parseList(Pe.pointer(Pe.coverage)),lookaheadCoverage:this.parseList(Pe.pointer(Pe.coverage)),substitutes:this.parseUShortList()}};var Mr=new Array(9);Mr[1]=function(P){return P.substFormat===1?new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)},{name:"deltaGlyphID",type:"USHORT",value:P.deltaGlyphId}]):new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)}].concat(ve.ushortList("substitute",P.substitute)))},Mr[3]=function(P){return L.assert(P.substFormat===1,"Lookup type 3 substFormat must be 1."),new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)}].concat(ve.tableList("altSet",P.alternateSets,function(B){return new ve.Table("alternateSetTable",ve.ushortList("alternate",B))})))},Mr[4]=function(P){return L.assert(P.substFormat===1,"Lookup type 4 substFormat must be 1."),new ve.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ve.Coverage(P.coverage)}].concat(ve.tableList("ligSet",P.ligatureSets,function(B){return new ve.Table("ligatureSetTable",ve.tableList("ligature",B,function(W){return new ve.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:W.ligGlyph}].concat(ve.ushortList("component",W.components,W.components.length+1)))}))})))};var Ir={parse:function(P,B){return B=(P=new Pe(P,B=B||0)).parseVersion(1),L.argument(B===1||B===1.1,"Unsupported GSUB table version."),B===1?{version:B,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(cr)}:{version:B,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(cr),variations:P.parseFeatureVariationsList()}},make:function(P){return new ve.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ve.ScriptList(P.scripts)},{name:"features",type:"TABLE",value:new ve.FeatureList(P.features)},{name:"lookups",type:"TABLE",value:new ve.LookupList(P.lookups,Mr)}])}},Qr={parse:function(P,B){for(var W=new Fe.Parser(P,B),$=W.parseULong(),Q=(L.argument($===1,"Unsupported META table version."),W.parseULong(),W.parseULong(),W.parseULong()),ie={},oe=0;oe<Q;oe++){var me=W.parseTag(),Se=W.parseULong(),Ee=W.parseULong(),Se=H.UTF8(P,B+Se,Ee);ie[me]=Se}return ie},make:function(P){var B,W=Object.keys(P).length,$="",Q=16+12*W,ie=new ve.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:Q},{name:"numTags",type:"ULONG",value:W}]);for(B in P){var oe=$.length;$+=P[B],ie.fields.push({name:"tag "+B,type:"TAG",value:B}),ie.fields.push({name:"offset "+B,type:"ULONG",value:Q+oe}),ie.fields.push({name:"length "+B,type:"ULONG",value:P[B].length})}return ie.fields.push({name:"stringPool",type:"CHARARRAY",value:$}),ie}};function en(P){return Math.log(P)/Math.log(2)|0}function Or(P){for(;P.length%4!=0;)P.push(0);for(var B=0,W=0;W<P.length;W+=4)B+=(P[W]<<24)+(P[W+1]<<16)+(P[W+2]<<8)+P[W+3];return B%=Math.pow(2,32)}function Ar(P,B,W,$){return new ve.Record("Table Record",[{name:"tag",type:"TAG",value:P!==void 0?P:""},{name:"checkSum",type:"ULONG",value:B!==void 0?B:0},{name:"offset",type:"ULONG",value:W!==void 0?W:0},{name:"length",type:"ULONG",value:$!==void 0?$:0}])}function br(P){for(var B=new ve.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),W=(B.tables=P,B.numTables=P.length,Math.pow(2,en(B.numTables))),$=(B.searchRange=16*W,B.entrySelector=en(W),B.rangeShift=16*B.numTables-B.searchRange,[]),Q=[],ie=B.sizeOf()+Ar().sizeOf()*B.numTables;ie%4!=0;)ie+=1,Q.push({name:"padding",type:"BYTE",value:0});for(var oe=0;oe<P.length;oe+=1){var me=P[oe],Ee=(L.argument(me.tableName.length===4,"Table name"+me.tableName+" is invalid."),me.sizeOf()),Se=Ar(me.tableName,Or(me.encode()),ie,Ee);for($.push({name:Se.tag+" Table Record",type:"RECORD",value:Se}),Q.push({name:me.tableName+" table",type:"RECORD",value:me}),ie+=Ee,L.argument(!isNaN(ie),"Something went wrong calculating the offset.");ie%4!=0;)ie+=1,Q.push({name:"padding",type:"BYTE",value:0})}return $.sort(function(Ne,Be){return Ne.value.tag>Be.value.tag?1:-1}),B.fields=B.fields.concat($),B.fields=B.fields.concat(Q),B}function tn(P,B,W){for(var $=0;$<B.length;$+=1){var Q=P.charToGlyphIndex(B[$]);if(0<Q)return P.glyphs.get(Q).getMetrics()}return W}var jr={make:br,fontToTable:function(P){for(var B,W=[],$=[],Q=[],ie=[],oe=[],me=[],Ee=[],Se=0,Ne=0,Be=0,De=0,Ce=0,$e=0;$e<P.glyphs.length;$e+=1){var ze=P.glyphs.get($e),He=0|ze.unicode;if(isNaN(ze.advanceWidth))throw new Error("Glyph "+ze.name+" ("+$e+"): advanceWidth is not a number.");(He<B||B===void 0)&&0<He&&(B=He),Se<He&&(Se=He);var He=Gt.getUnicodeRange(He);if(He<32)Ne|=1<<He;else if(He<64)Be|=1<<He-32;else if(He<96)De|=1<<He-64;else{if(!(He<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ce|=1<<He-96}ze.name!==".notdef"&&(He=ze.getMetrics(),W.push(He.xMin),$.push(He.yMin),Q.push(He.xMax),ie.push(He.yMax),me.push(He.leftSideBearing),Ee.push(He.rightSideBearing),oe.push(ze.advanceWidth))}var Ve,Ue={xMin:Math.min.apply(null,W),yMin:Math.min.apply(null,$),xMax:Math.max.apply(null,Q),yMax:Math.max.apply(null,ie),advanceWidthMax:Math.max.apply(null,oe),advanceWidthAvg:function(er){for(var Kr=0,Br=0;Br<er.length;Br+=1)Kr+=er[Br];return Kr/er.length}(oe),minLeftSideBearing:Math.min.apply(null,me),maxLeftSideBearing:Math.max.apply(null,me),minRightSideBearing:Math.min.apply(null,Ee)},ut=(Ue.ascender=P.ascender,Ue.descender=P.descender,Cr.make({flags:3,unitsPerEm:P.unitsPerEm,xMin:Ue.xMin,yMin:Ue.yMin,xMax:Ue.xMax,yMax:Ue.yMax,lowestRecPPEM:3,createdTimestamp:P.createdTimestamp})),_t=Ae.make({ascender:Ue.ascender,descender:Ue.descender,advanceWidthMax:Ue.advanceWidthMax,minLeftSideBearing:Ue.minLeftSideBearing,minRightSideBearing:Ue.minRightSideBearing,xMaxExtent:Ue.maxLeftSideBearing+(Ue.xMax-Ue.xMin),numberOfHMetrics:P.glyphs.length}),dt=Je.make(P.glyphs.length),ft=Gt.make({xAvgCharWidth:Math.round(Ue.advanceWidthAvg),usWeightClass:P.tables.os2.usWeightClass,usWidthClass:P.tables.os2.usWidthClass,usFirstCharIndex:B,usLastCharIndex:Se,ulUnicodeRange1:Ne,ulUnicodeRange2:Be,ulUnicodeRange3:De,ulUnicodeRange4:Ce,fsSelection:P.tables.os2.fsSelection,sTypoAscender:Ue.ascender,sTypoDescender:Ue.descender,sTypoLineGap:0,usWinAscent:Ue.yMax,usWinDescent:Math.abs(Ue.yMin),ulCodePageRange1:1,sxHeight:tn(P,"xyvw",{yMax:Math.round(Ue.ascender/2)}).yMax,sCapHeight:tn(P,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ue).yMax,usDefaultChar:P.hasChar(" ")?32:0,usBreakChar:P.hasChar(" ")?32:0}),xt=et.make(P.glyphs),Rt=de.make(P.glyphs),Dt=P.getEnglishName("fontFamily"),Ot=P.getEnglishName("fontSubfamily"),Nt=Dt+" "+Ot,zt=(zt=P.getEnglishName("postScriptName"))||Dt.replace(/\s/g,"")+"-"+Ot,Yt={};for(Ve in P.names)Yt[Ve]=P.names[Ve];Yt.uniqueID||(Yt.uniqueID={en:P.getEnglishName("manufacturer")+":"+Nt}),Yt.postScriptName||(Yt.postScriptName={en:zt}),Yt.preferredFamily||(Yt.preferredFamily=P.names.fontFamily),Yt.preferredSubfamily||(Yt.preferredSubfamily=P.names.fontSubfamily);var sr=[],nr=rr.make(Yt,sr),sr=0<sr.length?it.make(sr):void 0,gr=Jr.make(),Nt=lr.make(P.glyphs,{version:P.getEnglishName("version"),fullName:Nt,familyName:Dt,weightName:Ot,postScriptName:zt,unitsPerEm:P.unitsPerEm,fontBBox:[0,Ue.yMin,Ue.ascender,Ue.advanceWidthMax]}),Dt=P.metas&&0<Object.keys(P.metas).length?Qr.make(P.metas):void 0,Ot=[ut,_t,dt,ft,nr,Rt,gr,Nt,xt];sr&&Ot.push(sr),P.tables.gsub&&Ot.push(Ir.make(P.tables.gsub)),Dt&&Ot.push(Dt);for(var ir=Or((zt=br(Ot)).encode()),Vt=zt.fields,tr=!1,Lt=0;Lt<Vt.length;Lt+=1)if(Vt[Lt].name==="head table"){Vt[Lt].value.checkSumAdjustment=2981146554-ir,tr=!0;break}if(tr)return zt;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Or};function Ur(P,B){for(var W=0,$=P.length-1;W<=$;){var Q=W+$>>>1,ie=P[Q].tag;if(ie===B)return Q;ie<B?W=1+Q:$=Q-1}return-W-1}function rn(P,B){for(var W=0,$=P.length-1;W<=$;){var Q=W+$>>>1,ie=P[Q];if(ie===B)return Q;ie<B?W=1+Q:$=Q-1}return-W-1}function nn(P,B){for(var W=0,$=P.length-1;W<=$;){var Q,ie=W+$>>>1,oe=(Q=P[ie]).start;if(oe===B)return Q;oe<B?W=1+ie:$=ie-1}if(0<W)return B>(Q=P[W-1]).end?0:Q}function Nr(P,B){this.font=P,this.tableName=B}function Rr(P){Nr.call(this,P,"gpos")}function hr(P){Nr.call(this,P,"gsub")}function sn(P,B,W){for(var $=P.subtables,Q=0;Q<$.length;Q++){var ie=$[Q];if(ie.substFormat===B)return ie}if(W)return $.push(W),W}function Dr(P){for(var B=new ArrayBuffer(P.length),W=new Uint8Array(B),$=0;$<P.length;++$)W[$]=P[$];return B}function ar(P,B){if(!P)throw B}function on(P,B,W,$,Q){var ie=0<(B&$)?(ie=P.parseByte(),W+(ie=B&Q?ie:-ie)):0<(B&Q)?W:W+P.parseShort();return ie}function kn(P,B,W){var $,Q=new Fe.Parser(B,W);if(P.numberOfContours=Q.parseShort(),P._xMin=Q.parseShort(),P._yMin=Q.parseShort(),P._xMax=Q.parseShort(),P._yMax=Q.parseShort(),0<P.numberOfContours){for(var ie=P.endPointIndices=[],oe=0;oe<P.numberOfContours;oe+=1)ie.push(Q.parseUShort());P.instructionLength=Q.parseUShort(),P.instructions=[];for(var me=0;me<P.instructionLength;me+=1)P.instructions.push(Q.parseByte());for(var Ee=ie[ie.length-1]+1,Se=[],Ne=0;Ne<Ee;Ne+=1)if($=Q.parseByte(),Se.push($),0<(8&$))for(var Be=Q.parseByte(),De=0;De<Be;De+=1)Se.push($),Ne+=1;if(L.argument(Se.length===Ee,"Bad flags."),0<ie.length){var Ce,$e=[];if(0<Ee){for(var ze=0;ze<Ee;ze+=1)$=Se[ze],(Ce={}).onCurve=!!(1&$),Ce.lastPointOfContour=0<=ie.indexOf(ze),$e.push(Ce);for(var He=0,Ve=0;Ve<Ee;Ve+=1)$=Se[Ve],(Ce=$e[Ve]).x=on(Q,$,He,2,16),He=Ce.x;for(var Ue=0,ut=0;ut<Ee;ut+=1)$=Se[ut],(Ce=$e[ut]).y=on(Q,$,Ue,4,32),Ue=Ce.y}P.points=$e}else P.points=[]}else if(P.numberOfContours===0)P.points=[];else{P.isComposite=!0,P.points=[],P.components=[];for(var _t=!0;_t;){Se=Q.parseUShort();var dt={glyphIndex:Q.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Se)?0<(2&Se)?(dt.dx=Q.parseShort(),dt.dy=Q.parseShort()):dt.matchedPoints=[Q.parseUShort(),Q.parseUShort()]:0<(2&Se)?(dt.dx=Q.parseChar(),dt.dy=Q.parseChar()):dt.matchedPoints=[Q.parseByte(),Q.parseByte()],0<(8&Se)?dt.xScale=dt.yScale=Q.parseF2Dot14():0<(64&Se)?(dt.xScale=Q.parseF2Dot14(),dt.yScale=Q.parseF2Dot14()):0<(128&Se)&&(dt.xScale=Q.parseF2Dot14(),dt.scale01=Q.parseF2Dot14(),dt.scale10=Q.parseF2Dot14(),dt.yScale=Q.parseF2Dot14()),P.components.push(dt),_t=!!(32&Se)}if(256&Se){P.instructionLength=Q.parseUShort(),P.instructions=[];for(var ft=0;ft<P.instructionLength;ft+=1)P.instructions.push(Q.parseByte())}}}function Gr(P,B){for(var W=[],$=0;$<P.length;$+=1){var Q=P[$],Q={x:B.xScale*Q.x+B.scale01*Q.y+B.dx,y:B.scale10*Q.x+B.yScale*Q.y+B.dy,onCurve:Q.onCurve,lastPointOfContour:Q.lastPointOfContour};W.push(Q)}return W}function an(P){var B=new Z;if(P)for(var W=function(Be){for(var De=[],Ce=[],$e=0;$e<Be.length;$e+=1){var ze=Be[$e];Ce.push(ze),ze.lastPointOfContour&&(De.push(Ce),Ce=[])}return L.argument(Ce.length===0,"There are still points left in the current contour."),De}(P),$=0;$<W.length;++$){var Q,ie=W[$],oe=ie[ie.length-1],me=ie[0];oe.onCurve?B.moveTo(oe.x,oe.y):me.onCurve?B.moveTo(me.x,me.y):(Q={x:.5*(oe.x+me.x),y:.5*(oe.y+me.y)},B.moveTo(Q.x,Q.y));for(var Ee=0;Ee<ie.length;++Ee){var Se,Ne=oe,oe=me,me=ie[(Ee+1)%ie.length];oe.onCurve?B.lineTo(oe.x,oe.y):(Se=me,Ne.onCurve||(oe.x,Ne.x,oe.y,Ne.y),me.onCurve||(Se={x:.5*(oe.x+me.x),y:.5*(oe.y+me.y)}),B.quadraticCurveTo(oe.x,oe.y,Se.x,Se.y))}B.closePath()}return B}function ln(P,B){if(B.isComposite)for(var W=0;W<B.components.length;W+=1){var $=B.components[W],Q=P.get($.glyphIndex);if(Q.getPath(),Q.points){var ie=void 0;if($.matchedPoints===void 0)ie=Gr(Q.points,$);else{if($.matchedPoints[0]>B.points.length-1||$.matchedPoints[1]>Q.points.length-1)throw Error("Matched points out of range in "+B.name);var oe=B.points[$.matchedPoints[0]],me=Q.points[$.matchedPoints[1]],$={xScale:$.xScale,scale01:$.scale01,scale10:$.scale10,yScale:$.yScale,dx:0,dy:0},me=Gr([me],$)[0];$.dx=oe.x-me.x,$.dy=oe.y-me.y,ie=Gr(Q.points,$)}B.points=B.points.concat(ie)}}return an(B.points)}(Rr.prototype=Nr.prototype={searchTag:Ur,binSearch:rn,getTable:function(P){var B=this.font.tables[this.tableName];return B=!B&&P?this.font.tables[this.tableName]=this.createDefaultTable():B},getScriptNames:function(){var P=this.getTable();return P?P.scripts.map(function(B){return B.tag}):[]},getDefaultScriptName:function(){var P=this.getTable();if(P){for(var B=!1,W=0;W<P.scripts.length;W++){var $=P.scripts[W].tag;if($==="DFLT")return $;$==="latn"&&(B=!0)}return B?"latn":void 0}},getScriptTable:function(P,B){var W,$=this.getTable(B);if($)return W=$.scripts,0<=($=Ur($.scripts,P=P||"DFLT"))?W[$].script:B?(W.splice(-1-$,0,B={tag:P,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),B.script):void 0},getLangSysTable:function(Q,B,W){var $,Q=this.getScriptTable(Q,W);if(Q)return B&&B!=="dflt"&&B!=="DFLT"?0<=($=Ur(Q.langSysRecords,B))?Q.langSysRecords[$].langSys:W?(Q.langSysRecords.splice(-1-$,0,W={tag:B,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),W.langSys):void 0:Q.defaultLangSys},getFeatureTable:function(P,B,W,$){if(P=this.getLangSysTable(P,B,$),P){for(var Q,ie=P.featureIndexes,oe=this.font.tables[this.tableName].features,me=0;me<ie.length;me++)if((Q=oe[ie[me]]).tag===W)return Q.feature;if($)return B=oe.length,L.assert(B===0||W>=oe[B-1].tag,"Features must be added in alphabetical order."),oe.push(Q={tag:W,feature:{params:0,lookupListIndexes:[]}}),ie.push(B),Q.feature}},getLookupTables:function(ie,B,W,$,Q){var ie=this.getFeatureTable(ie,B,W,Q),oe=[];if(ie){for(var me,Ee=ie.lookupListIndexes,Se=this.font.tables[this.tableName].lookups,Ne=0;Ne<Ee.length;Ne++)(me=Se[Ee[Ne]]).lookupType===$&&oe.push(me);if(oe.length===0&&Q)return B=Se.length,Se.push(me={lookupType:$,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Ee.push(B),[me]}return oe},getGlyphClass:function(P,B){switch(P.format){case 1:return P.startGlyph<=B&&B<P.startGlyph+P.classes.length?P.classes[B-P.startGlyph]:0;case 2:var W=nn(P.ranges,B);return W?W.classId:0}},getCoverageIndex:function(P,B){switch(P.format){case 1:var W=rn(P.glyphs,B);return 0<=W?W:-1;case 2:return W=nn(P.ranges,B),W?W.index+B-W.start:-1}},expandCoverage:function(P){if(P.format===1)return P.glyphs;for(var B=[],W=P.ranges,$=0;$<W.length;$++)for(var Q=W[$],ie=Q.start,oe=Q.end,me=ie;me<=oe;me++)B.push(me);return B}}).init=function(){var P=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(P)},Rr.prototype.getKerningValue=function(P,B,W){for(var $=0;$<P.length;$++)for(var Q=P[$].subtables,ie=0;ie<Q.length;ie++){var oe=Q[ie],me=this.getCoverageIndex(oe.coverage,B);if(!(me<0))switch(oe.posFormat){case 1:for(var Ee=oe.pairSets[me],Se=0;Se<Ee.length;Se++){var Ne=Ee[Se];if(Ne.secondGlyph===W)return Ne.value1&&Ne.value1.xAdvance||0}break;case 2:var De=this.getGlyphClass(oe.classDef1,B),Be=this.getGlyphClass(oe.classDef2,W),De=oe.classRecords[De][Be];return De.value1&&De.value1.xAdvance||0}}return 0},Rr.prototype.getKerningTables=function(P,B){if(this.font.tables.gpos)return this.getLookupTables(P,B,"kern",2)},(hr.prototype=Nr.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},hr.prototype.getSingle=function(P,B,W){for(var $=[],Q=this.getLookupTables(B,W,P,1),ie=0;ie<Q.length;ie++)for(var oe=Q[ie].subtables,me=0;me<oe.length;me++){var Ee=oe[me],Se=this.expandCoverage(Ee.coverage),Ne=void 0;if(Ee.substFormat===1)for(var Be=Ee.deltaGlyphId,Ne=0;Ne<Se.length;Ne++){var De=Se[Ne];$.push({sub:De,by:De+Be})}else{var Ce=Ee.substitute;for(Ne=0;Ne<Se.length;Ne++)$.push({sub:Se[Ne],by:Ce[Ne]})}}return $},hr.prototype.getAlternates=function(P,B,W){for(var $=[],Q=this.getLookupTables(B,W,P,3),ie=0;ie<Q.length;ie++)for(var oe=Q[ie].subtables,me=0;me<oe.length;me++)for(var Ee=oe[me],Se=this.expandCoverage(Ee.coverage),Ne=Ee.alternateSets,Be=0;Be<Se.length;Be++)$.push({sub:Se[Be],by:Ne[Be]});return $},hr.prototype.getLigatures=function(P,B,W){for(var $=[],Q=this.getLookupTables(B,W,P,4),ie=0;ie<Q.length;ie++)for(var oe=Q[ie].subtables,me=0;me<oe.length;me++)for(var Ee=oe[me],Se=this.expandCoverage(Ee.coverage),Ne=Ee.ligatureSets,Be=0;Be<Se.length;Be++)for(var De=Se[Be],Ce=Ne[Be],$e=0;$e<Ce.length;$e++){var ze=Ce[$e];$.push({sub:[De].concat(ze.components),by:ze.ligGlyph})}return $},hr.prototype.addSingle=function(P,B,W,$){W=sn(this.getLookupTables(W,$,P,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),L.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),$=B.sub,P=this.binSearch(W.coverage.glyphs,$),P<0&&(W.coverage.glyphs.splice(P=-1-P,0,$),W.substitute.splice(P,0,0)),W.substitute[P]=B.by},hr.prototype.addAlternate=function(P,B,W,$){W=sn(this.getLookupTables(W,$,P,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),L.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),$=B.sub,P=this.binSearch(W.coverage.glyphs,$),P<0&&(W.coverage.glyphs.splice(P=-1-P,0,$),W.alternateSets.splice(P,0,0)),W.alternateSets[P]=B.by},hr.prototype.addLigature=function(ie,Ee,me,Q){var me=this.getLookupTables(me,Q,ie,4,!0)[0],Q=me.subtables[0],ie=(Q||(me.subtables[0]=Q={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),L.assert(Q.coverage.format===1,"Ligature: unable to modify coverage table format "+Q.coverage.format),Ee.sub[0]),oe=Ee.sub.slice(1),me={ligGlyph:Ee.by,components:oe},Ee=this.binSearch(Q.coverage.glyphs,ie);if(0<=Ee){for(var Se=Q.ligatureSets[Ee],Ne=0;Ne<Se.length;Ne++)if(function(Be,De){var Ce=Be.length;if(Ce===De.length){for(var $e=0;$e<Ce;$e++)if(Be[$e]!==De[$e])return;return 1}}(Se[Ne].components,oe))return;Se.push(me)}else Q.coverage.glyphs.splice(Ee=-1-Ee,0,ie),Q.ligatureSets.splice(Ee,0,[me])},hr.prototype.getFeature=function(P,B,W){if(/ss\d\d/.test(P))return this.getSingle(P,B,W);switch(P){case"aalt":case"salt":return this.getSingle(P,B,W).concat(this.getAlternates(P,B,W));case"dlig":case"liga":case"rlig":return this.getLigatures(P,B,W)}},hr.prototype.add=function(P,B,W,$){if(/ss\d\d/.test(P))return this.addSingle(P,B,W,$);switch(P){case"aalt":case"salt":return typeof B.by=="number"?this.addSingle(P,B,W,$):this.addAlternate(P,B,W,$);case"dlig":case"liga":case"rlig":return this.addLigature(P,B,W,$)}};var cn={getPath:an,parse:function(P,B,W,$){for(var Q=new lt.GlyphSet($),ie=0;ie<W.length-1;ie+=1){var oe=W[ie];oe!==W[ie+1]?Q.push(ie,lt.ttfGlyphLoader($,ie,kn,P,B+oe,ln)):Q.push(ie,lt.glyphLoader($,ie))}return Q}};function zr(P){this.font=P,this.getCommands=function(B){return cn.getPath(B).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Tn(P){return P}function un(P){return Math.sign(P)*Math.round(Math.abs(P))}function Cn(P){return Math.sign(P)*Math.round(Math.abs(2*P))/2}function An(P){return Math.sign(P)*(Math.round(Math.abs(P)+.5)-.5)}function jn(P){return Math.sign(P)*Math.ceil(Math.abs(P))}function Pn(P){return Math.sign(P)*Math.floor(Math.abs(P))}function hn(P){var B=this.srPeriod,W=this.srPhase,$=1;return P<0&&(P=-P,$=-1),P+=this.srThreshold-W,P=Math.trunc(P/B)*B,(P+=W)<0?W*$:P*$}var dr={x:1,y:0,axis:"x",distance:function(P,B,W,$){return(W?P.xo:P.x)-($?B.xo:B.x)},interpolate:function(P,B,W,$){var Q,ie,oe,me,Ee,Se,Ne;if(!$||$===this)return Q=P.xo-B.xo,ie=P.xo-W.xo,Ee=B.x-B.xo,Se=W.x-W.xo,(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?void(P.x=P.xo+(Ee+Se)/2):void(P.x=P.xo+(Ee*me+Se*oe)/Ne);Q=$.distance(P,B,!0,!0),ie=$.distance(P,W,!0,!0),Ee=$.distance(B,B,!1,!0),Se=$.distance(W,W,!1,!0),(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?dr.setRelative(P,P,(Ee+Se)/2,$,!0):dr.setRelative(P,P,(Ee*me+Se*oe)/Ne,$,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(P,B,W,$,Q){var ie,oe;$&&$!==this?(ie=Q?B.xo:B.x,oe=Q?B.yo:B.y,ie+=W*$.x,oe+=W*$.y,P.x=ie+(P.y-oe)/$.normalSlope):P.x=(Q?B.xo:B.x)+W},slope:0,touch:function(P){P.xTouched=!0},touched:function(P){return P.xTouched},untouch:function(P){P.xTouched=!1}},pr={x:0,y:1,axis:"y",distance:function(P,B,W,$){return(W?P.yo:P.y)-($?B.yo:B.y)},interpolate:function(P,B,W,$){var Q,ie,oe,me,Ee,Se,Ne;if(!$||$===this)return Q=P.yo-B.yo,ie=P.yo-W.yo,Ee=B.y-B.yo,Se=W.y-W.yo,(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?void(P.y=P.yo+(Ee+Se)/2):void(P.y=P.yo+(Ee*me+Se*oe)/Ne);Q=$.distance(P,B,!0,!0),ie=$.distance(P,W,!0,!0),Ee=$.distance(B,B,!1,!0),Se=$.distance(W,W,!1,!0),(Ne=(oe=Math.abs(Q))+(me=Math.abs(ie)))===0?pr.setRelative(P,P,(Ee+Se)/2,$,!0):pr.setRelative(P,P,(Ee*me+Se*oe)/Ne,$,!0)},normalSlope:0,setRelative:function(P,B,W,$,Q){var ie,oe;$&&$!==this?(ie=Q?B.xo:B.x,oe=Q?B.yo:B.y,ie+=W*$.x,oe+=W*$.y,P.y=oe+$.normalSlope*(P.x-ie)):P.y=(Q?B.yo:B.y)+W},slope:Number.POSITIVE_INFINITY,touch:function(P){P.yTouched=!0},touched:function(P){return P.yTouched},untouch:function(P){P.yTouched=!1}};function wr(P,B){this.x=P,this.y=B,this.axis=void 0,this.slope=B/P,this.normalSlope=-P/B,Object.freeze(this)}function Pr(P,B){var W=Math.sqrt(P*P+B*B);return B/=W,(P/=W)===1&&B===0?dr:P===0&&B===1?pr:new wr(P,B)}function mr(P,B,W,$){this.x=this.xo=Math.round(64*P)/64,this.y=this.yo=Math.round(64*B)/64,this.lastPointOfContour=W,this.onCurve=$,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(dr),Object.freeze(pr),wr.prototype.distance=function(P,B,W,$){return this.x*dr.distance(P,B,W,$)+this.y*pr.distance(P,B,W,$)},wr.prototype.interpolate=function(P,Q,ie,$){var oe=$.distance(P,Q,!0,!0),me=$.distance(P,ie,!0,!0),Q=$.distance(Q,Q,!1,!0),ie=$.distance(ie,ie,!1,!0),oe=Math.abs(oe),me=Math.abs(me),Ee=oe+me;Ee===0?this.setRelative(P,P,(Q+ie)/2,$,!0):this.setRelative(P,P,(Q*me+ie*oe)/Ee,$,!0)},wr.prototype.setRelative=function(P,ie,Ee,Se,me){var oe=me?ie.xo:ie.x,me=me?ie.yo:ie.y,ie=oe+Ee*(Se=Se||this).x,oe=me+Ee*Se.y,me=Se.normalSlope,Ee=this.slope,Se=P.x,Ne=P.y;P.x=(Ee*Se-me*ie+oe-Ne)/(Ee-me),P.y=Ee*(P.x-Se)+Ne},wr.prototype.touch=function(P){P.xTouched=!0,P.yTouched=!0},mr.prototype.nextTouched=function(P){for(var B=this.nextPointOnContour;!P.touched(B)&&B!==this;)B=B.nextPointOnContour;return B},mr.prototype.prevTouched=function(P){for(var B=this.prevPointOnContour;!P.touched(B)&&B!==this;)B=B.prevPointOnContour;return B};var bt=Object.freeze(new mr(0,0)),Wr={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function ur(P,B){switch(this.env=P,this.stack=[],this.prog=B,P){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=dr,this.round=un}}function Lr(P){for(var B=P.tZone=new Array(P.gZone.length),W=0;W<B.length;W++)B[W]=new mr(0,0)}function dn(P,B){var W,$=P.prog,Q=P.ip,ie=1;do if((W=$[++Q])===88)ie++;else if(W===89)ie--;else if(W===64)Q+=$[Q+1]+1;else if(W===65)Q+=2*$[Q+1]+1;else if(176<=W&&W<=183)Q+=W-176+1;else if(184<=W&&W<=191)Q+=2*(W-184+1);else if(B&&ie===1&&W===27)break;while(0<ie);P.ip=Q}function qr(P,B){f.DEBUG&&console.log(B.step,"SVTCA["+P.axis+"]"),B.fv=B.pv=B.dpv=P}function fn(P,B){f.DEBUG&&console.log(B.step,"SPVTCA["+P.axis+"]"),B.pv=B.dpv=P}function pn(P,B){f.DEBUG&&console.log(B.step,"SFVTCA["+P.axis+"]"),B.fv=P}function mn(P,B){var W,Q=B.stack,$=Q.pop(),Q=Q.pop(),ie=B.z2[$],oe=B.z1[Q];f.DEBUG&&console.log("SPVTL["+P+"]",$,Q),$=P?(W=ie.y-oe.y,oe.x-ie.x):(W=oe.x-ie.x,oe.y-ie.y),B.pv=B.dpv=Pr(W,$)}function gn(P,B){var W,Q=B.stack,$=Q.pop(),Q=Q.pop(),ie=B.z2[$],oe=B.z1[Q];f.DEBUG&&console.log("SFVTL["+P+"]",$,Q),$=P?(W=ie.y-oe.y,oe.x-ie.x):(W=oe.x-ie.x,oe.y-ie.y),B.fv=Pr(W,$)}function Hr(P){f.DEBUG&&console.log(P.step,"POP[]"),P.stack.pop()}function Mn(P,B){var W=B.stack.pop(),$=B.z0[W],Q=B.fv,ie=B.pv,oe=(f.DEBUG&&console.log(B.step,"MDAP["+P+"]",W),ie.distance($,bt));P&&(oe=B.round(oe)),Q.setRelative($,bt,oe,ie),Q.touch($),B.rp0=B.rp1=W}function yn(P,B){var W,$,Q,ie=B.z2,oe=ie.length-2;f.DEBUG&&console.log(B.step,"IUP["+P.axis+"]");for(var me=0;me<oe;me++)W=ie[me],P.touched(W)||($=W.prevTouched(P))!==W&&($===(Q=W.nextTouched(P))&&P.setRelative(W,W,P.distance($,$,!1,!0),P,!0),P.interpolate(W,$,Q,P))}function vn(P,B){for(var W=B.stack,$=P?B.rp1:B.rp2,Q=(P?B.z0:B.z1)[$],ie=B.fv,oe=B.pv,me=B.loop,Ee=B.z2;me--;){var Se=W.pop(),Ne=Ee[Se],Be=oe.distance(Q,Q,!1,!0);ie.setRelative(Ne,Ne,Be,oe),ie.touch(Ne),f.DEBUG&&console.log(B.step,(1<B.loop?"loop "+(B.loop-me)+": ":"")+"SHP["+(P?"rp1":"rp2")+"]",Se)}B.loop=1}function In(P,B){for(var W=B.stack,oe=P?B.rp1:B.rp2,$=(P?B.z0:B.z1)[oe],Q=B.fv,ie=B.pv,oe=W.pop(),me=B.z2[B.contours[oe]],Ee=me,Se=(f.DEBUG&&console.log(B.step,"SHC["+P+"]",oe),ie.distance($,$,!1,!0));Ee!==$&&Q.setRelative(Ee,Ee,Se,ie),(Ee=Ee.nextPointOnContour)!==me;);}function _n(P,B){var W,$,me=B.stack,Q=P?B.rp1:B.rp2,Q=(P?B.z0:B.z1)[Q],ie=B.fv,oe=B.pv,me=me.pop();switch(f.DEBUG&&console.log(B.step,"SHZ["+P+"]",me),me){case 0:W=B.tZone;break;case 1:W=B.gZone;break;default:throw new Error("Invalid zone")}for(var Ee=oe.distance(Q,Q,!1,!0),Se=W.length-2,Ne=0;Ne<Se;Ne++)$=W[Ne],ie.setRelative($,$,Ee,oe)}function bn(P,B){var $=B.stack,W=$.pop()/64,$=$.pop(),Q=B.z1[$],ie=B.z0[B.rp0],oe=B.fv,me=B.pv;oe.setRelative(Q,ie,W,me),oe.touch(Q),f.DEBUG&&console.log(B.step,"MSIRP["+P+"]",W,$),B.rp1=B.rp0,B.rp2=$,P&&(B.rp0=$)}function Xr(P,B){var W=B.stack,me=W.pop(),W=W.pop(),$=B.z0[W],Q=B.fv,ie=B.pv,oe=B.cvt[me],me=(f.DEBUG&&console.log(B.step,"MIAP["+P+"]",me,"(",oe,")",W),ie.distance($,bt));P&&(Math.abs(me-oe)<B.cvCutIn&&(me=oe),me=B.round(me)),Q.setRelative($,bt,me,ie),B.zp0===0&&($.xo=$.x,$.yo=$.y),Q.touch($),B.rp0=B.rp1=W}function wn(P,B){var W=B.stack,$=W.pop(),Q=B.z2[$];f.DEBUG&&console.log(B.step,"GC["+P+"]",$),W.push(64*B.dpv.distance(Q,bt,P,!1))}function xn(P,B){var $=B.stack,W=$.pop(),$=$.pop(),Q=B.z1[W],ie=B.z0[$],ie=B.dpv.distance(ie,Q,P,P);f.DEBUG&&console.log(B.step,"MD["+P+"]",W,$,"->",ie),B.stack.push(Math.round(64*ie))}function $r(P,B){var W=B.stack,$=W.pop(),Q=B.fv,ie=B.pv,oe=B.ppem,me=B.deltaBase+16*(P-1),Ee=B.deltaShift,Se=B.z0;f.DEBUG&&console.log(B.step,"DELTAP["+P+"]",$,W);for(var Ne=0;Ne<$;Ne++){var Be=W.pop(),De=W.pop();me+((240&De)>>4)===oe&&(0<=(De=(15&De)-8)&&De++,f.DEBUG&&console.log(B.step,"DELTAPFIX",Be,"by",De*Ee),Be=Se[Be],Q.setRelative(Be,Be,De*Ee,ie))}}function Fr(P,B){var W=B.stack,$=W.pop();f.DEBUG&&console.log(B.step,"ROUND[]"),W.push(64*B.round($/64))}function Yr(P,B){var W=B.stack,$=W.pop(),Q=B.ppem,ie=B.deltaBase+16*(P-1),oe=B.deltaShift;f.DEBUG&&console.log(B.step,"DELTAC["+P+"]",$,W);for(var me=0;me<$;me++){var Ee=W.pop(),Se=W.pop();ie+((240&Se)>>4)===Q&&(0<=(Se=(15&Se)-8)&&Se++,Se=Se*oe,f.DEBUG&&console.log(B.step,"DELTACFIX",Ee,"by",Se),B.cvt[Ee]+=Se)}}function Zr(P,B){var W,Q=B.stack,$=Q.pop(),Q=Q.pop(),ie=B.z2[$],oe=B.z1[Q];f.DEBUG&&console.log(B.step,"SDPVTL["+P+"]",$,Q),$=P?(W=ie.y-oe.y,oe.x-ie.x):(W=oe.x-ie.x,oe.y-ie.y),B.dpv=Pr(W,$)}function yr(P,B){var W=B.stack,$=B.prog,Q=B.ip;f.DEBUG&&console.log(B.step,"PUSHB["+P+"]");for(var ie=0;ie<P;ie++)W.push($[++Q]);B.ip=Q}function vr(P,B){var W=B.ip,$=B.prog,Q=B.stack;f.DEBUG&&console.log(B.ip,"PUSHW["+P+"]");for(var ie=0;ie<P;ie++){var oe=$[++W]<<8|$[++W];32768&oe&&(oe=-(1+(65535^oe))),Q.push(oe)}B.ip=W}function ct(P,B,W,$,Q,ie){var oe,me,Se=ie.stack,Ee=P&&Se.pop(),Se=Se.pop(),Ne=ie.rp0,Ne=ie.z0[Ne],Be=ie.z1[Se],De=ie.minDis,Ce=ie.fv,$e=ie.dpv,ze=oe=$e.distance(Be,Ne,!0,!0),He=0<=ze?1:-1;ze=Math.abs(ze),P&&(me=ie.cvt[Ee],$&&Math.abs(ze-me)<ie.cvCutIn&&(ze=me)),W&&ze<De&&(ze=De),$&&(ze=ie.round(ze)),Ce.setRelative(Be,Ne,He*ze,$e),Ce.touch(Be),f.DEBUG&&console.log(ie.step,(P?"MIRP[":"MDRP[")+(B?"M":"m")+(W?">":"_")+($?"R":"_")+(Q===0?"Gr":Q===1?"Bl":Q===2?"Wh":"")+"]",P?Ee+"("+ie.cvt[Ee]+","+me+")":"",Se,"(d =",oe,"->",He*ze,")"),ie.rp1=ie.rp0,ie.rp2=Se,B&&(ie.rp0=Se)}zr.prototype.exec=function(P,B){if(typeof B!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var W=this.font,$=this._prepState;if(!$||$.ppem!==B){var Q=this._fpgmState;if(!Q){ur.prototype=Wr,(Q=this._fpgmState=new ur("fpgm",W.tables.fpgm)).funcs=[],Q.font=W,f.DEBUG&&(console.log("---EXEC FPGM---"),Q.step=-1);try{xr(Q)}catch(Se){return console.log("Hinting error in FPGM:"+Se),void(this._errorState=3)}}ur.prototype=Q,($=this._prepState=new ur("prep",W.tables.prep)).ppem=B;var ie=W.tables.cvt;if(ie)for(var oe=$.cvt=new Array(ie.length),me=B/W.unitsPerEm,Ee=0;Ee<ie.length;Ee++)oe[Ee]=ie[Ee]*me;else $.cvt=[];f.DEBUG&&(console.log("---EXEC PREP---"),$.step=-1);try{xr($)}catch(Se){this._errorState<2&&console.log("Hinting error in PREP:"+Se),this._errorState=2}}if(!(1<this._errorState))try{return On(P,$)}catch(Se){this._errorState<1&&(console.log("Hinting error:"+Se),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var On=function(P,B){var W=B.ppem/B.font.unitsPerEm,$=W,Q=P.components;if(ur.prototype=B,Q){for(var ie=B.font,oe=[],me=[],Ee=0;Ee<Q.length;Ee++){var Se=Q[Ee],Ne=ie.glyphs.get(Se.glyphIndex),Be=new ur("glyf",Ne.instructions);f.DEBUG&&(console.log("---EXEC COMP "+Ee+"---"),Be.step=-1),Sn(Ne,Be,W,$);for(var De=Math.round(Se.dx*W),Ce=Math.round(Se.dy*$),$e=Be.gZone,ze=Be.contours,He=0;He<$e.length;He++){var Ve=$e[He];Ve.xTouched=Ve.yTouched=!1,Ve.xo=Ve.x=Ve.x+De,Ve.yo=Ve.y=Ve.y+Ce}var Ue=oe.length;oe.push.apply(oe,$e);for(var ut=0;ut<ze.length;ut++)me.push(ze[ut]+Ue)}P.instructions&&!Be.inhibitGridFit&&((Be=new ur("glyf",P.instructions)).gZone=Be.z0=Be.z1=Be.z2=oe,Be.contours=me,oe.push(new mr(0,0),new mr(Math.round(P.advanceWidth*W),0)),f.DEBUG&&(console.log("---EXEC COMPOSITE---"),Be.step=-1),xr(Be),oe.length-=2)}else Be=new ur("glyf",P.instructions),f.DEBUG&&(console.log("---EXEC GLYPH---"),Be.step=-1),Sn(P,Be,W,$),oe=Be.gZone;return oe},Sn=function(P,B,W,$){for(var Q,ie,oe,me=P.points||[],Ee=me.length,Se=B.gZone=B.z0=B.z1=B.z2=[],Ne=B.contours=[],Be=0;Be<Ee;Be++)Q=me[Be],Se[Be]=new mr(Q.x*W,Q.y*$,Q.lastPointOfContour,Q.onCurve);for(var De=0;De<Ee;De++)Q=Se[De],ie||(ie=Q,Ne.push(De)),Q.lastPointOfContour?((Q.nextPointOnContour=ie).prevPointOnContour=Q,ie=void 0):(oe=Se[De+1],(Q.nextPointOnContour=oe).prevPointOnContour=Q);if(!B.inhibitGridFit){if(f.DEBUG){console.log("PROCESSING GLYPH",B.stack);for(var Ce=0;Ce<Ee;Ce++)console.log(Ce,Se[Ce].x,Se[Ce].y)}if(Se.push(new mr(0,0),new mr(Math.round(P.advanceWidth*W),0)),xr(B),Se.length-=2,f.DEBUG){console.log("FINISHED GLYPH",B.stack);for(var $e=0;$e<Ee;$e++)console.log($e,Se[$e].x,Se[$e].y)}}},xr=function(P){var B=P.prog;if(B){var W,$=B.length;for(P.ip=0;P.ip<$;P.ip++){if(f.DEBUG&&P.step++,!(W=Nn[B[P.ip]]))throw new Error("unknown instruction: 0x"+Number(B[P.ip]).toString(16));W(P)}}},Nn=[qr.bind(void 0,pr),qr.bind(void 0,dr),fn.bind(void 0,pr),fn.bind(void 0,dr),pn.bind(void 0,pr),pn.bind(void 0,dr),mn.bind(void 0,0),mn.bind(void 0,1),gn.bind(void 0,0),gn.bind(void 0,1),function(P){var B=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"SPVFS[]",B,W),P.pv=P.dpv=Pr(W,B)},function(P){var B=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"SPVFS[]",B,W),P.fv=Pr(W,B)},function(P){var B=P.stack,W=P.pv;f.DEBUG&&console.log(P.step,"GPV[]"),B.push(16384*W.x),B.push(16384*W.y)},function(P){var B=P.stack,W=P.fv;f.DEBUG&&console.log(P.step,"GFV[]"),B.push(16384*W.x),B.push(16384*W.y)},function(P){P.fv=P.pv,f.DEBUG&&console.log(P.step,"SFVTPV[]")},function(B){var W=(oe=B.stack).pop(),$=oe.pop(),Q=oe.pop(),ie=oe.pop(),oe=oe.pop(),Ee=B.z0,Ne=B.z1,me=Ee[W],Ee=Ee[$],Se=Ne[Q],Ne=Ne[ie],B=B.z2[oe],W=(f.DEBUG&&console.log("ISECT[], ",W,$,Q,ie,oe),me.x),$=me.y,Q=Ee.x,ie=Ee.y,oe=Se.x,me=Se.y,Ee=Ne.x,Se=Ne.y,Ne=(W-Q)*(me-Se)-($-ie)*(oe-Ee),Be=W*ie-$*Q,De=oe*Se-me*Ee;B.x=(Be*(oe-Ee)-De*(W-Q))/Ne,B.y=(Be*(me-Se)-De*($-ie))/Ne},function(P){P.rp0=P.stack.pop(),f.DEBUG&&console.log(P.step,"SRP0[]",P.rp0)},function(P){P.rp1=P.stack.pop(),f.DEBUG&&console.log(P.step,"SRP1[]",P.rp1)},function(P){P.rp2=P.stack.pop(),f.DEBUG&&console.log(P.step,"SRP2[]",P.rp2)},function(P){var B=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZP0[]",B),P.zp0=B){case 0:P.tZone||Lr(P),P.z0=P.tZone;break;case 1:P.z0=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var B=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZP1[]",B),P.zp1=B){case 0:P.tZone||Lr(P),P.z1=P.tZone;break;case 1:P.z1=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var B=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZP2[]",B),P.zp2=B){case 0:P.tZone||Lr(P),P.z2=P.tZone;break;case 1:P.z2=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var B=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SZPS[]",B),P.zp0=P.zp1=P.zp2=B){case 0:P.tZone||Lr(P),P.z0=P.z1=P.z2=P.tZone;break;case 1:P.z0=P.z1=P.z2=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){P.loop=P.stack.pop(),f.DEBUG&&console.log(P.step,"SLOOP[]",P.loop)},function(P){f.DEBUG&&console.log(P.step,"RTG[]"),P.round=un},function(P){f.DEBUG&&console.log(P.step,"RTHG[]"),P.round=An},function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"SMD[]",B),P.minDis=B/64},function(P){f.DEBUG&&console.log(P.step,"ELSE[]"),dn(P,!1)},function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"JMPR[]",B),P.ip+=B-1},function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"SCVTCI[]",B),P.cvCutIn=B/64},void 0,void 0,function(P){var B=P.stack;f.DEBUG&&console.log(P.step,"DUP[]"),B.push(B[B.length-1])},Hr,function(P){f.DEBUG&&console.log(P.step,"CLEAR[]"),P.stack.length=0},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"SWAP[]"),B.push(W),B.push($)},function(P){var B=P.stack;f.DEBUG&&console.log(P.step,"DEPTH[]"),B.push(B.length)},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"CINDEX[]",W),B.push(B[B.length-W])},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"MINDEX[]",W),B.push(B.splice(B.length-W,1)[0])},void 0,void 0,void 0,function(P){var B=($=P.stack).pop(),W=$.pop(),$=(f.DEBUG&&console.log(P.step,"LOOPCALL[]",B,W),P.ip),Q=P.prog;P.prog=P.funcs[B];for(var ie=0;ie<W;ie++)xr(P),f.DEBUG&&console.log(++P.step,ie+1<W?"next loopcall":"done loopcall",ie);P.ip=$,P.prog=Q},function(P){var B=P.stack.pop(),W=(f.DEBUG&&console.log(P.step,"CALL[]",B),P.ip),$=P.prog;P.prog=P.funcs[B],xr(P),P.ip=W,P.prog=$,f.DEBUG&&console.log(++P.step,"returning from",B)},function(P){if(P.env!=="fpgm")throw new Error("FDEF not allowed here");var $=P.stack,B=P.prog,W=P.ip,$=$.pop(),Q=W;for(f.DEBUG&&console.log(P.step,"FDEF[]",$);B[++W]!==45;);P.ip=W,P.funcs[$]=B.slice(Q+1,W)},void 0,Mn.bind(void 0,0),Mn.bind(void 0,1),yn.bind(void 0,pr),yn.bind(void 0,dr),vn.bind(void 0,0),vn.bind(void 0,1),In.bind(void 0,0),In.bind(void 0,1),_n.bind(void 0,0),_n.bind(void 0,1),function(P){for(var B=P.stack,W=P.loop,$=P.fv,Q=B.pop()/64,ie=P.z2;W--;){var oe=B.pop(),me=ie[oe];f.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-W)+": ":"")+"SHPIX[]",oe,Q),$.setRelative(me,me,Q),$.touch(me)}P.loop=1},function(P){for(var B=P.stack,W=P.rp1,$=P.rp2,Q=P.loop,ie=P.z0[W],oe=P.z1[$],me=P.fv,Ee=P.dpv,Se=P.z2;Q--;){var Ne=B.pop(),Be=Se[Ne];f.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-Q)+": ":"")+"IP[]",Ne,W,"<->",$),me.interpolate(Be,ie,oe,Ee),me.touch(Be)}P.loop=1},bn.bind(void 0,0),bn.bind(void 0,1),function(P){for(var B=P.stack,W=P.rp0,$=P.z0[W],Q=P.loop,ie=P.fv,oe=P.pv,me=P.z1;Q--;){var Ee=B.pop(),Se=me[Ee];f.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-Q)+": ":"")+"ALIGNRP[]",Ee),ie.setRelative(Se,$,0,oe),ie.touch(Se)}P.loop=1},function(P){f.DEBUG&&console.log(P.step,"RTDG[]"),P.round=Cn},Xr.bind(void 0,0),Xr.bind(void 0,1),function(P){var B=P.prog,W=P.ip,$=P.stack,Q=B[++W];f.DEBUG&&console.log(P.step,"NPUSHB[]",Q);for(var ie=0;ie<Q;ie++)$.push(B[++W]);P.ip=W},function(P){var B=P.ip,W=P.prog,$=P.stack,Q=W[++B];f.DEBUG&&console.log(P.step,"NPUSHW[]",Q);for(var ie=0;ie<Q;ie++){var oe=W[++B]<<8|W[++B];32768&oe&&(oe=-(1+(65535^oe))),$.push(oe)}P.ip=B},function(P){var $=P.stack,B=(B=P.store)||(P.store=[]),W=$.pop(),$=$.pop();f.DEBUG&&console.log(P.step,"WS",W,$),B[$]=W},function(Q){var B=Q.stack,W=Q.store,$=B.pop(),Q=(f.DEBUG&&console.log(Q.step,"RS",$),W&&W[$]||0);B.push(Q)},function(P){var B=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"WCVTP",B,W),P.cvt[W]=B/64},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"RCVT",W),B.push(64*P.cvt[W])},wn.bind(void 0,0),wn.bind(void 0,1),void 0,xn.bind(void 0,0),xn.bind(void 0,1),function(P){f.DEBUG&&console.log(P.step,"MPPEM[]"),P.stack.push(P.ppem)},void 0,function(P){f.DEBUG&&console.log(P.step,"FLIPON[]"),P.autoFlip=!0},void 0,void 0,function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"LT[]",W,$),B.push($<W?1:0)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"LTEQ[]",W,$),B.push($<=W?1:0)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"GT[]",W,$),B.push(W<$?1:0)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"GTEQ[]",W,$),B.push(W<=$?1:0)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"EQ[]",W,$),B.push(W===$?1:0)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"NEQ[]",W,$),B.push(W!==$?1:0)},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"ODD[]",W),B.push(Math.trunc(W)%2?1:0)},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"EVEN[]",W),B.push(Math.trunc(W)%2?0:1)},function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"IF[]",B),B||(dn(P,!0),f.DEBUG&&console.log(P.step,"EIF[]"))},function(P){f.DEBUG&&console.log(P.step,"EIF[]")},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"AND[]",W,$),B.push(W&&$?1:0)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"OR[]",W,$),B.push(W||$?1:0)},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"NOT[]",W),B.push(W?0:1)},$r.bind(void 0,1),function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"SDB[]",B),P.deltaBase=B},function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"SDS[]",B),P.deltaShift=Math.pow(.5,B)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"ADD[]",W,$),B.push($+W)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"SUB[]",W,$),B.push($-W)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"DIV[]",W,$),B.push(64*$/W)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"MUL[]",W,$),B.push($*W/64)},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"ABS[]",W),B.push(Math.abs(W))},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"NEG[]",W),B.push(-W)},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"FLOOR[]",W),B.push(64*Math.floor(W/64))},function(P){var B=P.stack,W=B.pop();f.DEBUG&&console.log(P.step,"CEILING[]",W),B.push(64*Math.ceil(W/64))},Fr.bind(void 0,0),Fr.bind(void 0,1),Fr.bind(void 0,2),Fr.bind(void 0,3),void 0,void 0,void 0,void 0,function(P){var B=(W=P.stack).pop(),W=W.pop();f.DEBUG&&console.log(P.step,"WCVTF[]",B,W),P.cvt[W]=B*P.ppem/P.font.unitsPerEm},$r.bind(void 0,2),$r.bind(void 0,3),Yr.bind(void 0,1),Yr.bind(void 0,2),Yr.bind(void 0,3),function(P){var B,W=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"SROUND[]",W),P.round=hn,192&W){case 0:B=.5;break;case 64:B=1;break;case 128:B=2;break;default:throw new Error("invalid SROUND value")}switch(P.srPeriod=B,48&W){case 0:P.srPhase=0;break;case 16:P.srPhase=.25*B;break;case 32:P.srPhase=.5*B;break;case 48:P.srPhase=.75*B;break;default:throw new Error("invalid SROUND value")}P.srThreshold=(W&=15)===0?0:(W/8-.5)*B},function(P){var B,W=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"S45ROUND[]",W),P.round=hn,192&W){case 0:B=Math.sqrt(2)/2;break;case 64:B=Math.sqrt(2);break;case 128:B=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(P.srPeriod=B,48&W){case 0:P.srPhase=0;break;case 16:P.srPhase=.25*B;break;case 32:P.srPhase=.5*B;break;case 48:P.srPhase=.75*B;break;default:throw new Error("invalid S45ROUND value")}P.srThreshold=(W&=15)===0?0:(W/8-.5)*B},void 0,void 0,function(P){f.DEBUG&&console.log(P.step,"ROFF[]"),P.round=Tn},void 0,function(P){f.DEBUG&&console.log(P.step,"RUTG[]"),P.round=jn},function(P){f.DEBUG&&console.log(P.step,"RDTG[]"),P.round=Pn},Hr,Hr,void 0,void 0,void 0,void 0,void 0,function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"SCANCTRL[]",B)},Zr.bind(void 0,0),Zr.bind(void 0,1),function(P){var B=P.stack,W=B.pop(),$=0;f.DEBUG&&console.log(P.step,"GETINFO[]",W),1&W&&($=35),32&W&&($|=4096),B.push($)},void 0,function(P){var B=P.stack,W=B.pop(),$=B.pop(),Q=B.pop();f.DEBUG&&console.log(P.step,"ROLL[]"),B.push($),B.push(W),B.push(Q)},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"MAX[]",W,$),B.push(Math.max($,W))},function(P){var B=P.stack,W=B.pop(),$=B.pop();f.DEBUG&&console.log(P.step,"MIN[]",W,$),B.push(Math.min($,W))},function(P){var B=P.stack.pop();f.DEBUG&&console.log(P.step,"SCANTYPE[]",B)},function(P){var B=P.stack.pop(),W=P.stack.pop();switch(f.DEBUG&&console.log(P.step,"INSTCTRL[]",B,W),B){case 1:return void(P.inhibitGridFit=!!W);case 2:return void(P.ignoreCvt=!!W);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,yr.bind(void 0,1),yr.bind(void 0,2),yr.bind(void 0,3),yr.bind(void 0,4),yr.bind(void 0,5),yr.bind(void 0,6),yr.bind(void 0,7),yr.bind(void 0,8),vr.bind(void 0,1),vr.bind(void 0,2),vr.bind(void 0,3),vr.bind(void 0,4),vr.bind(void 0,5),vr.bind(void 0,6),vr.bind(void 0,7),vr.bind(void 0,8),ct.bind(void 0,0,0,0,0,0),ct.bind(void 0,0,0,0,0,1),ct.bind(void 0,0,0,0,0,2),ct.bind(void 0,0,0,0,0,3),ct.bind(void 0,0,0,0,1,0),ct.bind(void 0,0,0,0,1,1),ct.bind(void 0,0,0,0,1,2),ct.bind(void 0,0,0,0,1,3),ct.bind(void 0,0,0,1,0,0),ct.bind(void 0,0,0,1,0,1),ct.bind(void 0,0,0,1,0,2),ct.bind(void 0,0,0,1,0,3),ct.bind(void 0,0,0,1,1,0),ct.bind(void 0,0,0,1,1,1),ct.bind(void 0,0,0,1,1,2),ct.bind(void 0,0,0,1,1,3),ct.bind(void 0,0,1,0,0,0),ct.bind(void 0,0,1,0,0,1),ct.bind(void 0,0,1,0,0,2),ct.bind(void 0,0,1,0,0,3),ct.bind(void 0,0,1,0,1,0),ct.bind(void 0,0,1,0,1,1),ct.bind(void 0,0,1,0,1,2),ct.bind(void 0,0,1,0,1,3),ct.bind(void 0,0,1,1,0,0),ct.bind(void 0,0,1,1,0,1),ct.bind(void 0,0,1,1,0,2),ct.bind(void 0,0,1,1,0,3),ct.bind(void 0,0,1,1,1,0),ct.bind(void 0,0,1,1,1,1),ct.bind(void 0,0,1,1,1,2),ct.bind(void 0,0,1,1,1,3),ct.bind(void 0,1,0,0,0,0),ct.bind(void 0,1,0,0,0,1),ct.bind(void 0,1,0,0,0,2),ct.bind(void 0,1,0,0,0,3),ct.bind(void 0,1,0,0,1,0),ct.bind(void 0,1,0,0,1,1),ct.bind(void 0,1,0,0,1,2),ct.bind(void 0,1,0,0,1,3),ct.bind(void 0,1,0,1,0,0),ct.bind(void 0,1,0,1,0,1),ct.bind(void 0,1,0,1,0,2),ct.bind(void 0,1,0,1,0,3),ct.bind(void 0,1,0,1,1,0),ct.bind(void 0,1,0,1,1,1),ct.bind(void 0,1,0,1,1,2),ct.bind(void 0,1,0,1,1,3),ct.bind(void 0,1,1,0,0,0),ct.bind(void 0,1,1,0,0,1),ct.bind(void 0,1,1,0,0,2),ct.bind(void 0,1,1,0,0,3),ct.bind(void 0,1,1,0,1,0),ct.bind(void 0,1,1,0,1,1),ct.bind(void 0,1,1,0,1,2),ct.bind(void 0,1,1,0,1,3),ct.bind(void 0,1,1,1,0,0),ct.bind(void 0,1,1,1,0,1),ct.bind(void 0,1,1,1,0,2),ct.bind(void 0,1,1,1,0,3),ct.bind(void 0,1,1,1,1,0),ct.bind(void 0,1,1,1,1,1),ct.bind(void 0,1,1,1,1,2),ct.bind(void 0,1,1,1,1,3)],Kt=Array.from||function(P){return P.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function jt(P){(P=P||{}).empty||(ar(P.familyName,"When creating a new Font object, familyName is required."),ar(P.styleName,"When creating a new Font object, styleName is required."),ar(P.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ar(P.ascender,"When creating a new Font object, ascender is required."),ar(P.descender,"When creating a new Font object, descender is required."),ar(P.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:P.familyName||" "},fontSubfamily:{en:P.styleName||" "},fullName:{en:P.fullName||P.familyName+" "+P.styleName},postScriptName:{en:P.postScriptName||(P.familyName+P.styleName).replace(/\s/g,"")},designer:{en:P.designer||" "},designerURL:{en:P.designerURL||" "},manufacturer:{en:P.manufacturer||" "},manufacturerURL:{en:P.manufacturerURL||" "},license:{en:P.license||" "},licenseURL:{en:P.licenseURL||" "},version:{en:P.version||"Version 0.1"},description:{en:P.description||" "},copyright:{en:P.copyright||" "},trademark:{en:P.trademark||" "}},this.unitsPerEm=P.unitsPerEm||1e3,this.ascender=P.ascender,this.descender=P.descender,this.createdTimestamp=P.createdTimestamp,this.tables={os2:{usWeightClass:P.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:P.widthClass||this.usWidthClasses.MEDIUM,fsSelection:P.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new lt.GlyphSet(this,P.glyphs||[]),this.encoding=new Le(this),this.position=new Rr(this),this.substitution=new hr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new zr(this):void 0)}})}function En(P,B){var W,$=JSON.stringify(P),Q=256;for(W in B){var ie=parseInt(W);if(ie&&!(ie<256)){if(JSON.stringify(B[W])===$)return ie;Q<=ie&&(Q=ie+1)}}return B[Q]=P,Q}jt.prototype.hasChar=function(P){return this.encoding.charToGlyphIndex(P)!==null},jt.prototype.charToGlyphIndex=function(P){return this.encoding.charToGlyphIndex(P)},jt.prototype.charToGlyph=function(P){return P=this.charToGlyphIndex(P),this.glyphs.get(P)||this.glyphs.get(0)},jt.prototype.stringToGlyphs=function(P,B){B=B||this.defaultRenderOptions;for(var W=Kt(P),$=[],Q=0;Q<W.length;Q+=1){var ie=W[Q];$.push(this.charToGlyphIndex(ie))}var oe=$.length;if(B.features){var P=B.script||this.substitution.getDefaultScriptName(),me=[];B.features.liga&&(me=me.concat(this.substitution.getFeature("liga",P,B.language))),B.features.rlig&&(me=me.concat(this.substitution.getFeature("rlig",P,B.language)));for(var Ee=0;Ee<oe;Ee+=1)for(var Se=0;Se<me.length;Se++){for(var Ne=me[Se],Be=Ne.sub,De=Be.length,Ce=0;Ce<De&&Be[Ce]===$[Ee+Ce];)Ce++;Ce===De&&($.splice(Ee,De,Ne.by),oe=oe-De+1)}}for(var $e=new Array(oe),ze=this.glyphs.get(0),He=0;He<oe;He+=1)$e[He]=this.glyphs.get($[He])||ze;return $e},jt.prototype.nameToGlyphIndex=function(P){return this.glyphNames.nameToGlyphIndex(P)},jt.prototype.nameToGlyph=function(P){return P=this.nameToGlyphIndex(P),this.glyphs.get(P)||this.glyphs.get(0)},jt.prototype.glyphIndexToName=function(P){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(P):""},jt.prototype.getKerningValue=function(P,B){P=P.index||P,B=B.index||B;var W=this.position.defaultKerningTables;return W?this.position.getKerningValue(W,P,B):this.kerningPairs[P+","+B]||0},jt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},jt.prototype.forEachGlyph=function(P,B,W,$,Q,ie){B=B!==void 0?B:0,W=W!==void 0?W:0,Q=Q||this.defaultRenderOptions;var oe,me=1/this.unitsPerEm*($=$!==void 0?$:72),Ee=this.stringToGlyphs(P,Q);Q.kerning&&(P=Q.script||this.position.getDefaultScriptName(),oe=this.position.getKerningTables(P,Q.language));for(var Se=0;Se<Ee.length;Se+=1){var Ne=Ee[Se];ie.call(this,Ne,B,W,$,Q),Ne.advanceWidth&&(B+=Ne.advanceWidth*me),Q.kerning&&Se<Ee.length-1&&(B+=(oe?this.position.getKerningValue(oe,Ne.index,Ee[Se+1].index):this.getKerningValue(Ne,Ee[Se+1]))*me),Q.letterSpacing?B+=Q.letterSpacing*$:Q.tracking&&(B+=Q.tracking/1e3*$)}return B},jt.prototype.getPath=function(P,B,W,$,Q){var ie=new Z;return this.forEachGlyph(P,B,W,$,Q,function(oe,me,Ee,Se){oe=oe.getPath(me,Ee,Se,Q,this),ie.extend(oe)}),ie},jt.prototype.getPaths=function(P,B,W,$,Q){var ie=[];return this.forEachGlyph(P,B,W,$,Q,function(oe,me,Ee,Se){oe=oe.getPath(me,Ee,Se,Q,this),ie.push(oe)}),ie},jt.prototype.getAdvanceWidth=function(P,B,W){return this.forEachGlyph(P,0,0,B,W,function(){})},jt.prototype.draw=function(P,B,W,$,Q,ie){this.getPath(B,W,$,Q,ie).draw(P)},jt.prototype.drawPoints=function(P,B,W,$,Q,ie){this.forEachGlyph(B,W,$,Q,ie,function(oe,me,Ee,Se){oe.drawPoints(P,me,Ee,Se)})},jt.prototype.drawMetrics=function(P,B,W,$,Q,ie){this.forEachGlyph(B,W,$,Q,ie,function(oe,me,Ee,Se){oe.drawMetrics(P,me,Ee,Se)})},jt.prototype.getEnglishName=function(P){if(P=this.names[P],P)return P.en},jt.prototype.validate=function(){var P=this;function B(W){W=P.getEnglishName(W),W&&W.trim().length}B("fontFamily"),B("weightName"),B("manufacturer"),B("copyright"),B("version"),this.unitsPerEm},jt.prototype.toTables=function(){return jr.fontToTable(this)},jt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},jt.prototype.toArrayBuffer=function(){for(var P=this.toTables().encode(),B=new ArrayBuffer(P.length),W=new Uint8Array(B),$=0;$<P.length;$++)W[$]=P[$];return B},jt.prototype.download=function(P){var B=this.getEnglishName("fontFamily"),W=this.getEnglishName("fontSubfamily"),$=(P=P||B.replace(/\s/g,"")+"-"+W+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,$.byteLength,function(Q){Q.root.getFile(P,{create:!0},function(ie){ie.createWriter(function(oe){var me=new DataView($),me=new Blob([me],{type:"font/opentype"});oe.write(me),oe.addEventListener("writeend",function(){location.href=ie.toURL()},!1)})})},function(Q){throw new Error(Q.name+": "+Q.message)})):(B=t("fs"),W=function(Q){for(var ie=new o(Q.byteLength),oe=new Uint8Array(Q),me=0;me<ie.length;++me)ie[me]=oe[me];return ie}($),B.writeFileSync(P,W))},jt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},jt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},jt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var le={make:function(P,B){var W=new ve.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:P.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:P.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*P.axes.length}]);W.offsetToData=W.sizeOf();for(var $,Q,ie,oe=0;oe<P.axes.length;oe++)W.fields=W.fields.concat(($=oe,Q=P.axes[oe],ie=B,ie=En(Q.name,B),[{name:"tag_"+$,type:"TAG",value:Q.tag},{name:"minValue_"+$,type:"FIXED",value:Q.minValue<<16},{name:"defaultValue_"+$,type:"FIXED",value:Q.defaultValue<<16},{name:"maxValue_"+$,type:"FIXED",value:Q.maxValue<<16},{name:"flags_"+$,type:"USHORT",value:0},{name:"nameID_"+$,type:"USHORT",value:ie}]));for(var me=0;me<P.instances.length;me++)W.fields=W.fields.concat(function(Ee,Se,Ne,Be){for(var De=[{name:"nameID_"+Ee,type:"USHORT",value:En(Se.name,Be)},{name:"flags_"+Ee,type:"USHORT",value:0}],Ce=0;Ce<Ne.length;++Ce){var $e=Ne[Ce].tag;De.push({name:"axis_"+Ee+" "+$e,type:"FIXED",value:Se.coordinates[$e]<<16})}return De}(me,P.instances[me],P.axes,B));return W},parse:function(P,B,W){for(var $,Q,ie,oe,me=new Fe.Parser(P,B),Ee=me.parseULong(),Se=(L.argument(Ee===65536,"Unsupported fvar table version."),me.parseOffset16()),Ne=(me.skip("uShort",1),me.parseUShort()),Be=me.parseUShort(),De=me.parseUShort(),Ce=me.parseUShort(),$e=[],ze=0;ze<Ne;ze++)$e.push(($=P,Q=B+Se+ze*Be,ie=W,oe={},$=new Fe.Parser($,Q),oe.tag=$.parseTag(),oe.minValue=$.parseFixed(),oe.defaultValue=$.parseFixed(),oe.maxValue=$.parseFixed(),$.skip("uShort",1),oe.name=ie[$.parseUShort()]||{},oe));for(var He=[],Ve=B+Se+Ne*Be,Ue=0;Ue<De;Ue++)He.push(function(ut,_t,dt,ft){var xt={},Rt=new Fe.Parser(ut,_t);xt.name=ft[Rt.parseUShort()]||{},Rt.skip("uShort",1),xt.coordinates={};for(var zt=0;zt<dt.length;++zt)xt.coordinates[dt[zt].tag]=Rt.parseFixed();return xt}(P,Ve+Ue*Ce,$e,W));return{axes:$e,instances:He}}},ee=new Array(10);ee[1]=function(){var P=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{posFormat:1,coverage:this.parsePointer(Pe.coverage),value:this.parseValueRecord()}:B===2?{posFormat:2,coverage:this.parsePointer(Pe.coverage),values:this.parseValueRecordList()}:void L.assert(!1,"0x"+P.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ee[2]=function(){var P,B,W,$,ie=this.offset+this.relativeOffset,Q=this.parseUShort(),ie=(L.assert(Q===1||Q===2,"0x"+ie.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Pe.coverage)),oe=this.parseUShort(),me=this.parseUShort();return Q===1?{posFormat:Q,coverage:ie,valueFormat1:oe,valueFormat2:me,pairSets:this.parseList(Pe.pointer(Pe.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(oe),value2:this.parseValueRecord(me)}})))}:Q===2?(P=this.parsePointer(Pe.classDef),B=this.parsePointer(Pe.classDef),W=this.parseUShort(),$=this.parseUShort(),{posFormat:Q,coverage:ie,valueFormat1:oe,valueFormat2:me,classDef1:P,classDef2:B,class1Count:W,class2Count:$,classRecords:this.parseList(W,Pe.list($,function(){return{value1:this.parseValueRecord(oe),value2:this.parseValueRecord(me)}}))}):void 0},ee[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ee[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ee[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ee[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ee[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ee[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ee[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var ae=new Array(10),Te={parse:function(P,B){return B=(P=new Pe(P,B=B||0)).parseVersion(1),L.argument(B===1||B===1.1,"Unsupported GPOS table version "+B),B===1?{version:B,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(ee)}:{version:B,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(ee),variations:P.parseFeatureVariationsList()}},make:function(P){return new ve.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ve.ScriptList(P.scripts)},{name:"features",type:"TABLE",value:new ve.FeatureList(P.features)},{name:"lookups",type:"TABLE",value:new ve.LookupList(P.lookups,ae)}])}},Me={parse:function(P,B){if(P=new Fe.Parser(P,B),(B=P.parseUShort())===0){var W=P,$={},Be=(W.skip("uShort"),W.parseUShort()),Q=(L.argument(Be===0,"Unsupported kern sub-table version."),W.skip("uShort",2),W.parseUShort());W.skip("uShort",3);for(var ie=0;ie<Q;ie+=1){var oe=W.parseUShort(),me=W.parseUShort(),Ee=W.parseShort();$[oe+","+me]=Ee}return $}if(B!==1)throw new Error("Unsupported kern table version ("+B+").");var Se=P,Ne={},Be=(Se.skip("uShort"),1<Se.parseULong()&&console.warn("Only the first kern subtable is supported."),Se.skip("uLong"),255&Se.parseUShort());if(Se.skip("uShort"),Be==0){var De=Se.parseUShort();Se.skip("uShort",3);for(var Ce=0;Ce<De;Ce+=1){var $e=Se.parseUShort(),ze=Se.parseUShort(),He=Se.parseShort();Ne[$e+","+ze]=He}}return Ne}},Ye={parse:function(P,B,W,$){for(var Q=new Fe.Parser(P,B),ie=$?Q.parseUShort:Q.parseULong,oe=[],me=0;me<W+1;me+=1){var Ee=ie.call(Q);$&&(Ee*=2),oe.push(Ee)}return oe}};function nt(P,B){t("fs").readFile(P,function(W,$){if(W)return B(W.message);B(null,Dr($))})}function ht(P,B){var W=new XMLHttpRequest;W.open("get",P,!0),W.responseType="arraybuffer",W.onload=function(){return W.response?B(null,W.response):B("Font could not be loaded: "+W.statusText)},W.onerror=function(){B("Font could not be loaded")},W.send()}function wt(P,B){for(var W=[],$=12,Q=0;Q<B;Q+=1){var ie=Fe.getTag(P,$),oe=Fe.getULong(P,$+4),me=Fe.getULong(P,$+8),Ee=Fe.getULong(P,$+12);W.push({tag:ie,checksum:oe,offset:me,length:Ee,compression:!1}),$+=16}return W}function yt(W,B){if(B.compression!=="WOFF")return{data:W,offset:B.offset};var W=new Uint8Array(W.buffer,B.offset+2,B.compressedLength-2),$=new Uint8Array(B.length);if(O(W,$),$.byteLength!==B.length)throw new Error("Decompression error: "+B.tag+" decompressed length doesn't match recorded length");return{data:new DataView($.buffer,0),offset:0}}function Ct(Ue){var B,W,$,Q,ie,oe,me,Ee,Se,Ne,Be,De,Ce,$e,ze=new jt({empty:!0}),He=new DataView(Ue,0),Ve=[],Ue=Fe.getTag(He,0);if(Ue===String.fromCharCode(0,1,0,0)||Ue==="true"||Ue==="typ1")ze.outlinesFormat="truetype",Ve=wt(He,$=Fe.getUShort(He,4));else if(Ue==="OTTO")ze.outlinesFormat="cff",Ve=wt(He,$=Fe.getUShort(He,4));else{if(Ue!=="wOFF")throw new Error("Unsupported OpenType signature "+Ue);var ut=Fe.getTag(He,4);if(ut===String.fromCharCode(0,1,0,0))ze.outlinesFormat="truetype";else{if(ut!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ue);ze.outlinesFormat="cff"}Ve=function(Dt,Ot){for(var ir=[],Vt=44,tr=0;tr<Ot;tr+=1){var Lt=Fe.getTag(Dt,Vt),er=Fe.getULong(Dt,Vt+4),Kr=Fe.getULong(Dt,Vt+8),Br=Fe.getULong(Dt,Vt+12),Ln=void 0,Ln=Kr<Br&&"WOFF";ir.push({tag:Lt,offset:er,compression:Ln,compressedLength:Kr,length:Br}),Vt+=20}return ir}(He,$=Fe.getUShort(He,12))}for(var _t=0;_t<$;_t+=1){var dt=Ve[_t],ft=void 0;switch(dt.tag){case"cmap":ft=yt(He,dt),ze.tables.cmap=de.parse(ft.data,ft.offset),ze.encoding=new qe(ze.tables.cmap);break;case"cvt ":ft=yt(He,dt),$e=new Fe.Parser(ft.data,ft.offset),ze.tables.cvt=$e.parseShortList(dt.length/2);break;case"fvar":ie=dt;break;case"fpgm":ft=yt(He,dt),$e=new Fe.Parser(ft.data,ft.offset),ze.tables.fpgm=$e.parseByteList(dt.length);break;case"head":ft=yt(He,dt),ze.tables.head=Cr.parse(ft.data,ft.offset),ze.unitsPerEm=ze.tables.head.unitsPerEm,B=ze.tables.head.indexToLocFormat;break;case"hhea":ft=yt(He,dt),ze.tables.hhea=Ae.parse(ft.data,ft.offset),ze.ascender=ze.tables.hhea.ascender,ze.descender=ze.tables.hhea.descender,ze.numberOfHMetrics=ze.tables.hhea.numberOfHMetrics;break;case"hmtx":Se=dt;break;case"ltag":ft=yt(He,dt),W=it.parse(ft.data,ft.offset);break;case"maxp":ft=yt(He,dt),ze.tables.maxp=Je.parse(ft.data,ft.offset),ze.numGlyphs=ze.tables.maxp.numGlyphs;break;case"name":De=dt;break;case"OS/2":ft=yt(He,dt),ze.tables.os2=Gt.parse(ft.data,ft.offset);break;case"post":ft=yt(He,dt),ze.tables.post=Jr.parse(ft.data,ft.offset),ze.glyphNames=new rt(ze.tables.post);break;case"prep":ft=yt(He,dt),$e=new Fe.Parser(ft.data,ft.offset),ze.tables.prep=$e.parseByteList(dt.length);break;case"glyf":oe=dt;break;case"loca":Be=dt;break;case"CFF ":Q=dt;break;case"kern":Ne=dt;break;case"GPOS":me=dt;break;case"GSUB":Ee=dt;break;case"meta":Ce=dt}}if(ut=yt(He,De),ze.tables.name=rr.parse(ut.data,ut.offset,W),ze.names=ze.tables.name,oe&&Be)Ue=B===0,ut=yt(He,Be),ut=Ye.parse(ut.data,ut.offset,ze.numGlyphs,Ue),Ue=yt(He,oe),ze.glyphs=cn.parse(Ue.data,Ue.offset,ut,ze);else{if(!Q)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ue=yt(He,Q),lr.parse(Ue.data,Ue.offset,ze)}for(var ut=yt(He,Se),xt=(et.parse(ut.data,ut.offset,ze.numberOfHMetrics,ze.numGlyphs,ze.glyphs),ze),Rt=xt.tables.cmap.glyphIndexMap,zt=Object.keys(Rt),Yt=0;Yt<zt.length;Yt+=1){var nr,sr=zt[Yt],gr=Rt[sr];(nr=xt.glyphs.get(gr)).addUnicode(parseInt(sr))}for(var Nt=0;Nt<xt.glyphs.length;Nt+=1)nr=xt.glyphs.get(Nt),xt.cffEncoding?xt.isCIDFont?nr.name="gid"+Nt:nr.name=xt.cffEncoding.charset[Nt]:xt.glyphNames.names&&(nr.name=xt.glyphNames.glyphIndexToName(Nt));return Ne?(Ue=yt(He,Ne),ze.kerningPairs=Me.parse(Ue.data,Ue.offset)):ze.kerningPairs={},me&&(ut=yt(He,me),ze.tables.gpos=Te.parse(ut.data,ut.offset),ze.position.init()),Ee&&(Ue=yt(He,Ee),ze.tables.gsub=Ir.parse(Ue.data,Ue.offset)),ie&&(ut=yt(He,ie),ze.tables.fvar=le.parse(ut.data,ut.offset,ze.names)),Ce&&(Ue=yt(He,Ce),ze.tables.meta=Qr.parse(Ue.data,Ue.offset),ze.metas=ze.tables.meta),ze}f.Font=jt,f.Glyph=ot,f.Path=Z,f.BoundingBox=K,f._parse=Fe,f.parse=Ct,f.load=function(P,B){(typeof window>"u"?nt:ht)(P,function(W,$){if(W)return B(W);var Q;try{Q=Ct($)}catch(ie){return B(ie,null)}return B(null,Q)})},f.loadSync=function(P){return Ct(Dr(t("fs").readFileSync(P)))},Object.defineProperty(f,"__esModule",{value:!0})},i(typeof l=="object"&&a!==void 0?l:c.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],250:[function(t,a,l){(function(o){function c(m,_){for(var u=0,p=m.length-1;0<=p;p--){var g=m[p];g==="."?m.splice(p,1):g===".."?(m.splice(p,1),u++):u&&(m.splice(p,1),u--)}if(_)for(;u--;)m.unshift("..");return m}function i(m,_){if(m.filter)return m.filter(_);for(var u=[],p=0;p<m.length;p++)_(m[p],p,m)&&u.push(m[p]);return u}l.resolve=function(){for(var m="",_=!1,u=arguments.length-1;-1<=u&&!_;u--){var p=0<=u?arguments[u]:o.cwd();if(typeof p!="string")throw new TypeError("Arguments to path.resolve must be strings");p&&(m=p+"/"+m,_=p.charAt(0)==="/")}return(_?"/":"")+(m=c(i(m.split("/"),function(g){return!!g}),!_).join("/"))||"."},l.normalize=function(m){var _=l.isAbsolute(m),u=f(m,-1)==="/";return(m=(m=c(i(m.split("/"),function(p){return!!p}),!_).join("/"))||_?m:".")&&u&&(m+="/"),(_?"/":"")+m},l.isAbsolute=function(m){return m.charAt(0)==="/"},l.join=function(){var m=Array.prototype.slice.call(arguments,0);return l.normalize(i(m,function(_,u){if(typeof _!="string")throw new TypeError("Arguments to path.join must be strings");return _}).join("/"))},l.relative=function(m,_){function u(x){for(var k=0;k<x.length&&x[k]==="";k++);for(var T=x.length-1;0<=T&&x[T]==="";T--);return T<k?[]:x.slice(k,T-k+1)}m=l.resolve(m).substr(1),_=l.resolve(_).substr(1);for(var p=u(m.split("/")),g=u(_.split("/")),y=Math.min(p.length,g.length),S=y,b=0;b<y;b++)if(p[b]!==g[b]){S=b;break}for(var E=[],b=S;b<p.length;b++)E.push("..");return(E=E.concat(g.slice(S))).join("/")},l.sep="/",l.delimiter=":",l.dirname=function(m){if(typeof m!="string"&&(m+=""),m.length===0)return".";for(var _=m.charCodeAt(0)===47,u=-1,p=!0,g=m.length-1;1<=g;--g)if(m.charCodeAt(g)===47){if(!p){u=g;break}}else p=!1;return u===-1?_?"/":".":_&&u===1?"/":m.slice(0,u)},l.basename=function(m,_){return m=function(u){typeof u!="string"&&(u+="");for(var p=0,g=-1,y=!0,S=u.length-1;0<=S;--S)if(u.charCodeAt(S)===47){if(!y){p=S+1;break}}else g===-1&&(y=!1,g=S+1);return g===-1?"":u.slice(p,g)}(m),m=_&&m.substr(-1*_.length)===_?m.substr(0,m.length-_.length):m},l.extname=function(m){typeof m!="string"&&(m+="");for(var _=-1,u=0,p=-1,g=!0,y=0,S=m.length-1;0<=S;--S){var b=m.charCodeAt(S);if(b===47){if(g)continue;u=S+1;break}p===-1&&(g=!1,p=S+1),b===46?_===-1?_=S:y!==1&&(y=1):_!==-1&&(y=-1)}return _===-1||p===-1||y===0||y===1&&_===p-1&&_===u+1?"":m.slice(_,p)};var f="ab".substr(-1)==="b"?function(m,_,u){return m.substr(_,u)}:function(m,_,u){return _<0&&(_=m.length+_),m.substr(_,u)}}).call(this,t("_process"))},{_process:251}],251:[function(t,i,l){var o,c,i=i.exports={};function f(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:f}catch{o=f}try{c=typeof clearTimeout=="function"?clearTimeout:m}catch{c=m}function _(k){if(o===setTimeout)return setTimeout(k,0);if((o===f||!o)&&setTimeout)return(o=setTimeout)(k,0);try{return o(k,0)}catch{try{return o.call(null,k,0)}catch{return o.call(this,k,0)}}}var u,p=[],g=!1,y=-1;function S(){g&&u&&(g=!1,u.length?p=u.concat(p):y=-1,p.length&&b())}function b(){if(!g){for(var k=_(S),T=(g=!0,p.length);T;){for(u=p,p=[];++y<T;)u&&u[y].run();y=-1,T=p.length}u=null,g=!1,function(j){if(c===clearTimeout)return clearTimeout(j);if((c===m||!c)&&clearTimeout)return(c=clearTimeout)(j);try{c(j)}catch{try{return c.call(null,j)}catch{return c.call(this,j)}}}(k)}}function E(k,T){this.fun=k,this.array=T}function x(){}i.nextTick=function(k){var T=new Array(arguments.length-1);if(1<arguments.length)for(var j=1;j<arguments.length;j++)T[j-1]=arguments[j];p.push(new E(k,T)),p.length!==1||g||_(b)},E.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=x,i.addListener=x,i.once=x,i.off=x,i.removeListener=x,i.removeAllListeners=x,i.emit=x,i.prependListener=x,i.prependOnceListener=x,i.listeners=function(k){return[]},i.binding=function(k){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(k){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],252:[function(t,a,l){a=function(o){var c,i=Object.prototype,f=i.hasOwnProperty,A=typeof Symbol=="function"?Symbol:{},m=A.iterator||"@@iterator",_=A.asyncIterator||"@@asyncIterator",u=A.toStringTag||"@@toStringTag";function p(X,H,G,J){var Z,U,V,L,H=H&&H.prototype instanceof k?H:k,H=Object.create(H.prototype),J=new q(J||[]);return H._invoke=(Z=X,U=G,V=J,L=y,function(ne,se){if(L===b)throw new Error("Generator is already running");if(L===E){if(ne==="throw")throw se;return D()}for(V.method=ne,V.arg=se;;){var fe=V.delegate;if(fe&&(fe=function xe(he,_e){var ye=he.iterator[_e.method];if(ye===c){if(_e.delegate=null,_e.method==="throw"){if(he.iterator.return&&(_e.method="return",_e.arg=c,xe(he,_e),_e.method==="throw"))return x;_e.method="throw",_e.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}if(ye=g(ye,he.iterator,_e.arg),ye.type==="throw")return _e.method="throw",_e.arg=ye.arg,_e.delegate=null,x;if(ye=ye.arg,!ye)return _e.method="throw",_e.arg=new TypeError("iterator result is not an object"),_e.delegate=null,x;{if(!ye.done)return ye;_e[he.resultName]=ye.value,_e.next=he.nextLoc,_e.method!=="return"&&(_e.method="next",_e.arg=c)}return _e.delegate=null,x}(fe,V),fe)){if(fe===x)continue;return fe}if(V.method==="next")V.sent=V._sent=V.arg;else if(V.method==="throw"){if(L===y)throw L=E,V.arg;V.dispatchException(V.arg)}else V.method==="return"&&V.abrupt("return",V.arg);if(L=b,fe=g(Z,U,V),fe.type==="normal"){if(L=V.done?E:S,fe.arg!==x)return{value:fe.arg,done:V.done}}else fe.type==="throw"&&(L=E,V.method="throw",V.arg=fe.arg)}}),H}function g(X,O,G){try{return{type:"normal",arg:X.call(O,G)}}catch(K){return{type:"throw",arg:K}}}o.wrap=p;var y="suspendedStart",S="suspendedYield",b="executing",E="completed",x={};function k(){}function T(){}function j(){}var A={},C=(A[m]=function(){return this},Object.getPrototypeOf),C=C&&C(C(M([]))),I=(C&&C!==i&&f.call(C,m)&&(A=C),j.prototype=k.prototype=Object.create(A));function F(X){["next","throw","return"].forEach(function(O){X[O]=function(G){return this._invoke(O,G)}})}function N(X){var O;this._invoke=function(G,K){function Z(){return new Promise(function(U,V){(function L(xe,J,ne,se){var fe,xe=g(X[xe],X,J);if(xe.type!=="throw")return(J=(fe=xe.arg).value)&&typeof J=="object"&&f.call(J,"__await")?Promise.resolve(J.__await).then(function(he){L("next",he,ne,se)},function(he){L("throw",he,ne,se)}):Promise.resolve(J).then(function(he){fe.value=he,ne(fe)},function(he){return L("throw",he,ne,se)});se(xe.arg)})(G,K,U,V)})}return O=O?O.then(Z,Z):Z()}}function z(X){var O={tryLoc:X[0]};1 in X&&(O.catchLoc=X[1]),2 in X&&(O.finallyLoc=X[2],O.afterLoc=X[3]),this.tryEntries.push(O)}function R(X){var O=X.completion||{};O.type="normal",delete O.arg,X.completion=O}function q(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(z,this),this.reset(!0)}function M(X){if(X){var O,G=X[m];if(G)return G.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length))return O=-1,(G=function K(){for(;++O<X.length;)if(f.call(X,O))return K.value=X[O],K.done=!1,K;return K.value=c,K.done=!0,K}).next=G}return{next:D}}function D(){return{value:c,done:!0}}return(T.prototype=I.constructor=j).constructor=T,j[u]=T.displayName="GeneratorFunction",o.isGeneratorFunction=function(X){return X=typeof X=="function"&&X.constructor,!!X&&(X===T||(X.displayName||X.name)==="GeneratorFunction")},o.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,j):(X.__proto__=j,u in X||(X[u]="GeneratorFunction")),X.prototype=Object.create(I),X},o.awrap=function(X){return{__await:X}},F(N.prototype),N.prototype[_]=function(){return this},o.AsyncIterator=N,o.async=function(X,O,G,K){var Z=new N(p(X,O,G,K));return o.isGeneratorFunction(O)?Z:Z.next().then(function(U){return U.done?U.value:Z.next()})},F(I),I[u]="Generator",I[m]=function(){return this},I.toString=function(){return"[object Generator]"},o.keys=function(X){var O,G=[];for(O in X)G.push(O);return G.reverse(),function K(){for(;G.length;){var Z=G.pop();if(Z in X)return K.value=Z,K.done=!1,K}return K.done=!0,K}},o.values=M,q.prototype={constructor:q,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(R),!X)for(var O in this)O.charAt(0)==="t"&&f.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=c)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var O=this;function G(H,J){return U.type="throw",U.arg=X,O.next=H,J&&(O.method="next",O.arg=c),!!J}for(var K=this.tryEntries.length-1;0<=K;--K){var Z=this.tryEntries[K],U=Z.completion;if(Z.tryLoc==="root")return G("end");if(Z.tryLoc<=this.prev){var V=f.call(Z,"catchLoc"),L=f.call(Z,"finallyLoc");if(V&&L){if(this.prev<Z.catchLoc)return G(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return G(Z.finallyLoc)}else if(V){if(this.prev<Z.catchLoc)return G(Z.catchLoc,!0)}else{if(!L)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return G(Z.finallyLoc)}}}},abrupt:function(X,O){for(var G=this.tryEntries.length-1;0<=G;--G){var K=this.tryEntries[G];if(K.tryLoc<=this.prev&&f.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var Z=K;break}}var U=(Z=Z&&(X==="break"||X==="continue")&&Z.tryLoc<=O&&O<=Z.finallyLoc?null:Z)?Z.completion:{};return U.type=X,U.arg=O,Z?(this.method="next",this.next=Z.finallyLoc,x):this.complete(U)},complete:function(X,O){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&O&&(this.next=O),x},finish:function(X){for(var O=this.tryEntries.length-1;0<=O;--O){var G=this.tryEntries[O];if(G.finallyLoc===X)return this.complete(G.completion,G.afterLoc),R(G),x}},catch:function(X){for(var O=this.tryEntries.length-1;0<=O;--O){var G,K,Z=this.tryEntries[O];if(Z.tryLoc===X)return(G=Z.completion).type==="throw"&&(K=G.arg,R(Z)),K}throw new Error("illegal catch attempt")},delegateYield:function(X,O,G){return this.delegate={iterator:M(X),resultName:O,nextLoc:G},this.method==="next"&&(this.arg=c),x}},o}(typeof a=="object"?a.exports:{});try{regeneratorRuntime=a}catch{Function("r","regeneratorRuntime = r")(a)}},{}],253:[function(t,a,l){(function(o){var c,i,f,m,_,u,p,g,y,S;function b(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(R))throw new TypeError("Invalid character in header field name");return R.toLowerCase()}function E(R){return R=typeof R!="string"?String(R):R}function x(R){var q={next:function(){var M=R.shift();return{done:M===void 0,value:M}}};return i&&(q[Symbol.iterator]=function(){return q}),q}function k(R){this.map={},R instanceof k?R.forEach(function(q,M){this.append(M,q)},this):Array.isArray(R)?R.forEach(function(q){this.append(q[0],q[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(q){this.append(q,R[q])},this)}function T(R){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}function j(R){return new Promise(function(q,M){R.onload=function(){q(R.result)},R.onerror=function(){M(R.error)}})}function A(R){var q=new FileReader,M=j(q);return q.readAsArrayBuffer(R),M}function C(R){var q;return R.slice?R.slice(0):((q=new Uint8Array(R.byteLength)).set(new Uint8Array(R)),q.buffer)}function I(){return this.bodyUsed=!1,this._initBody=function(R){if(this._bodyInit=R)if(typeof R=="string")this._bodyText=R;else if(f&&Blob.prototype.isPrototypeOf(R))this._bodyBlob=R;else if(m&&FormData.prototype.isPrototypeOf(R))this._bodyFormData=R;else if(c&&URLSearchParams.prototype.isPrototypeOf(R))this._bodyText=R.toString();else if(_&&f&&p(R))this._bodyArrayBuffer=C(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_||!ArrayBuffer.prototype.isPrototypeOf(R)&&!g(R))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=C(R)}else this._bodyText="";this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f&&(this.blob=function(){var R=T(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?T(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var R,q,M=T(this);if(M)return M;if(this._bodyBlob)return M=this._bodyBlob,R=new FileReader,q=j(R),R.readAsText(M),q;if(this._bodyArrayBuffer)return Promise.resolve(function(D){for(var X=new Uint8Array(D),O=new Array(X.length),G=0;G<X.length;G++)O[G]=String.fromCharCode(X[G]);return O.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m&&(this.formData=function(){return this.text().then(N)}),this.json=function(){return this.text().then(JSON.parse)},this}function F(R,q){var M,D=(q=q||{}).body;if(R instanceof F){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,q.headers||(this.headers=new k(R.headers)),this.method=R.method,this.mode=R.mode,D||R._bodyInit==null||(D=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=q.credentials||this.credentials||"omit",!q.headers&&this.headers||(this.headers=new k(q.headers)),this.method=(R=q.method||this.method||"GET",M=R.toUpperCase(),-1<y.indexOf(M)?M:R),this.mode=q.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(D)}function N(R){var q=new FormData;return R.trim().split("&").forEach(function(M){var D;M&&(D=(M=M.split("=")).shift().replace(/\+/g," "),M=M.join("=").replace(/\+/g," "),q.append(decodeURIComponent(D),decodeURIComponent(M)))}),q}function z(R,q){q=q||{},this.type="default",this.status=q.status===void 0?200:q.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new k(q.headers),this.url=q.url||"",this._initBody(R)}o.fetch||(c="URLSearchParams"in o,i="Symbol"in o&&"iterator"in Symbol,f="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),m="FormData"in o,(_="ArrayBuffer"in o)&&(u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=function(R){return R&&DataView.prototype.isPrototypeOf(R)},g=ArrayBuffer.isView||function(R){return R&&-1<u.indexOf(Object.prototype.toString.call(R))}),k.prototype.append=function(R,q){R=b(R),q=E(q);var M=this.map[R];this.map[R]=M?M+","+q:q},k.prototype.delete=function(R){delete this.map[b(R)]},k.prototype.get=function(R){return R=b(R),this.has(R)?this.map[R]:null},k.prototype.has=function(R){return this.map.hasOwnProperty(b(R))},k.prototype.set=function(R,q){this.map[b(R)]=E(q)},k.prototype.forEach=function(R,q){for(var M in this.map)this.map.hasOwnProperty(M)&&R.call(q,this.map[M],M,this)},k.prototype.keys=function(){var R=[];return this.forEach(function(q,M){R.push(M)}),x(R)},k.prototype.values=function(){var R=[];return this.forEach(function(q){R.push(q)}),x(R)},k.prototype.entries=function(){var R=[];return this.forEach(function(q,M){R.push([M,q])}),x(R)},i&&(k.prototype[Symbol.iterator]=k.prototype.entries),y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],F.prototype.clone=function(){return new F(this,{body:this._bodyInit})},I.call(F.prototype),I.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new k(this.headers),url:this.url})},z.error=function(){var R=new z(null,{status:0,statusText:""});return R.type="error",R},S=[301,302,303,307,308],z.redirect=function(R,q){if(S.indexOf(q)===-1)throw new RangeError("Invalid status code");return new z(null,{status:q,headers:{location:R}})},o.Headers=k,o.Request=F,o.Response=z,o.fetch=function(R,q){return new Promise(function(M,D){var X=new F(R,q),O=new XMLHttpRequest;O.onload=function(){var G,K={status:O.status,statusText:O.statusText,headers:(K=O.getAllResponseHeaders()||"",G=new k,K.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(V){var V=V.split(":"),L=V.shift().trim();L&&(V=V.join(":").trim(),G.append(L,V))}),G)},Z=(K.url="responseURL"in O?O.responseURL:K.headers.get("X-Request-URL"),"response"in O?O.response:O.responseText);M(new z(Z,K))},O.onerror=function(){D(new TypeError("Network request failed"))},O.ontimeout=function(){D(new TypeError("Network request failed"))},O.open(X.method,X.url,!0),X.credentials==="include"?O.withCredentials=!0:X.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&f&&(O.responseType="blob"),X.headers.forEach(function(G,K){O.setRequestHeader(K,G)}),O.send(X._bodyInit===void 0?null:X._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],254:[function(t,a,l){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o,c=f(t("../core/main")),i=f(t("../color/color_conversion"));function f(u){return u&&u.__esModule?u:{default:u}}var m=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],_=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];c.default.prototype._rgbColorName=function(y){var p,g,y=i.default._rgbaToHSBA(y),S=[(o=y)[0],y[1],y[2]];S[0]!==0&&(S[0]=Math.round(100*S[0]),(y=S[0].toString().split(""))[g=y.length-1]=parseInt(y[g]),y[g]<2.5?y[g]=0:2.5<=y[g]&&y[g]<7.5&&(y[g]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[g]&&(y[g]=0,y[0]=y[0]+1),S[0]=10*y[0]+y[1]):7.5<=y[g]?S[0]=10:S[0]=y[g]),S[2]=S[2]/255;for(var b=S.length-1;1<=b;b--)S[b]<=.25?S[b]=0:.25<S[b]&&S[b]<.75?S[b]=.5:S[b]=1;if(S[0]===0&&S[1]===0&&S[2]===1){for(var E=2;0<=E;E--)o[E]=Math.round(1e4*o[E])/1e4;for(var x=0;x<m.length;x++){if(m[x].h===o[0]&&m[x].s===o[1]&&m[x].b===o[2]){p=m[x].name;break}p="white"}}else for(var k=0;k<_.length;k++)if(_[k].h===S[0]&&_[k].s===S[1]&&_[k].b===S[2]){p=_[k].name;break}return p},t=c.default,l.default=t},{"../color/color_conversion":260,"../core/main":275,"core-js/modules/es.function.name":168,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198}],255:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t},c="_Description",i="_fallbackDesc",f="_fallbackTable",m="_Label",_="_labelDesc",u="_labelTable";function p(g){if(g==="label"||g==="fallback")throw new Error("description should not be LABEL or FALLBACK");return g.endsWith(".")||g.endsWith(";")||g.endsWith(",")||g.endsWith("?")||g.endsWith("!")||(g+="."),g}o.default.prototype.describe=function(g,y){var S;o.default._validateParameters("describe",arguments),typeof g=="string"&&(S=this.canvas.id,g=p(g),this.dummyDOM||(this.dummyDOM=document.getElementById(S).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==g&&(this.descriptions.fallback.innerHTML=g):this._describeHTML("fallback",g),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==g&&(this.descriptions.label.innerHTML=g):this._describeHTML("label",g)))},o.default.prototype.describeElement=function(g,y,S){var b,E;o.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof g=="string"&&(b=this.canvas.id,y=p(y),E=function(x){if(x==="label"||x==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return x.endsWith(".")||x.endsWith(";")||x.endsWith(",")?x=x.replace(/.$/,":"):x.endsWith(":")||(x+=":"),x}(g),g=g.replace(/[^a-zA-Z0-9]/g,""),E='<th scope="row">'.concat(E,"</th><td>").concat(y,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[g]?this.descriptions.fallbackElements[g].innerHTML!==E&&(this.descriptions.fallbackElements[g].innerHTML=E):this._describeElementHTML("fallback",g,E),S===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[g]?this.descriptions.labelElements[g].innerHTML!==E&&(this.descriptions.labelElements[g].innerHTML=E):this._describeElementHTML("label",g,E)))},o.default.prototype._describeHTML=function(g,y){var S,b=this.canvas.id;g==="fallback"?(this.dummyDOM.querySelector("#".concat(b+c))?this.dummyDOM.querySelector("#"+b+f).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+i,'"></p>')):(S='<div id="'.concat(b).concat(c,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(i,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",S):this.dummyDOM.querySelector("#".concat(b)).innerHTML=S),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(i)),this.descriptions.fallback.innerHTML=y):g==="label"&&(this.dummyDOM.querySelector("#".concat(b+m))?this.dummyDOM.querySelector("#".concat(b+u))&&this.dummyDOM.querySelector("#".concat(b+u)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(_,'"></p>')):(S='<div id="'.concat(b).concat(m,'" class="p5Label"><p id="').concat(b).concat(_,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",S):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",S)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+_),this.descriptions.label.innerHTML=y)},o.default.prototype._describeElementHTML=function(g,y,S){var b,E=this.canvas.id;g==="fallback"?(this.dummyDOM.querySelector("#".concat(E+c))?this.dummyDOM.querySelector("#"+E+f)||this.dummyDOM.querySelector("#"+E+i).insertAdjacentHTML("afterend",'<table id="'.concat(E).concat(f,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(E).concat(c,'" role="region" aria-label="Canvas Description"><table id="').concat(E).concat(f,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(E,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(E,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+E).innerHTML=b),(b=document.createElement("tr")).id=E+"_fte_"+y,this.dummyDOM.querySelector("#"+E+f).appendChild(b),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(E).concat("_fte_").concat(y)),this.descriptions.fallbackElements[y].innerHTML=S):g==="label"&&(this.dummyDOM.querySelector("#".concat(E+m))?this.dummyDOM.querySelector("#".concat(E+u))||this.dummyDOM.querySelector("#"+E+_).insertAdjacentHTML("afterend",'<table id="'.concat(E+u,'"></table>')):(b='<div id="'.concat(E).concat(m,'" class="p5Label"><table id="').concat(E).concat(u,'"></table></div>'),this.dummyDOM.querySelector("#".concat(E,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(E,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+E).insertAdjacentHTML("afterend",b)),(g=document.createElement("tr")).id=E+"_lte_"+y,this.dummyDOM.querySelector("#"+E+u).appendChild(g),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(E).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=S)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.replace":196}],256:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(o){var c,i,f,m;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(c=this._accessibleOutputs[o],f=function(_,u,p,g){return u="".concat(u," canvas, ").concat(p," by ").concat(g," pixels, contains ").concat(_[0]),u=(_[0]===1?"".concat(u," shape: "):"".concat(u," shapes: ")).concat(_[1]),u}((i=function(_,u){var p,g="",y="",S=0;for(p in u){var b,E=0;for(b in u[p]){var x='<li id="'.concat(_,"shape").concat(S,'">').concat(u[p][b].color," ").concat(p,",");p==="line"?x+=" location = ".concat(u[p][b].pos,", length = ").concat(u[p][b].length," pixels"):(x+=" location = ".concat(u[p][b].pos),p!=="point"&&(x+=", area = ".concat(u[p][b].area," %")),x+="</li>"),g+=x,E++,S++}y=1<E?"".concat(y," ").concat(E," ").concat(p,"s"):"".concat(y," ").concat(E," ").concat(p)}return{numShapes:[S,y],details:g}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),m=function(_,u){var p,g,y=0,S="",b=Array.from(Array(10),function(){return Array(10)});for(p in u)for(var E in u[p]){var x=void 0;x=p!=="line"?'<a href="#'.concat(_,"shape").concat(y,'">').concat(u[p][E].color," ").concat(p,"</a>"):'<a href="#'.concat(_,"shape").concat(y,'">').concat(u[p][E].color," ").concat(p," midpoint</a>"),b[u[p][E].loc.locY][u[p][E].loc.locX]?b[u[p][E].loc.locY][u[p][E].loc.locX]=b[u[p][E].loc.locY][u[p][E].loc.locX]+"  "+x:b[u[p][E].loc.locY][u[p][E].loc.locX]=x,y++}for(g in b){var k,T="<tr>";for(k in b[g])T+="<td>",b[g][k]!==void 0&&(T+=b[g][k]),T+="</td>";S=S+T+"</tr>"}return S}(o,this.ingredients.shapes),f!==c.summary.innerHTML&&(c.summary.innerHTML=f),m!==c.map.innerHTML&&(c.map.innerHTML=m),i.details!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=i.details),this._accessibleOutputs[o]=c)},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":158,"core-js/modules/es.array.map":164,"core-js/modules/es.string.iterator":192}],257:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(f){return function(m){if(Array.isArray(m)){for(var _=0,u=new Array(m.length);_<m.length;_++)u[_]=m[_];return u}}(f)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(f,m,_){return m=Math.floor(f[0]/m*10),f=Math.floor(f[1]/_*10),m===10&&(m-=1),f===10&&(f-=1),{locX:m,locY:f}}o.default.prototype.textOutput=function(f){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),f===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(f){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),f===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(f,m){var _,u,p,g=this.canvas.id,y=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),"");m==="Fallback"?(_=g+f,this.dummyDOM.querySelector("#".concat(u=g+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(g,"_Description"))?this.dummyDOM.querySelector("#".concat(g,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(g)).innerHTML='<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>'))):m==="Label"&&(_=g+f+(y=m),this.dummyDOM.querySelector("#".concat(u=g+"accessibleOutput"+m))||(this.dummyDOM.querySelector("#".concat(g,"_Label"))?this.dummyDOM.querySelector("#".concat(g,"_Label")):this.dummyDOM.querySelector("#".concat(g))).insertAdjacentHTML("afterend",'<div id="'.concat(u,'"></div>'))),this._accessibleOutputs[_]={},f==="textOutput"?(y="#".concat(g,"gridOutput").concat(y),p='<div id="'.concat(_,'">Text Output<div id="').concat(_,'Summary" aria-label="text output summary"><p id="').concat(_,'_summary"></p><ul id="').concat(_,'_list"></ul></div><table id="').concat(_,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#".concat(u)).innerHTML=p,this._accessibleOutputs[_].list=this.dummyDOM.querySelector("#".concat(_,"_list"))):f==="gridOutput"&&(y="#".concat(g,"textOutput").concat(y),p='<div id="'.concat(_,'">Grid Output<p id="').concat(_,'_summary" aria-label="grid output summary"><table id="').concat(_,'_map" summary="grid output content"></table><ul id="').concat(_,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",p):this.dummyDOM.querySelector("#".concat(u)).innerHTML=p,this._accessibleOutputs[_].map=this.dummyDOM.querySelector("#".concat(_,"_map"))),this._accessibleOutputs[_].shapeDetails=this.dummyDOM.querySelector("#".concat(_,"_shapeDetails")),this._accessibleOutputs[_].summary=this.dummyDOM.querySelector("#".concat(_,"_summary"))},o.default.prototype._updateAccsOutput=function(){var f=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(f+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(f+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(f+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(f+"gridOutputLabel"))},o.default.prototype._accsBackground=function(f){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==f&&(this.ingredients.colors.backgroundRGBA=f,this.ingredients.colors.background=this._rgbColorName(f))},o.default.prototype._accsCanvasColors=function(f,m){f==="fill"?this.ingredients.colors.fillRGBA!==m&&(this.ingredients.colors.fillRGBA=m,this.ingredients.colors.fill=this._rgbColorName(m)):f==="stroke"&&this.ingredients.colors.strokeRGBA!==m&&(this.ingredients.colors.strokeRGBA=m,this.ingredients.colors.stroke=this._rgbColorName(m))},o.default.prototype._accsOutput=function(f,m){f==="ellipse"&&m[2]===m[3]?f="circle":f==="rectangle"&&m[2]===m[3]&&(f="square");var _,u,p={},g=!0,y=function(b,E){var x;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(x=Math.round(E[0]+E[2]/2),Math.round(E[1]+E[3]/2)):b==="triangle"?(x=(E[0]+E[2]+E[4])/3,(E[1]+E[3]+E[5])/3):b==="quadrilateral"?(x=(E[0]+E[2]+E[4]+E[6])/4,(E[1]+E[3]+E[5]+E[7])/4):b==="line"?(x=(E[0]+E[2])/2,(E[1]+E[3])/2):(x=E[0],E[1]),[x,b]}(f,m);if(f==="line"?(p.color=this.ingredients.colors.stroke,p.length=Math.round(this.dist(m[0],m[1],m[2],m[3])),_=this._getPos(m[0],[1]),u=this._getPos(m[2],[3]),p.loc=i(y,this.width,this.height),p.pos=_===u?"at ".concat(_):"from ".concat(_," to ").concat(u)):(f==="point"?p.color=this.ingredients.colors.stroke:(p.color=this.ingredients.colors.fill,p.area=this._getArea(f,m)),p.pos=this._getPos.apply(this,c(y)),p.loc=i(y,this.width,this.height)),this.ingredients.shapes[f]){if(this.ingredients.shapes[f]!==[p]){for(var S in this.ingredients.shapes[f])JSON.stringify(this.ingredients.shapes[f][S])===JSON.stringify(p)&&(g=!1);g===!0&&this.ingredients.shapes[f].push(p)}}else this.ingredients.shapes[f]=[p]},o.default.prototype._getPos=function(u,_){var u=new DOMPointReadOnly(u,_),_=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),u=u.matrixTransform(_),_=u.x,u=u.y,p=this.width,g=this.height;return _<.4*p?u<.4*g?"top left":.6*g<u?"bottom left":"mid left":.6*p<_?u<.4*g?"top right":.6*g<u?"bottom right":"mid right":u<.4*g?"top middle":.6*g<u?"bottom middle":"middle"},o.default.prototype._getArea=function(f,m){var _,u,p=0,g=(f==="arc"?(p=(_=((m[5]-m[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*m[2]*m[3]/8,m[6]!=="open"&&m[6]!=="chord"||(u=m[0],E=m[1],g=m[0]+m[2]/2*Math.cos(m[4]).toFixed(2),x=m[1]+m[3]/2*Math.sin(m[4]).toFixed(2),S=m[0]+m[2]/2*Math.cos(m[5]).toFixed(2),y=m[1]+m[3]/2*Math.sin(m[5]).toFixed(2),u=Math.abs(u*(x-y)+g*(y-E)+S*(E-x))/2,_>Math.PI?p+=u:p-=u)):f==="ellipse"||f==="circle"?p=3.14*m[2]/2*m[3]/2:f==="line"||f==="point"?p=0:f==="quadrilateral"?p=Math.abs((m[6]+m[0])*(m[7]-m[1])+(m[0]+m[2])*(m[1]-m[3])+(m[2]+m[4])*(m[3]-m[5])+(m[4]+m[6])*(m[5]-m[7]))/2:f==="rectangle"||f==="square"?p=m[2]*m[3]:f==="triangle"&&(p=Math.abs(m[0]*(m[3]-m[5])+m[2]*(m[5]-m[1])+m[4]*(m[1]-m[3]))/2),this.width*this._pixelDensity),y=this.height*this._pixelDensity,S=[new DOMPoint(0,0),new DOMPoint(g,0),new DOMPoint(g,y),new DOMPoint(0,y)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),E=S.map(function(k){return k.matrixTransform(b)}),x=Math.abs((E[3].x+E[0].x)*(E[3].y-E[0].y)+(E[0].x+E[1].x)*(E[0].y-E[1].y)+(E[1].x+E[2].x)*(E[1].y-E[2].y)+(E[2].x+E[3].x)*(E[2].y-E[3].y))/2;return Math.round(100*p/x)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],258:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(o){var c,i,f,m;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(c=this._accessibleOutputs[o],f=function(_,u,p,g){return p="Your output is a, ".concat(p," by ").concat(g," pixels, ").concat(u," canvas containing the following"),p=_===1?"".concat(p," shape:"):"".concat(p," ").concat(_," shapes:"),p}((i=function(_,u){var p,g="",y=0;for(p in u)for(var S in u[p]){var b='<li><a href="#'.concat(_,"shape").concat(y,'">').concat(u[p][S].color," ").concat(p,"</a>");p==="line"?b+=", ".concat(u[p][S].pos,", ").concat(u[p][S].length," pixels long.</li>"):(b+=", at ".concat(u[p][S].pos),p!=="point"&&(b+=", covering ".concat(u[p][S].area,"% of the canvas")),b+=".</li>"),g+=b,y++}return{numShapes:y,listShapes:g}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),m=function(_,u){var p,g="",y=0;for(p in u)for(var S in u[p]){var b='<tr id="'.concat(_,"shape").concat(y,'"><th>').concat(u[p][S].color," ").concat(p,"</th>");p==="line"?b+="<td>location = ".concat(u[p][S].pos,"</td><td>length = ").concat(u[p][S].length," pixels</td></tr>"):(b+="<td>location = ".concat(u[p][S].pos,"</td>"),p!=="point"&&(b+="<td> area = ".concat(u[p][S].area,"%</td>")),b+="</tr>"),g+=b,y++}return g}(o,this.ingredients.shapes),f!==c.summary.innerHTML&&(c.summary.innerHTML=f),i.listShapes!==c.list.innerHTML&&(c.list.innerHTML=i.listShapes),m!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=m),this._accessibleOutputs[o]=c)},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151}],259:[function(t,a,l){var o=(o=t("./core/main"))&&o.__esModule?o:{default:o};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),a.exports=o.default},{"./accessibility/color_namer":254,"./accessibility/describe":255,"./accessibility/gridOutput":256,"./accessibility/outputs":257,"./accessibility/textOutput":258,"./color/color_conversion":260,"./color/creating_reading":261,"./color/p5.Color":262,"./color/setting":263,"./core/constants":264,"./core/environment":265,"./core/friendly_errors/fes_core":266,"./core/friendly_errors/file_errors":267,"./core/friendly_errors/sketch_reader":268,"./core/friendly_errors/stacktrace":269,"./core/friendly_errors/validate_params":270,"./core/helpers":271,"./core/init":272,"./core/legacy":274,"./core/main":275,"./core/p5.Element":276,"./core/p5.Graphics":277,"./core/p5.Renderer":278,"./core/p5.Renderer2D":279,"./core/preload":280,"./core/rendering":281,"./core/shape/2d_primitives":282,"./core/shape/attributes":283,"./core/shape/curves":284,"./core/shape/vertex":285,"./core/shim":286,"./core/structure":287,"./core/transform":288,"./data/local_storage.js":289,"./data/p5.TypedDict":290,"./dom/dom":291,"./events/acceleration":292,"./events/keyboard":293,"./events/mouse":294,"./events/touch":295,"./image/filters":296,"./image/image":297,"./image/loading_displaying":298,"./image/p5.Image":299,"./image/pixels":300,"./io/files":301,"./io/p5.Table":302,"./io/p5.TableRow":303,"./io/p5.XML":304,"./math/calculation":305,"./math/math":306,"./math/noise":307,"./math/p5.Vector":308,"./math/random":309,"./math/trigonometry":310,"./typography/attributes":311,"./typography/loading_displaying":312,"./typography/p5.Font":313,"./utilities/array_functions":314,"./utilities/conversion":315,"./utilities/string_functions":316,"./utilities/time_date":317,"./webgl/3d_primitives":318,"./webgl/interaction":320,"./webgl/light":321,"./webgl/loading":322,"./webgl/material":323,"./webgl/p5.Camera":324,"./webgl/p5.DataArray":325,"./webgl/p5.Framebuffer":326,"./webgl/p5.Geometry":327,"./webgl/p5.Matrix":328,"./webgl/p5.RenderBuffer":329,"./webgl/p5.RendererGL":332,"./webgl/p5.RendererGL.Immediate":330,"./webgl/p5.RendererGL.Retained":331,"./webgl/p5.Shader":333,"./webgl/p5.Texture":334,"./webgl/text":335}],260:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(o){var c=o[0],i=o[1],f=o[2],m=(2-i)*f/2;return m!=0&&(m==1?i=0:m<.5?i/=2-i:i=i*f/(2-2*m)),[c,i,m,o[3]]},_hsbaToRGBA:function(o){var c,i,f,m,_,u=6*o[0],p=o[1],g=o[2];return p===0?[g,g,g,o[3]]:(i=g*(1-p),f=g*(1-p*(u-(c=Math.floor(u)))),p=g*(1-p*(1+c-u)),u=c===1?(m=f,_=g,i):c===2?(m=i,_=g,p):c===3?(m=i,_=f,g):c===4?(m=p,_=i,g):c===5?(m=g,_=i,f):(m=g,_=p,i),[m,_,u,o[3]])},_hslaToHSBA:function(o){var c=o[0],i=o[1],f=o[2],m=f<.5?(1+i)*f:f+i-f*i;return[c,i=2*(m-f)/m,m,o[3]]},_hslaToRGBA:function(o){var c,i=6*o[0],f=o[1],m=o[2];return f===0?[m,m,m,o[3]]:[(c=function(_,u,p){return _<0?_+=6:6<=_&&(_-=6),_<1?u+(p-u)*_:_<3?p:_<4?u+(p-u)*(4-_):u})(2+i,f=2*m-(m=m<.5?(1+f)*m:m+f-m*f),m),c(i,f,m),c(i-2,f,m),o[3]]},_rgbaToHSBA:function(o){var c,i,f=o[0],m=o[1],_=o[2],u=Math.max(f,m,_),p=u-Math.min(f,m,_);return p==0?i=c=0:(i=p/u,f===u?c=(m-_)/p:m===u?c=2+(_-f)/p:_===u&&(c=4+(f-m)/p),c<0?c+=6:6<=c&&(c-=6)),[c/6,i,u,o[3]]},_rgbaToHSLA:function(o){var c,i,f=o[0],m=o[1],_=o[2],u=Math.max(f,m,_),g=Math.min(f,m,_),p=u+g,g=u-g;return g==0?i=c=0:(i=p<1?g/p:g/(2-p),f===u?c=(m-_)/g:m===u?c=2+(_-f)/g:_===u&&(c=4+(f-m)/g),c<0?c+=6:6<=c&&(c-=6)),[c/6,i,p/2,o[3]]}},t=t.default.ColorConversion,l.default=t},{"../core/main":275}],261:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var p=m();if(p&&p.has(u))return p.get(u);var g,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var b;Object.prototype.hasOwnProperty.call(u,g)&&((b=S?Object.getOwnPropertyDescriptor(u,g):null)&&(b.get||b.set)?Object.defineProperty(y,g,b):y[g]=u[g])}return y.default=u,p&&p.set(u,y),y}(t("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(u){return i.default._validateParameters("alpha",arguments),this.color(u)._getAlpha()},i.default.prototype.blue=function(u){return i.default._validateParameters("blue",arguments),this.color(u)._getBlue()},i.default.prototype.brightness=function(u){return i.default._validateParameters("brightness",arguments),this.color(u)._getBrightness()},i.default.prototype.color=function(){var u;return i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color?arguments[0]:(u=arguments[0]instanceof Array?arguments[0]:arguments,new i.default.Color(this,u))},i.default.prototype.green=function(u){return i.default._validateParameters("green",arguments),this.color(u)._getGreen()},i.default.prototype.hue=function(u){return i.default._validateParameters("hue",arguments),this.color(u)._getHue()},i.default.prototype.lerpColor=function(u,p,g){i.default._validateParameters("lerpColor",arguments);var y,S,b,E=this._colorMode,x=this._colorMaxes;if(E===f.RGB)S=u.levels.map(function(k){return k/255}),b=p.levels.map(function(k){return k/255});else if(E===f.HSB)u._getBrightness(),p._getBrightness(),S=u.hsba,b=p.hsba;else{if(E!==f.HSL)throw new Error("".concat(E,"cannot be used for interpolation."));u._getLightness(),p._getLightness(),S=u.hsla,b=p.hsla}return g=Math.max(Math.min(g,1),0),this.lerp===void 0&&(this.lerp=function(k,T,j){return j*(T-k)+k}),u=this.lerp(S[0],b[0],g),p=this.lerp(S[1],b[1],g),y=this.lerp(S[2],b[2],g),S=this.lerp(S[3],b[3],g),u*=x[E][0],p*=x[E][1],y*=x[E][2],S*=x[E][3],this.color(u,p,y,S)},i.default.prototype.lightness=function(u){return i.default._validateParameters("lightness",arguments),this.color(u)._getLightness()},i.default.prototype.red=function(u){return i.default._validateParameters("red",arguments),this.color(u)._getRed()},i.default.prototype.saturation=function(u){return i.default._validateParameters("saturation",arguments),this.color(u)._getSaturation()};var _=i.default;l.default=_},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],262:[function(y,a,l){function o(k){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(k)}function c(k){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(T){return o(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":o(T)})(k)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.string.trim"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=u(y("../core/main")),f=function(k){if(k&&k.__esModule)return k;if(k===null||c(k)!=="object"&&typeof k!="function")return{default:k};var T=_();if(T&&T.has(k))return T.get(k);var j,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var I;Object.prototype.hasOwnProperty.call(k,j)&&((I=C?Object.getOwnPropertyDescriptor(k,j):null)&&(I.get||I.set)?Object.defineProperty(A,j,I):A[j]=k[j])}return A.default=k,T&&T.set(k,A),A}(y("../core/constants")),m=u(y("./color_conversion"));function _(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,_=function(){return k},k)}function u(k){return k&&k.__esModule?k:{default:k}}function p(k,T){for(var j=0;j<T.length;j++){var A=T[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}var g={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y=/\s*/,x=/(\d{1,3})/,S=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(S.source,"%")),E={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",x.source,",",x.source,",",x.source,"\\)$"].join(y.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(y.source),"i"),RGBA:new RegExp(["^rgba\\(",x.source,",",x.source,",",x.source,",",S.source,"\\)$"].join(y.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",S.source,"\\)$"].join(y.source),"i"),HSL:new RegExp(["^hsl\\(",x.source,",",b.source,",",b.source,"\\)$"].join(y.source),"i"),HSLA:new RegExp(["^hsla\\(",x.source,",",b.source,",",b.source,",",S.source,"\\)$"].join(y.source),"i"),HSB:new RegExp(["^hsb\\(",x.source,",",b.source,",",b.source,"\\)$"].join(y.source),"i"),HSBA:new RegExp(["^hsba\\(",x.source,",",b.source,",",b.source,",",S.source,"\\)$"].join(y.source),"i")},x=(i.default.Color=function(){function k(C,I){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(C._colorMode,C._colorMaxes),![f.RGB,f.HSL,f.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=k._parseInputs.apply(this,I),this._calculateLevels()}var T,j,A;return T=k,A=[{key:"_parseInputs",value:function(C,I,F,N){var z,R=arguments.length,q=this.mode,M=this.maxes[q],D=[];if(3<=R){for(D[0]=C/M[0],D[1]=I/M[1],D[2]=F/M[2],D[3]=typeof N=="number"?N/M[3]:1,z=D.length-1;0<=z;--z){var X=D[z];X<0?D[z]=0:1<X&&(D[z]=1)}return q===f.HSL?m.default._hslaToRGBA(D):q===f.HSB?m.default._hsbaToRGBA(D):D}if(R===1&&typeof C=="string"){if(F=C.trim().toLowerCase(),g[F])return k._parseInputs.call(this,g[F]);if(E.HEX3.test(F))return(D=E.HEX3.exec(F).slice(1).map(function(O){return parseInt(O+O,16)/255}))[3]=1,D;if(E.HEX6.test(F))return(D=E.HEX6.exec(F).slice(1).map(function(O){return parseInt(O,16)/255}))[3]=1,D;if(E.HEX4.test(F))return D=E.HEX4.exec(F).slice(1).map(function(O){return parseInt(O+O,16)/255});if(E.HEX8.test(F))return D=E.HEX8.exec(F).slice(1).map(function(O){return parseInt(O,16)/255});if(E.RGB.test(F))return(D=E.RGB.exec(F).slice(1).map(function(O){return O/255}))[3]=1,D;if(E.RGB_PERCENT.test(F))return(D=E.RGB_PERCENT.exec(F).slice(1).map(function(O){return parseFloat(O)/100}))[3]=1,D;if(E.RGBA.test(F))return D=E.RGBA.exec(F).slice(1).map(function(O,G){return G===3?parseFloat(O):O/255});if(E.RGBA_PERCENT.test(F))return D=E.RGBA_PERCENT.exec(F).slice(1).map(function(O,G){return G===3?parseFloat(O):parseFloat(O)/100});if(E.HSL.test(F)?(D=E.HSL.exec(F).slice(1).map(function(O,G){return G===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:E.HSLA.test(F)&&(D=E.HSLA.exec(F).slice(1).map(function(O,G){return G===0?parseInt(O,10)/360:G===3?parseFloat(O):parseInt(O,10)/100})),(D=D.map(function(O){return Math.max(Math.min(O,1),0)})).length)return m.default._hslaToRGBA(D);if(E.HSB.test(F)?(D=E.HSB.exec(F).slice(1).map(function(O,G){return G===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:E.HSBA.test(F)&&(D=E.HSBA.exec(F).slice(1).map(function(O,G){return G===0?parseInt(O,10)/360:G===3?parseFloat(O):parseInt(O,10)/100})),D.length){for(z=D.length-1;0<=z;--z)D[z]=Math.max(Math.min(D[z],1),0);return m.default._hsbaToRGBA(D)}D=[1,1,1,1]}else{if(R!==1&&R!==2||typeof C!="number")throw new Error("".concat(arguments,"is not a valid color representation."));D[0]=C/M[2],D[1]=C/M[2],D[2]=C/M[2],D[3]=typeof I=="number"?I/M[3]:1,D=D.map(function(O){return Math.max(Math.min(O,1),0)})}return D}}],(j=[{key:"toString",value:function(C){var I=this.levels,F=this._array,N=F[3];switch(C){case"#rrggbb":return"#".concat(I[0]<16?"0".concat(I[0].toString(16)):I[0].toString(16),I[1]<16?"0".concat(I[1].toString(16)):I[1].toString(16),I[2]<16?"0".concat(I[2].toString(16)):I[2].toString(16));case"#rrggbbaa":return"#".concat(I[0]<16?"0".concat(I[0].toString(16)):I[0].toString(16),I[1]<16?"0".concat(I[1].toString(16)):I[1].toString(16),I[2]<16?"0".concat(I[2].toString(16)):I[2].toString(16),I[3]<16?"0".concat(I[3].toString(16)):I[3].toString(16));case"#rgb":return"#".concat(Math.round(15*F[0]).toString(16),Math.round(15*F[1]).toString(16),Math.round(15*F[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*F[0]).toString(16),Math.round(15*F[1]).toString(16),Math.round(15*F[2]).toString(16),Math.round(15*F[3]).toString(16));case"rgb":return"rgb(".concat(I[0],", ",I[1],", ",I[2],")");case"rgb%":return"rgb(".concat((100*F[0]).toPrecision(3),"%, ",(100*F[1]).toPrecision(3),"%, ",(100*F[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*F[0]).toPrecision(3),"%, ",(100*F[1]).toPrecision(3),"%, ",(100*F[2]).toPrecision(3),"%, ",(100*F[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[f.HSB][0],", ",this.hsba[1]*this.maxes[f.HSB][1],", ",this.hsba[2]*this.maxes[f.HSB][2],", ",N,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*N).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[f.HSL][0],", ",this.hsla[1]*this.maxes[f.HSL][1],", ",this.hsla[2]*this.maxes[f.HSL][2],", ",N,")");case"hsla%":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*N).toPrecision(3),"%)");default:return"rgba(".concat(I[0],",",I[1],",",I[2],",",N,")")}}},{key:"setRed",value:function(C){this._array[0]=C/this.maxes[f.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(C){this._array[1]=C/this.maxes[f.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(C){this._array[2]=C/this.maxes[f.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(C){this._array[3]=C/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var C=this._array,I=this.levels=new Array(C.length),F=C.length-1;0<=F;--F)I[F]=Math.round(255*C[F]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(C,I){this.mode=C,this.maxes=I}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[f.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[f.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[f.RGB][1]}},{key:"_getHue",value:function(){return this.mode===f.HSB?(this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[f.HSB][0]):(this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[f.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[f.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[f.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===f.HSB?(this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[f.HSB][1]):(this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[f.HSL][1])}}])&&p(T.prototype,j),A&&p(T,A),k}(),i.default.Color);l.default=x},{"../core/constants":264,"../core/main":275,"./color_conversion":260,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],263:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var p=m();if(p&&p.has(u))return p.get(u);var g,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var b;Object.prototype.hasOwnProperty.call(u,g)&&((b=S?Object.getOwnPropertyDescriptor(u,g):null)&&(b.get||b.set)?Object.defineProperty(y,g,b):y[g]=u[g])}return y.default=u,p&&p.set(u,y),y}(t("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}t("./p5.Color"),i.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},i.default.prototype.endClip=function(){this._renderer.endClip()},i.default.prototype.clip=function(u,p){this._renderer.beginClip(p),u(),this._renderer.endClip(p)},i.default.prototype.background=function(){var u;return(u=this._renderer).background.apply(u,arguments),this},i.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},i.default.prototype.colorMode=function(u,p,g,y,S){return i.default._validateParameters("colorMode",arguments),u!==f.RGB&&u!==f.HSB&&u!==f.HSL||(this._colorMode=u,u=this._colorMaxes[u],arguments.length===2?(u[0]=p,u[1]=p,u[2]=p,u[3]=p):arguments.length===4?(u[0]=p,u[1]=g,u[2]=y):arguments.length===5&&(u[0]=p,u[1]=g,u[2]=y,u[3]=S)),this},i.default.prototype.fill=function(){var u;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(u=this._renderer).fill.apply(u,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var u;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(u=this._renderer).stroke.apply(u,arguments),this},i.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var _=i.default;l.default=_},{"../core/constants":264,"../core/main":275,"./p5.Color":262,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],264:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.QUADRATIC=l.LINEAR=l._CTX_MIDDLE=l._DEFAULT_LEADMULT=l._DEFAULT_TEXT_FILL=l.WORD=l.CHAR=l.BOLDITALIC=l.BOLD=l.ITALIC=l.NORMAL=l.BLUR=l.ERODE=l.DILATE=l.POSTERIZE=l.INVERT=l.OPAQUE=l.GRAY=l.THRESHOLD=l.BURN=l.DODGE=l.SOFT_LIGHT=l.HARD_LIGHT=l.OVERLAY=l.REPLACE=l.SCREEN=l.MULTIPLY=l.EXCLUSION=l.SUBTRACT=l.DIFFERENCE=l.LIGHTEST=l.DARKEST=l.ADD=l.REMOVE=l.BLEND=l.UP_ARROW=l.TAB=l.SHIFT=l.RIGHT_ARROW=l.RETURN=l.OPTION=l.LEFT_ARROW=l.ESCAPE=l.ENTER=l.DOWN_ARROW=l.DELETE=l.CONTROL=l.BACKSPACE=l.ALT=l.AUTO=l.HSL=l.HSB=l.RGB=l.MITER=l.BEVEL=l.ROUND=l.SQUARE=l.PROJECT=l.PIE=l.CHORD=l.OPEN=l.CLOSE=l.TESS=l.QUAD_STRIP=l.QUADS=l.TRIANGLE_STRIP=l.TRIANGLE_FAN=l.TRIANGLES=l.LINE_LOOP=l.LINE_STRIP=l.LINES=l.POINTS=l.BASELINE=l.BOTTOM=l.TOP=l.CENTER=l.LEFT=l.RIGHT=l.RADIUS=l.CORNERS=l.CORNER=l.RAD_TO_DEG=l.DEG_TO_RAD=l.RADIANS=l.DEGREES=l.TWO_PI=l.TAU=l.QUARTER_PI=l.PI=l.HALF_PI=l.WAIT=l.TEXT=l.MOVE=l.HAND=l.CROSS=l.ARROW=l.WEBGL2=l.WEBGL=l.P2D=l.VERSION=void 0,l.RGBA=l.HALF_FLOAT=l.FLOAT=l.UNSIGNED_INT=l.UNSIGNED_BYTE=l.COVER=l.CONTAIN=l.FALLBACK=l.LABEL=l.AXES=l.GRID=l._DEFAULT_FILL=l._DEFAULT_STROKE=l.PORTRAIT=l.LANDSCAPE=l.SMOOTH=l.FLAT=l.MIRROR=l.CLAMP=l.REPEAT=l.NEAREST=l.IMAGE=l.IMMEDIATE=l.TEXTURE=l.FILL=l.STROKE=l.CURVE=l.BEZIER=void 0;var o=Math.PI,c=(l.VERSION="1.9.0",l.P2D="p2d",l.WEBGL="webgl",l.WEBGL2="webgl2",l.ARROW="default",l.CROSS="crosshair",l.HAND="pointer",l.MOVE="move",l.TEXT="text",l.WAIT="wait",o/2),c=(l.HALF_PI=c,o),c=(l.PI=c,o/4),c=(l.QUARTER_PI=c,2*o),c=(l.TAU=c,2*o),c=(l.TWO_PI=c,l.DEGREES="degrees",l.RADIANS="radians",o/180),c=(l.DEG_TO_RAD=c,180/o);l.RAD_TO_DEG=c,l.CORNER="corner",l.CORNERS="corners",l.RADIUS="radius",l.RIGHT="right",l.LEFT="left",l.CENTER="center",l.TOP="top",l.BOTTOM="bottom",l.BASELINE="alphabetic",l.POINTS=0,l.LINES=1,l.LINE_STRIP=3,l.LINE_LOOP=2,l.TRIANGLES=4,l.TRIANGLE_FAN=6,l.TRIANGLE_STRIP=5,l.QUADS="quads",l.QUAD_STRIP="quad_strip",l.TESS="tess",l.CLOSE="close",l.OPEN="open",l.CHORD="chord",l.PIE="pie",l.PROJECT="square",l.SQUARE="butt",l.ROUND="round",l.BEVEL="bevel",l.MITER="miter",l.RGB="rgb",l.HSB="hsb",l.HSL="hsl",l.AUTO="auto",l.ALT=18,l.BACKSPACE=8,l.CONTROL=17,l.DELETE=46,l.DOWN_ARROW=40,l.ENTER=13,l.ESCAPE=27,l.LEFT_ARROW=37,l.OPTION=18,l.RETURN=13,l.RIGHT_ARROW=39,l.SHIFT=16,l.TAB=9,l.UP_ARROW=38,l.BLEND="source-over",l.REMOVE="destination-out",l.ADD="lighter",l.DARKEST="darken",l.LIGHTEST="lighten",l.DIFFERENCE="difference",l.SUBTRACT="subtract",l.EXCLUSION="exclusion",l.MULTIPLY="multiply",l.SCREEN="screen",l.REPLACE="copy",l.OVERLAY="overlay",l.HARD_LIGHT="hard-light",l.SOFT_LIGHT="soft-light",l.DODGE="color-dodge",l.BURN="color-burn",l.THRESHOLD="threshold",l.GRAY="gray",l.OPAQUE="opaque",l.INVERT="invert",l.POSTERIZE="posterize",l.DILATE="dilate",l.ERODE="erode",l.BLUR="blur",l.NORMAL="normal",l.ITALIC="italic",l.BOLD="bold",l.BOLDITALIC="bold italic",l.CHAR="CHAR",l.WORD="WORD",l._DEFAULT_TEXT_FILL="#000000",l._DEFAULT_LEADMULT=1.25,l._CTX_MIDDLE="middle",l.LINEAR="linear",l.QUADRATIC="quadratic",l.BEZIER="bezier",l.CURVE="curve",l.STROKE="stroke",l.FILL="fill",l.TEXTURE="texture",l.IMMEDIATE="immediate",l.IMAGE="image",l.NEAREST="nearest",l.REPEAT="repeat",l.CLAMP="clamp",l.MIRROR="mirror",l.FLAT="flat",l.SMOOTH="smooth",l.LANDSCAPE="landscape",l.PORTRAIT="portrait",l._DEFAULT_STROKE="#000000",l._DEFAULT_FILL="#FFFFFF",l.GRID="grid",l.AXES="axes",l.LABEL="label",l.FALLBACK="fallback",l.CONTAIN="contain",l.COVER="cover",l.UNSIGNED_BYTE="unsigned-byte",l.UNSIGNED_INT="unsigned-int",l.FLOAT="float",l.HALF_FLOAT="half-float",l.RGBA="rgba"},{}],265:[function(t,a,l){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(S)}function c(S){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(b){return o(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":o(b)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(f=t("./main"))&&f.__esModule?f:{default:f},f=function(S){if(S&&S.__esModule)return S;if(S===null||c(S)!=="object"&&typeof S!="function")return{default:S};var b=m();if(b&&b.has(S))return b.get(S);var E,x={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in S){var T;Object.prototype.hasOwnProperty.call(S,E)&&((T=k?Object.getOwnPropertyDescriptor(S,E):null)&&(T.get||T.set)?Object.defineProperty(x,E,T):x[E]=S[E])}return x.default=S,b&&b.set(S,x),x}(t("./constants"));function m(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,m=function(){return S},S)}var _=[f.ARROW,f.CROSS,f.HAND,f.MOVE,f.TEXT,f.WAIT],u=(i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60,window.print),p=!1;function g(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function y(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var S;arguments.length?(S=console).log.apply(S,arguments):p||(u(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(p=!0))},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(S,b,E){var x,k="auto",T=this._curElement.elt;_.includes(S)?k=S:typeof S=="string"&&(x="",b&&E&&typeof b=="number"&&typeof E=="number"&&(x="".concat(b," ").concat(E)),k=S.substring(0,7)==="http://"||S.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(S)?"url(".concat(S,") ").concat(x,", auto"):S),T.style.cursor=k},i.default.prototype.frameRate=function(S){return i.default._validateParameters("frameRate",arguments),typeof S!="number"||S<0?this._frameRate:(this._setProperty("_targetFrameRate",S),S===0&&this._setProperty("_frameRate",S),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(S){return this.frameRate(S)},i.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.webglVersion=f.P2D,i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=g(),i.default.prototype.windowHeight=y(),i.default.prototype._onresize=function(S){this._setProperty("windowWidth",g()),this._setProperty("windowHeight",y());var b=this._isGlobal?window:this;typeof b.windowResized!="function"||(b=b.windowResized(S))===void 0||b||S.preventDefault()},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(S){if(i.default._validateParameters("fullscreen",arguments),S===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(S){if(S=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");S.requestFullscreen?S.requestFullscreen():S.mozRequestFullScreen?S.mozRequestFullScreen():S.webkitRequestFullscreen?S.webkitRequestFullscreen():S.msRequestFullscreen&&S.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(S){var b;return i.default._validateParameters("pixelDensity",arguments),typeof S=="number"?(S!==this._pixelDensity&&(this._pixelDensity=S),(b=this).resizeCanvas(this.width,this.height,!0)):b=this._pixelDensity,b},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(S){return S!==""})},i.default.prototype.getURLParams=function(){for(var S,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,E={};(S=b.exec(location.search))!=null;)S.index===b.lastIndex&&b.lastIndex++,E[S[1]]=S[2];return E},t=i.default,l.default=t},{"./constants":264,"./main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.search":197,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],266:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(_=t("../main"))&&_.__esModule?_:{default:_};t("../internationalization");function c(u,p){p=p||console.log.bind(console),i||m(),i.some(function(g){var y;if(u.message&&u.message.match("\\W?".concat(g.name,"\\W"))!==null)return y=g.type==="function"?"".concat(g.name,"()"):g.name,p("Did you just try to use p5.js's ".concat(y," ").concat(g.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(f)),!0})}var i=null,m=null,f=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},i=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),m=function(){function u(g){return Object.getOwnPropertyNames(g).filter(function(y){return y[0]!=="_"&&!(y in p)&&(p[y]=!0)}).map(function(y){var S=typeof g[y]=="function"?"function":y===y.toUpperCase()?"constant":"variable";return{name:y,type:S}})}var p={};(i=[].concat(u(o.default.prototype),u(t("../constants")))).sort(function(g,y){return y.name.length-g.name.length})},_=(o.default.prototype._helpForMisusedAtTopLevelCode=c,document.readyState!=="complete"&&(window.addEventListener("error",c,!1),window.addEventListener("load",function(){window.removeEventListener("error",c,!1)})),o.default);l.default=_},{"../constants":264,"../internationalization":273,"../main":275,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.starts-with":199,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],267:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(o=t("../main"))&&o.__esModule?o:{default:o};t("../internationalization"),o.default._friendlyFileLoadError=function(){},t=o.default,l.default=t},{"../internationalization":273,"../main":275}],268:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=_(t("../main"));t("../internationalization"),m(t("../constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}function m(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=f();if(g&&g.has(p))return g.get(p);var y,S,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&((S=E?Object.getOwnPropertyDescriptor(p,y):null)&&(S.get||S.set)?Object.defineProperty(b,y,S):b[y]=p[y]);return b.default=p,g&&g.set(p,b),b}function _(p){return p&&p.__esModule?p:{default:p}}i.default._fesCodeReader=function(){};var u=i.default;l.default=u},{"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],269:[function(t,a,l){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function o(){var c=/(^|@)\S+:\d+/,i=/^\s*at .*(\S+:\d+|\(native\))/m,f=/^(eval@)?(\[native code])?$/;return{parse:function(m){return m.stacktrace!==void 0||m["opera#sourceloc"]!==void 0?this.parseOpera(m):m.stack&&m.stack.match(i)?this.parseV8OrIE(m):m.stack?this.parseFFOrSafari(m):void 0},extractLocation:function(m){return m.indexOf(":")===-1?[m]:[(m=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(m.replace(/[()]/g,"")))[1],m[2]||void 0,m[3]||void 0]},parseV8OrIE:function(m){return m.stack.split(`
`).filter(function(_){return!!_.match(i)},this).map(function(_){var u=(_=-1<_.indexOf("(eval ")?_.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):_).replace(/^\s+/,"").replace(/\(eval code/g,"("),p=u.match(/ (\((.+):(\d+):(\d+)\)$)/),u=(u=p?u.replace(p[0],""):u).split(/\s+/).slice(1),p=this.extractLocation(p?p[1]:u.pop());return{functionName:u.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(p[0])?void 0:p[0],lineNumber:p[1],columnNumber:p[2],source:_}},this)},parseFFOrSafari:function(m){return m.stack.split(`
`).filter(function(_){return!_.match(f)},this).map(function(_){var u,p;return(_=-1<_.indexOf(" > eval")?_.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):_).indexOf("@")===-1&&_.indexOf(":")===-1?{functionName:_}:{functionName:(p=_.match(u=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&p[1]?p[1]:void 0,fileName:(p=this.extractLocation(_.replace(u,"")))[0],lineNumber:p[1],columnNumber:p[2],source:_}},this)},parseOpera:function(m){return!m.stacktrace||-1<m.message.indexOf(`
`)&&m.message.split(`
`).length>m.stacktrace.split(`
`).length?this.parseOpera9(m):m.stack?this.parseOpera11(m):this.parseOpera10(m)},parseOpera9:function(m){for(var _=/Line (\d+).*script (?:in )?(\S+)/i,u=m.message.split(`
`),p=[],g=2,y=u.length;g<y;g+=2){var S=_.exec(u[g]);S&&p.push({fileName:S[2],lineNumber:S[1],source:u[g]})}return p},parseOpera10:function(m){for(var _=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=m.stacktrace.split(`
`),p=[],g=0,y=u.length;g<y;g+=2){var S=_.exec(u[g]);S&&p.push({functionName:S[3]||void 0,fileName:S[2],lineNumber:S[1],source:u[g]})}return p},parseOpera11:function(m){return m.stack.split(`
`).filter(function(_){return!!_.match(c)&&!_.match(/^Error created at/)},this).map(function(_){var u,g=_.split("@"),p=this.extractLocation(g.pop()),g=g.shift()||"";return{functionName:g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(u=g.match(/\(([^)]*)\)/)?g.replace(/^[^(]+\(([^)]*)\)$/,"$1"):u)===void 0||u==="[arguments not available]"?void 0:u.split(","),fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:_}},this)}}}t.default._getErrorStackParser=function(){return new o},t=t.default,l.default=t},{"../main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],270:[function(t,a,l){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(c=t("../main"))&&c.__esModule?c:{default:c};(function(m){if(!(m&&m.__esModule)&&!(m===null||f(m)!=="object"&&typeof m!="function")){var _=i();if(_&&_.has(m))return _.get(m);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in m){var y;Object.prototype.hasOwnProperty.call(m,u)&&((y=g?Object.getOwnPropertyDescriptor(m,u):null)&&(y.get||y.set)?Object.defineProperty(p,u,y):p[u]=m[u])}p.default=m,_&&_.set(m,p)}})(t("../constants")),t("../internationalization");function i(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,i=function(){return m},m)}function f(m){return(f=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(m)}c.default._validateParameters=c.default._clearValidateParamsCache=function(){},t=c.default,l.default=t},{"../../../docs/parameterData.json":void 0,"../constants":264,"../internationalization":273,"../main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.map":169,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],271:[function(t,a,l){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(m)}function c(m){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=function(m){if(m&&m.__esModule)return m;if(m===null||c(m)!=="object"&&typeof m!="function")return{default:m};var _=f();if(_&&_.has(m))return _.get(m);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in m){var y;Object.prototype.hasOwnProperty.call(m,u)&&((y=g?Object.getOwnPropertyDescriptor(m,u):null)&&(y.get||y.set)?Object.defineProperty(p,u,y):p[u]=m[u])}return p.default=m,_&&_.set(m,p),p}(t("./constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}l.default={modeAdjust:function(m,_,u,p,g){return g===i.CORNER?{x:m,y:_,w:u,h:p}:g===i.CORNERS?{x:m,y:_,w:u-m,h:p-_}:g===i.RADIUS?{x:m-u,y:_-p,w:2*u,h:2*p}:g===i.CENTER?{x:m-.5*u,y:_-.5*p,w:u,h:p}:void 0}}},{"./constants":264,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],272:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var o=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./internationalization");var c=Promise.resolve();Promise.all([new Promise(function(i,f){document.readyState==="complete"?i():window.addEventListener("load",i,!1)}),c]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":275,"./internationalization":273,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/web.dom-collections.iterator":238}],273:[function(t,a,l){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.setTranslatorLanguage=l.currentTranslatorLanguage=l.availableTranslatorLanguages=l.initialize=l.translator=void 0;var o,c,i=m(t("i18next")),f=m(t("i18next-browser-languagedetector"));function m(p){return p&&p.__esModule?p:{default:p}}function _(p,g){for(var y=0;y<g.length;y++){var S=g[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}var u=function(){function p(S,b){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.init(S,b)}var g,y;return g=p,(y=[{key:"fetchWithTimeout",value:function(S,b){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(S,b),new Promise(function(x,k){return setTimeout(function(){return k(new Error("timeout"))},E)})])}},{key:"init",value:function(S){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=S,this.options=b}},{key:"read",value:function(S,b,E){var x=this.options.loadPath;S===this.options.fallback?E(null,o[S][b]):c.includes(S)?(x=this.services.interpolator.interpolate(x,{lng:S,ns:b}),this.loadUrl(x,E)):E("Not found",!1)}},{key:"loadUrl",value:function(S,b){this.fetchWithTimeout(S).then(function(E){if(E.ok)return E.json();throw new Error("failed loading ".concat(S))},function(){throw new Error("failed loading ".concat(S))}).then(function(E){return b(null,E)}).catch(b)}}])&&_(g.prototype,y),p}();u.type="backend",l.translator=function(p,g){console.debug("p5.js translator called before translations were loaded"),i.default.t(p,g)},l.initialize=function(){return i.default.use(f.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(p){l.translator=p},function(p){return console.debug("Translations failed to load (".concat(p,")"))})},l.availableTranslatorLanguages=function(){return i.default.languages},l.currentTranslatorLanguage=function(p){return i.default.language},l.setTranslatorLanguage=function(p){return i.default.changeLanguage(p||void 0,function(g){return console.debug("Translations failed to load (".concat(g,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238,i18next:3,"i18next-browser-languagedetector":3}],274:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,l.default=t},{"./main":275}],275:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t("./shim");var i=function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=f();if(g&&g.has(p))return g.get(p);var y,S={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var E;Object.prototype.hasOwnProperty.call(p,y)&&((E=b?Object.getOwnPropertyDescriptor(p,y):null)&&(E.get||E.set)?Object.defineProperty(S,y,E):S[y]=p[y])}return S.default=p,g&&g.set(p,S),S}(t("./constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}function m(p,g){for(var y=0;y<g.length;y++){var S=g[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}var _,u=function(){function p(S,x){var E=this;if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=x,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var x=Object.getOwnPropertyNames(p.prototype._registeredMethods),k=!0,T=!1,j=void 0;try{for(var A,C=x[Symbol.iterator]();!(k=(A=C.next()).done);k=!0){var I=A.value;this._registeredMethods[I]=p.prototype._registeredMethods[I].slice()}}catch(O){T=!0,j=O}finally{try{k||C.return==null||C.return()}finally{if(T)throw j}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),p.prototype.callRegisteredHooksFor=function(O){var G=this||p.prototype,K=this._isGlobal?window:this;if(G._registeredMethods.hasOwnProperty(O)){var G=G._registeredMethods[O],Z=!0,O=!1,U=void 0;try{for(var V,L=G[Symbol.iterator]();!(Z=(V=L.next()).done);Z=!0){var H=V.value;typeof H=="function"&&H.call(K)}}catch(se){O=!0,U=se}finally{try{Z||L.return==null||L.return()}finally{if(O)throw U}}}},this._start=function(){E._userNode&&typeof E._userNode=="string"&&(E._userNode=document.getElementById(E._userNode));var O=E._isGlobal?window:E;if(O.preload){E.callRegisteredHooksFor("beforePreload");var G,K=document.getElementById(E._loadingScreenId),Z=(K||((K=document.createElement("div")).innerHTML="Loading...",K.style.position="absolute",K.id=E._loadingScreenId,(E._userNode||document.body).appendChild(K)),E._preloadMethods);for(G in Z){Z[G]=Z[G]||p;var U=Z[G];U!==p.prototype&&U!==p||(E._isGlobal&&(window[G]=E._wrapPreload(E,G)),U=E),E._registeredPreloadMethods[G]=U[G],U[G]=E._wrapPreload(U,G)}O.preload(),E._runIfPreloadsAreDone()}else E._setup(),E._recording||E._draw()},this._runIfPreloadsAreDone=function(){var O,G=this._isGlobal?window:this;G._preloadCount===0&&((O=document.getElementById(G._loadingScreenId))&&O.parentNode.removeChild(O),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),G._setup(),this._recording||G._draw()))},this._decrementPreload=function(){var O=this._isGlobal?window:this;O._preloadDone||typeof O.preload!="function"||(O._setProperty("_preloadCount",O._preloadCount-1),O._runIfPreloadsAreDone())},this._wrapPreload=function(O,G){var K=this;return function(){K._incrementPreload();for(var Z=arguments.length,U=new Array(Z),V=0;V<Z;V++)U[V]=arguments[V];return K._registeredPreloadMethods[G].apply(O,U)}},this._incrementPreload=function(){var O=this._isGlobal?window:this;O._preloadDone||O._setProperty("_preloadCount",O._preloadCount+1)},this._setup=function(){E.callRegisteredHooksFor("beforeSetup"),E.createCanvas(E._defaultCanvasSize.width,E._defaultCanvasSize.height,"p2d");var O=E._isGlobal?window:E;if(typeof O.preload=="function")for(var G in E._preloadMethods)O[G]=E._preloadMethods[G][G],O[G]&&E&&(O[G]=O[G].bind(E));E._millisStart=window.performance.now(),O._preloadDone=!0,typeof O.setup=="function"&&O.setup();var K=document.getElementsByTagName("canvas"),Z=!0,U=!1,V=void 0;try{for(var L,H=K[Symbol.iterator]();!(Z=(L=H.next()).done);Z=!0){var J=L.value;J.dataset.hidden==="true"&&(J.style.visibility="",delete J.dataset.hidden)}}catch(ne){U=!0,V=ne}finally{try{Z||H.return==null||H.return()}finally{if(U)throw V}}E._lastTargetFrameTime=window.performance.now(),E._lastRealFrameTime=window.performance.now(),E._setupDone=!0,(E._accessibleOutputs.grid||E._accessibleOutputs.text)&&E._updateAccsOutput(),E.callRegisteredHooksFor("afterSetup")},this._draw=function(){var O=window.performance.now(),G=O-E._lastTargetFrameTime,K=1e3/E._targetFrameRate;(!E._loop||K-5<=G)&&(E.deltaTime=O-E._lastRealFrameTime,E._setProperty("deltaTime",E.deltaTime),E._frameRate=1e3/E.deltaTime,E.redraw(),E._lastTargetFrameTime=Math.max(E._lastTargetFrameTime+K,O),E._lastRealFrameTime=O,E._updateMouseCoords!==void 0&&(E._updateMouseCoords(),E._setProperty("movedX",0),E._setProperty("movedY",0))),E._loop&&(E._requestAnimId=window.requestAnimationFrame(E._draw))},this._setProperty=function(O,G){E[O]=G,E._isGlobal&&(window[O]=G)},this.remove=function(){E._startListener&&window.removeEventListener("load",E._startListener,!1);var O=document.getElementById(E._loadingScreenId);if(O&&(O.parentNode.removeChild(O),E._incrementPreload()),E._curElement){for(var G in E._loop=!1,E._requestAnimId&&window.cancelAnimationFrame(E._requestAnimId),E._events)window.removeEventListener(G,E._events[G]);var K=!0,O=!1,Z=void 0;try{for(var U,V=E._elements[Symbol.iterator]();!(K=(U=V.next()).done);K=!0){var L,H=U.value;for(L in H.elt&&H.elt.parentNode&&H.elt.parentNode.removeChild(H.elt),H._events)H.elt.removeEventListener(L,H._events[L])}}catch(xe){O=!0,Z=xe}finally{try{K||V.return==null||V.return()}finally{if(O)throw Z}}var J=E;E._registeredMethods.remove.forEach(function(xe){xe!==void 0&&xe.call(J)})}if(E._isGlobal){for(var ne in p.prototype)try{delete window[ne]}catch{window[ne]=void 0}for(var se in E)if(E.hasOwnProperty(se))try{delete window[se]}catch{window[se]=void 0}p.instance=null}},this._registeredMethods.init.forEach(function(O){O!==void 0&&O.call(this)},this),this._setupPromisePreloads();var F,N,z=this._createFriendlyGlobalFunctionBinder();if(S)S(this),p._checkForUserDefinedFunctions(this);else{for(var R in this._isGlobal=!0,p.instance=this,p.prototype)typeof p.prototype[R]=="function"?(F=R.substring(2),this._events.hasOwnProperty(F)||(Math.hasOwnProperty(R)&&Math[R]===p.prototype[R]?z(R,p.prototype[R]):z(R,p.prototype[R].bind(this)))):z(R,p.prototype[R]);for(var q in this)this.hasOwnProperty(q)&&z(q,this[q])}for(N in this._events){var M=this["_on".concat(N)];M&&(M=M.bind(this),window.addEventListener(N,M,{passive:!1}),this._events[N]=M)}function D(){E._setProperty("focused",!0)}function X(){E._setProperty("focused",!1)}window.addEventListener("focus",D),window.addEventListener("blur",X),this.registerMethod("remove",function(){window.removeEventListener("focus",D),window.removeEventListener("blur",X)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var g,y;return g=p,(y=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=i.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(S,b){p.prototype._preloadMethods.hasOwnProperty(S)||(p.prototype._preloadMethods[S]=b)}},{key:"registerMethod",value:function(S,b){var E=this||p.prototype;E._registeredMethods.hasOwnProperty(S)||(E._registeredMethods[S]=[]),E._registeredMethods[S].push(b)}},{key:"unregisterMethod",value:function(S,b){var E=this||p.prototype;if(E._registeredMethods.hasOwnProperty(S)){for(var x=E._registeredMethods[S],k=[],T=0;T<x.length;T++)x[T]===b&&k.push(T);for(var j=k.length-1;0<=j;j--)x.splice(k[j],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=S.globalObject||window;return S.log||console.log.bind(console),function(E,x){p.disableFriendlyErrors,b[E]=x}}}])&&m(g.prototype,y),p}();for(_ in u.instance=null,u.disableFriendlyErrors=!1,i)u.prototype[_]=i[_];u.VERSION=i.VERSION,u.prototype._preloadMethods={loadJSON:u.prototype,loadImage:u.prototype,loadStrings:u.prototype,loadXML:u.prototype,loadBytes:u.prototype,loadTable:u.prototype,loadFont:u.prototype,loadModel:u.prototype,loadShader:u.prototype},u.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},u.prototype._registeredPreloadMethods={},l.default=u},{"./constants":264,"./shim":286,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-own-property-names":179,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],276:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("./main"))&&t.__esModule?t:{default:t};function c(i,f){for(var m=0;m<f.length;m++){var _=f[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.Element=function(){function i(u,p){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.elt=u,this._pInst=this._pixelsState=p,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var f,m,_;return f=i,_=[{key:"_adjustListener",value:function(u,p,g){return p===!1?o.default.Element._detachListener(u,g):o.default.Element._attachListener(u,p,g),this}},{key:"_attachListener",value:function(u,p,g){g._events[u]&&o.default.Element._detachListener(u,g),p=p.bind(g),g.elt.addEventListener(u,p,!1),g._events[u]=p}},{key:"_detachListener",value:function(u,p){var g=p._events[u];p.elt.removeEventListener(u,g,!1),p._events[u]=null}}],(m=[{key:"parent",value:function(u){return u===void 0?this.elt.parentNode:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof o.default.Element&&(u=u.elt),u.appendChild(this.elt),this)}},{key:"id",value:function(u){return u===void 0?this.elt.id:(this.elt.id=u,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(u){return u===void 0?this.elt.className:(this.elt.className=u,this)}},{key:"mousePressed",value:function(u){return o.default.Element._adjustListener("mousedown",function(p){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(p),u.call(this,p)},this),this}},{key:"doubleClicked",value:function(u){return o.default.Element._adjustListener("dblclick",u,this),this}},{key:"mouseWheel",value:function(u){return o.default.Element._adjustListener("wheel",u,this),this}},{key:"mouseReleased",value:function(u){return o.default.Element._adjustListener("mouseup",u,this),this}},{key:"mouseClicked",value:function(u){return o.default.Element._adjustListener("click",u,this),this}},{key:"mouseMoved",value:function(u){return o.default.Element._adjustListener("mousemove",u,this),this}},{key:"mouseOver",value:function(u){return o.default.Element._adjustListener("mouseover",u,this),this}},{key:"mouseOut",value:function(u){return o.default.Element._adjustListener("mouseout",u,this),this}},{key:"touchStarted",value:function(u){return o.default.Element._adjustListener("touchstart",u,this),this}},{key:"touchMoved",value:function(u){return o.default.Element._adjustListener("touchmove",u,this),this}},{key:"touchEnded",value:function(u){return o.default.Element._adjustListener("touchend",u,this),this}},{key:"dragOver",value:function(u){return o.default.Element._adjustListener("dragover",u,this),this}},{key:"dragLeave",value:function(u){return o.default.Element._adjustListener("dragleave",u,this),this}},{key:"_setProperty",value:function(u,p){this[u]=p}}])&&c(f.prototype,m),_&&c(f,_),i}(),t=o.default.Element,l.default=t},{"./main":275}],277:[function(t,a,l){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(E)}function c(E){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(b=t("./main"))&&b.__esModule?b:{default:b},f=function(E){if(E&&E.__esModule)return E;if(E===null||c(E)!=="object"&&typeof E!="function")return{default:E};var x=m();if(x&&x.has(E))return x.get(E);var k,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var A;Object.prototype.hasOwnProperty.call(E,k)&&((A=j?Object.getOwnPropertyDescriptor(E,k):null)&&(A.get||A.set)?Object.defineProperty(T,k,A):T[k]=E[k])}return T.default=E,x&&x.set(E,T),T}(t("./constants"));function m(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,m=function(){return E},E)}function _(E,x){for(var k=0;k<x.length;k++){var T=x[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}function u(E,x){return(u=Object.setPrototypeOf||function(k,T){return k.__proto__=T,k})(E,x)}function p(E){return function(){var x,k=S(E);return g(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=S(this).constructor,Reflect.construct(k,arguments,x)):k.apply(this,arguments))}}function g(E,x){return!x||c(x)!=="object"&&typeof x!="function"?y(E):x}function y(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function S(E){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(E)}i.default.Graphics=function(E){var x=T;if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),E&&u(x,E);var k=p(T);function T(j,A,q,I,F){var N;if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");R=F||document.createElement("canvas"),(N=k.call(this,R,I)).canvas=R;var z,R=q||f.P2D,q=I._userNode||document.body;for(z in F||q.appendChild(N.canvas),i.default.prototype)N[z]||(typeof i.default.prototype[z]=="function"?N[z]=i.default.prototype[z].bind(y(N)):N[z]=i.default.prototype[z]);return i.default.prototype._initializeInstanceVariables.apply(y(N)),N.width=j,N.height=A,N._pixelDensity=I._pixelDensity,R===f.WEBGL?N._renderer=new i.default.RendererGL(N.canvas,y(N),!1):N._renderer=new i.default.Renderer2D(N.canvas,y(N),!1),I._elements.push(y(N)),Object.defineProperty(y(N),"deltaTime",{get:function(){return this._pInst.deltaTime}}),N._renderer.resize(j,A),N._renderer._applyDefaults(),g(N,y(N))}return x=T,(E=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var j,A=this._pInst._elements.indexOf(this);for(j in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(j,this._events[j])}},{key:"createFramebuffer",value:function(j){return new i.default.Framebuffer(this,j)}}])&&_(x.prototype,E),T}(i.default.Element);var b=i.default.Graphics;l.default=b},{"./constants":264,"./main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],278:[function(t,a,l){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(S=t("./main"))&&S.__esModule?S:{default:S},i=function(E){if(E&&E.__esModule)return E;if(E===null||m(E)!=="object"&&typeof E!="function")return{default:E};var x=f();if(x&&x.has(E))return x.get(E);var k,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var A;Object.prototype.hasOwnProperty.call(E,k)&&((A=j?Object.getOwnPropertyDescriptor(E,k):null)&&(A.get||A.set)?Object.defineProperty(T,k,A):T[k]=E[k])}return T.default=E,x&&x.set(E,T),T}(t("../core/constants"));function f(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,f=function(){return E},E)}function m(E){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(E)}function _(E,x){for(var k=0;k<x.length;k++){var T=x[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}function u(E,x){return(u=Object.setPrototypeOf||function(k,T){return k.__proto__=T,k})(E,x)}function p(E){return function(){var x,k,T=y(E);return x=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(x=y(this).constructor,Reflect.construct(T,arguments,x)):T.apply(this,arguments),T=this,!(k=x)||m(k)!=="object"&&typeof k!="function"?g(T):k}}function g(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function y(E){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(E)}var S=function(E){var x=T;if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),E&&u(x,E);var k=p(T);function T(j,A,C){var I;if(this instanceof T)return(I=k.call(this,j,A)).canvas=j,I._pixelsState=A,C?(I._isMainCanvas=!0,I._pInst._setProperty("_curElement",g(I)),I._pInst._setProperty("canvas",I.canvas),I._pInst._setProperty("width",I.width),I._pInst._setProperty("height",I.height)):(I.canvas.style.display="none",I._styles=[]),I._clipping=!1,I._clipInvert=!1,I._textSize=12,I._textLeading=15,I._textFont="sans-serif",I._textStyle=i.NORMAL,I._textAscent=null,I._textDescent=null,I._textAlign=i.LEFT,I._textBaseline=i.BASELINE,I._textWrap=i.WORD,I._rectMode=i.CORNER,I._ellipseMode=i.CENTER,I._curveTightness=0,I._imageMode=i.CORNER,I._tint=null,I._doStroke=!0,I._doFill=!0,I._strokeSet=!1,I._fillSet=!1,I._leadingSet=!1,I._pushPopDepth=0,I;throw new TypeError("Cannot call a class as a function")}return x=T,(E=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(j){this._pushPopDepth--,j.properties&&Object.assign(this,j.properties)}},{key:"beginClip",value:function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=j.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(j,A){this.width=j,this.height=A,this.elt.width=j*this._pInst._pixelDensity,this.elt.height=A*this._pInst._pixelDensity,this.elt.style.width="".concat(j,"px"),this.elt.style.height="".concat(A,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(j,A,C,I){var F=this._pixelsState,N=F._pixelDensity,z=this.canvas;if(j===void 0&&A===void 0)j=A=0,C=F.width,I=F.height;else if(j*=N,A*=N,C===void 0&&I===void 0)return j<0||A<0||j>=z.width||A>=z.height?[0,0,0,0]:this._getPixel(j,A);return F=new c.default.Image(C*N,I*N),F.pixelDensity(N),F.canvas.getContext("2d").drawImage(z,j,A,C*N,I*N,0,0,C*N,I*N),F}},{key:"textLeading",value:function(j){return typeof j=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",j),this._pInst):this._textLeading}},{key:"textStyle",value:function(j){return j?(j!==i.NORMAL&&j!==i.ITALIC&&j!==i.BOLD&&j!==i.BOLDITALIC||this._setProperty("_textStyle",j),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(j,A){return j!==void 0?(this._setProperty("_textAlign",j),A!==void 0&&this._setProperty("_textBaseline",A),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(j){return this._setProperty("_textWrap",j),this._textWrap}},{key:"text",value:function(j,A,C,I,F){var N,z,R,q,M=this._pInst,D=this._textWrap,X=Number.MAX_VALUE,O=C;if((this._doFill||this._doStroke)&&j!==void 0){if(N=(j=(j=typeof j!="string"?j.toString():j).replace(/(\t)/g,"  ")).split(`
`),I!==void 0){switch(this._rectMode===i.CENTER&&(A-=I/2),this._textAlign){case i.CENTER:A+=I/2;break;case i.RIGHT:A+=I}if(F!==void 0){this._rectMode===i.CENTER&&(C-=F/2,O-=F/2);var j=C,G=M.textAscent();switch(this._textBaseline){case i.BOTTOM:q=C+F,C=Math.max(q,C),O+=G;break;case i.CENTER:q=C+F/2,C=Math.max(q,C),O+=G/2}X=C+F-G,this._textBaseline===i.CENTER&&(X=j+F-G/2)}else this._textBaseline!==i.BOTTOM&&this._textBaseline!==i.CENTER||(O=C-(j=M.textSize()*this._textLeading)/2,X=C+j/2);if(D===i.WORD){for(var K=[],Z=0;Z<N.length;Z++){for(var U="",V=N[Z].split(" "),L=0;L<V.length;L++)z="".concat(U+V[L])+" ",U=I<(R=this.textWidth(z))&&0<U.length?(K.push(U),"".concat(V[L])+" "):z;K.push(U)}var H=0;this._textBaseline===i.CENTER?H=(K.length-1)*M.textLeading()/2:this._textBaseline===i.BOTTOM&&(H=(K.length-1)*M.textLeading());for(var J=0;J<N.length;J++){U="",V=N[J].split(" ");for(var ne=0;ne<V.length;ne++)z="".concat(U+V[ne])+" ",I<(R=this.textWidth(z))&&0<U.length?(this._renderText(M,U.trim(),A,C-H,X,O),U="".concat(V[ne])+" ",C+=M.textLeading()):U=z;this._renderText(M,U.trim(),A,C-H,X,O),C+=M.textLeading()}}else{for(var se=[],fe=0;fe<N.length;fe++)for(var xe=N[fe].split(U=""),he=0;he<xe.length;he++)z="".concat(U+xe[he]),(R=this.textWidth(z))<=I?U+=xe[he]:I<R&&0<U.length&&(se.push(U),U="".concat(xe[he]));se.push(U);var _e=0;this._textBaseline===i.CENTER?_e=(se.length-1)*M.textLeading()/2:this._textBaseline===i.BOTTOM&&(_e=(se.length-1)*M.textLeading());for(var ye=0;ye<N.length;ye++){xe=N[ye].split(U="");for(var ue=0;ue<xe.length;ue++)z="".concat(U+xe[ue]),(R=this.textWidth(z))<=I?U+=xe[ue]:I<R&&0<U.length&&(this._renderText(M,U.trim(),A,C-_e,X,O),C+=M.textLeading(),U="".concat(xe[ue]))}this._renderText(M,U.trim(),A,C-_e,X,O),C+=M.textLeading()}}else{var pe=0;this._textBaseline===i.CENTER?pe=(N.length-1)*M.textLeading()/2:this._textBaseline===i.BOTTOM&&(pe=(N.length-1)*M.textLeading());for(var ke=0;ke<N.length;ke++)this._renderText(M,N[ke],A,C-pe,X,O-pe),C+=M.textLeading()}return M}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return m(j)==="object"&&j.font&&j.font.supported}},{key:"_updateTextMetrics",value:function(){var j,A,C,I,F,N;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((j=document.createElement("span")).style.fontFamily=this._textFont,j.style.fontSize="".concat(this._textSize,"px"),j.innerHTML="ABCjgq|",(N=document.createElement("div")).style.display="inline-block",N.style.width="1px",N.style.height="0px",I=((A=document.createElement("div")).appendChild(j),A.appendChild(N),A.style.height="0px",A.style.overflow="hidden",document.body.appendChild(A),N.style.verticalAlign="baseline",b(N)),F=b(j),C=I[1]-F[1],I=(N.style.verticalAlign="bottom",b(N)),F=b(j),N=I[1]-F[1]-C,document.body.removeChild(A),this._setProperty("_textAscent",C),this._setProperty("_textDescent",N)),this}}])&&_(x.prototype,E),T}(c.default.Element);function b(E){var x=0,k=0;if(E.offsetParent)for(;x+=E.offsetLeft,k+=E.offsetTop,E=E.offsetParent;);else x+=E.offsetLeft,k+=E.offsetTop;return[x,k]}S.prototype.textSize=function(E){return typeof E=="number"?(this._setProperty("_textSize",E),this._leadingSet||this._setProperty("_textLeading",E*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},c.default.Renderer=S,t=c.default.Renderer,l.default=t},{"../core/constants":264,"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],279:[function(E,a,l){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(x)}function c(x){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(x)}E("core-js/modules/es.symbol"),E("core-js/modules/es.symbol.description"),E("core-js/modules/es.symbol.iterator"),E("core-js/modules/es.array.concat"),E("core-js/modules/es.array.fill"),E("core-js/modules/es.array.for-each"),E("core-js/modules/es.array.iterator"),E("core-js/modules/es.array.join"),E("core-js/modules/es.array.slice"),E("core-js/modules/es.function.name"),E("core-js/modules/es.number.to-fixed"),E("core-js/modules/es.object.get-own-property-descriptor"),E("core-js/modules/es.object.get-prototype-of"),E("core-js/modules/es.object.to-string"),E("core-js/modules/es.reflect.construct"),E("core-js/modules/es.reflect.get"),E("core-js/modules/es.regexp.to-string"),E("core-js/modules/es.string.iterator"),E("core-js/modules/es.weak-map"),E("core-js/modules/web.dom-collections.iterator"),E("core-js/modules/es.array.concat"),E("core-js/modules/es.array.fill"),E("core-js/modules/es.array.for-each"),E("core-js/modules/es.array.join"),E("core-js/modules/es.array.slice"),E("core-js/modules/es.function.name"),E("core-js/modules/es.number.to-fixed"),E("core-js/modules/es.object.get-prototype-of"),E("core-js/modules/es.object.to-string"),E("core-js/modules/es.regexp.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(b=E("./main"))&&b.__esModule?b:{default:b},f=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var k=m();if(k&&k.has(x))return k.get(x);var T,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in x){var C;Object.prototype.hasOwnProperty.call(x,T)&&((C=A?Object.getOwnPropertyDescriptor(x,T):null)&&(C.get||C.set)?Object.defineProperty(j,T,C):j[T]=x[T])}return j.default=x,k&&k.set(x,j),j}(E("./constants"));function m(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,m=function(){return x},x)}function _(x,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(x,j.key,j)}}function u(x,k,T){return(u=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(I,A,C){var I=function(F,N){for(;!Object.prototype.hasOwnProperty.call(F,N)&&(F=y(F))!==null;);return F}(I,A);if(I)return(I=Object.getOwnPropertyDescriptor(I,A)).get?I.get.call(C):I.value})(x,k,T||x)}function p(x,k){return(p=Object.setPrototypeOf||function(T,j){return T.__proto__=j,T})(x,k)}function g(x){return function(){var k,T=y(x),T=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=y(this).constructor,Reflect.construct(T,arguments,k)):T.apply(this,arguments),this);if(!k||c(k)!=="object"&&typeof k!="function"){if(T!==void 0)return T;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(x)}E("./p5.Renderer");var S="rgba(0,0,0,0)",b=function(x){var k=j;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),x&&p(k,x);var T=g(j);function j(A,C,I){if(this instanceof j)return(A=T.call(this,A,C,I)).drawingContext=A.canvas.getContext("2d"),A._pInst._setProperty("drawingContext",A.drawingContext),A;throw new TypeError("Cannot call a class as a function")}return k=j,(x=[{key:"getFilterGraphicsLayer",value:function(){var A;return this.filterGraphicsLayer||(A=(this._pInst instanceof i.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new i.default.Graphics(this.width,this.height,f.WEBGL,A)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=f.BLEND,this._setFill(f._DEFAULT_FILL),this._setStroke(f._DEFAULT_STROKE),this.drawingContext.lineCap=f.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(A,C){u(y(j.prototype),"resize",this).call(this,A,C),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var A,C;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof i.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(A=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(A,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(A=this._getFill(),C=(C=this._pInst).color.apply(C,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(C.levels),C=C.toString(),this._setFill(C),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(A),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setFill(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",A.levels)}},{key:"stroke",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setStroke(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",A.levels)}},{key:"erase",value:function(A,C){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,A=this._pInst.color(255,A).toString(),this.drawingContext.fillStyle=A,this._cachedStrokeStyle=this.drawingContext.strokeStyle,A=this._pInst.color(255,C).toString(),this.drawingContext.strokeStyle=A,C=this._cachedBlendMode,this.blendMode(f.REMOVE),this._cachedBlendMode=C,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var A=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},A=(u(y(j.prototype),"beginClip",this).call(this,A),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),A=(this.drawingContext.fillStyle=A,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),A=(this.drawingContext.strokeStyle=A,this._cachedBlendMode);this.blendMode(f.BLEND),this._cachedBlendMode=A,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),u(y(j.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(A,C,I,F,N,z,R,q,M){A.gifProperties&&A._animateGif(this._pInst);try{i.default.MediaElement&&A instanceof i.default.MediaElement&&A._ensureCanvas();var D=(D=this._tint&&A.canvas?this._getTintedImageCanvas(A):D)||A.canvas||A.elt,X=1;A.width&&0<A.width&&(X=D.width/A.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(D,X*C,X*I,X*F,X*N,z,R,q,M),this._isErasing&&this._pInst.erase()}catch(O){if(O.name!=="NS_ERROR_NOT_AVAILABLE")throw O}}},{key:"_getTintedImageCanvas",value:function(A){if(!A.canvas)return A;A.tintCanvas||(A.tintCanvas=document.createElement("canvas")),A.tintCanvas.width!==A.canvas.width&&(A.tintCanvas.width=A.canvas.width),A.tintCanvas.height!==A.canvas.height&&(A.tintCanvas.height=A.canvas.height);var C=A.tintCanvas.getContext("2d");return C.save(),C.clearRect(0,0,A.canvas.width,A.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(C.drawImage(A.canvas,0,0),C.globalCompositeOperation="luminosity",C.drawImage(A.canvas,0,0),C.globalCompositeOperation="color",C.drawImage(A.canvas,0,0),C.globalCompositeOperation="multiply",C.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),C.fillRect(0,0,A.canvas.width,A.canvas.height),C.globalCompositeOperation="destination-in"),C.globalAlpha=this._tint[3]/255,C.drawImage(A.canvas,0,0),C.restore(),A.tintCanvas}},{key:"blendMode",value:function(A){if(A===f.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(A!==f.BLEND&&A!==f.REMOVE&&A!==f.DARKEST&&A!==f.LIGHTEST&&A!==f.DIFFERENCE&&A!==f.MULTIPLY&&A!==f.EXCLUSION&&A!==f.SCREEN&&A!==f.REPLACE&&A!==f.OVERLAY&&A!==f.HARD_LIGHT&&A!==f.SOFT_LIGHT&&A!==f.DODGE&&A!==f.BURN&&A!==f.ADD)throw new Error("Mode ".concat(A," not recognized."));this._cachedBlendMode=A,this.drawingContext.globalCompositeOperation=A}}},{key:"blend",value:function(){for(var A=this.drawingContext.globalCompositeOperation,C=arguments.length,I=new Array(C),F=0;F<C;F++)I[F]=arguments[F];var N=I[I.length-1],z=Array.prototype.slice.call(I,0,I.length-1);this.drawingContext.globalCompositeOperation=N,i.default.prototype.copy.apply(this,z),this.drawingContext.globalCompositeOperation=A}},{key:"_getPixel",value:function(A,C){return A=this.drawingContext.getImageData(A,C,1,1).data,[A[0],A[1],A[2],A[3]]}},{key:"loadPixels",value:function(){var A=this._pixelsState,C=A._pixelDensity,I=this.width*C,C=this.height*C,I=this.drawingContext.getImageData(0,0,I,C);A._setProperty("imageData",I),A._setProperty("pixels",I.data)}},{key:"set",value:function(A,C,I){A=Math.floor(A),C=Math.floor(C);var F=this._pixelsState;if(I instanceof i.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(F._pixelDensity,F._pixelDensity),this.drawingContext.clearRect(A,C,I.width,I.height),this.drawingContext.drawImage(I.canvas,A,C),this.drawingContext.restore();else{var N=0,z=0,R=0,q=0,M=4*(C*F._pixelDensity*(this.width*F._pixelDensity)+A*F._pixelDensity);if(F.imageData||F.loadPixels.call(F),typeof I=="number")M<F.pixels.length&&(R=z=N=I,q=255);else if(I instanceof Array){if(I.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");M<F.pixels.length&&(N=I[0],z=I[1],R=I[2],q=I[3])}else I instanceof i.default.Color&&M<F.pixels.length&&(N=I.levels[0],z=I.levels[1],R=I.levels[2],q=I.levels[3]);for(var D=0;D<F._pixelDensity;D++)for(var X=0;X<F._pixelDensity;X++)M=4*((C*F._pixelDensity+X)*this.width*F._pixelDensity+(A*F._pixelDensity+D)),F.pixels[M]=N,F.pixels[M+1]=z,F.pixels[M+2]=R,F.pixels[M+3]=q}}},{key:"updatePixels",value:function(A,C,I,F){var N=this._pixelsState,z=N._pixelDensity;A===void 0&&C===void 0&&I===void 0&&F===void 0&&(C=A=0,I=this.width,F=this.height),A*=z,C*=z,I*=z,F*=z,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=N.imageData),this.drawingContext.putImageData(N.imageData,A,C,0,0,I,F)}},{key:"_acuteArcToBezier",value:function(A,C){var z=C/2,I=Math.cos(z),q=Math.sin(z),F=1/Math.tan(z),z=A+z,N=Math.cos(z),z=Math.sin(z),R=(4-I)/3,q=q+(I-R)*F;return{ax:Math.cos(A).toFixed(7),ay:Math.sin(A).toFixed(7),bx:(R*N+q*z).toFixed(7),by:(R*z-q*N).toFixed(7),cx:(R*N-q*z).toFixed(7),cy:(R*z+q*N).toFixed(7),dx:Math.cos(A+C).toFixed(7),dy:Math.sin(A+C).toFixed(7)}}},{key:"arc",value:function(A,C,I,F,N,z,R){var q,M=this.drawingContext,D=I/2,X=F/2,O=[];for(A+=D,C+=X;1e-5<=z-N;)q=Math.min(z-N,f.HALF_PI),O.push(this._acuteArcToBezier(N,q)),N+=q;return this._doFill&&(this._clipping||M.beginPath(),O.forEach(function(G,K){K===0&&M.moveTo(A+G.ax*D,C+G.ay*X),M.bezierCurveTo(A+G.bx*D,C+G.by*X,A+G.cx*D,C+G.cy*X,A+G.dx*D,C+G.dy*X)}),R!==f.PIE&&R!=null||M.lineTo(A,C),M.closePath(),this._clipping||M.fill()),this._doStroke&&(this._clipping||M.beginPath(),O.forEach(function(G,K){K===0&&M.moveTo(A+G.ax*D,C+G.ay*X),M.bezierCurveTo(A+G.bx*D,C+G.by*X,A+G.cx*D,C+G.cy*X,A+G.dx*D,C+G.dy*X)}),R===f.PIE?(M.lineTo(A,C),M.closePath()):R===f.CHORD&&M.closePath(),this._clipping||M.stroke()),this}},{key:"ellipse",value:function(O){var C=this.drawingContext,I=this._doFill,F=this._doStroke,N=parseFloat(O[0]),z=parseFloat(O[1]),X=parseFloat(O[2]),O=parseFloat(O[3]);if(I&&!F){if(this._getFill()===S)return this}else if(!I&&F&&this._getStroke()===S)return this;var R=X/2*.5522847498,q=O/2*.5522847498,M=N+X,D=z+O,X=N+X/2,O=z+O/2;this._clipping||C.beginPath(),C.moveTo(N,O),C.bezierCurveTo(N,O-q,X-R,z,X,z),C.bezierCurveTo(X+R,z,M,O-q,M,O),C.bezierCurveTo(M,O+q,X+R,D,X,D),C.bezierCurveTo(X-R,D,N,O+q,N,O),!this._clipping&&I&&C.fill(),!this._clipping&&F&&C.stroke()}},{key:"line",value:function(A,C,I,F){var N=this.drawingContext;return this._doStroke&&this._getStroke()!==S&&(this._clipping||N.beginPath(),N.moveTo(A,C),N.lineTo(I,F),N.stroke()),this}},{key:"point",value:function(A,C){var I,F,N=this.drawingContext;return!this._doStroke||this._getStroke()===S?this:(I=this._getStroke(),F=this._getFill(),this._clipping||this._setFill(I),this._clipping||N.beginPath(),N.arc(A,C,N.lineWidth/2,0,f.TWO_PI,!1),void(this._clipping||(N.fill(),this._setFill(F))))}},{key:"quad",value:function(A,C,I,F,N,z,R,q){var M=this.drawingContext,D=this._doFill,X=this._doStroke;if(D&&!X){if(this._getFill()===S)return this}else if(!D&&X&&this._getStroke()===S)return this;return this._clipping||M.beginPath(),M.moveTo(A,C),M.lineTo(I,F),M.lineTo(N,z),M.lineTo(R,q),M.closePath(),!this._clipping&&D&&M.fill(),!this._clipping&&X&&M.stroke(),this}},{key:"rect",value:function(X){var C,I,F=X[0],N=X[1],z=X[2],R=X[3],q=X[4],M=X[5],D=X[6],X=X[7],O=this.drawingContext,G=this._doFill,K=this._doStroke;if(G&&!K){if(this._getFill()===S)return this}else if(!G&&K&&this._getStroke()===S)return this;return this._clipping||O.beginPath(),q===void 0?O.rect(F,N,z,R):(M===void 0&&(M=q),D===void 0&&(D=M),X===void 0&&(X=D),K=(G=Math.abs(z))/2,I=(C=Math.abs(R))/2,C<2*(q=G<2*q?K:q)&&(q=I),C<2*(M=G<2*M?K:M)&&(M=I),C<2*(D=G<2*D?K:D)&&(D=I),C<2*(X=G<2*X?K:X)&&(X=I),this._clipping||O.beginPath(),O.moveTo(F+q,N),O.arcTo(F+z,N,F+z,N+R,M),O.arcTo(F+z,N+R,F,N+R,D),O.arcTo(F,N+R,F,N,X),O.arcTo(F,N,F+z,N,q),O.closePath()),!this._clipping&&this._doFill&&O.fill(),!this._clipping&&this._doStroke&&O.stroke(),this}},{key:"triangle",value:function(D){var C=this.drawingContext,I=this._doFill,F=this._doStroke,N=D[0],z=D[1],R=D[2],q=D[3],M=D[4],D=D[5];if(I&&!F){if(this._getFill()===S)return this}else if(!I&&F&&this._getStroke()===S)return this;this._clipping||C.beginPath(),C.moveTo(N,z),C.lineTo(R,q),C.lineTo(M,D),C.closePath(),!this._clipping&&I&&C.fill(),!this._clipping&&F&&C.stroke()}},{key:"endShape",value:function(A,C,I,F,N,z,R){if(C.length!==0&&(this._doStroke||this._doFill)){var q,M,D,X=A===f.CLOSE,O=(X&&!z&&C.push(C[0]),C.length);if(I&&R===null){if(3<O){var G=[],K=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[1][0],C[1][1]),M=1;M+2<O;M++)q=C[M],G[0]=[q[0],q[1]],G[1]=[q[0]+(K*C[M+1][0]-K*C[M-1][0])/6,q[1]+(K*C[M+1][1]-K*C[M-1][1])/6],G[2]=[C[M+1][0]+(K*C[M][0]-K*C[M+2][0])/6,C[M+1][1]+(K*C[M][1]-K*C[M+2][1])/6],G[3]=[C[M+1][0],C[M+1][1]],this.drawingContext.bezierCurveTo(G[1][0],G[1][1],G[2][0],G[2][1],G[3][0],G[3][1]);X&&this.drawingContext.lineTo(C[M+1][0],C[M+1][1]),this._doFillStrokeClose(X)}}else if(F&&R===null){for(this._clipping||this.drawingContext.beginPath(),M=0;M<O;M++)C[M].isVert?C[M].moveTo?this.drawingContext.moveTo(C[M][0],C[M][1]):this.drawingContext.lineTo(C[M][0],C[M][1]):this.drawingContext.bezierCurveTo(C[M][0],C[M][1],C[M][2],C[M][3],C[M][4],C[M][5]);this._doFillStrokeClose(X)}else if(N&&R===null){for(this._clipping||this.drawingContext.beginPath(),M=0;M<O;M++)C[M].isVert?C[M].moveTo?this.drawingContext.moveTo(C[M][0],C[M][1]):this.drawingContext.lineTo(C[M][0],C[M][1]):this.drawingContext.quadraticCurveTo(C[M][0],C[M][1],C[M][2],C[M][3]);this._doFillStrokeClose(X)}else if(R===f.POINTS)for(M=0;M<O;M++)q=C[M],this._doStroke&&this._pInst.stroke(q[6]),this._pInst.point(q[0],q[1]);else if(R===f.LINES)for(M=0;M+1<O;M+=2)q=C[M],this._doStroke&&this._pInst.stroke(C[M+1][6]),this._pInst.line(q[0],q[1],C[M+1][0],C[M+1][1]);else if(R===f.TRIANGLES)for(M=0;M+2<O;M+=3)q=C[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[M+1][0],C[M+1][1]),this.drawingContext.lineTo(C[M+2][0],C[M+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(C[M+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(C[M+2][6]),this.drawingContext.stroke());else if(R===f.TRIANGLE_STRIP)for(M=0;M+1<O;M++)q=C[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[M+1][0],C[M+1][1]),this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+1][5]),M+2<O&&(this.drawingContext.lineTo(C[M+2][0],C[M+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+2][5])),this._doFillStrokeClose(X);else if(R===f.TRIANGLE_FAN){if(2<O){for(this._clipping||this.drawingContext.beginPath(),M=2;M<O;M++)q=C[M],this.drawingContext.moveTo(C[0][0],C[0][1]),this.drawingContext.lineTo(C[M-1][0],C[M-1][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[0][0],C[0][1]),M<O-1&&(this._doFill&&q[5]!==C[M+1][5]||this._doStroke&&q[6]!==C[M+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(q[5]),this.drawingContext.fill(),this._pInst.fill(C[M+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(q[6]),this.drawingContext.stroke(),this._pInst.stroke(C[M+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(X)}}else if(R===f.QUADS)for(M=0;M+3<O;M+=4){for(q=C[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(q[0],q[1]),D=1;D<4;D++)this.drawingContext.lineTo(C[M+D][0],C[M+D][1]);this.drawingContext.lineTo(q[0],q[1]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+3][6]),this._doFillStrokeClose(X)}else if(R===f.QUAD_STRIP){if(3<O)for(M=0;M+1<O;M+=2)q=C[M],this._clipping||this.drawingContext.beginPath(),M+3<O?(this.drawingContext.moveTo(C[M+2][0],C[M+2][1]),this.drawingContext.lineTo(q[0],q[1]),this.drawingContext.lineTo(C[M+1][0],C[M+1][1]),this.drawingContext.lineTo(C[M+3][0],C[M+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(C[M+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(C[M+3][6])):(this.drawingContext.moveTo(q[0],q[1]),this.drawingContext.lineTo(C[M+1][0],C[M+1][1])),this._doFillStrokeClose(X)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(C[0][0],C[0][1]),M=1;M<O;M++)(q=C[M]).isVert&&(q.moveTo?(X&&this.drawingContext.closePath(),this.drawingContext.moveTo(q[0],q[1])):this.drawingContext.lineTo(q[0],q[1]));this._doFillStrokeClose(X)}z=N=F=I=!1,X&&C.pop()}return this}},{key:"strokeCap",value:function(A){return A!==f.ROUND&&A!==f.SQUARE&&A!==f.PROJECT||(this.drawingContext.lineCap=A),this}},{key:"strokeJoin",value:function(A){return A!==f.ROUND&&A!==f.BEVEL&&A!==f.MITER||(this.drawingContext.lineJoin=A),this}},{key:"strokeWeight",value:function(A){return this.drawingContext.lineWidth=A===void 0||A===0?1e-4:A,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(A){A!==this._cachedFillStyle&&(this.drawingContext.fillStyle=A,this._cachedFillStyle=A)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(A){A!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=A,this._cachedStrokeStyle=A)}},{key:"bezier",value:function(A,C,I,F,N,z,R,q){return this._pInst.beginShape(),this._pInst.vertex(A,C),this._pInst.bezierVertex(I,F,N,z,R,q),this._pInst.endShape(),this}},{key:"curve",value:function(A,C,I,F,N,z,R,q){return this._pInst.beginShape(),this._pInst.curveVertex(A,C),this._pInst.curveVertex(I,F),this._pInst.curveVertex(N,z),this._pInst.curveVertex(R,q),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(A){A&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(A,C,I,F,N,z){this.drawingContext.transform(A,C,I,F,N,z)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(A){this.drawingContext.rotate(A)}},{key:"scale",value:function(A,C){return this.drawingContext.scale(A,C),this}},{key:"translate",value:function(A,C){return A instanceof i.default.Vector&&(C=A.y,A=A.x),this.drawingContext.translate(A,C),this}},{key:"_renderText",value:function(A,C,I,F,N,z){if(!(F<z||N<=F))return A.push(),this._isOpenType()?this._textFont._renderPath(C,I,F,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(C,I,F),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(f._DEFAULT_TEXT_FILL),this.drawingContext.fillText(C,I,F))),A.pop(),A}},{key:"textWidth",value:function(A){return this._isOpenType()?this._textFont._textWidth(A,this._textSize):this.drawingContext.measureText(A).width}},{key:"_applyTextProperties",value:function(){var A,C=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),A=this._textFont,this._isOpenType()&&(A=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(A||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===f.CENTER?this.drawingContext.textBaseline=f._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,C}},{key:"push",value:function(){return this.drawingContext.save(),u(y(j.prototype),"push",this).call(this)}},{key:"pop",value:function(A){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,u(y(j.prototype),"pop",this).call(this,A)}}])&&_(k.prototype,x),j}(i.default.Renderer),E=(b.prototype.text=function(x,k,T,I,A){I!==void 0&&this.drawingContext.textBaseline===f.BASELINE&&(C=!0,this.drawingContext.textBaseline=f.TOP);var C,I=i.default.Renderer.prototype.text.apply(this,arguments);return C&&(this.drawingContext.textBaseline=f.BASELINE),I},i.default.Renderer2D=b,i.default.Renderer2D);l.default=E},{"./constants":264,"./main":275,"./p5.Renderer":278,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],280:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var o=(t=t("./main"))&&t.__esModule?t:{default:t};o.default.prototype._promisePreloads=[];function c(){return{}}var i=!(o.default.prototype.registerPromisePreload=function(f){o.default.prototype._promisePreloads.push(f)});o.default.prototype._setupPromisePreloads=function(){var f=!0,m=!1,_=void 0;try{for(var u,p=this._promisePreloads[Symbol.iterator]();!(f=(u=p.next()).done);f=!0){var g=u.value,y=this,S=g.method,b=g.addCallbacks,E=g.legacyPreloadSetup,x=g.target||this,k=x[S].bind(x);if(x===o.default.prototype){if(i)continue;y=null,k=x[S]}x[S]=this._wrapPromisePreload(y,k,b),E&&(x[E.method]=this._legacyPreloadGenerator(y,E,x[S]))}}catch(T){m=!0,_=T}finally{try{f||p.return==null||p.return()}finally{if(m)throw _}}i=!0},o.default.prototype._wrapPromisePreload=function(f,m,_){var u=function(){for(var p=this,g=(this._incrementPreload(),null),y=null,S=arguments.length,b=new Array(S),E=0;E<S;E++)b[E]=arguments[E];if(_)for(var x=b.length-1;0<=x&&!y&&typeof b[x]=="function";x--)y=g,g=b.pop();var k=Promise.resolve(m.apply(this,b));return g&&k.then(g),y&&k.catch(y),k.then(function(){return p._decrementPreload()}),k};return u=f?u.bind(f):u},o.default.prototype._legacyPreloadGenerator=function(f,p,_){var u=p.createBaseObject||c,p=function(){var g=this;this._incrementPreload();for(var y=arguments.length,S=new Array(y),b=0;b<y;b++)S[b]=arguments[b];var E=u.apply(this,S);return _.apply(this,S).then(function(x){Object.assign(E,x),g._decrementPreload()}),E};return p=f?p.bind(f):p}},{"./main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],281:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(u=t("./main"))&&u.__esModule?u:{default:u},i=function(p){if(p&&p.__esModule)return p;if(p===null||m(p)!=="object"&&typeof p!="function")return{default:p};var g=f();if(g&&g.has(p))return g.get(p);var y,S={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var E;Object.prototype.hasOwnProperty.call(p,y)&&((E=b?Object.getOwnPropertyDescriptor(p,y):null)&&(E.get||E.set)?Object.defineProperty(S,y,E):S[y]=p[y])}return S.default=p,g&&g.set(p,S),S}(t("./constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}function m(p){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var _="defaultCanvas0",u=(c.default.prototype.createCanvas=function(p,g,y,S){var b,E,x;if(c.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(y=i.P2D,S=arguments[2]):b=y||i.P2D,S)(x=document.getElementById(_))&&x.parentNode.removeChild(x),x=S,this._defaultGraphicsCreated=!1;else{if(b===i.WEBGL)(x=document.getElementById(_))&&(x.parentNode.removeChild(x),E=this._renderer,this._elements=this._elements.filter(function(T){return T!==E})),(x=document.createElement("canvas")).id=_,x.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)x=this.canvas;else{x=S||document.createElement("canvas");for(var k=0;document.getElementById("defaultCanvas".concat(k));)k++;_="defaultCanvas".concat(k),x.id=_,x.classList.add("p5Canvas")}this._setupDone||(x.dataset.hidden=!0,x.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(x)}return b===i.WEBGL?(this._setProperty("_renderer",new c.default.RendererGL(x,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new c.default.Renderer2D(x,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(p,g),this._renderer._applyDefaults(),this._renderer},c.default.prototype.resizeCanvas=function(p,g,y){if(c.default._validateParameters("resizeCanvas",arguments),this._renderer){var S,b,E={};for(S in this.drawingContext){var x=this.drawingContext[S];m(x)!=="object"&&typeof x!="function"&&(E[S]=x)}for(b in this.width=p,this.height=g,this._renderer.resize(p,g),E)try{this.drawingContext[b]=E[b]}catch{}y||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},c.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},c.default.prototype.createGraphics=function(p,g){for(var y=arguments.length,S=new Array(2<y?y-2:0),b=2;b<y;b++)S[b-2]=arguments[b];return S[0]instanceof HTMLCanvasElement&&(S[1]=S[0],S[0]=i.P2D),c.default._validateParameters("createGraphics",arguments),new c.default.Graphics(p,g,S[0],this,S[1])},c.default.prototype.createFramebuffer=function(p){return new c.default.Framebuffer(this,p)},c.default.prototype.blendMode=function(p){c.default._validateParameters("blendMode",arguments),p===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),p=i.BLEND),this._renderer.blendMode(p)},c.default);l.default=u},{"../webgl/p5.RendererGL":332,"./constants":264,"./main":275,"./p5.Graphics":277,"./p5.Renderer2D":279,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],282:[function(t,a,l){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function c(g){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=u(t("../main")),f=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var y=_();if(y&&y.has(g))return y.get(g);var S,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in g){var x;Object.prototype.hasOwnProperty.call(g,S)&&((x=E?Object.getOwnPropertyDescriptor(g,S):null)&&(x.get||x.set)?Object.defineProperty(b,S,x):b[S]=g[S])}return b.default=g,y&&y.set(g,b),b}(t("../constants")),m=u(t("../helpers"));function _(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,_=function(){return g},g)}function u(g){return g&&g.__esModule?g:{default:g}}function p(g){return function(y){if(Array.isArray(y)){for(var S=0,b=new Array(y.length);S<y.length;S++)b[S]=y[S];return b}}(g)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),i.default.prototype._normalizeArcAngles=function(g,y,S,b,E){var x;return g-=f.TWO_PI*Math.floor(g/f.TWO_PI),y-=f.TWO_PI*Math.floor(y/f.TWO_PI),x=Math.min(Math.abs(g-y),f.TWO_PI-Math.abs(g-y)),E&&(g=g<=f.HALF_PI?Math.atan(S/b*Math.tan(g)):g>f.HALF_PI&&g<=3*f.HALF_PI?Math.atan(S/b*Math.tan(g))+f.PI:Math.atan(S/b*Math.tan(g))+f.TWO_PI,y=y<=f.HALF_PI?Math.atan(S/b*Math.tan(y)):y>f.HALF_PI&&y<=3*f.HALF_PI?Math.atan(S/b*Math.tan(y))+f.PI:Math.atan(S/b*Math.tan(y))+f.TWO_PI),y<g&&(y+=f.TWO_PI),{start:g,stop:y,correspondToSamePoint:x<1e-5}},i.default.prototype.arc=function(g,y,S,b,E,x,k,T){return i.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&E!==x&&(E=this._toRadians(E),x=this._toRadians(x),S=Math.abs(S),b=Math.abs(b),g=m.default.modeAdjust(g,y,S,b,this._renderer._ellipseMode),(y=this._normalizeArcAngles(E,x,g.w,g.h,!0)).correspondToSamePoint?this._renderer.ellipse([g.x,g.y,g.w,g.h,T]):(this._renderer.arc(g.x,g.y,g.w,g.h,y.start,y.stop,k,T),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[g.x,g.y,g.w,g.h,y.start,y.stop,k]))),this},i.default.prototype.ellipse=function(g,y,S,b,E){return i.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},i.default.prototype.circle=function(){i.default._validateParameters("circle",arguments);var g=Array.prototype.slice.call(arguments,0,2);return g.push(arguments[2]),g.push(arguments[2]),this._renderEllipse.apply(this,p(g))},i.default.prototype._renderEllipse=function(g,y,S,b,E){return(this._renderer._doStroke||this._renderer._doFill)&&(S<0&&(S=Math.abs(S)),b===void 0?b=S:b<0&&(b=Math.abs(b)),g=m.default.modeAdjust(g,y,S,b,this._renderer._ellipseMode),this._renderer.ellipse([g.x,g.y,g.w,g.h,E]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[g.x,g.y,g.w,g.h])),this},i.default.prototype.line=function(){for(var g,y=arguments.length,S=new Array(y),b=0;b<y;b++)S[b]=arguments[b];return i.default._validateParameters("line",S),this._renderer._doStroke&&(g=this._renderer).line.apply(g,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",S),this},i.default.prototype.point=function(){for(var g,y=arguments.length,S=new Array(y),b=0;b<y;b++)S[b]=arguments[b];return i.default._validateParameters("point",S),this._renderer._doStroke&&(S.length===1&&S[0]instanceof i.default.Vector?this._renderer.point.call(this._renderer,S[0].x,S[0].y,S[0].z):((g=this._renderer).point.apply(g,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",S))),this},i.default.prototype.quad=function(){for(var g,y=arguments.length,S=new Array(y),b=0;b<y;b++)S[b]=arguments[b];return i.default._validateParameters("quad",S),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&S.length<12?this._renderer.quad.call(this._renderer,S[0],S[1],0,S[2],S[3],0,S[4],S[5],0,S[6],S[7],0,S[8],S[9]):((g=this._renderer).quad.apply(g,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",S))),this},i.default.prototype.rect=function(){for(var g=arguments.length,y=new Array(g),S=0;S<g;S++)y[S]=arguments[S];return i.default._validateParameters("rect",y),this._renderRect.apply(this,y)},i.default.prototype.square=function(g,y,S,b,E,x,k){return i.default._validateParameters("square",arguments),this._renderRect.call(this,g,y,S,S,b,E,x,k)},i.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var g=m.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),y=[g.x,g.y,g.w,g.h],S=4;S<arguments.length;S++)y[S]=arguments[S];this._renderer.rect(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[g.x,g.y,g.w,g.h])}return this},i.default.prototype.triangle=function(){for(var g=arguments.length,y=new Array(g),S=0;S<g;S++)y[S]=arguments[S];return i.default._validateParameters("triangle",y),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",y),this},t=i.default,l.default=t},{"../constants":264,"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../helpers":271,"../main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],283:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var p=m();if(p&&p.has(u))return p.get(u);var g,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var b;Object.prototype.hasOwnProperty.call(u,g)&&((b=S?Object.getOwnPropertyDescriptor(u,g):null)&&(b.get||b.set)?Object.defineProperty(y,g,b):y[g]=u[g])}return y.default=u,p&&p.set(u,y),y}(t("../constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}i.default.prototype.ellipseMode=function(u){return i.default._validateParameters("ellipseMode",arguments),u!==f.CORNER&&u!==f.CORNERS&&u!==f.RADIUS&&u!==f.CENTER||(this._renderer._ellipseMode=u),this},i.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(u){return i.default._validateParameters("rectMode",arguments),u!==f.CORNER&&u!==f.CORNERS&&u!==f.RADIUS&&u!==f.CENTER||(this._renderer._rectMode=u),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(u){return i.default._validateParameters("strokeCap",arguments),u!==f.ROUND&&u!==f.SQUARE&&u!==f.PROJECT||this._renderer.strokeCap(u),this},i.default.prototype.strokeJoin=function(u){return i.default._validateParameters("strokeJoin",arguments),u!==f.ROUND&&u!==f.BEVEL&&u!==f.MITER||this._renderer.strokeJoin(u),this},i.default.prototype.strokeWeight=function(u){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(u),this};var _=i.default;l.default=_},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],284:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(c=t("../main"))&&c.__esModule?c:{default:c};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var i,f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return o.default._validateParameters("bezier",m),(this._renderer._doStroke||this._renderer._doFill)&&(i=this._renderer).bezier.apply(i,m),this},o.default.prototype.bezierDetail=function(i){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=i,this},o.default.prototype.bezierPoint=function(i,f,m,_,u){o.default._validateParameters("bezierPoint",arguments);var p=1-u;return Math.pow(p,3)*i+3*Math.pow(p,2)*u*f+3*p*Math.pow(u,2)*m+Math.pow(u,3)*_},o.default.prototype.bezierTangent=function(i,f,m,_,u){o.default._validateParameters("bezierTangent",arguments);var p=1-u;return 3*_*Math.pow(u,2)-3*m*Math.pow(u,2)+6*m*p*u-6*f*p*u+3*f*Math.pow(p,2)-3*i*Math.pow(p,2)},o.default.prototype.curve=function(){for(var i,f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return o.default._validateParameters("curve",m),this._renderer._doStroke&&(i=this._renderer).curve.apply(i,m),this},o.default.prototype.curveDetail=function(i){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=i<3?3:i,this},o.default.prototype.curveTightness=function(i){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=i,this},o.default.prototype.curvePoint=function(i,f,m,_,u){o.default._validateParameters("curvePoint",arguments);var p=this._renderer._curveTightness,g=u*u*u,y=u*u;return i*((p-1)/2*g+(1-p)*y+(p-1)/2*u)+f*((p+3)/2*g+(-5-p)/2*y+1)+m*((-3-p)/2*g+(p+2)*y+(1-p)/2*u)+_*((1-p)/2*g+(p-1)/2*y)},o.default.prototype.curveTangent=function(i,f,m,_,y){o.default._validateParameters("curveTangent",arguments);var p=this._renderer._curveTightness,g=y*y*3,y=2*y;return i*((p-1)/2*g+(1-p)*y+(p-1)/2)+f*((p+3)/2*g+(-5-p)/2*y)+m*((-3-p)/2*g+(p+2)*y+(1-p)/2)+_*((1-p)/2*g+(p-1)/2*y)};var c=o.default;l.default=c},{"../friendly_errors/fes_core":266,"../friendly_errors/file_errors":267,"../friendly_errors/validate_params":270,"../main":275}],285:[function(t,a,l){function o(k){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(k)}function c(k){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(T){return o(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":o(T)})(k)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(x=t("../main"))&&x.__esModule?x:{default:x},f=function(k){if(k&&k.__esModule)return k;if(k===null||c(k)!=="object"&&typeof k!="function")return{default:k};var T=m();if(T&&T.has(k))return T.get(k);var j,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var I;Object.prototype.hasOwnProperty.call(k,j)&&((I=C?Object.getOwnPropertyDescriptor(k,j):null)&&(I.get||I.set)?Object.defineProperty(A,j,I):A[j]=k[j])}return A.default=k,T&&T.set(k,A),A}(t("../constants"));function m(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,m=function(){return k},k)}var _=null,u=[],p=[],g=!1,y=!1,S=!1,b=!1,E=!0,x=(i.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(p=[],b=!0),this},i.default.prototype.beginShape=function(k){var T;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(T=this._renderer).beginShape.apply(T,arguments):(_=k===f.POINTS||k===f.LINES||k===f.TRIANGLES||k===f.TRIANGLE_FAN||k===f.TRIANGLE_STRIP||k===f.QUADS||k===f.QUAD_STRIP?k:null,u=[],p=[]),this},i.default.prototype.bezierVertex=function(){for(var k,T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];if(i.default._validateParameters("bezierVertex",j),this._renderer.isP3D)(k=this._renderer).bezierVertex.apply(k,j);else if(u.length===0)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{g=!0;for(var C=[],I=0;I<j.length;I++)C[I]=j[I];C.isVert=!1,(b?p:u).push(C)}return this},i.default.prototype.curveVertex=function(){for(var k,T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];return i.default._validateParameters("curveVertex",j),this._renderer.isP3D?(k=this._renderer).curveVertex.apply(k,j):(y=!0,this.vertex(j[0],j[1])),this},i.default.prototype.endContour=function(){if(!this._renderer.isP3D){var k=p[0].slice();k.isVert=p[0].isVert,k.moveTo=!1,p.push(k),E&&(u.push(u[0]),E=!1);for(var T=0;T<p.length;T++)u.push(p[T])}return this},i.default.prototype.endShape=function(k){var T=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(i.default._validateParameters("endShape",arguments),T<1&&(console.log(" p5.js says: You can not have less than one instance"),T=1),this._renderer.isP3D)this._renderer.endShape(k,y,g,S,b,_,T);else{if(T!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),u.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;T=k===f.CLOSE,T&&!b&&u.push(u[0]),this._renderer.endShape(k,u,y,g,S,b,_),E=!(b=S=g=y=!1),T&&u.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var k,T=arguments.length,j=new Array(T),A=0;A<T;A++)j[A]=arguments[A];if(i.default._validateParameters("quadraticVertex",j),this._renderer.isP3D)(k=this._renderer).quadraticVertex.apply(k,j);else{if(this._contourInited)return(k={}).x=j[0],k.y=j[1],k.x3=j[2],k.y3=j[3],k.type=f.QUADRATIC,this._contourVertices.push(k),this;if(0<u.length){S=!0;for(var C=[],I=0;I<j.length;I++)C[I]=j[I];C.isVert=!1,(b?p:u).push(C)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(k,T,j,A,C){var I;return this._renderer.isP3D?(I=this._renderer).vertex.apply(I,arguments):((I=[]).isVert=!0,I[0]=k,I[1]=T,I[2]=0,I[3]=0,I[4]=0,I[5]=this._renderer._getFill(),I[6]=this._renderer._getStroke(),j&&(I.moveTo=j),(b?(p.length===0&&(I.moveTo=!0),p):u).push(I)),this},i.default.prototype.normal=function(k,T,j){var A;return this._assert3d("normal"),i.default._validateParameters("normal",arguments),(A=this._renderer).normal.apply(A,arguments),this},i.default);l.default=x},{"../constants":264,"../main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],286:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function c(u){return function(p){if(Array.isArray(p)){for(var g=0,y=new Array(p.length);g<p.length;g++)y[g]=p[g];return y}}(u)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(u){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}var f,m,_;t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u,p){window.setTimeout(u,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(f=Object.keys,t=Object.defineProperty,m=typeof Symbol=="function"&&i(Symbol())==="symbol",_=Object.prototype.propertyIsEnumerable,t(Object,"assign",{value:function(u,p){if(u==null)throw new TypeError("target must be an object");for(var g,y=Object(u),S=1;S<arguments.length;++S){var b=Object(arguments[S]),E=f(b);for(m&&Object.getOwnPropertySymbols&&E.push.apply(E,c(Object.getOwnPropertySymbols(b).filter(function(x){return function(k){return _.call(x,k)}}(b)))),g=0;g<E.length;++g)y[E[g]]=b[E[g]]}return y},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/web.dom-collections.iterator":238}],287:[function(t,a,l){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var c=parseInt(o),i=((isNaN(c)||c<1)&&(c=1),this._isGlobal?window:this);if(typeof i.draw=="function"){i.setup===void 0&&i.scale(i._pixelDensity,i._pixelDensity);for(var f=0;f<c;f++){i.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),i._renderer.isP3D&&i._renderer._update(),i._setProperty("frameCount",i.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{i.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,l.default=t},{"./main":275,"core-js/modules/es.object.assign":176}],288:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("./main"))&&t.__esModule?t:{default:t};function c(i){return function(f){if(Array.isArray(f)){for(var m=0,_=new Array(f.length);m<f.length;m++)_[m]=f[m];return _}}(i)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var i=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||i?(i=this._renderer).applyMatrix.apply(i,c(arguments.length<=0?void 0:arguments[0])):(i=this._renderer).applyMatrix.apply(i,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(i,f){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(i),f),this},o.default.prototype.rotateX=function(i){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(i)),this},o.default.prototype.rotateY=function(i){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(i)),this},o.default.prototype.rotateZ=function(i){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(i)),this},o.default.prototype.scale=function(i,f,m){var _;return o.default._validateParameters("scale",arguments),i instanceof o.default.Vector?(i=(_=i).x,f=_.y,m=_.z):i instanceof Array&&(i=(_=i)[0],f=_[1],m=_[2]||1),isNaN(f)?f=m=i:isNaN(m)&&(m=1),this._renderer.scale.call(this._renderer,i,f,m),this},o.default.prototype.shearX=function(i){return o.default._validateParameters("shearX",arguments),i=this._toRadians(i),this._renderer.applyMatrix(1,0,Math.tan(i),1,0,0),this},o.default.prototype.shearY=function(i){return o.default._validateParameters("shearY",arguments),i=this._toRadians(i),this._renderer.applyMatrix(1,Math.tan(i),0,1,0,0),this},o.default.prototype.translate=function(i,f,m){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(i,f,m):this._renderer.translate(i,f),this},t=o.default,l.default=t},{"./main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238}],289:[function(t,a,l){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(m){return function(_){if(Array.isArray(_)){for(var u=0,p=new Array(_.length);u<_.length;u++)p[u]=_[u];return p}}(m)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(m){return(f=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(m)}c.default.prototype.storeItem=function(m,_){typeof m!="string"&&console.log("The argument that you passed to storeItem() - ".concat(m," is not a string.")),m.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(m," must not end with 'p5TypeID'.")),_===void 0&&console.log("You cannot store undefined variables using storeItem().");var u=f(_);switch(u){case"number":case"boolean":_=_.toString();break;case"object":_ instanceof c.default.Color?u="p5.Color":_ instanceof c.default.Vector&&(u="p5.Vector",_=[_.x,_.y,_.z]),_=JSON.stringify(_)}localStorage.setItem(m,_),m="".concat(m,"p5TypeID"),localStorage.setItem(m,u)},c.default.prototype.getItem=function(m){var _=localStorage.getItem(m),u=localStorage.getItem("".concat(m,"p5TypeID"));if(u===void 0)console.log("Unable to determine type of item stored under ".concat(m,"in local storage. Did you save the item with something other than setItem()?"));else if(_!==null)switch(u){case"number":_=parseFloat(_);break;case"boolean":_=_==="true";break;case"object":_=JSON.parse(_);break;case"p5.Color":_=JSON.parse(_),_=this.color.apply(this,i(_.levels));break;case"p5.Vector":_=JSON.parse(_),_=this.createVector.apply(this,i(_))}return _},c.default.prototype.clearStorage=function(){localStorage.clear()},c.default.prototype.removeItem=function(m){typeof m!="string"&&console.log("The argument that you passed to removeItem() - ".concat(m," is not a string.")),localStorage.removeItem(m),localStorage.removeItem("".concat(m,"p5TypeID"))}},{"../core/main":275,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.ends-with":190,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],290:[function(t,a,l){function o(S){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(S)}function c(S){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(b){return o(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":o(b)})(S)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),b&&m(S,b)}function m(S,b){return(m=Object.setPrototypeOf||function(E,x){return E.__proto__=x,E})(S,b)}function _(S){return function(){var b,E=u(S),E=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=u(this).constructor,Reflect.construct(E,arguments,b)):E.apply(this,arguments),this);if(!b||c(b)!=="object"&&typeof b!="function"){if(E!==void 0)return E;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function u(S){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(S)}function p(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}function g(S,b){for(var E=0;E<b.length;E++){var x=b[E];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(S,x.key,x)}}function y(S,b,E){b&&g(S.prototype,b),E&&g(S,E)}i.default.prototype.createStringDict=function(S,b){return i.default._validateParameters("createStringDict",arguments),new i.default.StringDict(S,b)},i.default.prototype.createNumberDict=function(S,b){return i.default._validateParameters("createNumberDict",arguments),new i.default.NumberDict(S,b)},i.default.TypedDict=function(){function S(b,E){return p(this,S),b instanceof Object?this.data=b:(this.data={},this.data[b]=E),this}return y(S,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,E){this._validate(E)?this.data[b]=E:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var E in b)this.set(E,b[E])}},{key:"create",value:function(b,E){b instanceof Object&&E===void 0?this._addObj(b):b!==void 0?this.set(b,E):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var E,x="";for(E in this.data)x+="".concat(E,",").concat(this.data[E],`
`);var k=new Blob([x],{type:"text/csv"});i.default.prototype.downloadFile(k,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,E){i.default.prototype.saveJSON(this.data,b,E)}},{key:"_validate",value:function(b){return!0}}]),S}(),i.default.StringDict=function(){f(b,i.default.TypedDict);var S=_(b);function b(){p(this,b);for(var E=arguments.length,x=new Array(E),k=0;k<E;k++)x[k]=arguments[k];return S.call.apply(S,[this].concat(x))}return y(b,[{key:"_validate",value:function(E){return typeof E=="string"}}]),b}(),i.default.NumberDict=function(){f(b,i.default.TypedDict);var S=_(b);function b(){p(this,b);for(var E=arguments.length,x=new Array(E),k=0;k<E;k++)x[k]=arguments[k];return S.call.apply(S,[this].concat(x))}return y(b,[{key:"_validate",value:function(E){return typeof E=="number"}},{key:"add",value:function(E,x){this.data.hasOwnProperty(E)?this.data[E]+=x:console.log("The key - ".concat(E," does not exist in this dictionary."))}},{key:"sub",value:function(E,x){this.add(E,-x)}},{key:"mult",value:function(E,x){this.data.hasOwnProperty(E)?this.data[E]*=x:console.log("The key - ".concat(E," does not exist in this dictionary."))}},{key:"div",value:function(E,x){this.data.hasOwnProperty(E)?this.data[E]/=x:console.log("The key - ".concat(E," does not exist in this dictionary."))}},{key:"_valueTest",value:function(E){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var x,k=this.data[Object.keys(this.data)[0]];for(x in this.data)this.data[x]*E<k*E&&(k=this.data[x]);return k}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(E){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var x=Object.keys(this.data)[0],k=1;k<Object.keys(this.data).length;k++)Object.keys(this.data)[k]*E<x*E&&(x=Object.keys(this.data)[k]);return x}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),t=i.default.TypedDict,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],291:[function(t,a,l){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(x,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(x,j.key,j)}}function f(x,k,T){k&&i(x.prototype,k),T&&i(x,T)}function m(x,k){return(m=Object.setPrototypeOf||function(T,j){return T.__proto__=j,T})(x,k)}function _(x){return function(){var k,T,j=p(x);return k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=p(this).constructor,Reflect.construct(j,arguments,k)):j.apply(this,arguments),j=this,!(T=k)||y(T)!=="object"&&typeof T!="function"?u(j):T}}function u(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function p(x){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(x)}function g(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function y(x){return(y=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(x)}function S(x,k,T){return(k._userNode||document.body).appendChild(x),T=new(T?c.default.MediaElement:c.default.Element)(x,k),k._elements.push(T),T}function b(x,I,T,j){var A=document.createElement(I),C=(typeof(T=T||"")=="string"&&(T=[T]),!0),I=!1,F=void 0;try{for(var N,z=T[Symbol.iterator]();!(C=(N=z.next()).done);C=!0){var R=N.value,q=document.createElement("source");q.setAttribute("src",R),A.appendChild(q)}}catch(D){I=!0,F=D}finally{try{C||z.return==null||z.return()}finally{if(I)throw F}}typeof j=="function"&&A.addEventListener("canplaythrough",function D(){j(),A.removeEventListener("canplaythrough",D)});var M=S(A,x,!0);return M.loadedmetadata=!1,A.addEventListener("loadedmetadata",function(){M.width=A.videoWidth,M.height=A.videoHeight,M.elt.width===0&&(M.elt.width=A.videoWidth),M.elt.height===0&&(M.elt.height=A.videoHeight),M.presetPlaybackRate&&(M.elt.playbackRate=M.presetPlaybackRate,delete M.presetPlaybackRate),M.loadedmetadata=!0}),M}c.default.prototype.select=function(x,k){return c.default._validateParameters("select",arguments),k=this._getContainer(k).querySelector(x),k?this._wrapElement(k):null},c.default.prototype.selectAll=function(x,k){c.default._validateParameters("selectAll",arguments);var T=[],j=this._getContainer(k).querySelectorAll(x);if(j)for(var A=0;A<j.length;A++){var C=this._wrapElement(j[A]);T.push(C)}return T},c.default.prototype._getContainer=function(x){var k=document;return typeof x=="string"?k=document.querySelector(x)||document:x instanceof c.default.Element?k=x.elt:x instanceof HTMLElement&&(k=x),k},c.default.prototype._wrapElement=function(x){var k,T=Array.prototype.slice.call(x.children);return x.tagName==="INPUT"&&x.type==="checkbox"?((k=new c.default.Element(x,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},k):x.tagName==="VIDEO"||x.tagName==="AUDIO"?new c.default.MediaElement(x,this):x.tagName==="SELECT"?this.createSelect(new c.default.Element(x,this)):0<T.length&&T.every(function(j){return j.tagName==="INPUT"||j.tagName==="LABEL"})?this.createRadio(new c.default.Element(x,this)):new c.default.Element(x,this)},c.default.prototype.removeElements=function(x){c.default._validateParameters("removeElements",arguments),this._elements.filter(function(k){return!(k.elt instanceof HTMLCanvasElement)}).map(function(k){return k.remove()})},c.default.Element.prototype.changed=function(x){return c.default.Element._adjustListener("change",x,this),this},c.default.Element.prototype.input=function(x){return c.default.Element._adjustListener("input",x,this),this},c.default.prototype.createDiv=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=document.createElement("div");return k.innerHTML=x,S(k,this)},c.default.prototype.createP=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=document.createElement("p");return k.innerHTML=x,S(k,this)},c.default.prototype.createSpan=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=document.createElement("span");return k.innerHTML=x,S(k,this)},c.default.prototype.createImg=function(){c.default._validateParameters("createImg",arguments);var x,k=document.createElement("img"),T=arguments;return 1<T.length&&typeof T[1]=="string"&&(k.alt=T[1]),2<T.length&&typeof T[2]=="string"&&(k.crossOrigin=T[2]),k.src=T[0],x=S(k,this),k.addEventListener("load",function(){x.width=k.offsetWidth||k.width,x.height=k.offsetHeight||k.height;var j=T[T.length-1];typeof j=="function"&&j(x)}),x},c.default.prototype.createA=function(x,k,T){c.default._validateParameters("createA",arguments);var j=document.createElement("a");return j.href=x,j.innerHTML=k,T&&(j.target=T),S(j,this)},c.default.prototype.createSlider=function(x,k,T,j){c.default._validateParameters("createSlider",arguments);var A=document.createElement("input");return A.type="range",A.min=x,A.max=k,j===0?A.step=1e-18:j&&(A.step=j),typeof T=="number"&&(A.value=T),S(A,this)},c.default.prototype.createButton=function(x,k){c.default._validateParameters("createButton",arguments);var T=document.createElement("button");return T.innerHTML=x,k&&(T.value=k),S(T,this)},c.default.prototype.createCheckbox=function(){for(var x=arguments.length,k=new Array(x),T=0;T<x;T++)k[T]=arguments[T];c.default._validateParameters("createCheckbox",k);var j=document.createElement("div"),A=document.createElement("input"),C=(A.type="checkbox",document.createElement("label")),I=(C.appendChild(A),j.appendChild(C),S(j,this));return I.checked=function(){var F=I.elt.firstElementChild.getElementsByTagName("input")[0];if(F){if(arguments.length===0)return F.checked;F.checked=!(arguments.length<=0||!arguments[0])}return I},this.value=function(F){return I.value=F,this},k[0]&&(I.value(k[0]),(j=document.createElement("span")).innerHTML=k[0],C.appendChild(j)),k[1]&&(A.checked=!0),I},c.default.prototype.createSelect=function(){for(var x,k=arguments.length,T=new Array(k),j=0;j<k;j++)T[j]=arguments[j];c.default._validateParameters("createSelect",T);var A,C=T[0];return C instanceof c.default.Element&&C.elt instanceof HTMLSelectElement?this.elt=(x=C).elt:C instanceof HTMLSelectElement?(x=S(C,this),this.elt=C):(A=document.createElement("select"),C&&typeof C=="boolean"&&A.setAttribute("multiple","true"),x=S(A,this),this.elt=A),x.option=function(I,F){var N;if(I!==void 0){for(var z,R=0;R<this.elt.length;R+=1)if(this.elt[R].textContent===I){N=R;break}N!==void 0?F===!1?this.elt.remove(N):this.elt[N].value=F:((z=document.createElement("option")).textContent=I,z.value=F===void 0?I:F,this.elt.appendChild(z),this._pInst._elements.push(z))}},x.selected=function(I){if(I!==void 0){for(var F=0;F<this.elt.length;F+=1)this.elt[F].value.toString()===I.toString()&&(this.elt.selectedIndex=F);return this}if(this.elt.getAttribute("multiple")){var N=[],z=!0,R=!1,q=void 0;try{for(var M,D=this.elt.selectedOptions[Symbol.iterator]();!(z=(M=D.next()).done);z=!0){var X=M.value;N.push(X.value)}}catch(O){R=!0,q=O}finally{try{z||D.return==null||D.return()}finally{if(R)throw q}}return N}return this.elt.value},x.disable=function(I){if(typeof I=="string")for(var F=0;F<this.elt.length;F++)this.elt[F].value.toString()===I&&(this.elt[F].disabled=!0,this.elt[F].selected=!1);else this.elt.disabled=!0;return this},x.enable=function(I){if(typeof I=="string")for(var F=0;F<this.elt.length;F++)this.elt[F].value.toString()===I&&(this.elt[F].disabled=!1,this.elt[F].selected=!1);else{this.elt.disabled=!1;for(var N=0;N<this.elt.length;N++)this.elt[N].disabled=!1,this.elt[N].selected=!1}return this},x},c.default.prototype.createRadio=function(){function x(I){return I instanceof HTMLInputElement&&I.type==="radio"}function k(I){return I instanceof HTMLLabelElement}var T,j,A,C=arguments.length<=0?void 0:arguments[0];return C instanceof c.default.Element&&(C.elt instanceof HTMLDivElement||C.elt instanceof HTMLSpanElement)?(T=C,this.elt=C.elt):C instanceof HTMLDivElement||C instanceof HTMLSpanElement?(T=S(C,this),j=this.elt=C,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(A=arguments.length<=1?void 0:arguments[1])):(typeof C=="string"&&(A=C),j=document.createElement("div"),T=S(j,this),this.elt=j),T._name=A||"radioOption",T._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(I){return x(I)||k(I)&&x(I.firstElementChild)}).map(function(I){return x(I)?I:I.firstElementChild})},T.option=function(I,F){var N,z,R,q=!0,M=!1,D=void 0;try{for(var X,O=T._getOptionsArray()[Symbol.iterator]();!(q=(X=O.next()).done);q=!0){var G=X.value;if(G.value===I){N=G;break}}}catch(K){M=!0,D=K}finally{try{q||O.return==null||O.return()}finally{if(M)throw D}}return N===void 0&&((N=document.createElement("input")).setAttribute("type","radio"),N.setAttribute("value",I)),N.setAttribute("name",T._name),k(N.parentElement)?z=N.parentElement:(z=document.createElement("label")).insertAdjacentElement("afterbegin",N),z.lastElementChild instanceof HTMLSpanElement?R=z.lastElementChild:(R=document.createElement("span"),N.insertAdjacentElement("afterend",R)),R.innerHTML=F===void 0?I:F,this.elt.appendChild(z),N},T.remove=function(I){var F=!0,N=!1,z=void 0;try{for(var R,q=T._getOptionsArray()[Symbol.iterator]();!(F=(R=q.next()).done);F=!0){var M=R.value;if(M.value===I)return void(k(M.parentElement)?M.parentElement:M).remove()}}catch(D){N=!0,z=D}finally{try{F||q.return==null||q.return()}finally{if(N)throw z}}},T.value=function(){var I="",F=!0,N=!1,z=void 0;try{for(var R,q=T._getOptionsArray()[Symbol.iterator]();!(F=(R=q.next()).done);F=!0){var M=R.value;if(M.checked){I=M.value;break}}}catch(D){N=!0,z=D}finally{try{F||q.return==null||q.return()}finally{if(N)throw z}}return I},T.selected=function(I){var F=null;if(I===void 0){var N=!0,z=!1,R=void 0;try{for(var q,M=T._getOptionsArray()[Symbol.iterator]();!(N=(q=M.next()).done);N=!0){var D=q.value;if(D.checked){F=D;break}}}catch(Z){z=!0,R=Z}finally{try{N||M.return==null||M.return()}finally{if(z)throw R}}}else{T._getOptionsArray().forEach(function(V){V.checked=!1,V.removeAttribute("checked")});var X=!0,z=!1,R=void 0;try{for(var O,G=T._getOptionsArray()[Symbol.iterator]();!(X=(O=G.next()).done);X=!0){var K=O.value;K.value===I&&(K.setAttribute("checked",!0),K.checked=!0,F=K)}}catch(V){z=!0,R=V}finally{try{X||G.return==null||G.return()}finally{if(z)throw R}}}return F},T.disable=function(){var I=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],F=!0,N=!1,z=void 0;try{for(var R,q=T._getOptionsArray()[Symbol.iterator]();!(F=(R=q.next()).done);F=!0)R.value.setAttribute("disabled",I)}catch(M){N=!0,z=M}finally{try{F||q.return==null||q.return()}finally{if(N)throw z}}},T},c.default.prototype.createColorPicker=function(x){c.default._validateParameters("createColorPicker",arguments);var k=document.createElement("input");return k.type="color",x?x instanceof c.default.Color?k.value=x.toString("#rrggbb"):(c.default.prototype._colorMode="rgb",c.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},k.value=c.default.prototype.color(x).toString("#rrggbb")):k.value="#000000",(k=S(k,this)).color=function(){return x&&(x.mode&&(c.default.prototype._colorMode=x.mode),x.maxes&&(c.default.prototype._colorMaxes=x.maxes)),c.default.prototype.color(this.elt.value)},k},c.default.prototype.createInput=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",T=(c.default._validateParameters("createInput",arguments),document.createElement("input"));return T.setAttribute("value",x),T.setAttribute("type",k),S(T,this)},c.default.prototype.createFileInput=function(x){var k,T=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(c.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(k=document.createElement("input")).setAttribute("type","file"),T&&k.setAttribute("multiple",!0),k.addEventListener("change",function(j){var A=!0,C=!1,I=void 0;try{for(var F,N=j.target.files[Symbol.iterator]();!(A=(F=N.next()).done);A=!0){var z=F.value;c.default.File._load(z,x)}}catch(R){C=!0,I=R}finally{try{A||N.return==null||N.return()}finally{if(C)throw I}}},!1),S(k,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},c.default.prototype.createVideo=function(x,k){return c.default._validateParameters("createVideo",arguments),b(this,"video",x,k)},c.default.prototype.createAudio=function(x,k){return c.default._validateParameters("createAudio",arguments),b(this,"audio",x,k)},c.default.prototype.VIDEO="video",c.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(x){var k=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return k?new Promise(function(T,j){k.call(navigator,x,T,j)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),c.default.prototype.createCapture=function(){for(var x=arguments.length,k=new Array(x),T=0;T<x;T++)k[T]=arguments[T];if(c.default._validateParameters("createCapture",k),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var j,A=!0,C=!0,I=0,F=k;I<F.length;I++){var N=F[I];N===c.default.prototype.VIDEO?C=!1:N===c.default.prototype.AUDIO?A=!1:y(N)==="object"?z=N:typeof N=="function"&&(j=N)}var z=z||{video:A,audio:C},R=document.createElement("video"),q=(R.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(z).then(function(M){try{"srcObject"in R?R.srcObject=M:R.src=window.URL.createObjectURL(M)}catch{R.src=M}},console.log),S(R,this,!0));return q.loadedmetadata=!1,R.addEventListener("loadedmetadata",function(){R.play(),R.width?(q.width=R.width,q.height=R.height):(q.width=q.elt.width=R.videoWidth,q.height=q.elt.height=R.videoHeight),q.loadedmetadata=!0,j&&j(R.srcObject)}),q},c.default.prototype.createElement=function(x,k){return c.default._validateParameters("createElement",arguments),x=document.createElement(x),k!==void 0&&(x.innerHTML=k),S(x,this)},c.default.Element.prototype.addClass=function(x){return this.elt.className?this.hasClass(x)||(this.elt.className=this.elt.className+" "+x):this.elt.className=x,this},c.default.Element.prototype.removeClass=function(x){return this.elt.classList.remove(x),this},c.default.Element.prototype.hasClass=function(x){return this.elt.classList.contains(x)},c.default.Element.prototype.toggleClass=function(x){return this.elt.classList.contains(x)?this.elt.classList.remove(x):this.elt.classList.add(x),this},c.default.Element.prototype.child=function(x){return x===void 0?this.elt.childNodes:(typeof x=="string"?(x[0]==="#"&&(x=x.substring(1)),x=document.getElementById(x)):x instanceof c.default.Element&&(x=x.elt),x instanceof HTMLElement&&this.elt.appendChild(x),this)},c.default.Element.prototype.center=function(x){var k=this.elt.style.display,T=this.elt.style.display==="none",j=this.parent().style.display==="none",A={x:this.elt.offsetLeft,y:this.elt.offsetTop},C=(T&&this.show(),j&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),I=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return x==="both"||x===void 0?this.position(C/2+this.parent().offsetLeft,I/2+this.parent().offsetTop):x==="horizontal"?this.position(C/2+this.parent().offsetLeft,A.y):x==="vertical"&&this.position(A.x,I/2+this.parent().offsetTop),this.style("display",k),T&&this.hide(),j&&this.parent().hide(),this},c.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},c.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},c.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=x,this},c.default.Element.prototype._rotate=function(){var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=x,this},c.default.Element.prototype.style=function(x,k){if((k=k instanceof c.default.Color?"rgba("+k.levels[0]+","+k.levels[1]+","+k.levels[2]+","+k.levels[3]/255+")":k)===void 0){if(x.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(x);for(var T=x.split(";"),j=0;j<T.length;j++){var A=T[j].split(":");A[0]&&A[1]&&(this.elt.style[A[0].trim()]=A[1].trim())}}else this.elt.style[x]=k,x!=="width"&&x!=="height"&&x!=="left"&&x!=="top"||(k=window.getComputedStyle(this.elt).getPropertyValue(x).replace(/[^\d.]/g,""),this[x]=Math.round(parseFloat(k,10)));return this},c.default.Element.prototype.attribute=function(x,k){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return k===void 0?this.elt.getAttribute(x):(this.elt.setAttribute(x,k),this);if(k===void 0)return this.elt.firstChild.getAttribute(x);for(var T=0;T<this.elt.childNodes.length;T++)this.elt.childNodes[T].setAttribute(x,k)},c.default.Element.prototype.removeAttribute=function(x){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var k=0;k<this.elt.childNodes.length;k++)this.elt.childNodes[k].removeAttribute(x);return this.elt.removeAttribute(x),this},c.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},c.default.Element.prototype.show=function(){return this.elt.style.display="block",this},c.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},c.default.Element.prototype.size=function(x,k){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var T=x,j=k,A=c.default.prototype.AUTO;if(T!==A||j!==A){if(T===A?T=k*this.width/this.height:j===A&&(j=x*this.height/this.width),this.elt instanceof HTMLCanvasElement){var C,I={},F=this.elt.getContext("2d");for(C in F)I[C]=F[C];for(C in this.elt.setAttribute("width",T*this._pInst._pixelDensity),this.elt.setAttribute("height",j*this._pInst._pixelDensity),this.elt.style.width=T+"px",this.elt.style.height=j+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),I)this.elt.getContext("2d")[C]=I[C]}else this.elt.style.width=T+"px",this.elt.style.height=j+"px",this.elt.width=T,this.elt.height=j;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},c.default.Element.prototype.remove=function(){this instanceof c.default.MediaElement&&(this.stop(),(k=this.elt.srcObject)!==null&&k.getTracks().forEach(function(T){T.stop()}));var x,k=this._pInst._elements.indexOf(this);for(x in k!==-1&&this._pInst._elements.splice(k,1),this._events)this.elt.removeEventListener(x,this._events[x]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},c.default.Element.prototype.drop=function(x,k){var T;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",T=function(j){j.preventDefault()}),this.elt.addEventListener("dragleave",T)),c.default.Element._attachListener("drop",function(A){A.preventDefault(),typeof k=="function"&&k.call(this,A);var A=A.dataTransfer.files,C=!0,I=!1,F=void 0;try{for(var N,z=A[Symbol.iterator]();!(C=(N=z.next()).done);C=!0){var R=N.value;c.default.File._load(R,x)}}catch(q){I=!0,F=q}finally{try{C||z.return==null||z.return()}finally{if(I)throw F}}},this)):console.log("The File APIs are not fully supported in this browser."),this},c.default.Element.prototype.draggable=function(x){var k,T="ontouchstart"in window,j=0,A=0,C=0,I=0,F=T?"touchend":"mouseup",N=T?"touchmove":"mousemove";function z(q){var M;q=q||window.event,I=T?(M=q.changedTouches,j=C-parseInt(M[0].clientX),A=I-parseInt(M[0].clientY),C=parseInt(M[0].clientX),parseInt(M[0].clientY)):(j=C-parseInt(q.clientX),A=I-parseInt(q.clientY),C=parseInt(q.clientX),parseInt(q.clientY)),x.style.left=x.offsetLeft-j+"px",x.style.top=x.offsetTop-A+"px"}function R(){document.removeEventListener(F,R,!1),document.removeEventListener(N,z,!1)}return x===void 0?k=x=this.elt:x!==this.elt&&x.elt!==this.elt&&(x=x.elt,k=this.elt),k.addEventListener(T?"touchstart":"mousedown",function(q){{var M;q=q||window.event,I=T?(M=q.changedTouches,C=parseInt(M[0].clientX),parseInt(M[0].clientY)):(C=parseInt(q.clientX),parseInt(q.clientY))}return document.addEventListener(F,R,!1),document.addEventListener(N,z,!1),!1},!1),k.style.cursor="move",this};function E(x,k,T,j){g(this,E),this.callback=x,this.time=k,this.id=T,this.val=j}t=function(x){var k=j;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),x&&m(k,x);var T=_(j);function j(A,C){g(this,j);var I=u(C=T.call(this,A,C));return C.elt.crossOrigin="anonymous",C._prevTime=0,C._cueIDCounter=0,C._cues=[],C.pixels=[],C._pixelsState=u(C),C._pixelDensity=1,C._modified=!1,C._frameOnCanvas=-1,Object.defineProperty(I,"src",{get:function(){var F=I.elt.children[0].src,N=I.elt.src===window.location.href?"":I.elt.src;return F===window.location.href?N:F},set:function(F){for(var N=0;N<I.elt.children.length;N++)I.elt.removeChild(I.elt.children[N]);var z=document.createElement("source");z.src=F,A.appendChild(z),I.elt.src=F,I.modified=!0}}),I._onended=function(){},I.elt.onended=function(){I._onended(I)},C}return f(j,[{key:"play",value:function(){var A;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(A=this.elt.play())&&A.catch&&A.catch(function(C){C.name==="NotAllowedError"?console.error(C):console.error("Media play method encountered an unexpected error",C)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var A=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(A)},{passive:!0,once:!0})}},{key:"autoplay",value:function(A){var C=this,I=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",A),A&&!I&&(A=function(){return C._setupAutoplayFailDetection()},this.elt.readyState===4?A():this.elt.addEventListener("canplay",A,{passive:!0,once:!0})),this}},{key:"volume",value:function(A){if(A===void 0)return this.elt.volume;this.elt.volume=A}},{key:"speed",value:function(A){if(A===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=A:this.presetPlaybackRate=A}},{key:"time",value:function(A){return A===void 0?this.elt.currentTime:(this.elt.currentTime=A,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var A=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&A&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var A=arguments.length,C=new Array(A),I=0;I<A;I++)C[I]=arguments[I];return c.default.Renderer2D.prototype.loadPixels.apply(this,C)}},{key:"updatePixels",value:function(A,C,I,F){return this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.updatePixels.call(this,A,C,I,F)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var A=arguments.length,C=new Array(A),I=0;I<A;I++)C[I]=arguments[I];return c.default.Renderer2D.prototype.get.apply(this,C)}},{key:"_getPixel",value:function(){this.loadPixels();for(var A=arguments.length,C=new Array(A),I=0;I<A;I++)C[I]=arguments[I];return c.default.Renderer2D.prototype._getPixel.apply(this,C)}},{key:"set",value:function(A,C,I){this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.set.call(this,A,C,I),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var A=arguments.length,C=new Array(A),I=0;I<A;I++)C[I]=arguments[I];c.default.prototype.copy.apply(this,C)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var A=arguments.length,C=new Array(A),I=0;I<A;I++)C[I]=arguments[I];c.default.Image.prototype.mask.apply(this,C)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(A){this._modified=A}},{key:"onended",value:function(A){return this._onended=A,this}},{key:"connect",value:function(A){var C,I;if(typeof c.default.prototype.getAudioContext=="function")C=c.default.prototype.getAudioContext(),I=c.default.soundOut.input;else try{I=(C=A.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=C.createMediaElementSource(this.elt),this.audioSourceNode.connect(I)),A?A.input?this.audioSourceNode.connect(A.input):this.audioSourceNode.connect(A):this.audioSourceNode.connect(I)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(A,N,I){var F=this._cueIDCounter++,N=new E(N,A,F,I);return this._cues.push(N),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),F}},{key:"removeCue",value:function(A){for(var C=0;C<this._cues.length;C++)this._cues[C].id===A&&(console.log(A),this._cues.splice(C,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var A=this.time(),C=0;C<this._cues.length;C++){var I=this._cues[C].time,F=this._cues[C].val;this._prevTime<I&&I<=A&&this._cues[C].callback(F)}this._prevTime=A}}]),j}(c.default.Element),c.default.MediaElement=t,t=function(){function x(k,T){g(this,x),this.file=k,this._pInst=T,T=k.type.split("/"),this.type=T[0],this.subtype=T[1],this.name=k.name,this.size=k.size,this.data=void 0}return f(x,null,[{key:"_createLoader",value:function(k,T){var j=new FileReader;return j.onload=function(A){var C,I=new c.default.File(k);I.file.type==="application/json"?I.data=JSON.parse(A.target.result):I.file.type==="text/xml"?(C=new DOMParser().parseFromString(A.target.result,"text/xml"),I.data=new c.default.XML(C.documentElement)):I.data=A.target.result,T(I)},j}},{key:"_load",value:function(k,T){var j;/^text\//.test(k.type)||k.type==="application/json"?c.default.File._createLoader(k,T).readAsText(k):/^(video|audio)\//.test(k.type)?((j=new c.default.File(k)).data=URL.createObjectURL(k),T(j)):c.default.File._createLoader(k,T).readAsDataURL(k)}}]),x}(),c.default.File=t,t=c.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240}],292:[function(t,a,l){function o(k){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(k)}function c(k){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(T){return o(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":o(T)})(k)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(x=t("../core/main"))&&x.__esModule?x:{default:x},f=function(k){if(k&&k.__esModule)return k;if(k===null||c(k)!=="object"&&typeof k!="function")return{default:k};var T=m();if(T&&T.has(k))return T.get(k);var j,A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var I;Object.prototype.hasOwnProperty.call(k,j)&&((I=C?Object.getOwnPropertyDescriptor(k,j):null)&&(I.get||I.set)?Object.defineProperty(A,j,I):A[j]=k[j])}return A.default=k,T&&T.set(k,A),A}(t("../core/constants"));function m(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,m=function(){return k},k)}i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var _=i.default.prototype.pRotationZ=0,u=0,p=0,g="clockwise",y="clockwise",S="clockwise",b=(i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0,.5),E=30,x=(i.default.prototype.setMoveThreshold=function(k){i.default._validateParameters("setMoveThreshold",arguments),b=k},i.default.prototype.setShakeThreshold=function(k){i.default._validateParameters("setShakeThreshold",arguments),E=k},i.default.prototype._ondeviceorientation=function(k){this._updatePRotations(),this._angleMode===f.radians&&(k.beta=k.beta*(_PI/180),k.gamma=k.gamma*(_PI/180),k.alpha=k.alpha*(_PI/180)),this._setProperty("rotationX",k.beta),this._setProperty("rotationY",k.gamma),this._setProperty("rotationZ",k.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(k){this._updatePAccelerations(),this._setProperty("accelerationX",2*k.acceleration.x),this._setProperty("accelerationY",2*k.acceleration.y),this._setProperty("accelerationZ",2*k.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var k,T,j,A,C,I=this._isGlobal?window:this;typeof I.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>b||Math.abs(this.accelerationY-this.pAccelerationY)>b||Math.abs(this.accelerationZ-this.pAccelerationZ)>b)&&I.deviceMoved(),typeof I.deviceTurned=="function"&&(T=this.rotationX+180,k=this.pRotationX+180,j=_+180,0<T-k&&T-k<270||T-k<-270?g="clockwise":(T-k<0||270<T-k)&&(g="counter-clockwise"),g!==this.pRotateDirectionX&&(j=T),90<Math.abs(T-j)&&Math.abs(T-j)<270&&(j=T,this._setProperty("turnAxis","X"),I.deviceTurned()),this.pRotateDirectionX=g,_=j-180,k=this.rotationY+180,T=this.pRotationY+180,j=u+180,0<k-T&&k-T<270||k-T<-270?y="clockwise":(k-T<0||270<k-this.pRotationY)&&(y="counter-clockwise"),y!==this.pRotateDirectionY&&(j=k),90<Math.abs(k-j)&&Math.abs(k-j)<270&&(j=k,this._setProperty("turnAxis","Y"),I.deviceTurned()),this.pRotateDirectionY=y,u=j-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?S="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(S="counter-clockwise"),S!==this.pRotateDirectionZ&&(p=this.rotationZ),90<Math.abs(this.rotationZ-p)&&Math.abs(this.rotationZ-p)<270&&(p=this.rotationZ,this._setProperty("turnAxis","Z"),I.deviceTurned()),this.pRotateDirectionZ=S,this._setProperty("turnAxis",void 0)),typeof I.deviceShaken=="function"&&(this.pAccelerationX!==null&&(A=Math.abs(this.accelerationX-this.pAccelerationX),C=Math.abs(this.accelerationY-this.pAccelerationY)),E<A+C&&I.deviceShaken())},i.default);l.default=x},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],293:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(c){var i;this._downKeys[c.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(i=this._isGlobal?window:this).keyPressed!="function"||c.charCode||i.keyPressed(c)===!1&&c.preventDefault())},o.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var i=this._isGlobal?window:this;typeof i.keyReleased=="function"&&i.keyReleased(c)===!1&&c.preventDefault()},o.default.prototype._onkeypress=function(c){var i;c.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(i=this._isGlobal?window:this).keyTyped=="function"&&i.keyTyped(c)===!1&&c.preventDefault())},o.default.prototype._onblur=function(c){this._downKeys={}},o.default.prototype.keyIsDown=function(c){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},o.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1},t=o.default,l.default=t},{"../core/main":275}],294:[function(t,a,l){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(_)}function c(_){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(u){return o(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":o(u)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(i=t("../core/main"))&&i.__esModule?i:{default:i},f=function(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var u=m();if(u&&u.has(_))return u.get(_);var p,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in _){var S;Object.prototype.hasOwnProperty.call(_,p)&&((S=y?Object.getOwnPropertyDescriptor(_,p):null)&&(S.get||S.set)?Object.defineProperty(g,p,S):g[p]=_[p])}return g.default=_,u&&u.set(_,g),g}(t("../core/constants"));function m(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,m=function(){return _},_)}i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(_){var u,p,g,y,S;this._curElement!==null&&(!_.touches||0<_.touches.length)&&(u=this._curElement.elt,p=this.width,g=this.height,(y=_)&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0])),S=u.getBoundingClientRect(),p=u.scrollWidth/p||1,u=u.scrollHeight/g||1,g={x:(y.clientX-S.left)/p,y:(y.clientY-S.top)/u,winX:y.clientX,winY:y.clientY,id:y.identifier},this._setProperty("movedX",_.movementX),this._setProperty("movedY",_.movementY),this._setProperty("mouseX",g.x),this._setProperty("mouseY",g.y),this._setProperty("winMouseX",g.winX),this._setProperty("winMouseY",g.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(_){_.button===1?this._setProperty("mouseButton",f.CENTER):_.button===2?this._setProperty("mouseButton",f.RIGHT):this._setProperty("mouseButton",f.LEFT)},i.default.prototype._onmousemove=function(_){var u=this._isGlobal?window:this;this._updateNextMouseCoords(_),this.mouseIsPressed?typeof u.mouseDragged=="function"?u.mouseDragged(_)===!1&&_.preventDefault():typeof u.touchMoved=="function"&&u.touchMoved(_)===!1&&_.preventDefault():typeof u.mouseMoved=="function"&&u.mouseMoved(_)===!1&&_.preventDefault()},i.default.prototype._onmousedown=function(_){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(_),this._updateNextMouseCoords(_),typeof u.mousePressed=="function"?u.mousePressed(_)===!1&&_.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof u.touchStarted=="function"&&u.touchStarted(_)===!1&&_.preventDefault()},i.default.prototype._onmouseup=function(_){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof u.mouseReleased=="function"?u.mouseReleased(_)===!1&&_.preventDefault():typeof u.touchEnded=="function"&&u.touchEnded(_)===!1&&_.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(_){var u=this._isGlobal?window:this;typeof u.mouseClicked=="function"&&u.mouseClicked(_)===!1&&_.preventDefault()},i.default.prototype._ondblclick=function(_){var u=this._isGlobal?window:this;typeof u.doubleClicked=="function"&&u.doubleClicked(_)===!1&&_.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(_){var u=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",_.deltaY),typeof u.mouseWheel=="function"&&(_.delta=_.deltaY,u.mouseWheel(_)===!1&&_.preventDefault())},i.default.prototype.requestPointerLock=function(){var _=this._curElement.elt;return _.requestPointerLock=_.requestPointerLock||_.mozRequestPointerLock,_.requestPointerLock?(_.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=i.default,l.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],295:[function(t,a,l){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var c=[],i=0;i<o.touches.length;i++)c[i]=function(S,y,b,u){var p=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,g=S.getBoundingClientRect(),y=S.scrollWidth/y||1,S=S.scrollHeight/b||1,b=u.touches[p]||u.changedTouches[p];return{x:(b.clientX-g.left)/y,y:(b.clientY-g.top)/S,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,o,i);this._setProperty("touches",c)}},t.default.prototype._ontouchstart=function(o){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof c.touchStarted=="function"?c.touchStarted(o)===!1&&o.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof c.mousePressed=="function"&&c.mousePressed(o)===!1&&o.preventDefault()},t.default.prototype._ontouchmove=function(o){var c=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof c.touchMoved=="function"?c.touchMoved(o)===!1&&o.preventDefault():typeof c.mouseDragged=="function"&&c.mouseDragged(o)===!1&&o.preventDefault()},t.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var c=this._isGlobal?window:this;typeof c.touchEnded=="function"?c.touchEnded(o)===!1&&o.preventDefault():typeof c.mouseReleased=="function"&&c.mouseReleased(o)===!1&&o.preventDefault()},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.string.includes":191}],296:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o,c,i,f,m={_toPixels:function(_){var u,p;return _ instanceof ImageData?_.data:_.getContext("2d")?_.getContext("2d").getImageData(0,0,_.width,_.height).data:_.getContext("webgl")?(p=(u=_.getContext("webgl")).drawingBufferWidth*u.drawingBufferHeight*4,p=new Uint8Array(p),u.readPixels(0,0,_.width,_.height,u.RGBA,u.UNSIGNED_BYTE,p),p):void 0},_getARGB:function(_,u){return u*=4,_[3+u]<<24&4278190080|_[u]<<16&16711680|_[1+u]<<8&65280|255&_[2+u]},_setPixels:function(_,u){for(var p,g=0,y=_.length;g<y;g++)_[0+(p=4*g)]=(16711680&u[g])>>>16,_[1+p]=(65280&u[g])>>>8,_[2+p]=255&u[g],_[3+p]=(4278190080&u[g])>>>24},_toImageData:function(_){return _ instanceof ImageData?_:_.getContext("2d").getImageData(0,0,_.width,_.height)},_createImageData:function(_,u){return m._tmpCanvas=document.createElement("canvas"),m._tmpCtx=m._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(_,u)},apply:function(_,S,p){var g=_.getContext("2d"),y=g.getImageData(0,0,_.width,_.height),S=S(y,p);S instanceof ImageData?g.putImageData(S,0,0,0,0,_.width,_.height):g.putImageData(y,0,0,0,0,_.width,_.height)},threshold:function(_,u){for(var p=m._toPixels(_),g=(u===void 0&&(u=.5),Math.floor(255*u)),y=0;y<p.length;y+=4){var S=void 0,S=g<=.2126*p[y]+.7152*p[y+1]+.0722*p[y+2]?255:0;p[y]=p[y+1]=p[y+2]=S}},gray:function(_){for(var u=m._toPixels(_),p=0;p<u.length;p+=4){var g=u[p],y=u[p+1],S=u[p+2];u[p]=u[p+1]=u[p+2]=.2126*g+.7152*y+.0722*S}},opaque:function(_){for(var u=m._toPixels(_),p=0;p<u.length;p+=4)u[p+3]=255;return u},invert:function(_){for(var u=m._toPixels(_),p=0;p<u.length;p+=4)u[p]=255-u[p],u[p+1]=255-u[p+1],u[p+2]=255-u[p+2]},posterize:function(_,u){var p=m._toPixels(_);if((u=u===void 0?4:u)<2||255<u)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var g=u-1,y=0;y<p.length;y+=4){var S=p[y],b=p[y+1],E=p[y+2];p[y]=255*(S*u>>8)/g,p[y+1]=255*(b*u>>8)/g,p[y+2]=255*(E*u>>8)/g}},dilate:function(_){for(var u,p,g,y,S,b,E,x,k,T=m._toPixels(_),j=0,A=T.length?T.length/4:0,C=new Int32Array(A);j<A;)for(p=(u=j)+_.width;j<p;)y=g=m._getARGB(T,j),(k=j-1)<u&&(k=j),p<=(x=j+1)&&(x=j),(S=j-_.width)<0&&(S=0),A<=(b=j+_.width)&&(b=j),S=m._getARGB(T,S),k=m._getARGB(T,k),b=m._getARGB(T,b),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(E=77*(k>>16&255)+151*(k>>8&255)+28*(255&k))&&(g=k,y=E),y<(E=77*((k=m._getARGB(T,x))>>16&255)+151*(k>>8&255)+28*(255&k))&&(g=k,y=E),y<(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))&&(g=S,y=x),y<(k=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(g=b,y=k),C[j++]=g;m._setPixels(T,C)},erode:function(_){for(var u,p,g,y,S,b,E,x,k,T=m._toPixels(_),j=0,A=T.length?T.length/4:0,C=new Int32Array(A);j<A;)for(p=(u=j)+_.width;j<p;)y=g=m._getARGB(T,j),(k=j-1)<u&&(k=j),p<=(x=j+1)&&(x=j),(S=j-_.width)<0&&(S=0),A<=(b=j+_.width)&&(b=j),S=m._getARGB(T,S),k=m._getARGB(T,k),b=m._getARGB(T,b),(E=77*(k>>16&255)+151*(k>>8&255)+28*(255&k))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(g=k,y=E),(E=77*((k=m._getARGB(T,x))>>16&255)+151*(k>>8&255)+28*(255&k))<y&&(g=k,y=E),(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))<y&&(g=S,y=x),(k=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<y&&(g=b,y=k),C[j++]=g;m._setPixels(T,C)},blur:function(_,u){for(var p,g,y,S,b,E,x,k,T,j,A=m._toPixels(_),C=_.width,I=_.height,F=C*I,N=new Int32Array(F),z=0;z<F;z++)N[z]=m._getARGB(A,z);var R,q,M,D,X,O,G,K,Z=new Int32Array(F),U=new Int32Array(F),V=new Int32Array(F),L=new Int32Array(F),H=0,J=3.5*u|0;if(o!==(J=J<1?1:J<248?J:248)){c=1+(o=J)<<1,i=new Int32Array(c),f=new Array(c);for(var ne=0;ne<c;ne++)f[ne]=new Int32Array(256);for(var se=1,fe=J-1;se<J;se++){i[J+se]=i[fe]=O=fe*fe,G=f[J+se],K=f[fe--];for(var xe=0;xe<256;xe++)G[xe]=K[xe]=O*xe}X=i[J]=J*J,G=f[J];for(var he=0;he<256;he++)G[he]=X*he}for(q=0;q<I;q++){for(R=0;R<C;R++){if(S=y=g=b=p=0,(E=R-o)<0)j=-E,E=0;else{if(C<=E)break;j=0}for(M=j;M<c&&!(C<=E);M++){var _e=N[E+H];D=f[M],b+=D[(-16777216&_e)>>>24],g+=D[(16711680&_e)>>16],y+=D[(65280&_e)>>8],S+=D[255&_e],p+=i[M],E++}Z[x=H+R]=b/p,U[x]=g/p,V[x]=y/p,L[x]=S/p}H+=C}for(T=(k=-o)*C,q=H=0;q<I;q++){for(R=0;R<C;R++){if(S=y=g=b=p=0,k<0)j=x=-k,E=R;else{if(I<=k)break;j=0,x=k,E=R+T}for(M=j;M<c&&!(I<=x);M++)D=f[M],b+=D[Z[E]],g+=D[U[E]],y+=D[V[E]],S+=D[L[E]],p+=i[M],x++,E+=C;N[R+H]=b/p<<24|g/p<<16|y/p<<8|S/p}H+=C,T+=C,k++}m._setPixels(A,N)}};l.default=m},{"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int32-array":217,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234}],297:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=i(t("../core/main")),c=i(t("omggif"));function i(m){return m&&m.__esModule?m:{default:m}}function f(m){return function(_){if(Array.isArray(_)){for(var u=0,p=new Array(_.length);u<_.length;u++)p[u]=_[u];return p}}(m)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(m,_){return o.default._validateParameters("createImage",arguments),new o.default.Image(m,_)},o.default.prototype.saveCanvas=function(){o.default._validateParameters("saveCanvas",arguments);var m,_,u,p,g,y,S=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(m=arguments[0],S.shift()):arguments[0]instanceof o.default.Element?(m=arguments[0].elt,S.shift()):arguments[0]instanceof o.default.Framebuffer?((g=this.createGraphics((p=arguments[0]).width,p.height)).pixelDensity(pixelDensity()),p.loadPixels(),g.loadPixels(),g.pixels.set(p.pixels),g.updatePixels(),m=g.elt,S.shift()):m=this._curElement&&this._curElement.elt,1<=S.length&&(_=S[0]),u=(u=2<=S.length?S[1]:u)||o.default.prototype._checkFileExtension(_,u)[1]||"png"){default:y="image/png";break;case"jpeg":case"jpg":y="image/jpeg"}m.toBlob(function(b){o.default.prototype.downloadFile(b,_,u),g&&g.remove()},y)},o.default.prototype.encodeAndDownloadGif=function(m,_){for(var u=m.gifProperties,p=u.loopLimit,g=(p===1?p=null:p===null&&(p=0),new Uint8Array(m.width*m.height*u.numFrames)),y=[],S={},b=0;b<u.numFrames;b++){for(var E=new Set,x=u.frames[b].image.data,k=x.length,T=new Uint32Array(m.width*m.height),j=0,A=0;j<k;j+=4,A++){var C=x[j+0]<<16|x[j+1]<<8|x[j+2]<<0;E.add(C),T[A]=C}var I=f(E).sort().toString();S[I]===void 0?S[I]={freq:1,frames:[b]}:(S[I].freq+=1,S[I].frames.push(b)),y.push(T)}for(var z=[],F=Object.keys(S).sort(function(V,L){return S[L].freq-S[V].freq}),N=F[0].split(",").map(function(V){return parseInt(V)}),z=z.concat(S[N].frames),R=new Set(N),q=1;q<F.length;q++){var M=F[q].split(",").map(function(V){return parseInt(V)}).filter(function(V){return!R.has(V)});if(N.length+M.length<=256){for(var D=0;D<M.length;D++)N.push(M[D]),R.add(M[D]);z=z.concat(S[F[q]].frames)}}z=new Set(z);for(var X={},O=0;O<N.length;O++)X[N[O]]||(X[N[O]]=O);for(var G=1;G<N.length;)G<<=1;N.length=G;for(var p={loop:p,palette:new Uint32Array(N)},K=new c.default.GifWriter(g,m.width,m.height,p),Z={},U=0;U<u.numFrames;U++)(function(L){var H=!z.has(L),J=H?[]:N,ne=new Uint8Array(m.width*m.height),se={},fe=new Set,xe=(y[L].forEach(function(pe,ke){H?(se[pe]===void 0&&(se[pe]=J.length,J.push(pe)),ne[ke]=se[pe]):ne[ke]=X[pe],0<L&&y[L-1][ke]!==pe&&fe.add(pe)}),{}),he=J.filter(function(pe){return!fe.has(pe)});if(0<he.length){var he=he[0],_e=(H?se:X)[he];if(0<L){for(var ye=0;ye<y[L].length;ye++)y[L-1][ye]===y[L][ye]&&(ne[ye]=_e);xe.transparent=_e,Z.frameOpts.disposal=1}}if(xe.delay=u.frames[L].delay/10,H){for(var ue=1;ue<J.length;)ue<<=1;J.length=ue,xe.palette=new Uint32Array(J)}0<L&&K.addFrame(0,0,m.width,m.height,Z.pixelPaletteIndex,Z.frameOpts),Z={pixelPaletteIndex:ne,frameOpts:xe}})(U);Z.frameOpts.disposal=1,K.addFrame(0,0,m.width,m.height,Z.pixelPaletteIndex,Z.frameOpts),p=new Blob([g.slice(0,K.end())],{type:"image/gif"}),o.default.prototype.downloadFile(p,_,"gif")},o.default.prototype.saveFrames=function(m,_,u,y,g){o.default._validateParameters("saveFrames",arguments),u=o.default.prototype.constrain(u=u||3,0,15),u*=1e3;var y=o.default.prototype.constrain(y||15,0,22),S=0,b=o.default.prototype._makeFrame,E=this._curElement.elt,x=[],k=setInterval(function(){x.push(b(m+S,_,E)),S++},1e3/y);setTimeout(function(){if(clearInterval(k),g)g(x);else for(var T=0,j=x;T<j.length;T++){var A=j[T];o.default.prototype.downloadFile(A.imageData,A.filename,A.ext)}x=[]},.01+u)},o.default.prototype._makeFrame=function(m,_,g){var p,g=this?this._curElement.elt:g;if(_)switch(_.toLowerCase()){case"png":p="image/png";break;case"jpeg":case"jpg":p="image/jpeg";break;default:p="image/png"}else _="png",p="image/png";var g=(g=g.toDataURL(p)).replace(p,"image/octet-stream"),y={};return y.imageData=g,y.filename=m,y.ext=_,y},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238,omggif:248}],298:[function(t,a,l){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(E)}function c(E){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t("regenerator-runtime/runtime");var i=g(t("../core/main")),f=g(t("../core/helpers")),m=function(E){if(E&&E.__esModule)return E;if(E===null||c(E)!=="object"&&typeof E!="function")return{default:E};var x=p();if(x&&x.has(E))return x.get(E);var k,T={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in E){var A;Object.prototype.hasOwnProperty.call(E,k)&&((A=j?Object.getOwnPropertyDescriptor(E,k):null)&&(A.get||A.set)?Object.defineProperty(T,k,A):T[k]=E[k])}return T.default=E,x&&x.set(E,T),T}(t("../core/constants")),_=g(t("omggif")),u=t("gifenc");function p(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,p=function(){return E},E)}function g(E){return E&&E.__esModule?E:{default:E}}function y(E,x,k,T,j,A,C){try{var I=E[A](C),F=I.value}catch(N){return void k(N)}I.done?x(F):Promise.resolve(F).then(T,j)}function S(E,x,k,T,j,A,C,I,F,N,z){var R,q,M,D,X,O,G,K,Z;return E===m.COVER&&(R=x,M=k,G=A,K=C,O=I,Z=F,q=N,D=z,X=Math.max(G/q,K/D),G/=X,K/=X,X=O,O=Z,R===m.CENTER?X+=(q-G)/2:R===m.RIGHT&&(X+=q-G),M===m.CENTER?O+=(D-K)/2:M===m.BOTTOM&&(O+=D-K),I=(Z={x:X,y:O,w:G,h:K}).x,F=Z.y,N=Z.w,z=Z.h),E===m.CONTAIN&&(R=x,q=k,M=T,D=j,X=A,O=C,G=N,K=z,Z=Math.max(G/X,K/O),G/=Z,K/=Z,Z=M,M=D,R===m.CENTER?Z+=(X-G)/2:R===m.RIGHT&&(Z+=X-G),q===m.CENTER?M+=(O-K)/2:q===m.BOTTOM&&(M+=O-K),T=(E={x:Z,y:M,w:G,h:K}).x,j=E.y,A=E.w,C=E.h),{sx:I,sy:F,sw:N,sh:z,dx:T,dy:j,dw:A,dh:C}}function b(E,x){return 0<E&&E<x?E:x}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.loadImage=function(E,x,k){i.default._validateParameters("loadImage",arguments);var T=new i.default.Image(1,1,this),j=this,A=new Request(E,{method:"GET",mode:"cors"});return fetch(E,A).then(function(C){var I,F=C.headers.get("content-type");F===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),F&&F.includes("image/gif")?C.arrayBuffer().then(function(N){if(N){for(var N=new Uint8Array(N),z=T,R=x,q=k,M=(function(H){j._decrementPreload()}).bind(j),D=new _.default.GifReader(N),X=(z.width=z.canvas.width=D.width,z.height=z.canvas.height=D.height,[]),O=D.numFrames(),G=new Uint8ClampedArray(z.width*z.height*4),K=0;K<O;K++){var Z=D.frameInfo(K),U=z.drawingContext.getImageData(0,0,z.width,z.height),V=(G=U.data.slice(),function(H,J){try{J.decodeAndBlitFrameRGBA(H,G)}catch(ne){i.default._friendlyFileLoadError(8,z.src),typeof q=="function"?q(ne):console.error(ne)}}(K,D),new ImageData(G,z.width,z.height)),V=(z.drawingContext.putImageData(V,0,0),Z.delay);V===0&&(V=10),X.push({image:z.drawingContext.getImageData(0,0,z.width,z.height),delay:10*V}),Z.disposal===2?z.drawingContext.clearRect(Z.x,Z.y,Z.width,Z.height):Z.disposal===3&&z.drawingContext.putImageData(U,0,0,Z.x,Z.y,Z.width,Z.height)}(N=D.loopCount())===null?N=1:N===0&&(N=null),z.drawingContext.putImageData(X[0].image,0,0),1<X.length&&(z.gifProperties={displayIndex:0,loopLimit:N,loopCount:0,frames:X,numFrames:O,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof R=="function"&&R(z),M()}},function(N){typeof k=="function"?(k(N),j._decrementPreload()):console.error(N)}):((I=new Image).onload=function(){T.width=T.canvas.width=I.width,T.height=T.canvas.height=I.height,T.drawingContext.drawImage(I,0,0),T.modified=!0,typeof x=="function"&&x(T),j._decrementPreload()},I.onerror=function(N){i.default._friendlyFileLoadError(0,I.src),typeof k=="function"?(k(N),j._decrementPreload()):console.error(N)},E.indexOf("data:image/")!==0&&(I.crossOrigin="Anonymous"),I.src=E),T.modified=!0}).catch(function(C){i.default._friendlyFileLoadError(0,E),typeof k=="function"?(k(C),j._decrementPreload()):console.error(C)}),T},i.default.prototype.saveGif=function(){E=regeneratorRuntime.mark(function k(T,j){var A,C,I,F,N,z,R,q,M,D,X,O,G,K,Z,U,V,L,H,J,ne,se,fe,xe,he,_e,ye=arguments;return regeneratorRuntime.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(A=2<ye.length&&ye[2]!==void 0?ye[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof T!="string")throw TypeError("fileName parameter must be a string");ue.next=3;break;case 3:if(typeof j!="number")throw TypeError("Duration parameter must be a number");ue.next=5;break;case 5:if(C=A&&A.delay||0,I=A&&A.units||"seconds",F=A&&A.silent||!1,N=A&&A.notificationDuration||0,z=A&&A.notificationID||"progressBar",typeof C!="number")throw TypeError("Delay parameter must be a number");ue.next=12;break;case 12:if(I!=="seconds"&&I!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ue.next=14;break;case 14:if(typeof F!="boolean")throw TypeError("Silent parameter must be a boolean");ue.next=16;break;case 16:if(typeof N!="number")throw TypeError("Notification duration parameter must be a number");ue.next=18;break;case 18:if(typeof z!="string")throw TypeError("Notification ID parameter must be a string");ue.next=20;break;case 20:return this._recording=!0,D=this._targetFrameRate,R=(R=1/(D=D!==1/0&&D!==void 0&&D!==0?D:60)*1e3)<20?20:R,M=(q=I==="seconds"?j*D:j)+(D=I==="seconds"?C*D:C),D=D,this.frameCount=D,X=this._pixelDensity,this.pixelDensity(1),O=[],document.getElementById(z)!==null&&document.getElementById(z).remove(),F||((G=this.createP("")).id(z),G.style("font-size","16px"),G.style("font-family","Montserrat"),G.style("background-color","#ffffffa0"),G.style("padding","8px"),G.style("border-radius","10px"),G.position(0,0)),this._renderer instanceof i.default.RendererGL&&(Z=this.drawingContext,K=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4)),this.noLoop(),ue.next=39,Promise.resolve();case 39:if(D<M)return this.redraw(),xe=void 0,xe=this._renderer instanceof i.default.RendererGL?(K=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4),Z.readPixels(0,0,Z.drawingBufferWidth,Z.drawingBufferHeight,Z.RGBA,Z.UNSIGNED_BYTE,K),function(pe){for(var ke=parseInt(height/2),Ie=4*width,Y=new Uint8Array(4*width),te=0;te<ke;++te){var re=te*Ie,be=(height-te-1)*Ie;Y.set(pe.subarray(re,re+Ie)),pe.copyWithin(re,be,be+Ie),pe.set(Y,be)}return pe}(K)):this.drawingContext.getImageData(0,0,this.width,this.height).data,O.push(xe),D++,F||G.html("Saved frame <b>"+O.length.toString()+"</b> out of "+q.toString()),ue.next=48,new Promise(function(pe){return setTimeout(pe,0)});ue.next=50;break;case 48:ue.next=39;break;case 50:F||G.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(X),U=(0,u.GIFEncoder)(),V=function(pe){for(var ke=new Uint8Array(pe.length*pe[0].length),Ie=0;Ie<pe.length;Ie++)ke.set(pe[Ie],Ie*pe[0].length);var Y=(0,u.quantize)(ke,256,{format:"rgba4444",oneBitAlpha:!0});return Y.length===256?Y[Y.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Y.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Y}(O),L={},H=function(pe){for(var ke=pe.length/4,Ie=new Uint8Array(ke),Y=0;Y<ke;Y++){var te=pe[4*Y]<<24|pe[4*Y+1]<<16|pe[4*Y+2]<<8|pe[4*Y+3];L[te]===void 0&&(L[te]=(0,u.nearestColorIndex)(V,pe.slice(4*Y,4*(Y+1)))),Ie[Y]=L[te]}return Ie},J=V.length-1,ne=[],se=0;case 60:if(!(se<O.length)){ue.next=71;break}if(fe=H(O[se]),xe=fe.slice(),se===0)U.writeFrame(fe,this.width,this.height,{palette:V,delay:R,dispose:1});else{for(he=0;he<fe.length;he++)fe[he]===ne[he]&&(fe[he]=J);U.writeFrame(fe,this.width,this.height,{delay:R,transparent:!0,transparentIndex:J,dispose:1})}return ne=xe,F||G.html("Rendered frame <b>"+se.toString()+"</b> out of "+q.toString()),ue.next=68,new Promise(function(pe){return setTimeout(pe,0)});case 68:se++,ue.next=60;break;case 71:U.finish(),_e=U.bytesView(),_e=new Blob([_e],{type:"image/gif"}),O=[],this._recording=!1,this.loop(),F||(G.html("Done. Downloading your gif!"),0<N&&setTimeout(function(){return G.remove()},1e3*N)),i.default.prototype.downloadFile(_e,T,"gif");case 80:case"end":return ue.stop()}},k,this)});var E,x=function(){var k=this,T=arguments;return new Promise(function(j,A){var C=E.apply(k,T);function I(N){y(C,j,A,I,F,"next",N)}function F(N){y(C,j,A,I,F,"throw",N)}I(void 0)})};return function(k,T){return x.apply(this,arguments)}}(),i.default.prototype.image=function(E,x,k,T,D,X,O,G,Z,N,z,R){i.default._validateParameters("image",arguments);var K=E.width,q=E.height,M=(R=R||m.CENTER,z=z||m.CENTER,E.elt&&(K=K!==void 0?K:E.elt.width,q=q!==void 0?q:E.elt.height),E.elt&&E.elt.videoWidth&&!E.canvas&&(K=K!==void 0?K:E.elt.videoWidth,q=q!==void 0?q:E.elt.videoHeight),T||K),D=D||q,X=X||0,O=O||0,G=b(G!==void 0?G:K,K),K=b(Z!==void 0?Z:q,q),Z=1;E.elt&&!E.canvas&&E.elt.style.width&&(Z=E.elt.videoWidth&&!T?E.elt.videoWidth:E.elt.width,Z/=parseInt(E.elt.style.width,10)),X*=Z,O*=Z,K*=Z,G*=Z,q=S(N,z,R,(q=f.default.modeAdjust(x,k,M,D,this._renderer._imageMode)).x,q.y,q.w,q.h,X,O,G,K),this._renderer.image(E,q.sx,q.sy,q.sw,q.sh,q.dx,q.dy,q.dw,q.dh)},i.default.prototype.tint=function(){for(var E=arguments.length,x=new Array(E),k=0;k<E;k++)x[k]=arguments[k];i.default._validateParameters("tint",x);var T=this.color.apply(this,x);this._renderer._tint=T.levels},i.default.prototype.noTint=function(){this._renderer._tint=null},i.default.prototype._getTintedImageCanvas=i.default.Renderer2D.prototype._getTintedImageCanvas,i.default.prototype.imageMode=function(E){i.default._validateParameters("imageMode",arguments),E!==m.CORNER&&E!==m.CORNERS&&E!==m.CENTER||(this._renderer._imageMode=E)},t=i.default,l.default=t},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/helpers":271,"../core/main":275,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,gifenc:245,omggif:248,"regenerator-runtime/runtime":252}],299:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=i(t("../core/main")),c=i(t("./filters"));function i(m){return m&&m.__esModule?m:{default:m}}function f(m,_){for(var u=0;u<_.length;u++){var p=_[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(m,p.key,p)}}o.default.Image=function(){function m(p,g){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.width=p,this.height=g,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var _,u;return _=m,(u=[{key:"pixelDensity",value:function(p){return p!==void 0?(p<=0&&(o.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),p=1),this._pixelDensity=p,this.width/=p,this.height/=p,this):this._pixelDensity}},{key:"_animateGif",value:function(S){var g,y=this.gifProperties,S=S._lastRealFrameTime;y.lastChangeTime===0&&(y.lastChangeTime=S),y.playing&&(y.timeDisplayed=S-y.lastChangeTime,g=y.frames[y.displayIndex].delay,y.timeDisplayed>=g&&(g=Math.floor(y.timeDisplayed/g),y.timeDisplayed=0,y.lastChangeTime=S,y.displayIndex+=g,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(S=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[S].image,0,0),y.displayIndex=S,this.setModified(!0))))}},{key:"_setProperty",value:function(p,g){this[p]=g,this.setModified(!0)}},{key:"loadPixels",value:function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(p,g,y,S){o.default.Renderer2D.prototype.updatePixels.call(this,p,g,y,S),this.setModified(!0)}},{key:"get",value:function(p,g,y,S){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];return o.default.Renderer2D.prototype._getPixel.apply(this,g)}},{key:"set",value:function(p,g,y){o.default.Renderer2D.prototype.set.call(this,p,g,y),this.setModified(!0)}},{key:"resize",value:function(p,g){p===0&&g===0?(p=this.canvas.width,g=this.canvas.height):p===0?p=this.canvas.width*g/this.canvas.height:g===0&&(g=this.canvas.height*p/this.canvas.width),p=Math.floor(p),g=Math.floor(g);var y=document.createElement("canvas");if(y.width=p,y.height=g,this.gifProperties)for(var S=this.gifProperties,b=0;b<S.numFrames;b++){for(var E=this.drawingContext.createImageData(p,g),x=(C=C=A=j=T=void 0,S.frames[b].image),k=E,T=0,j=0;j<k.height;j++)for(var A=0;A<k.width;A++){var C=Math.floor(A*x.width/k.width),C=4*(Math.floor(j*x.height/k.height)*x.width+C);k.data[T++]=x.data[C++],k.data[T++]=x.data[C++],k.data[T++]=x.data[C++],k.data[T++]=x.data[+C]}S.frames[b].image=E}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=p,this.canvas.height=this.height=g,this.drawingContext.drawImage(y,0,0,p,g,0,0,p,g),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];o.default.prototype.copy.apply(this,g)}},{key:"mask",value:function(p){var g=this.drawingContext.globalCompositeOperation,y=1,S=[p=p===void 0?this:p,0,0,(y=p instanceof o.default.Renderer?p._pInst._pixelDensity:y)*p.width,y*p.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var b=0;b<this.gifProperties.frames.length;b++)this.drawingContext.putImageData(this.gifProperties.frames[b].image,0,0),this.copy.apply(this,S),this.gifProperties.frames[b].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,S);this.drawingContext.globalCompositeOperation=g,this.setModified(!0)}},{key:"filter",value:function(p,g){c.default.apply(this.canvas,c.default[p],g),this.setModified(!0)}},{key:"blend",value:function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,g),this.setModified(!0)}},{key:"setModified",value:function(p){this._modified=p}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(p,g){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,p):o.default.prototype.saveCanvas(this.canvas,p,g)}},{key:"reset",value:function(){var p;this.gifProperties&&((p=this.gifProperties).playing=!0,p.timeSinceStart=0,p.timeDisplayed=0,p.lastChangeTime=0,p.loopCount=0,p.displayIndex=0,this.drawingContext.putImageData(p.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var p;if(this.gifProperties)return(p=this.gifProperties).displayIndex%p.numFrames}},{key:"setFrame",value:function(p){var g;this.gifProperties&&(p<(g=this.gifProperties).numFrames&&0<=p?(g.timeDisplayed=0,g.lastChangeTime=0,g.displayIndex=p,this.drawingContext.putImageData(g.frames[p].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(p,g){if(this.gifProperties){var y=this.gifProperties;if(g<y.numFrames&&0<=g)y.frames[g].delay=p;else{var S=!0,g=!1,b=void 0;try{for(var E,x=y.frames[Symbol.iterator]();!(S=(E=x.next()).done);S=!0)E.value.delay=p}catch(T){g=!0,b=T}finally{try{S||x.return==null||x.return()}finally{if(g)throw b}}}}}}])&&f(_.prototype,u),m}(),t=o.default.Image,l.default=t},{"../core/main":275,"./filters":296,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],300:[function(t,a,l){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=i(t("../core/main")),c=i(t("./filters"));function i(f){return f&&f.__esModule?f:{default:f}}t("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var f,m=arguments.length,_=new Array(m),u=0;u<m;u++)_[u]=arguments[u];o.default._validateParameters("blend",_),this._renderer?(f=this._renderer).blend.apply(f,_):o.default.Renderer2D.prototype.blend.apply(this,_)},o.default.prototype.copy=function(){for(var f,m,_,u,p,g,y,S,b,E=arguments.length,x=new Array(E),k=0;k<E;k++)x[k]=arguments[k];if(o.default._validateParameters("copy",x),x.length===9)f=x[0],m=x[1],_=x[2],u=x[3],p=x[4],g=x[5],y=x[6],S=x[7],b=x[8];else{if(x.length!==8)throw new Error("Signature not supported");f=this,m=x[0],_=x[1],u=x[2],p=x[3],g=x[4],y=x[5],S=x[6],b=x[7]}o.default.prototype._copyHelper(this,f,m,_,u,p,g,y,S,b)},o.default.prototype._copyHelper=function(f,m,_,u,p,g,y,S,b,E){var x=m.canvas.width/m.width,k=0,T=0;m._renderer&&m._renderer.isP3D&&(k=m.width/2,T=m.height/2),f._renderer&&f._renderer.isP3D?o.default.RendererGL.prototype.image.call(f._renderer,m,_+k,u+T,p,g,y,S,b,E):f.drawingContext.drawImage(m.canvas,x*(_+k),x*(u+T),x*p,x*g,y,S,b,E)},o.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},o.default.prototype.filter=function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];o.default._validateParameters("filter",arguments);var y=(function(){var S,b={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof o.default.Shader?b.shader=arguments.length<=0?void 0:arguments[0]:(b.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(b.value=arguments.length<=1?void 0:arguments[1]),((S=arguments.length-1)<0||arguments.length<=S?void 0:arguments[S])===!1&&(b.useWebGL=!1)),b}).apply(void 0,m),u=y.shader,p=y.operation,g=y.value,y=y.useWebGL;this._renderer.isP3D&&u?o.default.RendererGL.prototype.filter.call(this._renderer,u):y||this._renderer.isP3D?(!y&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?o.default.RendererGL.prototype.filter.call(this._renderer,p,g):((u=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),u.filter.apply(u,m),this._renderer._pInst.image(u,0,0),u.clear())):this.canvas!==void 0?c.default.apply(this.canvas,c.default[p],g):c.default.apply(this.elt,c.default[p],g)},o.default.prototype.get=function(f,m,_,u){var p;return o.default._validateParameters("get",arguments),(p=this._renderer).get.apply(p,arguments)},o.default.prototype.loadPixels=function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];o.default._validateParameters("loadPixels",m),this._renderer.loadPixels()},o.default.prototype.set=function(f,m,_){this._renderer.set(f,m,_)},o.default.prototype.updatePixels=function(f,m,_,u){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(f,m,_,u)},t=o.default,l.default=t},{"../color/p5.Color":262,"../core/main":275,"./filters":296,"core-js/modules/es.array.filter":155}],301:[function(t,a,l){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=m(t("../core/main")),i=(t("whatwg-fetch"),t("es6-promise/auto"),m(t("fetch-jsonp"))),f=m(t("file-saver"));function m(g){return g&&g.__esModule?g:{default:g}}function _(g){return(_=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}function u(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function p(g,y){y&&y!==!0&&y!=="true"||(y="");var S="";return(g=g||"untitled")&&g.includes(".")&&(S=g.split(".").pop()),y&&S!==y&&(S=y,g="".concat(g,".").concat(S)),[g,S]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),c.default.prototype.loadJSON=function(){for(var g=arguments.length,y=new Array(g),S=0;S<g;S++)y[S]=arguments[S];c.default._validateParameters("loadJSON",y);for(var b,E,x,k=y[0],T={},j="json",A=1;A<y.length;A++){var C=y[A];typeof C=="string"?C!=="jsonp"&&C!=="json"||(j=C):typeof C=="function"?b?E=C:b=C:_(C)==="object"&&(C.hasOwnProperty("jsonpCallback")||C.hasOwnProperty("jsonpCallbackFunction"))&&(j="jsonp",x=C)}var I=this;return this.httpDo(k,"GET",x,j,function(F){for(var N in F)T[N]=F[N];b!==void 0&&b(F),I._decrementPreload()},function(F){if(c.default._friendlyFileLoadError(5,k),!E)throw F;E(F)}),T},c.default.prototype.loadStrings=function(){for(var g=arguments.length,y=new Array(g),S=0;S<g;S++)y[S]=arguments[S];c.default._validateParameters("loadStrings",y);for(var b,E,x=[],k=1;k<y.length;k++){var T=y[k];typeof T=="function"&&(b===void 0?b=T:E===void 0&&(E=T))}var j=this;return c.default.prototype.httpDo.call(this,y[0],"GET","text",function(A){for(var C=A.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),I=0,F=C.length;I<F;I+=32768)Array.prototype.push.apply(x,C.slice(I,Math.min(I+32768,F)));b!==void 0&&b(x),j._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(3,A),!E)throw A;E(A)}),x},c.default.prototype.loadTable=function(g){var y,S,b,E=!1,x=g.substring(g.lastIndexOf(".")+1,g.length);x==="csv"?b=",":x==="ssv"?b=";":x==="tsv"&&(b="	");for(var k=1;k<arguments.length;k++)typeof arguments[k]=="function"?y===void 0?y=arguments[k]:S===void 0&&(S=arguments[k]):typeof arguments[k]=="string"&&(arguments[k]==="header"&&(E=!0),arguments[k]==="csv"?b=",":arguments[k]==="ssv"?b=";":arguments[k]==="tsv"&&(b="	"));var T=new c.default.Table,j=this;return this.httpDo(g,"GET","table",function(A){for(var C,I,F={},N=0,z=[],R=0,q=null,M=function(){F.currentState=N,F.token=""},D=function(){q.push(F.token),M()},X=function(){F.currentState=4,z.push(q),q=null};;){if((C=A[R++])==null){if(F.escaped)throw new Error("Unclosed quote in file.");if(q){D(),X();break}}if(q===null&&(F.escaped=!1,q=[],M()),F.currentState===N){if(C==='"'){F.escaped=!0,F.currentState=1;continue}F.currentState=1}if(F.currentState===1&&F.escaped)if(C==='"')A[R]==='"'?(F.token+='"',R++):(F.escaped=!1,F.currentState=2);else{if(C==="\r")continue;F.token+=C}else C==="\r"?(A[R]===`
`&&R++,D(),X()):C===`
`?(D(),X()):C===b?D():F.currentState===1&&(F.token+=C)}if(E)T.columns=z.shift();else for(var O=0;O<z[0].length;O++)T.columns[O]="null";for(var G=0;G<z.length;G++)(z[G].length!==1||z[G][0]!=="undefined"&&z[G][0]!=="")&&((I=new c.default.TableRow).arr=z[G],I.obj=function(K,Z){if((Z=Z||[])===void 0)for(var U=0;U<K.length;U++)Z[U.toString()]=U;return Object.fromEntries(Z.map(function(V,L){return[V,K[L]]}))}(z[G],T.columns),T.addRow(I));typeof y=="function"&&y(T),j._decrementPreload()},function(A){c.default._friendlyFileLoadError(2,g),S?S(A):console.error(A)}),T},c.default.prototype.loadXML=function(){for(var g=arguments.length,y=new Array(g),S=0;S<g;S++)y[S]=arguments[S];for(var b,E,x=new c.default.XML,k=1;k<y.length;k++){var T=y[k];typeof T=="function"&&(b===void 0?b=T:E===void 0&&(E=T))}var j=this;return this.httpDo(y[0],"GET","xml",function(A){for(var C in A)x[C]=A[C];b!==void 0&&b(x),j._decrementPreload()},function(A){if(c.default._friendlyFileLoadError(1,A),!E)throw A;E(A)}),x},c.default.prototype.loadBytes=function(g,y,S){var b={},E=this;return this.httpDo(g,"GET","arrayBuffer",function(x){b.bytes=new Uint8Array(x),typeof y=="function"&&y(b),E._decrementPreload()},function(x){if(c.default._friendlyFileLoadError(6,g),!S)throw x;S(x)}),b},c.default.prototype.httpGet=function(){c.default._validateParameters("httpGet",arguments);var g=Array.prototype.slice.call(arguments);return g.splice(1,0,"GET"),c.default.prototype.httpDo.apply(this,g)},c.default.prototype.httpPost=function(){c.default._validateParameters("httpPost",arguments);var g=Array.prototype.slice.call(arguments);return g.splice(1,0,"POST"),c.default.prototype.httpDo.apply(this,g)},c.default.prototype.httpDo=function(){for(var g,y,S,b={},E=0,x="text/plain",k=arguments.length-1;0<k&&typeof(k<0||arguments.length<=k?void 0:arguments[k])=="function";k--)E++;var T=arguments.length-E,j=arguments.length<=0?void 0:arguments[0];if(T==2&&typeof j=="string"&&_(arguments.length<=1?void 0:arguments[1])==="object")z=new Request(j,arguments.length<=1?void 0:arguments[1]),y=arguments.length<=2?void 0:arguments[2],S=arguments.length<=3?void 0:arguments[3];else{for(var A,C="GET",I=1;I<arguments.length;I++){var F=I<0||arguments.length<=I?void 0:arguments[I];if(typeof F=="string")F==="GET"||F==="POST"||F==="PUT"||F==="DELETE"?C=F:F==="json"||F==="jsonp"||F==="binary"||F==="arrayBuffer"||F==="xml"||F==="text"||F==="table"?g=F:A=F;else if(typeof F=="number")A=F.toString();else if(_(F)==="object")if(F.hasOwnProperty("jsonpCallback")||F.hasOwnProperty("jsonpCallbackFunction"))for(var N in F)b[N]=F[N];else x=F instanceof c.default.XML?(A=F.serialize(),"application/xml"):(A=JSON.stringify(F),"application/json");else typeof F=="function"&&(y?S=F:y=F)}var T=C==="GET"?new Headers:new Headers({"Content-Type":x}),z=new Request(j,{method:C,mode:"cors",body:A,headers:T})}return(T=(T=(g=g||(j.includes("json")?"json":j.includes("xml")?"xml":"text"))==="jsonp"?(0,i.default)(j,b):fetch(z)).then(function(R){if(!R.ok)throw(q=new Error(R.body)).status=R.status,q.ok=!1,q;var q=0;switch((q=g!=="jsonp"?R.headers.get("content-length"):q)&&64e6<q&&c.default._friendlyFileLoadError(7,j),g){case"json":case"jsonp":return R.json();case"binary":return R.blob();case"arrayBuffer":return R.arrayBuffer();case"xml":return R.text().then(function(M){return M=new DOMParser().parseFromString(M,"text/xml"),new c.default.XML(M.documentElement)});default:return R.text()}})).then(y||function(){}),T.catch(S||console.error),T},window.URL=window.URL||window.webkitURL,c.default.prototype._pWriters=[],c.default.prototype.createWriter=function(g,y){var S,b;for(b in c.default.prototype._pWriters)if(c.default.prototype._pWriters[b].name===g)return S=new c.default.PrintWriter(g+this.millis(),y),c.default.prototype._pWriters.push(S),S;return S=new c.default.PrintWriter(g,y),c.default.prototype._pWriters.push(S),S},c.default.PrintWriter=function(g,y){var S=this;this.name=g,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,E=[];for(b in E.push(this.content),c.default.prototype.writeFile(E,g,y),c.default.prototype._pWriters)c.default.prototype._pWriters[b].name===this.name&&c.default.prototype._pWriters.splice(b,1);S.clear(),S={}}},c.default.prototype.save=function(g,y,S){var b=arguments,E=(this._curElement||this).elt;if(b.length===0)c.default.prototype.saveCanvas(E);else if(b[0]instanceof c.default.Renderer||b[0]instanceof c.default.Graphics)c.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")c.default.prototype.saveCanvas(E,b[0]);else switch(p(b[1],b[2])[1]){case"json":return void c.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void c.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?c.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof c.default.Table?c.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof c.default.Image?c.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof c.default.SoundFile&&c.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},c.default.prototype.saveJSON=function(g,y,S){c.default._validateParameters("saveJSON",arguments),S=S?JSON.stringify(g):JSON.stringify(g,void 0,2),this.saveStrings(S.split(`
`),y,"json")},c.default.prototype.saveJSONObject=c.default.prototype.saveJSON,c.default.prototype.saveJSONArray=c.default.prototype.saveJSON,c.default.prototype.saveStrings=function(g,y,S,b){c.default._validateParameters("saveStrings",arguments);for(var E=this.createWriter(y,S||"txt"),x=0;x<g.length;x++)b?E.write(g[x]+`\r
`):E.write(g[x]+`
`);E.close(),E.clear()},c.default.prototype.saveTable=function(g,y,S){c.default._validateParameters("saveTable",arguments),b=S===void 0?y.substring(y.lastIndexOf(".")+1,y.length):S;var b,E=this.createWriter(y,b),x=g.columns,k=b==="tsv"?"	":",";if(b!=="html"){if(x[0]!=="0"){for(var T=0;T<x.length;T++)T<x.length-1?E.write(x[T]+k):E.write(x[T]);E.write(`
`)}for(var j=0;j<g.rows.length;j++){for(var A=void 0,A=0;A<g.rows[j].arr.length;A++)A<g.rows[j].arr.length-1?b==="csv"&&String(g.rows[j].arr[A]).includes(",")?E.write('"'+g.rows[j].arr[A]+'"'+k):E.write(g.rows[j].arr[A]+k):b==="csv"&&String(g.rows[j].arr[A]).includes(",")?E.write('"'+g.rows[j].arr[A]+'"'):E.write(g.rows[j].arr[A]);E.write(`
`)}}else{if(E.print("<html>"),E.print("<head>"),E.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),E.print("</head>"),E.print("<body>"),E.print("  <table>"),x[0]!=="0"){E.print("    <tr>");for(var C=0;C<x.length;C++){var I=u(x[C]);E.print("      <td>".concat(I)),E.print("      </td>")}E.print("    </tr>")}for(var F=0;F<g.rows.length;F++){E.print("    <tr>");for(var N=0;N<g.columns.length;N++){var z=u(g.rows[F].getString(N));E.print("      <td>".concat(z)),E.print("      </td>")}E.print("    </tr>")}E.print("  </table>"),E.print("</body>"),E.print("</html>")}E.close(),E.clear()},c.default.prototype.writeFile=function(E,y,S){var b="application/octet-stream",E=(c.default.prototype._isSafari()&&(b="text/plain"),new Blob(E,{type:b}));c.default.prototype.downloadFile(E,y,S)},c.default.prototype.downloadFile=function(g,E,x){var b,E=p(E,x),x=E[0];g instanceof Blob?f.default.saveAs(g,x):((b=document.createElement("a")).href=g,b.download=x,b.onclick=function(k){document.body.removeChild(k.target),k.stopPropagation()},b.style.display="none",document.body.appendChild(b),c.default.prototype._isSafari()&&(g=(g=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(E[1],'"'),alert(g)),b.click())},c.default.prototype._checkFileExtension=p,c.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},t=c.default,l.default=t},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.promise":183,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/web.dom-collections.iterator":238,"core-js/modules/web.url":240,"es6-promise/auto":241,"fetch-jsonp":243,"file-saver":244,"whatwg-fetch":253}],302:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(i,f){for(var m=0;m<f.length;m++){var _=f[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.Table=function(){function i(_){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var f,m;return f=i,(m=[{key:"addRow",value:function(_){if(_=_||new o.default.TableRow,_.arr===void 0||_.obj===void 0)throw new Error("invalid TableRow: ".concat(_));return(_.table=this).rows.push(_),_}},{key:"removeRow",value:function(_){this.rows[_].table=null,_=this.rows.splice(_+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(_)}},{key:"getRow",value:function(_){return this.rows[_]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(_,u){if(typeof u=="string"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[u]===_)return this.rows[p]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].arr[u]===_)return this.rows[g];return null}},{key:"findRows",value:function(_,u){var p=[];if(typeof u=="string")for(var g=0;g<this.rows.length;g++)this.rows[g].obj[u]===_&&p.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[u]===_&&p.push(this.rows[y]);return p}},{key:"matchRow",value:function(_,u){if(typeof u=="number"){for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[u].match(_))return this.rows[p]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].obj[u].match(_))return this.rows[g];return null}},{key:"matchRows",value:function(_,u){var p=[];if(typeof u=="number")for(var g=0;g<this.rows.length;g++)this.rows[g].arr[u].match(_)&&p.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[u].match(_)&&p.push(this.rows[y]);return p}},{key:"getColumn",value:function(_){var u=[];if(typeof _=="string")for(var p=0;p<this.rows.length;p++)u.push(this.rows[p].obj[_]);else for(var g=0;g<this.rows.length;g++)u.push(this.rows[g].arr[_]);return u}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(_){this.columns.push(_||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(_,u){for(var p=[],g=0;g<_.length;g++)p.push(_.charAt(g).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(p.join("|"),"g");if(u===void 0)for(var S=0;S<this.columns.length;S++)for(var b=0;b<this.rows.length;b++){var E=(E=this.rows[b].arr[S]).replace(y,"");this.rows[b].arr[S]=E,this.rows[b].obj[this.columns[S]]=E}else if(typeof u=="string")for(var x=0;x<this.rows.length;x++){var k=(k=this.rows[x].obj[u]).replace(y,""),T=(this.rows[x].obj[u]=k,this.columns.indexOf(u));this.rows[x].arr[T]=k}else for(var j=0;j<this.rows.length;j++){var A=(A=this.rows[j].arr[u]).replace(y,"");this.rows[j].arr[u]=A,this.rows[j].obj[this.columns[u]]=A}}},{key:"trim",value:function(_){var u=new RegExp(" ","g");if(_===void 0)for(var p=0;p<this.columns.length;p++)for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].arr[p]).replace(u,"");this.rows[g].arr[p]=y,this.rows[g].obj[this.columns[p]]=y}else if(typeof _=="string")for(var S=0;S<this.rows.length;S++){var b=(b=this.rows[S].obj[_]).replace(u,""),E=(this.rows[S].obj[_]=b,this.columns.indexOf(_));this.rows[S].arr[E]=b}else for(var x=0;x<this.rows.length;x++){var k=(k=this.rows[x].arr[_]).replace(u,"");this.rows[x].arr[_]=k,this.rows[x].obj[this.columns[_]]=k}}},{key:"removeColumn",value:function(g){typeof g=="string"?p=this.columns.indexOf(u=g):u=this.columns[p=g];var u,p,g=this.columns.splice(p+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(g);for(var y=0;y<this.rows.length;y++){var S=this.rows[y].arr,b=S.splice(p+1,S.length);S.pop(),this.rows[y].arr=S.concat(b),delete this.rows[y].obj[u]}}},{key:"set",value:function(_,u,p){this.rows[_].set(u,p)}},{key:"setNum",value:function(_,u,p){this.rows[_].setNum(u,p)}},{key:"setString",value:function(_,u,p){this.rows[_].setString(u,p)}},{key:"get",value:function(_,u){return this.rows[_].get(u)}},{key:"getNum",value:function(_,u){return this.rows[_].getNum(u)}},{key:"getString",value:function(_,u){return this.rows[_].getString(u)}},{key:"getObject",value:function(_){for(var u,p={},g=0;g<this.rows.length;g++)if(u=this.rows[g].obj,typeof _=="string"){if(!(0<=this.columns.indexOf(_)))throw new Error('This table has no column named "'.concat(_,'"'));p[u[_]]=u}else p[g]=this.rows[g].obj;return p}},{key:"getArray",value:function(){for(var _=[],u=0;u<this.rows.length;u++)_.push(this.rows[u].arr);return _}}])&&c(f.prototype,m),i}(),t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.join":162,"core-js/modules/es.array.splice":167,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.match":193,"core-js/modules/es.string.replace":196}],303:[function(t,a,l){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,i){for(var f=0;f<i.length;f++){var m=i[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}t.default.TableRow=function(){function c(m,_){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var u=[];m&&(u=m.split(_=_||",")),this.arr=u,this.obj=Object.fromEntries(u.entries()),this.table=null}var i,f;return i=c,(f=[{key:"set",value:function(m,_){if(typeof m=="string"){var u=this.table.columns.indexOf(m);if(!(0<=u))throw new Error('This table has no column named "'.concat(m,'"'));this.obj[m]=_,this.arr[u]=_}else{if(!(m<this.table.columns.length))throw new Error("Column #".concat(m," is out of the range of this table"));this.arr[m]=_,u=this.table.columns[m],this.obj[u]=_}}},{key:"setNum",value:function(m,_){_=parseFloat(_),this.set(m,_)}},{key:"setString",value:function(m,_){_=_.toString(),this.set(m,_)}},{key:"get",value:function(m){return(typeof m=="string"?this.obj:this.arr)[m]}},{key:"getNum",value:function(m){var _=parseFloat(typeof m=="string"?this.obj[m]:this.arr[m]);if(_.toString()==="NaN")throw"Error: ".concat(this.obj[m]," is NaN (Not a Number)");return _}},{key:"getString",value:function(m){return(typeof m=="string"?this.obj:this.arr)[m].toString()}}])&&o(i.prototype,f),c}(),t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.from-entries":177,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.split":198,"core-js/modules/web.dom-collections.iterator":238}],304:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(f,m){for(var _=0;_<m.length;_++){var u=m[_];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}function i(f){for(var m=[],_=0;_<f.length;_++)m.push(new o.default.XML(f[_]));return m}o.default.XML=function(){function f(u){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");u?this.DOM=u:(u=document.implementation.createDocument(null,"doc"),this.DOM=u.createElement("root"))}var m,_;return m=f,(_=[{key:"getParent",value:function(){return new o.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(u){var p=this.DOM.innerHTML,g=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(u);y.innerHTML=p;for(var S=0;S<g.length;S++)y.setAttribute(g[S].nodeName,g.nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var u=[],p=0;p<this.DOM.childNodes.length;p++)u.push(this.DOM.childNodes[p].nodeName);return u}},{key:"getChildren",value:function(u){return i(u?this.DOM.getElementsByTagName(u):this.DOM.children)}},{key:"getChild",value:function(u){if(typeof u!="string")return new o.default.XML(this.DOM.children[u]);var p=!0,g=!1,y=void 0;try{for(var S,b=this.DOM.children[Symbol.iterator]();!(p=(S=b.next()).done);p=!0){var E=S.value;if(E.tagName===u)return new o.default.XML(E)}}catch(x){g=!0,y=x}finally{try{p||b.return==null||b.return()}finally{if(g)throw y}}}},{key:"addChild",value:function(u){u instanceof o.default.XML&&this.DOM.appendChild(u.DOM)}},{key:"removeChild",value:function(u){var p=-1;if(typeof u=="string"){for(var g=0;g<this.DOM.children.length;g++)if(this.DOM.children[g].tagName===u){p=g;break}}else p=u;p!==-1&&this.DOM.removeChild(this.DOM.children[p])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var u=[],p=!0,g=!1,y=void 0;try{for(var S,b=this.DOM.attributes[Symbol.iterator]();!(p=(S=b.next()).done);p=!0){var E=S.value;u.push(E.nodeName)}}catch(x){g=!0,y=x}finally{try{p||b.return==null||b.return()}finally{if(g)throw y}}return u}},{key:"hasAttribute",value:function(u){var p={},g=!0,y=!1,S=void 0;try{for(var b,E=this.DOM.attributes[Symbol.iterator]();!(g=(b=E.next()).done);g=!0){var x=b.value;p[x.nodeName]=x.nodeValue}}catch(k){y=!0,S=k}finally{try{g||E.return==null||E.return()}finally{if(y)throw S}}return!!p[u]}},{key:"getNum",value:function(u,p){var g={},y=!0,S=!1,b=void 0;try{for(var E,x=this.DOM.attributes[Symbol.iterator]();!(y=(E=x.next()).done);y=!0){var k=E.value;g[k.nodeName]=k.nodeValue}}catch(T){S=!0,b=T}finally{try{y||x.return==null||x.return()}finally{if(S)throw b}}return Number(g[u])||p||0}},{key:"getString",value:function(u,p){var g={},y=!0,S=!1,b=void 0;try{for(var E,x=this.DOM.attributes[Symbol.iterator]();!(y=(E=x.next()).done);y=!0){var k=E.value;g[k.nodeName]=k.nodeValue}}catch(T){S=!0,b=T}finally{try{y||x.return==null||x.return()}finally{if(S)throw b}}return g[u]?String(g[u]):p||null}},{key:"setAttribute",value:function(u,p){this.DOM.setAttribute(u,p)}},{key:"getContent",value:function(u){var p=this.DOM.textContent;return(p=p.replace(/\s\s+/g,","))||u||null}},{key:"setContent",value:function(u){this.DOM.children.length||(this.DOM.textContent=u)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&c(m.prototype,_),f}(),t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],305:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(c,i,f){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(c,f),i)},o.default.prototype.dist=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("dist",i),i.length===4?Math.hypot(i[2]-i[0],i[3]-i[1]):i.length===6?Math.hypot(i[3]-i[0],i[4]-i[1],i[5]-i[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(c,i,f){return o.default._validateParameters("lerp",arguments),f*(i-c)+c},o.default.prototype.log=Math.log,o.default.prototype.mag=function(c,i){return o.default._validateParameters("mag",arguments),Math.hypot(c,i)},o.default.prototype.map=function(c,i,f,m,_,u){return o.default._validateParameters("map",arguments),c=(c-i)/(f-i)*(_-m)+m,u?m<_?this.constrain(c,m,_):this.constrain(c,_,m):c},o.default.prototype.max=function(){for(var c=function(_){var u=-1/0,p=!0,g=!1,y=void 0;try{for(var S,b=_[Symbol.iterator]();!(p=(S=b.next()).done);p=!0)var E=S.value,u=u<E?E:u}catch(x){g=!0,y=x}finally{try{p||b.return==null||b.return()}finally{if(g)throw y}}return u},i=arguments.length,f=new Array(i),m=0;m<i;m++)f[m]=arguments[m];return f[0]instanceof Array?c(f[0]):c(f)},o.default.prototype.min=function(){for(var c=function(_){var u=1/0,p=!0,g=!1,y=void 0;try{for(var S,b=_[Symbol.iterator]();!(p=(S=b.next()).done);p=!0)var E=S.value,u=E<u?E:u}catch(x){g=!0,y=x}finally{try{p||b.return==null||b.return()}finally{if(g)throw y}}return u},i=arguments.length,f=new Array(i),m=0;m<i;m++)f[m]=arguments[m];return f[0]instanceof Array?c(f[0]):c(f)},o.default.prototype.norm=function(c,i,f){return o.default._validateParameters("norm",arguments),this.map(c,i,f,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(c,i){return i?(i=Math.pow(10,i),Math.round(c*i)/i):Math.round(c)},o.default.prototype.sq=function(c){return c*c},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(m){o.default._validateParameters("fract",arguments);var i,f=0,m=Number(m);return isNaN(m)||Math.abs(m)===1/0?m:(m<0&&(m=-m,f=1),String(m).includes(".")&&!String(m).includes("e")?(i=String(m),i=+("0"+i.slice(i.indexOf("."))),Math.abs(f-i)):m<1?Math.abs(f-m):0)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],306:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(f,m,_){return(c=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(u,p,g){var y=[null];return y.push.apply(y,p),p=new(Function.bind.apply(u,y)),g&&i(p,g.prototype),p}).apply(null,arguments)}function i(f,m){return(i=Object.setPrototypeOf||function(_,u){return _.__proto__=u,_})(f,m)}o.default.prototype.createVector=function(f,m,_){return this instanceof o.default?c(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(f,m,_)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188}],307:[function(_,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,_=(_=_("../core/main"))&&_.__esModule?_:{default:_};function o(u){return .5*(1-Math.cos(u*Math.PI))}var c,i=4095,f=4,m=.5,_=(_.default.prototype.noise=function(u){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var y=0;y<4096;y++)c[y]=Math.random()}u<0&&(u=-u),p<0&&(p=-p),g<0&&(g=-g);for(var S,b,E=Math.floor(u),x=Math.floor(p),k=Math.floor(g),T=u-E,j=p-x,A=g-k,C=0,I=.5,F=0;F<f;F++){var N=E+(x<<4)+(k<<8),z=o(T),R=o(j),q=c[N&i];q+=z*(c[N+1&i]-q),S=c[N+16&i],q+=R*((S+=z*(c[N+16+1&i]-S))-q),S=c[(N+=256)&i],S+=z*(c[N+1&i]-S),b=c[N+16&i],S+=R*((b+=z*(c[N+16+1&i]-b))-S),C+=(q+=o(A)*(S-q))*I,I*=m,E<<=1,x<<=1,k<<=1,1<=(T*=2)&&(E++,T--),1<=(j*=2)&&(x++,j--),1<=(A*=2)&&(k++,A--)}return C},_.default.prototype.noiseDetail=function(u,p){0<u&&(f=u),0<p&&(m=p)},_.default.prototype.noiseSeed=function(u){y=4294967296;var p,g,y,S={setSeed:function(E){g=p=(E??Math.random()*y)>>>0},getSeed:function(){return p},rand:function(){return(g=(1664525*g+1013904223)%y)/y}};S.setSeed(u),c=new Array(4096);for(var b=0;b<4096;b++)c[b]=S.rand()},_.default);l.default=_},{"../core/main":275}],308:[function(t,a,l){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}function c(y){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(S){return o(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":o(S)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(g=t("../core/main"))&&g.__esModule?g:{default:g},f=function(y){if(y&&y.__esModule)return y;if(y===null||c(y)!=="object"&&typeof y!="function")return{default:y};var S=m();if(S&&S.has(y))return S.get(y);var b,E={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in y){var k;Object.prototype.hasOwnProperty.call(y,b)&&((k=x?Object.getOwnPropertyDescriptor(y,b):null)&&(k.get||k.set)?Object.defineProperty(E,b,k):E[b]=y[b])}return E.default=y,S&&S.set(y,E),E}(t("../core/constants"));function m(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,m=function(){return y},y)}function _(y,S){for(var b=0;b<S.length;b++){var E=S[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}function u(y,S){return y!==0&&(this.x=this.x%y),S!==0&&(this.y=this.y%S),this}function p(y,S,b){return y!==0&&(this.x=this.x%y),S!==0&&(this.y=this.y%S),b!==0&&(this.z=this.z%b),this}i.default.Vector=function(){function y(){var j=this,x=y;if(!(j instanceof x))throw new TypeError("Cannot call a class as a function");var k,T,j=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],k=(arguments.length<=2?void 0:arguments[2])||0,T=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(k=(arguments.length<=0?void 0:arguments[0])||0,T=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=k,this.y=T,this.z=j}var S,b,E;return S=y,E=[{key:"fromAngle",value:function(x,k){return new i.default.Vector((k=k===void 0?1:k)*Math.cos(x),k*Math.sin(x),0)}},{key:"fromAngles",value:function(I,A,T){T===void 0&&(T=1);var j=Math.cos(A),A=Math.sin(A),C=Math.cos(I),I=Math.sin(I);return new i.default.Vector(T*I*A,-T*C,T*I*j)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*f.TWO_PI)}},{key:"random3D",value:function(){var x=Math.random()*f.TWO_PI,k=2*Math.random()-1,j=Math.sqrt(1-k*k),T=j*Math.cos(x),j=j*Math.sin(x);return new i.default.Vector(T,j,k)}},{key:"copy",value:function(x){return x.copy(x)}},{key:"add",value:function(x,k,T){return T?T.set(x):(T=x.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),T.add(k),T}},{key:"rem",value:function(x,k){if(x instanceof i.default.Vector&&k instanceof i.default.Vector)return(x=x.copy()).rem(k),x}},{key:"sub",value:function(x,k,T){return T?T.set(x):(T=x.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),T.sub(k),T}},{key:"mult",value:function(x,k,T){return T?T.set(x):(T=x.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),T.mult(k),T}},{key:"rotate",value:function(x,k,T){return arguments.length===2?T=x.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),T.set(x)),T.rotate(k),T}},{key:"div",value:function(x,k,T){return T?T.set(x):(T=x.copy(),arguments.length===3&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),T.div(k),T}},{key:"dot",value:function(x,k){return x.dot(k)}},{key:"cross",value:function(x,k){return x.cross(k)}},{key:"dist",value:function(x,k){return x.dist(k)}},{key:"lerp",value:function(x,k,T,j){return j?j.set(x):(j=x.copy(),arguments.length===4&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),j.lerp(k,T),j}},{key:"slerp",value:function(x,k,T,j){return j?j.set(x):(j=x.copy(),arguments.length===4&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),j.slerp(k,T),j}},{key:"mag",value:function(x){return x.mag()}},{key:"magSq",value:function(x){return x.magSq()}},{key:"normalize",value:function(x,k){return arguments.length<2?k=x.copy():(k instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),k.set(x)),k.normalize()}},{key:"limit",value:function(x,k,T){return arguments.length<3?T=x.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),T.set(x)),T.limit(k)}},{key:"setMag",value:function(x,k,T){return arguments.length<3?T=x.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),T.set(x)),T.setMag(k)}},{key:"heading",value:function(x){return x.heading()}},{key:"angleBetween",value:function(x,k){return x.angleBetween(k)}},{key:"reflect",value:function(x,k,T){return arguments.length<3?T=x.copy():(T instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),T.set(x)),T.reflect(k)}},{key:"array",value:function(x){return x.array()}},{key:"equals",value:function(x,k){var T;return x instanceof i.default.Vector?T=x:x instanceof Array?T=new i.default.Vector().set(x):i.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),T.equals(k)}}],(b=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(x,k,T){return x instanceof i.default.Vector?(this.x=x.x||0,this.y=x.y||0,this.z=x.z||0):Array.isArray(x)?(this.x=x[0]||0,this.y=x[1]||0,this.z=x[2]||0):(this.x=x||0,this.y=k||0,this.z=T||0),this}},{key:"copy",value:function(){return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new i.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(x,k,T){return x instanceof i.default.Vector?(this.x+=x.x||0,this.y+=x.y||0,this.z+=x.z||0):Array.isArray(x)?(this.x+=x[0]||0,this.y+=x[1]||0,this.z+=x[2]||0):(this.x+=x||0,this.y+=k||0,this.z+=T||0),this}},{key:"rem",value:function(x,k,T){var j;if(x instanceof i.default.Vector){if([x.x,x.y,x.z].every(Number.isFinite))return A=parseFloat(x.x),C=parseFloat(x.y),j=parseFloat(x.z),p.call(this,A,C,j)}else if(Array.isArray(x)){if(x.every(function(I){return Number.isFinite(I)}))return x.length===2?u.call(this,x[0],x[1]):x.length===3?p.call(this,x[0],x[1],x[2]):void 0}else if(arguments.length===1){if(Number.isFinite(x)&&x!==0)return this.x=this.x%x,this.y=this.y%x,this.z=this.z%x,this}else if(arguments.length===2){var A=Array.prototype.slice.call(arguments);if(A.every(function(I){return Number.isFinite(I)})&&A.length===2)return u.call(this,A[0],A[1])}else if(arguments.length===3){var C=Array.prototype.slice.call(arguments);if(C.every(function(I){return Number.isFinite(I)})&&C.length===3)return p.call(this,C[0],C[1],C[2])}}},{key:"sub",value:function(x,k,T){return x instanceof i.default.Vector?(this.x-=x.x||0,this.y-=x.y||0,this.z-=x.z||0):Array.isArray(x)?(this.x-=x[0]||0,this.y-=x[1]||0,this.z-=x[2]||0):(this.x-=x||0,this.y-=k||0,this.z-=T||0),this}},{key:"mult",value:function(x,k,T){var j;return x instanceof i.default.Vector?Number.isFinite(x.x)&&Number.isFinite(x.y)&&Number.isFinite(x.z)&&typeof x.x=="number"&&typeof x.y=="number"&&typeof x.z=="number"?(this.x*=x.x,this.y*=x.y,this.z*=x.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(x)?x.every(function(A){return Number.isFinite(A)})&&x.every(function(A){return typeof A=="number"})?x.length===1?(this.x*=x[0],this.y*=x[0],this.z*=x[0]):x.length===2?(this.x*=x[0],this.y*=x[1]):x.length===3&&(this.x*=x[0],this.y*=x[1],this.z*=x[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(j=Array.prototype.slice.call(arguments)).every(function(A){return Number.isFinite(A)})&&j.every(function(A){return typeof A=="number"})?(arguments.length===1&&(this.x*=x,this.y*=x,this.z*=x),arguments.length===2&&(this.x*=x,this.y*=k),arguments.length===3&&(this.x*=x,this.y*=k,this.z*=T)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(x,k,T){if(x instanceof i.default.Vector)if(Number.isFinite(x.x)&&Number.isFinite(x.y)&&Number.isFinite(x.z)&&typeof x.x=="number"&&typeof x.y=="number"&&typeof x.z=="number"){var j=x.z===0&&this.z===0;if(x.x===0||x.y===0||!j&&x.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=x.x,this.y/=x.y,j||(this.z/=x.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(x))if(x.every(function(A){return Number.isFinite(A)})&&x.every(function(A){return typeof A=="number"})){if(x.some(function(A){return A===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1?(this.x/=x[0],this.y/=x[0],this.z/=x[0]):x.length===2?(this.x/=x[0],this.y/=x[1]):x.length===3&&(this.x/=x[0],this.y/=x[1],this.z/=x[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(j=Array.prototype.slice.call(arguments),j.every(function(A){return Number.isFinite(A)})&&j.every(function(A){return typeof A=="number"})){if(j.some(function(A){return A===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=x,this.y/=x,this.z/=x),arguments.length===2&&(this.x/=x,this.y/=k),arguments.length===3&&(this.x/=x,this.y/=k,this.z/=T)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var x=this.x,k=this.y,T=this.z;return x*x+k*k+T*T}},{key:"dot",value:function(x,k,T){return x instanceof i.default.Vector?this.dot(x.x,x.y,x.z):this.x*(x||0)+this.y*(k||0)+this.z*(T||0)}},{key:"cross",value:function(j){var k=this.y*j.z-this.z*j.y,T=this.z*j.x-this.x*j.z,j=this.x*j.y-this.y*j.x;return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,k,T,j):new i.default.Vector(k,T,j)}},{key:"dist",value:function(x){return x.copy().sub(this).mag()}},{key:"normalize",value:function(){var x=this.mag();return x!==0&&this.mult(1/x),this}},{key:"limit",value:function(x){var k=this.magSq();return x*x<k&&this.div(Math.sqrt(k)).mult(x),this}},{key:"setMag",value:function(x){return this.normalize().mult(x)}},{key:"heading",value:function(){var x=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(x):x}},{key:"setHeading",value:function(x){this.isPInst&&(x=this._toRadians(x));var k=this.mag();return this.x=k*Math.cos(x),this.y=k*Math.sin(x),this}},{key:"rotate",value:function(k){var k=this.heading()+k,T=(this.isPInst&&(k=this._toRadians(k)),this.mag());return this.x=Math.cos(k)*T,this.y=Math.sin(k)*T,this}},{key:"angleBetween",value:function(x){var k;return this.magSq()*x.magSq()==0?NaN:(k=this.cross(x),x=Math.atan2(k.mag(),this.dot(x))*Math.sign(k.z||1),this.isPInst?this._fromRadians(x):x)}},{key:"lerp",value:function(x,k,T,j){return x instanceof i.default.Vector?this.lerp(x.x,x.y,x.z,k):(this.x+=(x-this.x)*j||0,this.y+=(k-this.y)*j||0,this.z+=(T-this.z)*j||0,this)}},{key:"slerp",value:function(x,k){if(k!==0){if(k===1)return this.set(x);var T=this.mag(),j=x.mag();if(T*j==0)this.mult(1-k).add(x.x*k,x.y*k,x.z*k);else{var A=this.cross(x),C=A.mag(),I=Math.atan2(C,this.dot(x));if(0<C)A.x/=C,A.y/=C,A.z/=C;else{if(I<.5*Math.PI)return this.mult(1-k).add(x.x*k,x.y*k,x.z*k),this;this.z===0&&x.z===0?A.set(0,0,1):this.x!==0?A.set(this.y,-this.x,0).normalize():A.set(1,0,0)}C=A.cross(this),x=1-k+k*j/T,A=x*Math.cos(k*I),j=x*Math.sin(k*I),this.x=this.x*A+C.x*j,this.y=this.y*A+C.y*j,this.z=this.z*A+C.z*j}}return this}},{key:"reflect",value:function(x){return x.normalize(),this.sub(x.mult(2*this.dot(x)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(C,k,T){var j,A,C=C instanceof i.default.Vector?(j=C.x||0,A=C.y||0,C.z||0):Array.isArray(C)?(j=C[0]||0,A=C[1]||0,C[2]||0):(j=C||0,A=k||0,T||0);return this.x===j&&this.y===A&&this.z===C}}])&&_(S.prototype,b),E&&_(S,E),y}();var g=i.default.Vector;l.default=g},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.constructor":173,"core-js/modules/es.number.is-finite":174,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],309:[function(m,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(m=m("../core/main"))&&m.__esModule?m:{default:m},c="_lcg_random_state",i=4294967296,f=0,m=(o.default.prototype._lcg=function(_){return this[_]=(1664525*this[_]+1013904223)%i,this[_]/i},o.default.prototype._lcgSetSeed=function(_,u){this[_]=(u??Math.random()*i)>>>0},o.default.prototype.randomSeed=function(_){this._lcgSetSeed(c,_),this._gaussian_previous=!1},o.default.prototype.random=function(_,u){var p,g;return o.default._validateParameters("random",arguments),p=this[c]!=null?this._lcg(c):Math.random(),_===void 0?p:u===void 0?_ instanceof Array?_[Math.floor(p*_.length)]:p*_:(u<_&&(g=_,_=u,u=g),p*(u-_)+_)},o.default.prototype.randomGaussian=function(_){var u,p,g,y,S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)u=f,this._gaussian_previous=!1;else{for(;1<=(y=(p=this.random(2)-1)*p+(g=this.random(2)-1)*g););u=p*(y=Math.sqrt(-2*Math.log(y)/y)),f=g*y,this._gaussian_previous=!0}return u*S+(_||0)},o.default);l.default=m},{"../core/main":275}],310:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var p=m();if(p&&p.has(u))return p.get(u);var g,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var b;Object.prototype.hasOwnProperty.call(u,g)&&((b=S?Object.getOwnPropertyDescriptor(u,g):null)&&(b.get||b.set)?Object.defineProperty(y,g,b):y[g]=u[g])}return y.default=u,p&&p.set(u,y),y}(t("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}i.default.prototype._angleMode=f.RADIANS,i.default.prototype.acos=function(u){return this._fromRadians(Math.acos(u))},i.default.prototype.asin=function(u){return this._fromRadians(Math.asin(u))},i.default.prototype.atan=function(u){return this._fromRadians(Math.atan(u))},i.default.prototype.atan2=function(u,p){return this._fromRadians(Math.atan2(u,p))},i.default.prototype.cos=function(u){return Math.cos(this._toRadians(u))},i.default.prototype.sin=function(u){return Math.sin(this._toRadians(u))},i.default.prototype.tan=function(u){return Math.tan(this._toRadians(u))},i.default.prototype.degrees=function(u){return u*f.RAD_TO_DEG},i.default.prototype.radians=function(u){return u*f.DEG_TO_RAD},i.default.prototype.angleMode=function(u){if(i.default._validateParameters("angleMode",arguments),u===void 0)return this._angleMode;u!==f.DEGREES&&u!==f.RADIANS||(this._angleMode=u)},i.default.prototype._toRadians=function(u){return this._angleMode===f.DEGREES?u*f.DEG_TO_RAD:u},i.default.prototype._toDegrees=function(u){return this._angleMode===f.RADIANS?u*f.RAD_TO_DEG:u},i.default.prototype._fromRadians=function(u){return this._angleMode===f.DEGREES?u*f.RAD_TO_DEG:u};var _=i.default;l.default=_},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],311:[function(t,a,l){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.textAlign=function(c,i){var f;return o.default._validateParameters("textAlign",arguments),(f=this._renderer).textAlign.apply(f,arguments)},o.default.prototype.textLeading=function(c){var i;return o.default._validateParameters("textLeading",arguments),(i=this._renderer).textLeading.apply(i,arguments)},o.default.prototype.textSize=function(c){var i;return o.default._validateParameters("textSize",arguments),(i=this._renderer).textSize.apply(i,arguments)},o.default.prototype.textStyle=function(c){var i;return o.default._validateParameters("textStyle",arguments),(i=this._renderer).textStyle.apply(i,arguments)},o.default.prototype.textWidth=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];if(i[0]+="",o.default._validateParameters("textWidth",i),i[0].length===0)return 0;for(var m=i[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),_=[],u=0;u<m.length;u++)_.push(this._renderer.textWidth(m[u]));return Math.max.apply(Math,_)},o.default.prototype.textAscent=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("textAscent",i),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("textDescent",i),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(c){if(c!=="WORD"&&c!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(c)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198}],312:[function(t,a,l){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function c(g){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(p=t("../core/main"))&&p.__esModule?p:{default:p},f=u(t("../core/constants")),m=u(t("opentype.js"));function _(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,_=function(){return g},g)}function u(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var y=_();if(y&&y.has(g))return y.get(g);var S,b,E={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&((b=x?Object.getOwnPropertyDescriptor(g,S):null)&&(b.get||b.set)?Object.defineProperty(E,S,b):E[S]=g[S]);return E.default=g,y&&y.set(g,E),E}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(g,y,S){i.default._validateParameters("loadFont",arguments);var b=new i.default.Font(this),E=this;return m.load(g,function(T,j){if(T)return i.default._friendlyFileLoadError(4,g),S!==void 0?S(T):void console.error(T,g);b.font=j,y!==void 0&&y(b),E._decrementPreload();var T=g.split("\\").pop().split("/").pop(),j=T.lastIndexOf("."),A=j<1?null:T.slice(j+1);["ttf","otf","woff","woff2"].includes(A)&&(A=T.slice(0,j!==-1?j:0),(T=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(A,`;
src: url(`).concat(g,`);
}
`))),document.head.appendChild(T))}),b},i.default.prototype.text=function(g,y,S,b,E){var x;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(x=this._renderer).text.apply(x,arguments):this},i.default.prototype.textFont=function(g,y){if(i.default._validateParameters("textFont",arguments),arguments.length){if(g)return this._renderer._setProperty("_textFont",g),y&&(this._renderer._setProperty("_textSize",y),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",y*f._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var p=i.default;l.default=p},{"../core/constants":264,"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.last-index-of":163,"core-js/modules/es.array.slice":165,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,"opentype.js":249}],313:[function(t,a,l){function o(C){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(C)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(c=t("../core/main"))&&c.__esModule?c:{default:c},i=function(C){if(C&&C.__esModule)return C;if(C===null||m(C)!=="object"&&typeof C!="function")return{default:C};var I=f();if(I&&I.has(C))return I.get(C);var F,N={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(F in C){var R;Object.prototype.hasOwnProperty.call(C,F)&&((R=z?Object.getOwnPropertyDescriptor(C,F):null)&&(R.get||R.set)?Object.defineProperty(N,F,R):N[F]=C[F])}return N.default=C,I&&I.set(C,N),N}(t("../core/constants"));function f(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,f=function(){return C},C)}function m(C){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(I){return o(I)}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":o(I)})(C)}function _(C,I){for(var F=0;F<I.length;F++){var N=I[F];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(C,N.key,N)}}function u(C,I){var F=C.length;return C[I<0?I%F+F:I%F]}function p(C,I,F,N){var z,R,q;return N?(p.tmpPoint1===void 0&&(p.tmpPoint1=[],p.tmpPoint2=[]),R=p.tmpPoint1,q=p.tmpPoint2,R.x=I.x-C.x,R.y=I.y-C.y,q.x=F.x-I.x,q.y=F.y-I.y,z=R.x*q.x+R.y*q.y,R=Math.sqrt(R.x*R.x+R.y*R.y),q=Math.sqrt(q.x*q.x+q.y*q.y),Math.acos(z/(R*q))<N):(I[0]-C[0])*(F[1]-C[1])-(F[0]-C[0])*(I[1]-C[1])==0}function g(L,J,H,ne,se,R,q,M,D){var X=1-D,G=Math.pow(X,3),K=Math.pow(X,2),V=D*D,Z=V*D,O=G*L+3*K*D*H+3*X*D*D*se+Z*q,G=G*J+3*K*D*ne+3*X*D*D*R+Z*M,K=L+2*D*(H-L)+V*(se-2*H+L),Z=J+2*D*(ne-J)+V*(R-2*ne+J),U=H+2*D*(se-H)+V*(q-2*se+H),V=ne+2*D*(R-ne)+V*(M-2*R+ne),L=X*L+D*H,H=X*J+D*ne,J=X*se+D*q,ne=X*R+D*M,se=90-180*Math.atan2(K-U,Z-V)/Math.PI;return(U<K||Z<V)&&(se+=180),{x:O,y:G,m:{x:K,y:Z},n:{x:U,y:V},start:{x:L,y:H},end:{x:J,y:ne},alpha:se}}function y(C,I,F,N,z,R,q,M,D){return D==null?j(C,I,F,N,z,R,q,M):g(C,I,F,N,z,R,q,M,function(X,O,G,K,Z,U,V,L,H){if(!(H<0||j(X,O,G,K,Z,U,V,L)<H)){var J,ne=.5,se=1-ne;for(J=j(X,O,G,K,Z,U,V,L,se);.01<Math.abs(J-H);)J=j(X,O,G,K,Z,U,V,L,se+=(J<H?1:-1)*(ne/=2));return se}}(C,I,F,N,z,R,q,M,D))}function S(C,I,F){for(var N,z,R,q,M,D=0,X=0,O=(C=function(G,K){function Z(Y,te,re){var be,ve;if(!Y)return["C",te.x,te.y,te.x,te.y,te.x,te.y];switch(Y[0]in{T:1,Q:1}||(te.qx=te.qy=null),Y[0]){case"M":te.X=Y[1],te.Y=Y[2];break;case"A":Y=["C"].concat(E.apply(0,[te.x,te.y].concat(Y.slice(1))));break;case"S":ve=re==="C"||re==="S"?(be=2*te.x-te.bx,2*te.y-te.by):(be=te.x,te.y),Y=["C",be,ve].concat(Y.slice(1));break;case"T":re==="Q"||re==="T"?(te.qx=2*te.x-te.qx,te.qy=2*te.y-te.qy):(te.qx=te.x,te.qy=te.y),Y=["C"].concat(T(te.x,te.y,te.qx,te.qy,Y[1],Y[2]));break;case"Q":te.qx=Y[1],te.qy=Y[2],Y=["C"].concat(T(te.x,te.y,Y[1],Y[2],Y[3],Y[4]));break;case"L":Y=["C"].concat(k(te.x,te.y,Y[1],Y[2]));break;case"H":Y=["C"].concat(k(te.x,te.y,Y[1],te.y));break;case"V":Y=["C"].concat(k(te.x,te.y,te.x,Y[1]));break;case"Z":Y=["C"].concat(k(te.x,te.y,te.X,te.Y))}return Y}function U(Y,te){if(7<Y[te].length){Y[te].shift();for(var re=Y[te];re.length;)fe[te]="A",J&&(xe[te]="A"),Y.splice(te++,0,["C"].concat(re.splice(0,6)));Y.splice(te,1),L=Math.max(H.length,J&&J.length||0)}}function V(Y,te,re,be,ve){Y&&te&&Y[ve][0]==="M"&&te[ve][0]!=="M"&&(te.splice(ve,0,["M",be.x,be.y]),re.bx=0,re.by=0,re.x=Y[ve][1],re.y=Y[ve][2],L=Math.max(H.length,J&&J.length||0))}var L,H=b(G),J=K&&b(K),ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},se={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},fe=[],xe=[],he="",_e="";L=Math.max(H.length,J&&J.length||0);for(var ye=0;ye<L;ye++){(he=H[ye]?H[ye][0]:he)!=="C"&&(fe[ye]=he,ye&&(_e=fe[ye-1])),H[ye]=Z(H[ye],ne,_e),fe[ye]!=="A"&&he==="C"&&(fe[ye]="C"),U(H,ye),J&&((he=J[ye]?J[ye][0]:he)!=="C"&&(xe[ye]=he,ye&&(_e=xe[ye-1])),J[ye]=Z(J[ye],se,_e),xe[ye]!=="A"&&he==="C"&&(xe[ye]="C"),U(J,ye)),V(H,J,ne,se,ye),V(J,H,se,ne,ye);var ue=H[ye],pe=J&&J[ye],ke=ue.length,Ie=J&&pe.length;ne.x=ue[ke-2],ne.y=ue[ke-1],ne.bx=parseFloat(ue[ke-4])||ne.x,ne.by=parseFloat(ue[ke-3])||ne.y,se.bx=J&&(parseFloat(pe[Ie-4])||se.x),se.by=J&&(parseFloat(pe[Ie-3])||se.y),se.x=J&&pe[Ie-2],se.y=J&&pe[Ie-1]}return J?[H,J]:H}(C)).length;X<O;X++){if((R=C[X])[0]==="M")N=+R[1],z=+R[2];else{if(I<D+(q=y(N,z,R[1],R[2],R[3],R[4],R[5],R[6]))&&!F)return{x:(M=y(N,z,R[1],R[2],R[3],R[4],R[5],R[6],I-D)).x,y:M.y,alpha:M.alpha};D+=q,N=+R[5],z=+R[6]}R.shift()}return M=(M=F?D:g(N,z,R[0],R[1],R[2],R[3],R[4],R[5],1)).alpha?{x:M.x,y:M.y,alpha:M.alpha}:M}function b(C){var I=[],F=0,N=0,z=0,R=0,q=0;if(C){C[0][0]==="M"&&(z=F=+C[0][1],R=N=+C[0][2],q++,I[0]=["M",F,N]);for(var M,D,X=C.length===3&&C[0][0]==="M"&&C[1][0].toUpperCase()==="R"&&C[2][0].toUpperCase()==="Z",O=q,G=C.length;O<G;O++){if(I.push(M=[]),(D=C[O])[0]!==String.prototype.toUpperCase.call(D[0]))switch(M[0]=String.prototype.toUpperCase.call(D[0]),M[0]){case"A":M[1]=D[1],M[2]=D[2],M[3]=D[3],M[4]=D[4],M[5]=D[5],M[6]=+(D[6]+F),M[7]=+(D[7]+N);break;case"V":M[1]=+D[1]+N;break;case"H":M[1]=+D[1]+F;break;case"R":for(var K,Z=2,U=(K=[F,N].concat(D.slice(1))).length;Z<U;Z++)K[Z]=+K[Z]+F,K[++Z]=+K[Z]+N;I.pop(),I=I.concat(x(K,X));break;case"M":z=+D[1]+F,R=+D[2]+N;break;default:for(var V=1,L=D.length;V<L;V++)M[V]=+D[V]+(V%2?F:N)}else if(D[0]==="R")K=[F,N].concat(D.slice(1)),I.pop(),I=I.concat(x(K,X)),M=["R"].concat(D.slice(-2));else for(var H=0,J=D.length;H<J;H++)M[H]=D[H];switch(M[0]){case"Z":F=z,N=R;break;case"H":F=M[1];break;case"V":N=M[1];break;case"M":z=M[M.length-2],R=M[M.length-1];break;default:F=M[M.length-2],N=M[M.length-1]}}}return I}function E(C,I,F,N,J,fe,ne,M,D,X){function O(Ie,Y,te){return{x:Ie*Math.cos(te)-Y*Math.sin(te),y:Ie*Math.sin(te)+Y*Math.cos(te)}}var G,L=Math.PI,H=120*L/180,K=L/180*(+J||0),Z=[],U=(X?(ye=X[0],G=X[1],he=X[2],_e=X[3]):(C=(se=O(C,I,-K)).x,I=se.y,1<(U=(V=(C-(M=(se=O(M,D,-K)).x))/2)*V/(F*F)+(se=(I-(D=se.y))/2)*se/(N*N))&&(F*=U=Math.sqrt(U),N*=U),U=F*F,xe=N*N,he=(fe=(fe===ne?-1:1)*Math.sqrt(Math.abs((U*xe-U*se*se-xe*V*V)/(U*se*se+xe*V*V))))*F*se/N+(C+M)/2,_e=fe*-N*V/F+(I+D)/2,ye=Math.asin(((I-_e)/N).toFixed(9)),G=Math.asin(((D-_e)/N).toFixed(9)),(ye=C<he?L-ye:ye)<0&&(ye=2*L+ye),(G=M<he?L-G:G)<0&&(G=2*L+G),ne&&G<ye&&(ye-=2*L),!ne&&ye<G&&(G-=2*L)),G-ye),V=(Math.abs(U)>H&&(xe=G,se=M,fe=D,G=ye+H*(ne&&ye<G?1:-1),Z=E(M=he+F*Math.cos(G),D=_e+N*Math.sin(G),F,N,J,0,ne,se,fe,[G,xe,he,_e])),U=G-ye,Math.cos(ye)),L=Math.sin(ye),H=Math.cos(G),J=Math.sin(G),ne=Math.tan(U/4),se=4/3*F*ne,fe=4/3*N*ne,xe=[C,I],he=[C+se*L,I-fe*V],_e=[M+se*J,D-fe*H],ye=[M,D];if(he[0]=2*xe[0]-he[0],he[1]=2*xe[1]-he[1],X)return[he,_e,ye].concat(Z);for(var ue=[],pe=0,ke=(Z=[he,_e,ye].concat(Z).join().split(",")).length;pe<ke;pe++)ue[pe]=pe%2?O(Z[pe-1],Z[pe],K).y:O(Z[pe],Z[pe+1],K).x;return ue}function x(C,I){for(var F=[],N=0,z=C.length;N<z-2*!I;N+=2){var R=[{x:+C[N-2],y:+C[N-1]},{x:+C[N],y:+C[N+1]},{x:+C[N+2],y:+C[N+3]},{x:+C[N+4],y:+C[N+5]}];I?N?z-4===N?R[3]={x:+C[0],y:+C[1]}:z-2===N&&(R[2]={x:+C[0],y:+C[1]},R[3]={x:+C[2],y:+C[3]}):R[0]={x:+C[z-2],y:+C[z-1]}:z-4===N?R[3]=R[2]:N||(R[0]={x:+C[N],y:+C[N+1]}),F.push(["C",(-R[0].x+6*R[1].x+R[2].x)/6,(-R[0].y+6*R[1].y+R[2].y)/6,(R[1].x+6*R[2].x-R[3].x)/6,(R[1].y+6*R[2].y-R[3].y)/6,R[2].x,R[2].y])}return F}function k(C,I,F,N){return[C,I,F,N,F,N]}function T(C,I,F,N,z,R){return[1/3*C+2/3*F,1/3*I+2/3*N,1/3*z+2/3*F,1/3*R+2/3*N,z,R]}function j(C,I,F,N,z,R,q,M,D){for(var X=(D=1<(D=D??1)?1:D<0?0:D)/2,O=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],G=0,K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0;Z<12;Z++){var V=X*O[Z]+X,U=A(V,C,F,z,q),V=A(V,I,N,R,M);G+=K[Z]*Math.sqrt(U*U+V*V)}return X*G}function A(C,I,F,N,z){return C*(C*(-3*I+9*F-9*N+3*z)+6*I-12*F+6*N)-3*I+3*F}c.default.Font=function(){function C(N){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.parent=N,this.cache={},this.font=void 0}var I,F;return I=C,(F=[{key:"textBounds",value:function(N){var z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,X=3<arguments.length?arguments[3]:void 0,q=4<arguments.length?arguments[4]:void 0,M=q&&q.renderer&&q.renderer._pInst||this.parent,D=M._renderer.drawingContext,X=(D.textAlign||i.LEFT,D.textBaseline||i.BASELINE,X||M._renderer._textSize);if(!se){for(var O=[],G=[],K=[],Z=(K[0]=[],[]),U=this._scale(X),V=M._renderer.textLeading(),L=0,H=(this.font.forEachGlyph(N,z,R,X,q,function(he,_e,ye,ue){var pe=he.getMetrics();he.index===0||he.index===10?K[L+=1]=[]:(K[L].push(_e+pe.xMin*U),K[L].push(_e+pe.xMax*U),Z.push(ye+L*V+-pe.yMin*U),Z.push(ye+L*V+-pe.yMax*U))}),0<K[L].length&&(O[L]=Math.min.apply(null,K[L]),G[L]=Math.max.apply(null,K[L])),0),J=0;J<=L;J++){O[J]=Math.min.apply(null,K[J]),G[J]=Math.max.apply(null,K[J]);var ne=G[J]-O[J];H<ne&&(H=ne)}var D=Math.min.apply(null,O),se={x:D,y:R=Math.min.apply(null,Z),h:Math.max.apply(null,Z)-R,w:H,advance:D-z},X=this._handleAlignment(M._renderer,N,se.x,se.y,se.w+se.advance);se.x=X.x,se.y=X.y}return se}},{key:"textToPoints",value:function(N,z,R,q,M){var D=z,X=[],O=N.split(/\r?\n|\r|\n/g);q=q||this.parent._renderer._textSize;for(var G,K,Z,U=0;U<O.length;U++){var V=0;z=D;for(var L=(L=O[U]).replace("	","  "),H=this._getGlyphs(L),J=0;J<H.length;J++){if(K=L,!((Z=H)[G=J].name&&Z[G].name==="space"||K.length===Z.length&&K[G]===" "))for(var ne=function(he){for(var _e,ye=[],ue=0;ue<he.length;ue++)he[ue].type==="M"&&(_e&&ye.push(_e),_e=[]),_e.push(function(pe){var ke=[pe.type];return pe.type==="M"||pe.type==="L"?ke.push(pe.x,pe.y):pe.type==="C"?ke.push(pe.x1,pe.y1,pe.x2,pe.y2,pe.x,pe.y):pe.type==="Q"&&ke.push(pe.x1,pe.y1,pe.x,pe.y),ke}(he[ue]));return ye.push(_e),ye}(H[J].getPath(z,R,q).commands),se=0;se<ne.length;se++)for(var fe=function(he,_e){for(var _e=function(Y,te){if(m(Y)!=="object")Y=te;else for(var re in te)Y[re]===void 0&&(Y[re]=te[re]);return Y}(_e,{sampleFactor:.1,simplifyThreshold:0}),ye=S(he,0,1),ue=ye/(ye*_e.sampleFactor),pe=[],ke=0;ke<ye;ke+=ue)pe.push(S(he,ke));return _e.simplifyThreshold&&function(Ie){for(var Y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,te=0,re=Ie.length-1;3<Ie.length&&0<=re;--re)p(u(Ie,re-1),u(Ie,re),u(Ie,re+1),Y)&&(Ie.splice(re%Ie.length,1),te++)}(pe,_e.simplifyThreshold),pe}(ne[se],M),xe=0;xe<fe.length;xe++)fe[xe].x+=V,X.push(fe[xe]);V+=H[J].advanceWidth*this._scale(q)}R+=this.parent._renderer._textLeading}return X}},{key:"_getGlyphs",value:function(N){return this.font.stringToGlyphs(N)}},{key:"_getPath",value:function(N,D,R,q){var M=(q&&q.renderer&&q.renderer._pInst||this.parent)._renderer,D=this._handleAlignment(M,N,D,R);return this.font.getPath(N,D.x,D.y,M._textSize,q)}},{key:"_getPathData",value:function(N,z,R,q){var M=3;return typeof N=="string"&&2<arguments.length?N=this._getPath(N,z,R,q):m(z)==="object"&&(q=z),q&&typeof q.decimals=="number"&&(M=q.decimals),N.toPathData(M)}},{key:"_getSVG",value:function(N,z,R,q){var M=3;return typeof N=="string"&&2<arguments.length?N=this._getPath(N,z,R,q):m(z)==="object"&&(q=z),q&&(typeof q.decimals=="number"&&(M=q.decimals),typeof q.strokeWidth=="number"&&(N.strokeWidth=q.strokeWidth),q.fill!==void 0&&(N.fill=q.fill),q.stroke!==void 0&&(N.stroke=q.stroke)),N.toSVG(M)}},{key:"_renderPath",value:function(X,G,K,q){var M=q&&q.renderer||this.parent._renderer,D=M.drawingContext,X=(m(X)==="object"&&X.commands?X:this._getPath(X,G,K,q)).commands,O=(D.beginPath(),!0),G=!1,K=void 0;try{for(var Z,U=X[Symbol.iterator]();!(O=(Z=U.next()).done);O=!0){var V=Z.value;V.type==="M"?D.moveTo(V.x,V.y):V.type==="L"?D.lineTo(V.x,V.y):V.type==="C"?D.bezierCurveTo(V.x1,V.y1,V.x2,V.y2,V.x,V.y):V.type==="Q"?D.quadraticCurveTo(V.x1,V.y1,V.x,V.y):V.type==="Z"&&D.closePath()}}catch(L){G=!0,K=L}finally{try{O||U.return==null||U.return()}finally{if(G)throw K}}return M._doStroke&&M._strokeSet&&!M._clipping&&D.stroke(),M._doFill&&!M._clipping&&(M._fillSet||M._setFill(i._DEFAULT_TEXT_FILL),D.fill()),this}},{key:"_textWidth",value:function(N,z){return this.font.getAdvanceWidth(N,z)}},{key:"_textAscent",value:function(N){return this.font.ascender*this._scale(N)}},{key:"_textDescent",value:function(N){return-this.font.descender*this._scale(N)}},{key:"_scale",value:function(N){return 1/this.font.unitsPerEm*(N||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(N,z,R,q,M){var D=N._textSize;switch(M===void 0&&(M=this._textWidth(z,D)),N._textAlign){case i.CENTER:R-=M/2;break;case i.RIGHT:R-=M}switch(N._textBaseline){case i.TOP:q+=this._textAscent(D);break;case i.CENTER:q+=this._textAscent(D)/2;break;case i.BOTTOM:q-=this._textDescent(D)}return{x:R,y:q}}}])&&_(I.prototype,F),C}(),t=c.default,l.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.function.name":168,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],314:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(o,c){return o.push(c),o},t.default.prototype.arrayCopy=function(o,c,i,f,m){var _,u;o=m!==void 0?(u=Math.min(m,o.length),_=f,o.slice(c,u+c)):(u=i!==void 0?(u=i,Math.min(u,o.length)):o.length,i=c,o.slice(_=0,u)),Array.prototype.splice.apply(i,[_,u].concat(o))},t.default.prototype.concat=function(o,c){return o.concat(c)},t.default.prototype.reverse=function(o){return o.reverse()},t.default.prototype.shorten=function(o){return o.pop(),o},t.default.prototype.shuffle=function(o,c){for(var i,f,m=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),_=(o=c||m?o:o.slice()).length;1<_;)i=this.random(0,1)*_|0,f=o[--_],o[_]=o[i],o[i]=f;return o},t.default.prototype.sort=function(o,f){var i=f?o.slice(0,Math.min(f,o.length)):o,f=f?o.slice(Math.min(f,o.length)):[];return(i=typeof i[0]=="string"?i.sort():i.sort(function(m,_){return m-_})).concat(f)},t.default.prototype.splice=function(o,c,i){return Array.prototype.splice.apply(o,[i,0].concat(c)),o},t.default.prototype.subset=function(o,c,i){return i!==void 0?o.slice(c,c+i):o.slice(c,o.length)},t=t.default,l.default=t},{"../core/main":275,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182}],315:[function(t,a,l){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},o.default.prototype.int=function(c){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,i):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(f){return o.default.prototype.int(f,i)}):void 0},o.default.prototype.str=function(c){return c instanceof Array?c.map(o.default.prototype.str):String(c)},o.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(c){return c=o.default.prototype.int(c,10),typeof c=="number"?(c+128)%256-128:c instanceof Array?c.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(o.default.prototype.char):typeof c=="string"?o.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},o.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(c,i){if(i=i??8,c instanceof Array)return c.map(function(m){return o.default.prototype.hex(m,i)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(i);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var f=Number(c).toString(16).toUpperCase();f.length<i;)f="0".concat(f);return f=f.length>=i?f.substring(f.length-i,f.length):f}},o.default.prototype.unhex=function(c){return c instanceof Array?c.map(o.default.prototype.unhex):parseInt("0x".concat(c),16)},t=o.default,l.default=t},{"../core/main":275,"core-js/modules/es.array.map":164,"core-js/modules/es.number.constructor":173,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.repeat":195}],316:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(u=t("../core/main"))&&u.__esModule?u:{default:u};function c(p,g){return function(y){if(Array.isArray(y))return y}(p)||function(y,S){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]"){var b=[],E=!0,x=!1,k=void 0;try{for(var T,j=y[Symbol.iterator]();!(E=(T=j.next()).done)&&(b.push(T.value),!S||b.length!==S);E=!0);}catch(A){x=!0,k=A}finally{try{E||j.return==null||j.return()}finally{if(x)throw k}}return b}}(p,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(p,g,y){var b=c(p.toString().split("."),2),S=b[0],b=b[1];return y===void 0?(S=S.padStart(g,"0"),b?S+"."+b:S):(S=(p=c(p.toFixed(y).toString().split("."),2))[0],b=p[1],S=S.padStart(g,"0"),b===void 0?S:S+"."+b)}function f(b,g){var y=(b=b.toString()).indexOf("."),S=y!==-1?b.substring(y):"",b=(b=y!==-1?b.substring(0,y):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(g===0)S="";else if(g!==void 0)if(g>S.length)for(var E=g-(S+=y===-1?".":"").length+1,x=0;x<E;x++)S+="0";else S=S.substring(0,g+1);return b+S}function m(p){return 0<parseFloat(p)?"+".concat(p.toString()):p.toString()}function _(p){return 0<=parseFloat(p)?" ".concat(p.toString()):p.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),o.default.prototype.join=function(p,g){return o.default._validateParameters("join",arguments),p.join(g)},o.default.prototype.match=function(p,g){return o.default._validateParameters("match",arguments),p.match(g)},o.default.prototype.matchAll=function(p,g){o.default._validateParameters("matchAll",arguments);for(var y=new RegExp(g,"g"),S=y.exec(p),b=[];S!==null;)b.push(S),S=y.exec(p);return b},o.default.prototype.nf=function(p,g,y){return o.default._validateParameters("nf",arguments),p instanceof Array?p.map(function(S){return i(S,g,y)}):Object.prototype.toString.call(p)==="[object Arguments]"?p.length===3?this.nf(p[0],p[1],p[2]):p.length===2?this.nf(p[0],p[1]):this.nf(p[0]):i(p,g,y)},o.default.prototype.nfc=function(p,g){return o.default._validateParameters("nfc",arguments),p instanceof Array?p.map(function(y){return f(y,g)}):f(p,g)},o.default.prototype.nfp=function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];o.default._validateParameters("nfp",g);var S=o.default.prototype.nf.apply(this,g);return S instanceof Array?S.map(m):m(S)},o.default.prototype.nfs=function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];o.default._validateParameters("nfs",g);var S=o.default.prototype.nf.apply(this,g);return S instanceof Array?S.map(_):_(S)},o.default.prototype.split=function(p,g){return o.default._validateParameters("split",arguments),p.split(g)},o.default.prototype.splitTokens=function(p,g){var y,S;return o.default._validateParameters("splitTokens",arguments),S=g!==void 0?(S=/\]/g.exec(g=g),(y=/\[/g.exec(g))&&S?(g=g.slice(0,S.index)+g.slice(S.index+1),y=/\[/g.exec(g),g=g.slice(0,y.index)+g.slice(y.index+1),new RegExp("[\\[".concat(g,"\\]]"),"g")):S?(g=g.slice(0,S.index)+g.slice(S.index+1),new RegExp("[".concat(g,"\\]]"),"g")):y?(g=g.slice(0,y.index)+g.slice(y.index+1),new RegExp("[".concat(g,"\\[]"),"g")):new RegExp("[".concat(g,"]"),"g")):/\s/g,p.split(S).filter(function(b){return b})},o.default.prototype.trim=function(p){return o.default._validateParameters("trim",arguments),p instanceof Array?p.map(this.trim):p.trim()};var u=o.default;l.default=u},{"../core/friendly_errors/fes_core":266,"../core/friendly_errors/file_errors":267,"../core/friendly_errors/validate_params":270,"../core/main":275,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.constructor":186,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.match":193,"core-js/modules/es.string.pad-start":194,"core-js/modules/es.string.replace":196,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],317:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,l.default=t},{"../core/main":275}],318:[function(t,a,l){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function c(p){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(p)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(u=t("../core/main"))&&u.__esModule?u:{default:u},f=(t("./p5.Geometry"),function(p){if(p&&p.__esModule)return p;if(p===null||c(p)!=="object"&&typeof p!="function")return{default:p};var g=m();if(g&&g.has(p))return g.get(p);var y,S={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in p){var E;Object.prototype.hasOwnProperty.call(p,y)&&((E=b?Object.getOwnPropertyDescriptor(p,y):null)&&(E.get||E.set)?Object.defineProperty(S,y,E):S[y]=p[y])}return S.default=p,g&&g.set(p,S),S}(t("../core/constants")));function m(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,m=function(){return p},p)}i.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},i.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},i.default.prototype.buildGeometry=function(p){return this._renderer.buildGeometry(p)},i.default.prototype.freeGeometry=function(p){this._renderer._freeBuffers(p.gid)},i.default.prototype.plane=function(p,g,y,S){this._assert3d("plane"),i.default._validateParameters("plane",arguments),p===void 0&&(p=50),g===void 0&&(g=p),S===void 0&&(S=1);var b,E="plane|".concat(y=y===void 0?1:y,"|").concat(S);return this._renderer.geometryInHash(E)||((b=new i.default.Geometry(y,S,function(){for(var x,k,T=0;T<=this.detailY;T++)for(var j=T/this.detailY,A=0;A<=this.detailX;A++)x=A/this.detailX,k=new i.default.Vector(x-.5,j-.5,0),this.vertices.push(k),this.uvs.push(x,j)})).computeFaces().computeNormals(),y<=1&&S<=1?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(E,b)),this._renderer.drawBuffersScaled(E,p,g,1),this},i.default.prototype.box=function(p,g,y,S,b){this._assert3d("box"),i.default._validateParameters("box",arguments),p===void 0&&(p=50),g===void 0&&(g=p),y===void 0&&(y=g);var E,x=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,x=(b===void 0&&(b=x?1:4),"box|".concat(S=S===void 0?x?1:4:S,"|").concat(b));return this._renderer.geometryInHash(x)||((E=new i.default.Geometry(S,b,function(){var k=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(T,j){for(var j=4*j,A=0;A<4;A++){var C=T[A],C=new i.default.Vector((2*(1&C)-1)/2,((2&C)-1)/2,((4&C)/2-1)/2);k.vertices.push(C),k.uvs.push(1&A,(2&A)/2)}k.faces.push([j,1+j,2+j]),k.faces.push([2+j,1+j,3+j])})})).computeNormals(),S<=4&&b<=4?E._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(x,E)),this._renderer.drawBuffersScaled(x,p,g,y),this},i.default.prototype.sphere=function(p,g,y){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),this.ellipsoid(p=p===void 0?50:p,p,p,g=g===void 0?24:g,y=y===void 0?16:y),this};function _(p,g,y,S,b,E,x){p=p<=0?1:p,g=g<0?0:g,y=y<=0?p:y,S=S<3?3:S;for(var k,T,j=(E=E===void 0||E)?-2:0,A=(b=b<1?1:b)+((x=x===void 0?g!==0:x)?2:0),C=Math.atan2(p-g,y),I=Math.sin(C),F=Math.cos(C),N=j;N<=A;++N){var z=N/b,R=y*z,q=void 0,q=N<0?(z=R=0,p):b<N?(R=y,z=1,g):p+(g-p)*z;for(N!==-2&&N!==b+2||(q=0),R-=y/2,k=0;k<S;++k){var M=k/(S-1),X=2*Math.PI*M,D=Math.sin(X),X=Math.cos(X),O=(this.vertices.push(new i.default.Vector(D*q,R,X*q)),void 0),O=N<0?new i.default.Vector(0,-1,0):b<N&&g?new i.default.Vector(0,1,0):new i.default.Vector(D*F,I,X*F);this.vertexNormals.push(O),this.uvs.push(M,z)}}var G=0;if(E){for(T=0;T<S;++T)this.faces.push([G+T,G+S+(T+1)%S,G+S+T]);G+=2*S}for(N=0;N<b;++N){for(k=0;k<S;++k){var K=(k+1)%S;this.faces.push([G+k,G+K,G+S+K]),this.faces.push([G+k,G+S+K,G+S+k])}G+=S}if(x)for(G+=S,k=0;k<S;++k)this.faces.push([G+k,G+(k+1)%S,G+S])}i.default.prototype.cylinder=function(p,g,y,S,b,E){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),p===void 0&&(p=50),g===void 0&&(g=p),S===void 0&&(S=1),E===void 0&&(E=!0),b===void 0&&(b=!0);var x,k="cylinder|".concat(y=y===void 0?24:y,"|").concat(S,"|").concat(b,"|").concat(E);return this._renderer.geometryInHash(k)||(x=new i.default.Geometry(y,S),_.call(x,1,1,1,y,S,b,E),y<=24&&S<=16?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(k,x)),this._renderer.drawBuffersScaled(k,p,g,p),this},i.default.prototype.cone=function(p,g,y,S,b){this._assert3d("cone"),i.default._validateParameters("cone",arguments),p===void 0&&(p=50),g===void 0&&(g=p),S===void 0&&(S=1),b===void 0&&(b=!0);var E,x="cone|".concat(y=y===void 0?24:y,"|").concat(S,"|").concat(b);return this._renderer.geometryInHash(x)||(E=new i.default.Geometry(y,S),_.call(E,1,0,1,y,S,b,!1),y<=24&&S<=16?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,E)),this._renderer.drawBuffersScaled(x,p,g,p),this},i.default.prototype.ellipsoid=function(p,g,y,S,b){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),p===void 0&&(p=50),g===void 0&&(g=p),y===void 0&&(y=p),b===void 0&&(b=16);var E,x="ellipsoid|".concat(S=S===void 0?24:S,"|").concat(b);return this._renderer.geometryInHash(x)||((E=new i.default.Geometry(S,b,function(){for(var k=0;k<=this.detailY;k++)for(var T=k/this.detailY,j=Math.PI*T-Math.PI/2,A=Math.cos(j),C=Math.sin(j),I=0;I<=this.detailX;I++){var F=I/this.detailX,z=2*Math.PI*F,N=Math.cos(z),z=Math.sin(z),z=new i.default.Vector(A*z,C,A*N);this.vertices.push(z),this.vertexNormals.push(z),this.uvs.push(F,T)}})).computeFaces(),S<=24&&b<=24?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(x,E)),this._renderer.drawBuffersScaled(x,p,g,y),this},i.default.prototype.torus=function(p,x,y,S){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),p===void 0)p=50;else if(!p)return;if(x===void 0)x=10;else if(!x)return;y===void 0&&(y=24),S===void 0&&(S=16);var b,E=(x/p).toPrecision(4),x="torus|".concat(E,"|").concat(y,"|").concat(S);return this._renderer.geometryInHash(x)||((b=new i.default.Geometry(y,S,function(){for(var k=0;k<=this.detailY;k++)for(var T=k/this.detailY,j=2*Math.PI*T,A=Math.cos(j),C=Math.sin(j),I=1+E*A,F=0;F<=this.detailX;F++){var N=F/this.detailX,z=2*Math.PI*N,q=Math.cos(z),z=Math.sin(z),R=new i.default.Vector(I*q,I*z,E*C),q=new i.default.Vector(A*q,A*z,C);this.vertices.push(R),this.vertexNormals.push(q),this.uvs.push(N,T)}})).computeFaces(),y<=24&&S<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,b)),this._renderer.drawBuffersScaled(x,p,p,p),this},i.default.RendererGL.prototype.point=function(p,g,y){var S=[];return S.push(new i.default.Vector(p,g,y=y===void 0?0:y)),this._drawPoints(S,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(x){var g=x[0],y=x[1],S=x[2],b=x[3],E=x[4],x=x[5],k=(this.geometryInHash("tri")||((k=new i.default.Geometry(1,1,function(){var A=[];A.push(new i.default.Vector(0,0,0)),A.push(new i.default.Vector(1,0,0)),A.push(new i.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=A,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),k.computeNormals(),this.createBuffers("tri",k)),this.uMVMatrix.copy());try{var T=Math.sign(g*b-S*y+S*x-E*b+E*y-g*x),j=new i.default.Matrix([S-g,b-y,0,0,E-g,x-y,0,0,0,0,T,0,g,y,0,1]).mult(this.uMVMatrix);this.uMVMatrix=j,this.drawBuffers("tri")}finally{this.uMVMatrix=k}return this},i.default.RendererGL.prototype.ellipse=function(p){this.arc(p[0],p[1],p[2],p[3],0,f.TWO_PI,f.OPEN,p[4])},i.default.RendererGL.prototype.arc=function(p){var g,y=arguments[1],S=arguments[2],b=arguments[3],E=arguments[4],x=arguments[5],k=arguments[6],T=arguments[7]||25,j=(Math.abs(x-E)>=f.TWO_PI?"".concat(A="ellipse","|"):"".concat(A="arc","|").concat(E,"|").concat(x,"|").concat(k,"|")).concat(T,"|"),A=(this.geometryInHash(j)||((g=new i.default.Geometry(T,1,function(){if(E.toFixed(10)!==x.toFixed(10)){k!==f.PIE&&k!==void 0||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var C=0;C<=T;C++){var F=(x-E)*(C/T)+E,I=.5+Math.cos(F)/2,F=.5+Math.sin(F)/2;this.vertices.push(new i.default.Vector(I,F,0)),this.uvs.push([I,F]),C<T-1&&(this.faces.push([0,C+1,C+2]),this.edges.push([C+1,C+2]))}switch(k){case f.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case f.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case f.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),T<=50?g._edgesToVertices(g):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(A," with more than 50 detail")),this.createBuffers(j,g)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([p,y,0]),this.uMVMatrix.scale(S,b,1),this.drawBuffers(j)}finally{this.uMVMatrix=A}return this},i.default.RendererGL.prototype.rect=function(p){var g=p[0],y=p[1],S=p[2],b=p[3];if(p[4]===void 0){var k=this._pInst._glAttributes.perPixelLighting,E=p[4]||(k?1:24),x=p[5]||(k?1:16),k="rect|".concat(E,"|").concat(x),T=(this.geometryInHash(k)||((T=new i.default.Geometry(E,x,function(){for(var O=0;O<=this.detailY;O++)for(var G=O/this.detailY,K=0;K<=this.detailX;K++){var Z=K/this.detailX,U=new i.default.Vector(Z,G,0);this.vertices.push(U),this.uvs.push(Z,G)}0<E&&0<x&&(this.edges=[[0,E],[E,(E+1)*(x+1)-1],[(E+1)*(x+1)-1,(E+1)*x],[(E+1)*x,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(k,T)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([g,y,0]),this.uMVMatrix.scale(S,b,1),this.drawBuffers(k)}finally{this.uMVMatrix=T}}else{var k=p[4],T=p[5]===void 0?k:p[5],j=p[6]===void 0?T:p[6],p=p[7]===void 0?j:p[7],z=S,A=b,F=((z+=g)<g&&(F=g,g=z,z=F),(A+=y)<y&&(F=y,y=A,A=F),Math.min((z-g)/2,(A-y)/2)),C=(F<k&&(k=F),F<T&&(T=F),F<j&&(j=F),F<p&&(p=F),g),I=y,F=z,g=A,N=(this.beginShape(),T!==0?(this.vertex(F-T,I),this.quadraticVertex(F,I,F,I+T)):this.vertex(F,I),j!==0?(this.vertex(F,g-j),this.quadraticVertex(F,g,F-j,g)):this.vertex(F,g),p!==0?(this.vertex(C+p,g),this.quadraticVertex(C,g,C,g-p)):this.vertex(C,g),k!==0?(this.vertex(C,I+k),this.quadraticVertex(C,I,C+k,I)):this.vertex(C,I),!(this.immediateMode.geometry.uvs.length=0)),y=!1,z=void 0;try{for(var R,q=this.immediateMode.geometry.vertices[Symbol.iterator]();!(N=(R=q.next()).done);N=!0){var M=R.value,D=(M.x-C)/S,X=(M.y-I)/b;this.immediateMode.geometry.uvs.push(D,X)}}catch(V){y=!0,z=V}finally{try{N||q.return==null||q.return()}finally{if(y)throw z}}this.endShape(f.CLOSE)}return this},i.default.RendererGL.prototype.quad=function(p,g,y,S,b,E,x,k,T,j,A,C,I,F){I===void 0&&(I=2),F===void 0&&(F=2);var N="quad|".concat(p,"|").concat(g,"|").concat(y,"|").concat(S,"|").concat(b,"|").concat(E,"|").concat(x,"|").concat(k,"|").concat(T,"|").concat(j,"|").concat(A,"|").concat(C,"|").concat(I,"|").concat(F);if(!this.geometryInHash(N)){var z=new i.default.Geometry(I,F,function(){for(var K=1/(this.detailX-1),Z=1/(this.detailY-1),U=0;U<this.detailY;U++)for(var V=0;V<this.detailX;V++){var L=V*K,H=U*Z;this.vertices.push(new i.default.Vector((1-L)*((1-H)*p+H*j)+L*((1-H)*S+H*x),(1-L)*((1-H)*g+H*A)+L*((1-H)*b+H*k),(1-L)*((1-H)*y+H*C)+L*((1-H)*E+H*T))),this.uvs.push([L,H])}});z.faces=[];for(var R=0;R<F-1;R++)for(var q=0;q<I-1;q++){var M=q+R*I,D=q+1+(R+1)*I,X=q+(R+1)*I;z.faces.push([M,q+1+R*I,D]),z.faces.push([M,D,X])}z.computeNormals();for(var O=[z.edges.length=0,2,3,1],G=0;G<O.length;G++)z.edges.push([O[G],O[(G+1)%O.length]]);z._edgesToVertices(),this.createBuffers(N,z)}return this.drawBuffers(N),this},i.default.RendererGL.prototype.bezier=function(p,g,y,S,b,E,x,k,T,j,A,C){arguments.length===8&&(A=k,j=x,k=E,x=b,b=S,S=y,y=E=T=C=0);var I=this._pInst._bezierDetail||20;this.beginShape();for(var F=0;F<=I;F++){var N=Math.pow(1-F/I,3),z=F/I*3*Math.pow(1-F/I,2),R=3*Math.pow(F/I,2)*(1-F/I),q=Math.pow(F/I,3);this.vertex(p*N+S*z+x*R+j*q,g*N+b*z+k*R+A*q,y*N+E*z+T*R+C*q)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(p,g,y,S,b,E,x,k,T,j,A,C){arguments.length===8&&(j=x,A=k,x=b,k=S,b=S=y,y=E=T=C=0);var I=this._pInst._curveDetail;this.beginShape();for(var F=0;F<=I;F++){var N=.5*Math.pow(F/I,3),z=.5*Math.pow(F/I,2),R=F/I*.5;this.vertex(N*(3*S-p-3*x+j)+z*(2*p-5*S+4*x-j)+R*(-p+x)+2*S*.5,N*(3*b-g-3*k+A)+z*(2*g-5*b+4*k-A)+R*(-g+k)+2*b*.5,N*(3*E-y-3*T+C)+z*(2*y-5*E+4*T-C)+R*(-y+T)+2*E*.5)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(f.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(f.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var p,g,y,S,b,E,x=[],k=[],T=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,A=0,C=1,I=0;A<1;){if(E=parseFloat(A.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(E),C.toFixed(6)===j.toFixed(6)){E=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(E);break}A+=j,C-=j,++I}}for(var F=this._lookUpTableBezier.length,N=[],z=0;z<4;z++)N.push([]);N[0]=this.immediateMode.geometry.vertexColors.slice(-4),N[3]=this.curFillColor.slice();var R=[];for(z=0;z<4;z++)R.push([]);if(R[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),R[3]=this.curStrokeColor.slice(),T===6){this.isBezier=!0;var x=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],k=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],q=Math.hypot(x[0]-x[1],k[0]-k[1]),D=Math.hypot(x[1]-x[2],k[1]-k[2]),M=Math.hypot(x[2]-x[3],k[2]-k[3]),D=q+D+M;for(q/=D,M/=D,b=0;b<4;b++)N[1].push(N[0][b]*(1-q)+N[3][b]*q),N[2].push(N[0][b]*M+N[3][b]*(1-M)),R[1].push(R[0][b]*(1-q)+R[3][b]*q),R[2].push(R[0][b]*M+R[3][b]*(1-M));for(S=0;S<F;S++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],z=p=g=0;z<4;z++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[S][z]*N[z][b],this.curStrokeColor[b]+=this._lookUpTableBezier[S][z]*R[z][b];p+=x[z]*this._lookUpTableBezier[S][z],g+=k[z]*this._lookUpTableBezier[S][z]}this.vertex(p,g)}this.curFillColor=N[3],this.curStrokeColor=R[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(T===9){this.isBezier=!0,x=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],k=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var X=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],O=Math.hypot(x[0]-x[1],k[0]-k[1],X[0]-X[1]),D=Math.hypot(x[1]-x[2],k[1]-k[2],X[1]-X[2]),G=Math.hypot(x[2]-x[3],k[2]-k[3],X[2]-X[3]),T=O+D+G;for(O/=T,G/=T,b=0;b<4;b++)N[1].push(N[0][b]*(1-O)+N[3][b]*O),N[2].push(N[0][b]*G+N[3][b]*(1-G)),R[1].push(R[0][b]*(1-O)+R[3][b]*O),R[2].push(R[0][b]*G+R[3][b]*(1-G));for(S=0;S<F;S++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],z=p=g=y=0;z<4;z++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[S][z]*N[z][b],this.curStrokeColor[b]+=this._lookUpTableBezier[S][z]*R[z][b];p+=x[z]*this._lookUpTableBezier[S][z],g+=k[z]*this._lookUpTableBezier[S][z],y+=X[z]*this._lookUpTableBezier[S][z]}this.vertex(p,g,y)}this.curFillColor=N[3],this.curStrokeColor=R[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var p,g,y,S,b,E,x=[],k=[],T=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var j=1/this._lutQuadraticDetail,A=0,C=1,I=0;A<1;){if(E=parseFloat(A.toFixed(6)),this._lookUpTableQuadratic[I]=this._quadraticCoefficients(E),C.toFixed(6)===j.toFixed(6)){E=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableQuadratic[I]=this._quadraticCoefficients(E);break}A+=j,C-=j,++I}}for(var F=this._lookUpTableQuadratic.length,N=[],z=0;z<3;z++)N.push([]);N[0]=this.immediateMode.geometry.vertexColors.slice(-4),N[2]=this.curFillColor.slice();var R=[];for(z=0;z<3;z++)R.push([]);if(R[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),R[2]=this.curStrokeColor.slice(),T===4){this.isQuadratic=!0;var x=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],k=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],q=Math.hypot(x[0]-x[1],k[0]-k[1]);for(q/=q+Math.hypot(x[1]-x[2],k[1]-k[2]),b=0;b<4;b++)N[1].push(N[0][b]*(1-q)+N[2][b]*q),R[1].push(R[0][b]*(1-q)+R[2][b]*q);for(S=0;S<F;S++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],z=p=g=0;z<3;z++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[S][z]*N[z][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[S][z]*R[z][b];p+=x[z]*this._lookUpTableQuadratic[S][z],g+=k[z]*this._lookUpTableQuadratic[S][z]}this.vertex(p,g)}this.curFillColor=N[2],this.curStrokeColor=R[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(T===6){this.isQuadratic=!0,x=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],k=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var M=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],D=Math.hypot(x[0]-x[1],k[0]-k[1],M[0]-M[1]);for(D/=D+Math.hypot(x[1]-x[2],k[1]-k[2],M[1]-M[2]),b=0;b<4;b++)N[1].push(N[0][b]*(1-D)+N[2][b]*D),R[1].push(R[0][b]*(1-D)+R[2][b]*D);for(S=0;S<F;S++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],z=p=g=y=0;z<3;z++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[S][z]*N[z][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[S][z]*R[z][b];p+=x[z]*this._lookUpTableQuadratic[S][z],g+=k[z]*this._lookUpTableQuadratic[S][z],y+=M[z]*this._lookUpTableQuadratic[S][z]}this.vertex(p,g,y)}this.curFillColor=N[2],this.curStrokeColor=R[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var p,g,y,S,b,E,x=[],k=[],T=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,A=0,C=1,I=0;A<1;){if(E=parseFloat(A.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(E),C.toFixed(6)===j.toFixed(6)){E=parseFloat(C.toFixed(6))+parseFloat(A.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(E);break}A+=j,C-=j,++I}}var F=this._lookUpTableBezier.length;if(T===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,x=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),k=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<F;b++)g=x[0]*this._lookUpTableBezier[b][0]+x[1]*this._lookUpTableBezier[b][1]+x[2]*this._lookUpTableBezier[b][2]+x[3]*this._lookUpTableBezier[b][3],y=k[0]*this._lookUpTableBezier[b][0]+k[1]*this._lookUpTableBezier[b][1]+k[2]*this._lookUpTableBezier[b][2]+k[3]*this._lookUpTableBezier[b][3],this.vertex(g,y);for(b=0;b<T;b++)this.immediateMode._curveVertex.shift()}}else if(T===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,x=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),k=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),p=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<F;b++)g=x[0]*this._lookUpTableBezier[b][0]+x[1]*this._lookUpTableBezier[b][1]+x[2]*this._lookUpTableBezier[b][2]+x[3]*this._lookUpTableBezier[b][3],y=k[0]*this._lookUpTableBezier[b][0]+k[1]*this._lookUpTableBezier[b][1]+k[2]*this._lookUpTableBezier[b][2]+k[3]*this._lookUpTableBezier[b][3],S=p[0]*this._lookUpTableBezier[b][0]+p[1]*this._lookUpTableBezier[b][1]+p[2]*this._lookUpTableBezier[b][2]+p[3]*this._lookUpTableBezier[b][3],this.vertex(g,y,S);for(b=0;b<T;b++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(p,C,y,I,b,E,x,k,T){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(p),this._pInst.textureMode(f.NORMAL);var j=0,A=(C<=p.width&&(j=C/p.width),1),C=(C+I<=p.width&&(A=(C+I)/p.width),0),I=(y<=p.height&&(C=y/p.height),1);y+b<=p.height&&(I=(y+b)/p.height),this.beginShape(),this.vertex(E,x,0,j,C),this.vertex(E+k,x,0,A,C),this.vertex(E+k,x+T,0,A,I),this.vertex(E,x+T,0,j,I),this.endShape(f.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(f.REMOVE)};var u=i.default;l.default=u},{"../core/constants":264,"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.number.to-fixed":175,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],319:[function(t,a,l){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function c(g){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(p=t("../core/main"))&&p.__esModule?p:{default:p},f=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var y=m();if(y&&y.has(g))return y.get(g);var S,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in g){var x;Object.prototype.hasOwnProperty.call(g,S)&&((x=E?Object.getOwnPropertyDescriptor(g,S):null)&&(x.get||x.set)?Object.defineProperty(b,S,x):b[S]=g[S])}return b.default=g,y&&y.set(g,b),b}(t("../core/constants"));function m(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,m=function(){return g},g)}function _(g){return function(y){if(Array.isArray(y)){for(var S=0,b=new Array(y.length);S<y.length;S++)b[S]=y[S];return b}}(g)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(g,y){for(var S=0;S<y.length;S++){var b=y[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}var p=function(){function g(b){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");(this.renderer=b)._pInst.push(),this.identityMatrix=new i.default.Matrix,b.uMVMatrix=new i.default.Matrix,this.geometry=new i.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(g.nextGeometryId),g.nextGeometryId++,this.hasTransform=!1}var y,S;return y=g,(S=[{key:"transformVertices",value:function(b){var E=this;return this.hasTransform?b.map(function(x){return E.renderer.uMVMatrix.multiplyPoint(x)}):b}},{key:"transformNormals",value:function(b){var E=this;return this.hasTransform?b.map(function(x){return E.renderer.uNMatrix.multiplyVec3(x)}):b}},{key:"addGeometry",value:function(b){for(var E,x=this,k=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(j,A){return j===x.identityMatrix.mat4[A]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),T=((E=this.geometry.vertices).push.apply(E,_(this.transformVertices(b.vertices))),(E=this.geometry.vertexNormals).push.apply(E,_(this.transformNormals(b.vertexNormals))),(E=this.geometry.uvs).push.apply(E,_(b.uvs)),this.renderer._doFill&&(E=this.geometry.faces).push.apply(E,_(b.faces.map(function(j){return j.map(function(A){return A+k})}))),this.renderer._doStroke&&(E=this.geometry.edges).push.apply(E,_(b.edges.map(function(j){return j.map(function(A){return A+k})}))),_(b.vertexColors));T.length<4*b.vertices.length;)T.push.apply(T,_(this.renderer.curFillColor));(E=this.geometry.vertexColors).push.apply(E,_(T))}},{key:"addImmediate",value:function(){var b=this.renderer.immediateMode.geometry,E=this.renderer.immediateMode.shapeMode,x=[];if(this.renderer._doFill)if(E===f.TRIANGLE_STRIP||E===f.QUAD_STRIP)for(var k=2;k<b.vertices.length;k++)k%2==0?x.push([k,k-1,k-2]):x.push([k,k-2,k-1]);else if(E===f.TRIANGLE_FAN)for(var T=2;T<b.vertices.length;T++)x.push([0,T-1,T]);else for(var j=0;j<b.vertices.length;j+=3)x.push([j,j+1,j+2]);this.addGeometry(Object.assign({},b,{faces:x}))}},{key:"addRetained",value:function(b){this.addGeometry(b.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&u(y.prototype,S),g}();p.nextGeometryId=0,l.default=p},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.every":153,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],320:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var c=(_=t("../core/main"))&&_.__esModule?_:{default:_},i=function(u){if(u&&u.__esModule)return u;if(u===null||m(u)!=="object"&&typeof u!="function")return{default:u};var p=f();if(p&&p.has(u))return p.get(u);var g,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var b;Object.prototype.hasOwnProperty.call(u,g)&&((b=S?Object.getOwnPropertyDescriptor(u,g):null)&&(b.get||b.set)?Object.defineProperty(y,g,b):y[g]=u[g])}return y.default=u,p&&p.set(u,y),y}(t("../core/constants"));function f(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,f=function(){return u},u)}function m(u){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}c.default.prototype.orbitControl=function(u,p,g,T){var S=this,b=(this._assert3d("orbitControl"),c.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);u===void 0&&(u=1),p===void 0&&(p=u),g===void 0&&(g=1),m(T)!=="object"&&(T={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var A=T.disableTouchActions;this.touchActionsDisabled===!0||A!==void 0&&!A||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var E,x,k,A=T.freeRotation,T=A!==void 0&&A,j=[],A=(this.touches.forEach(function(q){S._renderer.prevTouches.forEach(function(M){q.id===M.id&&(M={x:q.x,y:q.y,px:M.x,py:M.y},j.push(M))})}),this._renderer.prevTouches=this.touches,0),C=0,I=0,F=0,N=0,z=this.height<this.width?this.height:this.width,R=!1;return 0<j.length?(R=0<j[0].x&&j[0].x<this.width&&0<j[0].y&&j[0].y<this.height,j.length===1?(C=-u*((E=j[0]).x-E.px)/z,I=p*(E.y-E.py)/z):(E=j[0],x=j[1],A=-(Math.hypot(E.x-x.x,E.y-x.y)-Math.hypot(E.px-x.px,E.py-x.py))*g*4e-4,F=.5*(E.x+x.x)-.5*(E.px+x.px),N=.5*(E.y+x.y)-.5*(E.py+x.py)),0<this.touches.length?R&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(R=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(A=Math.sign(this._mouseWheelDeltaY)*g,A*=.01,this._mouseWheelDeltaY=0,R&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(C=-u*this.movedX/z,I=p*this.movedY/z):this.mouseButton===this.RIGHT&&(F=this.movedX,N=this.movedY*b.yScale),R&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),A!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=A),.001<Math.abs(this._renderer.zoomVelocity)?(T?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,C===0&&I===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*C,.6*I),1e-6<this._renderer.rotateVelocity.magSq()?(T?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),F===0&&N===0||!this._renderer.executeRotateAndMove||(E=2*F/this.width,x=2*-N/this.height,this._renderer.moveVelocity.add(.15*E,.15*x)),1e-6<this._renderer.moveVelocity.magSq()?(g=b._getLocalAxes(),u=b.eyeX-b.centerX,p=b.eyeY-b.centerY,z=b.eyeZ-b.centerZ,R=Math.sqrt(u*u+p*p+z*z),A=new c.default.Vector(b.centerX,b.centerY,b.centerZ),A=b.cameraMatrix.multiplyPoint(A),(A=this._renderer.uPMatrix.multiplyAndNormalizePoint(A)).x-=this._renderer.moveVelocity.x,A.y-=this._renderer.moveVelocity.y,I=(C=this._renderer.uPMatrix.mat4)[15]===0?(k=(C[8]+A.x)/C[0]*R,(C[9]+A.y)/C[5]*R):(k=(A.x-C[12])/C[0],(A.y-C[13])/C[5]),b.setPosition(b.eyeX+k*g.x[0]+I*g.y[0],b.eyeY+k*g.x[1]+I*g.y[1],b.eyeZ+k*g.x[2]+I*g.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},c.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var u=arguments.length,p=new Array(u),g=0;g<u;g++)p[g]=arguments[g];c.default._validateParameters("debugMode",p);for(var y=this._registeredMethods.post.length-1;0<=y;y--)this._registeredMethods.post[y].toString()!==this._grid().toString()&&this._registeredMethods.post[y].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(y,1);p[0]===i.GRID?this.registerMethod("post",this._grid.call(this,p[1],p[2],p[3],p[4],p[5])):p[0]===i.AXES?this.registerMethod("post",this._axesIcon.call(this,p[1],p[2],p[3],p[4])):(this.registerMethod("post",this._grid.call(this,p[0],p[1],p[2],p[3],p[4])),this.registerMethod("post",this._axesIcon.call(this,p[5],p[6],p[7],p[8])))},c.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1)},c.default.prototype._grid=function(u,p,g,y,S){u===void 0&&(u=this.width/2),p===void 0&&(p=Math.round(u/30)<4?4:Math.round(u/30)),g===void 0&&(g=0),y===void 0&&(y=0),S===void 0&&(S=0);var b=u/p,E=u/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var x=0;x<=p;x++)this.beginShape(this.LINES),this.vertex(-E+g,y,x*b-E+S),this.vertex(E+g,y,x*b-E+S),this.endShape();for(var k=0;k<=p;k++)this.beginShape(this.LINES),this.vertex(k*b-E+g,y,-E+S),this.vertex(k*b-E+g,y,E+S),this.endShape();this.pop()}},c.default.prototype._axesIcon=function(u,p,g,y){return u===void 0&&(u=40<this.width/20?this.width/20:40),p===void 0&&(p=-this.width/4),g===void 0&&(g=p),y===void 0&&(y=p),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(p,g,y),this.vertex(p+u,g,y),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(p,g,y),this.vertex(p,g+u,y),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(p,g,y),this.vertex(p,g,y+u),this.endShape(),this.pop()}};var _=c.default;l.default=_},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.splice":167,"core-js/modules/es.math.hypot":170,"core-js/modules/es.math.sign":172,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],321:[function(t,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};o.default.prototype.ambientLight=function(c,i,f,m){this._assert3d("ambientLight"),o.default._validateParameters("ambientLight",arguments);var _=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(_._array[0],_._array[1],_._array[2]),this._renderer._enableLighting=!0,this},o.default.prototype.specularColor=function(c,i,f){this._assert3d("specularColor"),o.default._validateParameters("specularColor",arguments);var m=this.color.apply(this,arguments);return this._renderer.specularColors=[m._array[0],m._array[1],m._array[2]],this},o.default.prototype.directionalLight=function(c,S,y,m,_,u){this._assert3d("directionalLight"),o.default._validateParameters("directionalLight",arguments),c=c instanceof o.default.Color?c:this.color(c,S,y);var p,g,S=arguments[arguments.length-1],y=typeof S=="number"?(p=arguments[arguments.length-3],g=arguments[arguments.length-2],arguments[arguments.length-1]):(p=S.x,g=S.y,S.z),S=Math.sqrt(p*p+g*g+y*y);return this._renderer.directionalLightDirections.push(p/S,g/S,y/S),this._renderer.directionalLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.pointLight=function(c,y,S,m,_,u){this._assert3d("pointLight"),o.default._validateParameters("pointLight",arguments),c=c instanceof o.default.Color?c:this.color(c,y,S);var p,g,y=arguments[arguments.length-1],S=typeof y=="number"?(p=arguments[arguments.length-3],g=arguments[arguments.length-2],arguments[arguments.length-1]):(p=y.x,g=y.y,y.z);return this._renderer.pointLightPositions.push(p,g,S),this._renderer.pointLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.imageLight=function(c){this._renderer.activeImageLight=c,this._renderer._enableLighting=!0},o.default.prototype.lights=function(){this._assert3d("lights");var c=this.color("rgb(128,128,128)");return this.ambientLight(c),this.directionalLight(c,0,0,-1),this},o.default.prototype.lightFalloff=function(c,i,f){return this._assert3d("lightFalloff"),o.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),i<0&&(i=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),f<0&&(f=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&i===0&&f===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=i,this._renderer.quadraticAttenuation=f,this},o.default.prototype.spotLight=function(c,i,f,m,_,u,p,g,y,S,b){this._assert3d("spotLight"),o.default._validateParameters("spotLight",arguments);var E,x,k,T=arguments.length;switch(T){case 11:case 10:E=this.color(c,i,f),x=new o.default.Vector(m,_,u),k=new o.default.Vector(p,g,y);break;case 9:c instanceof o.default.Color?(E=c,x=new o.default.Vector(i,f,m),k=new o.default.Vector(_,u,p),S=g,b=y):m instanceof o.default.Vector?(E=this.color(c,i,f),x=m,k=new o.default.Vector(_,u,p),S=g,b=y):p instanceof o.default.Vector?(E=this.color(c,i,f),x=new o.default.Vector(m,_,u),k=p,S=g,b=y):(E=this.color(c,i,f),x=new o.default.Vector(m,_,u),k=new o.default.Vector(p,g,y));break;case 8:S=(k=c instanceof o.default.Color?(E=c,x=new o.default.Vector(i,f,m),new o.default.Vector(_,u,p)):m instanceof o.default.Vector?(E=this.color(c,i,f),x=m,new o.default.Vector(_,u,p)):(E=this.color(c,i,f),x=new o.default.Vector(m,_,u),p),g);break;case 7:c instanceof o.default.Color&&i instanceof o.default.Vector?(E=c,x=i,k=new o.default.Vector(f,m,_),S=u,b=p):c instanceof o.default.Color&&_ instanceof o.default.Vector?(E=c,x=new o.default.Vector(i,f,m),k=_,S=u,b=p):m instanceof o.default.Vector&&_ instanceof o.default.Vector?(E=this.color(c,i,f),x=m,k=_,S=u,b=p):k=c instanceof o.default.Color?(E=c,x=new o.default.Vector(i,f,m),new o.default.Vector(_,u,p)):m instanceof o.default.Vector?(E=this.color(c,i,f),x=m,new o.default.Vector(_,u,p)):(E=this.color(c,i,f),x=new o.default.Vector(m,_,u),p);break;case 6:m instanceof o.default.Vector&&_ instanceof o.default.Vector?(E=this.color(c,i,f),x=m,k=_,S=u):c instanceof o.default.Color&&_ instanceof o.default.Vector?(E=c,x=new o.default.Vector(i,f,m),k=_,S=u):c instanceof o.default.Color&&i instanceof o.default.Vector&&(E=c,x=i,k=new o.default.Vector(f,m,_),S=u);break;case 5:c instanceof o.default.Color&&i instanceof o.default.Vector&&f instanceof o.default.Vector?(E=c,x=i,k=f,S=m,b=_):m instanceof o.default.Vector&&_ instanceof o.default.Vector?(E=this.color(c,i,f),x=m,k=_):c instanceof o.default.Color&&_ instanceof o.default.Vector?(E=c,x=new o.default.Vector(i,f,m),k=_):c instanceof o.default.Color&&i instanceof o.default.Vector&&(E=c,x=i,k=new o.default.Vector(f,m,_));break;case 4:E=c,x=i,k=f,S=m;break;case 3:E=c,x=i,k=f;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(T<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(E._array[0],E._array[1],E._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(x.x,x.y,x.z),k.normalize(),this._renderer.spotLightDirections.push(k.x,k.y,k.z),S===void 0&&(S=Math.PI/3),b!==void 0&&b<1?(b=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):b===void 0&&(b=100),S=this._renderer._pInst._toRadians(S),this._renderer.spotLightAngle.push(Math.cos(S)),this._renderer.spotLightConc.push(b),this._renderer._enableLighting=!0,this},o.default.prototype.noLights=function(){this._assert3d("noLights");for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return o.default._validateParameters("noLights",i),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},t=o.default,l.default=t},{"../core/main":275}],322:[function(t,a,l){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./p5.Geometry"),o.default.prototype.loadModel=function(i){o.default._validateParameters("loadModel",arguments);var f,m,_,u=i.slice(-4),p=(typeof arguments[1]=="boolean"?(f=arguments[1],m=arguments[2],_=arguments[3],arguments[4]!==void 0&&(u=arguments[4])):(f=!1,m=arguments[1],_=arguments[2],arguments[3]!==void 0&&(u=arguments[3])),new o.default.Geometry),g=(p.gid="".concat(i,"|").concat(f),this);return u.match(/\.stl$/i)?this.httpDo(i,"GET","arrayBuffer",function(y){(function(S,b){if(function(E){for(var x=new DataView(E),k=[115,111,108,105,100],T=0;T<5;T++)if(function(j,A,C){for(var I=0,F=j.length;I<F;I++)if(j[I]!==A.getUint8(C+I,!1))return;return 1}(k,x,T))return;return 1}(b))(function(E,x){for(var k,T,j,A,C,I,F,N=new DataView(x),z=N.getUint32(80,!0),R=!1,q=0;q<70;q++)N.getUint32(q,!1)===1129270351&&N.getUint8(q+4)===82&&N.getUint8(q+5)===61&&(R=!0,A=[],C=N.getUint8(q+6)/255,I=N.getUint8(q+7)/255,F=N.getUint8(q+8)/255);for(var M=0;M<z;M++){for(var D,X=84+50*M,O=N.getFloat32(X,!0),G=N.getFloat32(4+X,!0),K=N.getFloat32(8+X,!0),Z=(R&&(D=N.getUint16(48+X,!0),j=32768&D?(k=C,T=I,F):(k=(31&D)/31,T=(D>>5&31)/31,(D>>10&31)/31)),new o.default.Vector(O,G,K)),U=1;U<=3;U++){var V=X+12*U,V=new o.default.Vector(N.getFloat32(V,!0),N.getFloat32(4+V,!0),N.getFloat32(8+V,!0));E.vertices.push(V),E.vertexNormals.push(Z),R&&A.push(k,T,j)}E.faces.push([3*M,3*M+1,3*M+2]),E.uvs.push([0,0],[0,0],[0,0])}})(S,b);else{if(b=new DataView(b),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");b=new TextDecoder("utf-8").decode(b).split(`
`),function(E,x){for(var k,T,j="",A=[],C=0;C<x.length;++C){for(var I=x[C].trim(),F=I.split(" "),N=0;N<F.length;++N)F[N]===""&&F.splice(N,1);if(F.length!==0)switch(j){case"":if(F[0]!=="solid")return console.error(I),console.error('Invalid state "'.concat(F[0],'", should be "solid"'));j="solid";break;case"solid":if(F[0]!=="facet"||F[1]!=="normal")return console.error(I),console.error('Invalid state "'.concat(F[0],'", should be "facet normal"'));k=new o.default.Vector(parseFloat(F[2]),parseFloat(F[3]),parseFloat(F[4])),E.vertexNormals.push(k,k,k),j="facet normal";break;case"facet normal":if(F[0]!=="outer"||F[1]!=="loop")return console.error(I),console.error('Invalid state "'.concat(F[0],'", should be "outer loop"'));j="vertex";break;case"vertex":if(F[0]==="vertex")T=new o.default.Vector(parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3])),E.vertices.push(T),E.uvs.push([0,0]),A.push(E.vertices.indexOf(T));else{if(F[0]!=="endloop")return console.error(I),console.error('Invalid state "'.concat(F[0],'", should be "vertex" or "endloop"'));E.faces.push(A),A=[],j="endloop"}break;case"endloop":if(F[0]!=="endfacet")return console.error(I),console.error('Invalid state "'.concat(F[0],'", should be "endfacet"'));j="endfacet";break;case"endfacet":if(F[0]!=="endsolid"){if(F[0]!=="facet"||F[1]!=="normal")return console.error(I),console.error('Invalid state "'.concat(F[0],'", should be "endsolid" or "facet normal"'));k=new o.default.Vector(parseFloat(F[2]),parseFloat(F[3]),parseFloat(F[4])),E.vertexNormals.push(k,k,k),j="facet normal"}break;default:console.error('Invalid state "'.concat(j,'"'))}}}(S,b)}})(p,y),f&&p.normalize(),g._decrementPreload(),typeof m=="function"&&m(p)},_):u.match(/\.obj$/i)?this.loadStrings(i,function(y){for(var S=p,b=y,E={v:[],vt:[],vn:[]},x={},k=0;k<b.length;++k){var T=b[k].trim().split(/\b\s+/);if(0<T.length){if(T[0]==="v"||T[0]==="vn"){var j=new o.default.Vector(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));E[T[0]].push(j)}else if(T[0]==="vt")j=[parseFloat(T[1]),1-parseFloat(T[2])],E[T[0]].push(j);else if(T[0]==="f")for(var A=3;A<T.length;++A){for(var C=[],I=[1,A-1,A],F=0;F<I.length;++F){var N=T[I[F]],z=0;if(x[N]!==void 0)z=x[N];else{for(var R=N.split("/"),q=0;q<R.length;q++)R[q]=parseInt(R[q])-1;z=x[N]=S.vertices.length,S.vertices.push(E.v[R[0]].copy()),E.vt[R[1]]?S.uvs.push(E.vt[R[1]].slice()):S.uvs.push([0,0]),E.vn[R[2]]&&S.vertexNormals.push(E.vn[R[2]].copy())}C.push(z)}C[0]!==C[1]&&C[0]!==C[2]&&C[1]!==C[2]&&S.faces.push(C)}}}S.vertexNormals.length===0&&S.computeNormals(),f&&p.normalize(),g._decrementPreload(),typeof m=="function"&&m(p)},_):(o.default._friendlyFileLoadError(3,i),_?_():o.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),p},o.default.prototype.model=function(i){this._assert3d("model"),o.default._validateParameters("model",arguments),0<i.vertices.length&&(this._renderer.geometryInHash(i.gid)||(i.edges.length===0&&i._makeTriangleEdges(),i._edgesToVertices(),this._renderer.createBuffers(i.gid,i)),this._renderer.drawBuffers(i.gid))};var c=o.default;l.default=c},{"../core/main":275,"./p5.Geometry":327,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.splice":167,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.match":193,"core-js/modules/es.string.split":198,"core-js/modules/es.string.trim":201}],323:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var p=m();if(p&&p.has(u))return p.get(u);var g,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var b;Object.prototype.hasOwnProperty.call(u,g)&&((b=S?Object.getOwnPropertyDescriptor(u,g):null)&&(b.get||b.set)?Object.defineProperty(y,g,b):y[g]=u[g])}return y.default=u,p&&p.set(u,y),y}(t("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}t("./p5.Texture"),i.default.prototype.loadShader=function(u,p,g,y){i.default._validateParameters("loadShader",arguments),y=y||console.error;function S(){E._decrementPreload(),g&&g(b)}var b=new i.default.Shader,E=this,x=!1,k=!1;return this.loadStrings(u,function(T){b._vertSrc=T.join(`
`),k=!0,x&&S()},y),this.loadStrings(p,function(T){b._fragSrc=T.join(`
`),x=!0,k&&S()},y),b},i.default.prototype.createShader=function(u,p){return i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,u,p)},i.default.prototype.createFilterShader=function(u){i.default._validateParameters("createFilterShader",arguments);var p=u.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,p=new i.default.Shader(this._renderer,p,u);return this._renderer.GL?p.ensureCompiledOnContext(this):p.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),p},i.default.prototype.shader=function(u){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),u.ensureCompiledOnContext(this),u.isStrokeShader()?this._renderer.userStrokeShader=u:(this._renderer.userFillShader=u,this._renderer._useNormalMaterial=!1),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.texture=function(u){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),u.gifProperties&&u._animateGif(this),this._renderer.drawMode=f.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=u,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(u){u!==f.IMAGE&&u!==f.NORMAL?console.warn("You tried to set ".concat(u," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=u},i.default.prototype.textureWrap=function(u){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u,g=(this._renderer.textureWrapX=u,this._renderer.textureWrapY=p,!0),y=!1,S=void 0;try{for(var b,E=this._renderer.textures.values()[Symbol.iterator]();!(g=(b=E.next()).done);g=!0)b.value.setWrapMode(u,p)}catch(x){y=!0,S=x}finally{try{g||E.return==null||E.return()}finally{if(y)throw S}}},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var u=arguments.length,p=new Array(u),g=0;g<u;g++)p[g]=arguments[g];return i.default._validateParameters("normalMaterial",p),this._renderer.drawMode=f.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.ambientMaterial=function(u,p,g){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var y=i.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=y._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.emissiveMaterial=function(u,p,g,y){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var S=i.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=S._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.specularMaterial=function(u,p,g,y){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var S=i.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=S._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},i.default.prototype.shininess=function(u){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),this._renderer._useShininess=u=u<1?1:u,this},i.default.RendererGL.prototype._applyColorBlend=function(u){var p=this.GL,g=this.drawMode===f.TEXTURE,g=this.userFillShader||this.userStrokeShader||this.userPointShader||g||this.curBlendMode!==f.BLEND||u[u.length-1]<1||this._isErasing;return g!==this._isBlending&&(g||this.curBlendMode!==f.BLEND&&this.curBlendMode!==f.ADD?p.enable(p.BLEND):p.disable(p.BLEND),p.depthMask(!0),this._isBlending=g),this._applyBlendMode(),u},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var u=this.GL;switch(this.curBlendMode){case f.BLEND:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case f.ADD:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE);break;case f.REMOVE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ZERO,u.ONE_MINUS_SRC_ALPHA);break;case f.MULTIPLY:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA);break;case f.SCREEN:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_COLOR);break;case f.EXCLUSION:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE);break;case f.REPLACE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO);break;case f.SUBTRACT:u.blendEquationSeparate(u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case f.DARKEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case f.LIGHTEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var _=i.default;l.default=_},{"../core/constants":264,"../core/main":275,"./p5.Texture":334,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.join":162,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],324:[function(t,a,l){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(i,f){for(var m=0;m<f.length;m++){var _=f[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.prototype.camera=function(){var i;this._assert3d("camera");for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return o.default._validateParameters("camera",m),(i=this._renderer._curCamera).camera.apply(i,m),this},o.default.prototype.perspective=function(){var i;this._assert3d("perspective");for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return o.default._validateParameters("perspective",m),(i=this._renderer._curCamera).perspective.apply(i,m),this},o.default.prototype.ortho=function(){var i;this._assert3d("ortho");for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return o.default._validateParameters("ortho",m),(i=this._renderer._curCamera).ortho.apply(i,m),this},o.default.prototype.frustum=function(){var i;this._assert3d("frustum");for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];return o.default._validateParameters("frustum",m),(i=this._renderer._curCamera).frustum.apply(i,m),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var i=new o.default.Camera(this._renderer);return i._computeCameraDefaultSettings(),i._setDefaultCamera(),this._renderer._curCamera=i},o.default.Camera=function(){function i(_){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._renderer=_,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix,this.yScale=1}var f,m;return f=i,(m=[{key:"perspective",value:function(y,u,p,g){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),u===void 0&&(u=this.defaultAspectRatio),p===void 0&&(p=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),p<=1e-4&&(p=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),g<p&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=u,this.cameraNear=p,this.cameraFar=g,this.projMatrix=o.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),S=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/u,0,0,0,0,-y*this.yScale,0,0,0,0,(g+p)*S,-1,0,0,2*g*p*S,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(A,j,p,g,y,S){A===void 0&&(A=-this._renderer.width/2),j===void 0&&(j=+this._renderer.width/2),p===void 0&&(p=-this._renderer.height/2),g===void 0&&(g=+this._renderer.height/2),y===void 0&&(y=0),S===void 0&&(S=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=y;var C=j-A,b=g-p,E=(this.cameraFar=S)-y,x=2/C,k=2/b*this.yScale,T=-2/E,j=-(j+A)/C,A=-(g+p)/b,C=-(S+y)/E;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(x,0,0,0,0,-k,0,0,0,0,T,0,j,A,C,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(A,j,p,g,y,S){A===void 0&&(A=.05*-this._renderer.width),j===void 0&&(j=.05*+this._renderer.width),p===void 0&&(p=.05*+this._renderer.height),g===void 0&&(g=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),S===void 0&&(S=this.defaultCameraFar),this.cameraNear=y;var C=j-A,b=g-p,E=(this.cameraFar=S)-y,x=2*y/C,k=2*y/b*this.yScale,T=-2*S*y/E,j=(j+A)/C,A=(g+p)/b,C=-(S+y)/E;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(x,0,0,0,0,-k,0,0,j,A,C,-1,0,0,T,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(x,u,p,g){var y=this.centerX,S=this.centerY,b=this.centerZ,E=(y-=this.eyeX,S-=this.eyeY,b-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),x=(E.rotate(this._renderer._pInst._toRadians(x),u,p,g),[y*E.mat4[0]+S*E.mat4[4]+b*E.mat4[8],y*E.mat4[1]+S*E.mat4[5]+b*E.mat4[9],y*E.mat4[2]+S*E.mat4[6]+b*E.mat4[10]]);x[0]+=this.eyeX,x[1]+=this.eyeY,x[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,x[0],x[1],x[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(_){var u=this._getLocalAxes();this._rotateView(_,u.y[0],u.y[1],u.y[2])}},{key:"tilt",value:function(_){var u=this._getLocalAxes();this._rotateView(_,u.x[0],u.x[1],u.x[2])}},{key:"lookAt",value:function(_,u,p){this.camera(this.eyeX,this.eyeY,this.eyeZ,_,u,p,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(_,u,p,g,y,S,b,E,x){return _===void 0&&(_=this.defaultEyeX,u=this.defaultEyeY,p=this.defaultEyeZ,g=_,y=u,E=1,x=b=S=0),this.eyeX=_,this.eyeY=u,this.eyeZ=p,g!==void 0&&(this.centerX=g,this.centerY=y,this.centerZ=S),b!==void 0&&(this.upX=b,this.upY=E,this.upZ=x),g=this._getLocalAxes(),this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1),y=-_,this.cameraMatrix.translate([y,-u,-p]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(g,y,p){var S=this._getLocalAxes(),g=[S.x[0]*g,S.x[1]*g,S.x[2]*g],y=[S.y[0]*y,S.y[1]*y,S.y[2]*y],S=[S.z[0]*p,S.z[1]*p,S.z[2]*p];this.camera(this.eyeX+g[0]+y[0]+S[0],this.eyeY+g[1]+y[1]+S[1],this.eyeZ+g[2]+y[2]+S[2],this.centerX+g[0]+y[0]+S[0],this.centerY+g[1]+y[1]+S[1],this.centerZ+g[2]+y[2]+S[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(_,u,p){var g=_-this.eyeX,y=u-this.eyeY,S=p-this.eyeZ;this.camera(_,u,p,this.centerX+g,this.centerY+y,this.centerZ+S,this.upX,this.upY,this.upZ)}},{key:"set",value:function(_){for(var u=0,p=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];u<p.length;u++){var g=p[u];this[g]=_[g]}this.cameraMatrix=_.cameraMatrix.copy(),this.projMatrix=_.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(_,u,p){var g,y,S,b,E,x,k,T,j,A,C,I,F,N,z,R,q,M;p===0?this.set(_):p===1?this.set(u):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=_.projMatrix.mat4[0]*Math.pow(u.projMatrix.mat4[0]/_.projMatrix.mat4[0],p),this.projMatrix.mat4[5]=_.projMatrix.mat4[5]*Math.pow(u.projMatrix.mat4[5]/_.projMatrix.mat4[5],p),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),b=new o.default.Vector(_.eyeX,_.eyeY,_.eyeZ),E=new o.default.Vector(u.eyeX,u.eyeY,u.eyeZ),R=new o.default.Vector(_.centerX,_.centerY,_.centerZ),M=new o.default.Vector(u.centerX,u.centerY,u.centerZ),S=o.default.Vector.dist(b,R),g=o.default.Vector.dist(E,M),g=S*Math.pow(g/S,p),S=o.default.Vector.sub(b,E),y=1,1e-6<(q=(N=b.copy().sub(E).sub(R).add(M)).magSq())&&(y=o.default.Vector.dot(S,N)/q,y=Math.max(0,Math.min(y,1))),S=o.default.Vector.lerp(o.default.Vector.lerp(b,R,y),o.default.Vector.lerp(E,M,y),p),N=_.cameraMatrix.createSubMatrix3x3(),q=u.cameraMatrix.createSubMatrix3x3(),b=N.row(2),R=q.row(2),E=N.row(1),M=q.row(1),_=new o.default.Vector,u=new o.default.Vector,x=new o.default.Vector,k=new o.default.Vector,1-(T=.5*((N=(q=q.mult3x3(N.copy().transpose3x3())).diagonal())[0]+N[1]+N[2]-1))<1e-7?(_.set(o.default.Vector.lerp(b,R,p)).normalize(),x.set(_).mult(y*g).add(S),k.set(_).mult((y-1)*g).add(S),u.set(o.default.Vector.lerp(E,M,p)).normalize()):(R=1/(1-T),M=Math.max(N[0],N[1],N[2]),I=q.mat3[1]+q.mat3[3],F=q.mat3[2]+q.mat3[6],z=q.mat3[5]+q.mat3[7],M=M===N[0]?(A=.5*I*(R/=j=Math.sqrt((N[0]-T)*R)),C=.5*F*R,.5*(q.mat3[7]-q.mat3[5])/j):M===N[1]?(C=.5*z*(R/=A=Math.sqrt((N[1]-T)*R)),j=.5*I*R,.5*(q.mat3[2]-q.mat3[6])/A):(j=.5*F*(R/=C=Math.sqrt((N[2]-T)*R)),A=.5*z*R,.5*(q.mat3[3]-q.mat3[1])/C),I=p*Math.atan2(M,T),F=Math.cos(I),N=Math.sin(I),(M=new o.default.Matrix("mat3",[F+(z=1-F)*j*j,z*(R=j*A)+N*C,z*(q=C*j)-N*A,z*R-N*C,F+z*A*A,z*(p=A*C)+N*j,z*q+N*A,z*p-N*j,F+z*C*C])).multiplyVec3(b,_),x.set(_).mult(y*g).add(S),k.set(_).mult((y-1)*g).add(S),M.multiplyVec3(E,u)),this.camera(x.x,x.y,x.z,k.x,k.y,k.z,u.x,u.y,u.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var _=new o.default.Camera(this._renderer);return _.cameraFOV=this.cameraFOV,_.aspectRatio=this.aspectRatio,_.eyeX=this.eyeX,_.eyeY=this.eyeY,_.eyeZ=this.eyeZ,_.centerX=this.centerX,_.centerY=this.centerY,_.centerZ=this.centerZ,_.upX=this.upX,_.upY=this.upY,_.upZ=this.upZ,_.cameraNear=this.cameraNear,_.cameraFar=this.cameraFar,_.cameraType=this.cameraType,_.cameraMatrix=this.cameraMatrix.copy(),_.projMatrix=this.projMatrix.copy(),_.yScale=this.yScale,_}},{key:"_getLocalAxes",value:function(){var _=this.eyeX-this.centerX,u=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,b=Math.sqrt(_*_+u*u+p*p),b=(b!==0&&(_/=b,u/=b,p/=b),this.upX),g=(E=this.upY)*p-(x=this.upZ)*u,y=-b*p+x*_,S=b*u-E*_,b=u*S-p*y,E=-_*S+p*g,x=_*y-u*g,k=Math.sqrt(g*g+y*y+S*S),k=(k!==0&&(g/=k,y/=k,S/=k),Math.sqrt(b*b+E*E+x*x));return k!==0&&(b/=k,E/=k,x/=k),{x:[g,y,S],y:[b,E,x],z:[_,u,p]}}},{key:"_orbit",value:function(_,k,x){var y=this.eyeX-this.centerX,S=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,g=Math.hypot(y,S,b),y=new o.default.Vector(y,S,b).normalize(),S=new o.default.Vector(this.upX,this.upY,this.upZ).normalize(),b=new o.default.Vector.cross(S,y).normalize(),E=new o.default.Vector.cross(b,S),x=((g=(g*=Math.pow(10,x))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,o.default.Vector.dot(y,S))))+k),k=_;(x<=0||x>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),S.mult(Math.cos(x)),E.mult(Math.cos(k)*Math.sin(x)),b.mult(Math.sin(k)*Math.sin(x)),y.set(S).add(E).add(b),this.eyeX=g*y.x+this.centerX,this.eyeY=g*y.y+this.centerY,this.eyeZ=g*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(x,k,j){var y=this.eyeX-this.centerX,S=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,g=Math.hypot(y,S,b),y=new o.default.Vector(y,S,b).normalize(),S=new o.default.Vector(this.upX,this.upY,this.upZ),b=new o.default.Vector.cross(S,y).normalize(),E=new o.default.Vector.cross(y,b),A=Math.atan2(k,x),A=(E.mult(Math.sin(A)),b.mult(Math.cos(A)).add(E),Math.sqrt(x*x+k*k)),E=new o.default.Vector.cross(y,b),x=((g=(g*=Math.pow(10,j))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.cos(A)),k=Math.sin(A),j=S.dot(y),A=S.dot(b),T=j*x+A*k,j=-j*k+A*x,A=S.dot(E);S.x=T*y.x+j*b.x+A*E.x,S.y=T*y.y+j*b.y+A*E.y,S.z=T*y.z+j*b.z+A*E.z,b.mult(-k),y.mult(x).add(b).mult(g),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,S.x,S.y,S.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&c(f.prototype,m),i}(),o.default.prototype.setCamera=function(i){this._renderer._curCamera=i,this._renderer.uPMatrix.set(i.projMatrix.mat4[0],i.projMatrix.mat4[1],i.projMatrix.mat4[2],i.projMatrix.mat4[3],i.projMatrix.mat4[4],i.projMatrix.mat4[5],i.projMatrix.mat4[6],i.projMatrix.mat4[7],i.projMatrix.mat4[8],i.projMatrix.mat4[9],i.projMatrix.mat4[10],i.projMatrix.mat4[11],i.projMatrix.mat4[12],i.projMatrix.mat4[13],i.projMatrix.mat4[14],i.projMatrix.mat4[15])},t=o.default.Camera,l.default=t},{"../core/main":275,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.hypot":170,"core-js/modules/es.string.sub":200}],325:[function(t,a,l){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,i){for(var f=0;f<i.length;f++){var m=i[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}t.default.DataArray=function(){function c(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,_=this,u=c;if(!(_ instanceof u))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(m),this.initialLength=m}var i,f;return i=c,(f=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var m;this.length<this.data.length/2&&(m=1<<Math.ceil(Math.log2(this.length)),(m=new Float32Array(m)).set(this.data.subarray(0,this.length),0),this.data=m)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var m=arguments.length,_=new Array(m),u=0;u<m;u++)_[u]=arguments[u];this.ensureLength(this.length+_.length),this.data.set(_,this.length),this.length+=_.length}},{key:"slice",value:function(m,_){return this.data.slice(m,Math.min(_,this.length))}},{key:"subArray",value:function(m,_){return this.data.subarray(m,Math.min(_,this.length))}},{key:"ensureLength",value:function(m){for(;this.data.length<m;){var _=new Float32Array(2*this.data.length);_.set(this.data,0),this.data=_}}}])&&o(i.prototype,f),c}(),t=t.default.DataArray,l.default=t},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.math.log2":171,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],326:[function(I,a,l){function o(F){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(F)}function c(F){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(N){return o(N)}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":o(N)})(F)}I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.get-own-property-descriptor"),I("core-js/modules/es.object.get-prototype-of"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.reflect.construct"),I("core-js/modules/es.reflect.get"),I("core-js/modules/es.regexp.to-string"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint8-clamped-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.weak-map"),I("core-js/modules/web.dom-collections.iterator"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.get-prototype-of"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint8-clamped-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(C=I("../core/main"))&&C.__esModule?C:{default:C},f=function(F){if(F&&F.__esModule)return F;if(F===null||c(F)!=="object"&&typeof F!="function")return{default:F};var N=u();if(N&&N.has(F))return N.get(F);var z,R={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(z in F){var M;Object.prototype.hasOwnProperty.call(F,z)&&((M=q?Object.getOwnPropertyDescriptor(F,z):null)&&(M.get||M.set)?Object.defineProperty(R,z,M):R[z]=F[z])}return R.default=F,N&&N.set(F,R),R}(I("../core/constants")),m=I("./p5.Texture"),_=I("./p5.RendererGL");function u(){var F;return typeof WeakMap!="function"?null:(F=new WeakMap,u=function(){return F},F)}function p(F,N){return function(z){if(Array.isArray(z))return z}(F)||function(z,R){if(Symbol.iterator in Object(z)||Object.prototype.toString.call(z)==="[object Arguments]"){var q=[],M=!0,D=!1,X=void 0;try{for(var O,G=z[Symbol.iterator]();!(M=(O=G.next()).done)&&(q.push(O.value),!R||q.length!==R);M=!0);}catch(K){D=!0,X=K}finally{try{M||G.return==null||G.return()}finally{if(D)throw X}}return q}}(F,N)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(F,N,z){return N in F?Object.defineProperty(F,N,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[N]=z,F}function y(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")}function S(F,N){for(var z=0;z<N.length;z++){var R=N[z];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(F,R.key,R)}}function b(F,N,z){N&&S(F.prototype,N),z&&S(F,z)}function E(F,N,z){return(E=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(D,q,M){var D=function(X,O){for(;!Object.prototype.hasOwnProperty.call(X,O)&&(X=T(X))!==null;);return X}(D,q);if(D)return(D=Object.getOwnPropertyDescriptor(D,q)).get?D.get.call(M):D.value})(F,N,z||F)}function x(F,N){return(x=Object.setPrototypeOf||function(z,R){return z.__proto__=R,z})(F,N)}function k(F){return function(){var N,z=T(F),z=(N=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(N=T(this).constructor,Reflect.construct(z,arguments,N)):z.apply(this,arguments),this);if(!N||c(N)!=="object"&&typeof N!="function"){if(z!==void 0)return z;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return N}}function T(F){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(F)}var j=function(F){var N=R;if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(F&&F.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),F&&x(N,F);var z=k(R);function R(q){var M;return y(this,R),(M=z.call(this,q.target._renderer)).fbo=q,M.yScale=-1,M}return b(R,[{key:"_computeCameraDefaultSettings",value:function(){E(T(R.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),R}(i.default.Camera),A=(i.default.FramebufferCamera=j,function(){function F(N,z){y(this,F),this.framebuffer=N,this.property=z}return b(F,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),F}()),C=(i.default.FramebufferTexture=A,function(){function F(q){var z=this,R=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},q=(y(this,F),this.target=q,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=R.format||f.UNSIGNED_BYTE,this.channels=R.channels||(q._renderer._pInst._glAttributes.alpha?f.RGBA:f.RGB),this.useDepth=R.depth===void 0||R.depth,this.depthFormat=R.depthFormat||f.FLOAT,this.textureFiltering=R.textureFiltering||f.LINEAR,R.antialias===void 0?this.antialiasSamples=q._renderer._pInst._glAttributes.antialias?2:0:typeof R.antialias=="number"?this.antialiasSamples=R.antialias:this.antialiasSamples=R.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&q.webglVersion!==f.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),R.width&&R.height?(this.width=R.width,this.height=R.height,this.autoSized=!1):(R.width===void 0!=(R.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=q.width,this.height=q.height,this.autoSized=!0),this.density=R.density||q.pixelDensity(),q._renderer.GL);if(this.gl=q,this._checkIfFormatsAvailable(),R.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(R.stencil===void 0||R.stencil),this.framebuffer=q.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=q.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),R=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=R,this.draw(function(){return z.target.clear()})}return b(F,[{key:"resize",value:function(N,z){this.autoSized=!1,this.width=N,this.height=z,this._handleResize()}},{key:"pixelDensity",value:function(N){if(!N)return this.density;this.autoSized=!1,this.density=N,this._handleResize()}},{key:"autoSized",value:function(N){if(N===void 0)return this.autoSized;this.autoSized=N,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var N=this.gl,N=(this.useDepth&&this.target.webglVersion===f.WEBGL&&!N.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===f.WEBGL&&this.depthFormat===f.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=f.UNSIGNED_INT),[f.UNSIGNED_BYTE,f.FLOAT,f.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.useDepth&&![f.UNSIGNED_INT,f.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=f.FLOAT),(0,m.checkWebGLCapabilities)(this.target._renderer));N.float||this.format!==f.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.useDepth&&!N.float&&this.depthFormat===f.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=f.UNSIGNED_INT),N.halfFloat||this.format!==f.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=f.UNSIGNED_BYTE),this.channels===f.RGB&&[f.FLOAT,f.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=f.RGBA)}},{key:"_recreateTextures",value:function(){var N=this.gl,z=(this._updateSize(),N.getParameter(N.TEXTURE_BINDING_2D)),R=N.getParameter(N.FRAMEBUFFER_BINDING),q=N.createTexture();if(!q)throw new Error("Unable to create color texture");N.bindTexture(N.TEXTURE_2D,q);var M=this._glColorFormat();if(N.texImage2D(N.TEXTURE_2D,0,M.internalFormat,this.width*this.density,this.height*this.density,0,M.format,M.type,null),this.colorTexture=q,N.bindFramebuffer(N.FRAMEBUFFER,this.framebuffer),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,q,0),this.useDepth){var q=N.createTexture();if(!q)throw new Error("Unable to create depth texture");var D=this._glDepthFormat();N.bindTexture(N.TEXTURE_2D,q),N.texImage2D(N.TEXTURE_2D,0,D.internalFormat,this.width*this.density,this.height*this.density,0,D.format,D.type,null),N.framebufferTexture2D(N.FRAMEBUFFER,this.useStencil?N.DEPTH_STENCIL_ATTACHMENT:N.DEPTH_ATTACHMENT,N.TEXTURE_2D,q,0),this.depthTexture=q}this.antialias&&(this.colorRenderbuffer=N.createRenderbuffer(),N.bindRenderbuffer(N.RENDERBUFFER,this.colorRenderbuffer),N.renderbufferStorageMultisample(N.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,N.getParameter(N.MAX_SAMPLES))),M.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(D=this._glDepthFormat(),this.depthRenderbuffer=N.createRenderbuffer(),N.bindRenderbuffer(N.RENDERBUFFER,this.depthRenderbuffer),N.renderbufferStorageMultisample(N.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,N.getParameter(N.MAX_SAMPLES))),D.internalFormat,this.width*this.density,this.height*this.density)),N.bindFramebuffer(N.FRAMEBUFFER,this.aaFramebuffer),N.framebufferRenderbuffer(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&N.framebufferRenderbuffer(N.FRAMEBUFFER,this.useStencil?N.DEPTH_STENCIL_ATTACHMENT:N.DEPTH_ATTACHMENT,N.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new A(this,"depthTexture"),q=N.NEAREST,this.depthP5Texture=new i.default.Texture(this.target._renderer,this.depth,{minFilter:q,magFilter:q}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new A(this,"colorTexture"),M=this.textureFiltering===f.LINEAR?N.LINEAR:N.NEAREST,this.colorP5Texture=new i.default.Texture(this.target._renderer,this.color,{minFilter:M,magFilter:M}),this.target._renderer.textures.set(this.color,this.colorP5Texture),N.bindTexture(N.TEXTURE_2D,z),N.bindFramebuffer(N.FRAMEBUFFER,R)}},{key:"_glColorFormat",value:function(){var N,z,R=this.gl,q=this.format===f.FLOAT?R.FLOAT:this.format===f.HALF_FLOAT?this.target.webglVersion===f.WEBGL2?R.HALF_FLOAT:R.getExtension("OES_texture_half_float").HALF_FLOAT_OES:R.UNSIGNED_BYTE,M=this.channels===f.RGBA?R.RGBA:R.RGB;return{internalFormat:this.target.webglVersion===f.WEBGL2?(g(z={},R.FLOAT,g({},R.RGBA,R.RGBA32F)),g(z,R.HALF_FLOAT,g({},R.RGBA,R.RGBA16F)),g(z,R.UNSIGNED_BYTE,(g(N={},R.RGBA,R.RGBA8),g(N,R.RGB,R.RGB8),N)),z[q][M]):this.format===f.HALF_FLOAT?R.RGBA:M,format:M,type:q}}},{key:"_glDepthFormat",value:function(){var R=this.gl,N=this.useStencil?this.depthFormat===f.FLOAT?R.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===f.WEBGL2?R.UNSIGNED_INT_24_8:R.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===f.FLOAT?R.FLOAT:R.UNSIGNED_INT,z=this.useStencil?R.DEPTH_STENCIL:R.DEPTH_COMPONENT,R=this.useStencil?this.depthFormat===f.FLOAT?R.DEPTH32F_STENCIL8:this.target.webglVersion===f.WEBGL2?R.DEPTH24_STENCIL8:R.DEPTH_STENCIL:this.target.webglVersion===f.WEBGL2?this.depthFormat===f.FLOAT?R.DEPTH_COMPONENT32F:R.DEPTH_COMPONENT24:R.DEPTH_COMPONENT;return{internalFormat:R,format:z,type:N}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var q=this.color,N=this.depth,z=this.colorRenderbuffer,R=this.depthRenderbuffer,q=(this._deleteTexture(q),N&&this._deleteTexture(N),this.gl);z&&q.deleteRenderbuffer(z),R&&q.deleteRenderbuffer(R),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var N=new j(this);return N._computeCameraDefaultSettings(),N._setDefaultCamera(),this.target._renderer._curCamera=N}},{key:"_deleteTexture",value:function(N){this.gl.deleteTexture(N.rawTexture()),this.target._renderer.textures.delete(N)}},{key:"remove",value:function(){var N=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),N.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&N.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&N.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&N.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var N=this.gl;N.bindFramebuffer(N.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var N=this.gl,z=(N.bindFramebuffer(N.READ_FRAMEBUFFER,this.aaFramebuffer),N.bindFramebuffer(N.DRAW_FRAMEBUFFER,this.framebuffer),[[N.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&z.push([N.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var R=0,q=z;R<q.length;R++){var D=p(q[R],2),M=D[0],D=D[1];N.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,M,D)}}}},{key:"end",value:function(){var N=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(N.bindFramebuffer(N.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(N){this.begin(),N(),this.end()}},{key:"loadPixels",value:function(){var N=this.gl,z=this.target._renderer.activeFramebuffer(),R=(N.bindFramebuffer(N.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,_.readPixelsWebGL)(this.pixels,N,this.framebuffer,0,0,this.width*this.density,this.height*this.density,R.format,R.type),z?N.bindFramebuffer(N.FRAMEBUFFER,z._framebufferToBind()):N.bindFramebuffer(N.FRAMEBUFFER,null)}},{key:"get",value:function(N,z,R,q){i.default._validateParameters("p5.Framebuffer.get",arguments);var M=this._glColorFormat();if(N===void 0&&z===void 0)z=N=0,R=this.width,q=this.height;else if(R===void 0&&q===void 0)return(N<0||z<0||N>=this.width||z>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),N=this.target.constrain(N,0,this.width-1),z=this.target.constrain(z,0,this.height-1)),(0,_.readPixelWebGL)(this.gl,this.framebuffer,N*this.density,z*this.density,M.format,M.type);N=this.target.constrain(N,0,this.width-1),z=this.target.constrain(z,0,this.height-1),R=this.target.constrain(R,1,this.width-N),q=this.target.constrain(q,1,this.height-z);for(var D=(0,_.readPixelsWebGL)(void 0,this.gl,this.framebuffer,N*this.density,z*this.density,R*this.density,q*this.density,M.format,M.type),X=new Uint8ClampedArray(R*q*this.density*this.density*4),O=(X.fill(255),M.type===this.gl.RGB?3:4),G=0;G<q*this.density;G++)for(var K=0;K<R*this.density;K++)for(var Z=0;Z<4;Z++){var U,V=4*(G*R*this.density+K)+Z;Z<O&&(U=O==4?V:(G*R*this.density+K)*O+Z,X[V]=D[U])}return N=new i.default.Image(R*this.density,q*this.density),N.imageData=N.canvas.getContext("2d").createImageData(N.width,N.height),N.imageData.data.set(X),N.pixels=N.imageData.data,N.updatePixels(),this.density!==1&&N.resize(R,q),N}},{key:"updatePixels",value:function(){var N=this.gl,z=(this.colorP5Texture.bindTexture(),this._glColorFormat()),R=z.format===N.RGBA?4:3,R=this.width*this.height*this.density*this.density*R,q=z.type===N.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof q)||this.pixels.length!==R)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");N.texImage2D(N.TEXTURE_2D,0,z.internalFormat,this.width*this.density,this.height*this.density,0,z.format,z.type,this.pixels),this.colorP5Texture.unbindTexture(),q=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(N.clearDepth(1),N.clear(N.DEPTH_BUFFER_BIT)),this.end()):(N.bindFramebuffer(N.FRAMEBUFFER,this.framebuffer),this.useDepth&&(N.clearDepth(1),N.clear(N.DEPTH_BUFFER_BIT)),q?N.bindFramebuffer(N.FRAMEBUFFER,q._framebufferToBind()):N.bindFramebuffer(N.FRAMEBUFFER,null))}}]),F}()),I=i.default.Framebuffer=C;l.default=I},{"../core/constants":264,"../core/main":275,"./p5.RendererGL":332,"./p5.Texture":334,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.typed-array.uint8-clamped-array":235,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],327:[function(t,a,l){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function c(g){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(p=t("../core/main"))&&p.__esModule?p:{default:p},f=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var y=m();if(y&&y.has(g))return y.get(g);var S,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in g){var x;Object.prototype.hasOwnProperty.call(g,S)&&((x=E?Object.getOwnPropertyDescriptor(g,S):null)&&(x.get||x.set)?Object.defineProperty(b,S,x):b[S]=g[S])}return b.default=g,y&&y.set(g,b),b}(t("../core/constants"));function m(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,m=function(){return g},g)}function _(g){return function(y){if(Array.isArray(y)){for(var S=0,b=new Array(y.length);S<y.length;S++)b[S]=y[S];return b}}(g)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(g,y){for(var S=0;S<y.length;S++){var b=y[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}i.default.Geometry=function(){function g(b,E,x){if(this instanceof g)return this.vertices=[],this.lineVertices=new i.default.DataArray,this.lineTangentsIn=new i.default.DataArray,this.lineTangentsOut=new i.default.DataArray,this.lineSides=new i.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new i.default.DataArray,this.detailX=b!==void 0?b:1,this.detailY=E!==void 0?E:1,this.dirtyFlags={},x instanceof Function&&x.call(this),this;throw new TypeError("Cannot call a class as a function")}var y,S;return y=g,(S=[{key:"reset",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"computeFaces",value:function(){this.faces.length=0;for(var b,E,x,k=this.detailX+1,T=0;T<this.detailY;T++)for(var j=0;j<this.detailX;j++)E=(T+1)*k+j+1,this.faces.push([T*k+j,b=T*k+j+1,x=(T+1)*k+j]),this.faces.push([x,b,E]);return this}},{key:"_getFaceNormal",value:function(E){var E=this.faces[E],x=this.vertices[E[0]],T=this.vertices[E[1]],E=this.vertices[E[2]],T=i.default.Vector.sub(T,x),E=i.default.Vector.sub(E,x),x=i.default.Vector.cross(T,E),k=i.default.Vector.mag(x),T=k/(i.default.Vector.mag(T)*i.default.Vector.mag(E));return T===0||isNaN(T)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),x):(1<T&&(T=1),x.mult(Math.asin(T)/k))}},{key:"computeNormals",value:function(){var b,E=this,x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:f.FLAT,k=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,T=this.vertexNormals,j=this.vertices,A=this.faces;if(x===f.SMOOTH){for(var C={},I=[],F=Math.pow(10,k===void 0?3:k),N=function(D){return Math.round(D*F)/F},z=function(D){return"".concat(N(D.x),",").concat(N(D.y),",").concat(N(D.z))},R=0;R<j.length;R++){var q=j[R],M=z(q);C[M]===void 0&&(C[M]=I.length,I.push(q))}A.forEach(function(D){for(var X=0;X<3;++X){var O=D[X],O=j[O],O=z(O);D[X]=C[O]}}),this.edges.forEach(function(D){for(var X=0;X<2;++X){var O=D[X],O=j[O],O=z(O);D[X]=C[O]}}),this.vertices=j=I}for(b=T.length=0;b<j.length;++b)T.push(new i.default.Vector);for(A.forEach(function(D,X){for(var O=E._getFaceNormal(X),G=0;G<3;++G){var K=D[G];T[K].add(O)}}),b=0;b<j.length;++b)T[b].normalize();return this}},{key:"averageNormals",value:function(){for(var b=0;b<=this.detailY;b++){var E=this.detailX+1,x=i.default.Vector.add(this.vertexNormals[b*E],this.vertexNormals[b*E+this.detailX]),x=i.default.Vector.div(x,2);this.vertexNormals[b*E]=x,this.vertexNormals[b*E+this.detailX]=x}return this}},{key:"averagePoleNormals",value:function(){for(var b=new i.default.Vector(0,0,0),E=0;E<this.detailX;E++)b.add(this.vertexNormals[E]);for(var b=i.default.Vector.div(b,this.detailX),x=0;x<this.detailX;x++)this.vertexNormals[x]=b;b=new i.default.Vector(0,0,0);for(var k=this.vertices.length-1;k>this.vertices.length-1-this.detailX;k--)b.add(this.vertexNormals[k]);b=i.default.Vector.div(b,this.detailX);for(var T=this.vertices.length-1;T>this.vertices.length-1-this.detailX;T--)this.vertexNormals[T]=b;return this}},{key:"_makeTriangleEdges",value:function(){for(var b=this.edges.length=0;b<this.faces.length;b++)this.edges.push([this.faces[b][0],this.faces[b][1]]),this.edges.push([this.faces[b][1],this.faces[b][2]]),this.edges.push([this.faces[b][2],this.faces[b][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var b,E=new Map,x=new Set,k=0;k<this.edges.length;k++){var T,j=this.edges[k-1],A=this.edges[k],C=this.vertices[A[0]],I=this.vertices[A[1]],F=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*A[0],4*(A[0]+1)):[0,0,0,0],N=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*A[1],4*(A[1]+1)):[0,0,0,0],z=I.copy().sub(C).normalize(),R=0<z.magSq();R&&this._addSegment(C,I,F,N,z),0<k&&j[1]===A[0]?x.has(A[0])||(x.add(A[0]),E.delete(A[0]),b&&R&&z.dot(b)<1-1e-8&&this._addJoin(C,b,z,F)):(R&&!x.has(A[0])&&((T=E.get(A[0]))?(this._addJoin(C,T.dir,z,F),E.delete(A[0]),x.add(A[0])):E.set(A[0],{point:C,dir:z.copy().mult(-1),color:F})),b&&!x.has(j[1])&&((T=E.get(j[1]))?(this._addJoin(this.vertices[j[1]],b,T.dir.copy().mult(-1),F),E.delete(j[1]),x.add(j[1])):E.set(j[1],{point:this.vertices[j[1]],dir:b,color:F}),b=void 0)),k!==this.edges.length-1||x.has(A[1])||((C=E.get(A[1]))?(this._addJoin(I,z,C.dir.copy().mult(-1),N),E.delete(A[1]),x.add(A[1])):E.set(A[1],{point:I,dir:z,color:N})),R&&(b=z)}var q=!0,M=!1,D=void 0;try{for(var X,O=E.values()[Symbol.iterator]();!(q=(X=O.next()).done);q=!0){var G=X.value,K=G.point,Z=G.dir,U=G.color;this._addCap(K,Z,U)}}catch(V){M=!0,D=V}finally{try{q||O.return==null||O.return()}finally{if(M)throw D}}return this}},{key:"_addSegment",value:function(j,A,x,k,T){var j=j.array(),A=A.array(),C=T.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var I=0,F=[this.lineTangentsIn,this.lineTangentsOut];I<F.length;I++)for(var N=F[I],z=0;z<6;z++)N.push.apply(N,_(C));return(T=this.lineVertices).push.apply(T,_(j).concat(_(A),_(j),_(A),_(A),_(j))),(T=this.lineVertexColors).push.apply(T,_(x).concat(_(k),_(x),_(k),_(k),_(x))),this}},{key:"_addCap",value:function(b,E,x){for(var k,T=b.array(),j=E.array(),A=[0,0,0],C=0;C<6;C++)(k=this.lineVertices).push.apply(k,_(T)),(k=this.lineTangentsIn).push.apply(k,_(j)),(k=this.lineTangentsOut).push.apply(k,A),(k=this.lineVertexColors).push.apply(k,_(x));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(b,E,x,k){for(var T,j=b.array(),A=E.array(),C=x.array(),I=0;I<12;I++)(T=this.lineVertices).push.apply(T,_(j)),(T=this.lineTangentsIn).push.apply(T,_(A)),(T=this.lineTangentsOut).push.apply(T,_(C)),(T=this.lineVertexColors).push.apply(T,_(k));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var b=this.vertices[0].copy(),E=this.vertices[0].copy(),x=0;x<this.vertices.length;x++)b.x=Math.max(b.x,this.vertices[x].x),E.x=Math.min(E.x,this.vertices[x].x),b.y=Math.max(b.y,this.vertices[x].y),E.y=Math.min(E.y,this.vertices[x].y),b.z=Math.max(b.z,this.vertices[x].z),E.z=Math.min(E.z,this.vertices[x].z);for(var k=i.default.Vector.lerp(b,E,.5),T=i.default.Vector.sub(b,E),j=200/Math.max(Math.max(T.x,T.y),T.z),A=0;A<this.vertices.length;A++)this.vertices[A].sub(k),this.vertices[A].mult(j)}return this}}])&&u(y.prototype,S),g}();var p=i.default.Geometry;l.default=p},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":157,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.for-each":237,"core-js/modules/web.dom-collections.iterator":238}],328:[function(m,a,l){m("core-js/modules/es.array.iterator"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.typed-array.float32-array"),m("core-js/modules/es.typed-array.copy-within"),m("core-js/modules/es.typed-array.every"),m("core-js/modules/es.typed-array.fill"),m("core-js/modules/es.typed-array.filter"),m("core-js/modules/es.typed-array.find"),m("core-js/modules/es.typed-array.find-index"),m("core-js/modules/es.typed-array.for-each"),m("core-js/modules/es.typed-array.includes"),m("core-js/modules/es.typed-array.index-of"),m("core-js/modules/es.typed-array.iterator"),m("core-js/modules/es.typed-array.join"),m("core-js/modules/es.typed-array.last-index-of"),m("core-js/modules/es.typed-array.map"),m("core-js/modules/es.typed-array.reduce"),m("core-js/modules/es.typed-array.reduce-right"),m("core-js/modules/es.typed-array.reverse"),m("core-js/modules/es.typed-array.set"),m("core-js/modules/es.typed-array.slice"),m("core-js/modules/es.typed-array.some"),m("core-js/modules/es.typed-array.sort"),m("core-js/modules/es.typed-array.subarray"),m("core-js/modules/es.typed-array.to-locale-string"),m("core-js/modules/es.typed-array.to-string"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.typed-array.float32-array"),m("core-js/modules/es.typed-array.copy-within"),m("core-js/modules/es.typed-array.every"),m("core-js/modules/es.typed-array.fill"),m("core-js/modules/es.typed-array.filter"),m("core-js/modules/es.typed-array.find"),m("core-js/modules/es.typed-array.find-index"),m("core-js/modules/es.typed-array.for-each"),m("core-js/modules/es.typed-array.includes"),m("core-js/modules/es.typed-array.index-of"),m("core-js/modules/es.typed-array.iterator"),m("core-js/modules/es.typed-array.join"),m("core-js/modules/es.typed-array.last-index-of"),m("core-js/modules/es.typed-array.map"),m("core-js/modules/es.typed-array.reduce"),m("core-js/modules/es.typed-array.reduce-right"),m("core-js/modules/es.typed-array.reverse"),m("core-js/modules/es.typed-array.set"),m("core-js/modules/es.typed-array.slice"),m("core-js/modules/es.typed-array.some"),m("core-js/modules/es.typed-array.sort"),m("core-js/modules/es.typed-array.subarray"),m("core-js/modules/es.typed-array.to-locale-string"),m("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(m=m("../core/main"))&&m.__esModule?m:{default:m};function c(_,u){for(var p=0;p<u.length;p++){var g=u[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(_,g.key,g)}}var i=Array,f=function(_){return Array.isArray(_)},m=(typeof Float32Array<"u"&&(i=Float32Array,f=function(_){return Array.isArray(_)||_ instanceof Float32Array}),o.default.Matrix=function(){function _(){var y=this,S=_;if(y instanceof S)return arguments.length&&((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])instanceof o.default&&(this.p5=(S=arguments.length-1)<0||arguments.length<=S?void 0:arguments[S]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var u,p,g;return u=_,g=[{key:"identity",value:function(y){return new o.default.Matrix(y)}}],(p=[{key:"set",value:function(y){return y instanceof o.default.Matrix?this.mat4=y.mat4:f(y)?this.mat4=y:arguments.length===16&&(this.mat4[0]=y,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new o.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var y;return this.mat3!==void 0?((y=new o.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],y.mat3[1]=this.mat3[1],y.mat3[2]=this.mat3[2],y.mat3[3]=this.mat3[3],y.mat3[4]=this.mat3[4],y.mat3[5]=this.mat3[5],y.mat3[6]=this.mat3[6],y.mat3[7]=this.mat3[7],y.mat3[8]=this.mat3[8]):((y=new o.default.Matrix(this.p5)).mat4[0]=this.mat4[0],y.mat4[1]=this.mat4[1],y.mat4[2]=this.mat4[2],y.mat4[3]=this.mat4[3],y.mat4[4]=this.mat4[4],y.mat4[5]=this.mat4[5],y.mat4[6]=this.mat4[6],y.mat4[7]=this.mat4[7],y.mat4[8]=this.mat4[8],y.mat4[9]=this.mat4[9],y.mat4[10]=this.mat4[10],y.mat4[11]=this.mat4[11],y.mat4[12]=this.mat4[12],y.mat4[13]=this.mat4[13],y.mat4[14]=this.mat4[14],y.mat4[15]=this.mat4[15]),y}},{key:"transpose",value:function(y){var S,b,E,x,k,T;return y instanceof o.default.Matrix?(S=y.mat4[1],b=y.mat4[2],E=y.mat4[3],x=y.mat4[6],k=y.mat4[7],T=y.mat4[11],this.mat4[0]=y.mat4[0],this.mat4[1]=y.mat4[4],this.mat4[2]=y.mat4[8],this.mat4[3]=y.mat4[12],this.mat4[4]=S,this.mat4[5]=y.mat4[5],this.mat4[6]=y.mat4[9],this.mat4[7]=y.mat4[13],this.mat4[8]=b,this.mat4[9]=x,this.mat4[10]=y.mat4[10],this.mat4[11]=y.mat4[14],this.mat4[12]=E,this.mat4[13]=k,this.mat4[14]=T,this.mat4[15]=y.mat4[15]):f(y)&&(S=y[1],b=y[2],E=y[3],x=y[6],k=y[7],T=y[11],this.mat4[0]=y[0],this.mat4[1]=y[4],this.mat4[2]=y[8],this.mat4[3]=y[12],this.mat4[4]=S,this.mat4[5]=y[5],this.mat4[6]=y[9],this.mat4[7]=y[13],this.mat4[8]=b,this.mat4[9]=x,this.mat4[10]=y[10],this.mat4[11]=y[14],this.mat4[12]=E,this.mat4[13]=k,this.mat4[14]=T,this.mat4[15]=y[15]),this}},{key:"invert",value:function(D){D instanceof o.default.Matrix?(S=D.mat4[0],b=D.mat4[1],E=D.mat4[2],x=D.mat4[3],k=D.mat4[4],T=D.mat4[5],j=D.mat4[6],A=D.mat4[7],C=D.mat4[8],I=D.mat4[9],F=D.mat4[10],N=D.mat4[11],z=D.mat4[12],R=D.mat4[13],q=D.mat4[14],M=D.mat4[15]):f(D)&&(S=D[0],b=D[1],E=D[2],x=D[3],k=D[4],T=D[5],j=D[6],A=D[7],C=D[8],I=D[9],F=D[10],N=D[11],z=D[12],R=D[13],q=D[14],M=D[15]);var S,b,E,x,k,T,j,A,C,I,F,N,z,R,q,M,D=S*T-b*k,X=S*j-E*k,O=S*A-x*k,G=b*j-E*T,K=b*A-x*T,Z=E*A-x*j,U=C*R-I*z,V=C*q-F*z,L=C*M-N*z,H=I*q-F*R,J=I*M-N*R,ne=F*M-N*q,se=D*ne-X*J+O*H+G*L-K*V+Z*U;return se?(this.mat4[0]=(T*ne-j*J+A*H)*(se=1/se),this.mat4[1]=(E*J-b*ne-x*H)*se,this.mat4[2]=(R*Z-q*K+M*G)*se,this.mat4[3]=(F*K-I*Z-N*G)*se,this.mat4[4]=(j*L-k*ne-A*V)*se,this.mat4[5]=(S*ne-E*L+x*V)*se,this.mat4[6]=(q*O-z*Z-M*X)*se,this.mat4[7]=(C*Z-F*O+N*X)*se,this.mat4[8]=(k*J-T*L+A*U)*se,this.mat4[9]=(b*L-S*J-x*U)*se,this.mat4[10]=(z*K-R*O+M*D)*se,this.mat4[11]=(I*O-C*K-N*D)*se,this.mat4[12]=(T*V-k*H-j*U)*se,this.mat4[13]=(S*H-b*V+E*U)*se,this.mat4[14]=(R*X-z*G-q*D)*se,this.mat4[15]=(C*G-I*X+F*D)*se,this):null}},{key:"invert3x3",value:function(){var y=this.mat3[0],S=this.mat3[1],b=this.mat3[2],E=this.mat3[3],x=this.mat3[4],k=this.mat3[5],T=this.mat3[6],j=this.mat3[7],A=this.mat3[8],C=A*x-k*j,I=-A*E+k*T,F=j*E-x*T,N=y*C+S*I+b*F;return N?(this.mat3[0]=C*(N=1/N),this.mat3[1]=(-A*S+b*j)*N,this.mat3[2]=(k*S-b*x)*N,this.mat3[3]=I*N,this.mat3[4]=(A*y-b*T)*N,this.mat3[5]=(-k*y+b*E)*N,this.mat3[6]=F*N,this.mat3[7]=(-j*y+S*T)*N,this.mat3[8]=(x*y-S*E)*N,this):null}},{key:"transpose3x3",value:function(y){var S=(y=y===void 0?this.mat3:y)[1],b=y[2],E=y[5];return this.mat3[0]=y[0],this.mat3[1]=y[3],this.mat3[2]=y[6],this.mat3[3]=S,this.mat3[4]=y[4],this.mat3[5]=y[7],this.mat3[6]=b,this.mat3[7]=E,this.mat3[8]=y[8],this}},{key:"inverseTranspose",value:function(y){if(y=y.mat4,this.mat3===void 0?o.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=y[0],this.mat3[1]=y[1],this.mat3[2]=y[2],this.mat3[3]=y[4],this.mat3[4]=y[5],this.mat3[5]=y[6],this.mat3[6]=y[8],this.mat3[7]=y[9],this.mat3[8]=y[10]),y=this.invert3x3(),y)y.transpose3x3(this.mat3);else for(var S=0;S<9;S++)this.mat3[S]=0;return this}},{key:"determinant",value:function(){var y=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],S=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],E=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],x=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],k=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],T=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],j=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],A=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],C=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],I=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return y*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-S*I+b*C+E*A-x*j+k*T}},{key:"mult",value:function(b){var S;if(b===this||b===this.mat4)S=this.copy().mat4;else if(b instanceof o.default.Matrix)S=b.mat4;else if(f(b))S=b;else{if(arguments.length!==16)return;S=arguments}var b=this.mat4[0],E=this.mat4[1],x=this.mat4[2],k=this.mat4[3];return this.mat4[0]=b*S[0]+E*S[4]+x*S[8]+k*S[12],this.mat4[1]=b*S[1]+E*S[5]+x*S[9]+k*S[13],this.mat4[2]=b*S[2]+E*S[6]+x*S[10]+k*S[14],this.mat4[3]=b*S[3]+E*S[7]+x*S[11]+k*S[15],b=this.mat4[4],E=this.mat4[5],x=this.mat4[6],k=this.mat4[7],this.mat4[4]=b*S[0]+E*S[4]+x*S[8]+k*S[12],this.mat4[5]=b*S[1]+E*S[5]+x*S[9]+k*S[13],this.mat4[6]=b*S[2]+E*S[6]+x*S[10]+k*S[14],this.mat4[7]=b*S[3]+E*S[7]+x*S[11]+k*S[15],b=this.mat4[8],E=this.mat4[9],x=this.mat4[10],k=this.mat4[11],this.mat4[8]=b*S[0]+E*S[4]+x*S[8]+k*S[12],this.mat4[9]=b*S[1]+E*S[5]+x*S[9]+k*S[13],this.mat4[10]=b*S[2]+E*S[6]+x*S[10]+k*S[14],this.mat4[11]=b*S[3]+E*S[7]+x*S[11]+k*S[15],b=this.mat4[12],E=this.mat4[13],x=this.mat4[14],k=this.mat4[15],this.mat4[12]=b*S[0]+E*S[4]+x*S[8]+k*S[12],this.mat4[13]=b*S[1]+E*S[5]+x*S[9]+k*S[13],this.mat4[14]=b*S[2]+E*S[6]+x*S[10]+k*S[14],this.mat4[15]=b*S[3]+E*S[7]+x*S[11]+k*S[15],this}},{key:"apply",value:function(b){var S;if(b===this||b===this.mat4)S=this.copy().mat4;else if(b instanceof o.default.Matrix)S=b.mat4;else if(f(b))S=b;else{if(arguments.length!==16)return;S=arguments}var b=this.mat4,E=b[0],x=b[4],k=b[8],T=b[12],E=(b[0]=S[0]*E+S[1]*x+S[2]*k+S[3]*T,b[4]=S[4]*E+S[5]*x+S[6]*k+S[7]*T,b[8]=S[8]*E+S[9]*x+S[10]*k+S[11]*T,b[12]=S[12]*E+S[13]*x+S[14]*k+S[15]*T,b[1]),x=b[5],k=b[9],T=b[13],E=(b[1]=S[0]*E+S[1]*x+S[2]*k+S[3]*T,b[5]=S[4]*E+S[5]*x+S[6]*k+S[7]*T,b[9]=S[8]*E+S[9]*x+S[10]*k+S[11]*T,b[13]=S[12]*E+S[13]*x+S[14]*k+S[15]*T,b[2]),x=b[6],k=b[10],T=b[14],E=(b[2]=S[0]*E+S[1]*x+S[2]*k+S[3]*T,b[6]=S[4]*E+S[5]*x+S[6]*k+S[7]*T,b[10]=S[8]*E+S[9]*x+S[10]*k+S[11]*T,b[14]=S[12]*E+S[13]*x+S[14]*k+S[15]*T,b[3]),x=b[7],k=b[11],T=b[15];return b[3]=S[0]*E+S[1]*x+S[2]*k+S[3]*T,b[7]=S[4]*E+S[5]*x+S[6]*k+S[7]*T,b[11]=S[8]*E+S[9]*x+S[10]*k+S[11]*T,b[15]=S[12]*E+S[13]*x+S[14]*k+S[15]*T,this}},{key:"scale",value:function(y,S,b){return y instanceof o.default.Vector?(S=y.y,b=y.z,y=y.x):y instanceof Array&&(S=y[1],b=y[2],y=y[0]),this.mat4[0]*=y,this.mat4[1]*=y,this.mat4[2]*=y,this.mat4[3]*=y,this.mat4[4]*=S,this.mat4[5]*=S,this.mat4[6]*=S,this.mat4[7]*=S,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(D,J,H,E){J instanceof o.default.Vector?(H=J.y,E=J.z,J=J.x):J instanceof Array&&(H=J[1],E=J[2],J=J[0]);var x=Math.sqrt(J*J+H*H+E*E),x=(J*=1/x,H*=1/x,E*=1/x,this.mat4[0]),k=this.mat4[1],T=this.mat4[2],j=this.mat4[3],A=this.mat4[4],C=this.mat4[5],I=this.mat4[6],F=this.mat4[7],N=this.mat4[8],z=this.mat4[9],R=this.mat4[10],q=this.mat4[11],M=Math.sin(D),D=Math.cos(D),X=1-D,O=J*J*X+D,G=H*J*X+E*M,K=E*J*X-H*M,Z=J*H*X-E*M,U=H*H*X+D,V=E*H*X+J*M,L=J*E*X+H*M,H=H*E*X-J*M,J=E*E*X+D;return this.mat4[0]=x*O+A*G+N*K,this.mat4[1]=k*O+C*G+z*K,this.mat4[2]=T*O+I*G+R*K,this.mat4[3]=j*O+F*G+q*K,this.mat4[4]=x*Z+A*U+N*V,this.mat4[5]=k*Z+C*U+z*V,this.mat4[6]=T*Z+I*U+R*V,this.mat4[7]=j*Z+F*U+q*V,this.mat4[8]=x*L+A*H+N*J,this.mat4[9]=k*L+C*H+z*J,this.mat4[10]=T*L+I*H+R*J,this.mat4[11]=j*L+F*H+q*J,this}},{key:"translate",value:function(E){var S=E[0],b=E[1],E=E[2]||0;this.mat4[12]+=this.mat4[0]*S+this.mat4[4]*b+this.mat4[8]*E,this.mat4[13]+=this.mat4[1]*S+this.mat4[5]*b+this.mat4[9]*E,this.mat4[14]+=this.mat4[2]*S+this.mat4[6]*b+this.mat4[10]*E,this.mat4[15]+=this.mat4[3]*S+this.mat4[7]*b+this.mat4[11]*E}},{key:"rotateX",value:function(y){this.rotate(y,1,0,0)}},{key:"rotateY",value:function(y){this.rotate(y,0,1,0)}},{key:"rotateZ",value:function(y){this.rotate(y,0,0,1)}},{key:"perspective",value:function(x,S,b,E){var x=1/Math.tan(x/2),k=1/(b-E);return this.mat4[0]=x/S,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=x,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(E+b)*k,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*E*b*k,this.mat4[15]=0,this}},{key:"ortho",value:function(y,S,b,E,x,k){var T=1/(y-S),j=1/(b-E),A=1/(x-k);return this.mat4[0]=-2*T,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*j,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*A,this.mat4[11]=0,this.mat4[12]=(y+S)*T,this.mat4[13]=(E+b)*j,this.mat4[14]=(k+x)*A,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(y,S,b,E){var x=new Array(4),k=this.mat4;return x[0]=k[0]*y+k[4]*S+k[8]*b+k[12]*E,x[1]=k[1]*y+k[5]*S+k[9]*b+k[13]*E,x[2]=k[2]*y+k[6]*S+k[10]*b+k[14]*E,x[3]=k[3]*y+k[7]*S+k[11]*b+k[15]*E,x}},{key:"multiplyPoint",value:function(b){var E=b.x,S=b.y,b=b.z,E=this.multiplyVec4(E,S,b,1);return new o.default.Vector(E[0],E[1],E[2])}},{key:"multiplyAndNormalizePoint",value:function(b){var E=b.x,S=b.y,b=b.z,E=this.multiplyVec4(E,S,b,1);return E[0]/=E[3],E[1]/=E[3],E[2]/=E[3],new o.default.Vector(E[0],E[1],E[2])}},{key:"multiplyDirection",value:function(b){var E=b.x,S=b.y,b=b.z,E=this.multiplyVec4(E,S,b,0);return new o.default.Vector(E[0],E[1],E[2])}},{key:"mult3x3",value:function(b){var S;if(b===this||b===this.mat3)S=this.copy().mat3;else if(b instanceof o.default.Matrix)S=b.mat3;else if(f(b))S=b;else{if(arguments.length!==9)return;S=arguments}var b=this.mat3[0],E=this.mat3[1],x=this.mat3[2];return this.mat3[0]=b*S[0]+E*S[3]+x*S[6],this.mat3[1]=b*S[1]+E*S[4]+x*S[7],this.mat3[2]=b*S[2]+E*S[5]+x*S[8],b=this.mat3[3],E=this.mat3[4],x=this.mat3[5],this.mat3[3]=b*S[0]+E*S[3]+x*S[6],this.mat3[4]=b*S[1]+E*S[4]+x*S[7],this.mat3[5]=b*S[2]+E*S[5]+x*S[8],b=this.mat3[6],E=this.mat3[7],x=this.mat3[8],this.mat3[6]=b*S[0]+E*S[3]+x*S[6],this.mat3[7]=b*S[1]+E*S[4]+x*S[7],this.mat3[8]=b*S[2]+E*S[5]+x*S[8],this}},{key:"column",value:function(y){return new o.default.Vector(this.mat3[3*y],this.mat3[3*y+1],this.mat3[3*y+2])}},{key:"row",value:function(y){return new o.default.Vector(this.mat3[y],this.mat3[y+3],this.mat3[y+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(y,S){return(S=S===void 0?y.copy():S).x=this.row(0).dot(y),S.y=this.row(1).dot(y),S.z=this.row(2).dot(y),S}},{key:"createSubMatrix3x3",value:function(){var y=new o.default.Matrix("mat3");return y.mat3[0]=this.mat4[0],y.mat3[1]=this.mat4[1],y.mat3[2]=this.mat4[2],y.mat3[3]=this.mat4[4],y.mat3[4]=this.mat4[5],y.mat3[5]=this.mat4[6],y.mat3[6]=this.mat4[8],y.mat3[7]=this.mat4[9],y.mat3[8]=this.mat4[10],y}}])&&c(u.prototype,p),g&&c(u,g),_}(),o.default.Matrix);l.default=m},{"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.to-string":182,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231}],329:[function(t,a,l){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function o(c,i){for(var f=0;f<i.length;f++){var m=i[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}t.default.RenderBuffer=function(){function c(m,_,u,p,g,y){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.size=m,this.src=_,this.dst=u,this.attr=p,this._renderer=g,this.map=y}var i,f;return i=c,(f=[{key:"_prepareBuffer",value:function(m,_){var u,p,g,b=_.attributes,y=this._renderer.GL,S=m.model||m,b=b[this.attr];b&&(u=m[this.dst],0<(p=S[this.src]).length?((g=!u)&&(m[this.dst]=u=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,u),!g&&S.dirtyFlags[this.src]===!1||(g=(m=this.map)?m(p):p,this._renderer._bindBuffer(u,y.ARRAY_BUFFER,g),S.dirtyFlags[this.src]=!1),_.enableAttrib(b,this.size)):(m=b.location)!==-1&&this._renderer.registerEnabled.has(m)&&(y.disableVertexAttribArray(m),this._renderer.registerEnabled.delete(m)))}}])&&o(i.prototype,f),c}(),t=t.default.RenderBuffer,l.default=t},{"../core/main":275,"core-js/modules/es.array.map":164}],330:[function(t,a,l){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function c(g){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(p=t("../core/main"))&&p.__esModule?p:{default:p},f=function(g){if(g&&g.__esModule)return g;if(g===null||c(g)!=="object"&&typeof g!="function")return{default:g};var y=m();if(y&&y.has(g))return y.get(g);var S,b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in g){var x;Object.prototype.hasOwnProperty.call(g,S)&&((x=E?Object.getOwnPropertyDescriptor(g,S):null)&&(x.get||x.set)?Object.defineProperty(b,S,x):b[S]=g[S])}return b.default=g,y&&y.set(g,b),b}(t("../core/constants"));function m(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,m=function(){return g},g)}function _(g){return function(y){if(Array.isArray(y)){for(var S=0,b=new Array(y.length);S<y.length;S++)b[S]=y[S];return b}}(g)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(g){return this.immediateMode.shapeMode=g!==void 0?g:f.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var u={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},p=(i.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==f.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},i.default.RendererGL.prototype.vertex=function(g,y){if(this.immediateMode.shapeMode===f.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var S in u){var b=u[S],S=this.immediateMode.geometry[S];S.push.apply(S,_(S.slice(S.length-3*b,S.length-2*b)).concat(_(S.slice(S.length-b,S.length))))}var E,x,k=E=x=0,T=(arguments.length===3?k=arguments[2]:arguments.length===4?(E=arguments[2],x=arguments[3]):arguments.length===5&&(k=arguments[2],E=arguments[3],x=arguments[4]),new i.default.Vector(g,y,k)),T=(this.immediateMode.geometry.vertices.push(T),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),T=(this.immediateMode.geometry.vertexColors.push(T[0],T[1],T[2],T[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(T[0],T[1],T[2],T[3]),this.textureMode!==f.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(E/=this._tex.width,x/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(E,x),this.immediateMode._bezierVertex[0]=g,this.immediateMode._bezierVertex[1]=y,this.immediateMode._bezierVertex[2]=k,this.immediateMode._quadraticVertex[0]=g,this.immediateMode._quadraticVertex[1]=y,this.immediateMode._quadraticVertex[2]=k,this},i.default.RendererGL.prototype.normal=function(g,y,S){return g instanceof i.default.Vector?this._currentNormal=g:this._currentNormal=new i.default.Vector(g,y,S),this},i.default.RendererGL.prototype.endShape=function(g,y,S,b,E,x){var k=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===f.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===f.TESS&&(this.immediateMode.shapeMode,f.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this.immediateMode.shapeMode!==f.LINE_STRIP&&this.immediateMode.shapeMode!==f.LINES||(this.immediateMode.shapeMode=f.TRIANGLE_FAN),this.immediateMode.shapeMode===f.QUADS?this.immediateMode.shapeMode=f.TRIANGLES:this.immediateMode.shapeMode===f.QUAD_STRIP&&(this.immediateMode.shapeMode=f.TRIANGLE_STRIP),this._doFill&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(k),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(g){var y;this.immediateMode.geometry.vertices.length!==0&&(y=this._doStroke,g=g===f.CLOSE,y&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,g),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),y=this.immediateMode.shapeMode===f.TESS,g=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||y||g)&&this.immediateMode.shapeMode!==f.LINES&&this._tesselateShape())},i.default.RendererGL.prototype._calculateEdges=function(g,y,S){var b=[],E=0,x=this.immediateMode.contourIndices.slice(),k=0;switch(g){case f.TRIANGLE_STRIP:for(E=0;E<y.length-2;E++)b.push([E,E+1]),b.push([E,E+2]);b.push([E,E+1]);break;case f.TRIANGLE_FAN:for(E=1;E<y.length-1;E++)b.push([0,E]),b.push([E,E+1]);b.push([0,y.length-1]);break;case f.TRIANGLES:for(E=0;E<y.length-2;E+=3)b.push([E,E+1]),b.push([E+1,E+2]),b.push([E+2,E]);break;case f.LINES:for(E=0;E<y.length-1;E+=2)b.push([E,E+1]);break;case f.QUADS:for(E=0;E<y.length-5;E+=6)b.push([E,E+1]),b.push([E+1,E+2]),b.push([E+3,E+5]),b.push([E+4,E+5]);break;case f.QUAD_STRIP:for(E=0;E<y.length-2;E+=2)b.push([E,E+1]),b.push([E,E+2]),b.push([E+1,E+3]);b.push([E,E+1]);break;default:for(E=0;E<y.length;E++)E+1<y.length&&E+1!==x[0]?b.push([E,E+1]):((S||k)&&b.push([E,k]),0<x.length&&(k=x.shift()))}return g!==f.TESS&&S&&b.push([y.length-1,0]),b},i.default.RendererGL.prototype._tesselateShape=function(){for(var g=this,y=(this.immediateMode.shapeMode=f.TRIANGLES,[[]]),S=0;S<this.immediateMode.geometry.vertices.length;S++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===S&&(this.immediateMode.contourIndices.shift(),y.push([])),y[y.length-1].push(this.immediateMode.geometry.vertices[S].x,this.immediateMode.geometry.vertices[S].y,this.immediateMode.geometry.vertices[S].z,this.immediateMode.geometry.uvs[2*S],this.immediateMode.geometry.uvs[2*S+1],this.immediateMode.geometry.vertexColors[4*S],this.immediateMode.geometry.vertexColors[4*S+1],this.immediateMode.geometry.vertexColors[4*S+2],this.immediateMode.geometry.vertexColors[4*S+3],this.immediateMode.geometry.vertexNormals[S].x,this.immediateMode.geometry.vertexNormals[S].y,this.immediateMode.geometry.vertexNormals[S].z);for(var b,E=this._triangulate(y),x=this.immediateMode.geometry.vertices,k=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),T=0,j=E.length;T<j;T+=i.default.RendererGL.prototype.tessyVertexSize)k.push.apply(k,_(E.slice(T+5,T+9))),this.normal.apply(this,_(E.slice(T+9,T+12))),this.vertex.apply(this,_(E.slice(T,T+5)));this.geometryBuilder&&(b=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(A){return A.map(function(C){if(!b.has(C)){var I=x[C],F=g.immediateMode.geometry.vertices.findIndex(function(X){return I.x===X.x&&I.y===X.y&&I.z===X.z});if(F===-1){for(var N=1/0,z=0,R=0;R<g.immediateMode.geometry.vertices.length;R++){var M=g.immediateMode.geometry.vertices[R],D=I.x-M.x,q=I.y-M.y,M=I.z-M.z,D=D*D+q*q+M*M;D<N&&(N=D,z=R)}F=z}b.set(C,F)}return b.get(C)})})),this.immediateMode.geometry.vertexColors=k},i.default.RendererGL.prototype._drawImmediateFill=function(){var g,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,S=this.GL,b=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,g=this._getImmediateFillShader(),this._setFillUniforms(g),!0),E=!1,x=void 0;try{for(var k,T=this.immediateMode.buffers.fill[Symbol.iterator]();!(b=(k=T.next()).done);b=!0)k.value._prepareBuffer(this.immediateMode.geometry,g)}catch(j){E=!0,x=j}finally{try{b||T.return==null||T.return()}finally{if(E)throw x}}if(g.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor),y===1)S.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{S.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,y)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}g.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var g=this.GL,y=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),S=(this._setStrokeUniforms(y),!0),b=!1,E=void 0;try{for(var x,k=this.immediateMode.buffers.stroke[Symbol.iterator]();!(S=(x=k.next()).done);S=!0)x.value._prepareBuffer(this.immediateMode.geometry,y)}catch(T){b=!0,E=T}finally{try{S||k.return==null||k.return()}finally{if(b)throw E}}y.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),g.drawArrays(g.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),y.unbindShader()},i.default.RendererGL);l.default=p},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.find-index":156,"core-js/modules/es.array.from":158,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.map":164,"core-js/modules/es.array.slice":165,"core-js/modules/es.map":169,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],331:[function(t,a,l){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function c(u){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=(_=t("../core/main"))&&_.__esModule?_:{default:_},f=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(u){if(u&&u.__esModule)return u;if(u===null||c(u)!=="object"&&typeof u!="function")return{default:u};var p=m();if(p&&p.has(u))return p.get(u);var g,y={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var b;Object.prototype.hasOwnProperty.call(u,g)&&((b=S?Object.getOwnPropertyDescriptor(u,g):null)&&(b.get||b.set)?Object.defineProperty(y,g,b):y[g]=u[g])}return y.default=u,p&&p.set(u,y),y}(t("../core/constants")));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}i.default.RendererGL.prototype.freeGeometry=function(u){u.gid?this._freeBuffers(u.gid):console.warn("The model you passed to freeGeometry does not have an id!")},i.default.RendererGL.prototype._initBufferDefaults=function(u){var p;return this._freeBuffers(u),1e3<Object.keys(this.retainedMode.geometry).length&&(p=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(p)),this.retainedMode.geometry[u]={}},i.default.RendererGL.prototype._freeBuffers=function(u){var p,g=this.retainedMode.geometry[u];function y(S){var b=!0,E=!1,x=void 0;try{for(var k,T=S[Symbol.iterator]();!(b=(k=T.next()).done);b=!0){var j=k.value;g[j.dst]&&(p.deleteBuffer(g[j.dst]),g[j.dst]=null)}}catch(A){E=!0,x=A}finally{try{b||T.return==null||T.return()}finally{if(E)throw x}}}g&&(delete this.retainedMode.geometry[u],p=this.GL,g.indexBuffer&&p.deleteBuffer(g.indexBuffer),y(this.retainedMode.buffers.stroke),y(this.retainedMode.buffers.fill))},i.default.RendererGL.prototype.createBuffers=function(E,p){var g,y,S,b=this.GL,E=this._initBufferDefaults(E),x=(E.model=p,E.indexBuffer);return p.faces.length?(x=x||(E.indexBuffer=b.createBuffer()),S=(y=(g=i.default.RendererGL.prototype._flatten(p.faces)).some(function(k){return 65535<k}))?Uint32Array:Uint16Array,this._bindBuffer(x,b.ELEMENT_ARRAY_BUFFER,g,S),E.indexBufferType=y?b.UNSIGNED_INT:b.UNSIGNED_SHORT,E.vertexCount=3*p.faces.length):(x&&(b.deleteBuffer(x),E.indexBuffer=null),E.vertexCount=p.vertices?p.vertices.length:0),E.lineVertexCount=p.lineVertices?p.lineVertices.length/3:0,E},i.default.RendererGL.prototype.drawBuffers=function(u){var p=this.GL,g=this.retainedMode.geometry[u];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[u].vertexCount){this._useVertexColor=0<g.model.vertexColors.length;var y=this._getRetainedFillShader(),S=(this._setFillUniforms(y),!0),b=!1,E=void 0;try{for(var x,k=this.retainedMode.buffers.fill[Symbol.iterator]();!(S=(x=k.next()).done);S=!0)x.value._prepareBuffer(g,y)}catch(I){b=!0,E=I}finally{try{S||k.return==null||k.return()}finally{if(b)throw E}}y.disableRemainingAttributes(),g.indexBuffer&&this._bindBuffer(g.indexBuffer,p.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(p.TRIANGLES,u),y.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<g.lineVertexCount){this._useLineColor=0<g.model.vertexStrokeColors.length;var T=this._getRetainedStrokeShader(),j=(this._setStrokeUniforms(T),!0),b=!1,E=void 0;try{for(var A,C=this.retainedMode.buffers.stroke[Symbol.iterator]();!(j=(A=C.next()).done);j=!0)A.value._prepareBuffer(g,T)}catch(N){b=!0,E=N}finally{try{j||C.return==null||C.return()}finally{if(b)throw E}}T.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor),this._drawArrays(p.TRIANGLES,u),T.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(g),this},i.default.RendererGL.prototype.drawBuffersScaled=function(u,p,g,y){var S=this.uMVMatrix.copy();try{this.uMVMatrix.scale(p,g,y),this.drawBuffers(u)}finally{this.uMVMatrix=S}},i.default.RendererGL.prototype._drawArrays=function(u,p){return this.GL.drawArrays(u,0,this.retainedMode.geometry[p].lineVertexCount),this},i.default.RendererGL.prototype._drawElements=function(u,g){var g=this.retainedMode.geometry[g],y=this.GL;if(g.indexBuffer){if(this._pInst.webglVersion!==f.WEBGL2&&g.indexBufferType===y.UNSIGNED_INT&&!y.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");y.drawElements(y.TRIANGLES,g.vertexCount,g.indexBufferType,0)}else y.drawArrays(u||y.TRIANGLES,0,g.vertexCount)},i.default.RendererGL.prototype._drawPoints=function(u,p){var g=this.GL,y=this._getImmediatePointShader();this._setPointUniforms(y),this._bindBuffer(p,g.ARRAY_BUFFER,this._vToNArray(u),Float32Array,g.STATIC_DRAW),y.enableAttrib(y.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),g.drawArrays(g.Points,0,u.length),y.unbindShader()};var _=i.default.RendererGL;l.default=_},{"../core/constants":264,"../core/main":275,"./p5.RenderBuffer":329,"./p5.RendererGL":332,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.some":166,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],332:[function(R,a,l){function o(O){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(O)}function c(O){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(G){return o(G)}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":o(G)})(O)}R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.concat"),R("core-js/modules/es.array.copy-within"),R("core-js/modules/es.array.every"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.from"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.array.slice"),R("core-js/modules/es.array.some"),R("core-js/modules/es.map"),R("core-js/modules/es.object.assign"),R("core-js/modules/es.object.get-own-property-descriptor"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.reflect.construct"),R("core-js/modules/es.reflect.get"),R("core-js/modules/es.regexp.to-string"),R("core-js/modules/es.set"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.float64-array"),R("core-js/modules/es.typed-array.int16-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint16-array"),R("core-js/modules/es.typed-array.uint32-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/es.weak-map"),R("core-js/modules/web.dom-collections.iterator"),R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.concat"),R("core-js/modules/es.array.copy-within"),R("core-js/modules/es.array.every"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.from"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.array.slice"),R("core-js/modules/es.array.some"),R("core-js/modules/es.map"),R("core-js/modules/es.object.assign"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.set"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.float64-array"),R("core-js/modules/es.typed-array.int16-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint16-array"),R("core-js/modules/es.typed-array.uint32-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.readPixelsWebGL=D,l.readPixelWebGL=X,l.default=void 0;var i=g(R("../core/main")),f=function(O){if(O&&O.__esModule)return O;if(O===null||c(O)!=="object"&&typeof O!="function")return{default:O};var G=p();if(G&&G.has(O))return G.get(O);var K,Z={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(K in O){var V;Object.prototype.hasOwnProperty.call(O,K)&&((V=U?Object.getOwnPropertyDescriptor(O,K):null)&&(V.get||V.set)?Object.defineProperty(Z,K,V):Z[K]=O[K])}return Z.default=O,G&&G.set(O,Z),Z}(R("../core/constants")),m=g(R("./GeometryBuilder")),_=g(R("libtess")),u=(R("./p5.Shader"),R("./p5.Camera"),R("../core/p5.Renderer"),R("./p5.Matrix"),R("./p5.Framebuffer"),R("path"),R("./p5.Texture"));function p(){var O;return typeof WeakMap!="function"?null:(O=new WeakMap,p=function(){return O},O)}function g(O){return O&&O.__esModule?O:{default:O}}function y(O){return function(G){if(Array.isArray(G)){for(var K=0,Z=new Array(G.length);K<G.length;K++)Z[K]=G[K];return Z}}(O)||function(G){if(Symbol.iterator in Object(G)||Object.prototype.toString.call(G)==="[object Arguments]")return Array.from(G)}(O)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(O,G){for(var K=0;K<G.length;K++){var Z=G[K];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(O,Z.key,Z)}}function b(O,G,K){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(L,U,V){var L=function(H,J){for(;!Object.prototype.hasOwnProperty.call(H,J)&&(H=T(H))!==null;);return H}(L,U);if(L)return(L=Object.getOwnPropertyDescriptor(L,U)).get?L.get.call(V):L.value})(O,G,K||O)}function E(O,G){return(E=Object.setPrototypeOf||function(K,Z){return K.__proto__=Z,K})(O,G)}function x(O){return function(){var G,K,Z=T(O);return G=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(G=T(this).constructor,Reflect.construct(Z,arguments,G)):Z.apply(this,arguments),Z=this,!(K=G)||c(K)!=="object"&&typeof K!="function"?k(Z):K}}function k(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function T(O){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)})(O)}function j(O,G,K){G in O?Object.defineProperty(O,G,{value:K,enumerable:!0,configurable:!0,writable:!0}):O[G]=K}function A(O,G){z+="#define STROKE_CAP_".concat(O," ").concat(G,`
`),F[f[O]]=G}function C(O,G){z+="#define STROKE_JOIN_".concat(O," ").concat(G,`
`),N[f[O]]=G}var I,F={},N={},z="",R=(A("ROUND",0),A("PROJECT",1),A("SQUARE",2),C("ROUND",0),C("MITER",1),C("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return smoothstep(vec3(0.0), vec3(0.8), texture.xyz);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal);
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return pow(outColor.xyz, vec3(10.0));
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),q={immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:R+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:R+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:z+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:z+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.025;
	float nrSamples = 0.0;
  
	for(float phi = 0.0; phi < 2.0 * PI; phi += sampleDelta)
	{
    for(float theta = 0.0; theta < ( 0.5 ) * PI; theta += sampleDelta)
    {
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 1024; // 4096\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
	if (n > 0)\r
	{\r
  	denom = mod(float(n), 2.0);\r
  	result += denom * invBase;\r
  	invBase = invBase / 2.0;\r
  	n = int(float(n) / 2.0);\r
	}\r
  }\r
\r
  return result;\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`};for(I in q)q[I]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+q[I];j(R={},f.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),j(R,f.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),j(R,f.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),j(R,f.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),j(R,f.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),j(R,f.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),j(R,f.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),j(R,f.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var M=R;function D(O,G,fe,Z,U,V,L,H,J,ne){var se=G.getParameter(G.FRAMEBUFFER_BINDING),fe=(G.bindFramebuffer(G.FRAMEBUFFER,fe),H===G.RGBA?4:3),xe=V*L*fe,he=J===G.UNSIGNED_BYTE?Uint8Array:Float32Array;if(O instanceof he&&O.length===xe||(O=new he(xe)),G.readPixels(Z,ne?ne-U-L:U,V,L,H,J,O),G.bindFramebuffer(G.FRAMEBUFFER,se),ne)for(var _e=Math.floor(L/2),ye=new he(V*fe),ue=0;ue<_e;ue++){var pe=ue*V*4,ke=(L-ue-1)*V*4;ye.set(O.subarray(pe,pe+4*V)),O.copyWithin(pe,ke,ke+4*V),O.set(ye,ke)}return O}function X(O,J,K,Z,U,V,L){var H=O.getParameter(O.FRAMEBUFFER_BINDING),J=(O.bindFramebuffer(O.FRAMEBUFFER,J),U===O.RGBA?4:3),J=new(V===O.UNSIGNED_BYTE?Uint8Array:Float32Array)(J);return O.readPixels(K,L?L-Z-1:Z,1,1,U,V,J),O.bindFramebuffer(O.FRAMEBUFFER,H),Array.from(J)}i.default.prototype.setAttributes=function(O,G){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var K=!0;if(G!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[O]!==G&&(this._glAttributes[O]=G,K=!1)):O instanceof Object&&this._glAttributes!==O&&(this._glAttributes=O,K=!1),this._renderer.isP3D&&!K){if(!this._setupDone){for(var Z in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(Z))return void i.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},i.default.RendererGL=function(O){var G=Z;if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(O&&O.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),O&&E(G,O);var K=x(Z);function Z(U,V,L,H){if(this instanceof Z)return(U=K.call(this,U,V,L))._setAttributeDefaults(V),U._initContext(),U.isP3D=!0,U.geometryBuilder=void 0,U.GL=U.drawingContext,U._pInst._setProperty("drawingContext",U.drawingContext),U._isErasing=!1,U._clipDepths=[],U._isClipApplied=!1,U._stencilTestOn=!1,U._enableLighting=!1,U.ambientLightColors=[],U.specularColors=[1,1,1],U.directionalLightDirections=[],U.directionalLightDiffuseColors=[],U.directionalLightSpecularColors=[],U.pointLightPositions=[],U.pointLightDiffuseColors=[],U.pointLightSpecularColors=[],U.spotLightPositions=[],U.spotLightDirections=[],U.spotLightDiffuseColors=[],U.spotLightSpecularColors=[],U.spotLightAngle=[],U.spotLightConc=[],U.activeImageLight=null,U.diffusedTextures=new Map,U.specularTextures=new Map,U.drawMode=f.FILL,U.curFillColor=U._cachedFillStyle=[1,1,1,1],U.curAmbientColor=U._cachedFillStyle=[1,1,1,1],U.curSpecularColor=U._cachedFillStyle=[0,0,0,0],U.curEmissiveColor=U._cachedFillStyle=[0,0,0,0],U.curStrokeColor=U._cachedStrokeStyle=[0,0,0,1],U.curBlendMode=f.BLEND,U._cachedBlendMode=void 0,U.webglVersion===f.WEBGL2?U.blendExt=U.GL:U.blendExt=U.GL.getExtension("EXT_blend_minmax"),U._isBlending=!1,U._hasSetAmbient=!1,U._useSpecularMaterial=!1,U._useEmissiveMaterial=!1,U._useNormalMaterial=!1,U._useShininess=1,U._useLineColor=!1,U._useVertexColor=!1,U.registerEnabled=new Set,U._tint=[255,255,255,255],U.constantAttenuation=1,U.linearAttenuation=0,U.quadraticAttenuation=0,U.uMVMatrix=new i.default.Matrix,U.uPMatrix=new i.default.Matrix,U.uNMatrix=new i.default.Matrix("mat3"),U._currentNormal=new i.default.Vector(0,0,1),U._curCamera=new i.default.Camera(k(U)),U._curCamera._computeCameraDefaultSettings(),U._curCamera._setDefaultCamera(),U.filterCamera=new i.default.Camera(k(U)),U.filterCamera._computeCameraDefaultSettings(),U.filterCamera._setDefaultCamera(),U.prevTouches=[],U.zoomVelocity=0,U.rotateVelocity=new i.default.Vector(0,0),U.moveVelocity=new i.default.Vector(0,0),U.executeZoom=!1,U.executeRotateAndMove=!1,U._defaultLightShader=void 0,U._defaultImmediateModeShader=void 0,U._defaultNormalShader=void 0,U._defaultColorShader=void 0,U._defaultPointShader=void 0,U.userFillShader=void 0,U.userStrokeShader=void 0,U.userPointShader=void 0,U.retainedMode={geometry:{},buffers:{stroke:[new i.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",k(U)),new i.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",k(U)),new i.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",k(U)),new i.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",k(U)),new i.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",k(U))],fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",k(U),U._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",k(U),U._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",k(U)),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",k(U)),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",k(U),U._flatten)],text:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",k(U),U._vToNArray),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",k(U),U._flatten)]}},U.immediateMode={geometry:new i.default.Geometry,shapeMode:f.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new i.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",k(U),U._vToNArray),new i.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",k(U),U._vToNArray),new i.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",k(U)),new i.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",k(U)),new i.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",k(U),U._flatten)],stroke:[new i.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",k(U)),new i.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",k(U)),new i.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",k(U)),new i.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",k(U)),new i.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",k(U))],point:U.GL.createBuffer()}},U.pointSize=5,U.curStrokeWeight=1,U.curStrokeCap=f.ROUND,U.curStrokeJoin=f.ROUND,U.textures=new Map,U.framebuffers=new Set,U.activeFramebuffers=[],U.filterShader=void 0,U.filterLayer=void 0,U.filterLayerTemp=void 0,U.defaultFilterShaders={},U.textureMode=f.IMAGE,U.textureWrapX=f.CLAMP,U.textureWrapY=f.CLAMP,U._tex=null,U._curveTightness=6,U._lookUpTableBezier=[],U._lookUpTableQuadratic=[],U._lutBezierDetail=0,U._lutQuadraticDetail=0,U.isProcessingVertices=!1,U._tessy=U._initTessy(),U.fontInfos={},U._curShader=void 0,U;throw new TypeError("Cannot call a class as a function")}return G=Z,(O=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new m.default(this)}},{key:"endGeometry",value:function(){var U;if(this.geometryBuilder)return U=this.geometryBuilder.finish(),this.geometryBuilder=void 0,U;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(U){return this.beginGeometry(),U(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(U){var V={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};U._glAttributes===null?U._glAttributes=V:U._glAttributes=Object.assign(V,U._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?f.WEBGL2:f.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var U=this.drawingContext;U.enable(U.DEPTH_TEST),U.depthFunc(U.LEQUAL),U.viewport(0,0,U.drawingBufferWidth,U.drawingBufferHeight),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(U,V){var L,H=this.width,J=this.height,se=this.canvas.id,ne=this._pInst instanceof i.default.Graphics,se=(ne?((L=this._pInst).canvas.parentNode.removeChild(L.canvas),L.canvas=document.createElement("canvas"),(L._pInst._userNode||document.body).appendChild(L.canvas),i.default.Element.call(L,L.canvas,L._pInst),L.width=H,L.height=J):((L=this.canvas)&&L.parentNode.removeChild(L),(L=document.createElement("canvas")).id=se,(this._pInst._userNode||document.body).appendChild(L),this._pInst.canvas=L,this.canvas=L),new i.default.RendererGL(this._pInst.canvas,this._pInst,!ne));this._pInst._setProperty("_renderer",se),se.resize(H,J),se._applyDefaults(),ne||this._pInst._elements.push(se),typeof V=="function"&&setTimeout(function(){V.apply(window._renderer,U)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var H=(H=this._pInst).color.apply(H,arguments),U=H.levels[0]/255,V=H.levels[1]/255,L=H.levels[2]/255,H=H.levels[3]/255;this.clear(U,V,L,H)}},{key:"fill",value:function(U,V,L,H){var J=i.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=J._array,this.drawMode=f.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(U,V,L,H){var J=i.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=J._array}},{key:"strokeCap",value:function(U){this.curStrokeCap=U}},{key:"strokeJoin",value:function(U){this.curStrokeJoin=U}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(U,V){U.width===V.width&&U.height===V.height||U.resize(V.width,V.height),U.pixelDensity()!==V.pixelDensity()&&U.pixelDensity(V.pixelDensity())}},{key:"filter",value:function(){var U,V,L=this,H=this.getFilterLayer(),J=void 0,ne=void 0,se=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(ne=arguments.length<=0?void 0:arguments[0],j(U={},f.BLUR,3),j(U,f.POSTERIZE,4),j(U,f.THRESHOLD,.5),J=ne in(U=U)&&(arguments.length<=1?void 0:arguments[1])===void 0?U[ne]:arguments.length<=1?void 0:arguments[1],ne in this.defaultFilterShaders||(this.defaultFilterShaders[ne]=new i.default.Shader(H._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,M[ne])),this.filterShader=this.defaultFilterShaders[ne]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),fe=(this.matchSize(H,se),se!==this&&(this.filterCamera=this.getFilterLayer().createCamera()),H.draw(function(){return L._pInst.clear()}),[1/(se.width*se.pixelDensity()),1/(se.height*se.pixelDensity())]);ne===f.BLUR?(V=this.getFilterLayerTemp(),this.matchSize(V,se),this._pInst.push(),this._pInst.noStroke(),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",fe),this.filterShader.setUniform("canvasSize",[se.width,se.height]),this.filterShader.setUniform("radius",Math.max(1,J)),V.draw(function(){L.filterShader.setUniform("direction",[1,0]),L.filterShader.setUniform("tex0",se),L._pInst.clear(),L._pInst.shader(L.filterShader),L._pInst.rect(-se.width/2,-se.height/2,se.width,se.height)}),H.draw(function(){L.filterShader.setUniform("direction",[0,1]),L.filterShader.setUniform("tex0",V),L._pInst.clear(),L._pInst.shader(L.filterShader),L._pInst.rect(-se.width/2,-se.height/2,se.width,se.height)}),this._pInst.pop()):H.draw(function(){L._pInst.noStroke(),L._pInst.shader(L.filterShader),L.filterShader.setUniform("tex0",se),L.filterShader.setUniform("texelSize",fe),L.filterShader.setUniform("canvasSize",[se.width,se.height]),L.filterShader.setUniform("filterParameter",J),L._pInst.rect(-se.width/2,-se.height/2,se.width,se.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(f.CORNER),this._pInst.blendMode(f.BLEND),this.filterCamera._resize(),this._pInst.setCamera(this.filterCamera),this._pInst.resetMatrix(),this._pInst.image(H,-this.width/2,-this.height/2,this.width,this.height),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(U){return U?this._pInst.pixelDensity(U):this._pInst.pixelDensity()}},{key:"blendMode",value:function(U){U===f.DARKEST||U===f.LIGHTEST||U===f.ADD||U===f.BLEND||U===f.SUBTRACT||U===f.SCREEN||U===f.EXCLUSION||U===f.REPLACE||U===f.MULTIPLY||U===f.REMOVE?this.curBlendMode=U:U!==f.BURN&&U!==f.OVERLAY&&U!==f.HARD_LIGHT&&U!==f.SOFT_LIGHT&&U!==f.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(U,V){this._isErasing||(this._cachedBlendMode=this.curBlendMode,this._isErasing=!0,this.blendMode(f.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,U/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,V/255])}},{key:"noErase",value:function(){var U;this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),U=this.curBlendMode,this.blendMode(this._cachedBlendMode),this._cachedBlendMode=U,this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var U=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},U=(b(T(Z.prototype),"beginClip",this).call(this,U),this.drawTarget()._isClipApplied=!0,this.GL);U.clearStencil(0),U.clear(U.STENCIL_BUFFER_BIT),U.enable(U.STENCIL_TEST),this._stencilTestOn=!0,U.stencilFunc(U.ALWAYS,1,255),U.stencilOp(U.KEEP,U.KEEP,U.REPLACE),U.disable(U.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var U=this.GL;U.stencilOp(U.KEEP,U.KEEP,U.KEEP),U.stencilFunc(this._clipInvert?U.EQUAL:U.NOTEQUAL,0,255),U.enable(U.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),b(T(Z.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(U){this.curStrokeWeight!==U&&(this.pointSize=U,this.curStrokeWeight=U)}},{key:"_getPixel",value:function(U,V){var L=this.GL;return X(L,null,U,V,L.RGBA,L.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var U,V,L=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(U=this._pInst._pixelDensity,V=this.GL,L._setProperty("pixels",D(L.pixels,V,null,0,0,this.width*U,this.height*U,V.RGBA,V.UNSIGNED_BYTE,this.height*U)))}},{key:"updatePixels",value:function(){var U=this._getTempFramebuffer();U.pixels=this._pixelsState.pixels,U.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(f.CENTER),this._pInst.image(U,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:f.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:f.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(U){return this.retainedMode.geometry[U]!==void 0}},{key:"viewport",value:function(U,V){this._viewport=[0,0,U,V],this.GL.viewport(0,0,U,V)}},{key:"resize",value:function(J,H){i.default.Renderer.prototype.resize.call(this,J,H),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var J=this._pixelsState,L=(J.pixels!==void 0&&J._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),H=!1,J=void 0;try{for(var ne,se=this.framebuffers[Symbol.iterator]();!(L=(ne=se.next()).done);L=!0)ne.value._canvasSizeChanged()}catch(fe){H=!0,J=fe}finally{try{L||se.return==null||se.return()}finally{if(H)throw J}}}},{key:"clear",value:function(){var U=(arguments.length<=0?void 0:arguments[0])||0,V=(arguments.length<=1?void 0:arguments[1])||0,L=(arguments.length<=2?void 0:arguments[2])||0,H=(arguments.length<=3?void 0:arguments[3])||0,J=this.activeFramebuffer();J&&J.format===f.UNSIGNED_BYTE&&!J.antialias&&H===0&&(H=1e-10),this.GL.clearColor(U*H,V*H,L*H,H),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(U,V,L,H,J,ne){arguments.length===16?i.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([U,V,0,0,L,H,0,0,0,0,1,0,J,ne,0,1])}},{key:"translate",value:function(U,V,L){return U instanceof i.default.Vector&&(L=U.z,V=U.y,U=U.x),this.uMVMatrix.translate([U,V,L]),this}},{key:"scale",value:function(U,V,L){return this.uMVMatrix.scale(U,V,L),this}},{key:"rotate",value:function(U,V){return V===void 0?this.rotateZ(U):(i.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(U){return this.rotate(U,1,0,0),this}},{key:"rotateY",value:function(U){return this.rotate(U,0,1,0),this}},{key:"rotateZ",value:function(U){return this.rotate(U,0,0,1),this}},{key:"push",value:function(){var U=i.default.Renderer.prototype.push.apply(this),V=U.properties;return V.uMVMatrix=this.uMVMatrix.copy(),V.uPMatrix=this.uPMatrix.copy(),V._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),V.ambientLightColors=this.ambientLightColors.slice(),V.specularColors=this.specularColors.slice(),V.directionalLightDirections=this.directionalLightDirections.slice(),V.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),V.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),V.pointLightPositions=this.pointLightPositions.slice(),V.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),V.pointLightSpecularColors=this.pointLightSpecularColors.slice(),V.spotLightPositions=this.spotLightPositions.slice(),V.spotLightDirections=this.spotLightDirections.slice(),V.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),V.spotLightSpecularColors=this.spotLightSpecularColors.slice(),V.spotLightAngle=this.spotLightAngle.slice(),V.spotLightConc=this.spotLightConc.slice(),V.userFillShader=this.userFillShader,V.userStrokeShader=this.userStrokeShader,V.userPointShader=this.userPointShader,V.pointSize=this.pointSize,V.curStrokeWeight=this.curStrokeWeight,V.curStrokeColor=this.curStrokeColor,V.curFillColor=this.curFillColor,V.curAmbientColor=this.curAmbientColor,V.curSpecularColor=this.curSpecularColor,V.curEmissiveColor=this.curEmissiveColor,V._hasSetAmbient=this._hasSetAmbient,V._useSpecularMaterial=this._useSpecularMaterial,V._useEmissiveMaterial=this._useEmissiveMaterial,V._useShininess=this._useShininess,V.constantAttenuation=this.constantAttenuation,V.linearAttenuation=this.linearAttenuation,V.quadraticAttenuation=this.quadraticAttenuation,V._enableLighting=this._enableLighting,V._useNormalMaterial=this._useNormalMaterial,V._tex=this._tex,V.drawMode=this.drawMode,V._currentNormal=this._currentNormal,V.curBlendMode=this.curBlendMode,V.activeImageLight=this.activeImageLight,U}},{key:"pop",value:function(){var U;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var V=arguments.length,L=new Array(V),H=0;H<V;H++)L[H]=arguments[H];(U=b(T(Z.prototype),"pop",this)).call.apply(U,[this].concat(L)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var U=this.drawTarget();U._isClipApplied!==this._stencilTestOn&&(U._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var U=this.userStrokeShader;return U&&U.isStrokeShader()?U:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var U=this.userFillShader;if(this._useNormalMaterial&&(!U||!U.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!U||!U.isLightShader())return this._getLightShader()}else if(this._tex){if(!U||!U.isTextureShader())return this._getLightShader()}else if(!U)return this._getImmediateModeShader();return U}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var U=this.userFillShader;if(this._enableLighting){if(!U||!U.isLightShader())return this._getLightShader()}else if(this._tex){if(!U||!U.isTextureShader())return this._getLightShader()}else if(!U)return this._getColorShader();return U}},{key:"_getImmediatePointShader",value:function(){var U=this.userPointShader;return U&&U.isPointShader()?U:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+q.phongFrag):this._defaultLightShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+q.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+q.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===f.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new i.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+q.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+q.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(U,V){var L="";return this.webglVersion===f.WEBGL2&&(L+=`#version 300 es
#define WEBGL2
`),U==="vert"?L+=`#define VERTEX_SHADER
`:U==="frag"&&(L+=`#define FRAGMENT_SHADER
`),V&&(L+="precision ".concat(V,` float;
`)),L}},{key:"_getEmptyTexture",value:function(){var U;return this._emptyTexture||((U=new i.default.Image(1,1)).set(0,0,255),this._emptyTexture=new i.default.Texture(this,U)),this._emptyTexture}},{key:"getTexture",value:function(U){U instanceof i.default.Framebuffer&&(U=U.color);var V=this.textures.get(U);return V||(V=new i.default.Texture(this,U),this.textures.set(U,V),V)}},{key:"getDiffusedTexture",value:function(U){var V,L;return this.diffusedTextures.get(U)!=null?this.diffusedTextures.get(U):(V=Math.floor(U.height/U.width*200),L=(V=this._pInst.createGraphics(200,V,f.WEBGL)).createShader(q.imageLightVert,q.imageLightDiffusedFrag),V.shader(L),L.setUniform("environmentMap",U),V.noStroke(),V.rectMode(V.CENTER),V.rect(0,0,V.width,V.height),this.diffusedTextures.set(U,V),V)}},{key:"getSpecularTexture",value:function(U){if(this.specularTextures.get(U)!=null)return this.specularTextures.get(U);var V,L=[],H=this._pInst.createGraphics(512,512,f.WEBGL),J=Math.log(512)/Math.log(2);H.pixelDensity(1);for(var ne=512;1<=ne;ne/=2){H.resizeCanvas(ne,ne);var se=1-Math.log(ne)/Math.log(2)/J,fe=H.createShader(q.imageLightVert,q.imageLightSpecularFrag);H.shader(fe),H.clear(),fe.setUniform("environmentMap",U),fe.setUniform("roughness",se),H.noStroke(),H.plane(ne,ne),L.push(H.get().drawingContext.getImageData(0,0,ne,ne))}return H.remove(),V=new u.MipmapTexture(this,L,{}),this.specularTextures.set(U,V),V}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(U){return new i.default.Framebuffer(this,U)}},{key:"_setStrokeUniforms",value:function(U){U.bindShader(),U.setUniform("uUseLineColor",this._useLineColor),U.setUniform("uMaterialColor",this.curStrokeColor),U.setUniform("uStrokeWeight",this.curStrokeWeight),U.setUniform("uStrokeCap",F[this.curStrokeCap]),U.setUniform("uStrokeJoin",N[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(U){U.bindShader(),U.setUniform("uUseVertexColor",this._useVertexColor),U.setUniform("uMaterialColor",this.curFillColor),U.setUniform("isTexture",!!this._tex),this._tex&&U.setUniform("uSampler",this._tex),U.setUniform("uTint",this._tint),U.setUniform("uHasSetAmbient",this._hasSetAmbient),U.setUniform("uAmbientMatColor",this.curAmbientColor),U.setUniform("uSpecularMatColor",this.curSpecularColor),U.setUniform("uEmissiveMatColor",this.curEmissiveColor),U.setUniform("uSpecular",this._useSpecularMaterial),U.setUniform("uEmissive",this._useEmissiveMaterial),U.setUniform("uShininess",this._useShininess),this._setImageLightUniforms(U),U.setUniform("uUseLighting",this._enableLighting);var V=this.pointLightDiffuseColors.length/3,V=(U.setUniform("uPointLightCount",V),U.setUniform("uPointLightLocation",this.pointLightPositions),U.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),U.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),V=(U.setUniform("uDirectionalLightCount",V),U.setUniform("uLightingDirection",this.directionalLightDirections),U.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),U.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),V=(U.setUniform("uAmbientLightCount",V),U.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);U.setUniform("uSpotLightCount",V),U.setUniform("uSpotLightAngle",this.spotLightAngle),U.setUniform("uSpotLightConc",this.spotLightConc),U.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),U.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),U.setUniform("uSpotLightLocation",this.spotLightPositions),U.setUniform("uSpotLightDirection",this.spotLightDirections),U.setUniform("uConstantAttenuation",this.constantAttenuation),U.setUniform("uLinearAttenuation",this.linearAttenuation),U.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),U.bindTextures()}},{key:"_setImageLightUniforms",value:function(U){var V,L;U.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(V=this.getDiffusedTexture(this.activeImageLight),U.setUniform("environmentMapDiffused",V),V=this.getSpecularTexture(this.activeImageLight),L=20/this._useShininess,U.setUniform("levelOfDetail",8*L),U.setUniform("environmentMapSpecular",V))}},{key:"_setPointUniforms",value:function(U){U.bindShader(),U.setUniform("uMaterialColor",this.curStrokeColor),U.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(U,V,L,H,J){V=V||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(V,U),L!==void 0&&((U=L)instanceof i.default.DataArray?U=L.dataArray():U instanceof(H||Float32Array)||(U=new(H||Float32Array)(U)),this.GL.bufferData(V,U,J||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(U,V){return U.length===V.length&&U.every(function(L,H){return L===V[H]})}},{key:"_isTypedArray",value:function(U){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(V){return U instanceof V})}},{key:"_flatten",value:function(U){if(U.length===0)return[];var V;if(2e4<U.length){for(var L=[],H=U.slice(),J=H.pop();Array.isArray(J)?H.push.apply(H,y(J)):L.push(J),H.length&&(J=H.pop())!==void 0;);return L.reverse(),L}return(V=[]).concat.apply(V,y(U))}},{key:"_vToNArray",value:function(U){var V=[],L=!0,H=!1,J=void 0;try{for(var ne,se=U[Symbol.iterator]();!(L=(ne=se.next()).done);L=!0){var fe=ne.value;V.push(fe.x,fe.y,fe.z)}}catch(xe){H=!0,J=xe}finally{try{L||se.return==null||se.return()}finally{if(H)throw J}}return V}},{key:"_bezierCoefficients",value:function(U){var V=U*U,L=1-U,H=L*L;return[H*L,3*H*U,3*L*V,V*U]}},{key:"_quadraticCoefficients",value:function(U){var V=1-U;return[V*V,2*V*U,U*U]}},{key:"_bezierToCatmull",value:function(U){return[U[1],U[1]+(U[2]-U[0])/this._curveTightness,U[2]-(U[3]-U[1])/this._curveTightness,U[2]]}},{key:"_initTessy",value:function(){var U=new _.default.GluTesselator;return U.gluTessCallback(_.default.gluEnum.GLU_TESS_VERTEX_DATA,function(V,L){for(var H=0;H<V.length;H++)L.push(V[H])}),U.gluTessCallback(_.default.gluEnum.GLU_TESS_BEGIN,function(V){V!==_.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(V))}),U.gluTessCallback(_.default.gluEnum.GLU_TESS_ERROR,function(V){console.log("error callback"),console.log("error number: ".concat(V))}),U.gluTessCallback(_.default.gluEnum.GLU_TESS_COMBINE,function(V,L,H){for(var J=new Array(i.default.RendererGL.prototype.tessyVertexSize).fill(0),ne=0;ne<H.length;ne++)for(var se=0;se<J.length;se++)H[ne]!==0&&L[ne]&&(J[se]+=L[ne][se]*H[ne]);return J}),U.gluTessCallback(_.default.gluEnum.GLU_TESS_EDGE_FLAG,function(V){}),U.gluTessProperty(_.default.gluEnum.GLU_TESS_WINDING_RULE,_.default.windingRule.GLU_TESS_WINDING_NONZERO),U}},{key:"_triangulate",value:function(U){var V=U[0]?U[0][2]:void 0,L=!0,H=!0,xe=!1,_e=void 0;try{for(var J,ne=U[Symbol.iterator]();!(H=(J=ne.next()).done);H=!0)for(var se=J.value,fe=0;fe<se.length;fe+=i.default.RendererGL.prototype.tessyVertexSize)if(se[fe+2]!==V){L=!1;break}}catch(te){xe=!0,_e=te}finally{try{H||ne.return==null||ne.return()}finally{if(xe)throw _e}}L?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var xe=[],he=(this._tessy.gluTessBeginPolygon(xe),!0),_e=!1,ye=void 0;try{for(var ue,pe=U[Symbol.iterator]();!(he=(ue=pe.next()).done);he=!0){var ke=ue.value;this._tessy.gluTessBeginContour();for(var Ie=0;Ie<ke.length;Ie+=i.default.RendererGL.prototype.tessyVertexSize){var Y=ke.slice(Ie,Ie+i.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Y,Y)}this._tessy.gluTessEndContour()}}catch(te){_e=!0,ye=te}finally{try{he||pe.return==null||pe.return()}finally{if(_e)throw ye}}return this._tessy.gluTessEndPolygon(),xe}}])&&S(G.prototype,O),Z}(i.default.Renderer),i.default.prototype._assert3d=function(O){if(!this._renderer.isP3D)throw new Error("".concat(O,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},i.default.RendererGL.prototype.tessyVertexSize=12,R=i.default.RendererGL,l.default=R},{"../core/constants":264,"../core/main":275,"../core/p5.Renderer":278,"./GeometryBuilder":319,"./p5.Camera":324,"./p5.Framebuffer":326,"./p5.Matrix":328,"./p5.Shader":333,"./p5.Texture":334,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":158,"core-js/modules/es.array.includes":159,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.map":169,"core-js/modules/es.object.assign":176,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.reflect.get":185,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.set":189,"core-js/modules/es.string.includes":191,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.float32-array":211,"core-js/modules/es.typed-array.float64-array":212,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.int16-array":216,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint16-array":232,"core-js/modules/es.typed-array.uint32-array":233,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238,libtess:247,path:250}],333:[function(t,a,l){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(i,f){for(var m=0;m<f.length;m++){var _=f[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}o.default.Shader=function(){function i(_,u,p){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._renderer=_,this._vertSrc=u,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var f,m;return f=i,(m=[{key:"init",value:function(){if(this._glProgram===0){var _=this._renderer.GL;if(this._vertShader=_.createShader(_.VERTEX_SHADER),_.shaderSource(this._vertShader,this._vertSrc),_.compileShader(this._vertShader),!_.getShaderParameter(this._vertShader,_.COMPILE_STATUS))return o.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(_.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=_.createShader(_.FRAGMENT_SHADER),_.shaderSource(this._fragShader,this._fragSrc),_.compileShader(this._fragShader),!_.getShaderParameter(this._fragShader,_.COMPILE_STATUS))return o.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(_.getShaderInfoLog(this._fragShader))),null;this._glProgram=_.createProgram(),_.attachShader(this._glProgram,this._vertShader),_.attachShader(this._glProgram,this._fragShader),_.linkProgram(this._glProgram),_.getProgramParameter(this._glProgram,_.LINK_STATUS)||o.default._friendlyError("Snap! Error linking shader program: ".concat(_.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(_){var u=new o.default.Shader(_._renderer,this._vertSrc,this._fragSrc);return u.ensureCompiledOnContext(_),u}},{key:"ensureCompiledOnContext",value:function(_){if(this._glProgram!==0&&this._renderer!==_._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=_._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var _=this._renderer.GL,u=_.getProgramParameter(this._glProgram,_.ACTIVE_ATTRIBUTES),p=0;p<u;++p){var g=_.getActiveAttrib(this._glProgram,p),y=g.name,S=_.getAttribLocation(this._glProgram,y),b={};b.name=y,b.location=S,b.index=p,b.type=g.type,b.size=g.size,this.attributes[y]=b}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var _=this._renderer.GL,u=_.getProgramParameter(this._glProgram,_.ACTIVE_UNIFORMS),p=0,g=0;g<u;++g){var y=_.getActiveUniform(this._glProgram,g),S={},b=(S.location=_.getUniformLocation(this._glProgram,y.name),S.size=y.size,y.name);1<y.size&&(b=b.substring(0,b.indexOf("[0]"))),S.name=b,S.type=y.type,S._cachedData=void 0,S.type===_.SAMPLER_2D&&(S.samplerIndex=p,p++,this.samplers.push(S)),S.isArray=1<y.size||S.type===_.FLOAT_MAT3||S.type===_.FLOAT_MAT4||S.type===_.FLOAT_VEC2||S.type===_.FLOAT_VEC3||S.type===_.FLOAT_VEC4||S.type===_.INT_VEC2||S.type===_.INT_VEC4||S.type===_.INT_VEC3,this.uniforms[b]=S}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var _=this._renderer.GL,u=!0,p=!1,g=void 0;try{for(var y,S=this.samplers[Symbol.iterator]();!(u=(y=S.next()).done);u=!0){var b=y.value,E=b.texture;E===void 0&&(E=this._renderer._getEmptyTexture()),_.activeTexture(_.TEXTURE0+b.samplerIndex),E.bindTexture(),E.update(),_.uniform1i(b.location,b.samplerIndex)}}catch(x){p=!0,g=x}finally{try{u||S.return==null||S.return()}finally{if(p)throw g}}}},{key:"updateTextures",value:function(){var _=!0,u=!1,p=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(_=(g=y.next()).done);_=!0){var S=g.value.texture;S&&S.update()}}catch(b){u=!0,p=b}finally{try{_||y.return==null||y.return()}finally{if(u)throw p}}}},{key:"unbindTextures",value:function(){var _=!0,u=!1,p=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(_=(g=y.next()).done);_=!0){var S=g.value;this.setUniform(S.name,this._renderer._getEmptyTexture())}}catch(b){u=!0,p=b}finally{try{_||y.return==null||y.return()}finally{if(u)throw p}}}},{key:"_setMatrixUniforms",value:function(){var _=this._renderer._curCamera.cameraMatrix,u=this._renderer.uPMatrix,p=this._renderer.uMVMatrix,g=p.copy();g.mult(u),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",_.mat4),this.setUniform("uProjectionMatrix",u.mat4),this.setUniform("uModelViewMatrix",p.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var _=this._renderer.GL;return this._renderer._curShader!==this&&(_.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(_,u){var p=this.uniforms[_];if(p){var g=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,u))return;p._cachedData=u.slice(0)}else{if(p._cachedData&&p._cachedData===u)return;Array.isArray(u)?p._cachedData=u.slice(0):p._cachedData=u}var y=p.location;switch(this.useProgram(),p.type){case g.BOOL:u===!0?g.uniform1i(y,1):g.uniform1i(y,0);break;case g.INT:1<p.size?u.length&&g.uniform1iv(y,u):g.uniform1i(y,u);break;case g.FLOAT:1<p.size?u.length&&g.uniform1fv(y,u):g.uniform1f(y,u);break;case g.FLOAT_MAT3:g.uniformMatrix3fv(y,!1,u);break;case g.FLOAT_MAT4:g.uniformMatrix4fv(y,!1,u);break;case g.FLOAT_VEC2:1<p.size?u.length&&g.uniform2fv(y,u):g.uniform2f(y,u[0],u[1]);break;case g.FLOAT_VEC3:1<p.size?u.length&&g.uniform3fv(y,u):g.uniform3f(y,u[0],u[1],u[2]);break;case g.FLOAT_VEC4:1<p.size?u.length&&g.uniform4fv(y,u):g.uniform4f(y,u[0],u[1],u[2],u[3]);break;case g.INT_VEC2:1<p.size?u.length&&g.uniform2iv(y,u):g.uniform2i(y,u[0],u[1]);break;case g.INT_VEC3:1<p.size?u.length&&g.uniform3iv(y,u):g.uniform3i(y,u[0],u[1],u[2]);break;case g.INT_VEC4:1<p.size?u.length&&g.uniform4iv(y,u):g.uniform4i(y,u[0],u[1],u[2],u[3]);break;case g.SAMPLER_2D:g.activeTexture(g.TEXTURE0+p.samplerIndex),p.texture=u instanceof o.default.Texture?u:this._renderer.getTexture(u),g.uniform1i(y,p.samplerIndex),p.texture.src.gifProperties&&p.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(_,u,p,g,y,S){var b;return _&&(_=_.location)!==-1&&(b=this._renderer.GL,this._renderer.registerEnabled.has(_)||(b.enableVertexAttribArray(_),this._renderer.registerEnabled.add(_)),this._renderer.GL.vertexAttribPointer(_,u,p||b.FLOAT,g||!1,y||0,S||0)),this}},{key:"disableRemainingAttributes",value:function(){var _=this,u=!0,p=!1,g=void 0;try{for(var y,S=this._renderer.registerEnabled.values()[Symbol.iterator]();!(u=(y=S.next()).done);u=!0)(function(){var b=y.value;Object.keys(_.attributes).some(function(E){return _.attributes[E].location===b})||(_._renderer.GL.disableVertexAttribArray(b),_._renderer.registerEnabled.delete(b))})()}catch(b){p=!0,g=b}finally{try{u||S.return==null||S.return()}finally{if(p)throw g}}}}])&&c(f.prototype,m),i}(),t=o.default.Shader,l.default=t},{"../core/main":275,"core-js/modules/es.array.index-of":160,"core-js/modules/es.array.iterator":161,"core-js/modules/es.array.slice":165,"core-js/modules/es.array.some":166,"core-js/modules/es.function.name":168,"core-js/modules/es.object.keys":181,"core-js/modules/es.object.to-string":182,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/web.dom-collections.iterator":238}],334:[function(t,a,l){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(x)}function c(x){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(l,"__esModule",{value:!0}),l.checkWebGLCapabilities=E,l.default=l.MipmapTexture=void 0;var i=(b=t("../core/main"))&&b.__esModule?b:{default:b},f=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var k=m();if(k&&k.has(x))return k.get(x);var T,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in x){var C;Object.prototype.hasOwnProperty.call(x,T)&&((C=A?Object.getOwnPropertyDescriptor(x,T):null)&&(C.get||C.set)?Object.defineProperty(j,T,C):j[T]=x[T])}return j.default=x,k&&k.set(x,j),j}(t("../core/constants"));function m(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,m=function(){return x},x)}function _(x,k){return(_=Object.setPrototypeOf||function(T,j){return T.__proto__=j,T})(x,k)}function u(x){return function(){var k,T=p(x),T=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=p(this).constructor,Reflect.construct(T,arguments,k)):T.apply(this,arguments),this);if(!k||c(k)!=="object"&&typeof k!="function"){if(T!==void 0)return T;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function p(x){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(x)}function g(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function y(x,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(x,j.key,j)}}function S(x,k,T){k&&y(x.prototype,k),T&&y(x,T)}i.default.Texture=function(){function x(I,T,C){g(this,x),this._renderer=I;var A=this._renderer.GL,C=(C=C||{},this.src=T,this.glTex=void 0,this.glTarget=A.TEXTURE_2D,this.glFormat=C.format||A.RGBA,this.mipmaps=!1,this.glMinFilter=C.minFilter||A.LINEAR,this.glMagFilter=C.magFilter||A.LINEAR,this.glWrapS=C.wrapS||A.CLAMP_TO_EDGE,this.glWrapT=C.wrapT||A.CLAMP_TO_EDGE,this.glDataType=C.dataType||A.UNSIGNED_BYTE,E(I)),I=(this.glFormat!==A.HALF_FLOAT||C.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=A.FLOAT),this.glFormat!==A.HALF_FLOAT||this.glMinFilter!==A.LINEAR&&this.glMagFilter!==A.LINEAR||C.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===A.LINEAR&&(this.glMinFilter=A.NEAREST),this.glMagFilter===A.LINEAR&&(this.glMagFilter=A.NEAREST)),this.glFormat!==A.FLOAT||C.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=A.UNSIGNED_BYTE),this.glFormat!==A.FLOAT||this.glMinFilter!==A.LINEAR&&this.glMagFilter!==A.LINEAR||C.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===A.LINEAR&&(this.glMinFilter=A.NEAREST),this.glMagFilter===A.LINEAR&&(this.glMagFilter=A.NEAREST)),this.isSrcMediaElement=i.default.MediaElement!==void 0&&T instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=i.default.Element!==void 0&&T instanceof i.default.Element&&!(T instanceof i.default.Graphics)&&!(T instanceof i.default.Renderer),this.isSrcP5Image=T instanceof i.default.Image,this.isSrcP5Graphics=T instanceof i.default.Graphics,this.isSrcP5Renderer=T instanceof i.default.Renderer,this.isImageData=typeof ImageData<"u"&&T instanceof ImageData,this.isFramebufferTexture=T instanceof i.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=I.width,this.height=I.height,this.init(I),this}return S(x,[{key:"_getTextureDataFromSource",value:function(){var k;return this.isFramebufferTexture?k=this.src.rawTexture():this.isSrcP5Image?k=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?k=this.src.elt:this.isImageData&&(k=this.src),k}},{key:"init",value:function(k){var T,j=this._renderer.GL;this.isFramebufferTexture||(this.glTex=j.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,this.glMagFilter),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(T=new Uint8Array([1,1,1,1]),j.texImage2D(this.glTarget,0,j.RGBA,1,1,0,this.glFormat,this.glDataType,T)):j.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,k))}},{key:"update",value:function(){var k,T,j,A=this.src;return A.width!==0&&A.height!==0&&!this.isFramebufferTexture&&(k=this._getTextureDataFromSource(),T=!1,j=this._renderer.GL,k.width!==this.width||k.height!==this.height?(T=!0,this.width=k.width||A.width,this.height=k.height||A.height,this.isSrcP5Image?A.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&A.setModified(!0)):this.isSrcP5Image?A.isModified()&&A.setModified(!(T=!0)):this.isSrcMediaElement?A.isModified()?A.setModified(!(T=!0)):A.loadedmetadata&&this._videoPrevUpdateTime!==A.time()&&(this._videoPrevUpdateTime=A.time(),T=!0):this.isImageData?A._dirty&&(T=!(A._dirty=!1)):T=!0,T&&(this.bindTexture(),j.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,k)),T)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(k,T){var j=this._renderer.GL;this.glMinFilter=this.glFilter(k),this.glMagFilter=this.glFilter(T),this.bindTexture(),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,this.glMinFilter),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(k){var T=this._renderer.GL;return k===f.NEAREST?T.NEAREST:T.LINEAR}},{key:"setWrapMode",value:function(k,T){function j(F){return(F&F-1)==0}var A=this._renderer.GL,I=this._getTextureDataFromSource(),I=I.naturalWidth&&I.naturalHeight?(C=I.naturalWidth,I.naturalHeight):(C=this.width,this.height),C=j(C),I=j(I);k===f.REPEAT?this._renderer.webglVersion===f.WEBGL2||C&&I?this.glWrapS=A.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=A.CLAMP_TO_EDGE):k===f.MIRROR?this._renderer.webglVersion===f.WEBGL2||C&&I?this.glWrapS=A.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=A.CLAMP_TO_EDGE):this.glWrapS=A.CLAMP_TO_EDGE,T===f.REPEAT?this._renderer.webglVersion===f.WEBGL2||C&&I?this.glWrapT=A.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=A.CLAMP_TO_EDGE):T===f.MIRROR?this._renderer.webglVersion===f.WEBGL2||C&&I?this.glWrapT=A.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=A.CLAMP_TO_EDGE):this.glWrapT=A.CLAMP_TO_EDGE,this.bindTexture(),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,this.glWrapS),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),x}();var b=function(x){var k=j;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),x&&_(k,x);var T=u(j);function j(A,C,I){return g(this,j),C=(A=T.call(this,A,C,I))._renderer.GL,A.glMinFilter===C.LINEAR&&(A.glMinFilter=C.LINEAR_MIPMAP_LINEAR),A}return S(j,[{key:"glFilter",value:function(A){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(A){var C=this._renderer.GL;this.glTex=C.createTexture(),this.bindTexture();for(var I=0;I<A.length;I++)C.texImage2D(this.glTarget,I,this.glFormat,this.glFormat,this.glDataType,A[I]);this.glMinFilter=C.LINEAR_MIPMAP_LINEAR,C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),j}(i.default.Texture);function E(A){var k=A.GL,A=A.webglVersion,T=A===f.WEBGL2?k.getExtension("EXT_color_buffer_float")&&k.getExtension("EXT_float_blend"):k.getExtension("OES_texture_float"),j=T&&k.getExtension("OES_texture_float_linear"),A=A===f.WEBGL2?k.getExtension("EXT_color_buffer_float"):k.getExtension("OES_texture_half_float");return{float:T,floatLinear:j,halfFloat:A,halfFloatLinear:A&&k.getExtension("OES_texture_half_float_linear")}}l.MipmapTexture=b,t=i.default.Texture,l.default=t},{"../core/constants":264,"../core/main":275,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.get-prototype-of":180,"core-js/modules/es.object.to-string":182,"core-js/modules/es.reflect.construct":184,"core-js/modules/es.regexp.to-string":188,"core-js/modules/es.string.iterator":192,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.typed-array.copy-within":205,"core-js/modules/es.typed-array.every":206,"core-js/modules/es.typed-array.fill":207,"core-js/modules/es.typed-array.filter":208,"core-js/modules/es.typed-array.find":210,"core-js/modules/es.typed-array.find-index":209,"core-js/modules/es.typed-array.for-each":213,"core-js/modules/es.typed-array.includes":214,"core-js/modules/es.typed-array.index-of":215,"core-js/modules/es.typed-array.iterator":218,"core-js/modules/es.typed-array.join":219,"core-js/modules/es.typed-array.last-index-of":220,"core-js/modules/es.typed-array.map":221,"core-js/modules/es.typed-array.reduce":223,"core-js/modules/es.typed-array.reduce-right":222,"core-js/modules/es.typed-array.reverse":224,"core-js/modules/es.typed-array.set":225,"core-js/modules/es.typed-array.slice":226,"core-js/modules/es.typed-array.some":227,"core-js/modules/es.typed-array.sort":228,"core-js/modules/es.typed-array.subarray":229,"core-js/modules/es.typed-array.to-locale-string":230,"core-js/modules/es.typed-array.to-string":231,"core-js/modules/es.typed-array.uint8-array":234,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}],335:[function(t,a,l){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(x)}function c(x){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(k){return o(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":o(k)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var i,f=(i=t("../core/main"))&&i.__esModule?i:{default:i},m=function(x){if(x&&x.__esModule)return x;if(x===null||c(x)!=="object"&&typeof x!="function")return{default:x};var k=_();if(k&&k.has(x))return k.get(x);var T,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in x){var C;Object.prototype.hasOwnProperty.call(x,T)&&((C=A?Object.getOwnPropertyDescriptor(x,T):null)&&(C.get||C.set)?Object.defineProperty(j,T,C):j[T]=x[T])}return j.default=x,k&&k.set(x,j),j}(t("../core/constants"));function _(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,_=function(){return x},x)}function u(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function p(x,k){for(var T=0;T<k.length;T++){var j=k[T];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(x,j.key,j)}}function g(x,k,T){k&&p(x.prototype,k),T&&p(x,T)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),f.default.RendererGL.prototype._applyTextProperties=function(){},f.default.RendererGL.prototype.textWidth=function(x){return this._isOpenType()?this._textFont._textWidth(x,this._textSize):0};var y=function(){function x(k,T){u(this,x),this.width=k,this.height=T,this.infos=[]}return g(x,[{key:"findImage",value:function(k){var T,j,A=this.width*this.height;if(A<k)throw new Error("font is too complex to render in 3D");for(var C=this.infos.length-1;0<=C;--C){var I=this.infos[C];if(I.index+k<A){j=(T=I).imageData;break}}if(!T){try{j=new ImageData(this.width,this.height)}catch{var F=document.getElementsByTagName("canvas")[0],N=!F,z=(F||((F=document.createElement("canvas")).style.display="none",document.body.appendChild(F)),F.getContext("2d"));z&&(j=z.createImageData(this.width,this.height)),N&&document.body.removeChild(F)}this.infos.push(T={index:0,imageData:j})}return z=T.index,T.index+=k,j._dirty=!0,{imageData:j,index:z}}}]),x}();function S(I,k,T,j,A){var C=I.imageData.data,I=4*I.index++;C[I++]=k,C[I++]=T,C[I++]=j,C[+I]=A}var b=Math.sqrt(3),E=function(){function x(k){u(this,x),this.font=k,this.strokeImageInfos=new y(64,64),this.colDimImageInfos=new y(64,64),this.rowDimImageInfos=new y(64,64),this.colCellImageInfos=new y(64,64),this.rowCellImageInfos=new y(64,64),this.glyphInfos={}}return g(x,[{key:"getGlyphInfo",value:function(k){var T=this.glyphInfos[k.index];if(!T){var j=k.getBoundingBox(),A=j.x1,C=j.y1,I=j.x2-A,F=j.y2-C,N=k.path.commands;if(I==0||F==0||!N.length)return this.glyphInfos[k.index]={};for(var z=[],R=[],q=[],M=8;0<=M;--M)q.push([]);for(M=8;0<=M;--M)R.push([]);var D,X,O,G,K=function(){function Re(Ge,Xe,Ke,Pe){u(this,Re),this.p0=Ge,this.c0=Xe,this.c1=Ke,this.p1=Pe}return g(Re,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return f.default.Vector.sub(f.default.Vector.sub(this.p1,this.p0),f.default.Vector.mult(f.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(We){var Xe=f.default.Vector.lerp(this.p0,this.c0,We),Pe=f.default.Vector.lerp(this.c0,this.c1,We),Ke=f.default.Vector.lerp(Xe,Pe,We),Pe=(this.c1=f.default.Vector.lerp(this.c1,this.p1,We),this.c0=f.default.Vector.lerp(Pe,this.c1,We),f.default.Vector.lerp(Ke,this.c0,We)),We=new Re(this.p0,Xe,Ke,Pe);return this.p0=Pe,We}},{key:"splitInflections",value:function(){var Ge=f.default.Vector.sub(this.c0,this.p0),Xe=f.default.Vector.sub(f.default.Vector.sub(this.c1,this.c0),Ge),Ke=f.default.Vector.sub(f.default.Vector.sub(f.default.Vector.sub(this.p1,this.c1),Ge),f.default.Vector.mult(Xe,2)),Pe=[],We=Xe.x*Ke.y-Xe.y*Ke.x;return We!==0&&0<=(Ge=(Ke=Ge.x*Ke.y-Ge.y*Ke.x)*Ke-4*We*(Ge.x*Xe.y-Ge.y*Xe.x))&&(We<0&&(We=-We,Ke=-Ke),Ge=(-Ke+(Xe=Math.sqrt(Ge)))/(2*We),0<(Ke=(-Ke-Xe)/(2*We))&&Ke<1&&(Pe.push(this.split(Ke)),Ge=1-(1-Ge)/(1-Ke)),0<Ge&&Ge<1&&Pe.push(this.split(Ge))),Pe.push(this),Pe}}]),Re}(),Z=!0,U=!1,V=void 0;try{for(var L,H=N[Symbol.iterator]();!(Z=(L=H.next()).done);Z=!0){var J=L.value,ne=(J.x-A)/I,se=(J.y-C)/F;if(!ve(D,X,ne,se)){switch(J.type){case"M":O=ne,G=se;break;case"L":be(D,X,ne,se);break;case"Q":var fe=(J.x1-A)/I,xe=(J.y1-C)/F;te([D,ne,fe],[X,se,xe],{x:D,y:X,cx:fe,cy:xe});break;case"Z":ve(D,X,O,G)?z.push({x:D,y:X}):(be(D,X,O,G),z.push({x:O,y:G}));break;case"C":for(var he=function(ge,Le,qe,Ke,Pe,We,Fe,de){var ge=new K(new f.default.Vector(ge,Le),new f.default.Vector(qe,Ke),new f.default.Vector(Pe,We),new f.default.Vector(Fe,de)).splitInflections(),ce=[],we=30/b,Oe=!0,Le=!1,qe=void 0;try{for(var Qe,rt=ge[Symbol.iterator]();!(Oe=(Qe=rt.next()).done);Oe=!0){for(var tt=Qe.value,ot=[],gt=void 0;!(.125<=(gt=we/tt.quadError()));){var mt=Math.pow(gt,.3333333333333333),lt=tt.split(mt),vt=tt.split(1-mt/(1-mt));ce.push(lt),ot.push(tt),tt=vt}gt<1&&ce.push(tt.split(.5)),ce.push(tt),Array.prototype.push.apply(ce,ot.reverse())}}catch(pt){Le=!0,qe=pt}finally{try{Oe||rt.return==null||rt.return()}finally{if(Le)throw qe}}return ce}(D,X,(J.x1-A)/I,(J.y1-C)/F,(J.x2-A)/I,(J.y2-C)/F,ne,se),_e=0;_e<he.length;_e++){var ye=he[_e].toQuadratic();te([ye.x,ye.x1,ye.cx],[ye.y,ye.y1,ye.cy],ye)}break;default:throw new Error("unknown command type: ".concat(J.type))}D=ne,X=se}}}catch(Re){U=!0,V=Re}finally{try{Z||H.return==null||H.return()}finally{if(U)throw V}}for(var ue=z.length,pe=this.strokeImageInfos.findImage(ue),ke=pe.index,Ie=0;Ie<ue;++Ie){var Y=z[Ie];S(pe,re(Y.x),re(Y.y),re(Y.cx),re(Y.cy))}(T=this.glyphInfos[k.index]={glyph:k,uGlyphRect:[j.x1,-j.y1,j.x2,-j.y2],strokeImageInfo:pe,strokes:z,colInfo:je(q,this.colDimImageInfos,this.colCellImageInfos),rowInfo:je(R,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[T.colInfo.dimOffset,T.rowInfo.dimOffset]}return T;function te(Re,Ge,Xe){var Ke=z.length;function Pe(ce,we,Oe){for(var Le=ce.length;0<Le--;){var qe=ce[Le];qe<we&&(we=qe),Oe<qe&&(Oe=qe)}return{min:we,max:Oe}}z.push(Xe);for(var Xe=Pe(Re,1,0),Re=Math.max(Math.floor(9*Xe.min-.5),0),We=Math.min(Math.ceil(9*Xe.max+.5),9),Fe=Re;Fe<We;++Fe)q[Fe].push(Ke);for(var Xe=Pe(Ge,1,0),Re=Math.max(Math.floor(9*Xe.min-.5),0),de=Math.min(Math.ceil(9*Xe.max+.5),9),ge=Re;ge<de;++ge)R[ge].push(Ke)}function re(Re){return(Re=(Xe=255)*Re)<(Ge=0)?Ge:Xe<Re?Xe:Re;var Ge,Xe}function be(Re,Ge,Xe,Ke){te([Re,Xe],[Ge,Ke],{x:Re,y:Ge,cx:(Re+Xe)/2,cy:(Ge+Ke)/2})}function ve(Re,Ge,Xe,Ke){return Math.abs(Xe-Re)<1e-5&&Math.abs(Ke-Ge)<1e-5}function je(Re,Ge,Xe){for(var Ke=Re.length,Pe=Ge.findImage(Ke),Ge=Pe.index,We=0,Fe=0;Fe<Ke;++Fe)We+=Re[Fe].length;for(var de=Xe.findImage(We),ge=0;ge<Ke;++ge){var ce=Re[ge],we=ce.length,Oe=de.index;S(Pe,Oe>>7,127&Oe,we>>7,127&we);for(var Le=0;Le<we;++Le){var qe=ce[Le]+ke;S(de,qe>>7,127&qe,0,0)}}return{cellImageInfo:de,dimOffset:Ge,dimImageInfo:Pe}}}}]),x}();f.default.RendererGL.prototype._renderText=function(x,k,T,j,A){if(this._textFont&&typeof this._textFont!="string"){if(!(A<=j)&&this._doFill){if(this._isOpenType()){x.push();var A=this._doStroke,C=this.drawMode,I=(this._doStroke=!1,this.drawMode=m.TEXTURE,this._textFont.font),F=(F=this._textFont._fontInfo)||(this._textFont._fontInfo=new E(I)),T=this._textFont._handleAlignment(this,k,T,j),j=this._textSize/I.unitsPerEm,N=(this.translate(T.x,T.y,0),this.scale(j,j,1),this.GL),T=!this._defaultFontShader,z=this._getFontShader(),R=(z.init(),z.bindShader(),T&&(z.setUniform("uGridImageSize",[64,64]),z.setUniform("uCellsImageSize",[64,64]),z.setUniform("uStrokeImageSize",[64,64]),z.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),q=(R||((j=this._textGeom=new f.default.Geometry(1,1,function(){for(var _e=0;_e<=1;_e++)for(var ye=0;ye<=1;ye++)this.vertices.push(new f.default.Vector(ye,_e,0)),this.uvs.push(ye,_e)})).computeFaces().computeNormals(),R=this.createBuffers("glyph",j)),!0),T=!1,j=void 0;try{for(var M,D=this.retainedMode.buffers.text[Symbol.iterator]();!(q=(M=D.next()).done);q=!0)M.value._prepareBuffer(R,z)}catch(_e){T=!0,j=_e}finally{try{q||D.return==null||D.return()}finally{if(T)throw j}}this._bindBuffer(R.indexBuffer,N.ELEMENT_ARRAY_BUFFER),z.setUniform("uMaterialColor",this.curFillColor),N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var X=0,O=null,G=I.stringToGlyphs(k),K=!0,Z=!1,U=void 0;try{for(var V,L=G[Symbol.iterator]();!(K=(V=L.next()).done);K=!0){var H,J,ne=V.value,se=(O&&(X+=I.getKerningValue(O,ne)),F.getGlyphInfo(ne));se.uGlyphRect&&(H=se.rowInfo,J=se.colInfo,z.setUniform("uSamplerStrokes",se.strokeImageInfo.imageData),z.setUniform("uSamplerRowStrokes",H.cellImageInfo.imageData),z.setUniform("uSamplerRows",H.dimImageInfo.imageData),z.setUniform("uSamplerColStrokes",J.cellImageInfo.imageData),z.setUniform("uSamplerCols",J.dimImageInfo.imageData),z.setUniform("uGridOffset",se.uGridOffset),z.setUniform("uGlyphRect",se.uGlyphRect),z.setUniform("uGlyphOffset",X),z.bindTextures(),N.drawElements(N.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),X+=ne.advanceWidth,O=ne}}catch(_e){Z=!0,U=_e}finally{try{K||L.return==null||L.return()}finally{if(Z)throw U}}}finally{z.unbindShader(),this._doStroke=A,this.drawMode=C,N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),x.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return x}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":264,"../core/main":275,"./p5.RendererGL.Retained":331,"./p5.Shader":333,"core-js/modules/es.array.iterator":161,"core-js/modules/es.object.get-own-property-descriptor":178,"core-js/modules/es.object.to-string":182,"core-js/modules/es.regexp.exec":187,"core-js/modules/es.string.iterator":192,"core-js/modules/es.string.split":198,"core-js/modules/es.string.sub":200,"core-js/modules/es.symbol":204,"core-js/modules/es.symbol.description":202,"core-js/modules/es.symbol.iterator":203,"core-js/modules/es.weak-map":236,"core-js/modules/web.dom-collections.iterator":238}]},{},[259])(259)})})(p5_min$2);var p5_minExports=p5_min$2.exports;const p5_min=getDefaultExportFromCjs(p5_minExports),p5_min$1=_mergeNamespaces({__proto__:null,default:p5_min},[p5_minExports]),Qubit_svelte_svelte_type_style_lang="";function create_fragment$b(s){let r,n,t;return n=new P5({props:{sketch:s[3]}}),n.$on("instance",s[2]),{c(){r=element("div"),create_component(n.$$.fragment),this.h()},l(a){r=claim_element(a,"DIV",{class:!0});var l=children(r);claim_component(n.$$.fragment,l),l.forEach(detach),this.h()},h(){attr(r,"class","qubit svelte-8wldun"),toggle_class(r,"disabled",s[0])},m(a,l){insert_hydration(a,r,l),mount_component(n,r,null),s[6](r),t=!0},p(a,[l]){(!t||l&1)&&toggle_class(r,"disabled",a[0])},i(a){t||(transition_in(n.$$.fragment,a),t=!0)},o(a){transition_out(n.$$.fragment,a),t=!1},d(a){a&&detach(r),destroy_component(n),s[6](null)}}}function instance$b(s,r,n){let{axes:t}=r,{i:a}=r,l=0,o=0,c=0,{disabled:i=!1}=r,f,m=null,_=100,u=_/3,p;onMount(async()=>{window.addEventListener("resize",p);let b;const E=qubits.subscribe(()=>{m&&(b&&clearTimeout(b),b=setTimeout(p,100))});for(;!m;)await new Promise(k=>setTimeout(k,100));const x=t.subscribe(([k,T,j])=>{m&&(l=j,o=T,c=k,m&&m.draw())});return()=>{b&&clearTimeout(b),window.removeEventListener("resize",p),E(),x(),m==null||m.remove(),m=null}});const g=b=>{m=b.detail},y=b=>{function E(j,A){return j>0&&j<b.height&&A>0&&A<b.height}function x(){if(!f)return;const j=f.getBoundingClientRect();_=min(j.width-100,500),u=_/3}function k(){x(),b.resizeCanvas(_,_),redrawCables()}b.mouseIsPressed=!1,b.mousePressed=j=>{const A=j.target instanceof HTMLCanvasElement;b.mouseIsPressed=A&&E(b.mouseX,b.mouseY)},b.mouseReleased=j=>b.mouseIsPressed=!1,b.setup=()=>{x(),b.createCanvas(_,_,b.WEBGL),b.smooth(),b.noLoop(),p=debounce(k,100)};const T=throttle(()=>!E(b.mouseX,b.mouseY)||!b.mouseIsPressed?void 0:(b.keyIsPressed&&b.key==="Shift"?c=clamp$1(b.mouseX/(b.width*.95)):(o=clamp$1(b.mouseX/(b.width*.95)),l=clamp$1(b.mouseY/(b.height*.95))),t.set([c,o,l]),focusedQubit.set(a),!1),25);b.mouseDragged=()=>{i||T()},b.draw=()=>{b.smooth(),b.background("#404040");const j=p5_minExports.Vector.fromAngles(b.radians(l*180),b.radians(o*180),u);b.push(),b.rotateY(b.radians(90)),b.ambientMaterial(194);let A=b.color("rgb(209, 206, 199)");A.setAlpha(50),b.stroke(A),b.strokeWeight(.25),b.noFill();const C=b.cos(b.radians(-o*180)),I=b.sin(b.radians(-o*180));b.applyMatrix(C,0,I,0,0,1,0,0,-I,0,C,0,0,0,0,1);const F=b.cos(b.radians(-l*180)),N=b.sin(b.radians(-l*180));b.applyMatrix(F,N,-N,F,0,0);const z=b.cos(b.radians(c*180)),R=b.sin(b.radians(c*180));b.applyMatrix(z,0,R,0,0,1,0,0,-R,0,z,0,0,0,0,1),b.sphere(u-2,20,20),b.pop(),b.push(),b.stroke("white"),b.translate(j.x,j.y,j.z),b.sphere(4),b.pop(),b.push(),b.noFill(),b.stroke("#FF695A"),b.strokeWeight(4),b.rotateY(b.radians(90)),b.rotateY(b.radians(o*180)),b.circle(0,0,u*2),b.pop(),b.push(),b.noFill(),b.stroke("#E5007F"),b.strokeWeight(4),b.rotateX(b.radians(90)),b.translate(0,0,-j.y),b.circle(0,0,b.sin(b.radians(l*180))*u*2),b.pop()}};function S(b){binding_callbacks[b?"unshift":"push"](()=>{f=b,n(1,f)})}return s.$$set=b=>{"axes"in b&&n(4,t=b.axes),"i"in b&&n(5,a=b.i),"disabled"in b&&n(0,i=b.disabled)},[i,f,g,y,t,a,S]}class Qubit extends SvelteComponent{constructor(r){super(),init(this,r,instance$b,create_fragment$b,safe_not_equal,{axes:4,i:5,disabled:0})}}const Patchbay_svelte_svelte_type_style_lang="";function get_each_context$3(s,r,n){const t=s.slice();return t[4]=r[n],t[6]=n,t}function create_each_block$3(s){let r,n,t=s[1][s[6]]+"",a,l,o,c,i;return o=new Socket({props:{id:s[4],type:"remote",colour:s[2][s[6]],offset:s[3][s[6]]}}),{c(){r=element("div"),n=element("h3"),a=text(t),l=space(),create_component(o.$$.fragment),c=space(),this.h()},l(f){r=claim_element(f,"DIV",{class:!0});var m=children(r);n=claim_element(m,"H3",{style:!0,class:!0});var _=children(n);a=claim_text(_,t),_.forEach(detach),l=claim_space(m),claim_component(o.$$.fragment,m),c=claim_space(m),m.forEach(detach),this.h()},h(){set_style(n,"color",s[2][s[6]]),attr(n,"class","svelte-147su5n"),attr(r,"class","socket svelte-147su5n")},m(f,m){insert_hydration(f,r,m),append_hydration(r,n),append_hydration(n,a),append_hydration(r,l),mount_component(o,r,null),append_hydration(r,c),i=!0},p(f,m){(!i||m&2)&&t!==(t=f[1][f[6]]+"")&&set_data(a,t);const _={};m&1&&(_.id=f[4]),o.$set(_)},i(f){i||(transition_in(o.$$.fragment,f),i=!0)},o(f){transition_out(o.$$.fragment,f),i=!1},d(f){f&&detach(r),destroy_component(o)}}}function create_fragment$a(s){let r,n,t=s[0],a=[];for(let o=0;o<t.length;o+=1)a[o]=create_each_block$3(get_each_context$3(s,t,o));const l=o=>transition_out(a[o],1,1,()=>{a[o]=null});return{c(){r=element("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<a.length;i+=1)a[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","patchbay svelte-147su5n")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,null);n=!0},p(o,[c]){if(c&15){t=o[0];let i;for(i=0;i<t.length;i+=1){const f=get_each_context$3(o,t,i);a[i]?(a[i].p(f,c),transition_in(a[i],1)):(a[i]=create_each_block$3(f),a[i].c(),transition_in(a[i],1),a[i].m(r,null))}for(group_outros(),i=t.length;i<a.length;i+=1)l(i);check_outros()}},i(o){if(!n){for(let c=0;c<t.length;c+=1)transition_in(a[c]);n=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);n=!1},d(o){o&&detach(r),destroy_each(a,o)}}}function instance$a(s,r,n){let{ids:t}=r,{labels:a}=r;const l=["#FF695A","#E5007F","#00A399"],o=[5,0,-5];return s.$$set=c=>{"ids"in c&&n(0,t=c.ids),"labels"in c&&n(1,a=c.labels)},[t,a,l,o]}class Patchbay extends SvelteComponent{constructor(r){super(),init(this,r,instance$a,create_fragment$a,safe_not_equal,{ids:0,labels:1})}}const Qubits_svelte_svelte_type_style_lang="",{window:window_1$1}=globals;function get_each_context$2(s,r,n){const t=s.slice();return t[21]=r[n],t[23]=n,t}function get_each_context_1(s,r,n){const t=s.slice();return t[24]=r[n],t[26]=n,t}function create_if_block$6(s){let r,n=isApp(),t,a,l,o,c,i,f,m=n&&create_if_block_2$3(s);l=new Qubit({props:{i:s[23],axes:s[21],disabled:s[9][s[23]].user!=="you"||s[11]}});let _=!s[4]&&create_if_block_1$3(s);return{c(){r=element("div"),m&&m.c(),t=space(),a=element("div"),create_component(l.$$.fragment),o=space(),_&&_.c(),c=space(),this.h()},l(u){r=claim_element(u,"DIV",{class:!0,style:!0});var p=children(r);m&&m.l(p),t=claim_space(p),a=claim_element(p,"DIV",{class:!0});var g=children(a);claim_component(l.$$.fragment,g),g.forEach(detach),o=claim_space(p),_&&_.l(p),c=claim_space(p),p.forEach(detach),this.h()},h(){attr(a,"class","qubit__qubit svelte-1i6htxo"),attr(r,"class","qubit svelte-1i6htxo"),attr(r,"style",i="border-color: "+(s[10]===s[23]&&!s[4]?"var(--color-yellow)":getUserColour(s[9][s[23]].user))+"; "+(s[4]?s[6]+s[5]:"")+";"),toggle_class(r,"qubit--single",s[2]),toggle_class(r,"qubit--double",s[1]),toggle_class(r,"qubit--triple",s[8]),toggle_class(r,"qubit--full-height",s[7]),toggle_class(r,"qubit--border",s[3]>1&&(!s[4]&&s[10]===s[23]||s[9][s[23]].user!=="you"))},m(u,p){insert_hydration(u,r,p),m&&m.m(r,null),append_hydration(r,t),append_hydration(r,a),mount_component(l,a,null),append_hydration(r,o),_&&_.m(r,null),append_hydration(r,c),f=!0},p(u,p){n&&m.p(u,p);const g={};p&2560&&(g.disabled=u[9][u[23]].user!=="you"||u[11]),l.$set(g),u[4]?_&&(group_outros(),transition_out(_,1,1,()=>{_=null}),check_outros()):_?(_.p(u,p),p&16&&transition_in(_,1)):(_=create_if_block_1$3(u),_.c(),transition_in(_,1),_.m(r,c)),(!f||p&1648&&i!==(i="border-color: "+(u[10]===u[23]&&!u[4]?"var(--color-yellow)":getUserColour(u[9][u[23]].user))+"; "+(u[4]?u[6]+u[5]:"")+";"))&&attr(r,"style",i),(!f||p&4)&&toggle_class(r,"qubit--single",u[2]),(!f||p&2)&&toggle_class(r,"qubit--double",u[1]),(!f||p&256)&&toggle_class(r,"qubit--triple",u[8]),(!f||p&128)&&toggle_class(r,"qubit--full-height",u[7]),(!f||p&1560)&&toggle_class(r,"qubit--border",u[3]>1&&(!u[4]&&u[10]===u[23]||u[9][u[23]].user!=="you"))},i(u){f||(transition_in(l.$$.fragment,u),transition_in(_),f=!0)},o(u){transition_out(l.$$.fragment,u),transition_out(_),f=!1},d(u){u&&detach(r),m&&m.d(),destroy_component(l),_&&_.d()}}}function create_if_block_2$3(s){let r,n,t=(s[23]+1).toString().padStart(2,"0")+"",a,l,o,c=getUserName(s[9][s[23]].user)+"",i;return{c(){r=element("h3"),n=element("span"),a=text(t),l=space(),o=element("span"),i=text(c),this.h()},l(f){r=claim_element(f,"H3",{class:!0});var m=children(r);n=claim_element(m,"SPAN",{style:!0,class:!0});var _=children(n);a=claim_text(_,t),_.forEach(detach),l=claim_space(m),o=claim_element(m,"SPAN",{style:!0,class:!0});var u=children(o);i=claim_text(u,c),u.forEach(detach),m.forEach(detach),this.h()},h(){set_style(n,"background-color",getUserColour(s[9][s[23]].user)),attr(n,"class","svelte-1i6htxo"),set_style(o,"background-color",getUserColour(s[9][s[23]].user)),attr(o,"class","svelte-1i6htxo"),attr(r,"class","qubit__info svelte-1i6htxo")},m(f,m){insert_hydration(f,r,m),append_hydration(r,n),append_hydration(n,a),append_hydration(r,l),append_hydration(r,o),append_hydration(o,i)},p(f,m){m&512&&set_style(n,"background-color",getUserColour(f[9][f[23]].user)),m&512&&c!==(c=getUserName(f[9][f[23]].user)+"")&&set_data(i,c),m&512&&set_style(o,"background-color",getUserColour(f[9][f[23]].user))},d(f){f&&detach(r)}}}function create_if_block_1$3(s){let r,n,t,a,l;function o(...m){return s[18](s[23],...m)}n=new Patchbay({props:{ids:s[13].map(o),labels:s[14]}});let c=get_store_value(s[21]),i=[];for(let m=0;m<c.length;m+=1)i[m]=create_each_block_1(get_each_context_1(s,c,m));const f=m=>transition_out(i[m],1,1,()=>{i[m]=null});return{c(){r=element("div"),create_component(n.$$.fragment),t=space(),a=element("div");for(let m=0;m<i.length;m+=1)i[m].c();this.h()},l(m){r=claim_element(m,"DIV",{class:!0});var _=children(r);claim_component(n.$$.fragment,_),_.forEach(detach),t=claim_space(m),a=claim_element(m,"DIV",{class:!0});var u=children(a);for(let p=0;p<i.length;p+=1)i[p].l(u);u.forEach(detach),this.h()},h(){attr(r,"class","qubit__patchbay svelte-1i6htxo"),attr(a,"class","qubit__sliders svelte-1i6htxo")},m(m,_){insert_hydration(m,r,_),mount_component(n,r,null),insert_hydration(m,t,_),insert_hydration(m,a,_);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(a,null);l=!0},p(m,_){if(s=m,_&88576){c=get_store_value(s[21]);let u;for(u=0;u<c.length;u+=1){const p=get_each_context_1(s,c,u);i[u]?(i[u].p(p,_),transition_in(i[u],1)):(i[u]=create_each_block_1(p),i[u].c(),transition_in(i[u],1),i[u].m(a,null))}for(group_outros(),u=c.length;u<i.length;u+=1)f(u);check_outros()}},i(m){if(!l){transition_in(n.$$.fragment,m);for(let _=0;_<c.length;_+=1)transition_in(i[_]);l=!0}},o(m){transition_out(n.$$.fragment,m),i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)transition_out(i[_]);l=!1},d(m){m&&detach(r),destroy_component(n),m&&detach(t),m&&detach(a),destroy_each(i,m)}}}function create_each_block_1(s){let r,n;function t(...a){return s[19](s[23],s[26],...a)}return r=new Slider({props:{id:`qubit-${s[23]}-${s[26]}`,name:s[14][2-s[26]],disabled:s[9][s[23]].user!=="you"||s[11],colour:`var(--color-theme-${3-s[26]})`,value:s[12][s[23]][s[26]]}}),r.$on("change",t),{c(){create_component(r.$$.fragment)},l(a){claim_component(r.$$.fragment,a)},m(a,l){mount_component(r,a,l),n=!0},p(a,l){s=a;const o={};l&2560&&(o.disabled=s[9][s[23]].user!=="you"||s[11]),l&4096&&(o.value=s[12][s[23]][s[26]]),r.$set(o)},i(a){n||(transition_in(r.$$.fragment,a),n=!0)},o(a){transition_out(r.$$.fragment,a),n=!1},d(a){destroy_component(r,a)}}}function create_each_block$2(s){let r,n,t=s[9][s[23]].active&&create_if_block$6(s);return{c(){t&&t.c(),r=empty()},l(a){t&&t.l(a),r=empty()},m(a,l){t&&t.m(a,l),insert_hydration(a,r,l),n=!0},p(a,l){a[9][a[23]].active?t?(t.p(a,l),l&512&&transition_in(t,1)):(t=create_if_block$6(a),t.c(),transition_in(t,1),t.m(r.parentNode,r)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(a){n||(transition_in(t),n=!0)},o(a){transition_out(t),n=!1},d(a){t&&t.d(a),a&&detach(r)}}}function create_fragment$9(s){let r,n,t,a,l=axes,o=[];for(let i=0;i<l.length;i+=1)o[i]=create_each_block$2(get_each_context$2(s,l,i));const c=i=>transition_out(o[i],1,1,()=>{o[i]=null});return{c(){r=element("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);for(let m=0;m<o.length;m+=1)o[m].l(f);f.forEach(detach),this.h()},h(){attr(r,"class","qubits svelte-1i6htxo"),toggle_class(r,"qubits--performance",s[4])},m(i,f){insert_hydration(i,r,f);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(r,null);n=!0,t||(a=[listen$1(window_1$1,"resize",s[17]),listen$1(r,"scroll",s[20])],t=!0)},p(i,[f]){if(f&98302){l=axes;let m;for(m=0;m<l.length;m+=1){const _=get_each_context$2(i,l,m);o[m]?(o[m].p(_,f),transition_in(o[m],1)):(o[m]=create_each_block$2(_),o[m].c(),transition_in(o[m],1),o[m].m(r,null))}for(group_outros(),m=l.length;m<o.length;m+=1)c(m);check_outros()}(!n||f&16)&&toggle_class(r,"qubits--performance",i[4])},i(i){if(!n){for(let f=0;f<l.length;f+=1)transition_in(o[f]);n=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)transition_out(o[f]);n=!1},d(i){i&&detach(r),destroy_each(o,i),t=!1,run_all(a)}}}function instance$9(s,r,n){let t,a,l,o,c,i,f,m,_,u,p,g;component_subscribe(s,activeQubitCount,C=>n(3,f=C)),component_subscribe(s,performanceMode,C=>n(4,m=C)),component_subscribe(s,qubits,C=>n(9,_=C)),component_subscribe(s,focusedQubit,C=>n(10,u=C)),component_subscribe(s,isMeasuring,C=>n(11,p=C)),component_subscribe(s,axesValues,C=>n(12,g=C));let y=["z","y","x"],S=["","",""],b;const E=debounce(()=>redrawCables(),1),x=(C,I,F)=>{axes[I].update(N=>(N[F]=C.detail,N))};onMount(()=>{n(0,b=window.innerWidth);const C=I=>{I.key==="Escape"&&performanceMode.set(!1)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)});const k=()=>n(0,b=window.innerWidth),T=(C,I)=>`${I}${C}`,j=(C,I,F)=>{x(F,C,I),focusedQubit.set(C)},A=()=>E();return s.$$.update=()=>{s.$$.dirty&25&&n(2,t=!m&&f===1||b<1e3),s.$$.dirty&29&&n(1,a=!m&&(f%2===0||f===3||b<1500)&&!t),s.$$.dirty&22&&n(8,l=!m&&!t&&!a),s.$$.dirty&25&&n(7,o=!m&&f===1&&b>1e3||f===2&&b>1e3),s.$$.dirty&8&&n(6,c=f<=4?`flex-basis: calc(${100/f}% - 2rem);`:f<=6?`flex-basis: calc(${100/3}% - 2rem);`:f<=8?`flex-basis: calc(${100/4}% - 2rem);`:f===9?`flex-basis: calc(${100/3}% - 2rem);`:`flex-basis: calc(${100/4}% - 2rem);`),s.$$.dirty&8&&n(5,i=`height: calc(${f<=4?"100%":f<=8?"50%":"33.3333%"} - 2rem);`)},[b,a,t,f,m,i,c,o,l,_,u,p,g,y,S,E,x,k,T,j,A]}class Qubits extends SvelteComponent{constructor(r){super(),init(this,r,instance$9,create_fragment$9,safe_not_equal,{})}}const index_svelte_svelte_type_style_lang="";function get_each_context$1(s,r,n){const t=s.slice();return t[4]=r[n].name,t}function create_each_block$1(s){let r,n;function t(){return s[3](s[4])}return r=new Button({props:{onClick:t,active:s[1]===s[4],disabled:s[1]!==s[4],colour:"yellow",text:s[4],icon:s[2][s[4]],classes:s[0]==="horizontal"?"mr-2":"mb-2"}}),{c(){create_component(r.$$.fragment)},l(a){claim_component(r.$$.fragment,a)},m(a,l){mount_component(r,a,l),n=!0},p(a,l){s=a;const o={};l&2&&(o.active=s[1]===s[4]),l&2&&(o.disabled=s[1]!==s[4]),l&1&&(o.classes=s[0]==="horizontal"?"mr-2":"mb-2"),r.$set(o)},i(a){n||(transition_in(r.$$.fragment,a),n=!0)},o(a){transition_out(r.$$.fragment,a),n=!1},d(a){destroy_component(r,a)}}}function create_fragment$8(s){let r,n,t,a=instruments$1,l=[];for(let c=0;c<a.length;c+=1)l[c]=create_each_block$1(get_each_context$1(s,a,c));const o=c=>transition_out(l[c],1,1,()=>{l[c]=null});return{c(){r=element("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){r=claim_element(c,"DIV",{class:!0});var i=children(r);for(let f=0;f<l.length;f+=1)l[f].l(i);i.forEach(detach),this.h()},h(){attr(r,"class",n=null_to_empty(`instrument-buttons instrument-buttons--${s[0]}`)+" svelte-1r8c0w4")},m(c,i){insert_hydration(c,r,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(r,null);t=!0},p(c,[i]){if(i&7){a=instruments$1;let f;for(f=0;f<a.length;f+=1){const m=get_each_context$1(c,a,f);l[f]?(l[f].p(m,i),transition_in(l[f],1)):(l[f]=create_each_block$1(m),l[f].c(),transition_in(l[f],1),l[f].m(r,null))}for(group_outros(),f=a.length;f<l.length;f+=1)o(f);check_outros()}(!t||i&1&&n!==(n=null_to_empty(`instrument-buttons instrument-buttons--${c[0]}`)+" svelte-1r8c0w4"))&&attr(r,"class",n)},i(c){if(!t){for(let i=0;i<a.length;i+=1)transition_in(l[i]);t=!0}},o(c){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)transition_out(l[i]);t=!1},d(c){c&&detach(r),destroy_each(l,c)}}}function instance$8(s,r,n){let t;component_subscribe(s,instrument,c=>n(1,t=c)),library$1.add(faSmileWink,faNetworkWired,faCompactDisc,faBraille,faTable);const a={synth:faNetworkWired,sampler:faCompactDisc,granular:faBraille,wavetable:faTable};let{orientation:l="horizontal"}=r;const o=c=>instrument.set(c);return s.$$set=c=>{"orientation"in c&&n(0,l=c.orientation)},[l,t,a,o]}class InstrumentButtons extends SvelteComponent{constructor(r){super(),init(this,r,instance$8,create_fragment$8,safe_not_equal,{orientation:0})}}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var r={}.hasOwnProperty;function n(){for(var l="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(l=a(l,t(c)))}return l}function t(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var o="";for(var c in l)r.call(l,c)&&l[c]&&(o=a(o,c));return o}function a(l,o){return o?l?l+" "+o:l+o:l}s.exports?(n.default=n,s.exports=n):window.classNames=n})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);function create_else_block$1(s){let r=s[1],n,t,a=s[1]&&create_dynamic_element_1(s);return{c(){a&&a.c(),n=empty()},l(l){a&&a.l(l),n=empty()},m(l,o){a&&a.m(l,o),insert_hydration(l,n,o),t=!0},p(l,o){l[1]?r?safe_not_equal(r,l[1])?(a.d(1),a=create_dynamic_element_1(l),r=l[1],a.c(),a.m(n.parentNode,n)):a.p(l,o):(a=create_dynamic_element_1(l),r=l[1],a.c(),a.m(n.parentNode,n)):r&&(a.d(1),a=null,r=l[1])},i(l){t||(transition_in(a),t=!0)},o(l){transition_out(a),t=!1},d(l){l&&detach(n),a&&a.d(l)}}}function create_if_block$5(s){let r=s[1],n,t=!1,a,l=s[1]&&create_dynamic_element(s);return{c(){l&&l.c(),n=empty()},l(o){l&&l.l(o),n=empty()},m(o,c){l&&l.m(o,c),insert_hydration(o,n,c),a=!0},p(o,c){o[1]?r?safe_not_equal(r,o[1])?(l.d(1),l=create_dynamic_element(o),r=o[1],l.c(),t&&(t=!1,transition_in(l)),l.m(n.parentNode,n)):(t&&(t=!1,transition_in(l)),l.p(o,c)):(l=create_dynamic_element(o),r=o[1],l.c(),transition_in(l),l.m(n.parentNode,n)):r&&(t=!0,group_outros(),transition_out(l,1,1,()=>{l=null,r=o[1],t=!1}),check_outros())},i(o){a||(transition_in(l),a=!0)},o(o){transition_out(l),a=!1},d(o){o&&detach(n),l&&l.d(o)}}}function create_dynamic_element_1(s){let r,n,t,a,l;const o=s[13].default,c=create_slot(o,s,s[12],null);let i=[s[7],{class:s[6]}],f={};for(let m=0;m<i.length;m+=1)f=assign(f,i[m]);return{c(){r=element(s[1]),c&&c.c(),this.h()},l(m){r=claim_element(m,(s[1]||"null").toUpperCase(),{class:!0});var _=children(r);c&&c.l(_),_.forEach(detach),this.h()},h(){set_dynamic_element_data(s[1])(r,f)},m(m,_){insert_hydration(m,r,_),c&&c.m(r,null),s[23](r),t=!0,a||(l=[action_destroyer(n=s[4].call(null,r,s[5])),listen$1(r,"mouseenter",s[18]),listen$1(r,"mouseleave",s[19]),listen$1(r,"focusin",s[20]),listen$1(r,"focusout",s[21])],a=!0)},p(m,_){c&&c.p&&(!t||_&4096)&&update_slot_base(c,o,m,m[12],t?get_slot_changes(o,m[12],_,null):get_all_dirty_from_scope(m[12]),null),set_dynamic_element_data(m[1])(r,f=get_spread_update(i,[_&128&&m[7],(!t||_&64)&&{class:m[6]}])),n&&is_function(n.update)&&_&32&&n.update.call(null,m[5])},i(m){t||(transition_in(c,m),t=!0)},o(m){transition_out(c,m),t=!1},d(m){m&&detach(r),c&&c.d(m),s[23](null),a=!1,run_all(l)}}}function create_dynamic_element(s){let r,n,t,a,l,o;const c=s[13].default,i=create_slot(c,s,s[12],null);let f=[s[7],{class:s[6]}],m={};for(let _=0;_<f.length;_+=1)m=assign(m,f[_]);return{c(){r=element(s[1]),i&&i.c(),this.h()},l(_){r=claim_element(_,(s[1]||"null").toUpperCase(),{class:!0});var u=children(r);i&&i.l(u),u.forEach(detach),this.h()},h(){set_dynamic_element_data(s[1])(r,m)},m(_,u){insert_hydration(_,r,u),i&&i.m(r,null),s[22](r),a=!0,l||(o=[action_destroyer(n=s[4].call(null,r,s[5])),listen$1(r,"mouseenter",s[14]),listen$1(r,"mouseleave",s[15]),listen$1(r,"focusin",s[16]),listen$1(r,"focusout",s[17])],l=!0)},p(_,u){s=_,i&&i.p&&(!a||u&4096)&&update_slot_base(i,c,s,s[12],a?get_slot_changes(c,s[12],u,null):get_all_dirty_from_scope(s[12]),null),set_dynamic_element_data(s[1])(r,m=get_spread_update(f,[u&128&&s[7],(!a||u&64)&&{class:s[6]}])),n&&is_function(n.update)&&u&32&&n.update.call(null,s[5])},i(_){a||(transition_in(i,_),add_render_callback(()=>{a&&(t||(t=create_bidirectional_transition(r,s[2],s[3],!0)),t.run(1))}),a=!0)},o(_){transition_out(i,_),t||(t=create_bidirectional_transition(r,s[2],s[3],!1)),t.run(0),a=!1},d(_){_&&detach(r),i&&i.d(_),s[22](null),_&&t&&t.end(),l=!1,run_all(o)}}}function create_fragment$7(s){let r,n,t,a;const l=[create_if_block$5,create_else_block$1],o=[];function c(i,f){return i[2]?0:1}return r=c(s),n=o[r]=l[r](s),{c(){n.c(),t=empty()},l(i){n.l(i),t=empty()},m(i,f){o[r].m(i,f),insert_hydration(i,t,f),a=!0},p(i,[f]){let m=r;r=c(i),r===m?o[r].p(i,f):(group_outros(),transition_out(o[m],1,1,()=>{o[m]=null}),check_outros(),n=o[r],n?n.p(i,f):(n=o[r]=l[r](i),n.c()),transition_in(n,1),n.m(t.parentNode,t))},i(i){a||(transition_in(n),a=!0)},o(i){transition_out(n),a=!1},d(i){o[r].d(i),i&&detach(t)}}}function instance$7(s,r,n){const t=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r;setContext$1("background",!0);let{tag:c="div"}=r,{color:i="default"}=r,{rounded:f=!1}=r,{border:m=!1}=r,{shadow:_=!1}=r,{transition:u=void 0}=r,{params:p={}}=r,{node:g=void 0}=r,{use:y=noop}=r,{options:S={}}=r;const b={gray:"bg-gray-50 dark:bg-gray-800",red:"bg-red-50 dark:bg-gray-800",yellow:"bg-yellow-50 dark:bg-gray-800 ",green:"bg-green-50 dark:bg-gray-800 ",indigo:"bg-indigo-50 dark:bg-gray-800 ",purple:"bg-purple-50 dark:bg-gray-800 ",pink:"bg-pink-50 dark:bg-gray-800 ",blue:"bg-blue-50 dark:bg-gray-800 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-50 dark:bg-gray-800",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-50 dark:bg-gray-800 ",none:""},E={gray:"text-gray-800 dark:text-gray-300",red:"text-red-800 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-300",green:"text-green-800 dark:text-green-400",indigo:"text-indigo-800 dark:text-indigo-400",purple:"text-purple-800 dark:text-purple-400",pink:"text-pink-800 dark:text-pink-400",blue:"text-blue-800 dark:text-blue-400",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-800 dark:text-primary-400",none:""},x={gray:"border-gray-300 dark:border-gray-800",red:"border-red-300 dark:border-red-800",yellow:"border-yellow-300 dark:border-yellow-800",green:"border-green-300 dark:border-green-800",indigo:"border-indigo-300 dark:border-indigo-800",purple:"border-purple-300 dark:border-purple-800",pink:"border-pink-300 dark:border-pink-800",blue:"border-blue-300 dark:border-blue-800",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let k;function T(M){bubble.call(this,s,M)}function j(M){bubble.call(this,s,M)}function A(M){bubble.call(this,s,M)}function C(M){bubble.call(this,s,M)}function I(M){bubble.call(this,s,M)}function F(M){bubble.call(this,s,M)}function N(M){bubble.call(this,s,M)}function z(M){bubble.call(this,s,M)}function R(M){binding_callbacks[M?"unshift":"push"](()=>{g=M,n(0,g)})}function q(M){binding_callbacks[M?"unshift":"push"](()=>{g=M,n(0,g)})}return s.$$set=M=>{n(27,r=assign(assign({},r),exclude_internal_props(M))),n(7,a=compute_rest_props(r,t)),"tag"in M&&n(1,c=M.tag),"color"in M&&n(8,i=M.color),"rounded"in M&&n(9,f=M.rounded),"border"in M&&n(10,m=M.border),"shadow"in M&&n(11,_=M.shadow),"transition"in M&&n(2,u=M.transition),"params"in M&&n(3,p=M.params),"node"in M&&n(0,g=M.node),"use"in M&&n(4,y=M.use),"options"in M&&n(5,S=M.options),"$$scope"in M&&n(12,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&256&&setContext$1("color",i),n(6,k=classNames(b[i],E[i],f&&(i==="dropdown"?"rounded":"rounded-lg"),m&&"border",x[i],_&&"shadow-md",r.class))},r=exclude_internal_props(r),[g,c,u,p,y,S,k,a,i,f,m,_,o,l,T,j,A,C,I,F,N,z,R,q]}class Frame extends SvelteComponent{constructor(r){super(),init(this,r,instance$7,create_fragment$7,safe_not_equal,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}function blur(s,{delay:r=0,duration:n=400,easing:t=cubicInOut,amount:a=5,opacity:l=0}={}){const o=getComputedStyle(s),c=+o.opacity,i=o.filter==="none"?"":o.filter,f=c*(1-l),[m,_]=split_css_unit(a);return{delay:r,duration:n,easing:t,css:(u,p)=>`opacity: ${c-f*p}; filter: ${i} blur(${p*m}${_});`}}function fade(s,{delay:r=0,duration:n=400,easing:t=identity}={}){const a=+getComputedStyle(s).opacity;return{delay:r,duration:n,easing:t,css:l=>`opacity: ${l*a}`}}function fly(s,{delay:r=0,duration:n=400,easing:t=cubicOut,x:a=0,y:l=0,opacity:o=0}={}){const c=getComputedStyle(s),i=+c.opacity,f=c.transform==="none"?"":c.transform,m=i*(1-o),[_,u]=split_css_unit(a),[p,g]=split_css_unit(l);return{delay:r,duration:n,easing:t,css:(y,S)=>`
			transform: ${f} translate(${(1-y)*_}${u}, ${(1-y)*p}${g});
			opacity: ${i-m*S}`}}function slide(s,{delay:r=0,duration:n=400,easing:t=cubicOut,axis:a="y"}={}){const l=getComputedStyle(s),o=+l.opacity,c=a==="y"?"height":"width",i=parseFloat(l[c]),f=a==="y"?["top","bottom"]:["left","right"],m=f.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),_=parseFloat(l[`padding${m[0]}`]),u=parseFloat(l[`padding${m[1]}`]),p=parseFloat(l[`margin${m[0]}`]),g=parseFloat(l[`margin${m[1]}`]),y=parseFloat(l[`border${m[0]}Width`]),S=parseFloat(l[`border${m[1]}Width`]);return{delay:r,duration:n,easing:t,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*o};${c}: ${b*i}px;padding-${f[0]}: ${b*_}px;padding-${f[1]}: ${b*u}px;margin-${f[0]}: ${b*p}px;margin-${f[1]}: ${b*g}px;border-${f[0]}-width: ${b*y}px;border-${f[1]}-width: ${b*S}px;`}}const get_default_slot_changes$1=s=>({svgSize:s&4}),get_default_slot_context$1=s=>({svgSize:s[4][s[2]]});function create_if_block$4(s){let r,n;return{c(){r=element("span"),n=text(s[0]),this.h()},l(t){r=claim_element(t,"SPAN",{class:!0});var a=children(r);n=claim_text(a,s[0]),a.forEach(detach),this.h()},h(){attr(r,"class","sr-only")},m(t,a){insert_hydration(t,r,a),append_hydration(r,n)},p(t,a){a&1&&set_data(n,t[0])},d(t){t&&detach(r)}}}function create_fragment$6(s){let r,n,t,a,l,o,c=s[0]&&create_if_block$4(s);const i=s[8].default,f=create_slot(i,s,s[7],get_default_slot_context$1);let m=[{type:"button"},s[5],{class:s[3]},{"aria-label":t=s[1]??s[0]}],_={};for(let u=0;u<m.length;u+=1)_=assign(_,m[u]);return{c(){r=element("button"),c&&c.c(),n=space(),f&&f.c(),this.h()},l(u){r=claim_element(u,"BUTTON",{type:!0,class:!0,"aria-label":!0});var p=children(r);c&&c.l(p),n=claim_space(p),f&&f.l(p),p.forEach(detach),this.h()},h(){set_attributes(r,_)},m(u,p){insert_hydration(u,r,p),c&&c.m(r,null),append_hydration(r,n),f&&f.m(r,null),r.autofocus&&r.focus(),a=!0,l||(o=listen$1(r,"click",s[9]),l=!0)},p(u,[p]){u[0]?c?c.p(u,p):(c=create_if_block$4(u),c.c(),c.m(r,n)):c&&(c.d(1),c=null),f&&f.p&&(!a||p&132)&&update_slot_base(f,i,u,u[7],a?get_slot_changes(i,u[7],p,get_default_slot_changes$1):get_all_dirty_from_scope(u[7]),get_default_slot_context$1),set_attributes(r,_=get_spread_update(m,[{type:"button"},p&32&&u[5],(!a||p&8)&&{class:u[3]},(!a||p&3&&t!==(t=u[1]??u[0]))&&{"aria-label":t}]))},i(u){a||(transition_in(f,u),a=!0)},o(u){transition_out(f,u),a=!1},d(u){u&&detach(r),c&&c.d(),f&&f.d(u),l=!1,o()}}}function instance$6(s,r,n){const t=["color","name","ariaLabel","size"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r;const c=getContext$1("background");let{color:i="default"}=r,{name:f=void 0}=r,{ariaLabel:m=void 0}=r,{size:_="md"}=r;const u={dark:"text-gray-500 hover:text-gray-900 hover:bg-gray-200 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700",gray:"text-gray-500 focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",red:"text-red-500 focus:ring-red-400 hover:bg-red-200 dark:hover:bg-gray-700",yellow:"text-yellow-500 focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-gray-700",green:"text-green-500 focus:ring-green-400 hover:bg-green-200 dark:hover:bg-gray-700",indigo:"text-indigo-500 focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-gray-700",purple:"text-purple-500 focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-gray-700",pink:"text-pink-500 focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-gray-700",blue:"text-blue-500 focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-gray-700",default:"focus:ring-gray-400 "},p={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let g;const y={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function S(b){bubble.call(this,s,b)}return s.$$set=b=>{n(13,r=assign(assign({},r),exclude_internal_props(b))),n(5,a=compute_rest_props(r,t)),"color"in b&&n(6,i=b.color),"name"in b&&n(0,f=b.name),"ariaLabel"in b&&n(1,m=b.ariaLabel),"size"in b&&n(2,_=b.size),"$$scope"in b&&n(7,o=b.$$scope)},s.$$.update=()=>{n(3,g=classNames("focus:outline-none whitespace-normal",p[_],u[i],i==="default"&&(c?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),r.class))},r=exclude_internal_props(r),[f,m,_,g,y,a,i,o,l,S]}class ToolbarButton extends SvelteComponent{constructor(r){super(),init(this,r,instance$6,create_fragment$6,safe_not_equal,{color:6,name:0,ariaLabel:1,size:2})}}function create_default_slot$3(s){let r,n,t;return{c(){r=svg_element("svg"),n=svg_element("path"),this.h()},l(a){r=claim_svg_element(a,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var l=children(r);n=claim_svg_element(l,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),l.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),attr(n,"clip-rule","evenodd"),attr(r,"class",t=s[4]),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg")},m(a,l){insert_hydration(a,r,l),append_hydration(r,n)},p(a,l){l&16&&t!==(t=a[4])&&attr(r,"class",t)},d(a){a&&detach(r)}}}function create_fragment$5(s){let r,n;const t=[{name:s[0]},s[1],{class:classNames("ml-auto",s[2].class)}];let a={$$slots:{default:[create_default_slot$3,({svgSize:l})=>({4:l}),({svgSize:l})=>l?16:0]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return r=new ToolbarButton({props:a}),r.$on("click",s[3]),{c(){create_component(r.$$.fragment)},l(l){claim_component(r.$$.fragment,l)},m(l,o){mount_component(r,l,o),n=!0},p(l,[o]){const c=o&7?get_spread_update(t,[o&1&&{name:l[0]},o&2&&get_spread_object(l[1]),o&4&&{class:classNames("ml-auto",l[2].class)}]):{};o&48&&(c.$$scope={dirty:o,ctx:l}),r.$set(c)},i(l){n||(transition_in(r.$$.fragment,l),n=!0)},o(l){transition_out(r.$$.fragment,l),n=!1},d(l){destroy_component(r,l)}}}function instance$5(s,r,n){const t=["name"];let a=compute_rest_props(r,t),{name:l="Close"}=r;function o(c){bubble.call(this,s,c)}return s.$$set=c=>{n(2,r=assign(assign({},r),exclude_internal_props(c))),n(1,a=compute_rest_props(r,t)),"name"in c&&n(0,l=c.name)},r=exclude_internal_props(r),[l,a,r,o]}class CloseButton extends SvelteComponent{constructor(r){super(),init(this,r,instance$5,create_fragment$5,safe_not_equal,{name:0})}}const Thumbnail_svelte_svelte_type_style_lang="",Indicator_svelte_svelte_type_style_lang="",clickOutside=(s,r)=>{const n=t=>{t!=null&&t.target&&s&&!s.contains(t.target)&&!t.defaultPrevented&&r()};return document.addEventListener("click",n,!0),{destroy(){document.removeEventListener("click",n,!0)}}},get_default_slot_changes_1=s=>({hidden:s&1}),get_default_slot_context_1=s=>({hidden:s[0]}),get_default_slot_changes=s=>({hidden:s&1}),get_default_slot_context=s=>({hidden:s[0]});function create_if_block$3(s){let r,n,t,a,l;function o(u,p){if(u[4]&&u[1])return create_if_block_2$2;if(u[4]&&!u[1])return create_if_block_3}let c=o(s),i=c&&c(s);const f=[create_if_block_1$2,create_else_block],m=[];function _(u,p){return u[1]?0:1}return n=_(s),t=m[n]=f[n](s),{c(){i&&i.c(),r=space(),t.c(),a=empty()},l(u){i&&i.l(u),r=claim_space(u),t.l(u),a=empty()},m(u,p){i&&i.m(u,p),insert_hydration(u,r,p),m[n].m(u,p),insert_hydration(u,a,p),l=!0},p(u,p){c===(c=o(u))&&i?i.p(u,p):(i&&i.d(1),i=c&&c(u),i&&(i.c(),i.m(r.parentNode,r)));let g=n;n=_(u),n===g?m[n].p(u,p):(group_outros(),transition_out(m[g],1,1,()=>{m[g]=null}),check_outros(),t=m[n],t?t.p(u,p):(t=m[n]=f[n](u),t.c()),transition_in(t,1),t.m(a.parentNode,a))},i(u){l||(transition_in(t),l=!0)},o(u){transition_out(t),l=!1},d(u){i&&i.d(u),u&&detach(r),m[n].d(u),u&&detach(a)}}}function create_if_block_3(s){let r;return{c(){r=element("div"),this.h()},l(n){r=claim_element(n,"DIV",{role:!0,class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"role","presentation"),attr(r,"class",s[12])},m(n,t){insert_hydration(n,r,t)},p:noop,d(n){n&&detach(r)}}}function create_if_block_2$2(s){let r,n,t;return{c(){r=element("div"),this.h()},l(a){r=claim_element(a,"DIV",{role:!0,class:!0}),children(r).forEach(detach),this.h()},h(){attr(r,"role","presentation"),attr(r,"class",s[12])},m(a,l){insert_hydration(a,r,l),n||(t=listen$1(r,"click",s[24]),n=!0)},p:noop,d(a){a&&detach(r),n=!1,t()}}}function create_else_block(s){let r,n,t,a;const l=s[23].default,o=create_slot(l,s,s[22],get_default_slot_context_1);let c=[{id:s[6]},s[13],{class:n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)},{tabindex:"-1"},{"aria-controls":s[6]},{"aria-labelledby":s[6]}],i={};for(let f=0;f<c.length;f+=1)i=assign(i,c[f]);return{c(){r=element("div"),o&&o.c(),this.h()},l(f){r=claim_element(f,"DIV",{id:!0,class:!0,tabindex:!0,"aria-controls":!0,"aria-labelledby":!0});var m=children(r);o&&o.l(m),m.forEach(detach),this.h()},h(){set_attributes(r,i)},m(f,m){insert_hydration(f,r,m),o&&o.m(r,null),a=!0},p(f,m){s=f,o&&o.p&&(!a||m&4194305)&&update_slot_base(o,l,s,s[22],a?get_slot_changes(l,s[22],m,get_default_slot_changes_1):get_all_dirty_from_scope(s[22]),get_default_slot_context_1),set_attributes(r,i=get_spread_update(c,[(!a||m&64)&&{id:s[6]},m&8192&&s[13],(!a||m&16556&&n!==(n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)))&&{class:n},{tabindex:"-1"},(!a||m&64)&&{"aria-controls":s[6]},(!a||m&64)&&{"aria-labelledby":s[6]}]))},i(f){a||(transition_in(o,f),add_render_callback(()=>{a&&(t||(t=create_bidirectional_transition(r,s[9],s[8],!0)),t.run(1))}),a=!0)},o(f){transition_out(o,f),t||(t=create_bidirectional_transition(r,s[9],s[8],!1)),t.run(0),a=!1},d(f){f&&detach(r),o&&o.d(f),f&&t&&t.end()}}}function create_if_block_1$2(s){let r,n,t,a,l,o,c;const i=s[23].default,f=create_slot(i,s,s[22],get_default_slot_context);let m=[{id:s[6]},s[13],{class:n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)},{tabindex:"-1"},{"aria-controls":s[6]},{"aria-labelledby":s[6]}],_={};for(let u=0;u<m.length;u+=1)_=assign(_,m[u]);return{c(){r=element("div"),f&&f.c(),this.h()},l(u){r=claim_element(u,"DIV",{id:!0,class:!0,tabindex:!0,"aria-controls":!0,"aria-labelledby":!0});var p=children(r);f&&f.l(p),p.forEach(detach),this.h()},h(){set_attributes(r,_)},m(u,p){insert_hydration(u,r,p),f&&f.m(r,null),l=!0,o||(c=action_destroyer(t=clickOutside.call(null,r,s[25])),o=!0)},p(u,p){s=u,f&&f.p&&(!l||p&4194305)&&update_slot_base(f,i,s,s[22],l?get_slot_changes(i,s[22],p,get_default_slot_changes):get_all_dirty_from_scope(s[22]),get_default_slot_context),set_attributes(r,_=get_spread_update(m,[(!l||p&64)&&{id:s[6]},p&8192&&s[13],(!l||p&16556&&n!==(n=classNames(s[7],s[3],s[2],s[10][s[5]],s[14].class)))&&{class:n},{tabindex:"-1"},(!l||p&64)&&{"aria-controls":s[6]},(!l||p&64)&&{"aria-labelledby":s[6]}])),t&&is_function(t.update)&&p&1&&t.update.call(null,s[25])},i(u){l||(transition_in(f,u),add_render_callback(()=>{l&&(a||(a=create_bidirectional_transition(r,s[9],s[8],!0)),a.run(1))}),l=!0)},o(u){transition_out(f,u),a||(a=create_bidirectional_transition(r,s[9],s[8],!1)),a.run(0),l=!1},d(u){u&&detach(r),f&&f.d(u),u&&a&&a.end(),o=!1,c()}}}function create_fragment$4(s){let r,n,t=!s[0]&&create_if_block$3(s);return{c(){t&&t.c(),r=empty()},l(a){t&&t.l(a),r=empty()},m(a,l){t&&t.m(a,l),insert_hydration(a,r,l),n=!0},p(a,[l]){a[0]?t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros()):t?(t.p(a,l),l&1&&transition_in(t,1)):(t=create_if_block$3(a),t.c(),transition_in(t,1),t.m(r.parentNode,r))},i(a){n||(transition_in(t),n=!0)},o(a){transition_out(t),n=!1},d(a){t&&t.d(a),a&&detach(r)}}}function instance$4(s,r,n){const t=["activateClickOutside","hidden","position","leftOffset","rightOffset","topOffset","bottomOffset","width","backdrop","bgColor","bgOpacity","placement","id","divClass","transitionParams","transitionType"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r,{activateClickOutside:c=!0}=r,{hidden:i=!0}=r,{position:f="fixed"}=r,{leftOffset:m="inset-y-0 left-0"}=r,{rightOffset:_="inset-y-0 right-0"}=r,{topOffset:u="inset-x-0 top-0"}=r,{bottomOffset:p="inset-x-0 bottom-0"}=r,{width:g="w-80"}=r,{backdrop:y=!0}=r,{bgColor:S="bg-gray-900"}=r,{bgOpacity:b="bg-opacity-75"}=r,{placement:E="left"}=r,{id:x="drawer-example"}=r,{divClass:k="overflow-y-auto z-50 p-4 bg-white dark:bg-gray-800"}=r,{transitionParams:T={}}=r,{transitionType:j="fly"}=r;function A(R,q){switch(j){case"slide":return slide(R,q);case"blur":return blur(R,q);case"fade":return fade(R,q);default:return fly(R,q)}}const C={left:m,right:_,top:u,bottom:p},I=()=>{n(0,i=!i)};let F=classNames("fixed top-0 left-0 z-50 w-full h-full",y&&S,y&&b);const N=()=>!i&&I(),z=()=>!i&&I();return s.$$set=R=>{n(14,r=assign(assign({},r),exclude_internal_props(R))),n(13,a=compute_rest_props(r,t)),"activateClickOutside"in R&&n(1,c=R.activateClickOutside),"hidden"in R&&n(0,i=R.hidden),"position"in R&&n(2,f=R.position),"leftOffset"in R&&n(15,m=R.leftOffset),"rightOffset"in R&&n(16,_=R.rightOffset),"topOffset"in R&&n(17,u=R.topOffset),"bottomOffset"in R&&n(18,p=R.bottomOffset),"width"in R&&n(3,g=R.width),"backdrop"in R&&n(4,y=R.backdrop),"bgColor"in R&&n(19,S=R.bgColor),"bgOpacity"in R&&n(20,b=R.bgOpacity),"placement"in R&&n(5,E=R.placement),"id"in R&&n(6,x=R.id),"divClass"in R&&n(7,k=R.divClass),"transitionParams"in R&&n(8,T=R.transitionParams),"transitionType"in R&&n(21,j=R.transitionType),"$$scope"in R&&n(22,o=R.$$scope)},r=exclude_internal_props(r),[i,c,f,g,y,E,x,k,T,A,C,I,F,a,r,m,_,u,p,S,b,j,o,l,N,z]}class Drawer extends SvelteComponent{constructor(r){super(),init(this,r,instance$4,create_fragment$4,safe_not_equal,{activateClickOutside:1,hidden:0,position:2,leftOffset:15,rightOffset:16,topOffset:17,bottomOffset:18,width:3,backdrop:4,bgColor:19,bgOpacity:20,placement:5,id:6,divClass:7,transitionParams:8,transitionType:21})}}const get_extra_slot_changes=s=>({}),get_extra_slot_context=s=>({}),get_icon_slot_changes=s=>({}),get_icon_slot_context=s=>({});function create_if_block$2(s){let r,n;const t=[{rounded:!0},{border:!0},{transition:fade},s[5],{class:s[3]},{role:"alert"}];let a={$$slots:{default:[create_default_slot$2]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)a=assign(a,t[l]);return r=new Frame({props:a}),{c(){create_component(r.$$.fragment)},l(l){claim_component(r.$$.fragment,l)},m(l,o){mount_component(r,l,o),n=!0},p(l,o){const c=o&40?get_spread_update(t,[t[0],t[1],o&0&&{transition:fade},o&32&&get_spread_object(l[5]),o&8&&{class:l[3]},t[5]]):{};o&2135&&(c.$$scope={dirty:o,ctx:l}),r.$set(c)},i(l){n||(transition_in(r.$$.fragment,l),n=!0)},o(l){transition_out(r.$$.fragment,l),n=!1},d(l){destroy_component(r,l)}}}function create_if_block_2$1(s){let r,n;return r=new Frame({props:{color:s[1],rounded:!0,class:s[4],$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:s}}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&2&&(l.color=t[1]),a&16&&(l.class=t[4]),a&2048&&(l.$$scope={dirty:a,ctx:t}),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot_1$1(s){let r;const n=s[9].icon,t=create_slot(n,s,s[11],get_icon_slot_context);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,l){t&&t.m(a,l),r=!0},p(a,l){t&&t.p&&(!r||l&2048)&&update_slot_base(t,n,a,a[11],r?get_slot_changes(n,a[11],l,get_icon_slot_changes):get_all_dirty_from_scope(a[11]),get_icon_slot_context)},i(a){r||(transition_in(t,a),r=!0)},o(a){transition_out(t,a),r=!1},d(a){t&&t.d(a)}}}function create_if_block_1$1(s){let r,n;return r=new CloseButton({}),r.$on("click",s[10]),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p:noop,i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_default_slot$2(s){let r,n,t,a,l,o,c,i=s[6].icon&&create_if_block_2$1(s);const f=s[9].default,m=create_slot(f,s,s[11],null),_=s[9].extra,u=create_slot(_,s,s[11],get_extra_slot_context);let p=!s[2]&&create_if_block_1$1(s);return{c(){r=element("div"),i&&i.c(),n=space(),t=element("div"),m&&m.c(),a=space(),u&&u.c(),l=space(),p&&p.c(),this.h()},l(g){r=claim_element(g,"DIV",{class:!0});var y=children(r);i&&i.l(y),n=claim_space(y),t=claim_element(y,"DIV",{class:!0});var S=children(t);m&&m.l(S),a=claim_space(S),u&&u.l(S),S.forEach(detach),l=claim_space(y),p&&p.l(y),y.forEach(detach),this.h()},h(){attr(t,"class","text-sm font-normal w-full"),attr(r,"class",o="flex "+(s[6].extra?"items-start":"items-center"))},m(g,y){insert_hydration(g,r,y),i&&i.m(r,null),append_hydration(r,n),append_hydration(r,t),m&&m.m(t,null),append_hydration(t,a),u&&u.m(t,null),append_hydration(r,l),p&&p.m(r,null),c=!0},p(g,y){g[6].icon?i?(i.p(g,y),y&64&&transition_in(i,1)):(i=create_if_block_2$1(g),i.c(),transition_in(i,1),i.m(r,n)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros()),m&&m.p&&(!c||y&2048)&&update_slot_base(m,f,g,g[11],c?get_slot_changes(f,g[11],y,null):get_all_dirty_from_scope(g[11]),null),u&&u.p&&(!c||y&2048)&&update_slot_base(u,_,g,g[11],c?get_slot_changes(_,g[11],y,get_extra_slot_changes):get_all_dirty_from_scope(g[11]),get_extra_slot_context),g[2]?p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros()):p?(p.p(g,y),y&4&&transition_in(p,1)):(p=create_if_block_1$1(g),p.c(),transition_in(p,1),p.m(r,null)),(!c||y&64&&o!==(o="flex "+(g[6].extra?"items-start":"items-center")))&&attr(r,"class",o)},i(g){c||(transition_in(i),transition_in(m,g),transition_in(u,g),transition_in(p),c=!0)},o(g){transition_out(i),transition_out(m,g),transition_out(u,g),transition_out(p),c=!1},d(g){g&&detach(r),i&&i.d(),m&&m.d(g),u&&u.d(g),p&&p.d()}}}function create_fragment$3(s){let r,n,t=s[0]&&create_if_block$2(s);return{c(){t&&t.c(),r=empty()},l(a){t&&t.l(a),r=empty()},m(a,l){t&&t.m(a,l),insert_hydration(a,r,l),n=!0},p(a,[l]){a[0]?t?(t.p(a,l),l&1&&transition_in(t,1)):(t=create_if_block$2(a),t.c(),transition_in(t,1),t.m(r.parentNode,r)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(a){n||(transition_in(t),n=!0)},o(a){transition_out(t),n=!1},d(a){t&&t.d(a),a&&detach(r)}}}function instance$3(s,r,n){const t=["color","simple","position","open","divClass"];let a=compute_rest_props(r,t),{$$slots:l={},$$scope:o}=r;const c=compute_slots(l);let{color:i="blue"}=r,{simple:f=!1}=r,{position:m="none"}=r,{open:_=!0}=r,{divClass:u="w-full max-w-xs p-4"}=r;const p={"top-left":"absolute top-5 left-5","top-right":"absolute top-5 right-5","bottom-left":"absolute bottom-5 left-5","bottom-right":"absolute bottom-5 right-5",none:""};let g,y;const S=()=>n(0,_=!1);return s.$$set=b=>{n(13,r=assign(assign({},r),exclude_internal_props(b))),n(5,a=compute_rest_props(r,t)),"color"in b&&n(1,i=b.color),"simple"in b&&n(2,f=b.simple),"position"in b&&n(7,m=b.position),"open"in b&&n(0,_=b.open),"divClass"in b&&n(8,u=b.divClass),"$$scope"in b&&n(11,o=b.$$scope)},s.$$.update=()=>{n(3,g=classNames(u,p[m],r.class))},n(4,y=classNames("inline-flex items-center justify-center flex-shrink-0 w-8 h-8 mr-3")),r=exclude_internal_props(r),[_,i,f,g,y,a,c,m,u,l,S,o]}class Toast extends SvelteComponent{constructor(r){super(),init(this,r,instance$3,create_fragment$3,safe_not_equal,{color:1,simple:2,position:7,open:0,divClass:8})}}function create_if_block_2(s){let r,n,t;function a(o){s[8](o)}let l={color:"pink",class:"mb-2",$$slots:{icon:[create_icon_slot_2],default:[create_default_slot_2]},$$scope:{ctx:s}};return s[2]!==void 0&&(l.open=s[2]),r=new Toast({props:l}),binding_callbacks.push(()=>bind(r,"open",a)),r.$on("close",s[9]),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){const i={};c&4097&&(i.$$scope={dirty:c,ctx:o}),!n&&c&4&&(n=!0,i.open=o[2],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_if_block_1(s){let r,n,t;function a(o){s[6](o)}let l={color:"red",class:"mb-2",$$slots:{icon:[create_icon_slot_1],default:[create_default_slot_1]},$$scope:{ctx:s}};return s[2]!==void 0&&(l.open=s[2]),r=new Toast({props:l}),binding_callbacks.push(()=>bind(r,"open",a)),r.$on("close",s[7]),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){const i={};c&4097&&(i.$$scope={dirty:c,ctx:o}),!n&&c&4&&(n=!0,i.open=o[2],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_if_block$1(s){let r,n,t;function a(o){s[4](o)}let l={color:"green",class:"mb-2",$$slots:{icon:[create_icon_slot],default:[create_default_slot$1]},$$scope:{ctx:s}};return s[2]!==void 0&&(l.open=s[2]),r=new Toast({props:l}),binding_callbacks.push(()=>bind(r,"open",a)),r.$on("close",s[5]),{c(){create_component(r.$$.fragment)},l(o){claim_component(r.$$.fragment,o)},m(o,c){mount_component(r,o,c),t=!0},p(o,c){const i={};c&4097&&(i.$$scope={dirty:c,ctx:o}),!n&&c&4&&(n=!0,i.open=o[2],add_flush_callback(()=>n=!1)),r.$set(i)},i(o){t||(transition_in(r.$$.fragment,o),t=!0)},o(o){transition_out(r.$$.fragment,o),t=!1},d(o){destroy_component(r,o)}}}function create_default_slot_2(s){let r;return{c(){r=text(s[0])},l(n){r=claim_text(n,s[0])},m(n,t){insert_hydration(n,r,t)},p(n,t){t&1&&set_data(r,n[0])},d(n){n&&detach(r)}}}function create_icon_slot_2(s){let r,n,t,a,l;return{c(){r=svg_element("svg"),n=svg_element("path"),t=space(),a=element("span"),l=text("Warning icon"),this.h()},l(o){r=claim_svg_element(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=children(r);n=claim_svg_element(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),c.forEach(detach),t=claim_space(o),a=claim_element(o,"SPAN",{class:!0});var i=children(a);l=claim_text(i,"Warning icon"),i.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"),attr(n,"clip-rule","evenodd"),attr(r,"aria-hidden","true"),attr(r,"class","w-5 h-5"),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(a,"class","sr-only")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),insert_hydration(o,t,c),insert_hydration(o,a,c),append_hydration(a,l)},p:noop,d(o){o&&detach(r),o&&detach(t),o&&detach(a)}}}function create_default_slot_1(s){let r;return{c(){r=text(s[0])},l(n){r=claim_text(n,s[0])},m(n,t){insert_hydration(n,r,t)},p(n,t){t&1&&set_data(r,n[0])},d(n){n&&detach(r)}}}function create_icon_slot_1(s){let r,n,t,a,l;return{c(){r=svg_element("svg"),n=svg_element("path"),t=space(),a=element("span"),l=text("Error icon"),this.h()},l(o){r=claim_svg_element(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=children(r);n=claim_svg_element(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),c.forEach(detach),t=claim_space(o),a=claim_element(o,"SPAN",{class:!0});var i=children(a);l=claim_text(i,"Error icon"),i.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),attr(n,"clip-rule","evenodd"),attr(r,"aria-hidden","true"),attr(r,"class","w-5 h-5"),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(a,"class","sr-only")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),insert_hydration(o,t,c),insert_hydration(o,a,c),append_hydration(a,l)},p:noop,d(o){o&&detach(r),o&&detach(t),o&&detach(a)}}}function create_default_slot$1(s){let r;return{c(){r=text(s[0])},l(n){r=claim_text(n,s[0])},m(n,t){insert_hydration(n,r,t)},p(n,t){t&1&&set_data(r,n[0])},d(n){n&&detach(r)}}}function create_icon_slot(s){let r,n,t,a,l;return{c(){r=svg_element("svg"),n=svg_element("path"),t=space(),a=element("span"),l=text("Check icon"),this.h()},l(o){r=claim_svg_element(o,"svg",{"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=children(r);n=claim_svg_element(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(n).forEach(detach),c.forEach(detach),t=claim_space(o),a=claim_element(o,"SPAN",{class:!0});var i=children(a);l=claim_text(i,"Check icon"),i.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),attr(n,"clip-rule","evenodd"),attr(r,"aria-hidden","true"),attr(r,"class","w-5 h-5"),attr(r,"fill","currentColor"),attr(r,"viewBox","0 0 20 20"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(a,"class","sr-only")},m(o,c){insert_hydration(o,r,c),append_hydration(r,n),insert_hydration(o,t,c),insert_hydration(o,a,c),append_hydration(a,l)},p:noop,d(o){o&&detach(r),o&&detach(t),o&&detach(a)}}}function create_fragment$2(s){let r,n,t,a;const l=[create_if_block$1,create_if_block_1,create_if_block_2],o=[];function c(i,f){return i[1]==="success"?0:i[1]==="error"?1:i[1]==="warning"?2:-1}return~(r=c(s))&&(n=o[r]=l[r](s)),{c(){n&&n.c(),t=empty()},l(i){n&&n.l(i),t=empty()},m(i,f){~r&&o[r].m(i,f),insert_hydration(i,t,f),a=!0},p(i,[f]){let m=r;r=c(i),r===m?~r&&o[r].p(i,f):(n&&(group_outros(),transition_out(o[m],1,1,()=>{o[m]=null}),check_outros()),~r?(n=o[r],n?n.p(i,f):(n=o[r]=l[r](i),n.c()),transition_in(n,1),n.m(t.parentNode,t)):n=null)},i(i){a||(transition_in(n),a=!0)},o(i){transition_out(n),a=!1},d(i){~r&&o[r].d(i),i&&detach(t)}}}function instance$2(s,r,n){let{message:t}=r,{type:a}=r,{onClose:l=()=>{}}=r,o=!0,c=5;function i(){if(--c>0&&o)return setTimeout(i,1e3);n(2,o=!1),l()}onMount(()=>{i()});function f(y){o=y,n(2,o)}const m=()=>n(2,o=!1);function _(y){o=y,n(2,o)}const u=()=>n(2,o=!1);function p(y){o=y,n(2,o)}const g=()=>n(2,o=!1);return s.$$set=y=>{"message"in y&&n(0,t=y.message),"type"in y&&n(1,a=y.type),"onClose"in y&&n(3,l=y.onClose)},[t,a,o,l,f,m,_,u,p,g]}class Toast_1 extends SvelteComponent{constructor(r){super(),init(this,r,instance$2,create_fragment$2,safe_not_equal,{message:0,type:1,onClose:3})}}const Toasts_svelte_svelte_type_style_lang="";function get_each_context(s,r,n){const t=s.slice();return t[1]=r[n].message,t[2]=r[n].type,t}function create_each_block(s){let r,n;return r=new Toast_1({props:{message:s[1],type:s[2]}}),{c(){create_component(r.$$.fragment)},l(t){claim_component(r.$$.fragment,t)},m(t,a){mount_component(r,t,a),n=!0},p(t,a){const l={};a&1&&(l.message=t[1]),a&1&&(l.type=t[2]),r.$set(l)},i(t){n||(transition_in(r.$$.fragment,t),n=!0)},o(t){transition_out(r.$$.fragment,t),n=!1},d(t){destroy_component(r,t)}}}function create_fragment$1(s){let r,n,t=s[0],a=[];for(let o=0;o<t.length;o+=1)a[o]=create_each_block(get_each_context(s,t,o));const l=o=>transition_out(a[o],1,1,()=>{a[o]=null});return{c(){r=element("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){r=claim_element(o,"DIV",{class:!0});var c=children(r);for(let i=0;i<a.length;i+=1)a[i].l(c);c.forEach(detach),this.h()},h(){attr(r,"class","toasts svelte-11wu08c")},m(o,c){insert_hydration(o,r,c);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,null);n=!0},p(o,[c]){if(c&1){t=o[0];let i;for(i=0;i<t.length;i+=1){const f=get_each_context(o,t,i);a[i]?(a[i].p(f,c),transition_in(a[i],1)):(a[i]=create_each_block(f),a[i].c(),transition_in(a[i],1),a[i].m(r,null))}for(group_outros(),i=t.length;i<a.length;i+=1)l(i);check_outros()}},i(o){if(!n){for(let c=0;c<t.length;c+=1)transition_in(a[c]);n=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);n=!1},d(o){o&&detach(r),destroy_each(a,o)}}}function instance$1(s,r,n){let t;return component_subscribe(s,toasts,a=>n(0,t=a)),[t]}class Toasts extends SvelteComponent{constructor(r){super(),init(this,r,instance$1,create_fragment$1,safe_not_equal,{})}}const login=async()=>{const s=localStorage.getItem("q.id")||"",r=localStorage.getItem("q.name")||"",n=localStorage.getItem("q.location")||"";id.set(+s),name.set(r||"Quantum Explorer "+Math.random().toString(36).substring(2,10)),location$1.set(n||"Outer Space");const t=get_store_value(id)?`/api/app-user/${get_store_value(id)}/login`:"/api/app-user/register",a=get_store_value(id)?"GET":"POST";let l={headers:get_store_value(headers),method:a};return a==="POST"&&(l={...l,body:JSON.stringify({name:get_store_value(name),location:get_store_value(location$1)})}),fetch(`${get_store_value(apiDomain)}${t}`,l).then(o=>o.json()).then(o=>(o.status===404&&addToast("404: login / register","warning"),o.status===500&&addToast("500: Server error when logging in / registering","error"),o)).then(({user:o})=>{id.set(o.id),localStorage.setItem("q.id",o.id),isLoggedIn.set(!0)}).catch(o=>console.error("Error:",o))},logout$1=()=>{const s=`/api/app-user/${get_store_value(id)}/logout`;return fetch(`${get_store_value(apiDomain)}${s}`,{headers:get_store_value(headers),method:"GET"})},sendPosition=s=>{get_store_value(isLoggedIn)&&fetch(`${get_store_value(apiDomain)}/api/app-user/${get_store_value(id)}/position`,{method:"POST",headers:get_store_value(headers),body:JSON.stringify({coords:{x:s[0],y:s[1],z:s[2]}})}).then(r=>{r.status===404&&addToast("404: broadcasting position","warning"),r.status===500&&addToast("500: Server error when broadcasting position","error")}).catch(r=>console.error("Error:",r))},broadcast=()=>{const s=axes[0].subscribe(throttle(sendPosition,100));return()=>{s()}};function _typeof(s){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(s)}function _classCallCheck(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function _createClass(s,r,n){return r&&_defineProperties(s.prototype,r),n&&_defineProperties(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function _extends(){return _extends=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t])}return s},_extends.apply(this,arguments)}function _inherits(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&_setPrototypeOf(s,r)}function _getPrototypeOf(s){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(s)}function _setPrototypeOf(s,r){return _setPrototypeOf=Object.setPrototypeOf||function(t,a){return t.__proto__=a,t},_setPrototypeOf(s,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _assertThisInitialized(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _possibleConstructorReturn(s,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(s)}function _createSuper(s){var r=_isNativeReflectConstruct();return function(){var t=_getPrototypeOf(s),a;if(r){var l=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}var Channel=function(){function s(){_classCallCheck(this,s)}return _createClass(s,[{key:"listenForWhisper",value:function(n,t){return this.listen(".client-"+n,t)}},{key:"notification",value:function(n){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",n)}},{key:"stopListeningForWhisper",value:function(n,t){return this.stopListening(".client-"+n,t)}}]),s}(),EventFormatter=function(){function s(r){_classCallCheck(this,s),this.namespace=r}return _createClass(s,[{key:"format",value:function(n){return[".","\\"].includes(n.charAt(0))?n.substring(1):(this.namespace&&(n=this.namespace+"."+n),n.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(n){this.namespace=n}}]),s}(),PusherChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(t,a,l){var o;return _classCallCheck(this,n),o=r.call(this),o.name=a,o.pusher=t,o.options=l,o.eventFormatter=new EventFormatter(o.options.namespace),o.subscribe(),o}return _createClass(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(a,l){return this.on(this.eventFormatter.format(a),l),this}},{key:"listenToAll",value:function(a){var l=this;return this.subscription.bind_global(function(o,c){if(!o.startsWith("pusher:")){var i=l.options.namespace.replace(/\./g,"\\"),f=o.startsWith(i)?o.substring(i.length+1):"."+o;a(f,c)}}),this}},{key:"stopListening",value:function(a,l){return l?this.subscription.unbind(this.eventFormatter.format(a),l):this.subscription.unbind(this.eventFormatter.format(a)),this}},{key:"stopListeningToAll",value:function(a){return a?this.subscription.unbind_global(a):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(a){return this.on("pusher:subscription_succeeded",function(){a()}),this}},{key:"error",value:function(a){return this.on("pusher:subscription_error",function(l){a(l)}),this}},{key:"on",value:function(a,l){return this.subscription.bind(a,l),this}}]),n}(Channel),PusherPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),l),this}}]),n}(PusherChannel),PusherEncryptedPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),l),this}}]),n}(PusherChannel),PusherPresenceChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"here",value:function(a){return this.on("pusher:subscription_succeeded",function(l){a(Object.keys(l.members).map(function(o){return l.members[o]}))}),this}},{key:"joining",value:function(a){return this.on("pusher:member_added",function(l){a(l.info)}),this}},{key:"whisper",value:function(a,l){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),l),this}},{key:"leaving",value:function(a){return this.on("pusher:member_removed",function(l){a(l.info)}),this}}]),n}(PusherChannel),SocketIoChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(t,a,l){var o;return _classCallCheck(this,n),o=r.call(this),o.events={},o.listeners={},o.name=a,o.socket=t,o.options=l,o.eventFormatter=new EventFormatter(o.options.namespace),o.subscribe(),o}return _createClass(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(a,l){return this.on(this.eventFormatter.format(a),l),this}},{key:"stopListening",value:function(a,l){return this.unbindEvent(this.eventFormatter.format(a),l),this}},{key:"subscribed",value:function(a){return this.on("connect",function(l){a(l)}),this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,l){var o=this;return this.listeners[a]=this.listeners[a]||[],this.events[a]||(this.events[a]=function(c,i){o.name===c&&o.listeners[a]&&o.listeners[a].forEach(function(f){return f(i)})},this.socket.on(a,this.events[a])),this.listeners[a].push(l),this}},{key:"unbind",value:function(){var a=this;Object.keys(this.events).forEach(function(l){a.unbindEvent(l)})}},{key:"unbindEvent",value:function(a,l){this.listeners[a]=this.listeners[a]||[],l&&(this.listeners[a]=this.listeners[a].filter(function(o){return o!==l})),(!l||this.listeners[a].length===0)&&(this.events[a]&&(this.socket.removeListener(a,this.events[a]),delete this.events[a]),delete this.listeners[a])}}]),n}(Channel),SocketIoPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:l}),this}}]),n}(SocketIoChannel),SocketIoPresenceChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"here",value:function(a){return this.on("presence:subscribed",function(l){a(l.map(function(o){return o.user_info}))}),this}},{key:"joining",value:function(a){return this.on("presence:joining",function(l){return a(l.user_info)}),this}},{key:"whisper",value:function(a,l){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:l}),this}},{key:"leaving",value:function(a){return this.on("presence:leaving",function(l){return a(l.user_info)}),this}}]),n}(SocketIoPrivateChannel),NullChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(a,l){return this}},{key:"listenToAll",value:function(a){return this}},{key:"stopListening",value:function(a,l){return this}},{key:"subscribed",value:function(a){return this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,l){return this}}]),n}(Channel),NullPrivateChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"whisper",value:function(a,l){return this}}]),n}(NullChannel),NullPresenceChannel=function(s){_inherits(n,s);var r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"here",value:function(a){return this}},{key:"joining",value:function(a){return this}},{key:"whisper",value:function(a,l){return this}},{key:"leaving",value:function(a){return this}}]),n}(NullChannel),Connector=function(){function s(r){_classCallCheck(this,s),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(r),this.connect()}return _createClass(s,[{key:"setOptions",value:function(n){this.options=_extends(this._defaultOptions,n);var t=this.csrfToken();return t&&(this.options.auth.headers["X-CSRF-TOKEN"]=t,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=t),t=this.options.bearerToken,t&&(this.options.auth.headers.Authorization="Bearer "+t,this.options.userAuthentication.headers.Authorization="Bearer "+t),n}},{key:"csrfToken",value:function(){var n;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(n=document.querySelector('meta[name="csrf-token"]'))?n.getAttribute("content"):null}}]),s}(),PusherConnector=function(s){_inherits(n,s);var r=_createSuper(n);function n(){var t;return _classCallCheck(this,n),t=r.apply(this,arguments),t.channels={},t}return _createClass(n,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(a,l,o){return this.channel(a).listen(l,o)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new PusherChannel(this.pusher,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new PusherPrivateChannel(this.pusher,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"encryptedPrivateChannel",value:function(a){return this.channels["private-encrypted-"+a]||(this.channels["private-encrypted-"+a]=new PusherEncryptedPrivateChannel(this.pusher,"private-encrypted-"+a,this.options)),this.channels["private-encrypted-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new PusherPresenceChannel(this.pusher,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var l=this,o=[a,"private-"+a,"private-encrypted-"+a,"presence-"+a];o.forEach(function(c,i){l.leaveChannel(c)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(Connector),SocketIoConnector=function(s){_inherits(n,s);var r=_createSuper(n);function n(){var t;return _classCallCheck(this,n),t=r.apply(this,arguments),t.channels={},t}return _createClass(n,[{key:"connect",value:function(){var a=this,l=this.getSocketIO();return this.socket=l(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(a.channels).forEach(function(o){o.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(a,l,o){return this.channel(a).listen(l,o)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new SocketIoChannel(this.socket,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new SocketIoPrivateChannel(this.socket,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new SocketIoPresenceChannel(this.socket,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var l=this,o=[a,"private-"+a,"presence-"+a];o.forEach(function(c){l.leaveChannel(c)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(Connector),NullConnector=function(s){_inherits(n,s);var r=_createSuper(n);function n(){var t;return _classCallCheck(this,n),t=r.apply(this,arguments),t.channels={},t}return _createClass(n,[{key:"connect",value:function(){}},{key:"listen",value:function(a,l,o){return new NullChannel}},{key:"channel",value:function(a){return new NullChannel}},{key:"privateChannel",value:function(a){return new NullPrivateChannel}},{key:"encryptedPrivateChannel",value:function(a){return new NullPrivateChannel}},{key:"presenceChannel",value:function(a){return new NullPresenceChannel}},{key:"leave",value:function(a){}},{key:"leaveChannel",value:function(a){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(Connector),Echo=function(){function s(r){_classCallCheck(this,s),this.options=r,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return _createClass(s,[{key:"channel",value:function(n){return this.connector.channel(n)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new PusherConnector(_extends(_extends({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new PusherConnector(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new SocketIoConnector(this.options);else if(this.options.broadcaster=="null")this.connector=new NullConnector(this.options);else if(typeof this.options.broadcaster=="function")this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(_typeof(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(n){return this.connector.presenceChannel(n)}},{key:"leave",value:function(n){this.connector.leave(n)}},{key:"leaveChannel",value:function(n){this.connector.leaveChannel(n)}},{key:"leaveAllChannels",value:function(){for(var n in this.connector.channels)this.leaveChannel(n)}},{key:"listen",value:function(n,t,a){return this.connector.listen(n,t,a)}},{key:"private",value:function(n){return this.connector.privateChannel(n)}},{key:"encryptedPrivate",value:function(n){return this.connector.encryptedPrivateChannel(n)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":_typeof(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var n=this;Vue.http.interceptors.push(function(t,a){n.socketId()&&t.headers.set("X-Socket-ID",n.socketId()),a()})}},{key:"registerAxiosRequestInterceptor",value:function(){var n=this;axios.interceptors.request.use(function(t){return n.socketId()&&(t.headers["X-Socket-Id"]=n.socketId()),t})}},{key:"registerjQueryAjaxSetup",value:function(){var n=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(t,a,l){n.socketId()&&l.setRequestHeader("X-Socket-Id",n.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var n=this;document.addEventListener("turbo:before-fetch-request",function(t){t.detail.fetchOptions.headers["X-Socket-Id"]=n.socketId()})}}]),s}(),pusher={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0-rc2
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(s,r){(function(t,a){s.exports=a()})(window,function(){return function(n){var t={};function a(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return n[l].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=t,a.d=function(l,o,c){a.o(l,o)||Object.defineProperty(l,o,{enumerable:!0,get:c})},a.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},a.t=function(l,o){if(o&1&&(l=a(l)),o&8||o&4&&typeof l=="object"&&l&&l.__esModule)return l;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),o&2&&typeof l!="string")for(var i in l)a.d(c,i,(function(f){return l[f]}).bind(null,i));return c},a.n=function(l){var o=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(o,"a",o),o},a.o=function(l,o){return Object.prototype.hasOwnProperty.call(l,o)},a.p="",a(a.s=2)}([function(n,t,a){var l=this&&this.__extends||function(){var y=function(S,b){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,x){E.__proto__=x}||function(E,x){for(var k in x)x.hasOwnProperty(k)&&(E[k]=x[k])},y(S,b)};return function(S,b){y(S,b);function E(){this.constructor=S}S.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=256,c=function(){function y(S){S===void 0&&(S="="),this._paddingCharacter=S}return y.prototype.encodedLength=function(S){return this._paddingCharacter?(S+2)/3*4|0:(S*8+5)/6|0},y.prototype.encode=function(S){for(var b="",E=0;E<S.length-2;E+=3){var x=S[E]<<16|S[E+1]<<8|S[E+2];b+=this._encodeByte(x>>>3*6&63),b+=this._encodeByte(x>>>2*6&63),b+=this._encodeByte(x>>>1*6&63),b+=this._encodeByte(x>>>0*6&63)}var k=S.length-E;if(k>0){var x=S[E]<<16|(k===2?S[E+1]<<8:0);b+=this._encodeByte(x>>>3*6&63),b+=this._encodeByte(x>>>2*6&63),k===2?b+=this._encodeByte(x>>>1*6&63):b+=this._paddingCharacter||"",b+=this._paddingCharacter||""}return b},y.prototype.maxDecodedLength=function(S){return this._paddingCharacter?S/4*3|0:(S*6+7)/8|0},y.prototype.decodedLength=function(S){return this.maxDecodedLength(S.length-this._getPaddingLength(S))},y.prototype.decode=function(S){if(S.length===0)return new Uint8Array(0);for(var b=this._getPaddingLength(S),E=S.length-b,x=new Uint8Array(this.maxDecodedLength(E)),k=0,T=0,j=0,A=0,C=0,I=0,F=0;T<E-4;T+=4)A=this._decodeChar(S.charCodeAt(T+0)),C=this._decodeChar(S.charCodeAt(T+1)),I=this._decodeChar(S.charCodeAt(T+2)),F=this._decodeChar(S.charCodeAt(T+3)),x[k++]=A<<2|C>>>4,x[k++]=C<<4|I>>>2,x[k++]=I<<6|F,j|=A&o,j|=C&o,j|=I&o,j|=F&o;if(T<E-1&&(A=this._decodeChar(S.charCodeAt(T)),C=this._decodeChar(S.charCodeAt(T+1)),x[k++]=A<<2|C>>>4,j|=A&o,j|=C&o),T<E-2&&(I=this._decodeChar(S.charCodeAt(T+2)),x[k++]=C<<4|I>>>2,j|=I&o),T<E-3&&(F=this._decodeChar(S.charCodeAt(T+3)),x[k++]=I<<6|F,j|=F&o),j!==0)throw new Error("Base64Coder: incorrect characters for decoding");return x},y.prototype._encodeByte=function(S){var b=S;return b+=65,b+=25-S>>>8&0-65-26+97,b+=51-S>>>8&26-97-52+48,b+=61-S>>>8&52-48-62+43,b+=62-S>>>8&62-43-63+47,String.fromCharCode(b)},y.prototype._decodeChar=function(S){var b=o;return b+=(42-S&S-44)>>>8&-o+S-43+62,b+=(46-S&S-48)>>>8&-o+S-47+63,b+=(47-S&S-58)>>>8&-o+S-48+52,b+=(64-S&S-91)>>>8&-o+S-65+0,b+=(96-S&S-123)>>>8&-o+S-97+26,b},y.prototype._getPaddingLength=function(S){var b=0;if(this._paddingCharacter){for(var E=S.length-1;E>=0&&S[E]===this._paddingCharacter;E--)b++;if(S.length<4||b>2)throw new Error("Base64Coder: incorrect padding")}return b},y}();t.Coder=c;var i=new c;function f(y){return i.encode(y)}t.encode=f;function m(y){return i.decode(y)}t.decode=m;var _=function(y){l(S,y);function S(){return y!==null&&y.apply(this,arguments)||this}return S.prototype._encodeByte=function(b){var E=b;return E+=65,E+=25-b>>>8&0-65-26+97,E+=51-b>>>8&26-97-52+48,E+=61-b>>>8&52-48-62+45,E+=62-b>>>8&62-45-63+95,String.fromCharCode(E)},S.prototype._decodeChar=function(b){var E=o;return E+=(44-b&b-46)>>>8&-o+b-45+62,E+=(94-b&b-96)>>>8&-o+b-95+63,E+=(47-b&b-58)>>>8&-o+b-48+52,E+=(64-b&b-91)>>>8&-o+b-65+0,E+=(96-b&b-123)>>>8&-o+b-97+26,E},S}(c);t.URLSafeCoder=_;var u=new _;function p(y){return u.encode(y)}t.encodeURLSafe=p;function g(y){return u.decode(y)}t.decodeURLSafe=g,t.encodedLength=function(y){return i.encodedLength(y)},t.maxDecodedLength=function(y){return i.maxDecodedLength(y)},t.decodedLength=function(y){return i.decodedLength(y)}},function(n,t,a){Object.defineProperty(t,"__esModule",{value:!0});var l="utf8: invalid string",o="utf8: invalid source encoding";function c(m){for(var _=new Uint8Array(i(m)),u=0,p=0;p<m.length;p++){var g=m.charCodeAt(p);g<128?_[u++]=g:g<2048?(_[u++]=192|g>>6,_[u++]=128|g&63):g<55296?(_[u++]=224|g>>12,_[u++]=128|g>>6&63,_[u++]=128|g&63):(p++,g=(g&1023)<<10,g|=m.charCodeAt(p)&1023,g+=65536,_[u++]=240|g>>18,_[u++]=128|g>>12&63,_[u++]=128|g>>6&63,_[u++]=128|g&63)}return _}t.encode=c;function i(m){for(var _=0,u=0;u<m.length;u++){var p=m.charCodeAt(u);if(p<128)_+=1;else if(p<2048)_+=2;else if(p<55296)_+=3;else if(p<=57343){if(u>=m.length-1)throw new Error(l);u++,_+=4}else throw new Error(l)}return _}t.encodedLength=i;function f(m){for(var _=[],u=0;u<m.length;u++){var p=m[u];if(p&128){var g=void 0;if(p<224){if(u>=m.length)throw new Error(o);var y=m[++u];if((y&192)!==128)throw new Error(o);p=(p&31)<<6|y&63,g=128}else if(p<240){if(u>=m.length-1)throw new Error(o);var y=m[++u],S=m[++u];if((y&192)!==128||(S&192)!==128)throw new Error(o);p=(p&15)<<12|(y&63)<<6|S&63,g=2048}else if(p<248){if(u>=m.length-2)throw new Error(o);var y=m[++u],S=m[++u],b=m[++u];if((y&192)!==128||(S&192)!==128||(b&192)!==128)throw new Error(o);p=(p&15)<<18|(y&63)<<12|(S&63)<<6|b&63,g=65536}else throw new Error(o);if(p<g||p>=55296&&p<=57343)throw new Error(o);if(p>=65536){if(p>1114111)throw new Error(o);p-=65536,_.push(String.fromCharCode(55296|p>>10)),p=56320|p&1023}}_.push(String.fromCharCode(p))}return _.join("")}t.decode=f},function(n,t,a){n.exports=a(3).default},function(n,t,a){a.r(t);class l{constructor(ee,ae){this.lastId=0,this.prefix=ee,this.name=ae}create(ee){this.lastId++;var ae=this.lastId,Te=this.prefix+ae,Me=this.name+"["+ae+"]",Ye=!1,nt=function(){Ye||(ee.apply(null,arguments),Ye=!0)};return this[ae]=nt,{number:ae,id:Te,name:Me,callback:nt}}remove(ee){delete this[ee.number]}}var o=new l("_pusher_script_","Pusher.ScriptReceivers"),c={VERSION:"8.4.0-rc2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},i=c;class f{constructor(ee){this.options=ee,this.receivers=ee.receivers||o,this.loading={}}load(ee,ae,Te){var Me=this;if(Me.loading[ee]&&Me.loading[ee].length>0)Me.loading[ee].push(Te);else{Me.loading[ee]=[Te];var Ye=bt.createScriptRequest(Me.getPath(ee,ae)),nt=Me.receivers.create(function(ht){if(Me.receivers.remove(nt),Me.loading[ee]){var wt=Me.loading[ee];delete Me.loading[ee];for(var yt=function(P){P||Ye.cleanup()},Ct=0;Ct<wt.length;Ct++)wt[Ct](ht,yt)}});Ye.send(nt)}}getRoot(ee){var ae,Te=bt.getDocument().location.protocol;return ee&&ee.useTLS||Te==="https:"?ae=this.options.cdn_https:ae=this.options.cdn_http,ae.replace(/\/*$/,"")+"/"+this.options.version}getPath(ee,ae){return this.getRoot(ae)+"/"+ee+this.options.suffix+".js"}}var m=new l("_pusher_dependencies","Pusher.DependenciesReceivers"),_=new f({cdn_http:i.cdn_http,cdn_https:i.cdn_https,version:i.VERSION,suffix:i.dependency_suffix,receivers:m});const u={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var g={buildLogSuffix:function(le){const ee="See:",ae=u.urls[le];if(!ae)return"";let Te;return ae.fullUrl?Te=ae.fullUrl:ae.path&&(Te=u.baseUrl+ae.path),Te?`${ee} ${Te}`:""}},y;(function(le){le.UserAuthentication="user-authentication",le.ChannelAuthorization="channel-authorization"})(y||(y={}));class S extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class x extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class k extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class j extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class A extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(ee,ae){super(ae),this.status=ee,Object.setPrototypeOf(this,new.target.prototype)}}var F=function(le,ee,ae,Te,Me){const Ye=bt.createXHR();Ye.open("POST",ae.endpoint,!0),Ye.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var nt in ae.headers)Ye.setRequestHeader(nt,ae.headers[nt]);if(ae.headersProvider!=null){let ht=ae.headersProvider();for(var nt in ht)Ye.setRequestHeader(nt,ht[nt])}return Ye.onreadystatechange=function(){if(Ye.readyState===4)if(Ye.status===200){let ht,wt=!1;try{ht=JSON.parse(Ye.responseText),wt=!0}catch{Me(new C(200,`JSON returned from ${Te.toString()} endpoint was invalid, yet status code was 200. Data was: ${Ye.responseText}`),null)}wt&&Me(null,ht)}else{let ht="";switch(Te){case y.UserAuthentication:ht=g.buildLogSuffix("authenticationEndpoint");break;case y.ChannelAuthorization:ht=`Clients must be authorized to join private or presence channels. ${g.buildLogSuffix("authorizationEndpoint")}`;break}Me(new C(Ye.status,`Unable to retrieve auth string from ${Te.toString()} endpoint - received status: ${Ye.status} from ${ae.endpoint}. ${ht}`),null)}},Ye.send(ee),Ye};function N(le){return X(M(le))}var z=String.fromCharCode,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=function(le){var ee=le.charCodeAt(0);return ee<128?le:ee<2048?z(192|ee>>>6)+z(128|ee&63):z(224|ee>>>12&15)+z(128|ee>>>6&63)+z(128|ee&63)},M=function(le){return le.replace(/[^\x00-\x7F]/g,q)},D=function(le){var ee=[0,2,1][le.length%3],ae=le.charCodeAt(0)<<16|(le.length>1?le.charCodeAt(1):0)<<8|(le.length>2?le.charCodeAt(2):0),Te=[R.charAt(ae>>>18),R.charAt(ae>>>12&63),ee>=2?"=":R.charAt(ae>>>6&63),ee>=1?"=":R.charAt(ae&63)];return Te.join("")},X=window.btoa||function(le){return le.replace(/[\s\S]{1,3}/g,D)};class O{constructor(ee,ae,Te,Me){this.clear=ae,this.timer=ee(()=>{this.timer&&(this.timer=Me(this.timer))},Te)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var G=O;function K(le){window.clearTimeout(le)}function Z(le){window.clearInterval(le)}class U extends G{constructor(ee,ae){super(setTimeout,K,ee,function(Te){return ae(),null})}}class V extends G{constructor(ee,ae){super(setInterval,Z,ee,function(Te){return ae(),Te})}}var L={now(){return Date.now?Date.now():new Date().valueOf()},defer(le){return new U(0,le)},method(le,...ee){var ae=Array.prototype.slice.call(arguments,1);return function(Te){return Te[le].apply(Te,ae.concat(arguments))}}},H=L;function J(le,...ee){for(var ae=0;ae<ee.length;ae++){var Te=ee[ae];for(var Me in Te)Te[Me]&&Te[Me].constructor&&Te[Me].constructor===Object?le[Me]=J(le[Me]||{},Te[Me]):le[Me]=Te[Me]}return le}function ne(){for(var le=["Pusher"],ee=0;ee<arguments.length;ee++)typeof arguments[ee]=="string"?le.push(arguments[ee]):le.push(je(arguments[ee]));return le.join(" : ")}function se(le,ee){var ae=Array.prototype.indexOf;if(le===null)return-1;if(ae&&le.indexOf===ae)return le.indexOf(ee);for(var Te=0,Me=le.length;Te<Me;Te++)if(le[Te]===ee)return Te;return-1}function fe(le,ee){for(var ae in le)Object.prototype.hasOwnProperty.call(le,ae)&&ee(le[ae],ae,le)}function xe(le){var ee=[];return fe(le,function(ae,Te){ee.push(Te)}),ee}function he(le){var ee=[];return fe(le,function(ae){ee.push(ae)}),ee}function _e(le,ee,ae){for(var Te=0;Te<le.length;Te++)ee.call(ae||window,le[Te],Te,le)}function ye(le,ee){for(var ae=[],Te=0;Te<le.length;Te++)ae.push(ee(le[Te],Te,le,ae));return ae}function ue(le,ee){var ae={};return fe(le,function(Te,Me){ae[Me]=ee(Te)}),ae}function pe(le,ee){ee=ee||function(Me){return!!Me};for(var ae=[],Te=0;Te<le.length;Te++)ee(le[Te],Te,le,ae)&&ae.push(le[Te]);return ae}function ke(le,ee){var ae={};return fe(le,function(Te,Me){(ee&&ee(Te,Me,le,ae)||Te)&&(ae[Me]=Te)}),ae}function Ie(le){var ee=[];return fe(le,function(ae,Te){ee.push([Te,ae])}),ee}function Y(le,ee){for(var ae=0;ae<le.length;ae++)if(ee(le[ae],ae,le))return!0;return!1}function te(le,ee){for(var ae=0;ae<le.length;ae++)if(!ee(le[ae],ae,le))return!1;return!0}function re(le){return ue(le,function(ee){return typeof ee=="object"&&(ee=je(ee)),encodeURIComponent(N(ee.toString()))})}function be(le){var ee=ke(le,function(Te){return Te!==void 0}),ae=ye(Ie(re(ee)),H.method("join","=")).join("&");return ae}function ve(le){var ee=[],ae=[];return function Te(Me,Ye){var nt,ht,wt;switch(typeof Me){case"object":if(!Me)return null;for(nt=0;nt<ee.length;nt+=1)if(ee[nt]===Me)return{$ref:ae[nt]};if(ee.push(Me),ae.push(Ye),Object.prototype.toString.apply(Me)==="[object Array]")for(wt=[],nt=0;nt<Me.length;nt+=1)wt[nt]=Te(Me[nt],Ye+"["+nt+"]");else{wt={};for(ht in Me)Object.prototype.hasOwnProperty.call(Me,ht)&&(wt[ht]=Te(Me[ht],Ye+"["+JSON.stringify(ht)+"]"))}return wt;case"number":case"string":case"boolean":return Me}}(le,"$")}function je(le){try{return JSON.stringify(le)}catch{return JSON.stringify(ve(le))}}class Re{constructor(){this.globalLog=ee=>{window.console&&window.console.log&&window.console.log(ee)}}debug(...ee){this.log(this.globalLog,ee)}warn(...ee){this.log(this.globalLogWarn,ee)}error(...ee){this.log(this.globalLogError,ee)}globalLogWarn(ee){window.console&&window.console.warn?window.console.warn(ee):this.globalLog(ee)}globalLogError(ee){window.console&&window.console.error?window.console.error(ee):this.globalLogWarn(ee)}log(ee,...ae){var Te=ne.apply(this,arguments);jt.log?jt.log(Te):jt.logToConsole&&ee.bind(this)(Te)}}var Ge=new Re,Xe=function(le,ee,ae,Te,Me){(ae.headers!==void 0||ae.headersProvider!=null)&&Ge.warn(`To send headers with the ${Te.toString()} request, you must use AJAX, rather than JSONP.`);var Ye=le.nextAuthCallbackID.toString();le.nextAuthCallbackID++;var nt=le.getDocument(),ht=nt.createElement("script");le.auth_callbacks[Ye]=function(Ct){Me(null,Ct)};var wt="Pusher.auth_callbacks['"+Ye+"']";ht.src=ae.endpoint+"?callback="+encodeURIComponent(wt)+"&"+ee;var yt=nt.getElementsByTagName("head")[0]||nt.documentElement;yt.insertBefore(ht,yt.firstChild)},Ke=Xe;class Pe{constructor(ee){this.src=ee}send(ee){var ae=this,Te="Error loading "+ae.src;ae.script=document.createElement("script"),ae.script.id=ee.id,ae.script.src=ae.src,ae.script.type="text/javascript",ae.script.charset="UTF-8",ae.script.addEventListener?(ae.script.onerror=function(){ee.callback(Te)},ae.script.onload=function(){ee.callback(null)}):ae.script.onreadystatechange=function(){(ae.script.readyState==="loaded"||ae.script.readyState==="complete")&&ee.callback(null)},ae.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(ae.errorScript=document.createElement("script"),ae.errorScript.id=ee.id+"_error",ae.errorScript.text=ee.name+"('"+Te+"');",ae.script.async=ae.errorScript.async=!1):ae.script.async=!0;var Me=document.getElementsByTagName("head")[0];Me.insertBefore(ae.script,Me.firstChild),ae.errorScript&&Me.insertBefore(ae.errorScript,ae.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class We{constructor(ee,ae){this.url=ee,this.data=ae}send(ee){if(!this.request){var ae=be(this.data),Te=this.url+"/"+ee.number+"?"+ae;this.request=bt.createScriptRequest(Te),this.request.send(ee)}}cleanup(){this.request&&this.request.cleanup()}}var Fe=function(le,ee){return function(ae,Te){var Me="http"+(ee?"s":"")+"://",Ye=Me+(le.host||le.options.host)+le.options.path,nt=bt.createJSONPRequest(Ye,ae),ht=bt.ScriptReceivers.create(function(wt,yt){o.remove(ht),nt.cleanup(),yt&&yt.host&&(le.host=yt.host),Te&&Te(wt,yt)});nt.send(ht)}},de={name:"jsonp",getAgent:Fe},ge=de;function ce(le,ee,ae){var Te=le+(ee.useTLS?"s":""),Me=ee.useTLS?ee.hostTLS:ee.hostNonTLS;return Te+"://"+Me+ae}function we(le,ee){var ae="/app/"+le,Te="?protocol="+i.PROTOCOL+"&client=js&version="+i.VERSION+(ee?"&"+ee:"");return ae+Te}var Oe={getInitial:function(le,ee){var ae=(ee.httpPath||"")+we(le,"flash=false");return ce("ws",ee,ae)}},Le={getInitial:function(le,ee){var ae=(ee.httpPath||"/pusher")+we(le);return ce("http",ee,ae)}},qe={getInitial:function(le,ee){return ce("http",ee,ee.httpPath||"/pusher")},getPath:function(le,ee){return we(le)}};class Qe{constructor(){this._callbacks={}}get(ee){return this._callbacks[rt(ee)]}add(ee,ae,Te){var Me=rt(ee);this._callbacks[Me]=this._callbacks[Me]||[],this._callbacks[Me].push({fn:ae,context:Te})}remove(ee,ae,Te){if(!ee&&!ae&&!Te){this._callbacks={};return}var Me=ee?[rt(ee)]:xe(this._callbacks);ae||Te?this.removeCallback(Me,ae,Te):this.removeAllCallbacks(Me)}removeCallback(ee,ae,Te){_e(ee,function(Me){this._callbacks[Me]=pe(this._callbacks[Me]||[],function(Ye){return ae&&ae!==Ye.fn||Te&&Te!==Ye.context}),this._callbacks[Me].length===0&&delete this._callbacks[Me]},this)}removeAllCallbacks(ee){_e(ee,function(ae){delete this._callbacks[ae]},this)}}function rt(le){return"_"+le}class tt{constructor(ee){this.callbacks=new Qe,this.global_callbacks=[],this.failThrough=ee}bind(ee,ae,Te){return this.callbacks.add(ee,ae,Te),this}bind_global(ee){return this.global_callbacks.push(ee),this}unbind(ee,ae,Te){return this.callbacks.remove(ee,ae,Te),this}unbind_global(ee){return ee?(this.global_callbacks=pe(this.global_callbacks||[],ae=>ae!==ee),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(ee,ae,Te){for(var Me=0;Me<this.global_callbacks.length;Me++)this.global_callbacks[Me](ee,ae);var Ye=this.callbacks.get(ee),nt=[];if(Te?nt.push(ae,Te):ae&&nt.push(ae),Ye&&Ye.length>0)for(var Me=0;Me<Ye.length;Me++)Ye[Me].fn.apply(Ye[Me].context||window,nt);else this.failThrough&&this.failThrough(ee,ae);return this}}class ot extends tt{constructor(ee,ae,Te,Me,Ye){super(),this.initialize=bt.transportConnectionInitializer,this.hooks=ee,this.name=ae,this.priority=Te,this.key=Me,this.options=Ye,this.state="new",this.timeline=Ye.timeline,this.activityTimeout=Ye.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var ee=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(ee,this.options)}catch(ae){return H.defer(()=>{this.onError(ae),this.changeState("closed")}),!1}return this.bindListeners(),Ge.debug("Connecting",{transport:this.name,url:ee}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(ee){return this.state==="open"?(H.defer(()=>{this.socket&&this.socket.send(ee)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(ee){this.emit("error",{type:"WebSocketError",error:ee}),this.timeline.error(this.buildTimelineMessage({error:ee.toString()}))}onClose(ee){ee?this.changeState("closed",{code:ee.code,reason:ee.reason,wasClean:ee.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(ee){this.emit("message",ee)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=ee=>{this.onError(ee)},this.socket.onclose=ee=>{this.onClose(ee)},this.socket.onmessage=ee=>{this.onMessage(ee)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(ee,ae){this.state=ee,this.timeline.info(this.buildTimelineMessage({state:ee,params:ae})),this.emit(ee,ae)}buildTimelineMessage(ee){return J({cid:this.id},ee)}}class gt{constructor(ee){this.hooks=ee}isSupported(ee){return this.hooks.isSupported(ee)}createConnection(ee,ae,Te,Me){return new ot(this.hooks,ee,ae,Te,Me)}}var mt=new gt({urls:Oe,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!bt.getWebSocketAPI()},isSupported:function(){return!!bt.getWebSocketAPI()},getSocket:function(le){return bt.createWebSocket(le)}}),lt={urls:Le,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},vt=J({getSocket:function(le){return bt.HTTPFactory.createStreamingSocket(le)}},lt),pt=J({getSocket:function(le){return bt.HTTPFactory.createPollingSocket(le)}},lt),It={isSupported:function(){return bt.isXHRSupported()}},Jt=new gt(J({},vt,It)),Ut=new gt(J({},pt,It)),At={ws:mt,xhr_streaming:Jt,xhr_polling:Ut},Pt=At,kt=new gt({file:"sockjs",urls:qe,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(le,ee){return new window.SockJS(le,null,{js_path:_.getPath("sockjs",{useTLS:ee.useTLS}),ignore_null_origin:ee.ignoreNullOrigin})},beforeOpen:function(le,ee){le.send(JSON.stringify({path:ee}))}}),qt={isSupported:function(le){var ee=bt.isXDRSupported(le.useTLS);return ee}},Ht=new gt(J({},vt,qt)),Mt=new gt(J({},pt,qt));Pt.xdr_streaming=Ht,Pt.xdr_polling=Mt,Pt.sockjs=kt;var Zt=Pt;class Sr extends tt{constructor(){super();var ee=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){ee.emit("online")},!1),window.addEventListener("offline",function(){ee.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var Er=new Sr;class kr{constructor(ee,ae,Te){this.manager=ee,this.transport=ae,this.minPingDelay=Te.minPingDelay,this.maxPingDelay=Te.maxPingDelay,this.pingDelay=void 0}createConnection(ee,ae,Te,Me){Me=J({},Me,{activityTimeout:this.pingDelay});var Ye=this.transport.createConnection(ee,ae,Te,Me),nt=null,ht=function(){Ye.unbind("open",ht),Ye.bind("closed",wt),nt=H.now()},wt=yt=>{if(Ye.unbind("closed",wt),yt.code===1002||yt.code===1003)this.manager.reportDeath();else if(!yt.wasClean&&nt){var Ct=H.now()-nt;Ct<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Ct/2,this.minPingDelay))}};return Ye.bind("open",ht),Ye}isSupported(ee){return this.manager.isAlive()&&this.transport.isSupported(ee)}}const Tr={decodeMessage:function(le){try{var ee=JSON.parse(le.data),ae=ee.data;if(typeof ae=="string")try{ae=JSON.parse(ee.data)}catch{}var Te={event:ee.event,channel:ee.channel,data:ae};return ee.user_id&&(Te.user_id=ee.user_id),Te}catch(Me){throw{type:"MessageParseError",error:Me,data:le.data}}},encodeMessage:function(le){return JSON.stringify(le)},processHandshake:function(le){var ee=Tr.decodeMessage(le);if(ee.event==="pusher:connection_established"){if(!ee.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:ee.data.socket_id,activityTimeout:ee.data.activity_timeout*1e3}}else{if(ee.event==="pusher:error")return{action:this.getCloseAction(ee.data),error:this.getCloseError(ee.data)};throw"Invalid handshake"}},getCloseAction:function(le){return le.code<4e3?le.code>=1002&&le.code<=1004?"backoff":null:le.code===4e3?"tls_only":le.code<4100?"refused":le.code<4200?"backoff":le.code<4300?"retry":"refused"},getCloseError:function(le){return le.code!==1e3&&le.code!==1001?{type:"PusherError",data:{code:le.code,message:le.reason||le.message}}:null}};var lr=Tr;class Cr extends tt{constructor(ee,ae){super(),this.id=ee,this.transport=ae,this.activityTimeout=ae.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(ee){return this.transport.send(ee)}send_event(ee,ae,Te){var Me={event:ee,data:ae};return Te&&(Me.channel=Te),Ge.debug("Event sent",Me),this.send(lr.encodeMessage(Me))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var ee={message:Te=>{var Me;try{Me=lr.decodeMessage(Te)}catch(Ye){this.emit("error",{type:"MessageParseError",error:Ye,data:Te.data})}if(Me!==void 0){switch(Ge.debug("Event recd",Me),Me.event){case"pusher:error":this.emit("error",{type:"PusherError",data:Me.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",Me)}},activity:()=>{this.emit("activity")},error:Te=>{this.emit("error",Te)},closed:Te=>{ae(),Te&&Te.code&&this.handleCloseEvent(Te),this.transport=null,this.emit("closed")}},ae=()=>{fe(ee,(Te,Me)=>{this.transport.unbind(Me,Te)})};fe(ee,(Te,Me)=>{this.transport.bind(Me,Te)})}handleCloseEvent(ee){var ae=lr.getCloseAction(ee),Te=lr.getCloseError(ee);Te&&this.emit("error",Te),ae&&this.emit(ae,{action:ae,error:Te})}}class Ae{constructor(ee,ae){this.transport=ee,this.callback=ae,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=ee=>{this.unbindListeners();var ae;try{ae=lr.processHandshake(ee)}catch(Te){this.finish("error",{error:Te}),this.transport.close();return}ae.action==="connected"?this.finish("connected",{connection:new Cr(ae.id,this.transport),activityTimeout:ae.activityTimeout}):(this.finish(ae.action,{error:ae.error}),this.transport.close())},this.onClosed=ee=>{this.unbindListeners();var ae=lr.getCloseAction(ee)||"backoff",Te=lr.getCloseError(ee);this.finish(ae,{error:Te})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(ee,ae){this.callback(J({transport:this.transport,action:ee},ae))}}class et{constructor(ee,ae){this.timeline=ee,this.options=ae||{}}send(ee,ae){this.timeline.isEmpty()||this.timeline.send(bt.TimelineTransport.getAgent(this,ee),ae)}}class it extends tt{constructor(ee,ae){super(function(Te,Me){Ge.debug("No callbacks on "+ee+" for "+Te)}),this.name=ee,this.pusher=ae,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(ee,ae){return ae(null,{auth:""})}trigger(ee,ae){if(ee.indexOf("client-")!==0)throw new S("Event '"+ee+"' does not start with 'client-'");if(!this.subscribed){var Te=g.buildLogSuffix("triggeringClientEvents");Ge.warn(`Client event triggered before channel 'subscription_succeeded' event . ${Te}`)}return this.pusher.send_event(ee,ae,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(ee){var ae=ee.event,Te=ee.data;if(ae==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(ee);else if(ae==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(ee);else if(ae.indexOf("pusher_internal:")!==0){var Me={};this.emit(ae,Te,Me)}}handleSubscriptionSucceededEvent(ee){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",ee.data)}handleSubscriptionCountEvent(ee){ee.data.subscription_count&&(this.subscriptionCount=ee.data.subscription_count),this.emit("pusher:subscription_count",ee.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(ee,ae)=>{ee?(this.subscriptionPending=!1,Ge.error(ee.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:ee.message},ee instanceof C?{status:ee.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:ae.auth,channel_data:ae.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Je extends it{authorize(ee,ae){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:ee},ae)}}class St{constructor(){this.reset()}get(ee){return Object.prototype.hasOwnProperty.call(this.members,ee)?{id:ee,info:this.members[ee]}:null}each(ee){fe(this.members,(ae,Te)=>{ee(this.get(Te))})}setMyID(ee){this.myID=ee}onSubscription(ee){this.members=ee.presence.hash,this.count=ee.presence.count,this.me=this.get(this.myID)}addMember(ee){return this.get(ee.user_id)===null&&this.count++,this.members[ee.user_id]=ee.user_info,this.get(ee.user_id)}removeMember(ee){var ae=this.get(ee.user_id);return ae&&(delete this.members[ee.user_id],this.count--),ae}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Ze=function(le,ee,ae,Te){function Me(Ye){return Ye instanceof ae?Ye:new ae(function(nt){nt(Ye)})}return new(ae||(ae=Promise))(function(Ye,nt){function ht(Ct){try{yt(Te.next(Ct))}catch(P){nt(P)}}function wt(Ct){try{yt(Te.throw(Ct))}catch(P){nt(P)}}function yt(Ct){Ct.done?Ye(Ct.value):Me(Ct.value).then(ht,wt)}yt((Te=Te.apply(le,ee||[])).next())})};class Tt extends Je{constructor(ee,ae){super(ee,ae),this.members=new St}authorize(ee,ae){super.authorize(ee,(Te,Me)=>Ze(this,void 0,void 0,function*(){if(!Te)if(Me=Me,Me.channel_data!=null){var Ye=JSON.parse(Me.channel_data);this.members.setMyID(Ye.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let nt=g.buildLogSuffix("authorizationEndpoint");Ge.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${nt}, or the user should be signed in.`),ae("Invalid auth response");return}ae(Te,Me)}))}handleEvent(ee){var ae=ee.event;if(ae.indexOf("pusher_internal:")===0)this.handleInternalEvent(ee);else{var Te=ee.data,Me={};ee.user_id&&(Me.user_id=ee.user_id),this.emit(ae,Te,Me)}}handleInternalEvent(ee){var ae=ee.event,Te=ee.data;switch(ae){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(ee);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(ee);break;case"pusher_internal:member_added":var Me=this.members.addMember(Te);this.emit("pusher:member_added",Me);break;case"pusher_internal:member_removed":var Ye=this.members.removeMember(Te);Ye&&this.emit("pusher:member_removed",Ye);break}}handleSubscriptionSucceededEvent(ee){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(ee.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var st=a(1),Et=a(0);class at extends Je{constructor(ee,ae,Te){super(ee,ae),this.key=null,this.nacl=Te}authorize(ee,ae){super.authorize(ee,(Te,Me)=>{if(Te){ae(Te,Me);return}let Ye=Me.shared_secret;if(!Ye){ae(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Et.decode)(Ye),delete Me.shared_secret,ae(null,Me)})}trigger(ee,ae){throw new T("Client events are not currently supported for encrypted channels")}handleEvent(ee){var ae=ee.event,Te=ee.data;if(ae.indexOf("pusher_internal:")===0||ae.indexOf("pusher:")===0){super.handleEvent(ee);return}this.handleEncryptedEvent(ae,Te)}handleEncryptedEvent(ee,ae){if(!this.key){Ge.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!ae.ciphertext||!ae.nonce){Ge.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+ae);return}let Te=Object(Et.decode)(ae.ciphertext);if(Te.length<this.nacl.secretbox.overheadLength){Ge.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${Te.length}`);return}let Me=Object(Et.decode)(ae.nonce);if(Me.length<this.nacl.secretbox.nonceLength){Ge.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${Me.length}`);return}let Ye=this.nacl.secretbox.open(Te,Me,this.key);if(Ye===null){Ge.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(nt,ht)=>{if(nt){Ge.error(`Failed to make a request to the authEndpoint: ${ht}. Unable to fetch new key, so dropping encrypted event`);return}if(Ye=this.nacl.secretbox.open(Te,Me,this.key),Ye===null){Ge.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(ee,this.getDataToEmit(Ye))});return}this.emit(ee,this.getDataToEmit(Ye))}getDataToEmit(ee){let ae=Object(st.decode)(ee);try{return JSON.parse(ae)}catch{return ae}}}class Bt extends tt{constructor(ee,ae){super(),this.state="initialized",this.connection=null,this.key=ee,this.options=ae,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var Te=bt.getNetwork();Te.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),Te.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}switchCluster(ee){this.key=ee,this.updateStrategy(),this.retryIn(0)}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(ee){return this.connection?this.connection.send(ee):!1}send_event(ee,ae,Te){return this.connection?this.connection.send_event(ee,ae,Te):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var ee=(ae,Te)=>{ae?this.runner=this.strategy.connect(0,ee):Te.action==="error"?(this.emit("error",{type:"HandshakeError",error:Te.error}),this.timeline.error({handshakeError:Te.error})):(this.abortConnecting(),this.handshakeCallbacks[Te.action](Te))};this.runner=this.strategy.connect(0,ee)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var ee=this.abandonConnection();ee.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(ee){this.timeline.info({action:"retry",delay:ee}),ee>0&&this.emit("connecting_in",Math.round(ee/1e3)),this.retryTimer=new U(ee||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new U(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new U(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new U(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(ee){return J({},ee,{message:ae=>{this.resetActivityCheck(),this.emit("message",ae)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:ae=>{this.emit("error",ae)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(ee){return J({},ee,{connected:ae=>{this.activityTimeout=Math.min(this.options.activityTimeout,ae.activityTimeout,ae.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(ae.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let ee=ae=>Te=>{Te.error&&this.emit("error",{type:"WebSocketError",error:Te.error}),ae(Te)};return{tls_only:ee(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:ee(()=>{this.disconnect()}),backoff:ee(()=>{this.retryIn(1e3)}),retry:ee(()=>{this.retryIn(0)})}}setConnection(ee){this.connection=ee;for(var ae in this.connectionCallbacks)this.connection.bind(ae,this.connectionCallbacks[ae]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var ee in this.connectionCallbacks)this.connection.unbind(ee,this.connectionCallbacks[ee]);var ae=this.connection;return this.connection=null,ae}}updateState(ee,ae){var Te=this.state;if(this.state=ee,Te!==ee){var Me=ee;Me==="connected"&&(Me+=" with new socket ID "+ae.socket_id),Ge.debug("State changed",Te+" -> "+Me),this.timeline.info({state:ee,params:ae}),this.emit("state_change",{previous:Te,current:ee}),this.emit(ee,ae)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class Wt{constructor(){this.channels={}}add(ee,ae){return this.channels[ee]||(this.channels[ee]=Ft(ee,ae)),this.channels[ee]}all(){return he(this.channels)}find(ee){return this.channels[ee]}remove(ee){var ae=this.channels[ee];return delete this.channels[ee],ae}disconnect(){fe(this.channels,function(ee){ee.disconnect()})}}function Ft(le,ee){if(le.indexOf("private-encrypted-")===0){if(ee.config.nacl)return $t.createEncryptedChannel(le,ee,ee.config.nacl);let ae="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",Te=g.buildLogSuffix("encryptedChannelSupport");throw new T(`${ae}. ${Te}`)}else{if(le.indexOf("private-")===0)return $t.createPrivateChannel(le,ee);if(le.indexOf("presence-")===0)return $t.createPresenceChannel(le,ee);if(le.indexOf("#")===0)throw new b('Cannot create a channel with name "'+le+'".');return $t.createChannel(le,ee)}}var Xt={createChannels(){return new Wt},createConnectionManager(le,ee){return new Bt(le,ee)},createChannel(le,ee){return new it(le,ee)},createPrivateChannel(le,ee){return new Je(le,ee)},createPresenceChannel(le,ee){return new Tt(le,ee)},createEncryptedChannel(le,ee,ae){return new at(le,ee,ae)},createTimelineSender(le,ee){return new et(le,ee)},createHandshake(le,ee){return new Ae(le,ee)},createAssistantToTheTransportManager(le,ee,ae){return new kr(le,ee,ae)}},$t=Xt;class rr{constructor(ee){this.options=ee||{},this.livesLeft=this.options.lives||1/0}getAssistant(ee){return $t.createAssistantToTheTransportManager(this,ee,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Qt{constructor(ee,ae){this.strategies=ee,this.loop=!!ae.loop,this.failFast=!!ae.failFast,this.timeout=ae.timeout,this.timeoutLimit=ae.timeoutLimit}isSupported(){return Y(this.strategies,H.method("isSupported"))}connect(ee,ae){var Te=this.strategies,Me=0,Ye=this.timeout,nt=null,ht=(wt,yt)=>{yt?ae(null,yt):(Me=Me+1,this.loop&&(Me=Me%Te.length),Me<Te.length?(Ye&&(Ye=Ye*2,this.timeoutLimit&&(Ye=Math.min(Ye,this.timeoutLimit))),nt=this.tryStrategy(Te[Me],ee,{timeout:Ye,failFast:this.failFast},ht)):ae(!0))};return nt=this.tryStrategy(Te[Me],ee,{timeout:Ye,failFast:this.failFast},ht),{abort:function(){nt.abort()},forceMinPriority:function(wt){ee=wt,nt&&nt.forceMinPriority(wt)}}}tryStrategy(ee,ae,Te,Me){var Ye=null,nt=null;return Te.timeout>0&&(Ye=new U(Te.timeout,function(){nt.abort(),Me(!0)})),nt=ee.connect(ae,function(ht,wt){ht&&Ye&&Ye.isRunning()&&!Te.failFast||(Ye&&Ye.ensureAborted(),Me(ht,wt))}),{abort:function(){Ye&&Ye.ensureAborted(),nt.abort()},forceMinPriority:function(ht){nt.forceMinPriority(ht)}}}}class Gt{constructor(ee){this.strategies=ee}isSupported(){return Y(this.strategies,H.method("isSupported"))}connect(ee,ae){return Jr(this.strategies,ee,function(Te,Me){return function(Ye,nt){if(Me[Te].error=Ye,Ye){cr(Me)&&ae(!0);return}_e(Me,function(ht){ht.forceMinPriority(nt.transport.priority)}),ae(null,nt)}})}}function Jr(le,ee,ae){var Te=ye(le,function(Me,Ye,nt,ht){return Me.connect(ee,ae(Ye,ht))});return{abort:function(){_e(Te,_r)},forceMinPriority:function(Me){_e(Te,function(Ye){Ye.forceMinPriority(Me)})}}}function cr(le){return te(le,function(ee){return!!ee.error})}function _r(le){!le.error&&!le.aborted&&(le.abort(),le.aborted=!0)}class Mr{constructor(ee,ae,Te){this.strategy=ee,this.transports=ae,this.ttl=Te.ttl||1800*1e3,this.usingTLS=Te.useTLS,this.timeline=Te.timeline}isSupported(){return this.strategy.isSupported()}connect(ee,ae){var Te=this.usingTLS,Me=Qr(Te),Ye=Me&&Me.cacheSkipCount?Me.cacheSkipCount:0,nt=[this.strategy];if(Me&&Me.timestamp+this.ttl>=H.now()){var ht=this.transports[Me.transport];ht&&(["ws","wss"].includes(Me.transport)||Ye>3?(this.timeline.info({cached:!0,transport:Me.transport,latency:Me.latency}),nt.push(new Qt([ht],{timeout:Me.latency*2+1e3,failFast:!0}))):Ye++)}var wt=H.now(),yt=nt.pop().connect(ee,function Ct(P,B){P?(Or(Te),nt.length>0?(wt=H.now(),yt=nt.pop().connect(ee,Ct)):ae(P)):(en(Te,B.transport.name,H.now()-wt,Ye),ae(null,B))});return{abort:function(){yt.abort()},forceMinPriority:function(Ct){ee=Ct,yt&&yt.forceMinPriority(Ct)}}}}function Ir(le){return"pusherTransport"+(le?"TLS":"NonTLS")}function Qr(le){var ee=bt.getLocalStorage();if(ee)try{var ae=ee[Ir(le)];if(ae)return JSON.parse(ae)}catch{Or(le)}return null}function en(le,ee,ae,Te){var Me=bt.getLocalStorage();if(Me)try{Me[Ir(le)]=je({timestamp:H.now(),transport:ee,latency:ae,cacheSkipCount:Te})}catch{}}function Or(le){var ee=bt.getLocalStorage();if(ee)try{delete ee[Ir(le)]}catch{}}class Ar{constructor(ee,{delay:ae}){this.strategy=ee,this.options={delay:ae}}isSupported(){return this.strategy.isSupported()}connect(ee,ae){var Te=this.strategy,Me,Ye=new U(this.options.delay,function(){Me=Te.connect(ee,ae)});return{abort:function(){Ye.ensureAborted(),Me&&Me.abort()},forceMinPriority:function(nt){ee=nt,Me&&Me.forceMinPriority(nt)}}}}class br{constructor(ee,ae,Te){this.test=ee,this.trueBranch=ae,this.falseBranch=Te}isSupported(){var ee=this.test()?this.trueBranch:this.falseBranch;return ee.isSupported()}connect(ee,ae){var Te=this.test()?this.trueBranch:this.falseBranch;return Te.connect(ee,ae)}}class tn{constructor(ee){this.strategy=ee}isSupported(){return this.strategy.isSupported()}connect(ee,ae){var Te=this.strategy.connect(ee,function(Me,Ye){Ye&&Te.abort(),ae(Me,Ye)});return Te}}function jr(le){return function(){return le.isSupported()}}var Ur=function(le,ee,ae){var Te={};function Me(ze,He,Ve,Ue,ut){var _t=ae(le,ze,He,Ve,Ue,ut);return Te[ze]=_t,_t}var Ye=Object.assign({},ee,{hostNonTLS:le.wsHost+":"+le.wsPort,hostTLS:le.wsHost+":"+le.wssPort,httpPath:le.wsPath}),nt=Object.assign({},Ye,{useTLS:!0}),ht=Object.assign({},ee,{hostNonTLS:le.httpHost+":"+le.httpPort,hostTLS:le.httpHost+":"+le.httpsPort,httpPath:le.httpPath}),wt={loop:!0,timeout:15e3,timeoutLimit:6e4},yt=new rr({minPingDelay:1e4,maxPingDelay:le.activityTimeout}),Ct=new rr({lives:2,minPingDelay:1e4,maxPingDelay:le.activityTimeout}),P=Me("ws","ws",3,Ye,yt),B=Me("wss","ws",3,nt,yt),W=Me("sockjs","sockjs",1,ht),$=Me("xhr_streaming","xhr_streaming",1,ht,Ct),Q=Me("xdr_streaming","xdr_streaming",1,ht,Ct),ie=Me("xhr_polling","xhr_polling",1,ht),oe=Me("xdr_polling","xdr_polling",1,ht),me=new Qt([P],wt),Ee=new Qt([B],wt),Se=new Qt([W],wt),Ne=new Qt([new br(jr($),$,Q)],wt),Be=new Qt([new br(jr(ie),ie,oe)],wt),De=new Qt([new br(jr(Ne),new Gt([Ne,new Ar(Be,{delay:4e3})]),Be)],wt),Ce=new br(jr(De),De,Se),$e;return ee.useTLS?$e=new Gt([me,new Ar(Ce,{delay:2e3})]):$e=new Gt([me,new Ar(Ee,{delay:2e3}),new Ar(Ce,{delay:5e3})]),new Mr(new tn(new br(jr(P),$e,Ce)),Te,{ttl:18e5,timeline:ee.timeline,useTLS:ee.useTLS})},rn=Ur,nn=function(){var le=this;le.timeline.info(le.buildTimelineMessage({transport:le.name+(le.options.useTLS?"s":"")})),le.hooks.isInitialized()?le.changeState("initialized"):le.hooks.file?(le.changeState("initializing"),_.load(le.hooks.file,{useTLS:le.options.useTLS},function(ee,ae){le.hooks.isInitialized()?(le.changeState("initialized"),ae(!0)):(ee&&le.onError(ee),le.onClose(),ae(!1))})):le.onClose()},Nr={getRequest:function(le){var ee=new window.XDomainRequest;return ee.ontimeout=function(){le.emit("error",new E),le.close()},ee.onerror=function(ae){le.emit("error",ae),le.close()},ee.onprogress=function(){ee.responseText&&ee.responseText.length>0&&le.onChunk(200,ee.responseText)},ee.onload=function(){ee.responseText&&ee.responseText.length>0&&le.onChunk(200,ee.responseText),le.emit("finished",200),le.close()},ee},abortRequest:function(le){le.ontimeout=le.onerror=le.onprogress=le.onload=null,le.abort()}},Rr=Nr;const hr=256*1024;class sn extends tt{constructor(ee,ae,Te){super(),this.hooks=ee,this.method=ae,this.url=Te}start(ee){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},bt.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(ee)}close(){this.unloader&&(bt.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(ee,ae){for(;;){var Te=this.advanceBuffer(ae);if(Te)this.emit("chunk",{status:ee,data:Te});else break}this.isBufferTooLong(ae)&&this.emit("buffer_too_long")}advanceBuffer(ee){var ae=ee.slice(this.position),Te=ae.indexOf(`
`);return Te!==-1?(this.position+=Te+1,ae.slice(0,Te)):null}isBufferTooLong(ee){return this.position===ee.length&&ee.length>hr}}var Dr;(function(le){le[le.CONNECTING=0]="CONNECTING",le[le.OPEN=1]="OPEN",le[le.CLOSED=3]="CLOSED"})(Dr||(Dr={}));var ar=Dr,on=1;class kn{constructor(ee,ae){this.hooks=ee,this.session=zr(1e3)+"/"+Tn(8),this.location=Gr(ae),this.readyState=ar.CONNECTING,this.openStream()}send(ee){return this.sendRaw(JSON.stringify([ee]))}ping(){this.hooks.sendHeartbeat(this)}close(ee,ae){this.onClose(ee,ae,!0)}sendRaw(ee){if(this.readyState===ar.OPEN)try{return bt.createSocketRequest("POST",ln(an(this.location,this.session))).start(ee),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(ee,ae,Te){this.closeStream(),this.readyState=ar.CLOSED,this.onclose&&this.onclose({code:ee,reason:ae,wasClean:Te})}onChunk(ee){if(ee.status===200){this.readyState===ar.OPEN&&this.onActivity();var ae,Te=ee.data.slice(0,1);switch(Te){case"o":ae=JSON.parse(ee.data.slice(1)||"{}"),this.onOpen(ae);break;case"a":ae=JSON.parse(ee.data.slice(1)||"[]");for(var Me=0;Me<ae.length;Me++)this.onEvent(ae[Me]);break;case"m":ae=JSON.parse(ee.data.slice(1)||"null"),this.onEvent(ae);break;case"h":this.hooks.onHeartbeat(this);break;case"c":ae=JSON.parse(ee.data.slice(1)||"[]"),this.onClose(ae[0],ae[1],!0);break}}}onOpen(ee){this.readyState===ar.CONNECTING?(ee&&ee.hostname&&(this.location.base=cn(this.location.base,ee.hostname)),this.readyState=ar.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(ee){this.readyState===ar.OPEN&&this.onmessage&&this.onmessage({data:ee})}onActivity(){this.onactivity&&this.onactivity()}onError(ee){this.onerror&&this.onerror(ee)}openStream(){this.stream=bt.createSocketRequest("POST",ln(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",ee=>{this.onChunk(ee)}),this.stream.bind("finished",ee=>{this.hooks.onFinished(this,ee)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(ee){H.defer(()=>{this.onError(ee),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Gr(le){var ee=/([^\?]*)\/*(\??.*)/.exec(le);return{base:ee[1],queryString:ee[2]}}function an(le,ee){return le.base+"/"+ee+"/xhr_send"}function ln(le){var ee=le.indexOf("?")===-1?"?":"&";return le+ee+"t="+ +new Date+"&n="+on++}function cn(le,ee){var ae=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(le);return ae[1]+ee+ae[3]}function zr(le){return bt.randomInt(le)}function Tn(le){for(var ee=[],ae=0;ae<le;ae++)ee.push(zr(32).toString(32));return ee.join("")}var un=kn,Cn={getReceiveURL:function(le,ee){return le.base+"/"+ee+"/xhr_streaming"+le.queryString},onHeartbeat:function(le){le.sendRaw("[]")},sendHeartbeat:function(le){le.sendRaw("[]")},onFinished:function(le,ee){le.onClose(1006,"Connection interrupted ("+ee+")",!1)}},An=Cn,jn={getReceiveURL:function(le,ee){return le.base+"/"+ee+"/xhr"+le.queryString},onHeartbeat:function(){},sendHeartbeat:function(le){le.sendRaw("[]")},onFinished:function(le,ee){ee===200?le.reconnect():le.onClose(1006,"Connection interrupted ("+ee+")",!1)}},Pn=jn,hn={getRequest:function(le){var ee=bt.getXHRAPI(),ae=new ee;return ae.onreadystatechange=ae.onprogress=function(){switch(ae.readyState){case 3:ae.responseText&&ae.responseText.length>0&&le.onChunk(ae.status,ae.responseText);break;case 4:ae.responseText&&ae.responseText.length>0&&le.onChunk(ae.status,ae.responseText),le.emit("finished",ae.status),le.close();break}},ae},abortRequest:function(le){le.onreadystatechange=null,le.abort()}},dr=hn,pr={createStreamingSocket(le){return this.createSocket(An,le)},createPollingSocket(le){return this.createSocket(Pn,le)},createSocket(le,ee){return new un(le,ee)},createXHR(le,ee){return this.createRequest(dr,le,ee)},createRequest(le,ee,ae){return new sn(le,ee,ae)}},wr=pr;wr.createXDR=function(le,ee){return this.createRequest(Rr,le,ee)};var Pr=wr,mr={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:m,getDefaultStrategy:rn,Transports:Zt,transportConnectionInitializer:nn,HTTPFactory:Pr,TimelineTransport:ge,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(le){window.Pusher=le;var ee=()=>{this.onDocumentBody(le.ready)};window.JSON?ee():_.load("json2",{},ee)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:F,jsonp:Ke}},onDocumentBody(le){document.body?le():setTimeout(()=>{this.onDocumentBody(le)},0)},createJSONPRequest(le,ee){return new We(le,ee)},createScriptRequest(le){return new Pe(le)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var le=this.getXHRAPI();return new le},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return Er},createWebSocket(le){var ee=this.getWebSocketAPI();return new ee(le)},createSocketRequest(le,ee){if(this.isXHRSupported())return this.HTTPFactory.createXHR(le,ee);if(this.isXDRSupported(ee.indexOf("https:")===0))return this.HTTPFactory.createXDR(le,ee);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var le=this.getXHRAPI();return!!le&&new le().withCredentials!==void 0},isXDRSupported(le){var ee=le?"https:":"http:",ae=this.getProtocol();return!!window.XDomainRequest&&ae===ee},addUnloadListener(le){window.addEventListener!==void 0?window.addEventListener("unload",le,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",le)},removeUnloadListener(le){window.addEventListener!==void 0?window.removeEventListener("unload",le,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",le)},randomInt(le){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*le)}},bt=mr,Wr;(function(le){le[le.ERROR=3]="ERROR",le[le.INFO=6]="INFO",le[le.DEBUG=7]="DEBUG"})(Wr||(Wr={}));var ur=Wr;class Lr{constructor(ee,ae,Te){this.key=ee,this.session=ae,this.events=[],this.options=Te||{},this.sent=0,this.uniqueID=0}log(ee,ae){ee<=this.options.level&&(this.events.push(J({},ae,{timestamp:H.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(ee){this.log(ur.ERROR,ee)}info(ee){this.log(ur.INFO,ee)}debug(ee){this.log(ur.DEBUG,ee)}isEmpty(){return this.events.length===0}send(ee,ae){var Te=J({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],ee(Te,(Me,Ye)=>{Me||this.sent++,ae&&ae(Me,Ye)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class dn{constructor(ee,ae,Te,Me){this.name=ee,this.priority=ae,this.transport=Te,this.options=Me||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(ee,ae){if(this.isSupported()){if(this.priority<ee)return qr(new x,ae)}else return qr(new A,ae);var Te=!1,Me=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),Ye=null,nt=function(){Me.unbind("initialized",nt),Me.connect()},ht=function(){Ye=$t.createHandshake(Me,function(P){Te=!0,Ct(),ae(null,P)})},wt=function(P){Ct(),ae(P)},yt=function(){Ct();var P;P=je(Me),ae(new k(P))},Ct=function(){Me.unbind("initialized",nt),Me.unbind("open",ht),Me.unbind("error",wt),Me.unbind("closed",yt)};return Me.bind("initialized",nt),Me.bind("open",ht),Me.bind("error",wt),Me.bind("closed",yt),Me.initialize(),{abort:()=>{Te||(Ct(),Ye?Ye.close():Me.close())},forceMinPriority:P=>{Te||this.priority<P&&(Ye?Ye.close():Me.close())}}}}function qr(le,ee){return H.defer(function(){ee(le)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:fn}=bt;var pn=function(le,ee,ae,Te,Me,Ye){var nt=fn[ae];if(!nt)throw new j(ae);var ht=(!le.enabledTransports||se(le.enabledTransports,ee)!==-1)&&(!le.disabledTransports||se(le.disabledTransports,ee)===-1),wt;return ht?(Me=Object.assign({ignoreNullOrigin:le.ignoreNullOrigin},Me),wt=new dn(ee,Te,Ye?Ye.getAssistant(nt):nt,Me)):wt=mn,wt},mn={isSupported:function(){return!1},connect:function(le,ee){var ae=H.defer(function(){ee(new A)});return{abort:function(){ae.ensureAborted()},forceMinPriority:function(){}}}};function gn(le){if(le==null)throw"You must pass an options object";if(le.cluster==null)throw"Options object must provide a cluster";"disableStats"in le&&Ge.warn("The disableStats option is deprecated in favor of enableStats")}const Hr=(le,ee)=>{var ae="socket_id="+encodeURIComponent(le.socketId);for(var Te in ee.params)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(ee.params[Te]);if(ee.paramsProvider!=null){let Me=ee.paramsProvider();for(var Te in Me)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(Me[Te])}return ae};var yn=le=>{if(typeof bt.getAuthorizers()[le.transport]>"u")throw`'${le.transport}' is not a recognized auth transport`;return(ee,ae)=>{const Te=Hr(ee,le);bt.getAuthorizers()[le.transport](bt,Te,le,y.UserAuthentication,ae)}};const vn=(le,ee)=>{var ae="socket_id="+encodeURIComponent(le.socketId);ae+="&channel_name="+encodeURIComponent(le.channelName);for(var Te in ee.params)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(ee.params[Te]);if(ee.paramsProvider!=null){let Me=ee.paramsProvider();for(var Te in Me)ae+="&"+encodeURIComponent(Te)+"="+encodeURIComponent(Me[Te])}return ae};var _n=le=>{if(typeof bt.getAuthorizers()[le.transport]>"u")throw`'${le.transport}' is not a recognized auth transport`;return(ee,ae)=>{const Te=vn(ee,le);bt.getAuthorizers()[le.transport](bt,Te,le,y.ChannelAuthorization,ae)}};const bn=(le,ee,ae)=>{const Te={authTransport:ee.transport,authEndpoint:ee.endpoint,auth:{params:ee.params,headers:ee.headers}};return(Me,Ye)=>{const nt=le.channel(Me.channelName);ae(nt,Te).authorize(Me.socketId,Ye)}};function Xr(le,ee){let ae={activityTimeout:le.activityTimeout||i.activityTimeout,cluster:le.cluster,httpPath:le.httpPath||i.httpPath,httpPort:le.httpPort||i.httpPort,httpsPort:le.httpsPort||i.httpsPort,pongTimeout:le.pongTimeout||i.pongTimeout,statsHost:le.statsHost||i.stats_host,unavailableTimeout:le.unavailableTimeout||i.unavailableTimeout,wsPath:le.wsPath||i.wsPath,wsPort:le.wsPort||i.wsPort,wssPort:le.wssPort||i.wssPort,enableStats:Yr(le),httpHost:wn(le),useTLS:Fr(le),wsHost:xn(le),userAuthenticator:yr(le),channelAuthorizer:ct(le,ee)};return"disabledTransports"in le&&(ae.disabledTransports=le.disabledTransports),"enabledTransports"in le&&(ae.enabledTransports=le.enabledTransports),"ignoreNullOrigin"in le&&(ae.ignoreNullOrigin=le.ignoreNullOrigin),"timelineParams"in le&&(ae.timelineParams=le.timelineParams),"nacl"in le&&(ae.nacl=le.nacl),ae}function wn(le){return le.httpHost?le.httpHost:le.cluster?`sockjs-${le.cluster}.pusher.com`:i.httpHost}function xn(le){return le.wsHost?le.wsHost:$r(le.cluster)}function $r(le){return`ws-${le}.pusher.com`}function Fr(le){return bt.getProtocol()==="https:"?!0:le.forceTLS!==!1}function Yr(le){return"enableStats"in le?le.enableStats:"disableStats"in le?!le.disableStats:!1}const Zr=le=>"customHandler"in le&&le.customHandler!=null;function yr(le){const ee=Object.assign(Object.assign({},i.userAuthentication),le.userAuthentication);return Zr(ee)?ee.customHandler:yn(ee)}function vr(le,ee){let ae;if("channelAuthorization"in le)ae=Object.assign(Object.assign({},i.channelAuthorization),le.channelAuthorization);else if(ae={transport:le.authTransport||i.authTransport,endpoint:le.authEndpoint||i.authEndpoint},"auth"in le&&("params"in le.auth&&(ae.params=le.auth.params),"headers"in le.auth&&(ae.headers=le.auth.headers)),"authorizer"in le)return{customHandler:bn(ee,ae,le.authorizer)};return ae}function ct(le,ee){const ae=vr(le,ee);return Zr(ae)?ae.customHandler:_n(ae)}class On extends tt{constructor(ee){super(function(ae,Te){Ge.debug(`No callbacks on watchlist events for ${ae}`)}),this.pusher=ee,this.bindWatchlistInternalEvent()}handleEvent(ee){ee.data.events.forEach(ae=>{this.emit(ae.name,ae)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",ee=>{var ae=ee.event;ae==="pusher_internal:watchlist_events"&&this.handleEvent(ee)})}}function Sn(){let le,ee;return{promise:new Promise((Te,Me)=>{le=Te,ee=Me}),resolve:le,reject:ee}}var xr=Sn;class Nn extends tt{constructor(ee){super(function(ae,Te){Ge.debug("No callbacks on user for "+ae)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(ae,Te)=>{if(ae){Ge.warn(`Error during signin: ${ae}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:Te.auth,user_data:Te.user_data})},this.pusher=ee,this.pusher.connection.bind("state_change",({previous:ae,current:Te})=>{ae!=="connected"&&Te==="connected"&&this._signin(),ae==="connected"&&Te!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new On(ee),this.pusher.connection.bind("message",ae=>{var Te=ae.event;Te==="pusher:signin_success"&&this._onSigninSuccess(ae.data),this.serverToUserChannel&&this.serverToUserChannel.name===ae.channel&&this.serverToUserChannel.handleEvent(ae)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(ee){try{this.user_data=JSON.parse(ee.user_data)}catch{Ge.error(`Failed parsing user data after signin: ${ee.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Ge.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const ee=ae=>{ae.subscriptionPending&&ae.subscriptionCancelled?ae.reinstateSubscription():!ae.subscriptionPending&&this.pusher.connection.state==="connected"&&ae.subscribe()};this.serverToUserChannel=new it(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((ae,Te)=>{ae.indexOf("pusher_internal:")===0||ae.indexOf("pusher:")===0||this.emit(ae,Te)}),ee(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:ee,resolve:ae,reject:Te}=xr();ee.done=!1;const Me=()=>{ee.done=!0};ee.then(Me).catch(Me),this.signinDonePromise=ee,this._signinDoneResolve=ae}}class Kt{static ready(){Kt.isReady=!0;for(var ee=0,ae=Kt.instances.length;ee<ae;ee++)Kt.instances[ee].connect()}static getClientFeatures(){return xe(ke({ws:bt.Transports.ws},function(ee){return ee.isSupported({})}))}constructor(ee,ae){En(ee),gn(ae),this.key=ee,this.options=ae,this.config=Xr(this.options,this),this.channels=$t.createChannels(),this.global_emitter=new tt,this.sessionID=bt.randomInt(1e9),this.timeline=new Lr(this.key,this.sessionID,{cluster:this.config.cluster,features:Kt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ur.INFO,version:i.VERSION}),this.config.enableStats&&(this.timelineSender=$t.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+bt.TimelineTransport.name}));var Te=Me=>bt.getDefaultStrategy(this.config,Me,pn);this.connection=$t.createConnectionManager(this.key,{getStrategy:Te,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",Me=>{var Ye=Me.event,nt=Ye.indexOf("pusher_internal:")===0;if(Me.channel){var ht=this.channel(Me.channel);ht&&ht.handleEvent(Me)}nt||this.global_emitter.emit(Me.event,Me.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",Me=>{Ge.warn(Me)}),Kt.instances.push(this),this.timeline.info({instances:Kt.instances.length}),this.user=new Nn(this),Kt.isReady&&this.connect()}switchCluster(ee){const{appKey:ae,cluster:Te}=ee;this.key=ae,this.options=Object.assign(Object.assign({},this.options),{cluster:Te}),this.config=Xr(this.options,this),this.connection.switchCluster(this.key)}channel(ee){return this.channels.find(ee)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var ee=this.connection.isUsingTLS(),ae=this.timelineSender;this.timelineSenderTimer=new V(6e4,function(){ae.send(ee)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(ee,ae,Te){return this.global_emitter.bind(ee,ae,Te),this}unbind(ee,ae,Te){return this.global_emitter.unbind(ee,ae,Te),this}bind_global(ee){return this.global_emitter.bind_global(ee),this}unbind_global(ee){return this.global_emitter.unbind_global(ee),this}unbind_all(ee){return this.global_emitter.unbind_all(),this}subscribeAll(){var ee;for(ee in this.channels.channels)this.channels.channels.hasOwnProperty(ee)&&this.subscribe(ee)}subscribe(ee){var ae=this.channels.add(ee,this);return ae.subscriptionPending&&ae.subscriptionCancelled?ae.reinstateSubscription():!ae.subscriptionPending&&this.connection.state==="connected"&&ae.subscribe(),ae}unsubscribe(ee){var ae=this.channels.find(ee);ae&&ae.subscriptionPending?ae.cancelSubscription():(ae=this.channels.remove(ee),ae&&ae.subscribed&&ae.unsubscribe())}send_event(ee,ae,Te){return this.connection.send_event(ee,ae,Te)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Kt.instances=[],Kt.isReady=!1,Kt.logToConsole=!1,Kt.Runtime=bt,Kt.ScriptReceivers=bt.ScriptReceivers,Kt.DependenciesReceivers=bt.DependenciesReceivers,Kt.auth_callbacks=bt.auth_callbacks;var jt=t.default=Kt;function En(le){if(le==null)throw"You must pass your app key when you instantiate Pusher."}bt.setup(Kt)}])})})(pusher);var pusherExports=pusher.exports;const Pusher$1=getDefaultExportFromCjs(pusherExports),listen=()=>{const s=get_store_value(id);return window.Pusher=Pusher$1,window.Echo=new Echo({broadcaster:"reverb",cluster:"eu",key:get_store_value(pusherKey),wsHost:get_store_value(apiWsDomain),wsPort:80,wssPort:443,forceTLS:!0,enabledTransports:["ws","wss"],disableStats:!0}),window.Echo.channel("userStatus").listen("UserStatusChange",r=>{const{id:n,isActive:t}=r;users.update(a=>a.map(l=>l.id===+n?{...l,isActive:!!t}:l))}),window.Echo.channel("userPositions."+s).listen("UserPositionChange",r=>{var a;const n=(a=r.sender)==null?void 0:a.id;if(!n)return;const t=get_store_value(qubits).reduce((l,o,c)=>o.active&&o.user===n?[...l,c]:l,[]);axes.filter((l,o)=>t.includes(o)).forEach(l=>{l.set(Object.values(r.coords))})}),()=>{window.Echo.leave("userStatus"),window.Echo.leave("userPositions."+s)}},updateProfile=()=>{const s=`${get_store_value(apiDomain)}/api/app-user/${get_store_value(id)}/update`,r="PATCH",n=name.subscribe(debounce(a=>{localStorage.setItem("q.name",a);const l=JSON.stringify({name:a});fetch(s,{method:r,headers:get_store_value(headers),body:l}).then(o=>{o.status===404&&addToast("404: update name","warning"),o.status===500&&addToast("500: Server error when updating name","error")}).catch(o=>console.error("Error:",o))},500)),t=location$1.subscribe(debounce(a=>{localStorage.setItem("q.location",a);const l=JSON.stringify({location:a});fetch(s,{method:r,headers:get_store_value(headers),body:l}).then(o=>{o.status===404&&addToast("404: update location","warning"),o.status===500&&addToast("500: Server error when updating location","error")}).catch(o=>console.error("Error:",o))},500));return()=>{n(),t()}},logout=()=>{const s=`/api/app-user/${get_store_value(id)}/logout`;return fetch(`${get_store_value(apiDomain)}${s}`,{headers:get_store_value(headers),method:"GET"}).then(r=>{r.status===404&&addToast("404: logout","warning"),r.status===500&&addToast("500: Server error when logging out","error")})};function initElectronAPI(){typeof document>"u"||typeof window>"u"||(apiDomain.set(window.apiDomain),apiWsDomain.set(window.apiWsDomain),apiToken.set(window.apiToken),pusherKey.set(window.apiPusherKey),window.electronAPI.onSetPreset(s=>activePreset.set(s)),window.electronAPI.onSavePreset(()=>{const s=new CustomEvent("showSavePresetDialog");document.dispatchEvent(s)}),presets.subscribe(s=>window.electronAPI.syncUserPresets(s)),window.electronAPI.onExportPreset(()=>{window.electronAPI.exportPresetResponse(getAppState())}),window.electronAPI.onImportPreset(s=>{console.log(s)}),window.electronAPI.onUpdateSamples(updateSamples),window.electronAPI.onQuit(logout))}const _page_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_default_slot(s){let r,n,t,a,l,o,c,i,f,m,_,u;return c=new InstrumentButtons({props:{orientation:"vertical"}}),f=new Parameters({props:{showSockets:!1}}),{c(){r=element("div"),n=element("button"),t=svg_element("svg"),a=svg_element("path"),l=space(),o=element("div"),create_component(c.$$.fragment),i=space(),create_component(f.$$.fragment),this.h()},l(p){r=claim_element(p,"DIV",{class:!0});var g=children(r);n=claim_element(g,"BUTTON",{});var y=children(n);t=claim_svg_element(y,"svg",{class:!0,viewBox:!0,xmlns:!0});var S=children(t);a=claim_svg_element(S,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),children(a).forEach(detach),S.forEach(detach),y.forEach(detach),l=claim_space(g),o=claim_element(g,"DIV",{class:!0});var b=children(o);claim_component(c.$$.fragment,b),b.forEach(detach),i=claim_space(g),claim_component(f.$$.fragment,g),g.forEach(detach),this.h()},h(){attr(a,"fill-rule","evenodd"),attr(a,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),attr(a,"clip-rule","evenodd"),attr(t,"class","sidebar__close w-5 h-5 mb-4 svelte-gb1mdj"),attr(t,"viewBox","0 0 20 20"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(o,"class","sidebar__instruments svelte-gb1mdj"),attr(r,"class","sidebar")},m(p,g){insert_hydration(p,r,g),append_hydration(r,n),append_hydration(n,t),append_hydration(t,a),append_hydration(r,l),append_hydration(r,o),mount_component(c,o,null),append_hydration(r,i),mount_component(f,r,null),m=!0,_||(u=listen$1(n,"click",s[8]),_=!0)},p:noop,i(p){m||(transition_in(c.$$.fragment,p),transition_in(f.$$.fragment,p),m=!0)},o(p){transition_out(c.$$.fragment,p),transition_out(f.$$.fragment,p),m=!1},d(p){p&&detach(r),destroy_component(c),destroy_component(f),_=!1,u()}}}function create_if_block(s){let r,n,t,a,l,o,c;return t=new Controls$1({}),o=new Measure({}),{c(){r=element("div"),n=element("div"),create_component(t.$$.fragment),a=space(),l=element("div"),create_component(o.$$.fragment),this.h()},l(i){r=claim_element(i,"DIV",{class:!0});var f=children(r);n=claim_element(f,"DIV",{class:!0});var m=children(n);claim_component(t.$$.fragment,m),m.forEach(detach),a=claim_space(f),l=claim_element(f,"DIV",{class:!0});var _=children(l);claim_component(o.$$.fragment,_),_.forEach(detach),f.forEach(detach),this.h()},h(){attr(n,"class","keyboard svelte-gb1mdj"),attr(l,"class","measure"),attr(r,"class","controls svelte-gb1mdj")},m(i,f){insert_hydration(i,r,f),append_hydration(r,n),mount_component(t,n,null),append_hydration(r,a),append_hydration(r,l),mount_component(o,l,null),c=!0},i(i){c||(transition_in(t.$$.fragment,i),transition_in(o.$$.fragment,i),c=!0)},o(i){transition_out(t.$$.fragment,i),transition_out(o.$$.fragment,i),c=!1},d(i){i&&detach(r),destroy_component(t),destroy_component(o)}}}function create_fragment(s){let r,n,t,a,l,o,c,i,f,m,_,u,p,g,y,S,b,E,x,k,T,j,A,C,I,F,N,z,R,q;function M(O){s[9](O)}let D={transitionType:"fly",transitionParams:s[6],id:"sidebar",$$slots:{default:[create_default_slot]},$$scope:{ctx:s}};s[0]!==void 0&&(D.hidden=s[0]),t=new Drawer({props:D}),binding_callbacks.push(()=>bind(t,"hidden",M)),o=new Toasts({}),_=new Button({props:{colour:"grey",border:!0,active:s[2],narrow:!0,onClick:s[10],icon:faBars,classes:"mr-2"}}),p=new InstrumentButtons({}),S=new Button({props:{onClick:s[11],active:!s[0],colour:"yellow",text:"Parameters"}}),E=new Presets({props:{type:"project",keys:s[3],savePreset,deletePreset,editPreset,active:activePreset}}),j=new Parameters({}),F=new Qubits({});let X=s[5]&&!s[1]&&create_if_block();return{c(){r=element("meta"),n=space(),create_component(t.$$.fragment),l=space(),create_component(o.$$.fragment),c=space(),i=element("section"),f=element("div"),m=element("div"),create_component(_.$$.fragment),u=space(),create_component(p.$$.fragment),g=space(),y=element("div"),create_component(S.$$.fragment),b=space(),create_component(E.$$.fragment),x=space(),k=element("section"),T=element("div"),create_component(j.$$.fragment),A=space(),C=element("div"),I=element("div"),create_component(F.$$.fragment),N=space(),X&&X.c(),this.h()},l(O){const G=head_selector("svelte-17uodp2",document.head);r=claim_element(G,"META",{name:!0,content:!0}),G.forEach(detach),n=claim_space(O),claim_component(t.$$.fragment,O),l=claim_space(O),claim_component(o.$$.fragment,O),c=claim_space(O),i=claim_element(O,"SECTION",{class:!0});var K=children(i);f=claim_element(K,"DIV",{class:!0});var Z=children(f);m=claim_element(Z,"DIV",{class:!0});var U=children(m);claim_component(_.$$.fragment,U),u=claim_space(U),claim_component(p.$$.fragment,U),U.forEach(detach),g=claim_space(Z),y=claim_element(Z,"DIV",{class:!0});var V=children(y);claim_component(S.$$.fragment,V),V.forEach(detach),b=claim_space(Z),claim_component(E.$$.fragment,Z),Z.forEach(detach),K.forEach(detach),x=claim_space(O),k=claim_element(O,"SECTION",{class:!0});var L=children(k);T=claim_element(L,"DIV",{class:!0});var H=children(T);claim_component(j.$$.fragment,H),H.forEach(detach),A=claim_space(L),C=claim_element(L,"DIV",{class:!0});var J=children(C);I=claim_element(J,"DIV",{class:!0,style:!0});var ne=children(I);claim_component(F.$$.fragment,ne),ne.forEach(detach),N=claim_space(J),X&&X.l(J),J.forEach(detach),L.forEach(detach),this.h()},h(){document.title="Home",attr(r,"name","description"),attr(r,"content","TODO: please write a description"),attr(m,"class","buttons__instruments svelte-gb1mdj"),attr(y,"class","buttons__parameters svelte-gb1mdj"),attr(f,"class","buttons__inner svelte-gb1mdj"),attr(i,"class","buttons container mx-auto svelte-gb1mdj"),toggle_class(i,"hidden",s[1]),attr(T,"class","parameters svelte-gb1mdj"),toggle_class(T,"hidden",s[1]),attr(I,"class","qubits svelte-gb1mdj"),set_style(I,"max-height",s[5]&&!s[1]?"34rem":"none"),set_style(I,"height",s[1]?"100%":"auto"),toggle_class(I,"qubits--full",s[4]<3),attr(C,"class","interface svelte-gb1mdj"),attr(k,"class","container synth svelte-gb1mdj"),toggle_class(k,"synth--performance-mode",s[1])},m(O,G){append_hydration(document.head,r),insert_hydration(O,n,G),mount_component(t,O,G),insert_hydration(O,l,G),mount_component(o,O,G),insert_hydration(O,c,G),insert_hydration(O,i,G),append_hydration(i,f),append_hydration(f,m),mount_component(_,m,null),append_hydration(m,u),mount_component(p,m,null),append_hydration(f,g),append_hydration(f,y),mount_component(S,y,null),append_hydration(f,b),mount_component(E,f,null),insert_hydration(O,x,G),insert_hydration(O,k,G),append_hydration(k,T),mount_component(j,T,null),append_hydration(k,A),append_hydration(k,C),append_hydration(C,I),mount_component(F,I,null),append_hydration(C,N),X&&X.m(C,null),z=!0,R||(q=[listen$1(window_1,"click",startAudio),listen$1(window_1,"touchstart",startAudio),listen$1(window_1,"keydown",startAudio),listen$1(window_1,"resize",s[7])],R=!0)},p(O,[G]){const K={};G&8193&&(K.$$scope={dirty:G,ctx:O}),!a&&G&1&&(a=!0,K.hidden=O[0],add_flush_callback(()=>a=!1)),t.$set(K);const Z={};G&4&&(Z.active=O[2]),_.$set(Z);const U={};G&1&&(U.onClick=O[11]),G&1&&(U.active=!O[0]),S.$set(U);const V={};G&8&&(V.keys=O[3]),E.$set(V),(!z||G&2)&&toggle_class(i,"hidden",O[1]),(!z||G&2)&&toggle_class(T,"hidden",O[1]),(!z||G&34)&&set_style(I,"max-height",O[5]&&!O[1]?"34rem":"none"),(!z||G&2)&&set_style(I,"height",O[1]?"100%":"auto"),(!z||G&16)&&toggle_class(I,"qubits--full",O[4]<3),O[5]&&!O[1]?X?G&34&&transition_in(X,1):(X=create_if_block(),X.c(),transition_in(X,1),X.m(C,null)):X&&(group_outros(),transition_out(X,1,1,()=>{X=null}),check_outros()),(!z||G&2)&&toggle_class(k,"synth--performance-mode",O[1])},i(O){z||(transition_in(t.$$.fragment,O),transition_in(o.$$.fragment,O),transition_in(_.$$.fragment,O),transition_in(p.$$.fragment,O),transition_in(S.$$.fragment,O),transition_in(E.$$.fragment,O),transition_in(j.$$.fragment,O),transition_in(F.$$.fragment,O),transition_in(X),z=!0)},o(O){transition_out(t.$$.fragment,O),transition_out(o.$$.fragment,O),transition_out(_.$$.fragment,O),transition_out(p.$$.fragment,O),transition_out(S.$$.fragment,O),transition_out(E.$$.fragment,O),transition_out(j.$$.fragment,O),transition_out(F.$$.fragment,O),transition_out(X),z=!1},d(O){detach(r),O&&detach(n),destroy_component(t,O),O&&detach(l),destroy_component(o,O),O&&detach(c),O&&detach(i),destroy_component(_),destroy_component(p),destroy_component(S),destroy_component(E),O&&detach(x),O&&detach(k),destroy_component(j),destroy_component(F),X&&X.d(),R=!1,run_all(q)}}}function instance(s,r,n){let t,a,l,o,c;component_subscribe(s,performanceMode,y=>n(1,t=y)),component_subscribe(s,showSideMenu,y=>n(2,a=y)),component_subscribe(s,presetKeys,y=>n(3,l=y)),component_subscribe(s,activeQubitCount,y=>n(4,o=y)),component_subscribe(s,showKeyboard,y=>n(5,c=y));let i=!0,f={x:-320,duration:200,easing:sineIn};const m=()=>{n(0,i=!0)};onMount(async()=>{if(isChrome()||addToast("Please use Chrome for optimum audio performance","warning"),redrawCables(500),!isApp())return;initElectronAPI(),await login();const y=updateProfile();await getUsers();const S=broadcast(),b=listen();return window.addEventListener("beforeunload",logout$1),()=>{S(),b(),y(),window.removeEventListener("beforeunload",logout$1)}});const _=()=>n(0,i=!0);function u(y){i=y,n(0,i)}return[i,t,a,l,o,c,f,m,_,u,()=>showSideMenu.update(y=>!y),()=>n(0,i=!1)]}class Page extends SvelteComponent{constructor(r){super(),init(this,r,instance,create_fragment,safe_not_equal,{})}}export{Page as component,_page as universal};
